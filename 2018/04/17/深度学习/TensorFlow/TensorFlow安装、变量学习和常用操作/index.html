<!DOCTYPE html>
<html lang="en">
<head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Thinkgamer的博客">
    <meta name="keyword"  content="Python,Django,爬虫,Hadoop,Maching Learning,数据挖掘,机器学习,云计算,大数据,深度学习,开发者,程序猿,程序媛,极客,编程,代码,开源,IT网站,Developer,Programmer,Coder,用户体验">
    <link rel="shortcut icon" href="/assets/img/favicon.ico">

    <title>
        
        TensorFlow安装、变量学习和常用操作 - Thinkgamer的博客 | Thinkgamer&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body>

<!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> All In CTR、DL、ML、RL、NLP、KG </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/assets/img/head.jpg" />
        </div>
        <div class="name">
            <i>Thinkgamer</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#安装、入门"><span class="toc-text">安装、入门</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Tensorflow之变量"><span class="toc-text">Tensorflow之变量</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#tensor的理解"><span class="toc-text">tensor的理解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tf实现乘法"><span class="toc-text">tf实现乘法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tf的常用操作"><span class="toc-text">tf的常用操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tf实现i"><span class="toc-text">tf实现i++</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#numpy转tensor"><span class="toc-text">numpy转tensor</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#测试遇到的问题"><span class="toc-text">测试遇到的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1：tensorFlow与python版本不适应"><span class="toc-text">1：tensorFlow与python版本不适应</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2：变量未初始化"><span class="toc-text">2：变量未初始化</span></a></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> All In CTR、DL、ML、RL、NLP、KG </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        <div class="post-container">
    <div class="post-title">
        TensorFlow安装、变量学习和常用操作
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2018-04-17 00:55:28</span></span>
        
        <span class="attr">标签：/
            
            <a class="tag" href="/tags/#TensorFlow" title="TensorFlow">TensorFlow</a>
            <span>/</span>
            
            
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span></span>
        </span>
    </div>
    <div class="post-content no-indent">
        <blockquote>
<p>本文主要介绍TensorFlow的安装 ，变量学习和一些常用操作。</p>
</blockquote>
<a id="more"></a>
<h1 id="安装、入门"><a href="#安装、入门" class="headerlink" title="安装、入门"></a>安装、入门</h1><p>环境说明：</p>
<ul>
<li>deepin 15.4</li>
<li>python 3.5.4</li>
<li>tensorflow 1.7.0</li>
</ul>
<p>安装：<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install <span class="symbol">https:</span>/<span class="regexp">/pypi.python.org/packages</span><span class="regexp">/dd/ed</span><span class="regexp">/9e6c6c16ff50be054277438669542555a166ed9f95a0dcaacff24fd3153a/tensorflow</span>-<span class="number">1.7</span>.<span class="number">0</span>rc1-cp35-cp35m-manylinux1_x86_64.whl<span class="comment">#md5=ec44ad9b0d040caef8ca0fac5b822b0d</span></span><br></pre></td></tr></table></figure></p>
<p>测试：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>hello = tf.constant(<span class="string">"hello , Thinkgamer"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line"><span class="meta">... </span>    print(sess.run(hello))</span><br><span class="line"><span class="meta">... </span>    sess.close()</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="number">2018</span><span class="number">-03</span><span class="number">-28</span> <span class="number">00</span>:<span class="number">50</span>:<span class="number">16.728894</span>: I tensorflow/core/platform/cpu_feature_guard.cc:<span class="number">140</span>] Your CPU supports instructions that this TensorFlow binary was <span class="keyword">not</span> compiled to use: AVX2 FMA</span><br><span class="line"><span class="string">b'hello , Thinkgamer'</span></span><br></pre></td></tr></table></figure></p>
<p>使用 TensorFlow, 你必须明白 TensorFlow:</p>
<ul>
<li>使用图 (graph) 来表示计算任务.</li>
<li>在被称之为 会话 (Session) 的上下文 (context) 中执行图.</li>
<li>使用 tensor 表示数据.</li>
<li>通过 变量 (Variable) 维护状态.</li>
<li>使用 feed 和 fetch 可以为任意的操作(arbitrary operation) 赋值或者从其中获取数据.</li>
</ul>
<p><strong>session和InteractiveSession的区别：</strong></p>
<p>session：启动图的操作，有run()、close()<br>InteractiveSession：默认会话<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; sess = tf.InteractiveSession()</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a = tf.constant(5.0)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b = tf.constant(6.0)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; c = a * b</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; <span class="built_in">print</span>(c.eval())</span></span><br><span class="line">30.0</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; sess.close()</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; sess = tf.Session()</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; a = tf.constant(5.0)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; b = tf.constant(6.0)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; c = a * b</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; sess.run(c)</span></span><br><span class="line">30.0</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; sess.close()</span></span><br></pre></td></tr></table></figure></p>
<h1 id="Tensorflow之变量"><a href="#Tensorflow之变量" class="headerlink" title="Tensorflow之变量"></a>Tensorflow之变量</h1><h2 id="tensor的理解"><a href="#tensor的理解" class="headerlink" title="tensor的理解"></a>tensor的理解</h2><p>tensor即张量，tf中所有的数据通过数据流进行传输，可以声明任何一个张量，只有当一个张量进行run的时候，这个张量所涉及的tensor便会触发，这一点和spark的DAG很是相似，在同一条链上的某个节点进行触发操作时，该节点之前的所有节点便会参与计算。</p>
<p>在tensorflow中，张量的维数被描述为“阶”，张量是以list的形式存储的。list有几重中括号，对应的张量就是几阶。如t=[ [1,2,3],[4,5,6],[7,8,9] ]，t就是一个二阶张量。</p>
<p>我们可以认为，一阶张量，如[1,2,3]，相当于一个向量，二阶张量，如[ [1,2,3],[4,5,6],[7,8,9] ]，相当于一个矩阵。</p>
<p>对于t=[ [1,2,3],[4,5,6],[7,8,9] ]来说，它的shape==&gt;[3,3]，shape可以理解成：当脱去最外层的一对中括号后，里面有3个小list，然后每个小list里又有3个元素，所以该张量的shape==&gt;[3,3]。</p>
<p>举几个例子，如[ [1,2,3],[4,5,6] ] 的shape=[2,3](因为当脱去最外层的一对中括号后，里面有2个小list，然后每个小list里又有3个元素，所以该张量的shape==&gt;[2,3]。）</p>
<p>又如：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    [ </span><br><span class="line">        [ [ <span class="number">2</span> ], [ <span class="number">2</span> ] ] ,</span><br><span class="line">        [ [ <span class="number">2</span> ], [ <span class="number">2</span> ] ] , </span><br><span class="line">        [ [ <span class="number">2</span> ], [ <span class="number">2</span> ] ] </span><br><span class="line">    ] , </span><br><span class="line">    [ </span><br><span class="line">        [ [ <span class="number">2</span> ], [ <span class="number">2</span> ] ] , </span><br><span class="line">        [ [ <span class="number">2</span> ], [ <span class="number">2</span> ] ] , </span><br><span class="line">        [ [ <span class="number">2</span> ], [ <span class="number">2</span> ] ] </span><br><span class="line">    ] ,</span><br><span class="line">    [ </span><br><span class="line">        [ [ <span class="number">2</span> ], [ <span class="number">2</span> ] ] , </span><br><span class="line">        [ [ <span class="number">2</span> ], [ <span class="number">2</span> ] ] , </span><br><span class="line">        [ [ <span class="number">2</span> ], [ <span class="number">2</span> ] ]</span><br><span class="line">    ] ,</span><br><span class="line">    [ </span><br><span class="line">        [ [ <span class="number">2</span> ], [ <span class="number">2</span> ] ] ,</span><br><span class="line">        [ [ <span class="number">2</span> ], [ <span class="number">2</span> ] ] ,</span><br><span class="line">        [ [ <span class="number">2</span> ], [ <span class="number">2</span> ] ] </span><br><span class="line">    ] </span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>的shape==&gt;[4,3,2,1] (因为当脱去最外层的一对中括号后，里面有4个第二大的list，每个第二大的list里又有3个第三大的list，每个第三大的list里有2个第四大的list，每个第四大的list里有1个元素，所以该张量的shape==&gt;[4,3,2,1]。</p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#coding: utf-8</span><br><span class="line"></span><br><span class="line">'''</span><br><span class="line">create by: thinkgamer</span><br><span class="line">create time: 2018/04/16</span><br><span class="line">description: 关于tensorflow变量的学习</span><br><span class="line">'''</span><br><span class="line"></span><br><span class="line">import tensorflow as tf</span><br><span class="line"></span><br><span class="line">a = tf.Variable(<span class="comment">[ <span class="comment">[1,2,3]</span>,<span class="comment">[4,5,6]</span>,<span class="comment">[7,8,9]</span> ]</span>)</span><br><span class="line">b = tf.Variable(<span class="comment">[ <span class="comment">[1,2,3]</span>,<span class="comment">[4,5,6]</span> ]</span>)</span><br><span class="line">c = tf.Variable(<span class="comment">[<span class="comment">[ <span class="comment">[ <span class="comment">[ 2 ]</span>, <span class="comment">[ 2 ]</span> ]</span> ,<span class="comment">[ <span class="comment">[ 2 ]</span>, <span class="comment">[ 2 ]</span> ]</span> , <span class="comment">[ <span class="comment">[ 2 ]</span>, <span class="comment">[ 2 ]</span> ]</span> ]</span> ,</span></span><br><span class="line"><span class="comment">                 <span class="comment">[ <span class="comment">[ <span class="comment">[ 2 ]</span>, <span class="comment">[ 2 ]</span> ]</span> ,<span class="comment">[ <span class="comment">[ 2 ]</span>, <span class="comment">[ 2 ]</span> ]</span> , <span class="comment">[ <span class="comment">[ 2 ]</span>, <span class="comment">[ 2 ]</span> ]</span> ]</span> ,</span></span><br><span class="line"><span class="comment">                 <span class="comment">[ <span class="comment">[ <span class="comment">[ 2 ]</span>, <span class="comment">[ 2 ]</span> ]</span> ,<span class="comment">[ <span class="comment">[ 2 ]</span>, <span class="comment">[ 2 ]</span> ]</span> , <span class="comment">[ <span class="comment">[ 2 ]</span>, <span class="comment">[ 2 ]</span> ]</span> ]</span> ,</span></span><br><span class="line"><span class="comment">                 <span class="comment">[ <span class="comment">[ <span class="comment">[ 2 ]</span>, <span class="comment">[ 2 ]</span> ]</span> ,<span class="comment">[ <span class="comment">[ 2 ]</span>, <span class="comment">[ 2 ]</span> ]</span> , <span class="comment">[ <span class="comment">[ 2 ]</span>, <span class="comment">[ 2 ]</span> ]</span> ]</span> ]</span>)</span><br><span class="line">init_op = tf.global_variables_initializer()</span><br><span class="line"></span><br><span class="line">with tf.Session() as sess:</span><br><span class="line">    sess.run(init_op)</span><br><span class="line">print(<span class="string">"a shape: "</span>,a.eval)</span><br><span class="line">print(<span class="string">"b shape: "</span>,b.eval)</span><br><span class="line">print(<span class="string">"c shape: "</span>,c.eval)</span><br></pre></td></tr></table></figure>
<p>打印出的结果如下：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> shape:  &lt;bound method Variable<span class="selector-class">.eval</span> of &lt;tf<span class="selector-class">.Variable</span> <span class="string">'Variable_19:0'</span> shape=(<span class="number">3</span>, <span class="number">3</span>) dtype=int32_ref&gt;&gt;</span><br><span class="line"><span class="selector-tag">b</span> shape:  &lt;bound method Variable<span class="selector-class">.eval</span> of &lt;tf<span class="selector-class">.Variable</span> <span class="string">'Variable_20:0'</span> shape=(<span class="number">2</span>, <span class="number">3</span>) dtype=int32_ref&gt;&gt;</span><br><span class="line">c shape:  &lt;bound method Variable<span class="selector-class">.eval</span> of &lt;tf<span class="selector-class">.Variable</span> <span class="string">'Variable_21:0'</span> shape=(<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>) dtype=int32_ref&gt;&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="tf实现乘法"><a href="#tf实现乘法" class="headerlink" title="tf实现乘法"></a>tf实现乘法</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># tf 实现矩阵乘法</span><br><span class="line">val1 = tf.Variable(<span class="string">[[1,2]]</span>)</span><br><span class="line">val2 = tf.Variable(<span class="string">[[1],[2]]</span>)</span><br><span class="line">result1 = tf.matmul(val1,val2)</span><br><span class="line">init = tf.global_variables_initializer()</span><br><span class="line">with tf.Session() as sess:</span><br><span class="line">    sess.run(init)</span><br><span class="line">    <span class="built_in">print</span>(sess.run(result1))</span><br><span class="line">    sess.<span class="built_in">close</span>()</span><br></pre></td></tr></table></figure>
<h2 id="tf的常用操作"><a href="#tf的常用操作" class="headerlink" title="tf的常用操作"></a>tf的常用操作</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tf的常用操作，建议变量以float32为主,CPU,GPU均支持，否则容易出现一些错误,float32需要从tf中引入</span></span><br><span class="line"><span class="keyword">from</span> tensorflow import float32</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个shape=（3,4）的tensor</span></span><br><span class="line">t1 = tf.zeros([3,4],float32)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个shape类似于tensor的tensor，值分为全为0或1</span></span><br><span class="line">tensor = tf.Variable([ [1,2,3],[4,5,6],[7,8,9] ])</span><br><span class="line">t2 = tf.zeros_like(tensor)</span><br><span class="line">t3 = tf.ones_like(tensor)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建tensorflow支持的常量</span></span><br><span class="line">t4 = tf.constant([1,2,3,4])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建常量，指定值全为-1</span></span><br><span class="line">t5 = tf.constant(-1.0,shape=[2,3])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数组</span></span><br><span class="line">t6 = tf.linspace(1.0,6.0,3,<span class="attribute">name</span>=<span class="string">"linspace"</span>)</span><br><span class="line"><span class="comment"># start=1, limit=9, delta=3</span></span><br><span class="line">t7 = tf.range(1,9,3)</span><br><span class="line"></span><br><span class="line">init = tf.global_variables_initializer()</span><br><span class="line">with tf.Session() as sess:</span><br><span class="line">    sess.<span class="builtin-name">run</span>(init)</span><br><span class="line">    <span class="builtin-name">print</span>(<span class="string">"t1: "</span>,sess.<span class="builtin-name">run</span>(t1))</span><br><span class="line">    <span class="builtin-name">print</span>(<span class="string">"\ntermsor: "</span>,sess.<span class="builtin-name">run</span>(tensor))</span><br><span class="line">    <span class="builtin-name">print</span>(<span class="string">"\nt2: "</span>,sess.<span class="builtin-name">run</span>(t2))</span><br><span class="line">    <span class="builtin-name">print</span>(<span class="string">"\nt3: "</span>,sess.<span class="builtin-name">run</span>(t3))</span><br><span class="line">    <span class="builtin-name">print</span>(<span class="string">"\nt4: "</span>,sess.<span class="builtin-name">run</span>(t4))</span><br><span class="line">    <span class="builtin-name">print</span>(<span class="string">"\nt5: "</span>,sess.<span class="builtin-name">run</span>(t5))</span><br><span class="line">    <span class="builtin-name">print</span>(<span class="string">"\nt6: "</span>,sess.<span class="builtin-name">run</span>(t6))</span><br><span class="line">    <span class="builtin-name">print</span>(<span class="string">"\nt7: "</span>,sess.<span class="builtin-name">run</span>(t7))</span><br><span class="line">sess.close()</span><br><span class="line"></span><br><span class="line"><span class="comment">#-----------------------------------------</span></span><br><span class="line"><span class="comment"># tf创建符合指定正态分布的tensor</span></span><br><span class="line">t8 = tf.random_normal([2,3],<span class="attribute">mean</span>=-1 ,<span class="attribute">stddev</span>=4)</span><br><span class="line"></span><br><span class="line"><span class="comment"># tf shuffle</span></span><br><span class="line">t9 = tf.constant([[1,2],[3,4],[5,6]])</span><br><span class="line">t10 = tf.random_shuffle(t9)</span><br><span class="line"></span><br><span class="line">sess = tf.Session()</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">"\nt8:"</span>,sess.<span class="builtin-name">run</span>(t8))</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">"\nt9:"</span>,sess.<span class="builtin-name">run</span>(t9))</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">"\nt10"</span>,sess.<span class="builtin-name">run</span>(t10))</span><br></pre></td></tr></table></figure>
<p>打印出的值为：<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">t1:  <span class="string">[[0. 0. 0. 0.]</span></span><br><span class="line"><span class="string"> [0. 0. 0. 0.]</span></span><br><span class="line"><span class="string"> [0. 0. 0. 0.]]</span></span><br><span class="line"></span><br><span class="line">termsor:  <span class="string">[[1 2 3]</span></span><br><span class="line"><span class="string"> [4 5 6]</span></span><br><span class="line"><span class="string"> [7 8 9]]</span></span><br><span class="line"></span><br><span class="line">t2:  <span class="string">[[0 0 0]</span></span><br><span class="line"><span class="string"> [0 0 0]</span></span><br><span class="line"><span class="string"> [0 0 0]]</span></span><br><span class="line"></span><br><span class="line">t3:  <span class="string">[[1 1 1]</span></span><br><span class="line"><span class="string"> [1 1 1]</span></span><br><span class="line"><span class="string"> [1 1 1]]</span></span><br><span class="line"></span><br><span class="line">t4:  [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">t5:  <span class="string">[[-1. -1. -1.]</span></span><br><span class="line"><span class="string"> [-1. -1. -1.]]</span></span><br><span class="line"></span><br><span class="line">t6:  [<span class="number">1.</span>  <span class="number">3.5</span> <span class="number">6.</span> ]</span><br><span class="line"></span><br><span class="line">t7:  [<span class="number">1</span> <span class="number">4</span> <span class="number">7</span>]</span><br><span class="line"></span><br><span class="line">t8:  <span class="string">[[  0.8365586   5.152416   -3.9977255]</span></span><br><span class="line"><span class="string"> [ -1.7592524 -12.675492   -5.949805 ]]</span></span><br><span class="line"></span><br><span class="line">t9:  <span class="string">[[1 2]</span></span><br><span class="line"><span class="string"> [3 4]</span></span><br><span class="line"><span class="string"> [5 6]]</span></span><br><span class="line"></span><br><span class="line">t10:  <span class="string">[[3 4]</span></span><br><span class="line"><span class="string"> [5 6]</span></span><br><span class="line"><span class="string"> [1 2]]</span></span><br><span class="line">In [ ]:</span><br></pre></td></tr></table></figure></p>
<h2 id="tf实现i"><a href="#tf实现i" class="headerlink" title="tf实现i++"></a>tf实现i++</h2><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tf 实现i++</span></span><br><span class="line"><span class="keyword">state</span>= tf.Variable(<span class="number">1</span>)</span><br><span class="line">new_value = tf.add(<span class="keyword">state</span>,tf.Variable(<span class="number">1</span>))</span><br><span class="line">update = tf.assign(<span class="keyword">state</span>,new_value)</span><br><span class="line"></span><br><span class="line">with tf.Session() as sess:</span><br><span class="line">    sess.run(tf.global_variables_initializer())</span><br><span class="line">    print(sess.run(<span class="keyword">state</span>))</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">        sess.run(update)</span><br><span class="line">        print(sess.run(<span class="keyword">state</span>))</span><br></pre></td></tr></table></figure>
<p>打印结果为：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure></p>
<h2 id="numpy转tensor"><a href="#numpy转tensor" class="headerlink" title="numpy转tensor"></a>numpy转tensor</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># numpy 转化为 tensor</span><br><span class="line">import numpy <span class="keyword">as</span> np</span><br><span class="line">np1 = np.zeros((<span class="number">3</span>,<span class="number">3</span>))</span><br><span class="line"><span class="keyword">ta</span> = <span class="keyword">tf</span>.convert_to_tensor(np1)</span><br><span class="line">with <span class="keyword">tf</span>.Session() <span class="keyword">as</span> <span class="keyword">tf</span>:</span><br><span class="line">    <span class="keyword">print</span>(sess.run(<span class="keyword">ta</span>))</span><br></pre></td></tr></table></figure>
<h1 id="测试遇到的问题"><a href="#测试遇到的问题" class="headerlink" title="测试遇到的问题"></a>测试遇到的问题</h1><h2 id="1：tensorFlow与python版本不适应"><a href="#1：tensorFlow与python版本不适应" class="headerlink" title="1：tensorFlow与python版本不适应"></a>1：tensorFlow与python版本不适应</h2><p>现象：NameError: name ‘XXX’ is not defined<br>原因是：当前tensorflow版本与python版本不适应。<br>解决办法：重新安装tf<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">pip3</span> <span class="selector-tag">install</span> <span class="selector-tag">--upgrade</span> <span class="selector-tag">tensorflow</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">------------</span></span><br><span class="line"><span class="selector-tag">Collecting</span> <span class="selector-tag">tensorflow</span></span><br><span class="line">  <span class="selector-tag">Downloading</span> <span class="selector-tag">tensorflow-1</span><span class="selector-class">.6</span><span class="selector-class">.0-cp35-cp35m-manylinux1_x86_64</span><span class="selector-class">.whl</span> (45<span class="selector-class">.8MB</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="2：变量未初始化"><a href="#2：变量未初始化" class="headerlink" title="2：变量未初始化"></a>2：变量未初始化</h2><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FailedPreconditionError (see <span class="keyword">above</span> <span class="keyword">for</span> traceback): Attempting <span class="keyword">to</span> use uninitialized value Variable_58</span><br></pre></td></tr></table></figure>
<p>解决办法：将变量进行初始化<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">init = tf.global_variables_initializer()</span><br><span class="line">tf.Session().run(init)</span><br></pre></td></tr></table></figure></p>
<hr>
<center>
【技术服务】，详情点击查看：
<a href="https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg" target="_blank" rel="external">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>
</center>

<hr>
<center>
<img src="https://img-blog.csdnimg.cn/20191108184219834.jpeg">
<br>
扫一扫 关注微信公众号！号主 专注于搜索和推荐系统，尝试使用算法去更好的服务于用户，包括但不局限于机器学习，深度学习，强化学习，自然语言理解，知识图谱，还不定时分享技术，资料，思考等文章！
</center>

<hr>
<center><img src="https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70" width="80%"></center>

<center><img src="https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70" width="80%"></center>
        
            <div class="donate-container">
    <div class="donate-button">
        <button id="donate-button">赞赏</button>
    </div>
    <div class="donate-img-container hide" id="donate-img-container">
        <img id="donate-img" src="" data-src="/assets/img/weixin.jpeg">
        <p> 你的支持是我进步的最大动力！ </p>
    </div>
</div>
        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        
        <li>
            <a target="_blank" href="https://www.zhihu.com/people/thinkgamer">
                            <span class="fa-stack fa-lg">
                                 <i class="iconfont icon-zhihu"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank" href="http://weibo.com/5352480017">
                            <span class="fa-stack fa-lg">
                                  <i class="iconfont icon-weibo"></i>
                            </span>
            </a>
        </li>
        

        

        
        <li>
            <a target="_blank"  href="https://github.com/thinkgamer">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        


        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="https://item.jd.com/12671716.html">处女作：推荐系统开发实战</a></span>
        <span>/</span>
        
        <span><a href="https://mp.weixin.qq.com/s/vkDfg3v5C7QPrLOTvTRH2w">搜索与推荐Wiki</a></span>
        <span>/</span>
        
        <span><a href="https://blog.csdn.net/gamer_gyt">CSDN博客</a></span>
        <span>/</span>
        
        <span><a href="https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg">商务合作</a></span>
        <span>/</span>
        
        <span><a href="https://www.a2data.cn/">牛人之A2Data</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        || Created By <a href="https://blog.csdn.net/gamer_gyt">Thinkgamer</a></p>
</footer>




<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<!-- <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> --><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
