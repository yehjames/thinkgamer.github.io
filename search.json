[{"title":"ã€æŠ€æœ¯æœåŠ¡ã€‘å’Œã€å•†åŠ¡åˆä½œã€‘","url":"/2066/06/06/éšç¼˜/å•†åŠ¡åˆä½œä»‹ç»/","content":"\n---\n<center>\n<br><br>\n<font size=\"8\" style=\"font-weight:bold; color: green;\">WelCome To â€œThinkgamer å°ç«™â€</font>\n<br><br>\n</center>\n\n----\n\nå…¨ç½‘å”¯ä¸€IDï¼šThinkgamer,ä¸ªäººå¾®ä¿¡å…¬ä¼—å·â€æœç´¢ä¸æ¨èWikiâ€œï¼Œå¯åœ¨å…¬ä¼—å·æ·»åŠ æˆ‘çš„å¾®ä¿¡ï¼Œæœ¬äººæ¶‰çŒèŒƒå›´åŒ…æ‹¬ï¼šæ¨èç³»ç»Ÿï¼Œæ•°æ®æŒ–æ˜ï¼Œæ•°æ®åˆ†æï¼Œå…¨ç«™å¼€å‘ï¼Œå¤§æ•°æ®ã€‚\n\n### About\n\nCyanScikitç§‘æŠ€å›¢é˜Ÿæˆç«‹äº2019å¹´ï¼Œç”±ä¸€ç¾¤çƒ­çˆ±æŠ€æœ¯ï¼Œè¿½æ±‚æè‡´çš„Coderså’ŒManagersç»„æˆï¼\n\n### Leader\nå…¨çƒå”¯ä¸€IDï¼šThinkgamerã€‚ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ä½œè€…ï¼ŒCSDNåšå®¢æŠ€æœ¯ä¸“å®¶ï¼ŒåŸTopç”µå•†ç®—æ³•å·¥ç¨‹å¸ˆã€‚æ“…é•¿é¢†åŸŸï¼š\n- æ¨èç³»ç»Ÿ\n- æ•°æ®å¼€å‘/åˆ†æ/æŒ–æ˜\n\n### Service\n<center>\n\t<img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"99%\">\n</center>\n\n- æŠ€æœ¯å’¨è¯¢ã€å­¦ä¹ è·¯çº¿å®šåˆ¶\n- æ¨èç³»ç»Ÿã€æŠ€æœ¯åŸ¹è®­\n- æ•°æ®å­˜å‚¨ï¼ˆæ–¹æ¡ˆ/è§„èŒƒç­‰ï¼‰ã€æ•°æ®å¼€å‘ã€æ•°æ®åˆ†æã€æ•°æ®æŒ–æ˜\n- æ•°æ®å¯è§†åŒ–ã€å°ç¨‹åº/H5ã€å…¨æ ˆå¼€å‘\n- çˆ¬è™«ã€å¹¿å‘Šæ¥å…¥\n\n### Purpose\n\nä½¿ç”¨æŠ€æœ¯å»æ›´å¥½çš„æœåŠ¡äºå®¢æˆ·ï¼\n\n### Team\n<center>\n\t<img src=\"https://img-blog.csdnimg.cn/20191105121227125.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"99%\">\n</center>\n\n### Contact Me\n\n<center>\n\t<img src=\"https://img-blog.csdnimg.cn/20191105121227125.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"99%\">\n</center>\n\n<center>\n\t<img src=\"https://img-blog.csdnimg.cn/20191105121446131.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"99%\">\n</center>","tags":["éšæ‰‹è®°"]},{"title":"ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹14ã€æ¨èä¸­å¿ƒ.md","url":"/2019/12/05/RecSys/æ–‡ç« æ¨èç³»ç»Ÿ/ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹14ã€æ¨èä¸­å¿ƒ/","content":"\nåœ¨å‰é¢çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†å¬å›å’Œæ’åºï¼Œæ¥ä¸‹æ¥å°†è¿›å…¥æ¨èé€»è¾‘å¤„ç†é˜¶æ®µï¼Œé€šå¸¸ç§°ä¸ºæ¨èä¸­å¿ƒï¼Œæ¨èä¸­å¿ƒè´Ÿè´£æ¥æ”¶åº”ç”¨ç³»ç»Ÿçš„æ¨èè¯·æ±‚ï¼Œè¯»å–å¬å›å’Œæ’åºçš„ç»“æœå¹¶è¿›è¡Œè°ƒæ•´ï¼Œæœ€åè¿”å›ç»™åº”ç”¨ç³»ç»Ÿã€‚æ¨èä¸­å¿ƒçš„è°ƒç”¨æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n![](https://upload-images.jianshu.io/upload_images/12790782-84442ee3d9e5a3ba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n# æ¨èæ¥å£è®¾è®¡\né€šå¸¸æ¨èæ¥å£åŒ…æ‹¬ Feed æµæ¨èå’Œç›¸ä¼¼æ–‡ç« æ¨è\n- Feed æµæ¨èï¼šæ ¹æ®ç”¨æˆ·åå¥½ï¼Œè·å–æ¨èæ–‡ç« åˆ—è¡¨ï¼ˆè¿™é‡Œçš„æ—¶é—´æˆ³ç”¨äºåŒºåˆ†æ˜¯åˆ·æ–°æ¨èåˆ—è¡¨è¿˜æ˜¯æŸ¥çœ‹å†å²æ¨èåˆ—è¡¨ï¼‰\nå‚æ•°ï¼šç”¨æˆ· IDï¼Œé¢‘é“ IDï¼Œæ¨èæ–‡ç« æ•°é‡ï¼Œè¯·æ±‚æ¨èçš„æ—¶é—´æˆ³\nç»“æœï¼šæ›å…‰å‚æ•°ï¼Œæ¯ç¯‡æ–‡ç« çš„è¡Œä¸ºåŸ‹ç‚¹å‚æ•°ï¼Œä¸Šä¸€æ¡æ¨èçš„æ—¶é—´æˆ³\n- ç›¸ä¼¼æ–‡ç« æ¨èï¼šå½“ç”¨æˆ·æµè§ˆæŸæ–‡ç« æ—¶ï¼Œè·å–è¯¥æ–‡ç« çš„ç›¸ä¼¼æ–‡ç« åˆ—è¡¨\nå‚æ•°ï¼šæ–‡ç«  IDï¼Œæ¨èæ–‡ç« æ•°é‡\nç»“æœï¼šæ–‡ç«  ID åˆ—è¡¨\n\nè¡Œä¸ºåŸ‹ç‚¹å‚æ•°ï¼š\n```\n{\n    \"param\": '{\"action\": \"exposure\", \"userId\": 1, \"articleId\": [1,2,3,4],  \"algorithmCombine\": \"c1\"}',\n    \"recommends\": [\n        {\"article_id\": 1, \"param\": {\"click\": \"{\"action\": \"click\", \"userId\": \"1\", \"articleId\": 1, \"algorithmCombine\": 'c1'}\", \"collect\": \"...\", \"share\": \"...\",\"read\":\"...\"}},\n        {\"article_id\": 2, \"param\": {\"click\": \"...\", \"collect\": \"...\", \"share\": \"...\", \"read\":\"...\"}},\n        {\"article_id\": 3, \"param\": {\"click\": \"...\", \"collect\": \"...\", \"share\": \"...\", \"read\":\"...\"}},\n        {\"article_id\": 4, \"param\": {\"click\": \"...\", \"collect\": \"...\", \"share\": \"...\", \"read\":\"...\"}}\n    ]\n    \"timestamp\": 1546391572\n}\n```\nè¿™é‡Œæ¥å£é‡‡ç”¨ gRPC æ¡†æ¶ï¼Œåœ¨ user_reco.proto æ–‡ä»¶ä¸­å®šä¹‰ Protobuf åºåˆ—åŒ–åè®®ï¼Œå…¶ä¸­å®šä¹‰äº† Feed æµæ¨èæ¥å£ï¼š`rpc user_recommend(User) returns (Track) {}` å’Œç›¸ä¼¼æ–‡ç« æ¥å£ï¼š`rpc article_recommend(Article) returns(Similar) {}`\n```\nsyntax = \"proto3\";\n\nmessage User {\n    string user_id = 1;\n    int32 channel_id = 2;\n    int32 article_num = 3;\n    int64 time_stamp = 4;\n}\n// int32 ---> int64 article_id\nmessage Article {\n    int64 article_id = 1;\n    int32 article_num = 2;\n\n}\n\nmessage param2 {\n    string click = 1;\n    string collect = 2;\n    string share = 3;\n    string read = 4;\n}\n\nmessage param1 {\n    int64 article_id = 1;\n    param2 params = 2;\n}\n\nmessage Track {\n    string exposure = 1;\n    repeated param1 recommends = 2;\n    int64 time_stamp = 3;\n}\n\nmessage Similar {\n    repeated int64 article_id = 1;\n}\n\nservice UserRecommend {\n    rpc user_recommend(User) returns (Track) {}\n    rpc article_recommend(Article) returns(Similar) {}\n}\n```\næ¥ç€ï¼Œé€šè¿‡å¦‚ä¸‹å‘½ä»¤ç”ŸæˆæœåŠ¡ç«¯æ–‡ä»¶ user_reco_pb2.py å’Œå®¢æˆ·ç«¯æ–‡ä»¶ user_reco_pb2_grpc.py\n```\npython -m grpc_tools.protoc -I. --python_out=. --grpc_python_out=. user_reco.proto\n```\nå®šä¹‰å‚æ•°è§£æç±»ï¼Œç”¨äºè§£ææ¨èè¯·æ±‚çš„å‚æ•°ï¼ŒåŒ…æ‹¬ç”¨æˆ· IDã€é¢‘é“ IDã€æ–‡ç« æ•°é‡ã€è¯·æ±‚æ—¶é—´æˆ³ä»¥åŠç®—æ³•åç§°\n```\nclass Temp(object):\n    user_id = -10\n    channel_id = -10\n    article_num = -10\n    time_stamp = -10\n    algo = \"\"\n```\nå®šä¹‰å°è£…åŸ‹ç‚¹å‚æ•°æ–¹æ³•ï¼Œå…¶ä¸­å‚æ•° `res` ä¸ºæ¨èç»“æœï¼Œå‚æ•° `temp` ä¸ºç”¨æˆ·è¯·æ±‚å‚æ•°ï¼Œå°†æ¨èç»“æœå°è£…ä¸ºåœ¨ user_reco.proto æ–‡ä»¶ä¸­å®šä¹‰çš„ Track ç»“æ„ï¼Œå…¶ä¸­æºå¸¦äº†æ–‡ç« å¯¹åŸ‹ç‚¹å‚æ•°ï¼ŒåŒ…æ‹¬äº†äº‹ä»¶åç§°ã€ç®—æ³•åç§°ä»¥åŠæ—¶é—´ç­‰ç­‰ï¼Œæ–¹ä¾¿åé¢è§£æç”¨æˆ·å¯¹æ–‡ç« å¯¹è¡Œä¸ºä¿¡æ¯\n```\ndef add_track(res, temp):\n    \"\"\"\n    å°è£…åŸ‹ç‚¹å‚æ•°\n    :param res: æ¨èæ–‡ç« idåˆ—è¡¨\n    :param temp: rpcå‚æ•°\n    :return: åŸ‹ç‚¹å‚æ•°\n        æ–‡ç« åˆ—è¡¨å‚æ•°\n        å•æ–‡ç« å‚æ•°\n    \"\"\"\n    # æ·»åŠ åŸ‹ç‚¹å‚æ•°\n    track = {}\n\n    # å‡†å¤‡æ›å…‰å‚æ•°\n    # å…¨éƒ¨å­—ç¬¦ä¸²å½¢å¼æä¾›ï¼Œåœ¨hiveç«¯ä¸ä¼šè§£æé—®é¢˜\n    _exposure = {\"action\": \"exposure\", \"userId\": temp.user_id, \"articleId\": json.dumps(res),\n                 \"algorithmCombine\": temp.algo}\n\n    track['param'] = json.dumps(_exposure)\n    track['recommends'] = []\n\n    # å‡†å¤‡å…¶å®ƒç‚¹å‡»å‚æ•°\n    for _id in res:\n        # æ„é€ å­—å…¸\n        _dic = {}\n        _dic['article_id'] = _id\n        _dic['param'] = {}\n\n        # å‡†å¤‡clickå‚æ•°\n        _p = {\"action\": \"click\", \"userId\": temp.user_id, \"articleId\": str(_id),\n              \"algorithmCombine\": temp.algo}\n\n        _dic['param']['click'] = json.dumps(_p)\n        # å‡†å¤‡collectå‚æ•°\n        _p[\"action\"] = 'collect'\n        _dic['param']['collect'] = json.dumps(_p)\n        # å‡†å¤‡shareå‚æ•°\n        _p[\"action\"] = 'share'\n        _dic['param']['share'] = json.dumps(_p)\n        # å‡†å¤‡detentionTimeå‚æ•°\n        _p[\"action\"] = 'read'\n        _dic['param']['read'] = json.dumps(_p)\n\n        track['recommends'].append(_dic)\n\n    track['timestamp'] = temp.time_stamp\n    return track\n```\n# AB Test æµé‡åˆ‡åˆ†\nç”±äºæ¨èç®—æ³•å’Œç­–ç•¥æ˜¯éœ€è¦ä¸æ–­æ”¹è¿›å’Œå®Œå–„ç­‰ï¼Œæ‰€ä»¥ ABTest ä¹Ÿæ˜¯æ¨èç³»ç»Ÿä¸å¯æˆ–ç¼ºçš„åŠŸèƒ½ã€‚å¯ä»¥æ ¹æ®ç”¨æˆ· ID å°†æµé‡åˆ‡åˆ†ä¸ºå¤šä¸ªæ¡¶ï¼ˆBucketï¼‰ï¼Œæ¯ä¸ªæ¡¶å¯¹åº”ä¸€ç§æ’åºç­–ç•¥ï¼Œæ¡¶å†…æµé‡å°†ä½¿ç”¨ç›¸åº”çš„ç­–ç•¥è¿›è¡Œæ’åºï¼Œä½¿ç”¨ ID è¿›è¡Œæµé‡åˆ‡åˆ†èƒ½å¤Ÿä¿è¯ç”¨æˆ·ä½“éªŒçš„ä¸€è‡´æ€§ã€‚é€šå¸¸ ABTest è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n![](https://upload-images.jianshu.io/upload_images/12790782-a422277ff8f14b37.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\né€šè¿‡å®šä¹‰ AB Test å‚æ•°ï¼Œå¯ä»¥å®ç°ä¸ºä¸åŒçš„ç”¨æˆ·ä½¿ç”¨ä¸åŒçš„æ¨èç®—æ³•ç­–ç•¥ï¼Œå…¶ä¸­ `COMBINE` ä¸ºèåˆæ–¹å¼ï¼Œ`RECALL` ä¸ºå¬å›æ–¹å¼ï¼Œ`SORT` ä¸ºæ’åºæ–¹å¼ï¼Œ`CHANNEL` ä¸ºé¢‘é“æ•°é‡ï¼Œ`BYPASS` ä¸ºåˆ†æ¡¶è®¾ç½®ï¼Œ`sort_dict` ä¸ºä¸åŒçš„æ’åºæœåŠ¡å¯¹è±¡ã€‚å¯ä»¥çœ‹åˆ° Algo-1 ä½¿ç”¨ LR è¿›è¡Œæ’åºï¼Œè€Œ Algo-2 ä½¿ç”¨ Wide&Deep è¿›è¡Œæ’åº\n```python\nfrom collections import namedtuple\n\n# ABTestå‚æ•°ä¿¡æ¯\nparam = namedtuple('RecommendAlgorithm', ['COMBINE',\n                                          'RECALL',\n                                          'SORT',\n                                          'CHANNEL',\n                                          'BYPASS']\n                   )\n\nRAParam = param(\n    COMBINE={\n        'Algo-1': (1, [100, 101, 102, 103, 104], [200]),  # é¦–é¡µæ¨èï¼Œæ‰€æœ‰å¬å›ç»“æœè¯»å–+LRæ’åº\n        'Algo-2': (2, [100, 101, 102, 103, 104], [201])  # é¦–é¡µæ¨èï¼Œæ‰€æœ‰å¬å›ç»“æœè¯»å– æ’åº\n    },\n    RECALL={\n        100: ('cb_recall', 'als'),  # ç¦»çº¿æ¨¡å‹ALSå¬å›ï¼Œrecall:user:1115629498121 column=als:18\n        101: ('cb_recall', 'content'),  # ç¦»çº¿word2vecçš„ç”»åƒå†…å®¹å¬å› 'recall:user:5', 'content:1'\n        102: ('cb_recall', 'online'),  # åœ¨çº¿word2vecçš„ç”»åƒå¬å› 'recall:user:1', 'online:1'\n        103: 'new_article',  # æ–°æ–‡ç« å¬å› rediså½“ä¸­    ch:18:new\n        104: 'popular_article',  # åŸºäºç”¨æˆ·ååŒå¬å›ç»“æœ ch:18:hot\n        105: ('article_similar', 'similar')  # æ–‡ç« ç›¸ä¼¼æ¨èç»“æœ '1' 'similar:2'\n    },\n    SORT={\n        200: 'LR',\n        201: 'WDLâ€˜\n    },\n    CHANNEL=25,\n    BYPASS=[\n            {\n                \"Bucket\": ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd'],\n                \"Strategy\": \"Algo-1\"\n            },\n            {\n                \"BeginBucket\": ['e', 'f'],\n                \"Strategy\": \"Algo-2\"\n            }\n        ]\n)\n\nsort_dict = {\n    \"LR\": lr_sort_service,\n    \"WDL\": wdl_sort_service\n}\n```\n\næµé‡åˆ‡åˆ†ï¼Œå°†ç”¨æˆ· ID è¿›è¡Œå“ˆå¸Œï¼Œç„¶åå–å“ˆå¸Œç»“æœçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œå°†åŒ…å«è¯¥å­—ç¬¦çš„ç­–ç•¥æ¡¶æ‰€å¯¹åº”çš„ç®—æ³•ç¼–å·èµ‹å€¼åˆ°æ­¤ç”¨æˆ·è¯·æ±‚å‚æ•°çš„ `algo` å±æ€§ä¸­ï¼Œåé¢å°†è°ƒç”¨è¯¥ç¼–å·å¯¹åº”çš„ç®—æ³•ç­–ç•¥ä¸ºæ­¤ç”¨æˆ·è®¡ç®—æ¨èæ•°æ®\n```\nimport hashlib\nfrom setting.default import DefaultConfig, RAParam\n\n# è¿›è¡Œåˆ†æ¡¶å®ç°åˆ†æµï¼Œåˆ¶å®šä¸åŒçš„å®éªŒç­–ç•¥\nbucket = hashlib.md5(user_id.encode()).hexdigest()[:1]\nif bucket in RAParam.BYPASS[0]['Bucket']:\n    temp.algo = RAParam.BYPASS[0]['Strategy']\nelse:\n    temp.algo = RAParam.BYPASS[1]['Strategy']\n```\n# æ¨èä¸­å¿ƒé€»è¾‘\næ¨èä¸­å¿ƒé€»è¾‘ä¸»è¦åŒ…æ‹¬ï¼š\n- æ¥æ”¶åº”ç”¨ç³»ç»Ÿå‘é€çš„æ¨èè¯·æ±‚ï¼Œè§£æè¯·æ±‚å‚æ•°\n- è¿›è¡Œ ABTest åˆ†æµï¼Œä¸ºç”¨æˆ·åˆ†é…æ¨èç­–ç•¥\n- æ ¹æ®åˆ†é…çš„ç®—æ³•è°ƒç”¨å¬å›æœåŠ¡å’Œæ’åºæœåŠ¡ï¼Œè¯»å–æ¨èç»“æœ\n- æ ¹æ®ä¸šåŠ¡è¿›è¡Œè°ƒæ•´ï¼Œå¦‚è¿‡æ»¤ã€è¡¥è¶³ã€åˆå¹¶ä¿¡æ¯ç­‰\n- å°è£…åŸ‹ç‚¹å‚æ•°ï¼Œè¿”å›æ¨èç»“æœ\n\n![](https://upload-images.jianshu.io/upload_images/12790782-dd571ececce3d264.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\né¦–å…ˆï¼Œåœ¨ Hbase ä¸­åˆ›å»ºå†å²æ¨èç»“æœè¡¨ history_recommendï¼Œç”¨äºå­˜å‚¨ç”¨æˆ·å†å²æ¨èç»“æœ\n```\ncreate 'history_recommend', {NAME=>'channel', TTL=>7776000, VERSIONS=>999999}   86400\n# æ¯æ¬¡æŒ‡å®šä¸€ä¸ªæ—¶é—´æˆ³,å¯ä»¥è¾¾åˆ°ä¸åŒç‰ˆæœ¬çš„æ•ˆæœ\nput 'history_recommend', 'reco:his:1', 'channel:18', [17283, 140357, 14668, 15182, 17999, 13648, 12884,18135]\n```\nç»§ç»­åœ¨ Hbase ä¸­åˆ›å»ºå¾…æ¨èç»“æœè¡¨ wait_recommendï¼Œç”¨äºå­˜å‚¨ç»è¿‡å¤šè·¯å¬å›å¹¶ä¸”æ’åºä¹‹åçš„å¾…æ¨èç»“æœï¼Œå½“ wait_recommend æ²¡æœ‰æ•°æ®æ—¶ï¼Œæ‰å†æ¬¡è°ƒç”¨æ’åºæœåŠ¡è®¡ç®—å‡ºæ–°çš„å¾…æ¨èç»“æœå¹¶å†™å…¥åˆ° wait_recommendï¼Œæ‰€ä»¥ä¸éœ€è®¾ç½®å¤šä¸ªç‰ˆæœ¬ã€‚æ³¨æ„è¯¥è¡¨ä¸ cb_recall çš„åŒºåˆ«ï¼Œcb_recall å­˜å‚¨çš„æ˜¯è¿˜æœªç»æ’åºçš„å¬å›ç»“æœã€‚\n```\ncreate 'wait_recommend', 'channel'\n\nput 'wait_recommend', 'reco:1', 'channel:18', [17283, 140357, 14668, 15182, 17999, 13648, 12884,18135]\nput 'wait_recommend', 'reco:1', 'channel:0', [17283, 140357, 14668, 15182, 17999, 13648, 12884, 17302, 13846]\n```\nç”¨æˆ·è·å– Feed æµæ¨èæ•°æ®æ—¶ï¼Œå¦‚æœç”¨æˆ·å‘ä¸‹æ»‘åŠ¨ï¼Œå‘å‡ºçš„æ˜¯åˆ·æ–°æ¨èåˆ—è¡¨çš„è¯·æ±‚ï¼Œéœ€è¦ä¼ å…¥å½“å‰æ—¶é—´ä½œä¸ºè¯·æ±‚æ—¶é—´æˆ³å‚æ•°ï¼Œè¯¥è¯·æ±‚æ—¶é—´æˆ³å¿…ç„¶å¤§äº Hbase å†å²æ¨èç»“æœè¡¨ä¸­çš„è¯·æ±‚æ—¶é—´æˆ³ï¼Œé‚£ä¹ˆç¨‹åºå°†è·å–æ–°çš„æ¨èåˆ—è¡¨ï¼Œå¹¶è¿”å› Hbase å†å²æ¨èç»“æœè¡¨ä¸­æœ€è¿‘ä¸€æ¬¡æ¨èçš„è¯·æ±‚æ—¶é—´æˆ³ï¼Œç”¨äºæŸ¥è¯¢å†å²æ¨èç»“æœï¼›å¦‚æœç”¨æˆ·å‘ä¸Šæ»‘åŠ¨ï¼Œå‘å‡ºçš„æ˜¯æŸ¥çœ‹å†å²æ¨èç»“æœçš„è¯·æ±‚ï¼Œéœ€è¦ä¼ å…¥å‰é¢åˆ·æ–°æ¨èåˆ—è¡¨æ—¶è¿”å›çš„æœ€è¿‘ä¸€æ¬¡æ¨èçš„è¯·æ±‚æ—¶é—´æˆ³ï¼Œè¯¥è¯·æ±‚æ—¶é—´æˆ³å¿…ç„¶å°äºç­‰äº Hbase å†å²æ¨èç»“æœä¸­æœ€è¿‘ä¸€æ¬¡æ¨èçš„æ—¶é—´æˆ³ï¼Œé‚£ä¹ˆç¨‹åºå°†è·å–å°äºç­‰äºè¯¥è¯·æ±‚æ—¶é—´æˆ³çš„æœ€è¿‘ä¸€æ¬¡å†å²æ¨èç»“æœï¼Œå¹¶è¿”å›å°äºè¯¥æ¨èç»“æœæœ€è¿‘ä¸€æ¬¡æ¨èçš„æ—¶é—´æˆ³ï¼Œä¹Ÿå°±æ˜¯ä¸Šä¸€æ¬¡æ¨èçš„æ—¶é—´æˆ³ï¼Œä¸‹é¢æ˜¯å…·ä½“å®ç°ã€‚\n\nåœ¨è·å–æ¨èåˆ—è¡¨æ—¶ï¼Œé¦–å…ˆè·å–ç”¨æˆ·çš„å†å²æ•°æ®åº“ä¸­æœ€è¿‘ä¸€æ¬¡æ—¶é—´æˆ³ `last_stamp`ï¼Œæ²¡æœ‰åˆ™å°† `last_stamp` ç½®ä¸º 0\n```python\ntry:\n    last_stamp = self.hbu.get_table_row('history_recommend',\n                                        'reco:his:{}'.format(temp.user_id).encode(),\n                                        'channel:{}'.format(temp.channel_id).encode(),\n                                        include_timestamp=True)[1]\nexcept Exception as e:\n    last_stamp = 0\n```\n- å¦‚æœç”¨æˆ·è¯·æ±‚çš„æ—¶é—´æˆ³å°äºå†å²æ¨èç»“æœä¸­æœ€è¿‘ä¸€æ¬¡è¯·æ±‚çš„æ—¶é—´æˆ³ `last_stamp`ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚ä¸ºç”¨æˆ·è·å–å†å²æ¨èç»“æœ\n 1.å¦‚æœæ²¡æœ‰å†å²æ¨èç»“æœï¼Œåˆ™è¿”å›æ—¶é—´æˆ³ `0` ä»¥åŠç©ºåˆ—è¡¨ `[]`\n 2.å¦‚æœå†å²æ¨èç»“æœåªæœ‰ä¸€æ¡ï¼Œåˆ™è¿”å›è¿™ä¸€æ¡å†å²æ¨èç»“æœå¹¶è¿”å›æ—¶é—´æˆ³ `0`ï¼Œè¡¨ç¤ºå·²ç»æ²¡æœ‰å†å²æ¨èç»“æœï¼ˆAPP å¯ä»¥æ˜¾ç¤ºå·²ç»æ²¡æœ‰å†å²æ¨èè®°å½•äº†ï¼‰\n 3.å¦‚æœå†å²æ¨èç»“æœæœ‰å¤šæ¡ï¼Œåˆ™è¿”å›å†å²æ¨èç»“æœä¸­ç¬¬ä¸€æ¡æ¨èç»“æœï¼ˆæœ€è¿‘ä¸€æ¬¡ï¼‰ï¼Œç„¶åè¿”å›å†å²æ¨èç»“æœä¸­ç¬¬äºŒæ¡æ¨èç»“æœçš„æ—¶é—´æˆ³\n\n```\nif temp.time_stamp < last_stamp:\n    try:\n        row = self.hbu.get_table_cells('history_recommend',\n                                       'reco:his:{}'.format(temp.user_id).encode(),\n                                       'channel:{}'.format(temp.channel_id).encode(),\n                                       timestamp=temp.time_stamp + 1,\n                                       include_timestamp=True)\n    except Exception as e:\n        row = []\n        res = []\n\n    if not row:\n        temp.time_stamp = 0\n        res = []\n    elif len(row) == 1 and row[0][1] == temp.time_stamp:\n        res = eval(row[0][0])\n        temp.time_stamp = 0\n    elif len(row) >= 2:\n        res = eval(row[0][0])\n        temp.time_stamp = int(row[1][1])\n\n    res = list(map(int, res))\n    # å°è£…æ¨èç»“æœ\n    track = add_track(res, temp)\n    # æ›å…‰å‚æ•°è®¾ç½®ä¸ºç©º\n    track['param'] = ''\n```\nï¼ˆæ³¨æ„ï¼šè¿™é‡Œå°†ç”¨æˆ·è¯·æ±‚çš„æ—¶é—´æˆ³ +1ï¼Œå› ä¸º Hbase åªèƒ½è·å–å°äºè¯¥æ—¶é—´æˆ³çš„å†å²æ¨èç»“æœï¼‰\n\n- å¦‚æœç”¨æˆ·è¯·æ±‚çš„æ—¶é—´æˆ³å¤§äº Hbase å†å²æ¨èç»“æœä¸­æœ€è¿‘ä¸€æ¬¡è¯·æ±‚çš„æ—¶é—´æˆ³ `last_stamp`ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚ä¸ºç”¨æˆ·åˆ·æ–°æ¨èåˆ—è¡¨ï¼Œéœ€è¦è¯»å–æ¨èç»“æœå¹¶è¿”å›ã€‚å¦‚æœç»“æœä¸ºç©ºï¼Œéœ€è¦è°ƒç”¨ `user_reco_list()` æ–¹æ³•ï¼Œå†æ¬¡è®¡ç®—æ¨èç»“æœï¼Œå†è¿”å›ã€‚\n```\nif temp.time_stamp > last_stamp:\n    # è·å–ç¼“å­˜\n    res = redis_cache.get_reco_from_cache(temp, self.hbu)\n    # å¦‚æœç»“æœä¸ºç©ºï¼Œéœ€è¦å†æ¬¡è®¡ç®—æ¨èç»“æœ è¿›è¡Œå¬å›+æ’åºï¼ŒåŒæ—¶å†™å…¥åˆ°hbaseå¾…æ¨èç»“æœåˆ—è¡¨\n    if not res:\n        res = self.user_reco_list(temp)\n\n    temp.time_stamp = int(last_stamp)\n    track = add_track(res, temp)\n```\nå®šä¹‰ `user_reco_list()` æ–¹æ³•ï¼Œé¦–å…ˆè¦è¯»å–å¤šè·¯å¬å›ç»“æœï¼Œæ ¹æ®ä¸ºç”¨æˆ·åˆ†é…çš„ç®—æ³•ç­–ç•¥ï¼Œè¯»å–ç›¸åº”è·¯å¾„çš„å¬å›ç»“æœï¼Œå¹¶è¿›è¡Œé‡ååˆå¹¶\n```\nreco_set = []\n# (1, [100, 101, 102, 103, 104], [])\nfor number in RAParam.COMBINE[temp.algo][1]:\n    if number == 103:\n        _res = self.recall_service.read_redis_new_article(temp.channel_id)\n        reco_set = list(set(reco_set).union(set(_res)))\n    elif number == 104:\n        _res = self.recall_service.read_redis_hot_article(temp.channel_id)\n        reco_set = list(set(reco_set).union(set(_res)))\n    else:\n        # 100, 101, 102å¬å›ç»“æœè¯»å–\n        _res = self.recall_service.read_hbase_recall(RAParam.RECALL[number][0],\n                                                     'recall:user:{}'.format(temp.user_id).encode(),\n                                                     '{}:{}'.format(RAParam.RECALL[number][1],\n                                                                    temp.channel_id).encode())\n        reco_set = list(set(reco_set).union(set(_res)))\n```\næ¥ç€ï¼Œè¿‡æ»¤å½“å‰è¯¥è¯·æ±‚é¢‘é“çš„å†å²æ¨èç»“æœï¼Œå¦‚æœä¸æ˜¯ 0 é¢‘é“è¿˜éœ€è¿‡æ»¤ 0 é¢‘é“çš„å†å²æ¨èç»“æœ\n```\nhistory_list = []\ndata = self.hbu.get_table_cells('history_recommend',\n                                'reco:his:{}'.format(temp.user_id).encode(),\n                                'channel:{}'.format(temp.channel_id).encode())\n\nfor _ in data:\n    history_list = list(set(history_list).union(set(eval(_))))\n\ndata = self.hbu.get_table_cells('history_recommend',\n                                'reco:his:{}'.format(temp.user_id).encode(),\n                                'channel:{}'.format(0).encode())\n\nfor _ in data:\n    history_list = list(set(history_list).union(set(eval(_))))\n\nreco_set = list(set(reco_set).difference(set(history_list)))\n```\næœ€åï¼Œæ ¹æ®åˆ†é…çš„ç®—æ³•ç­–ç•¥ï¼Œè°ƒç”¨æ’åºæœåŠ¡ï¼Œå°†åˆ†æ•°æœ€é«˜çš„ N ä¸ªæ¨èç»“æœè¿”å›ï¼Œå¹¶å†™å…¥å†å²æ¨èç»“æœè¡¨ï¼Œå¦‚æœè¿˜æœ‰å‰©ä½™çš„æ’åºç»“æœï¼Œå°†å…¶ä½™å†™å…¥å¾…æ¨èç»“æœè¡¨\n```\n# ä½¿ç”¨æŒ‡å®šæ¨¡å‹å¯¹å¬å›ç»“æœè¿›è¡Œæ’åº\n# temp.user_idï¼Œ reco_set\n_sort_num = RAParam.COMBINE[temp.algo][2][0]\n# 'LR'\nreco_set = sort_dict[RAParam.SORT[_sort_num]](reco_set, temp, self.hbu)\n\nif not reco_set:\n    return reco_set\nelse:\n\n    # å¦‚æœreco_setå°äºç”¨æˆ·éœ€è¦æ¨èçš„æ–‡ç« \n    if len(reco_set) <= temp.article_num:\n        res = reco_set\n    else:\n        # å¤§äºè¦æ¨èçš„æ–‡ç« ç»“æœ\n        res = reco_set[:temp.article_num]\n\n        # å°†å‰©ä¸‹çš„æ–‡ç« åˆ—è¡¨å†™å…¥å¾…æ¨èçš„ç»“æœ\n        self.hbu.get_table_put('wait_recommend',\n                               'reco:{}'.format(temp.user_id).encode(),\n                               'channel:{}'.format(temp.channel_id).encode(),\n                               str(reco_set[temp.article_num:]).encode(),\n                               timestamp=temp.time_stamp)\n\n    # ç›´æ¥å†™å…¥å†å²è®°å½•å½“ä¸­ï¼Œè¡¨ç¤ºè¿™æ¬¡åˆæˆåŠŸæ¨èä¸€æ¬¡\n    self.hbu.get_table_put('history_recommend',\n                           'reco:his:{}'.format(temp.user_id).encode(),\n                           'channel:{}'.format(temp.channel_id).encode(),\n                           str(res).encode(),\n                           timestamp=temp.time_stamp)\n\n    return res\n```\nåˆ°è¿™é‡Œï¼Œæ¨èä¸­å¿ƒçš„åŸºæœ¬é€»è¾‘å·²ç»ç»“æŸã€‚ä¸‹é¢æ˜¯è¯»å–å¤šè·¯å¬å›ç»“æœçš„å®ç°ç»†èŠ‚ï¼šé€šè¿‡æŒ‡å®šåˆ—æ—ï¼Œè¯»å–åŸºäºæ¨¡å‹ã€ç¦»çº¿å†…å®¹ä»¥åŠåœ¨çº¿çš„å¬å›ç»“æœï¼Œå¹¶åˆ é™¤ cb_recall çš„å¬å›ç»“æœ\n```\ndef read_hbase_recall_data(self, table_name, key_format, column_format):\n    \"\"\"\n    è¯»å–cb_recallå½“ä¸­çš„æ¨èæ•°æ®\n    è¯»å–çš„æ—¶å€™å¯ä»¥é€‰æ‹©åˆ—æ—è¿›è¡Œè¯»å–als, online, content\n\n    :return:\n    \"\"\"\n    recall_list = []\n    data = self.hbu.get_table_cells(table_name, key_format, column_format)\n    # dataæ˜¯å¤šä¸ªç‰ˆæœ¬çš„æ¨èç»“æœ[[],[],[],]\n    for _ in data:\n        recall_list = list(set(recall_list).union(set(eval(_))))\n    self.hbu.get_table_delete(table_name, key_format, column_format)\n    return recall_list\n```\nè¯»å– redis ä¸­çš„æ–°æ–‡ç« \n```\ndef read_redis_new_article(self, channel_id):\n    \"\"\"\n    è¯»å–æ–°æ–‡ç« å¬å›ç»“æœ\n    :param channel_id: æä¾›é¢‘é“\n    :return:\n    \"\"\"\n    _key = \"ch:{}:new\".format(channel_id)\n    try:\n        res = self.client.zrevrange(_key, 0, -1)\n    except Exception as e:\n        res = []\n\n    return list(map(int, res))\n```\nè¯»å– redis ä¸­çš„çƒ­é—¨æ–‡ç« ï¼Œå¹¶é€‰å–çƒ­åº¦æœ€é«˜çš„å‰ K ä¸ªæ–‡ç« \n```\ndef read_redis_hot_article(self, channel_id):\n    \"\"\"\n    è¯»å–çƒ­é—¨æ–‡ç« å¬å›ç»“æœ\n    :param channel_id: æä¾›é¢‘é“\n    :return:\n    \"\"\"\n    _key = \"ch:{}:hot\".format(channel_id)\n    try:\n        res = self.client.zrevrange(_key, 0, -1)\n    except Exception as e:\n\n    # ç”±äºæ¯ä¸ªé¢‘é“çš„çƒ­é—¨æ–‡ç« æœ‰å¾ˆå¤šï¼Œå› ä¸º ä¿ç•™æ–‡ç« ç‚¹å‡»æ¬¡æ•°\n    res = list(map(int, res))\n    if len(res) > self.hot_num:\n        res = res[:self.hot_num]\n    return res\n```\nè¯»å–ç›¸ä¼¼æ–‡ç« \n```\ndef read_hbase_article_similar(self, table_name, key_format, article_num):\n    \"\"\"è·å–æ–‡ç« ç›¸ä¼¼ç»“æœ\n    :param article_id: æ–‡ç« id\n    :param article_num: æ–‡ç« æ•°é‡\n    :return:\n    \"\"\"\n    try:\n        _dic = self.hbu.get_table_row(table_name, key_format)\n\n        res = []\n        _srt = sorted(_dic.items(), key=lambda obj: obj[1], reverse=True)\n        if len(_srt) > article_num:\n            _srt = _srt[:article_num]\n        for _ in _srt:\n            res.append(int(_[0].decode().split(':')[1]))\n    except Exception as e:\n        res = []\n    return res\n```\n# ä½¿ç”¨ç¼“å­˜ç­–ç•¥\n- å¦‚æœ redis ç¼“å­˜ä¸­å­˜åœ¨æ•°æ®ï¼Œå°±ç›´æ¥ä» redis ç¼“å­˜ä¸­è·å–æ¨èç»“æœ\n- å¦‚æœ redis ç¼“å­˜ä¸ºç©ºè€Œ Hbase çš„å¾…æ¨èç»“æœè¡¨ wait_recommend ä¸ä¸ºç©ºï¼Œåˆ™ä» wait_recommend ä¸­è·å–æ¨èç»“æœï¼Œå¹¶å°†ä¸€å®šæ•°é‡çš„å¾…æ¨èç»“æœæ”¾å…¥ redis ç¼“å­˜ä¸­\n- è‹¥ redis å’Œ wait_recommend éƒ½ä¸ºç©ºï¼Œåˆ™éœ€è¯»å–å¬å›ç»“æœå¹¶è¿›è¡Œæ’åºï¼Œå°†æ’åºç»“æœå†™å…¥ Hbase çš„å¾…æ¨èç»“æœè¡¨ wait_recommend ä¸­åŠ redis ä¸­\n\nï¼ˆæ¯æ¬¡è¯»å–çš„æ¨èç»“æœéƒ½è¦å°†å…¶å†™å…¥ Hbase çš„å†å²æ¨èç»“æœè¡¨ history_recommend ä¸­ï¼‰\n\nè¯»å– redis ç¼“å­˜\n```\n#è¯»å–rediså¯¹åº”çš„é”®\nkey = 'reco:{}:{}:art'.format(temp.user_id, temp.channel_id)\n# è¯»å–ï¼Œåˆ é™¤ï¼Œè¿”å›ç»“æœ\npl = cache_client.pipeline()\n\n# è¯»å–redisæ•°æ®\nres = cache_client.zrevrange(key, 0, temp.article_num - 1)\nif res:\n    # æ‰‹åŠ¨åˆ é™¤è¯»å–å‡ºæ¥çš„ç¼“å­˜ç»“æœ\n    pl.zrem(key, *res)\n```\nå¦‚æœ redis ç¼“å­˜ä¸ºç©º\n```\nelse:\n    # åˆ é™¤é”®\n    cache_client.delete(key)\n    try:\n        # ä»wait_recommendä¸­è¯»å–\n        wait_cache = eval(hbu.get_table_row('wait_recommend',\n                                            'reco:{}'.format(temp.user_id).encode(),\n                                            'channel:{}'.format(temp.channel_id).encode()))\n    except Exception as e:\n        wait_cache = []\n\n    # å¦‚æœä¸ºç©ºåˆ™ç›´æ¥è¿”å›ç©º\n    if not wait_cache:\n        return wait_cache\n\n    # å¦‚æœwait_recommendä¸­æœ‰æ•°æ®\n    if len(wait_cache) > 100:\n        cache_redis = wait_cache[:100]\n\n        # å‰100ä¸ªæ•°æ®æ”¾å…¥redis\n        pl.zadd(key, dict(zip(cache_redis, range(len(cache_redis)))))\n\n        # 100ä¸ªåé¢çš„æ•°æ®ï¼Œåœ¨æ”¾å›wait_recommend\n        hbu.get_table_put('wait_recommend',\n                          'reco:{}'.format(temp.user_id).encode(),\n                          'channel:{}'.format(temp.channel_id).encode(),\n                          str(wait_cache[100:]).encode())\n\n    else:\n        # æ¸…ç©ºwait_recommendæ•°æ®\n        hbu.get_table_put('wait_recommend',\n                          'reco:{}'.format(temp.user_id).encode(),\n                          'channel:{}'.format(temp.channel_id).encode(),\n                          str([]).encode())\n\n        # æ‰€æœ‰ä¸è¶³100ä¸ªæ•°æ®ï¼Œæ”¾å…¥redis\n        pl.zadd(key, dict(zip(wait_cache, range(len(wait_cache)))))\n\n    res = cache_client.zrange(key, 0, temp.article_num - 1)\n```\næœ€åï¼Œåœ¨ Supervisor ä¸­é…ç½® gRPC å®æ—¶æ¨èç¨‹åº\n```\n[program:online]\nenvironment=JAVA_HOME=/root/bigdata/jdk,SPARK_HOME=/root/bigdata/spark,HADOOP_HOME=/root/bigdata/hadoop,PYSPARK_PYTHON=/miniconda2/envs/reco_sys/bin/python ,PYSPARK_DRIVER_PYTHON=/miniconda2/envs/reco_sys/bin/python\ncommand=/miniconda2/envs/reco_sys/bin/python /root/toutiao_project/reco_sys/abtest/routing.py\ndirectory=/root/toutiao_project/reco_sys/abtest\nuser=root\nautorestart=true\nredirect_stderr=true\nstdout_logfile=/root/logs/recommendsuper.log\nloglevel=info\nstopsignal=KILL\nstopasgroup=true\nkillasgroup=true\n```\n\n# æƒ³è¯´çš„è¯\næ–‡ç« æ¨èç³»ç»Ÿç³»åˆ—åˆ°æ­¤å°±å®Œç»“å•¦ï½ æ’’èŠ± ğŸ‰ğŸ‰ğŸ‰\nè‹¥æœ‰ç–æ¼çš„åœ°æ–¹ï¼Œæ¬¢è¿å„ä½å¤šå¤šæŒ‡æ­£ï¼Œæ„Ÿè°¢å…³æ³¨ï¼Œlove & peace. ğŸ™ğŸ™ğŸ™\n\n\n# å‚è€ƒ\n[https://www.bilibili.com/video/av68356229](https://www.bilibili.com/video/av68356229)\n[https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw](https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw)ï¼ˆå­¦ä¹ èµ„æºå·²ä¿å­˜è‡³ç½‘ç›˜ï¼Œ æå–ç ï¼šeakpï¼‰\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æ–‡ç« æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹13ã€åŸºäºWide&Deepæ¨¡å‹çš„åœ¨çº¿æ’åº.md","url":"/2019/12/05/RecSys/æ–‡ç« æ¨èç³»ç»Ÿ/ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹13ã€åŸºäºWide&Deepæ¨¡å‹çš„åœ¨çº¿æ’åº/","content":"\n![](https://upload-images.jianshu.io/upload_images/12790782-66263ecac4ac1688.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nä¸Šå›¾æ˜¯ Wide&Deep æ¨¡å‹çš„ç½‘ç»œç»“æ„ï¼Œæ·±åº¦å­¦ä¹ å¯ä»¥é€šè¿‡åµŒå…¥ï¼ˆEmbeddingï¼‰è¡¨è¾¾å‡ºæ›´ç²¾å‡†çš„ç”¨æˆ·å…´è¶£åŠç‰©å“ç‰¹å¾ï¼Œä¸ä»…èƒ½å‡å°‘äººå·¥ç‰¹å¾å·¥ç¨‹çš„å·¥ä½œé‡ï¼Œè¿˜èƒ½æé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œä½¿å¾—ç”¨æˆ·è¡Œä¸ºé¢„ä¼°æ›´åŠ å‡†ç¡®ã€‚Wide&Deep æ¨¡å‹é€‚åˆé«˜ç»´ç¨€ç–ç‰¹å¾çš„æ¨èåœºæ™¯ï¼Œå…¼æœ‰ç¨€ç–ç‰¹å¾çš„å¯è§£é‡Šæ€§å’Œæ·±æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚é€šå¸¸å°†ç±»åˆ«ç‰¹å¾åš Embedding å­¦ä¹ ï¼Œå†å°† Embedding ç¨ å¯†ç‰¹å¾è¾“å…¥æ·±æ¨¡å‹ä¸­ã€‚Wide éƒ¨åˆ†çš„è¾“å…¥ç‰¹å¾åŒ…æ‹¬ï¼šç±»åˆ«ç‰¹å¾å’Œç¦»æ•£åŒ–çš„æ•°å€¼ç‰¹å¾ï¼ŒDeepéƒ¨åˆ†çš„è¾“å…¥ç‰¹å¾åŒ…æ‹¬ï¼šæ•°å€¼ç‰¹å¾å’Œ Embedding åçš„ç±»åˆ«ç‰¹å¾ã€‚å…¶ä¸­ï¼ŒWide éƒ¨åˆ†ä½¿ç”¨ FTRL + L1ï¼›Deep éƒ¨åˆ†ä½¿ç”¨ AdaGradï¼Œå¹¶ä¸”ä¸¤ä¾§æ˜¯ä¸€èµ·è”åˆè¿›è¡Œè®­ç»ƒçš„ã€‚\n\n# ç¦»çº¿è®­ç»ƒ\nTensorFlow å®ç°äº†å¾ˆå¤šæ·±åº¦æ¨¡å‹ï¼Œå…¶ä¸­å°±åŒ…æ‹¬ Wide&Deepï¼ŒAPI æ¥å£ä¸º `tf.estimator.DNNLinearCombinedClassifier`ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚åœ¨ä¸Šç¯‡æ–‡ç« ä¸­å·²ç»å®ç°äº†å°†è®­ç»ƒæ•°æ®å†™å…¥ TFRecord æ–‡ä»¶ï¼Œåœ¨è¿™é‡Œå¯ä»¥ç›´æ¥è¯»å–\n```\n@staticmethod\ndef read_ctr_records():\n    dataset = tf.data.TFRecordDataset([\"./train_ctr_201905.tfrecords\"])\n    dataset = dataset.map(parse_tfrecords)\n    dataset = dataset.shuffle(buffer_size=10000)\n    dataset = dataset.repeat(10000)\n    return dataset.make_one_shot_iterator().get_next()\n```\nè§£ææ¯ä¸ªæ ·æœ¬ï¼Œå°† TFRecord ä¸­åºåˆ—åŒ–çš„ feature åˆ—ï¼Œè§£ææˆ channel_id (1), article_vector (100), user_weights (10), article_weights (10)\n```\ndef parse_tfrecords(example):\n    features = {\n        \"label\": tf.FixedLenFeature([], tf.int64),\n        \"feature\": tf.FixedLenFeature([], tf.string)\n    }\n    parsed_features = tf.parse_single_example(example, features)\n\n    feature = tf.decode_raw(parsed_features['feature'], tf.float64)\n    feature = tf.reshape(tf.cast(feature, tf.float32), [1, 121])\n    # ç‰¹å¾é¡ºåº 1 channel_id,  100 article_vector, 10 user_weights, 10 article_weights\n    # 1 channel_idç±»åˆ«å‹ç‰¹å¾ï¼Œ 100ç»´æ–‡ç« å‘é‡æ±‚å¹³å‡å€¼å½“è¿ç»­ç‰¹å¾ï¼Œ10ç»´ç”¨æˆ·æƒé‡æ±‚å¹³å‡å€¼å½“è¿ç»­ç‰¹å¾\n    channel_id = tf.cast(tf.slice(feature, [0, 0], [1, 1]), tf.int32)\n    vector = tf.reduce_sum(tf.slice(feature, [0, 1], [1, 100]), axis=1, keep_dims=True)\n    user_weights = tf.reduce_sum(tf.slice(feature, [0, 101], [1, 10]), axis=1, keep_dims=True)\n    article_weights = tf.reduce_sum(tf.slice(feature, [0, 111], [1, 10]), axis=1, keep_dims=True)\n\n    label = tf.reshape(tf.cast(parsed_features['label'], tf.float32), [1, 1])\n\n    # æ„é€ å­—å…¸ åç§°-tensor\n    FEATURE_COLUMNS = ['channel_id', 'vector', 'user_weigths', 'article_weights']\n    tensor_list = [channel_id, vector, user_weights, article_weights]\n\n    feature_dict = dict(zip(FEATURE_COLUMNS, tensor_list))\n\n    return feature_dict, label\n```\næŒ‡å®šè¾“å…¥ç‰¹å¾çš„æ•°æ®ç±»å‹ï¼Œå¹¶å®šä¹‰ Wide&Deep æ¨¡å‹ model\n```\n# ç¦»æ•£ç±»å‹\nchannel_id = tf.feature_column.categorical_column_with_identity('channel_id', num_buckets=25)\n# è¿ç»­ç±»å‹\nvector = tf.feature_column.numeric_column('vector')\nuser_weigths = tf.feature_column.numeric_column('user_weigths')\narticle_weights = tf.feature_column.numeric_column('article_weights')\n\nwide_columns = [channel_id]\n\n# embedding_columnç”¨æ¥è¡¨ç¤ºç±»åˆ«å‹çš„å˜é‡\ndeep_columns = [tf.feature_column.embedding_column(channel_id, dimension=25),\n                vector, user_weigths, article_weights]\n\nestimator = tf.estimator.DNNLinearCombinedClassifier(model_dir=\"./ckpt/wide_and_deep\",\n                                                     linear_feature_columns=wide_columns,\n                                                     dnn_feature_columns=deep_columns,\n                                                     dnn_hidden_units=[1024, 512, 256])\n```\né€šè¿‡è°ƒç”¨ read_ctr_records() æ–¹æ³•ï¼Œæ¥è¯»å– TFRecod æ–‡ä»¶ä¸­çš„è®­ç»ƒæ•°æ®ï¼Œå¹¶è®¾ç½®è®­ç»ƒæ­¥é•¿ï¼Œå¯¹å®šä¹‰å¥½çš„ FTRL æ¨¡å‹è¿›è¡Œè®­ç»ƒåŠé¢„ä¼°\n```\nmodel.train(read_ctr_records, steps=1000)\nresult = model.evaluate(read_ctr_records)\n```\nå¯ä»¥ç”¨ä¸Šä¸€æ¬¡æ¨¡å‹çš„å‚æ•°ä½œä¸ºå½“å‰æ¨¡å‹çš„åˆå§‹åŒ–å‚æ•°ï¼Œè®­ç»ƒå®Œæˆåï¼Œé€šå¸¸ä¼šè¿›è¡Œç¦»çº¿æŒ‡æ ‡åˆ†æï¼Œè‹¥ç¬¦åˆé¢„æœŸå³å¯å¯¼å‡ºæ¨¡å‹\n```\ncolumns = wide_columns + deep_columns\nfeature_spec = tf.feature_column.make_parse_example_spec(columns)\nserving_input_receiver_fn = tf.estimator.export.build_parsing_serving_input_receiver_fn(feature_spec)\nmodel.export_savedmodel(\"./serving_model/wdl/\", serving_input_receiver_fn)\n```\n# TFServing éƒ¨ç½²\nå®‰è£…\n```\ndocker pull tensorflow/serving\n```\nå¯åŠ¨\n```\ndocker run -p 8501:8501 -p 8500:8500 --mount type=bind,source=/root/toutiao_project/reco_sys/server/models/serving_model/wdl,target=/models/wdl -e MODEL_NAME=wdl -t tensorflow/serving\n```\n- -p 8501:8501 ä¸ºç«¯å£æ˜ å°„ï¼ˆ-p ä¸»æœºç«¯å£ : docker å®¹å™¨ç¨‹åºï¼‰\n- TFServing ä½¿ç”¨ 8501 ç«¯å£å¯¹å¤–æä¾› HTTP æœåŠ¡ï¼Œä½¿ç”¨8500å¯¹å¤–æä¾› gRPC æœåŠ¡ï¼Œè¿™é‡ŒåŒæ—¶å¼€æ”¾äº†ä¸¤ä¸ªç«¯å£çš„ä½¿ç”¨\n- --mount type=bind,source=/home/ubuntu/detectedmodel/wdl,target=/models/wdl ä¸ºæ–‡ä»¶æ˜ å°„ï¼Œå°†ä¸»æœºï¼ˆsourceï¼‰çš„æ¨¡å‹æ–‡ä»¶æ˜ å°„åˆ° docker å®¹å™¨ç¨‹åºï¼ˆtargetï¼‰çš„ä½ç½®ï¼Œä»¥ä¾¿ TFServing ä½¿ç”¨æ¨¡å‹ï¼Œtarget å‚æ•°ä¸º /models/æ¨¡å‹åç§°\n- -e MODEL_NAME= wdl è®¾ç½®äº†ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œåä¸º MODEL_NAMEï¼Œæ­¤å˜é‡è¢« TFServing è¯»å–ï¼Œç”¨æ¥æŒ‰åå­—å¯»æ‰¾æ¨¡å‹ï¼Œä¸ä¸Šé¢ target å‚æ•°ä¸­çš„æ¨¡å‹åç§°å¯¹åº”\n- -t ä¸º TFServing åˆ›å»ºä¸€ä¸ªä¼ªç»ˆç«¯ï¼Œä¾›ç¨‹åºè¿è¡Œ\n- tensorflow/serving ä¸ºé•œåƒåç§°\n\n# åœ¨çº¿æ’åº\né€šå¸¸åœ¨çº¿æ’åºæ˜¯æ ¹æ®ç”¨æˆ·å®æ—¶çš„æ¨èè¯·æ±‚ï¼Œå¯¹å¬å›ç»“æœè¿›è¡Œ CTR é¢„ä¼°ï¼Œè¿›è€Œè®¡ç®—å‡ºæ’åºç»“æœå¹¶è¿”å›ã€‚æˆ‘ä»¬éœ€è¦æ ¹æ®å¬å›ç»“æœæ„é€ æµ‹è¯•é›†ï¼Œå…¶ä¸­æ¯ä¸ªæµ‹è¯•æ ·æœ¬åŒ…æ‹¬ç”¨æˆ·ç‰¹å¾å’Œæ–‡ç« ç‰¹å¾ã€‚é¦–å…ˆï¼Œæ ¹æ®ç”¨æˆ· ID å’Œé¢‘é“ ID è¯»å–ç”¨æˆ·ç‰¹å¾ï¼ˆç”¨æˆ·åœ¨æ¯ä¸ªé¢‘é“çš„ç‰¹å¾ä¸åŒï¼Œæ‰€ä»¥æ˜¯åˆ†é¢‘é“å­˜å‚¨çš„ï¼‰\n```\ntry:\n    user_feature = eval(hbu.get_table_row('ctr_feature_user',\n                              '{}'.format(temp.user_id).encode(),\n                              'channel:{}'.format(temp.channel_id).encode()))\nexcept Exception as e:\n    user_feature = []\n```\nå†æ ¹æ®ç”¨æˆ· ID è¯»å–å¬å›ç»“æœ\n```\nrecall_set = read_hbase_recall('cb_recall', \n                'recall:user:{}'.format(temp.user_id).encode(), \n                'als:{}'.format(temp.channel_id).encode())\n```\næ¥ç€ï¼Œéå†å¬å›ç»“æœï¼Œè·å–æ–‡ç« ç‰¹å¾ï¼Œå¹¶å°†ç”¨æˆ·ç‰¹å¾åˆå¹¶ï¼Œæ„å»ºæ ·æœ¬\n```\nexamples = []\nfor article_id in recall_set:\n    try:\n        article_feature = eval(hbu.get_table_row('ctr_feature_article',\n                                  '{}'.format(article_id).encode(),\n                                  'article:{}'.format(article_id).encode()))\n    except Exception as e:\n        article_feature = []\n\n    if not article_feature:\n        article_feature = [0.0] * 111\n    \n    channel_id = int(article_feature[0])\n    # è®¡ç®—åé¢è‹¥å¹²å‘é‡çš„å¹³å‡å€¼\n    vector = np.mean(article_feature[11:])\n    # ç”¨æˆ·æƒé‡ç‰¹å¾\n    user_feature = np.mean(user_feature)\n    # æ–‡ç« æƒé‡ç‰¹å¾\n    article_feature = np.mean(article_feature[1:11])\n\n    # æ„å»ºexample\n    example = tf.train.Example(features=tf.train.Features(feature={\n                \"channel_id\": tf.train.Feature(int64_list=tf.train.Int64List(value=[channel_id])),\n                \"vector\": tf.train.Feature(float_list=tf.train.FloatList(value=[vector])),\n                'user_weigths': tf.train.Feature(float_list=tf.train.FloatList(value=[user_feature])),\n                'article_weights': tf.train.Feature(float_list=tf.train.FloatList(value=[article_feature])),\n            }))\n\n    examples.append(example)\n```\nè°ƒç”¨ TFServing çš„æ¨¡å‹æœåŠ¡ï¼Œè·å–æ’åºç»“æœ\n```\nwith grpc.insecure_channel(\"127.0.0.1:8500\") as channel:\n    stub = prediction_service_pb2_grpc.PredictionServiceStub(channel)\n    request = classification_pb2.ClassificationRequest()\n    # æ„é€ è¯·æ±‚ï¼ŒæŒ‡å®šæ¨¡å‹åç§°ï¼ŒæŒ‡å®šè¾“å…¥æ ·æœ¬\n    request.model_spec.name = 'wdl'\n    request.input.example_list.examples.extend(examples)\n    # å‘é€è¯·æ±‚ï¼Œè·å–æ’åºç»“æœ\n    response = stub.Classify(request, 10.0)\n```\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±å®ç°äº† Wide&Deep æ¨¡å‹çš„ç¦»çº¿è®­ç»ƒå’Œ TFServing æ¨¡å‹éƒ¨ç½²ä»¥åŠåœ¨çº¿æ’åºæœåŠ¡çš„è°ƒç”¨ã€‚ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œçº¿ä¸ŠæœåŠ¡éœ€è¦å°†ç‰¹å¾å‘é€ç»™TF Servingï¼Œè¿™ä¸å¯é¿å…å¼•å…¥äº†ç½‘ç»œ IOï¼Œç»™å¸¦å®½å’Œé¢„ä¼°æ—¶å»¶å¸¦æ¥å‹åŠ›ã€‚å¯ä»¥é€šè¿‡å¹¶å‘è¯·æ±‚ï¼Œå¬å›å¤šä¸ªå¬å›ç»“æœé›†åˆï¼Œç„¶åå¹¶å‘è¯·æ±‚ TF Serving æ¨¡å‹æœåŠ¡ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆé™ä½æ•´ä½“é¢„ä¼°æ—¶å»¶ã€‚è¿˜å¯ä»¥é€šè¿‡ç‰¹å¾ ID åŒ–ï¼Œå°†å­—ç¬¦ä¸²ç±»å‹çš„ç‰¹å¾åå“ˆå¸Œåˆ° 64 ä½æ•´å‹ç©ºé—´ï¼Œè¿™æ ·æœ‰æ•ˆå‡å°‘ä¼ è¾“çš„æ•°æ®é‡ï¼Œé™ä½ä½¿ç”¨çš„å¸¦å®½ã€‚\n\n# æ¨¡å‹åŒæ­¥\nå®é™…ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¯èƒ½è¿˜è¦ç»å¸¸å°†ç¦»çº¿è®­ç»ƒå¥½çš„æ¨¡å‹åŒæ­¥åˆ°çº¿ä¸ŠæœåŠ¡æœºå™¨ï¼Œå¤§è‡´åŒæ­¥è¿‡ç¨‹å¦‚ä¸‹ï¼š\n- åŒæ­¥å‰ï¼Œæ£€æŸ¥æ¨¡å‹ md5 æ–‡ä»¶ï¼Œåªæœ‰è¯¥æ–‡ä»¶æ›´æ–°äº†ï¼Œæ‰éœ€è¦åŒæ­¥\n- åŒæ­¥æ—¶ï¼Œéšæœºé“¾æ¥ HTTPFS æœºå™¨å¹¶é™åˆ¶ä¸‹è½½é€Ÿåº¦\n- åŒæ­¥åï¼Œæ ¡éªŒæ¨¡å‹æ–‡ä»¶ md5 å€¼å¹¶å¤‡ä»½æ—§æ¨¡å‹\n\nåŒæ­¥è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å¤„ç†å‘ç”Ÿé”™è¯¯æˆ–è€…è¶…æ—¶çš„æƒ…å†µï¼Œå¯ä»¥è®¾å®šè§¦å‘æŠ¥è­¦æˆ–é‡è¯•æœºåˆ¶ã€‚é€šå¸¸æ¨¡å‹çš„åŒæ­¥æ—¶é—´éƒ½åœ¨åˆ†é’Ÿçº§åˆ«ã€‚\n\n# å‚è€ƒ\n[https://www.bilibili.com/video/av68356229](https://www.bilibili.com/video/av68356229)\n[https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw](https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw)ï¼ˆå­¦ä¹ èµ„æºå·²ä¿å­˜è‡³ç½‘ç›˜ï¼Œ æå–ç ï¼šeakpï¼‰\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æ–‡ç« æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹12ã€åŸºäºFTRLä¼˜åŒ–æ–¹æ³•çš„æ¨¡å‹åœ¨çº¿æ’åº.md","url":"/2019/12/05/RecSys/æ–‡ç« æ¨èç³»ç»Ÿ/ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹12ã€åŸºäºFTRLä¼˜åŒ–æ–¹æ³•çš„æ¨¡å‹åœ¨çº¿æ’åº/","content":"\n# æ„é€  TFRecord è®­ç»ƒé›†\nå’Œå‰é¢çš„ LR ç¦»çº¿æ¨¡å‹ä¸€æ ·ï¼ŒFTRL æ¨¡å‹é¦–å…ˆä¹Ÿæ˜¯è¦å®Œæˆè®­ç»ƒé›†çš„æ„å»ºã€‚åœ¨ä¸Šç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œå¯ä»¥é€šè¿‡è¯»å–ç”¨æˆ·å†å²è¡Œä¸ºæ•°æ®ï¼ŒåŠæ–‡ç« ç‰¹å¾å’Œç”¨æˆ·ç‰¹å¾ï¼Œæ„å»ºå‡ºè®­ç»ƒé›† `train`ï¼Œå…¶ä¸­åŒ…æ‹¬ features å’Œ label ä¸¤åˆ—æ•°æ®ï¼Œfeatures æ˜¯æ–‡ç« ç‰¹å¾å’Œç”¨æˆ·ç‰¹å¾çš„ç»„åˆã€‚åœ¨ TensorFlow é€šå¸¸ä½¿ç”¨ TFRecord æ–‡ä»¶è¿›è¡Œæ•°æ®çš„å­˜å–ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¦å°† `train` ä¿å­˜åˆ° TFRecord æ–‡ä»¶ä¸­ã€‚é¦–å…ˆå¼€å¯ä¼šè¯ï¼Œå°† `train` ä¸­çš„ç‰¹å¾å’Œæ ‡ç­¾åˆ†åˆ«ä¼ å…¥ `write_to_tfrecords()` æ–¹æ³•ï¼Œå¹¶åˆ©ç”¨å¤šçº¿ç¨‹æ‰§è¡Œ\n```\nimport tensorflow as tf\n\nwith tf.Session() as sess:\n    # åˆ›å»ºçº¿ç¨‹åè°ƒå™¨\n    coord = tf.train.Coordinator()\n    # å¼€å¯å­çº¿ç¨‹å»è¯»å–æ•°æ®\n    threads = tf.train.start_queue_runners(sess=sess, coord=coord)\n    # å­˜å…¥æ•°æ®\n    write_to_tfrecords(train.iloc[:, 0], train.iloc[:, 1])\n    # å…³é—­å­çº¿ç¨‹ï¼Œå›æ”¶\n    coord.request_stop()\n    coord.join(threads)\n```\næ¥ç€ï¼Œåœ¨ `write_to_tfrecords()` æ–¹æ³•ä¸­ï¼Œéå†è®­ç»ƒé›†æ•°æ®ï¼Œå°†æ¯ä¸ªæ ·æœ¬æ„é€ ä¸º `tf.train.Example`ï¼Œå…¶ä¸­ feature ä¸º BytesList ç±»å‹ï¼Œlabel ä¸º Int64List ç±»å‹ï¼Œå¹¶ä¿å­˜åˆ° TFRecords æ–‡ä»¶ä¸­\n```\ndef write_to_tfrecords(feature_batch, click_batch):\n    \"\"\"å°†ç”¨æˆ·ä¸æ–‡ç« çš„ç‚¹å‡»æ—¥å¿—æ„é€ çš„æ ·æœ¬å†™å…¥TFRecordsæ–‡ä»¶\n    \"\"\"\n    # 1ã€æ„é€ tfrecordsçš„å­˜å‚¨å®ä¾‹\n    writer = tf.python_io.TFRecordWriter(\"./train_ctr_20190605.tfrecords\")\n\n    # 2ã€å¾ªç¯å°†æ‰€æœ‰æ ·æœ¬ä¸€ä¸ªä¸ªå°è£…æˆexampleï¼Œå†™å…¥æ–‡ä»¶\n    for i in range(len(click_batch)):\n        # å–å‡ºç¬¬iä¸ªæ ·æœ¬çš„ç‰¹å¾å€¼å’Œç›®æ ‡å€¼ï¼Œæ ¼å¼è½¬æ¢\n        click = click_batch[i]\n        feature = feature_batch[i].tostring()\n        # æ„é€ example\n        example = tf.train.Example(features=tf.train.Features(feature={\n            \"feature\": tf.train.Feature(bytes_list=tf.train.BytesList(value=[feature])),\n            \"label\": tf.train.Feature(int64_list=tf.train.Int64List(value=[click]))\n        }))\n        # åºåˆ—åŒ–example,å†™å…¥æ–‡ä»¶\n        writer.write(example.SerializeToString())\n\n    writer.close()\n```\n\n# ç¦»çº¿è®­ç»ƒ\nFTRLï¼ˆFollow The Regularized Leaderï¼‰æ¨¡å‹æ˜¯ä¸€ç§è·å¾—ç¨€ç–æ¨¡å‹çš„ä¼˜åŒ–æ–¹æ³•ï¼Œæˆ‘ä»¬åˆ©ç”¨æ„å»ºå¥½çš„ TFRecord æ ·æœ¬æ•°æ®å¯¹ FTRL æ¨¡å‹è¿›è¡Œç¦»çº¿è®­ç»ƒã€‚é¦–å…ˆï¼Œå®šä¹‰ `read_ctr_records()` æ–¹æ³•æ¥è¯»å– TFRecord æ–‡ä»¶ï¼Œå¹¶é€šè¿‡è°ƒç”¨ `parse_tfrecords()` æ–¹æ³•éå†è§£ææ¯ä¸ªæ ·æœ¬ï¼Œå¹¶è®¾ç½®äº†æ‰¹å¤§å°å’Œè¿­ä»£æ¬¡æ•°\n```\ndef read_ctr_records():\n    train = tf.data.TFRecordDataset([\"./train_ctr_20190605.tfrecords\"])\n    train = train.map(parse_tfrecords)\n    train = train.batch(64)\n    train = train.repeat(10000)\n```\nè§£ææ¯ä¸ªæ ·æœ¬ï¼Œå°† TFRecord ä¸­åºåˆ—åŒ–çš„ feature åˆ—ï¼Œè§£ææˆ channel_id (1), article_vector (100), user_weights (10), article_weights (10)\n```\nFEATURE_COLUMNS = ['channel_id', 'article_vector', 'user_weigths', 'article_weights']\n\ndef parse_tfrecords(example):\n    features = {\n        \"feature\": tf.FixedLenFeature([], tf.string),\n        \"label\": tf.FixedLenFeature([], tf.int64)\n    }\n    parsed_features = tf.parse_single_example(example, features)\n    feature = tf.decode_raw(parsed_features['feature'], tf.float64)\n    feature = tf.reshape(tf.cast(feature, tf.float32), [1, 121])\n    \n    channel_id = tf.cast(tf.slice(feature, [0, 0], [1, 1]), tf.int32)\n    article_vector = tf.reduce_sum(tf.slice(feature, [0, 1], [1, 100]), axis=1)\n    user_weights = tf.reduce_sum(tf.slice(feature, [0, 101], [1, 10]), axis=1)\n    article_weights = tf.reduce_sum(tf.slice(feature, [0, 111], [1, 10]), axis=1)\n\n    label = tf.cast(parsed_features['label'], tf.float32)\n\n    # æ„é€ å­—å…¸ åç§°-tensor\n    tensor_list = [channel_id, article_vector, user_weights, article_weights]\n    feature_dict = dict(zip(FEATURE_COLUMNS, tensor_list))\n\n    return feature_dict, label\n```\næŒ‡å®šè¾“å…¥ç‰¹å¾çš„æ•°æ®ç±»å‹ï¼Œå¹¶å®šä¹‰ FTRL æ¨¡å‹ `model` \n```\n# å®šä¹‰ç¦»æ•£ç±»å‹ç‰¹å¾\narticle_id = tf.feature_column.categorical_column_with_identity('channel_id', num_buckets=25)\n# å®šä¹‰è¿ç»­ç±»å‹ç‰¹å¾\narticle_vector = tf.feature_column.numeric_column('article_vector')\nuser_weigths = tf.feature_column.numeric_column('user_weigths')\narticle_weights = tf.feature_column.numeric_column('article_weights')\n\nfeature_columns = [article_id, article_vector, user_weigths, article_weights]\n\nmodel = tf.estimator.LinearClassifier(feature_columns=feature_columns,\n                                           optimizer=tf.train.FtrlOptimizer(learning_rate=0.1,\n                                                                            l1_regularization_strength=10,\n                                                                            l2_regularization_strength=10))\n```\né€šè¿‡è°ƒç”¨ `read_ctr_records()` æ–¹æ³•ï¼Œæ¥è¯»å– TFRecod æ–‡ä»¶ä¸­çš„è®­ç»ƒæ•°æ®ï¼Œå¹¶è®¾ç½®è®­ç»ƒæ­¥é•¿ï¼Œå¯¹å®šä¹‰å¥½çš„ FTRL æ¨¡å‹è¿›è¡Œè®­ç»ƒåŠé¢„ä¼°\n```\nmodel.train(read_ctr_records, steps=1000)\nresult = model.evaluate(read_ctr_records)\n```\né€šå¸¸éœ€è¦ç¼–å†™ç¦»çº¿ä»»åŠ¡ï¼Œå®šæ—¶è¯»å–ç”¨æˆ·è¡Œä¸ºæ•°æ®ä½œä¸ºè®­ç»ƒé›†å’ŒéªŒè¯é›†ï¼Œå¯¹è®­ç»ƒé›†åŠéªŒè¯é›†è¿›è¡Œ CTR é¢„ä¼°ï¼Œå¹¶æ ¹æ®ç¦»çº¿æŒ‡æ ‡å¯¹ç»“æœè¿›è¡Œåˆ†æï¼Œå†³å®šæ˜¯å¦æ›´æ–°æ¨¡å‹ã€‚\n\n# åœ¨çº¿æ’åº\né€šå¸¸åœ¨çº¿æ’åºæ˜¯æ ¹æ®ç”¨æˆ·å®æ—¶çš„æ¨èè¯·æ±‚ï¼Œå¯¹å¬å›ç»“æœè¿›è¡Œ CTR é¢„ä¼°ï¼Œè¿›è€Œè®¡ç®—å‡ºæ’åºç»“æœå¹¶è¿”å›ã€‚æˆ‘ä»¬éœ€è¦æ ¹æ®å¬å›ç»“æœæ„é€ æµ‹è¯•é›†ï¼Œå…¶ä¸­æ¯ä¸ªæµ‹è¯•æ ·æœ¬åŒ…æ‹¬ç”¨æˆ·ç‰¹å¾å’Œæ–‡ç« ç‰¹å¾ã€‚é¦–å…ˆï¼Œæ ¹æ®ç”¨æˆ· ID å’Œé¢‘é“ ID è¯»å–ç”¨æˆ·ç‰¹å¾ï¼ˆç”¨æˆ·åœ¨æ¯ä¸ªé¢‘é“çš„ç‰¹å¾ä¸åŒï¼Œæ‰€ä»¥æ˜¯åˆ†é¢‘é“å­˜å‚¨çš„ï¼‰\n```\ntry:\n    user_feature = eval(hbu.get_table_row('ctr_feature_user',\n                              '{}'.format(temp.user_id).encode(),\n                              'channel:{}'.format(temp.channel_id).encode()))\nexcept Exception as e:\n    user_feature = []\n```\nå†æ ¹æ®ç”¨æˆ· ID è¯»å–å¬å›ç»“æœ\n```\nrecall_set = read_hbase_recall('cb_recall', \n                'recall:user:{}'.format(temp.user_id).encode(), \n                'als:{}'.format(temp.channel_id).encode())\n```\næ¥ç€ï¼Œéå†å¬å›ç»“æœï¼Œè·å–æ–‡ç« ç‰¹å¾ï¼Œå¹¶å°†ç”¨æˆ·ç‰¹å¾åˆå¹¶ï¼Œä½œä¸ºæµ‹è¯•æ ·æœ¬\n```\ntest = []\nfor article_id in recall_set:\n    try:\n        article_feature = eval(hbu.get_table_row('ctr_feature_article',\n                                  '{}'.format(article_id).encode(),\n                                  'article:{}'.format(article_id).encode()))\n    except Exception as e:\n        article_feature = []\n\n    if not article_feature:\n        article_feature = [0.0] * 111\n    feature = []\n    feature.extend(user_feature)\n    feature.extend(article_feature)\n\n    test.append(f)\n```\nåŠ è½½æœ¬åœ° FTRL æ¨¡å‹å¹¶å¯¹æµ‹è¯•æ ·æœ¬è¿›è¡Œ CTR é¢„ä¼°\n```\ntest_array = np.array(test)\nmodel.load_weights('/root/toutiao_project/reco_sys/offline/models/ckpt/ctr_lr_ftrl.h5')\ninit = tf.global_variables_initializer()\nwith tf.Session() as sess:\n    sess.run(init)\n    predictions = self.model.predict(sess.run(tf.constant(test_array)))\n```\nå¯¹ç»“æœè¿›è¡Œæ’åºå¹¶æå– CTR æœ€é«˜çš„å‰ K ä¸ªæ–‡ç« ï¼Œè¿™æ ·å°±å¾—åˆ°äº† FTRL æ¨¡å‹åœ¨çº¿æ’åºçš„ç»“æœã€‚\n```\nres = pd.DataFrame(np.concatenate((np.array(recall_set).reshape(len(recall_set), 1), predictions),\n                                 axis=1), columns=['article_id', 'prob'])\n\nres_sort = res.sort_values(by=['prob'], ascending=True)\n\n# æ’åºåï¼Œåªå°†æ’ååœ¨å‰100ä¸ªæ–‡ç« IDä½œä¸ºæ¨èç»“æœè¿”å›ç»™ç”¨æˆ·\nif len(res_sort) > 100:\n    recall_set = list(res_sort.iloc[:100, 0])\nrecall_set = list(res_sort.iloc[:, 0])\n```\n\n# å‚è€ƒ\n[https://www.bilibili.com/video/av68356229](https://www.bilibili.com/video/av68356229)\n[https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw](https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw)ï¼ˆå­¦ä¹ èµ„æºå·²ä¿å­˜è‡³ç½‘ç›˜ï¼Œ æå–ç ï¼šeakpï¼‰\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æ–‡ç« æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹11ã€åŸºäºFTRLä¼˜åŒ–æ–¹æ³•çš„æ¨¡å‹åœ¨çº¿æ’åº.md","url":"/2019/12/05/RecSys/æ–‡ç« æ¨èç³»ç»Ÿ/ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹11ã€åŸºäºFTRLä¼˜åŒ–æ–¹æ³•çš„æ¨¡å‹åœ¨çº¿æ’åº/","content":"\nå‰é¢ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†å¬å›é˜¶æ®µçš„å…¨éƒ¨å·¥ä½œï¼Œé€šè¿‡å¬å›ï¼Œæˆ‘ä»¬å¯ä»¥ä»æ•°ç™¾ä¸‡ç”šè‡³ä¸Šäº¿çš„åŸå§‹ç‰©å“æ•°æ®ä¸­ï¼Œç­›é€‰å‡ºå’Œç”¨æˆ·ç›¸å…³çš„å‡ ç™¾ã€å‡ åƒä¸ªå¯èƒ½æ„Ÿå…´è¶£çš„ç‰©å“ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¦è¿›å…¥åˆ°æ’åºé˜¶æ®µï¼Œå¯¹å¬å›çš„å‡ ç™¾ã€å‡ åƒä¸ªç‰©å“è¿›è¡Œè¿›ä¸€æ­¥çš„ç­›é€‰å’Œæ’åºã€‚\n\næ’åºæµç¨‹åŒ…æ‹¬ç¦»çº¿æ’åºå’Œåœ¨çº¿æ’åºï¼š\n\n- ç¦»çº¿æ’åº\nè¯»å–å‰å¤©ï¼ˆç¬¬ T - 2 å¤©ï¼‰ä¹‹å‰çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®ä½œä¸ºè®­ç»ƒé›†ï¼Œå¯¹ç¦»çº¿æ¨¡å‹è¿›è¡Œè®­ç»ƒï¼›è®­ç»ƒå®Œæˆåï¼Œè¯»å–æ˜¨å¤©ï¼ˆç¬¬ T - 1 å¤©ï¼‰çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®ä½œä¸ºéªŒè¯é›†è¿›è¡Œé¢„æµ‹ï¼Œæ ¹æ®é¢„æµ‹ç»“æœå¯¹ç¦»çº¿æ¨¡å‹è¿›è¡Œè¯„ä¼°ï¼›è‹¥è¯„ä¼°é€šè¿‡ï¼Œå½“å¤©ï¼ˆç¬¬ T å¤©ï¼‰å³å¯å°†ç¦»çº¿æ¨¡å‹æ›´æ–°åˆ°å®šæ—¶ä»»åŠ¡ä¸­ï¼Œå®šæ—¶æ‰§è¡Œé¢„æµ‹ä»»åŠ¡ï¼›æ˜å¤©ï¼ˆç¬¬ T + 1 å¤©ï¼‰å°±èƒ½æ ¹æ®ä»Šå¤©çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®æ¥è§‚å¯Ÿæ›´æ–°åç¦»çº¿æ¨¡å‹çš„é¢„æµ‹æ•ˆæœã€‚ï¼ˆæ³¨æ„ï¼šæ•°æ®ç”Ÿäº§æœ‰ä¸€å¤©æ—¶é—´å·®ï¼Œç¬¬ T å¤©ç”Ÿæˆç¬¬ T - 1 å¤©çš„æ•°æ®ï¼‰\n\n- åœ¨çº¿æ’åº\nè¯»å–å‰å¤©ï¼ˆç¬¬ T - 2 å¤©ï¼‰ä¹‹å‰çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®ä½œä¸ºè®­ç»ƒé›†ï¼Œå¯¹åœ¨çº¿æ¨¡å‹è¿›è¡Œè®­ç»ƒï¼›è®­ç»ƒå®Œæˆåï¼Œè¯»å–æ˜¨å¤©ï¼ˆç¬¬ T - 1 å¤©ï¼‰çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®ä½œä¸ºéªŒè¯é›†è¿›è¡Œé¢„æµ‹ï¼Œæ ¹æ®é¢„æµ‹ç»“æœå¯¹åœ¨çº¿æ¨¡å‹è¿›è¡Œè¯„ä¼°ï¼›è‹¥è¯„ä¼°é€šè¿‡ï¼Œå½“å¤©ï¼ˆç¬¬ T å¤©ï¼‰å³å¯å°†åœ¨çº¿æ¨¡å‹æ›´æ–°åˆ°çº¿ä¸Šï¼Œå®æ—¶æ‰§è¡Œæ’åºä»»åŠ¡ï¼›æ˜å¤©ï¼ˆç¬¬ T + 1 å¤©ï¼‰å°±èƒ½æ ¹æ®ä»Šå¤©çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®æ¥è§‚å¯Ÿæ›´æ–°ååœ¨çº¿æ¨¡å‹çš„é¢„æµ‹æ•ˆæœã€‚\n\nè¿™é‡Œå†è¡¥å……ä¸€ä¸ªæ•°æ®é›†åˆ’åˆ†çš„å°æŠ€å·§ï¼šå¯ä»¥æ¨ªå‘åˆ’åˆ†ï¼Œéšæœºæˆ–æŒ‰ç”¨æˆ·æˆ–å…¶ä»–æ ·æœ¬é€‰æ‹©ç­–ç•¥ï¼›ä¹Ÿå¯ä»¥çºµå‘åˆ’åˆ†ï¼ŒæŒ‰ç…§æ—¶é—´è·¨åº¦ï¼Œæ¯”å¦‚ä¸€å‘¨çš„æ•°æ®ä¸­ï¼Œå‘¨ä¸€åˆ°å‘¨å››æ˜¯è®­ç»ƒé›†ï¼Œå‘¨äº”å‘¨å…­æ˜¯æµ‹è¯•é›†ï¼Œå‘¨æ—¥æ˜¯éªŒè¯é›†ã€‚\n\nåˆ©ç”¨æ’åºæ¨¡å‹å¯ä»¥è¿›è¡Œè¯„åˆ†é¢„æµ‹å’Œç”¨æˆ·è¡Œä¸ºé¢„æµ‹ï¼Œé€šå¸¸æ¨èç³»ç»Ÿåˆ©ç”¨æ’åºæ¨¡å‹è¿›è¡Œç”¨æˆ·è¡Œä¸ºé¢„æµ‹ï¼Œæ¯”å¦‚ç‚¹å‡»ç‡ï¼ˆCTRï¼‰é¢„ä¼°ï¼Œè¿›è€Œæ ¹æ®ç‚¹å‡»ç‡å¯¹ç‰©å“è¿›è¡Œæ’åºï¼Œç›®å‰å·¥ä¸šç•Œå¸¸ç”¨çš„ç‚¹å‡»ç‡é¢„ä¼°æ¨¡å‹æœ‰å¦‚ä¸‹ 3 ç§ç±»å‹ï¼š\n\n- å®½æ¨¡å‹ + ç‰¹å¾â¼¯ç¨‹\nLR / MLR + é ID ç±»ç‰¹å¾ï¼ˆâ¼ˆâ¼¯ç¦»æ•£ / GBDT / FMï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ Spark è¿›è¡Œè®­ç»ƒ\n- å®½æ¨¡å‹ + æ·±æ¨¡å‹\nWide&Deepï¼ŒDeepFMï¼Œå¯ä»¥ä½¿ç”¨ TensorFlow è¿›è¡Œè®­ç»ƒ\n- æ·±æ¨¡å‹ï¼š\nDNN + ç‰¹å¾ Embeddingï¼Œå¯ä»¥ä½¿ç”¨ TensorFlow è¿›è¡Œè®­ç»ƒ\n\nè¿™é‡Œçš„å®½æ¨¡å‹å³æŒ‡çº¿æ€§æ¨¡å‹ï¼Œçº¿æ€§æ¨¡å‹çš„ä¼˜ç‚¹åŒ…æ‹¬ï¼š\n- ç›¸å¯¹ç®€å•ï¼Œè®­ç»ƒå’Œé¢„æµ‹çš„è®¡ç®—å¤æ‚åº¦éƒ½ç›¸å¯¹è¾ƒä½\n- å¯ä»¥é›†ä¸­ç²¾åŠ›å‘æ˜æ–°çš„æœ‰æ•ˆç‰¹å¾ï¼Œä¸”å¯ä»¥å¹¶è¡ŒåŒ–å·¥ä½œ\n- è§£é‡Šæ€§è¾ƒå¥½ï¼Œå¯ä»¥æ ¹æ®ç‰¹å¾æƒé‡åšè§£é‡Š\n\næœ¬æ–‡æˆ‘ä»¬å°†é‡‡ç”¨é€»è¾‘å›å½’ä½œä¸ºç¦»çº¿æ¨¡å‹ï¼Œè¿›è¡Œç‚¹å‡»ç‡é¢„ä¼°ã€‚é€»è¾‘å›å½’ï¼ˆLogistic Regressionï¼ŒLRï¼‰æ˜¯åŸºç¡€çš„äºŒåˆ†ç±»æ¨¡å‹ï¼Œä¹Ÿæ˜¯ç›‘ç£å­¦ä¹ çš„ä¸€ç§ï¼Œé€šè¿‡å¯¹æœ‰æ ‡ç­¾çš„è®­ç»ƒé›†æ•°æ®è¿›è¡Œç‰¹å¾å­¦ä¹ ï¼Œè¿›è€Œå¯ä»¥å¯¹æµ‹è¯•é›†ï¼ˆæ–°æ•°æ®ï¼‰çš„æ ‡ç­¾è¿›è¡Œé¢„æµ‹ã€‚æˆ‘ä»¬è¿™é‡Œçš„æ ‡ç­¾å°±æ˜¯æŒ‡ç”¨æˆ·æ˜¯å¦å¯¹æ–‡ç« å‘ç”Ÿäº†ç‚¹å‡»è¡Œä¸ºã€‚\n\n# æ„é€ è®­ç»ƒé›†\nè¯»å–ç”¨æˆ·å†å²è¡Œä¸ºæ•°æ®ï¼Œå°† clicked ä½œä¸ºè®­ç»ƒé›†æ ‡ç­¾\n```\nspark.sql(\"use profile\")\nuser_article_basic = spark.sql(\"select * from user_article_basic\").select(['user_id', 'article_id', 'clicked'])\n```\n`user_article_basic` ç»“æœå¦‚ä¸‹æ‰€ç¤º\n\n![](https://upload-images.jianshu.io/upload_images/12790782-3e75d46d736f96ee.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nä¹‹å‰æˆ‘ä»¬å·²ç»è®¡ç®—å¥½äº†æ–‡ç« ç‰¹å¾å’Œç”¨æˆ·ç‰¹å¾ï¼Œå¹¶å­˜å‚¨åˆ°äº† Hbase ä¸­ã€‚è¿™é‡Œæˆ‘ä»¬éå†ç”¨æˆ·å†å²è¡Œä¸ºæ•°æ®ï¼Œæ ¹æ®å…¶ä¸­æ–‡ç«  ID å’Œç”¨æˆ· ID åˆ†åˆ«è·å–æ–‡ç« ç‰¹å¾å’Œç”¨æˆ·ç‰¹å¾ï¼Œå†å°†æ ‡ç­¾è½¬ä¸º int ç±»å‹ï¼Œè¿™æ ·å°±å°†ä¸€æ¡ç”¨æˆ·è¡Œä¸ºæ•°æ®æ„é€ æˆä¸ºäº†ä¸€ä¸ªæ ·æœ¬ï¼Œå†å°†æ‰€æœ‰æ ·æœ¬åŠ å…¥åˆ°è®­ç»ƒé›†ä¸­\n```\ntrain = []\nfor user_id, article_id, clicked in user_article_basic:\n    try:\n        article_feature = eval(hbu.get_table_row('ctr_feature_article', '{}'.format(article_id).encode(), 'article:{}'.format(article_id).encode()))\n    except Exception as e:\n        article_feature = []\n    try:\n        user_feature = eval(hbu.get_table_row('ctr_feature_user', '{}'.format(temp.user_id).encode(), 'channel:{}'.format(temp.channel_id).encode()))\n    except Exception as e:\n        user_feature = []\n\n    if not article_feature:\n        article_feature = [0.0] * 111\n    if not user_feature:\n        user_feature = [0.0] * 10\n\n    sample = []\n    sample.append(user_feature)\n    sample.append(article_feature)\n    sample.append(int(clicked))\n\n    train.append(sample)\n```\næ¥ä¸‹æ¥ï¼Œè¿˜éœ€è¦åˆ©ç”¨ Spark çš„ Vectors å°† `array<double>` ç±»å‹çš„ article_feature å’Œ user_feature è½¬ä¸º `vector` ç±»å‹\n```\ncolumns = ['article_feature', 'user_feature', 'clicked']\n\ndef list_to_vector(row):\n    from pyspark.ml.linalg import Vectors\n    \n    return Vectors.dense(row[0]), Vectors.dense(row[1]), row[2]\n\ntrain = train.rdd.map(list_to_vector).toDF(columns) \n```\nå†å°† article_feature, user_feature åˆå¹¶ä¸ºç»Ÿä¸€è¾“å…¥åˆ° LR æ¨¡å‹çš„ç‰¹å¾åˆ— featuresï¼Œè¿™æ ·å°±å®Œæˆè®­ç»ƒé›†çš„æ„å»º\n```\ntrain = VectorAssembler().setInputCols(columns[0:1]).setOutputCol('features').transform(train)\n```\n\n# æ¨¡å‹è®­ç»ƒ\nSpark å·²ç»å®ç°å¥½äº† LR æ¨¡å‹ï¼Œé€šè¿‡æŒ‡å®šè®­ç»ƒé›† train çš„ç‰¹å¾åˆ— features å’Œæ ‡ç­¾åˆ— clickedï¼Œå³å¯å¯¹ LR æ¨¡å‹è¿›è¡Œè®­ç»ƒï¼Œå†å°†è®­ç»ƒå¥½çš„æ¨¡å‹ä¿å­˜åˆ° HDFS\n```\nfrom pyspark.ml.feature import VectorAssembler\nfrom pyspark.ml.classification import LogisticRegression\n\nlr = LogisticRegression()\nmodel = lr.setLabelCol(\"clicked\").setFeaturesCol(\"features\").fit(train)\nmodel.save(\"hdfs://hadoop-master:9000/headlines/models/lr.obj\")\n```\nåŠ è½½è®­ç»ƒå¥½çš„ LR æ¨¡å‹ï¼Œè°ƒç”¨ `transform()` å¯¹è®­ç»ƒé›†åšå‡ºé¢„æµ‹ï¼ˆå®é™…åœºæ™¯åº”è¯¥å¯¹éªŒè¯é›†å’Œè®­ç»ƒé›†è¿›è¡Œé¢„æµ‹ï¼‰\n```\nfrom pyspark.ml.classification import LogisticRegressionModel\n\nonline_model = LogisticRegressionModel.load(\"hdfs://hadoop-master:9000/headlines/models/lr.obj\")\nsort_res = online_model.transform(train)\n```\né¢„æµ‹ç»“æœ `sort_res` ä¸­åŒ…æ‹¬ clicked å’Œ probability åˆ—ï¼Œå…¶ä¸­ clicked ä¸ºæ ·æœ¬æ ‡ç­¾çš„çœŸå®å€¼ï¼Œprobability æ˜¯åŒ…å«ä¸¤ä¸ªå…ƒç´ çš„åˆ—è¡¨ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯é¢„æµ‹çš„ä¸ç‚¹å‡»æ¦‚ç‡ï¼Œç¬¬äºŒä¸ªå…ƒç´ åˆ™æ˜¯é¢„æµ‹çš„ç‚¹å‡»æ¦‚ç‡ï¼Œå¯ä»¥æå–ç‚¹å‡»ç‡ï¼ˆCTRï¼‰\n```\ndef get_ctr(row):\n    return float(row.clicked), float(row.probability[1]) \n\nscore_label = sort_res.select([\"clicked\", \"probability\"]).rdd.map(get_ctr)\n```\n\n# æ¨¡å‹è¯„ä¼°\nç¦»çº¿æ¨¡å‹è¯„ä¼°æŒ‡æ ‡åŒ…æ‹¬ï¼š\n- è¯„åˆ†å‡†ç¡®åº¦\né€šå¸¸æ˜¯å‡æ–¹æ ¹è¯¯å·®ï¼ˆRMSEï¼‰ï¼Œç”¨æ¥è¯„ä¼°é¢„æµ‹è¯„åˆ†çš„æ•ˆæœ\n- æ’åºèƒ½åŠ›\né€šå¸¸é‡‡ç”¨ AUCï¼ˆArea Under the Curveï¼‰ï¼Œå³ ROC æ›²çº¿ä¸‹æ–¹çš„é¢ç§¯\n- åˆ†ç±»å‡†ç¡®ç‡ï¼ˆPrecisionï¼‰\nè¡¨ç¤ºåœ¨ Top K æ¨èåˆ—è¡¨ä¸­ï¼Œç”¨æˆ·çœŸå®ç‚¹å‡»çš„ç‰©å“æ‰€å çš„æ¯”ä¾‹\n- åˆ†ç±»å¬å›ç‡ï¼ˆRecallï¼‰\nè¡¨ç¤ºåœ¨ç”¨æˆ·çœŸå®ç‚¹å‡»çš„ç‰©å“ä¸­ï¼Œå‡ºç°åœ¨ Top K æ¨èåˆ—è¡¨ä¸­æ‰€å çš„æ¯”ä¾‹\n\nå½“æ¨¡å‹æ›´æ–°åï¼Œè¿˜å¯ä»¥æ ¹æ®å•†ä¸šæŒ‡æ ‡è¿›è¡Œè¯„ä¼°ï¼Œæ¯”ä¾‹ç±»çš„åŒ…æ‹¬ï¼š ç‚¹å‡»ç‡ï¼ˆCTRï¼‰ã€è½¬åŒ–ç‡ï¼ˆCVRï¼‰ï¼Œç»å¯¹ç±»çš„åŒ…æ‹¬ï¼šç¤¾äº¤å…³ç³»æ•°é‡ã€ç”¨æˆ·åœç•™æ—¶é•¿ã€æˆäº¤æ€»é¢ï¼ˆGMVï¼‰ç­‰ã€‚\n\næ¨èç³»ç»Ÿçš„å¹¿åº¦è¯„ä¼°æŒ‡æ ‡åŒ…æ‹¬ï¼š\n- è¦†ç›–ç‡\nè¡¨ç¤ºè¢«æœ‰æ•ˆæ¨èï¼ˆæ¨èåˆ—è¡¨é•¿åº¦å¤§äº cï¼‰çš„ç”¨æˆ·å å…¨ç«™ç”¨æˆ·çš„æ¯”ä¾‹ï¼Œå…¬å¼å¦‚ä¸‹ï¼š\n$$Con_{UV}=\\frac{N_{l >c}}{N_{UV}}$$\n- å¤±æ•ˆç‡\nè¡¨ç¤ºè¢«æ— æ•ˆæ¨èï¼ˆæ¨èåˆ—è¡¨é•¿åº¦ä¸º 0ï¼‰çš„ç”¨æˆ·å å…¨ç«™ç”¨æˆ·çš„æ¯”ä¾‹ï¼Œå…¬å¼å¦‚ä¸‹ï¼š\n$$Lost_{UV}=\\frac{N_{l =0}}{N_{UV}}$$\n- æ–°é¢–æ€§\n- æ›´æ–°ç‡\nè¡¨ç¤ºæ¨èåˆ—è¡¨çš„å˜åŒ–ç¨‹åº¦ï¼Œå½“å‰å‘¨æœŸä¸ä¸Šä¸ªå‘¨æœŸç›¸æ¯”ï¼Œæ¨èåˆ—è¡¨ä¸­ä¸åŒç‰©å“çš„æ¯”ä¾‹\n$$Update=\\frac{N_{diff}}{N_{last}}$$\n\næ¨èç³»ç»Ÿçš„å¥åº·è¯„ä¼°æŒ‡æ ‡åŒ…æ‹¬ï¼š\n- ä¸ªæ€§åŒ–\nç”¨äºè¡¡é‡æ¨èçš„ä¸ªæ€§åŒ–ç¨‹åº¦ï¼Œæ˜¯å¦å¤§éƒ¨åˆ†ç”¨æˆ·åªæ¶ˆè´¹å°éƒ¨åˆ†ç‰©å“ï¼Œå¯ä»¥è®¡ç®—æ‰€æœ‰ç”¨æˆ·æ¨èåˆ—è¡¨çš„å¹³å‡ç›¸ä¼¼åº¦\n- åŸºå°¼ç³»æ•°\nç”¨äºè¡¡é‡æ¨èç³»ç»Ÿçš„é©¬å¤ªæ•ˆåº”ï¼Œåå‘è¡¡é‡æ¨èçš„ä¸ªæ€§åŒ–ç¨‹åº¦ã€‚å°†ç‰©å“æŒ‰ç…§ç´¯è®¡æ¨èæ¬¡æ•°æ’åºï¼Œæ’åºä½ç½®ä¸º iï¼Œæ¨èæ¬¡æ•°å æ€»æ¨èæ¬¡æ•°çš„æ¯”ä¾‹ä¸º $P_i$ï¼Œæ¨èæ¬¡æ•°è¶Šä¸å¹³å‡ï¼ŒåŸºå°¼ç³»æ•°è¶Šæ¥è¿‘ 1ï¼Œå…¬å¼ä¸ºï¼š\n$$Gini=\\frac{1}{n}\\sum_{i=1}^n P_i(2i-n-i)$$\n- å¤šæ ·æ€§\né€šå¸¸æ˜¯åœ¨ç±»åˆ«ç»´åº¦ä¸Šè¡¡é‡æ¨èç»“æœçš„å¤šæ ·æ€§ï¼Œå¯ä»¥è¡¡é‡å„ä¸ªç±»åˆ«åœ¨æ¨èæ—¶çš„ç†µ\n$$Div=\\frac{\\sum_{i=1}^n-P_i\\log(P_i)}{n\\log(n)}$$\nå…¶ä¸­ï¼Œç‰©å“å…±åŒ…æ‹¬ n ä¸ªç±»åˆ«ï¼Œç±»åˆ« i è¢«æ¨èæ¬¡æ•°å æ€»æ¨èæ¬¡æ•°çš„æ¯”ä¾‹ä¸º $P_i$ï¼Œåˆ†æ¯æ˜¯å„ä¸ªç±»åˆ«æœ€å‡åŒ€æ—¶å¯¹åº”çš„ç†µï¼Œåˆ†å­æ˜¯å®é™…æ¨èç»“æœçš„ç±»åˆ«åˆ†å¸ƒç†µã€‚è¿™æ˜¯æ•´ä½“æ¨èçš„å¤šæ ·æ€§ï¼Œè¿˜å¯ä»¥è®¡ç®—æ¯æ¬¡æ¨èå’Œæ¯ä¸ªç”¨æˆ·æ¨èçš„å¤šæ ·æ€§ã€‚\n\næˆ‘ä»¬è¿™é‡Œä¸»è¦æ ¹æ® AUC è¿›è¡Œè¯„ä¼°ï¼Œé¦–å…ˆåˆ©ç”¨ `model.summary.roc` ç»˜åˆ¶ ROC æ›²çº¿\n```\nimport matplotlib.pyplot as plt\n\nplt.figure(figsize=(5,5))\nplt.plot([0, 1], [0, 1], 'r--')\nplt.plot(model.summary.roc.select('FPR').collect(),\n         model.summary.roc.select('TPR').collect())\nplt.xlabel('FPR')\nplt.ylabel('TPR')\nplt.show()\n```\nROC æ›²çº¿å¦‚ä¸‹æ‰€ç¤ºï¼Œæ›²çº¿ä¸‹é¢çš„é¢ç§¯å³ä¸º AUCï¼ˆArea Under the Curveï¼‰ï¼ŒAUC å€¼è¶Šå¤§ï¼Œæ’åºæ•ˆæœè¶Šå¥½\n\n![](https://upload-images.jianshu.io/upload_images/12790782-ebdcbb926acd114a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nåˆ©ç”¨ Spark çš„ `BinaryClassificationMetrics()` è®¡ç®— AUC\n```\nfrom pyspark.mllib.evaluation import BinaryClassificationMetrics\n\nmetrics = BinaryClassificationMetrics(score_label)\nmetrics.areaUnderROC\n```\nä¹Ÿå¯ä»¥åˆ©ç”¨ sklearn çš„ `roc_auc_score()` è®¡ç®— AUCï¼Œ`accuracy_score()` è®¡ç®—å‡†ç¡®ç‡\n```\nfrom sklearn.metrics import accuracy_score, roc_auc_score,\nimport numpy as np\n\narr = np.array(score_label.collect())\n# AUC\nroc_auc_score(arr[:, 0], arr[:, 1]) # 0.719274521004087\n\n# å‡†ç¡®ç‡\naccuracy_score(arr[:, 0], arr[:, 1].round()) # 0.9051438053097345\n```\n\n# å‚è€ƒ\n[https://www.bilibili.com/video/av68356229](https://www.bilibili.com/video/av68356229)\n[https://book.douban.com/subject/34872145/](https://book.douban.com/subject/34872145/)\n[https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw](https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw)ï¼ˆå­¦ä¹ èµ„æºå·²ä¿å­˜è‡³ç½‘ç›˜ï¼Œ æå–ç ï¼šeakpï¼‰\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æ–‡ç« æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹10ã€åŸºäºçƒ­é—¨æ–‡ç« å’Œæ–°æ–‡ç« çš„åœ¨çº¿å¬å›.md","url":"/2019/12/05/RecSys/æ–‡ç« æ¨èç³»ç»Ÿ/ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹10ã€åŸºäºçƒ­é—¨æ–‡ç« å’Œæ–°æ–‡ç« çš„åœ¨çº¿å¬å›/","content":"\nåœ¨ä¸Šç¯‡æ–‡ç« ä¸­æˆ‘ä»¬å®ç°äº†åŸºäºå†…å®¹çš„åœ¨çº¿å¬å›ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å®ç°åŸºäºçƒ­é—¨æ–‡ç« å’Œæ–°æ–‡ç« çš„åœ¨çº¿å¬å›ã€‚ä¸»è¦æ€è·¯æ˜¯æ ¹æ®ç‚¹å‡»æ¬¡æ•°ï¼Œç»Ÿè®¡æ¯ä¸ªé¢‘é“ä¸‹çš„çƒ­é—¨æ–‡ç« ï¼Œæ ¹æ®å‘å¸ƒæ—¶é—´ç»Ÿè®¡æ¯ä¸ªé¢‘é“ä¸‹çš„æ–°æ–‡ç« ï¼Œå½“æ¨èæ–‡ç« ä¸è¶³æ—¶ï¼Œå¯ä»¥æ ¹æ®è¿™äº›æ–‡ç« è¿›è¡Œè¡¥è¶³ã€‚\n\nç”±äºæ•°æ®é‡è¾ƒå°ï¼Œè¿™é‡Œé‡‡ç”¨ Redis å­˜å‚¨çƒ­é—¨æ–‡ç« å’Œæ–°æ–‡ç« çš„å¬å›ç»“æœï¼Œæ•°æ®ç»“æ„å¦‚ä¸‹æ‰€ç¤º\n\nçƒ­é—¨æ–‡ç« å¬å›|\tç»“æ„|\tç¤ºä¾‹\n-|-|-\npopular_recall|\tch:{}:hot|\tch:18:hot\n\næ–°æ–‡ç« å¬å›|\tç»“æ„|\tç¤ºä¾‹\n-|-|-\nnew_article|\tch:{}:new|\tch:18:new\n\nçƒ­é—¨æ–‡ç« å­˜å‚¨ï¼Œé”®ä¸º `ch:é¢‘é“ID:hot` å€¼ä¸º `åˆ†æ•°` å’Œ `æ–‡ç« ID`\n```python\n# ZINCRBY key increment member\n# ZSCORE\n# ä¸ºæœ‰åºé›† key çš„æˆå‘˜ member çš„ score å€¼åŠ ä¸Šå¢é‡ increment ã€‚\nclient.zincrby(\"ch:{}:hot\".format(row['channelId']), 1, row['param']['articleId'])\n\n# ZREVRANGE key start stop [WITHSCORES]\nclient.zrevrange(ch:{}:new, 0, -1)\n```\næ–°æ–‡ç« å­˜å‚¨ï¼Œé”®ä¸º `ch:{é¢‘é“ID}:new` å€¼ä¸º `æ–‡ç« ID:æ—¶é—´æˆ³`\n```python\n# ZADD ZRANGE\n# ZADD key score member [[score member] [score member] ...]\n# ZRANGE page_rank 0 -1\nclient.zadd(\"ch:{}:new\".format(channel_id), {article_id: time.time()})\n```\n\n# çƒ­é—¨æ–‡ç« åœ¨çº¿å¬å›\né¦–å…ˆï¼Œæ·»åŠ  Spark Streaming å’Œ Kafka çš„é…ç½®ï¼Œçƒ­é—¨æ–‡ç« è¯»å–ç”±ä¸šåŠ¡ç³»ç»Ÿå‘é€åˆ° Kafka çš„ click-trace ä¸»é¢˜ä¸­çš„ç”¨æˆ·å®æ—¶è¡Œä¸ºæ•°æ®\n```\nKAFKA_SERVER = \"192.168.19.137:9092\"\nclick_kafkaParams = {\"metadata.broker.list\": KAFKA_SERVER}\nHOT_DS = KafkaUtils.createDirectStream(stream_c, ['click-trace'], click_kafkaParams)\n```\næ¥ä¸‹æ¥ï¼Œåˆ©ç”¨ Spark Streaming è¯»å– Kafka ä¸­çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œç­›é€‰å‡ºè¢«ç‚¹å‡»è¿‡çš„æ–‡ç« ï¼Œå°† Redis ä¸­çš„æ–‡ç« çƒ­åº¦åˆ†æ•°è¿›è¡Œç´¯åŠ å³å¯\n```\nclient = redis.StrictRedis(host=DefaultConfig.REDIS_HOST, port=DefaultConfig.REDIS_PORT, db=10)\n\ndef update_hot_redis(self):\n    \"\"\"\n    æ”¶é›†ç”¨æˆ·è¡Œä¸ºï¼Œæ›´æ–°çƒ­é—¨æ–‡ç« åˆ†æ•°\n    :return:\n    \"\"\"\n    def update_hot_article(rdd):\n        for data in rdd.collect():\n            # è¿‡æ»¤ç”¨æˆ·è¡Œä¸º\n            if data['param']['action'] in ['exposure', 'read']:\n                pass\n            else:\n                client.zincrby(\"ch:{}:hot\".format(data['channelId']), 1, data['param']['articleId'])\n\n    HOT_DS.map(lambda x: json.loads(x[1])).foreachRDD(update_hot_article)\n```\næµ‹è¯•ï¼Œå†™å…¥ç”¨æˆ·è¡Œä¸ºæ—¥å¿—\n```shell\necho {\\\"actionTime\\\":\\\"2019-04-10 21:04:39\\\",\\\"readTime\\\":\\\"\\\",\\\"channelId\\\":18,\\\"param\\\":{\\\"action\\\": \\\"click\\\", \\\"userId\\\": \\\"2\\\", \\\"articleId\\\": \\\"14299\\\", \\\"algorithmCombine\\\": \\\"C2\\\"}} >> userClick.log\n```\næŸ¥è¯¢çƒ­é—¨æ–‡ç« \n```\n127.0.0.1:6379[10]> keys *\n1) \"ch:18:hot\"\n127.0.0.1:6379[10]> ZRANGE \"ch:18:hot\" 0 -1\n1) \"14299\"\n```\n\n# æ–°æ–‡ç« åœ¨çº¿å¬å›\né¦–å…ˆï¼Œæ·»åŠ  Spark Streaming å’Œ Kafka çš„é…ç½®ï¼Œæ–°æ–‡ç« è¯»å–ç”±ä¸šåŠ¡ç³»ç»Ÿå‘é€åˆ° Kafka çš„ new-article ä¸»é¢˜ä¸­çš„æœ€æ–°å‘å¸ƒæ–‡ç« æ•°æ®\n```\nNEW_ARTICLE_DS = KafkaUtils.createDirectStream(stream_c, ['new-article'], click_kafkaParams)\n```\næ¥ä¸‹æ¥ï¼Œåˆ©ç”¨ Spark Streaming è¯»å– Kafka çš„æ–°æ–‡ç« ï¼Œå°†å…¶æŒ‰é¢‘é“æ·»åŠ åˆ° Redis ä¸­ï¼ŒRedis çš„å€¼ä¸ºå½“å‰æ—¶é—´\n```\ndef  update_new_redis(self):\n    \"\"\"æ›´æ–°é¢‘é“æœ€æ–°æ–‡ç« \n    :return:\n    \"\"\"\n    def add_new_article(rdd):\n        for row in rdd.collect():\n            channel_id, article_id = row.split(',')\n            client.zadd(\"ch:{}:new\".format(channel_id), {article_id: time.time()})\n\n    NEW_ARTICLE_DS.map(lambda x: x[1]).foreachRDD(add_new_article)\n```\n\nè¿˜éœ€è¦åœ¨ Kafka çš„å¯åŠ¨è„šæœ¬ä¸­æ·»åŠ  new-article ä¸»é¢˜ç›‘å¬é…ç½®ï¼Œè¿™æ ·å°±å¯ä»¥æ”¶åˆ°ä¸šåŠ¡ç³»ç»Ÿå‘é€è¿‡æ¥çš„æ–°æ–‡ç« äº†ï¼Œé‡æ–°å¯åŠ¨ Flume å’Œ Kafka\n```\n/root/bigdata/kafka/bin/kafka-topics.sh --zookeeper 192.168.19.137:2181 --create --replication-factor 1 --topic new-article --partitions 1\n```\n\næµ‹è¯•ï¼Œå‘ Kafka å‘é€æ–°æ–‡ç« æ•°æ®\n```\nfrom kafka import KafkaProducer \n\n# kafkaæ¶ˆæ¯ç”Ÿäº§è€…\nkafka_producer = KafkaProducer(bootstrap_servers=['192.168.19.137:9092'])\n\n# æ„é€ æ¶ˆæ¯å¹¶å‘é€\nmsg = '{},{}'.format(18, 13891)\nkafka_producer.send('new-article', msg.encode())\n```\næŸ¥çœ‹æ–°æ–‡ç« \n```shell\n127.0.0.1:6379[10]> keys *\n1) \"ch:18:hot\"\n2) \"ch:18:new\"\n127.0.0.1:6379[10]> ZRANGE \"ch:18:new\" 0 -1\n1) \"13890\"\n2) \"13891\"\n```\næœ€åï¼Œä¿®æ”¹ `online_update.py`ï¼ŒåŠ å…¥åŸºäºçƒ­é—¨æ–‡ç« å’Œæ–°æ–‡ç« çš„åœ¨çº¿å¬å›é€»è¾‘ï¼Œå¼€å¯å®æ—¶è¿è¡Œå³å¯\n```\nif __name__ == '__main__':\n    ore = OnlineRecall()\n    ore.update_content_recall()\n    ore.update_hot_redis()\n    ore.update_new_redis()\n    stream_sc.start()\n    # ä½¿ç”¨ ctrl+c å¯ä»¥é€€å‡ºæœåŠ¡\n    _ONE_DAY_IN_SECONDS = 60 * 60 * 24\n    try:\n        while True:\n            time.sleep(_ONE_DAY_IN_SECONDS)\n    except KeyboardInterrupt:\n        pass\n```\nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å®Œæˆäº†å¬å›é˜¶æ®µçš„å…¨éƒ¨å·¥ä½œï¼ŒåŒ…æ‹¬åŸºäºæ¨¡å‹å’ŒåŸºäºå†…å®¹çš„ç¦»çº¿å¬å›ï¼Œä»¥åŠåŸºäºå†…å®¹ã€çƒ­é—¨æ–‡ç« å’Œæ–°æ–‡ç« çš„åœ¨çº¿å¬å›ã€‚é€šè¿‡å¬å›ï¼Œæˆ‘ä»¬å¯ä»¥ä»æ•°ç™¾ä¸‡ç”šè‡³ä¸Šäº¿çš„åŸå§‹ç‰©å“æ•°æ®ä¸­ï¼Œç­›é€‰å‡ºå’Œç”¨æˆ·ç›¸å…³çš„å‡ ç™¾ã€å‡ åƒä¸ªå¯èƒ½æ„Ÿå…´è¶£çš„ç‰©å“ï¼Œåé¢ï¼Œæˆ‘ä»¬å°†è¦è¿›å…¥åˆ°æ’åºé˜¶æ®µï¼Œå¯¹å¬å›çš„å‡ ç™¾ã€å‡ åƒä¸ªç‰©å“è¿›è¡Œè¿›ä¸€æ­¥çš„ç­›é€‰å’Œæ’åºã€‚\n\n# å‚è€ƒ\n[https://www.bilibili.com/video/av68356229](https://www.bilibili.com/video/av68356229)\n[https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw](https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw)ï¼ˆå­¦ä¹ èµ„æºå·²ä¿å­˜è‡³ç½‘ç›˜ï¼Œ æå–ç ï¼šeakpï¼‰\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æ–‡ç« æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹9ã€åŸºäºå†…å®¹çš„ç¦»çº¿åŠåœ¨çº¿å¬å›.md","url":"/2019/12/05/RecSys/æ–‡ç« æ¨èç³»ç»Ÿ/ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹9ã€åŸºäºå†…å®¹çš„ç¦»çº¿åŠåœ¨çº¿å¬å›/","content":"\nåœ¨ä¸Šç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†åŸºäºæ¨¡å‹çš„ç¦»çº¿å¬å›ï¼Œå±äºåŸºäºååŒè¿‡æ»¤çš„å¬å›ç®—æ³•ã€‚æ¥ä¸‹æ¥ï¼Œæœ¬æ–‡å°±è®²ä¸€ä¸‹å¦ä¸€ä¸ªç»å…¸çš„å¬å›æ–¹å¼ï¼Œé‚£å°±æ˜¯å¦‚ä½•å®ç°åŸºäºå†…å®¹çš„ç¦»çº¿å¬å›ã€‚ç›¸æ¯”äºååŒè¿‡æ»¤æ¥è¯´ï¼ŒåŸºäºå†…å®¹çš„å¬å›ä¼šç®€å•å¾ˆå¤šï¼Œä¸»è¦æ€è·¯å°±æ˜¯å¬å›ç”¨æˆ·ç‚¹å‡»è¿‡çš„æ–‡ç« çš„ç›¸ä¼¼æ–‡ç« ï¼Œé€šå¸¸ä¹Ÿè¢«å«åš u2i2iã€‚\n\n# ç¦»çº¿å¬å›\né¦–å…ˆï¼Œè¯»å–ç”¨æˆ·å†å²è¡Œä¸ºæ•°æ®ï¼Œå¾—åˆ°ç”¨æˆ·å†å²ç‚¹å‡»è¿‡çš„æ–‡ç« \n```\nspark.sql('use profile')\nuser_article_basic = spark.sql(\"select * from user_article_basic\")\nuser_article_basic = user_article_basic.filter('clicked=True')\n```\n`user_article_basic` ç»“æœå¦‚ä¸‹æ‰€ç¤º\n\n![](https://upload-images.jianshu.io/upload_images/12790782-349e372abc54e502.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\næ¥ä¸‹æ¥ï¼Œéå†ç”¨æˆ·å†å²ç‚¹å‡»è¿‡çš„æ–‡ç« ï¼Œè·å–ä¸ä¹‹ç›¸ä¼¼åº¦æœ€é«˜çš„ K ç¯‡æ–‡ç« å³å¯ã€‚å¯ä»¥æ ¹æ®ä¹‹å‰è®¡ç®—å¥½çš„æ–‡ç« ç›¸ä¼¼åº¦è¡¨ article_similar è¿›è¡Œç›¸ä¼¼æ–‡ç« æŸ¥è¯¢ï¼Œæ¥ç€æ ¹æ®å†å²å¬å›ç»“æœè¿›è¡Œè¿‡æ»¤ï¼Œé˜²æ­¢é‡å¤æ¨èã€‚æœ€åå°†å¬å›ç»“æœæŒ‰ç…§é¢‘é“åˆ†åˆ«å­˜å…¥å¬å›ç»“æœè¡¨åŠå†å²å¬å›ç»“æœè¡¨\n```\nuser_article_basic.foreachPartition(get_clicked_similar_article)\n\ndef get_clicked_similar_article(partition):\n    \"\"\"å¬å›ç”¨æˆ·ç‚¹å‡»æ–‡ç« çš„ç›¸ä¼¼æ–‡ç« \n    \"\"\"\n    import happybase\n    pool = happybase.ConnectionPool(size=10, host='hadoop-master')\n    \n    with pool.connection() as conn:\n        similar_table = conn.table('article_similar')\n        for row in partition:\n            # è¯»å–æ–‡ç« ç›¸ä¼¼åº¦è¡¨,æ ¹æ®æ–‡ç« IDè·å–ç›¸ä¼¼æ–‡ç« \n            similar_article = similar_table.row(str(row.article_id).encode(),\n                                                columns=[b'similar'])\n            # æŒ‰ç…§ç›¸ä¼¼åº¦è¿›è¡Œæ’åº\n            similar_article_sorted = sorted(similar_article.items(), key=lambda item: item[1], reverse=True)\n            if similar_article_sorted:\n                # æ¯æ¬¡è¡Œä¸ºæ¨è10ç¯‡æ–‡ç« \n                similar_article_topk = [int(i[0].split(b':')[1]) for i in similar_article_sorted][:10]\n\n                # æ ¹æ®å†å²å¬å›ç»“æœè¿›è¡Œè¿‡æ»¤\n                history_table = conn.table('history_recall')\n                history_article_data = history_table.cells('reco:his:{}'.format(row.user_id).encode(), 'channel:{}'.format(row.channel_id).encode())\n                # å°†å¤šä¸ªç‰ˆæœ¬éƒ½åŠ å…¥å†å²æ–‡ç« IDåˆ—è¡¨\n                history_article = []\n                if len(history_article_data) >= 2:\n                    for article in history_article_data[:-1]:\n                        history_article.extend(eval(article))\n                else:\n                    history_article = []\n\n                # è¿‡æ»¤history_article\n                recall_article = list(set(similar_article_topk) - set(history_article))\n\n                # å­˜å‚¨åˆ°å¬å›ç»“æœè¡¨åŠå†å²å¬å›ç»“æœè¡¨\n                if recall_article:\n                    content_table = conn.table('cb_recall')\n                    content_table.put(\"recall:user:{}\".format(row.user_id).encode(), {'content:{}'.format(row.channel_id).encode(): str(recall_article).encode()})\n\n                    # æ”¾å…¥å†å²å¬å›ç»“æœè¡¨\n                    history_table.put(\"reco:his:{}\".format(row.user_id).encode(), {'channel:{}'.format(row.channel_id).encode(): str(recall_article).encode()})\n```\nå¯ä»¥æ ¹æ®ç”¨æˆ· ID å’Œé¢‘é“ ID æ¥æŸ¥è¯¢å¬å›ç»“æœ\n```\nhbase(main):028:0> get 'cb_recall', 'recall:user:2'\nCOLUMN                     CELL                                                                        \ncontent:13                    timestamp=1558041569201, value=[141431,14381, 17966, 17454, 14125, 16174]   \n```\n\næœ€åï¼Œä½¿ç”¨ Apscheduler å®šæ—¶æ›´æ–°ã€‚åœ¨ç”¨æˆ·å¬å›æ–¹æ³• `update_user_recall()` ä¸­ï¼Œå¢åŠ åŸºäºå†…å®¹çš„ç¦»çº¿å¬å›æ–¹æ³• `update_content_recall()`ï¼Œé¦–å…ˆè¯»å–ç”¨æˆ·è¡Œä¸ºæ—¥å¿—ï¼Œå¹¶ç­›é€‰ç”¨æˆ·ç‚¹å‡»çš„æ–‡ç« ï¼Œæ¥ç€è¯»å–æ–‡ç« ç›¸ä¼¼è¡¨ï¼Œè·å–ç›¸ä¼¼åº¦æœ€é«˜çš„ K ç¯‡æ–‡ç« ï¼Œç„¶åæ ¹æ®å†å²å¬å›ç»“æœè¿›è¡Œè¿‡æ»¤ï¼Œé˜²æ­¢é‡å¤æ¨èï¼Œæœ€åï¼ŒæŒ‰é¢‘é“åˆ†åˆ«å­˜å…¥å¬å›ç»“æœè¡¨åŠå†å²å¬å›ç»“æœè¡¨\n```\ndef update_user_recall():\n    \"\"\"\n    ç”¨æˆ·çš„é¢‘é“æ¨èå¬å›ç»“æœæ›´æ–°é€»è¾‘\n    :return:\n    \"\"\"\n    ur = UpdateRecall(500)\n    ur.update_als_recall()\n    ur.update_content_recall()\n```\nä¹‹å‰å·²ç»æ·»åŠ å¥½äº†å®šæ—¶æ›´æ–°ç”¨æˆ·å¬å›ç»“æœçš„ä»»åŠ¡ï¼Œæ¯éš” 3 å°æ—¶è¿è¡Œä¸€æ¬¡ï¼Œè¿™æ ·å°±å®Œæˆäº†åŸºäºå†…å®¹çš„ç¦»çº¿å¬å›ã€‚\n```\nfrom apscheduler.schedulers.blocking import BlockingScheduler\nfrom apscheduler.executors.pool import ProcessPoolExecutor\n\n# åˆ›å»ºschedulerï¼Œå¤šè¿›ç¨‹æ‰§è¡Œ\nexecutors = {\n    'default': ProcessPoolExecutor(3)\n}\n\nscheduler = BlockingScheduler(executors=executors)\n\n# æ·»åŠ ä¸€ä¸ªå®šæ—¶è¿è¡Œæ–‡ç« ç”»åƒæ›´æ–°çš„ä»»åŠ¡ï¼Œ æ¯éš”1ä¸ªå°æ—¶è¿è¡Œä¸€æ¬¡\nscheduler.add_job(update_article_profile, trigger='interval', hours=1)\n# æ·»åŠ ä¸€ä¸ªå®šæ—¶è¿è¡Œç”¨æˆ·ç”»åƒæ›´æ–°çš„ä»»åŠ¡ï¼Œ æ¯éš”2ä¸ªå°æ—¶è¿è¡Œä¸€æ¬¡\nscheduler.add_job(update_user_profile, trigger='interval', hours=2)\n# æ·»åŠ ä¸€ä¸ªå®šæ—¶è¿è¡Œç”¨æˆ·å¬å›æ›´æ–°çš„ä»»åŠ¡ï¼Œæ¯éš”3å°æ—¶è¿è¡Œä¸€æ¬¡\nscheduler.add_job(update_user_recall, trigger='interval', hours=3)\n# æ·»åŠ ä¸€ä¸ªå®šæ—¶è¿è¡Œç‰¹å¾ä¸­å¿ƒå¹³å°çš„ä»»åŠ¡ï¼Œæ¯éš”4å°æ—¶æ›´æ–°ä¸€æ¬¡\nscheduler.add_job(update_ctr_feature, trigger='interval', hours=4)\n\nscheduler.start()\n```\n\n# åœ¨çº¿å¬å›\nå‰é¢æˆ‘ä»¬å®ç°äº†åŸºäºå†…å®¹çš„ç¦»çº¿å¬å›ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å®ç°åŸºäºå†…å®¹çš„åœ¨çº¿å¬å›ã€‚åœ¨çº¿å¬å›çš„å®æ—¶æ€§æ›´å¥½ï¼Œèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·çš„çº¿ä¸Šè¡Œä¸ºå®æ—¶åé¦ˆï¼Œå¿«é€Ÿè·Ÿè¸ªç”¨æˆ·çš„åå¥½ï¼Œä¹Ÿèƒ½å¤Ÿè§£å†³ç”¨æˆ·å†·å¯åŠ¨é—®é¢˜ã€‚ç¦»çº¿å¬å›å’Œåœ¨çº¿å¬å›å”¯ä¸€çš„ä¸åŒå°±æ˜¯ï¼Œç¦»çº¿å¬å›è¯»å–çš„æ˜¯ç”¨æˆ·å†å²è¡Œä¸ºæ•°æ®ï¼Œè€Œåœ¨çº¿å¬å›è¯»å–çš„æ˜¯ç”¨æˆ·å®æ—¶çš„è¡Œä¸ºæ•°æ®ï¼Œä»è€Œå¬å›ç”¨æˆ·å½“å‰æ­£åœ¨é˜…è¯»çš„æ–‡ç« çš„ç›¸ä¼¼æ–‡ç« ã€‚\n\né¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡ Spark Streaming è¯»å– Kafka ä¸­çš„ç”¨æˆ·å®æ—¶è¡Œä¸ºæ•°æ®ï¼ŒSpark Streaming é…ç½®å¦‚ä¸‹\n```\nfrom pyspark import SparkConf\nfrom pyspark.sql import SparkSession\nfrom pyspark import SparkContext\nfrom pyspark.streaming import StreamingContext\nfrom pyspark.streaming.kafka import KafkaUtils\nfrom setting.default import DefaultConfig\nimport happybase\n\nSPARK_ONLINE_CONFIG = (\n        (\"spark.app.name\", \"onlineUpdate\"), \n        (\"spark.master\", \"yarn\"),\n        (\"spark.executor.instances\", 4)\n    )\n\nKAFKA_SERVER = \"192.168.19.137:9092\"\n\n# ç”¨äºè¯»å–hbaseç¼“å­˜ç»“æœé…ç½®\npool = happybase.ConnectionPool(size=10, host='hadoop-master', port=9090)\nconf = SparkConf()\nconf.setAll(SPARK_ONLINE_CONFIG)\nsc = SparkContext(conf=conf)\nstream_c = StreamingContext(sc, 60)\n\n# åŸºäºå†…å®¹å¬å›é…ç½®,ç”¨äºæ”¶é›†ç”¨æˆ·è¡Œä¸º\nsimilar_kafkaParams = {\"metadata.broker.list\": DefaultConfig.KAFKA_SERVER, \"group.id\": 'similar'}\nSIMILAR_DS = KafkaUtils.createDirectStream(stream_c, ['click-trace'], similar_kafkaParams)\n```\nKafka ä¸­çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œå¦‚ä¸‹æ‰€ç¤º\n```\n{\"actionTime\":\"2019-12-10 21:04:39\",\"readTime\":\"\",\"channelId\":18,\"param\":{\"action\": \"click\", \"userId\": \"2\", \"articleId\": \"116644\", \"algorithmCombine\": \"C2\"}}\n```\næ¥ä¸‹æ¥ï¼Œåˆ©ç”¨ Spark Streaming å°†ç”¨æˆ·è¡Œä¸ºæ•°æ®ä¼ å…¥åˆ° `get_similar_online_recall()` æ–¹æ³•ä¸­ï¼Œè¿™é‡Œåˆ©ç”¨ `json.loads()` æ–¹æ³•å…ˆå°†å…¶è½¬æ¢ä¸ºäº† json æ ¼å¼ï¼Œæ³¨æ„ç”¨æˆ·è¡Œä¸ºæ•°æ®åœ¨æ¯æ¡ Kafka æ¶ˆæ¯çš„ç¬¬äºŒä¸ªä½ç½®\n```python\nSIMILAR_DS.map(lambda x: json.loads(x[1])).foreachRDD(get_similar_online_recall)\n```\næ¥ç€ï¼Œéå†ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œè¿™é‡Œå¯èƒ½æ¯æ¬¡è¯»å–åˆ°å¤šæ¡ç”¨æˆ·è¡Œä¸ºæ•°æ®ã€‚ç­›é€‰å‡ºè¢«ç‚¹å‡»ã€æ”¶è—æˆ–åˆ†äº«è¿‡çš„æ–‡ç« ï¼Œå¹¶è·å–ä¸å…¶ç›¸ä¼¼åº¦æœ€é«˜çš„ K ç¯‡æ–‡ç« ï¼Œå†æ ¹æ®å†å²å¬å›ç»“æœè¡¨è¿›è¡Œè¿‡æ»¤ï¼Œé˜²æ­¢é‡å¤æ¨èï¼Œæœ€åï¼ŒæŒ‰é¢‘é“åˆ†åˆ«å­˜å…¥å¬å›ç»“æœè¡¨åŠå†å²å¬å›ç»“æœè¡¨\n```\ndef get_online_similar_recall(rdd):\n    \"\"\"\n    è·å–åœ¨çº¿ç›¸ä¼¼æ–‡ç« \n    :param rdd:\n    :return:\n    \"\"\"\n    import happybase\n\n    topk = 10\n    # åˆå§‹åŒ–happybaseè¿æ¥\n    pool = happybase.ConnectionPool(size=10, host='hadoop-master', port=9090)\n    for data in rdd.collect():\n\n        # æ ¹æ®ç”¨æˆ·è¡Œä¸ºç­›é€‰æ–‡ç« \n        if data['param']['action'] in [\"click\", \"collect\", \"share\"]:\n            with pool.connection() as conn:\n                similar_table = conn.table(\"article_similar\")\n\n                # æ ¹æ®ç”¨æˆ·è¡Œä¸ºæ•°æ®æ¶‰åŠæ–‡ç« æ‰¾å‡ºä¸ä¹‹æœ€ç›¸ä¼¼æ–‡ç« (åŸºäºå†…å®¹çš„ç›¸ä¼¼)\n                similar_article = similar_table.row(str(data[\"param\"][\"articleId\"]).encode(), columns=[b\"similar\"])\n                similar_article = sorted(similar_article.items(), key=lambda x: x[1], reverse=True)  # æŒ‰ç›¸ä¼¼åº¦æ’åº\n\n                if similar_article:\n                    similar_article_topk = [int(i[0].split(b\":\")[1]) for i in similar_article[:topk]] # é€‰å–Kç¯‡ä½œä¸ºå¬å›æ¨èç»“æœ\n\n                    # æ ¹æ®å†å²å¬å›ç»“æœè¿›è¡Œè¿‡æ»¤\n                    history_table = conn.table('history_recall')\n                    history_article_data = history_table.cells(b\"reco:his:%s\" % data[\"param\"][\"userId\"].encode(), b\"channel:%d\" % data[\"channelId\"])\n                    # å°†å¤šä¸ªç‰ˆæœ¬éƒ½åŠ å…¥å†å²æ–‡ç« IDåˆ—è¡¨\n                    history_article = []\n                    if len(history_article_data) >1:\n                        for article in history_article_data[:-1]:\n                            history_article.extend(eval(article))\n                    else:\n                        history_article = []\n\n                    # è¿‡æ»¤history_article\n                    recall_article = list(set(similar_article_topk) - set(history_article))\n\n                    # å¦‚æœæœ‰å¬å›ç»“æœ,æŒ‰é¢‘é“åˆ†åˆ«å­˜å…¥å¬å›ç»“æœè¡¨åŠå†å²å¬å›ç»“æœè¡¨\n                    if recall_article:\n                        recall_table = conn.table(\"cb_recall\")\n                        recall_table.put(b\"recall:user:%s\" % data[\"param\"][\"userId\"].encode(), {b\"online:%d\" % data[\"channelId\"]: str(recall_article).encode()})\n                        history_table.put(b\"reco:his:%s\" % data[\"param\"][\"userId\"].encode(), {b\"channel:%d\" % data[\"channelId\"]: str(recall_article).encode()})\n\n                conn.close()\n```\nå¯ä»¥æ ¹æ®ç”¨æˆ· ID å’Œé¢‘é“ ID æ¥æŸ¥è¯¢å¬å›ç»“æœ\n```\nhbase(main):028:0> get 'cb_recall', 'recall:user:2'\nCOLUMN                     CELL                                                                        \nonline:13                    timestamp=1558041569201, value=[141431,14381, 17966, 17454, 14125, 16174]   \n```\nåˆ›å»º `online_update.py`ï¼ŒåŠ å…¥åŸºäºå†…å®¹çš„åœ¨çº¿å¬å›é€»è¾‘\n```\nif __name__ == '__main__':\n    ore = OnlineRecall()\n    ore.update_content_recall()\n    stream_sc.start()\n    _ONE_DAY_IN_SECONDS = 60 * 60 * 24\n    try:\n        while True:\n            time.sleep(_ONE_DAY_IN_SECONDS)\n    except KeyboardInterrupt:\n        pass\n```\nåˆ©ç”¨ Supervisor è¿›è¡Œè¿›ç¨‹ç®¡ç†ï¼Œå¹¶å¼€å¯å®æ—¶è¿è¡Œï¼Œé…ç½®å¦‚ä¸‹ï¼Œå…¶ä¸­ environment éœ€è¦æŒ‡å®šè¿è¡Œæ‰€éœ€ç¯å¢ƒ\n```\n[program:online]\nenvironment=JAVA_HOME=/root/bigdata/jdk,SPARK_HOME=/root/bigdata/spark,HADOOP_HOME=/root/bigdata/hadoop,PYSPARK_PYTHON=/miniconda2/envs/reco_sys/bin/python ,PYSPARK_DRIVER_PYTHON=/miniconda2/envs/reco_sys/bin/python,PYSPARK_SUBMIT_ARGS='--packages org.apache.spark:spark-streaming-kafka-0-8_2.11:2.2.2 pyspark-shell'\ncommand=/miniconda2/envs/reco_sys/bin/python /root/toutiao_project/reco_sys/online/online_update.py\ndirectory=/root/toutiao_project/reco_sys/online\nuser=root\nautorestart=true\nredirect_stderr=true\nstdout_logfile=/root/logs/onlinesuper.log\nloglevel=info\nstopsignal=KILL\nstopasgroup=true\nkillasgroup=true\n```\n\n# å‚è€ƒ\n[https://www.bilibili.com/video/av68356229](https://www.bilibili.com/video/av68356229)\n[https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw](https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw)ï¼ˆå­¦ä¹ èµ„æºå·²ä¿å­˜è‡³ç½‘ç›˜ï¼Œ æå–ç ï¼šeakpï¼‰\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æ–‡ç« æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹8ã€åŸºäºæ¨¡å‹çš„ç¦»çº¿å¬å›.md","url":"/2019/12/05/RecSys/æ–‡ç« æ¨èç³»ç»Ÿ/ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹8ã€åŸºäºæ¨¡å‹çš„ç¦»çº¿å¬å›/","content":"\nå‰é¢æˆ‘ä»¬å®Œæˆäº†æ‰€æœ‰çš„æ•°æ®å‡†å¤‡ï¼Œæ¥ä¸‹æ¥ï¼Œå°±è¦å¼€å§‹å¬å›é˜¶æ®µçš„å·¥ä½œäº†ï¼Œå¯ä»¥åšç¦»çº¿å¬å›ï¼Œä¹Ÿå¯ä»¥åšåœ¨çº¿å¬å›ï¼Œå¬å›ç®—æ³•é€šå¸¸åŒ…æ‹¬åŸºäºå†…å®¹çš„å¬å›å’ŒåŸºäºååŒè¿‡æ»¤çš„å¬å›ã€‚ALS æ¨¡å‹æ˜¯ä¸€ç§åŸºäºæ¨¡å‹çš„ååŒè¿‡æ»¤å¬å›ç®—æ³•ï¼Œæœ¬æ–‡å°†é€šè¿‡ ALS æ¨¡å‹å®ç°ç¦»çº¿å¬å›ã€‚\n\né¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ Hbase ä¸­åˆ›å»ºå¬å›ç»“æœè¡¨ cb_recallï¼Œè¿™é‡Œç”¨ä¸åŒåˆ—æ—æ¥å­˜å‚¨ä¸åŒæ–¹å¼çš„å¬å›ç»“æœï¼Œå…¶ä¸­ als è¡¨ç¤ºæ¨¡å‹å¬å›ï¼Œcontent è¡¨ç¤ºå†…å®¹å¬å›ï¼Œonline è¡¨ç¤ºåœ¨çº¿å¬å›ã€‚é€šè¿‡è®¾ç½®å¤šä¸ªç‰ˆæœ¬æ¥å­˜å‚¨å¤šæ¬¡å¬å›ç»“æœï¼Œé€šè¿‡è®¾ç½®ç”Ÿå­˜æœŸæ¥æ¸…é™¤é•¿æ—¶é—´æœªè¢«ä½¿ç”¨çš„å¬å›ç»“æœã€‚\n```\ncreate 'cb_recall', {NAME=>'als', TTL=>7776000, VERSIONS=>999999}\nalter 'cb_recall', {NAME=>'content', TTL=>7776000, VERSIONS=>999999}\nalter 'cb_recall', {NAME=>'online', TTL=>7776000, VERSIONS=>999999}\n\n# æ’å…¥æ ·ä¾‹\nput 'cb_recall', 'recall:user:5', 'als:2',[1,2,3,4,5,6,7,8,9,10]\nput 'cb_recall', 'recall:user:2', 'content:1',[45,3,5,10,289,11,65,52,109,8]\nput 'cb_recall', 'recall:user:2', 'online:2',[1,2,3,4,5,6,7,8,9,10]\n```\nåœ¨ Hive ä¸­å»ºç«‹å¤–éƒ¨è¡¨ï¼Œç”¨äºç¦»çº¿åˆ†æ\n```\ncreate external table cb_recall_hbase\n(\n    user_id STRING comment \"userID\",\n    als     map<string, ARRAY<BIGINT>> comment \"als recall\",\n    content map<string, ARRAY<BIGINT>> comment \"content recall\",\n    online  map<string, ARRAY<BIGINT>> comment \"online recall\"\n)\n    COMMENT \"user recall table\"\n    STORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler'\n        WITH SERDEPROPERTIES (\"hbase.columns.mapping\" = \":key,als:,content:,online:\")\n    TBLPROPERTIES (\"hbase.table.name\" = \"cb_recall\");\n```\næ¥ç€ï¼Œåœ¨ Hbase ä¸­åˆ›å»ºå†å²å¬å›ç»“æœè¡¨ï¼Œç”¨äºè¿‡æ»¤å·²å†å²å¬å›ç»“æœï¼Œé¿å…é‡å¤æ¨èã€‚è¿™é‡ŒåŒæ ·è®¾ç½®äº†å¤šä¸ªç‰ˆæœ¬æ¥å­˜å‚¨å¤šæ¬¡å†å²å¬å›ç»“æœï¼Œè®¾ç½®äº†ç”Ÿå­˜æœŸæ¥æ¸…é™¤å¾ˆé•¿æ—¶é—´ä»¥å‰çš„å†å²å¬å›ç»“æœ\n```\ncreate 'history_recall', {NAME=>'channel', TTL=>7776000, VERSIONS=>999999}\n\n# æ’å…¥ç¤ºä¾‹\nput 'history_recall', 'recall:user:5', 'als:1',[1,2,3]\nput 'history_recall', 'recall:user:5', 'als:1',[4,5,6,7]\nput 'history_recall', 'recall:user:5', 'als:1',[8,9,10]\n```\n# ALS åŸç†\n\n![](https://upload-images.jianshu.io/upload_images/12790782-e608ec3e758c49d6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\næˆ‘ä»¬å…ˆç®€å•äº†è§£ä¸€ä¸‹ ALS æ¨¡å‹ï¼Œä¸Šå›¾ä¸ºç”¨æˆ·å’Œç‰©å“çš„å…³ç³»çŸ©é˜µï¼Œå…¶ä¸­ï¼Œæ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªç”¨æˆ·ï¼Œæ¯ä¸€åˆ—ä»£è¡¨ä¸€ä¸ªç‰©å“ã€‚è“è‰²å…ƒç´ ä»£è¡¨ç”¨æˆ·æŸ¥çœ‹è¿‡è¯¥ç‰©å“ï¼Œç°è‰²å…ƒç´ ä»£è¡¨ç”¨æˆ·æœªæŸ¥çœ‹è¿‡è¯¥ç‰©å“ï¼Œå‡è®¾æœ‰ m ä¸ªç”¨æˆ·ï¼Œn ä¸ªç‰©å“ï¼Œä¸ºäº†å¾—åˆ°ç”¨æˆ·å¯¹ç‰©å“çš„è¯„åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨çŸ©é˜µåˆ†è§£å°†åŸæœ¬è¾ƒå¤§çš„ç¨€ç–çŸ©é˜µæ‹†åˆ†æˆä¸¤ä¸ªè¾ƒå°çš„ç¨ å¯†çŸ©é˜µï¼Œå³ m x k ç»´çš„ç”¨æˆ·éšå«çŸ©é˜µå’Œ k x n ç»´çš„ç‰©å“éšå«çŸ©é˜µï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n![](https://upload-images.jianshu.io/upload_images/12790782-26825ddee138897c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nå…¶ä¸­ï¼Œç”¨æˆ·çŸ©é˜µçš„æ¯ä¸€è¡Œå°±åŒ…æ‹¬äº†å½±å“ç”¨æˆ·åå¥½çš„ k ä¸ªéšå«å› å­ï¼Œç‰©å“çŸ©é˜µçš„æ¯ä¸€åˆ—å°±åŒ…æ‹¬äº†å½±å“ç‰©å“å†…å®¹çš„ k ä¸ªéšå«å› å­ã€‚è¿™é‡Œç”¨æˆ·çŸ©é˜µå’Œç‰©å“çŸ©é˜µä¸­æ¯ä¸ªéšå«å› å­çš„å€¼å°±æ˜¯åˆ©ç”¨äº¤æ›¿æœ€å°äºŒä¹˜ï¼ˆAlternating Least Squaresï¼ŒALSï¼‰ä¼˜åŒ–ç®—æ³•è®¡ç®—è€Œå¾—çš„ï¼Œæ‰€ä»¥å«åš ALS æ¨¡å‹ã€‚æ¥ä¸‹æ¥ï¼Œå†å°†ç”¨æˆ·çŸ©é˜µå’Œç‰©å“çŸ©é˜µç›¸ä¹˜å³å¯å¾—åˆ°ç”¨æˆ·å¯¹ç‰©å“çš„  m x n  ç»´çš„è¯„åˆ†çŸ©é˜µï¼Œå…¶ä¸­å°±åŒ…æ‹¬æ¯ä¸€ä¸ªç”¨æˆ·å¯¹æ¯ä¸€ä¸ªç‰©å“çš„è¯„åˆ†äº†ï¼Œè¿›è€Œå¯ä»¥æ ¹æ®è¯„åˆ†è¿›è¡Œæ¨èã€‚\n\n# ALS æ¨¡å‹è®­ç»ƒå’Œé¢„æµ‹\nSpark å·²ç»å®ç°äº† ALS æ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è¯»å–ç”¨æˆ·å†å²ç‚¹å‡»è¡Œä¸ºï¼Œæ„é€ è®­ç»ƒé›†æ•°æ®ï¼Œå…¶ä¸­åªéœ€è¦åŒ…æ‹¬ç”¨æˆ· IDã€æ–‡ç«  ID ä»¥åŠæ˜¯å¦ç‚¹å‡»\n```\nspark.sql('use profile')\nuser_article_basic = spark.sql(\"select user_id, article_id, clicked from user_article_basic\")\n```\n`user_article_basic` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œå…¶ä¸­ clicked è¡¨ç¤ºç”¨æˆ·å¯¹æ–‡ç« æ˜¯å¦å‘ç”Ÿè¿‡ç‚¹å‡»\n\n![](https://upload-images.jianshu.io/upload_images/12790782-abb6c53b98c88373.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\næˆ‘ä»¬éœ€è¦å°† clicked ç”± boolean ç±»å‹è½¬æˆ int ç±»å‹ï¼Œå³ true ä¸º 1ï¼Œfalse ä¸º 0\n```\ndef convert_boolean_int(row):\n    return row.user_id, row.article_id, int(row.clicked)\n\nuser_article_basic = user_article_basic.rdd.map(convert_boolean_int).toDF(['user_id', 'article_id', 'clicked'])\n```\n`user_article_basic` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œclicked å·²ç»æ˜¯ int ç±»å‹\n\n![](https://upload-images.jianshu.io/upload_images/12790782-f0075684b769f328.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nå¦å¤–ï¼ŒSpark çš„ ALS æ¨¡å‹è¿˜è¦æ±‚è¾“å…¥çš„ç”¨æˆ· ID å’Œæ–‡ç«  ID å¿…é¡»æ˜¯ä» 1 å¼€å§‹é€’å¢çš„è¿ç»­æ•°å­—ï¼Œæ‰€ä»¥éœ€è¦åˆ©ç”¨ Spark çš„ `Pipeline` å’Œ `StringIndexer`ï¼Œå°†ç”¨æˆ· ID å’Œæ–‡ç«  ID å»ºç«‹ä» 1 å¼€å§‹é€’å¢çš„ç´¢å¼•\n```\nfrom pyspark.ml.feature import StringIndexer\nfrom pyspark.ml import Pipeline\n\nuser_indexer = StringIndexer(inputCol='user_id', outputCol='als_user_id')\narticle_indexer = StringIndexer(inputCol='article_id', outputCol='als_article_id')\npip = Pipeline(stages=[user_indexer, article_indexer])\npip_model = pip.fit(user_article_basic)\nals_user_article = pip_model.transform(user_article_basic)\n```\n`als_user_article` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œals_user_id å’Œ als_article_id å³æ˜¯ ALS æ¨¡å‹æ‰€éœ€çš„ç”¨æˆ·ç´¢å¼•å’Œæ–‡ç« ç´¢å¼•\n\n![](https://upload-images.jianshu.io/upload_images/12790782-98ff5968a2cdd731.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\næ¥ä¸‹æ¥ï¼Œå°†ç”¨æˆ·è¡Œä¸ºæ•°æ®ä¸­çš„ als_user_id, als_article_id, clicked ä¸‰åˆ—ä½œä¸ºè®­ç»ƒé›†ï¼Œå¯¹ ALS æ¨¡å‹è¿›è¡Œè®­ç»ƒï¼Œå¹¶åˆ©ç”¨ ALS æ¨¡å‹è®¡ç®—ç”¨æˆ·å¯¹æ–‡ç« çš„åå¥½å¾—åˆ†ï¼Œè¿™é‡Œå¯ä»¥æŒ‡å®šä¸ºæ¯ä¸ªç”¨æˆ·ä¿ç•™åå¥½å¾—åˆ†æœ€é«˜çš„ K ç¯‡æ–‡ç« \n```\nfrom pyspark.ml.recommendation import ALS\n\ntop_k = 100\nals = ALS(userCol='als_user_id', itemCol='als_article_id', ratingCol='clicked')\nals_model = als.fit(als_user_article)\n\nrecall_res = als_model.recommendForAllUsers(top_k)\n```\n`recall_res` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œå…¶ä¸­ï¼Œals_user_id ä¸ºç”¨æˆ·ç´¢å¼•ï¼Œrecommendations ä¸ºæ¯ä¸ªç”¨æˆ·çš„æ¨èåˆ—è¡¨ï¼ŒåŒ…æ‹¬æ–‡ç« ç´¢å¼•å’Œåå¥½å¾—åˆ†ï¼Œå¦‚ [[255,0.1], [10,0.08], ...]\n\n![](https://upload-images.jianshu.io/upload_images/12790782-a966583c33d30c06.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n# é¢„æµ‹ç»“æœå¤„ç†\næ¥ç€ï¼Œæˆ‘ä»¬è¦å°†æ¨èç»“æœä¸­çš„ç”¨æˆ·ç´¢å¼•å’Œæ–‡ç« ç´¢å¼•è¿˜åŸä¸ºç”¨æˆ· ID å’Œæ–‡ç«  IDï¼Œè¿™å°±éœ€è¦å»ºç«‹ç”¨æˆ· ID ä¸ç”¨æˆ·ç´¢å¼•çš„æ˜ å°„åŠæ–‡ç«  ID ä¸æ–‡ç« ç´¢å¼•çš„æ˜ å°„ï¼Œå¯ä»¥å°†å‰é¢åŒ…å«ç”¨æˆ·ç´¢å¼•å’Œæ–‡ç« ç´¢å¼•çš„ç”¨æˆ·è¡Œä¸ºæ•°æ® `als_user_article` åˆ†åˆ«æŒ‰ç…§ user_id å’Œ article_id åˆ†ç»„ï¼Œå³å¯å¾—åˆ°ç”¨æˆ· ID ä¸ç”¨æˆ·ç´¢å¼•çš„æ˜ å°„ä»¥åŠæ–‡ç«  ID ä¸æ–‡ç« ç´¢å¼•çš„æ˜ å°„\n```\nuser_real_index = als_user_article.groupBy(['user_id']).max('als_user_id').withColumnRenamed('max(als_user_id)', 'als_user_id')\narticle_real_index = als_user_article.groupBy(['article_id']).max('als_article_id').withColumnRenamed('max(als_article_id)', 'als_article_id')\n```\n`user_real_index` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œå³ç”¨æˆ· ID ä¸ç”¨æˆ·ç´¢å¼•çš„æ˜ å°„\n\n![](https://upload-images.jianshu.io/upload_images/12790782-4517cce545326e63.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nå†åˆ©ç”¨ `als_user_id` å°† `recall_res` å’Œ `user_real_index` è¿›è¡Œè¿æ¥ï¼ŒåŠ å…¥ç”¨æˆ· ID\n```\nrecall_res = recall_res.join(user_real_index, on=['als_user_id'], how='left').select(['als_user_id', 'recommendations', 'user_id'])\n```\n`recall_res` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œå¾—åˆ°ç”¨æˆ·ç´¢å¼•ï¼Œæ¨èåˆ—è¡¨å’Œç”¨æˆ· ID\n\n![](https://upload-images.jianshu.io/upload_images/12790782-6939d47b670c5716.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)å­˜å‚¨\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦æ„å»ºå‡ºç”¨æˆ·å’Œæ–‡ç« çš„å…³ç³»ï¼Œåˆ©ç”¨ `explode()` æ–¹æ³•å°† recommendations ä¸­çš„æ¯ç¯‡æ–‡ç« éƒ½è½¬æ¢ä¸ºå•ç‹¬çš„ä¸€æ¡è®°å½•ï¼Œå¹¶åªä¿ç•™ç”¨æˆ· ID å’Œæ–‡ç« ç´¢å¼•è¿™ä¸¤åˆ—æ•°æ®\n```\nimport pyspark.sql.functions as F\n\nrecall_res = recall_res.withColumn('als_article_id', F.explode('recommendations')).drop('recommendations').select(['user_id', 'als_article_id'])\n```\n`recall_res` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œals_article_id åŒ…æ‹¬æ–‡ç« ç´¢å¼•å’Œåå¥½å¾—åˆ†\n\n![](https://upload-images.jianshu.io/upload_images/12790782-4f010be4233f8f6d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\næˆ‘ä»¬å°† als_article_id ä¸­çš„åå¥½å¾—åˆ†å»é™¤ï¼Œåªä¿ç•™æ–‡ç« ç´¢å¼•\n```\ndef get_article_index(row):\n    return row.user_id, row.als_article_id[0]\n\nrecall_res = recall_res.rdd.map(get_article_index).toDF(['user_id', 'als_article_id'])\n```\n`recall_res` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œå¾—åˆ°ç”¨æˆ· ID å’Œæ–‡ç« ç´¢å¼•\n\n![](https://upload-images.jianshu.io/upload_images/12790782-251a47b794797f2a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nä¹‹å‰æˆ‘ä»¬å°†æ–‡ç«  ID å’Œæ–‡ç« ç´¢å¼•ä¿å­˜åˆ°äº† `article_real_index`ï¼Œè¿™é‡Œåˆ©ç”¨ als_article_id å°† recall_res å’Œ `article_real_index` è¿›è¡Œè¿æ¥ï¼Œå¾—åˆ°æ–‡ç«  ID\n```\nrecall_res = recall_res.join(article_real_index, on=['als_article_id'], how='left').select(['user_id', 'article_id'])\n```\n`recall_res` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œå¾—åˆ°ç”¨æˆ· ID å’Œè¦å‘å…¶æ¨èçš„æ–‡ç«  ID\n\n![](https://upload-images.jianshu.io/upload_images/12790782-d42ac7e8e540cdb1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n# æ¨èç»“æœå­˜å‚¨\nä¸ºäº†æ–¹ä¾¿æŸ¥è¯¢ï¼Œæˆ‘ä»¬éœ€è¦å°†æ¨èç»“æœæŒ‰é¢‘é“åˆ†åˆ«è¿›è¡Œå­˜å‚¨ã€‚é¦–å…ˆï¼Œè¯»å–æ–‡ç« å®Œæ•´ä¿¡æ¯ï¼Œå¾—åˆ°é¢‘é“ ID\n```\nspark.sql('use article')\narticle_data = spark.sql(\"select article_id, channel_id from article_data\")\n```\nåˆ©ç”¨ article_id å°† `recall_res` å’Œ `article_data` è¿›è¡Œè¿æ¥ï¼Œåœ¨æ¨èç»“æœä¸­åŠ å…¥é¢‘é“ ID\n```\nrecall_res = recall_res.join(article_data, on=['article_id'], how='left')\n```\n`recall_res` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œæ¨èç»“æœåŠ å…¥äº†é¢‘é“ ID\n\n![](https://upload-images.jianshu.io/upload_images/12790782-d23360fcb5da1901.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nå°†æ¨èç»“æœæŒ‰ç…§ user_id å’Œ channel_id è¿›è¡Œåˆ†ç»„ï¼Œåˆ©ç”¨ `collect_list()` æ–¹æ³•å°†æ–‡ç«  ID åˆå¹¶ä¸ºæ–‡ç« åˆ—è¡¨\n```\nrecall_res = recall_res.groupBy(['user_id', 'channel_id']).agg(F.collect_list('article_id')).withColumnRenamed('collect_list(article_id)', 'article_list')\n```\n`recall_res` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œarticle_list ä¸ºæŸç”¨æˆ·åœ¨æŸé¢‘é“ä¸‹çš„æ¨èæ–‡ç« åˆ—è¡¨\n\n![](https://upload-images.jianshu.io/upload_images/12790782-29f5ad6c579f4ee4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\næœ€åï¼Œå°†æ¨èç»“æœæŒ‰é¢‘é“åˆ†åˆ«å­˜å…¥å¬å›ç»“æœè¡¨ cb_recall åŠå†å²å¬å›ç»“æœè¡¨ history_recallã€‚æ³¨æ„ï¼Œåœ¨ä¿å­˜æ–°çš„å¬å›ç»“æœä¹‹å‰éœ€è¦æ ¹æ®å†å²å¬å›ç»“æœè¿›è¡Œè¿‡æ»¤ï¼Œé˜²æ­¢é‡å¤æ¨è\n```\nrecall_res = recall_res.dropna()\nrecall_res.foreachPartition(save_offline_recall_hbase)\n\ndef save_offline_recall_hbase(partition):\n    \"\"\"ALSæ¨¡å‹ç¦»çº¿å¬å›ç»“æœå­˜å‚¨\n    \"\"\"\n    import happybase\n    pool = happybase.ConnectionPool(size=10, host='hadoop-master', port=9090)\n    for row in partition:\n        with pool.connection() as conn:\n            # è¯»å–å†å²å¬å›ç»“æœè¡¨\n            history_table = conn.table('history_recall')\n            # è¯»å–åŒ…å«å¤šä¸ªç‰ˆæœ¬çš„å†å²å¬å›ç»“æœ\n            history_article_data = history_table.cells('reco:his:{}'.format(row.user_id).encode(),\n                                       'channel:{}'.format(row.channel_id).encode())\n\n            # åˆå¹¶å¤šä¸ªç‰ˆæœ¬å†å²å¬å›ç»“æœ\n            history_article = []ï¼ˆæ¯”å¦‚æœ‰çš„ç”¨æˆ·ä¼šæ¯”è¾ƒæ€€æ—§ï¼‰\n            if len(history_article_data) >= 2:\n                for article in history_article_data[:-1]:\n                    history_article.extend(eval(article))\n            else:\n                history_article = []\n\n            # è¿‡æ»¤history_article\n            recall_article = list(set(row.article_list) - set(history_article))\n\n            if recall_article:\n                table = conn.table('cb_recall')\n                table.put('recall:user:{}'.format(row.user_id).encode(), {'als:{}'.format(row.channel_id).encode(): str(recall_article).encode()})\n                history_table.put(\"reco:his:{}\".format(row.user_id).encode(), {'channel:{}'.format(row.channel_id): str(recall_article).encode()})\n            conn.close()\n```\nå¯ä»¥æ ¹æ®ç”¨æˆ· ID å’Œé¢‘é“ ID æ¥æŸ¥è¯¢å¬å›ç»“æœ\n```\nhbase(main):028:0> get 'cb_recall', 'recall:user:2'\nCOLUMN                     CELL                                                                        \nals:13                    timestamp=1558041569201, value=[141431,14381, 17966, 17454, 14125, 16174]   \n```\n# Apscheduler å®šæ—¶æ›´æ–°\nåœ¨ç”¨æˆ·å¬å›æ–¹æ³• `update_user_recall()` ä¸­ï¼Œå¢åŠ åŸºäºæ¨¡å‹çš„ç¦»çº¿å¬å›æ–¹æ³• `update_content_recall()`ï¼Œé¦–å…ˆè¯»å–ç”¨æˆ·è¡Œä¸ºæ—¥å¿—ï¼Œè¿›è¡Œæ•°æ®é¢„å¤„ç†ï¼Œæ„å»ºè®­ç»ƒé›†ï¼Œæ¥ç€å¯¹ ALS æ¨¡å‹è¿›è¡Œè®­ç»ƒå’Œé¢„æµ‹ï¼Œæœ€åå¯¹é¢„æµ‹å‡ºçš„æ¨èç»“æœè¿›è¡Œè§£æå¹¶æŒ‰é¢‘é“åˆ†åˆ«å­˜å…¥å¬å›ç»“æœè¡¨å’Œå†å²å¬å›ç»“æœè¡¨\n```\ndef update_user_recall():\n    \"\"\"\n    ç”¨æˆ·çš„é¢‘é“æ¨èå¬å›ç»“æœæ›´æ–°é€»è¾‘\n    :return:\n    \"\"\"\n    ur = UpdateRecall(500)\n    ur.update_als_recall()\n```\næ·»åŠ å®šæ—¶æ›´æ–°ç”¨æˆ·å¬å›ç»“æœçš„ä»»åŠ¡ï¼Œæ¯éš” 3 å°æ—¶è¿è¡Œä¸€æ¬¡\n```\nfrom apscheduler.schedulers.blocking import BlockingScheduler\nfrom apscheduler.executors.pool import ProcessPoolExecutor\n\n# åˆ›å»ºschedulerï¼Œå¤šè¿›ç¨‹æ‰§è¡Œ\nexecutors = {\n    'default': ProcessPoolExecutor(3)\n}\n\nscheduler = BlockingScheduler(executors=executors)\n\n# æ·»åŠ ä¸€ä¸ªå®šæ—¶è¿è¡Œæ–‡ç« ç”»åƒæ›´æ–°çš„ä»»åŠ¡ï¼Œ æ¯éš”1ä¸ªå°æ—¶è¿è¡Œä¸€æ¬¡\nscheduler.add_job(update_article_profile, trigger='interval', hours=1)\n# æ·»åŠ ä¸€ä¸ªå®šæ—¶è¿è¡Œç”¨æˆ·ç”»åƒæ›´æ–°çš„ä»»åŠ¡ï¼Œ æ¯éš”2ä¸ªå°æ—¶è¿è¡Œä¸€æ¬¡\nscheduler.add_job(update_user_profile, trigger='interval', hours=2)\n# æ·»åŠ ä¸€ä¸ªå®šæ—¶è¿è¡Œç”¨æˆ·å¬å›æ›´æ–°çš„ä»»åŠ¡ï¼Œæ¯éš”3å°æ—¶è¿è¡Œä¸€æ¬¡\nscheduler.add_job(update_user_recall, trigger='interval', hours=3)\n# æ·»åŠ ä¸€ä¸ªå®šæ—¶è¿è¡Œç‰¹å¾ä¸­å¿ƒå¹³å°çš„ä»»åŠ¡ï¼Œæ¯éš”4å°æ—¶æ›´æ–°ä¸€æ¬¡\nscheduler.add_job(update_ctr_feature, trigger='interval', hours=4)\n\nscheduler.start()\n```\n\n# å‚è€ƒ\n[https://www.bilibili.com/video/av68356229](https://www.bilibili.com/video/av68356229)\n[https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw](https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw)ï¼ˆå­¦ä¹ èµ„æºå·²ä¿å­˜è‡³ç½‘ç›˜ï¼Œ æå–ç ï¼šeakpï¼‰\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æ–‡ç« æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹7ã€æ„å»ºç¦»çº¿æ–‡ç« ç‰¹å¾å’Œç”¨æˆ·ç‰¹å¾.md","url":"/2019/12/05/RecSys/æ–‡ç« æ¨èç³»ç»Ÿ/æ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹7ã€æ„å»ºç¦»çº¿æ–‡ç« ç‰¹å¾å’Œç”¨æˆ·ç‰¹å¾/","content":"\nå‰é¢æˆ‘ä»¬å®Œæˆäº†æ–‡ç« ç”»åƒå’Œç”¨æˆ·ç”»åƒçš„æ„å»ºï¼Œç”»åƒæ•°æ®ä¸»è¦æ˜¯æä¾›ç»™å¬å›é˜¶æ®µçš„å„ç§å¬å›ç®—æ³•ä½¿ç”¨ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¿˜è¦ä¸ºæ’åºé˜¶æ®µçš„å„ç§æ’åºæ¨¡å‹åšæ•°æ®å‡†å¤‡ï¼Œé€šè¿‡ç‰¹å¾å·¥ç¨‹å°†ç”»åƒæ•°æ®è¿›ä¸€æ­¥åŠ å·¥ä¸ºç‰¹å¾æ•°æ®ï¼Œä»¥ä¾›æ’åºæ¨¡å‹ç›´æ¥ä½¿ç”¨ã€‚\n\næˆ‘ä»¬å¯ä»¥å°†ç‰¹å¾æ•°æ®å­˜å‚¨åˆ° Hbase ä¸­ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆåœ¨ Hbase ä¸­åˆ›å»ºå¥½ ctr_feature_article è¡¨ å’Œ ctr_feature_user è¡¨ï¼Œåˆ†åˆ«å­˜å‚¨æ–‡ç« ç‰¹å¾æ•°æ®å’Œç”¨æˆ·ç‰¹å¾æ•°æ®\n```sql\n-- æ–‡ç« ç‰¹å¾è¡¨\ncreate 'ctr_feature_article', 'article'\n-- å¦‚ article:13401 timestamp=1555635749357, value=[18.0,0.08196639249252607,0.11217275332895373,0.1353835167902181,0.16086650318453152,0.16356418791892943,0.16740082750337945,0.18091837445730974,0.1907214431716628,0.2........................-0.04634634410271921,-0.06451843378804649,-0.021564142420785692,0.10212902152136256]\n\n-- ç”¨æˆ·ç‰¹å¾è¡¨\ncreate 'ctr_feature_user', 'channel'\n-- å¦‚ 4 column=channel:13, timestamp=1555647172980, value=[]\n```\n\n# æ„å»ºæ–‡ç« ç‰¹å¾\næ–‡ç« ç‰¹å¾åŒ…æ‹¬æ–‡ç« å…³é”®è¯æƒé‡ã€æ–‡ç« é¢‘é“ä»¥åŠæ–‡ç« å‘é‡ï¼Œæˆ‘ä»¬é¦–å…ˆè¯»å–æ–‡ç« ç”»åƒ\n```\nspark.sql(\"use article\")\narticle_profile = spark.sql(\"select * from article_profile\")\n```\nåœ¨æ–‡ç« ç”»åƒä¸­ç­›é€‰å‡ºæƒé‡æœ€é«˜çš„ K ä¸ªå…³é”®è¯çš„æƒé‡ï¼Œä½œä¸ºæ–‡ç« å…³é”®è¯çš„æƒé‡å‘é‡\n```\ndef article_profile_to_feature(row):\n    try:\n        article_weights = sorted(row.keywords.values())[:10]\n    except Exception as e:\n        article_weights = [0.0] * 10\n    return row.article_id, row.channel_id, article_weights\narticle_profile = article_profile.rdd.map(article_profile_to_feature).toDF(['article_id', 'channel_id', 'weights'])\n```\n`article_profile` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œweights å³ä¸ºæ–‡ç« å…³é”®è¯çš„æƒé‡å‘é‡\n\n![](https://upload-images.jianshu.io/upload_images/12790782-bdc45d1e743a3c1b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\næ¥ä¸‹æ¥ï¼Œè¯»å–æ–‡ç« å‘é‡ä¿¡æ¯ï¼Œå†å°†é¢‘é“ ID å’Œæ–‡ç« å‘é‡åŠ å…¥è¿›æ¥ï¼Œåˆ©ç”¨ article_id å°† article_profile å’Œ article_vector è¿›è¡Œå†…è¿æ¥ï¼Œå¹¶å°† weights å’Œ articlevector è½¬ä¸º `vector` ç±»å‹\n```\narticle_vector = spark.sql(\"select * from article_vector\")\narticle_feature = article_profile.join(article_vector, on=['article_id'], how='inner')\n\ndef feature_to_vector(row):\n\n    from pyspark.ml.linalg import Vectors\n\n    return row.article_id, row.channel_id, Vectors.dense(row.weights), Vectors.dense(row.articlevector)\n\narticle_feature = article_feature.rdd.map(feature_to_vector).toDF(['article_id', 'channel_id', 'weights', 'articlevector'])\n```\næœ€åï¼Œæˆ‘ä»¬å°† channel_id, weights, articlevector åˆå¹¶ä¸ºä¸€åˆ— features å³å¯ï¼ˆé€šå¸¸ channel_id å¯ä»¥è¿›è¡Œ one-hot ç¼–ç ï¼Œæˆ‘ä»¬è¿™é‡Œå…ˆçœç•¥äº†ï¼‰\n```\nfrom pyspark.ml.feature import VectorAssembler\n\ncolumns = ['article_id', 'channel_id', 'weights', 'articlevector']\narticle_feature = VectorAssembler().setInputCols(columns[1:4]).setOutputCol(\"features\").transform(article_feature)\n```\n`article_feature` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œfeatures å°±æ˜¯æˆ‘ä»¬å‡†å¤‡å¥½çš„æ–‡ç« ç‰¹å¾\n\n![](https://upload-images.jianshu.io/upload_images/12790782-1d9a977180832173.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\næœ€åï¼Œå°†æ–‡ç« ç‰¹å¾ç»“æœä¿å­˜åˆ° Hbase ä¸­\n```\ndef save_article_feature_to_hbase(partition):\n    import happybase\n    pool = happybase.ConnectionPool(size=10, host='hadoop-master')\n    with pool.connection() as conn:\n        table = conn.table('ctr_feature_article')\n        for row in partition:\n            table.put('{}'.format(row.article_id).encode(),\n                     {'article:{}'.format(row.article_id).encode(): str(row.features).encode()})\n\narticle_feature.foreachPartition(save_article_feature_to_hbase)\n```\n\n# æ„å»ºç”¨æˆ·ç‰¹å¾\nç”±äºç”¨æˆ·åœ¨ä¸åŒé¢‘é“çš„åå¥½å·®å¼‚è¾ƒå¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è®¡ç®—ç”¨æˆ·åœ¨æ¯ä¸ªé¢‘é“çš„ç‰¹å¾ã€‚é¦–å…ˆè¯»å–ç”¨æˆ·ç”»åƒï¼Œå°†ç©ºå€¼åˆ—åˆ é™¤\n```\nspark.sql(\"use profile\")\n\nuser_profile_hbase = spark.sql(\"select user_id, information.birthday, information.gender, article_partial, env from user_profile_hbase\")\n```\n`user_profile_hbase` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œå…¶ä¸­ article_partial ä¸ºç”¨æˆ·æ ‡ç­¾åŠæƒé‡ï¼Œå¦‚ (['18:vars': 0.2, '18: python':0.2, ...], ['19:java': 0.2, '19: javascript':0.2, ...], ...) è¡¨ç¤ºæŸä¸ªç”¨æˆ·åœ¨ 18 å·é¢‘é“çš„æ ‡ç­¾åŒ…æ‹¬ varã€python ç­‰ï¼Œåœ¨ 19 å·é¢‘é“çš„æ ‡ç­¾åŒ…æ‹¬ javaã€javascriptç­‰ã€‚\n\n![](https://upload-images.jianshu.io/upload_images/12790782-655ec8ea6979ab94.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nç”±äº gender å’Œ birthday ä¸¤åˆ—ç©ºå€¼è¾ƒå¤šï¼Œæˆ‘ä»¬å°†è¿™ä¸¤åˆ—å»é™¤ï¼ˆå®é™…åœºæ™¯ä¸­ä¹Ÿå¯ä»¥æ ¹æ®æ•°æ®æƒ…å†µé€‰æ‹©å¡«å……ï¼‰\n```\n# å»é™¤ç©ºå€¼åˆ—\nuser_profile_hbase = user_profile_hbase.drop('env', 'birthday', 'gender')\n```\næå–ç”¨æˆ· IDï¼Œè·å– user_id åˆ—çš„å†…å®¹ä¸­ `:` åé¢çš„æ•°å€¼å³ä¸ºç”¨æˆ· ID\n```\ndef get_user_id(row):\n    return int(row.user_id.split(\":\")[1]), row.article_partial\n\nuser_profile_hbase = user_profile_hbase.rdd.map(get_user_id)\n```\nå°† `user_profile_hbase` è½¬ä¸º DataFrame ç±»å‹\n```\nfrom pyspark.sql.types import *\n\n_schema = StructType([\n    StructField(\"user_id\", LongType()),\n    StructField(\"weights\", MapType(StringType(), DoubleType()))\n])\n\nuser_profile_hbase = spark.createDataFrame(user_profile_hbase, schema=_schema)\n```\næ¥ç€ï¼Œå°†æ¯ä¸ªé¢‘é“å†…æƒé‡æœ€é«˜çš„ K ä¸ªæ ‡ç­¾çš„æƒé‡ä½œä¸ºç”¨æˆ·æ ‡ç­¾æƒé‡å‘é‡\n```\ndef frature_preprocess(row):\n\n    from pyspark.ml.linalg import Vectors\n\n    user_weights = []\n    for i in range(1, 26):\n        try:\n            channel_weights = sorted([row.weights[key] for key in row.weights.keys() if key.split(':')[0] == str(i)])[:10]\n            user_weights.append(channel_weights)\n        except:\n            user_weights.append([0.0] * 10)\n    return row.user_id, user_weights\n\nuser_features = user_profile_hbase.rdd.map(frature_preprocess).collect()\n```\n`user_features` å°±æ˜¯æˆ‘ä»¬è®¡ç®—å¥½çš„ç”¨æˆ·ç‰¹å¾ï¼Œæ•°æ®ç»“æ„ç±»ä¼¼ (10, [[0.2, 2.1, ...], [0.2, 2.1, ...]], ...)ï¼Œå…¶ä¸­å…ƒç»„ç¬¬ä¸€ä¸ªå…ƒç´  10 å³ä¸ºç”¨æˆ· IDï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯é•¿åº¦ä¸º 25 çš„ç”¨æˆ·é¢‘é“æ ‡ç­¾æƒé‡åˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ æ˜¯é•¿åº¦ä¸º K çš„ç”¨æˆ·æ ‡ç­¾æƒé‡åˆ—è¡¨ï¼Œä»£è¡¨ç”¨æˆ·åœ¨æŸä¸ªé¢‘é“ä¸‹çš„æ ‡ç­¾æƒé‡å‘é‡ã€‚\n\næœ€åï¼Œå°†ç”¨æˆ·ç‰¹å¾ç»“æœä¿å­˜åˆ° Hbaseï¼Œåˆ©ç”¨ Spark çš„ `batch()` æ–¹æ³•ï¼ŒæŒ‰é¢‘é“æ‰¹é‡å­˜å‚¨ç”¨æˆ·ç‰¹å¾\n```\nimport happybase\n\n# æ‰¹é‡æ’å…¥Hbaseæ•°æ®åº“ä¸­\npool = happybase.ConnectionPool(size=10, host='hadoop-master', port=9090)\nwith pool.connection() as conn:\n    ctr_feature = conn.table('ctr_feature_user')\n    with ctr_feature.batch(transaction=True) as b:\n        for i in range(len(user_features)):\n            for j in range(25):\n                b.put(\"{}\".format(res[i][0]).encode(),{\"channel:{}\".format(j+1).encode(): str(res[i][1][j]).encode()})\n    conn.close()\n```\n# Apscheduler å®šæ—¶æ›´æ–°\nå®šä¹‰æ–‡ç« ç‰¹å¾å’Œç”¨æˆ·ç‰¹å¾çš„ç¦»çº¿æ›´æ–°æ–¹æ³•\n```\ndef update_ctr_feature():\n    \"\"\"\n    æ›´æ–°æ–‡ç« ç‰¹å¾å’Œç”¨æˆ·ç‰¹å¾\n    :return:\n    \"\"\"\n    fp = FeaturePlatform()\n    fp.update_user_ctr_feature_to_hbase()\n    fp.update_article_ctr_feature_to_hbase()\n```\nåœ¨ Apscheduler ä¸­æ·»åŠ å®šæ—¶æ›´æ–°æ–‡ç« ç‰¹å¾å’Œç”¨æˆ·ç‰¹å¾çš„ä»»åŠ¡ï¼Œæ¯éš” 4 å°æ—¶è¿è¡Œä¸€æ¬¡\n```\nfrom apscheduler.schedulers.blocking import BlockingScheduler\nfrom apscheduler.executors.pool import ProcessPoolExecutor\n\n# åˆ›å»ºschedulerï¼Œå¤šè¿›ç¨‹æ‰§è¡Œ\nexecutors = {\n    'default': ProcessPoolExecutor(3)\n}\n\nscheduler = BlockingScheduler(executors=executors)\n\n# æ·»åŠ ä¸€ä¸ªå®šæ—¶è¿è¡Œæ–‡ç« ç”»åƒæ›´æ–°çš„ä»»åŠ¡ï¼Œ æ¯éš”1ä¸ªå°æ—¶è¿è¡Œä¸€æ¬¡\nscheduler.add_job(update_article_profile, trigger='interval', hours=1)\n# æ·»åŠ ä¸€ä¸ªå®šæ—¶è¿è¡Œç”¨æˆ·ç”»åƒæ›´æ–°çš„ä»»åŠ¡ï¼Œ æ¯éš”2ä¸ªå°æ—¶è¿è¡Œä¸€æ¬¡\nscheduler.add_job(update_user_profile, trigger='interval', hours=2)\n# æ·»åŠ ä¸€ä¸ªå®šæ—¶è¿è¡Œç‰¹å¾ä¸­å¿ƒå¹³å°çš„ä»»åŠ¡ï¼Œæ¯éš”4å°æ—¶æ›´æ–°ä¸€æ¬¡\nscheduler.add_job(update_ctr_feature, trigger='interval', hours=4)\n\nscheduler.start()\n```\n\n# å‚è€ƒ\n[https://www.bilibili.com/video/av68356229](https://www.bilibili.com/video/av68356229)\n[https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw](https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw)ï¼ˆå­¦ä¹ èµ„æºå·²ä¿å­˜è‡³ç½‘ç›˜ï¼Œ æå–ç ï¼šeakpï¼‰\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æ–‡ç« æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹6ã€æ„å»ºç¦»çº¿ç”¨æˆ·ç”»åƒ.md","url":"/2019/12/05/RecSys/æ–‡ç« æ¨èç³»ç»Ÿ/ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹6ã€æ„å»ºç¦»çº¿ç”¨æˆ·ç”»åƒ/","content":"\nå‰é¢æˆ‘ä»¬å®Œæˆäº†æ–‡ç« ç”»åƒçš„æ„å»ºä»¥åŠæ–‡ç« ç›¸ä¼¼åº¦çš„è®¡ç®—ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¦å®ç°ç”¨æˆ·ç”»åƒçš„æ„å»ºäº†ã€‚ç”¨æˆ·ç”»åƒå¾€å¾€æ˜¯å¤§å‹ç½‘ç«™çš„é‡è¦æ¨¡å—ï¼ŒåŸºäºç”¨æˆ·ç”»åƒä¸ä»…å¯ä»¥å®ç°ä¸ªæ€§åŒ–æ¨èï¼Œè¿˜å¯ä»¥å®ç°ç”¨æˆ·åˆ†ç¾¤ã€ç²¾å‡†æ¨é€ã€ç²¾å‡†è¥é”€ä»¥åŠç”¨æˆ·è¡Œä¸ºé¢„æµ‹ã€å•†ä¸šåŒ–è½¬åŒ–åˆ†æç­‰ï¼Œä¸ºå•†ä¸šå†³ç­–æä¾›æ•°æ®æ”¯æŒã€‚é€šå¸¸ç”¨æˆ·ç”»åƒåŒ…æ‹¬ç”¨æˆ·å±æ€§ä¿¡æ¯ï¼ˆæ€§åˆ«ã€å¹´é¾„ã€å‡ºç”Ÿæ—¥æœŸç­‰ï¼‰ã€ç”¨æˆ·è¡Œä¸ºä¿¡æ¯ï¼ˆæµè§ˆã€æ”¶è—ã€ç‚¹èµç­‰ï¼‰ä»¥åŠç¯å¢ƒä¿¡æ¯ï¼ˆæ—¶é—´ã€åœ°ç†ä½ç½®ç­‰ï¼‰ã€‚\n\n# å¤„ç†ç”¨æˆ·è¡Œä¸ºæ•°æ®\nåœ¨æ•°æ®å‡†å¤‡é˜¶æ®µï¼Œæˆ‘ä»¬é€šè¿‡ Flume å·²ç»å¯ä»¥å°†ç”¨æˆ·è¡Œä¸ºæ•°æ®æ”¶é›†åˆ° Hive çš„ user_action è¡¨çš„ HDFS è·¯å¾„ä¸­ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹è¿™äº›æ•°æ®é•¿ä»€ä¹ˆæ ·å­ï¼Œæˆ‘ä»¬è¯»å–å½“å¤©çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œæ³¨æ„è¯»å–ä¹‹å‰è¦å…ˆå…³è”åˆ†åŒº\n```python\n_day = time.strftime(\"%Y-%m-%d\", time.localtime())\n_localions = '/user/hive/warehouse/profile.db/user_action/' + _day\nif fs.exists(_localions):\n    # å¦‚æœæœ‰è¯¥æ–‡ä»¶ç›´æ¥å…³è”ï¼Œæ•è·å…³è”é‡å¤å¼‚å¸¸\n    try:\n        self.spark.sql(\"alter table user_action add partition (dt='%s') location '%s'\" % (_day, _localions))\n    except Exception as e:\n        pass\n\n    self.spark.sql(\"use profile\")\n    user_action = self.spark.sql(\"select actionTime, readTime, channelId, param.articleId, param.algorithmCombine, param.action, param.userId from user_action where dt>=\" + _day)\n```\n`user_action` ç»“æœå¦‚ä¸‹æ‰€ç¤º\n\n![](https://upload-images.jianshu.io/upload_images/12790782-04c3417b7c70dacd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nå¯ä»¥å‘ç°ï¼Œä¸Šé¢çš„ä¸€æ¡è®°å½•ä»£è¡¨ç”¨æˆ·å¯¹æ–‡ç« çš„ä¸€æ¬¡è¡Œä¸ºï¼Œä½†é€šå¸¸æˆ‘ä»¬éœ€è¦æŸ¥è¯¢æŸä¸ªç”¨æˆ·å¯¹æŸç¯‡æ–‡ç« çš„æ‰€æœ‰è¡Œä¸ºï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬è¦å°†è¿™é‡Œç”¨æˆ·å¯¹æ–‡ç« çš„å¤šæ¡è¡Œä¸ºæ•°æ®åˆå¹¶ä¸ºä¸€æ¡ï¼Œå…¶ä¸­åŒ…æ‹¬ç”¨æˆ·å¯¹æ–‡ç« çš„æ‰€æœ‰è¡Œä¸ºã€‚æˆ‘ä»¬éœ€è¦æ–°å»ºä¸€ä¸ª Hive è¡¨ user_article_basicï¼Œè¿™å¼ è¡¨åŒ…æ‹¬äº†ç”¨æˆ· IDã€æ–‡ç«  IDã€æ˜¯å¦æ›å…‰ã€æ˜¯å¦ç‚¹å‡»ã€é˜…è¯»æ—¶é—´ç­‰ç­‰ï¼Œéšåæˆ‘ä»¬å°†å¤„ç†å¥½çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®å­˜å‚¨åˆ°æ­¤è¡¨ä¸­\n```sql\ncreate table user_article_basic\n(\n    user_id     BIGINT comment \"userID\",\n    action_time STRING comment \"user actions time\",\n    article_id  BIGINT comment \"articleid\",\n    channel_id  INT comment \"channel_id\",\n    shared      BOOLEAN comment \"is shared\",\n    clicked     BOOLEAN comment \"is clicked\",\n    collected   BOOLEAN comment \"is collected\",\n    exposure    BOOLEAN comment \"is exposured\",\n    read_time   STRING comment \"reading time\"\n)\n    COMMENT \"user_article_basic\"\n    CLUSTERED by (user_id) into 2 buckets\n    STORED as textfile\n    LOCATION '/user/hive/warehouse/profile.db/user_article_basic';\n```\néå†æ¯ä¸€æ¡åŸå§‹ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œåˆ¤æ–­ç”¨æˆ·å¯¹æ–‡ç« çš„è¡Œä¸ºï¼Œåœ¨ user_action_basic ä¸­å°†è¯¥ç”¨æˆ·ä¸è¯¥æ–‡ç« å¯¹åº”çš„è¡Œä¸ºè®¾ç½®ä¸º True\n```\nif user_action.collect():\n    def _generate(row):\n        _list = []\n        if row.action == 'exposure':\n            for article_id in eval(row.articleId):\n                # [\"user_id\", \"action_time\",\"article_id\", \"channel_id\", \"shared\", \"clicked\", \"collected\", \"exposure\", \"read_time\"]\n                _list.append(\n                    [row.userId, row.actionTime, article_id, row.channelId, False, False, False, True, row.readTime])\n            return _list\n        else:\n            class Temp(object):\n                shared = False\n                clicked = False\n                collected = False\n                read_time = \"\"\n\n            _tp = Temp()\n            if row.action == 'click':\n                _tp.clicked = True\n            elif row.action == 'share':\n                _tp.shared = True\n            elif row.action == 'collect':\n                _tp.collected = True\n            elif row.action == 'read':\n                _tp.clicked = True\n\n            _list.append(\n                [row.userId, row.actionTime, int(row.articleId), row.channelId, _tp.shared, _tp.clicked, _tp.collected,\n                 True, row.readTime])\n            return _list\n\n    user_action_basic = user_action.rdd.flatMap(_generate)\n    user_action_basic = user_action_basic.toDF(\n        [\"user_id\", \"action_time\", \"article_id\", \"channel_id\", \"shared\", \"clicked\", \"collected\", \"exposure\",\n         \"read_time\"])\n```\n`user_action_basic` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œè¿™é‡Œçš„ä¸€æ¡è®°å½•åŒ…æ‹¬äº†æŸä¸ªç”¨æˆ·å¯¹æŸç¯‡æ–‡ç« çš„æ‰€æœ‰è¡Œä¸º\n\n![](https://upload-images.jianshu.io/upload_images/12790782-651af8651abfca3c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nç”±äº Hive ç›®å‰è¿˜ä¸æ”¯æŒ pyspark çš„åŸå­æ€§æ“ä½œï¼Œæ‰€ä»¥ user_article_basic è¡¨çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®åªèƒ½å…¨é‡æ›´æ–°ï¼ˆå®é™…åœºæ™¯ä¸­å¯ä»¥é€‰æ‹©å…¶ä»–è¯­è¨€æˆ–æ•°æ®åº“å®ç°ï¼‰ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦å°†å½“å¤©çš„ç”¨æˆ·è¡Œä¸ºä¸ user_action_basic çš„å†å²ç”¨æˆ·è¡Œä¸ºè¿›è¡Œåˆå¹¶\n```\nold_data = uup.spark.sql(\"select * from user_article_basic\")\nnew_data = old_data.unionAll(user_action_basic)\n```\nåˆå¹¶ååˆä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯ç”¨æˆ· ID å’Œæ–‡ç«  ID å¯èƒ½é‡å¤ï¼Œå› ä¸ºä»Šå¤©æŸä¸ªç”¨æˆ·å¯¹æŸç¯‡æ–‡ç« çš„è®°å½•å¯èƒ½åœ¨å†å²æ•°æ®ä¸­ä¹Ÿå­˜åœ¨ï¼Œè€Œ `unionAll()` æ–¹æ³•å¹¶æ²¡æœ‰å»é‡ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§ç”¨æˆ· ID å’Œæ–‡ç«  ID è¿›è¡Œåˆ†ç»„ï¼Œåˆ©ç”¨ `max()` æ–¹æ³•å¾—åˆ° action_time, channel_id, shared, clicked, collected, exposure, read_time å³å¯ï¼Œå»é‡åç›´æ¥å­˜å‚¨åˆ° user_article_basic è¡¨ä¸­\n```\nnew_data.registerTempTable(\"temptable\")\n\nself.spark.sql('''insert overwrite table user_article_basic select user_id, max(action_time) as action_time, \n        article_id, max(channel_id) as channel_id, max(shared) as shared, max(clicked) as clicked, \n        max(collected) as collected, max(exposure) as exposure, max(read_time) as read_time from temptable \n        group by user_id, article_id''')\n```\nè¡¨ user_article_basic ç»“æœå¦‚ä¸‹æ‰€ç¤º\n\n![](https://upload-images.jianshu.io/upload_images/12790782-508d84da9f16c36f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n# è®¡ç®—ç”¨æˆ·ç”»åƒ\næˆ‘ä»¬é€‰æ‹©å°†ç”¨æˆ·ç”»åƒå­˜å‚¨åœ¨ Hbase ä¸­ï¼Œå› ä¸º Hbase æ”¯æŒåŸå­æ€§æ“ä½œå’Œå¿«é€Ÿè¯»å–ï¼Œå¹¶ä¸” Hive ä¹Ÿå¯ä»¥é€šè¿‡åˆ›å»ºå¤–éƒ¨è¡¨å…³è”åˆ° Hbaseï¼Œè¿›è¡Œç¦»çº¿åˆ†æï¼Œå¦‚æœè¦åˆ é™¤ Hive å¤–éƒ¨è¡¨çš„è¯ï¼Œå¯¹ Hbase ä¹Ÿæ²¡æœ‰å½±å“ã€‚é¦–å…ˆï¼Œåœ¨ Hbase ä¸­åˆ›å»ºç”¨æˆ·ç”»åƒè¡¨\n```sql\ncreate 'user_profile', 'basic','partial','env'\n```\nåœ¨ Hive ä¸­åˆ›å»º Hbase å¤–éƒ¨è¡¨ï¼Œæ³¨æ„å­—æ®µç±»å‹è®¾ç½®ä¸º map\n```sql\ncreate external table user_profile_hbase\n(\n    user_id         STRING comment \"userID\",\n    information     MAP<STRING, DOUBLE> comment \"user basic information\",\n    article_partial MAP<STRING, DOUBLE> comment \"article partial\",\n    env             MAP<STRING, INT> comment \"user env\"\n)\n    COMMENT \"user profile table\"\n    STORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler'\n        WITH SERDEPROPERTIES (\"hbase.columns.mapping\" = \":key,basic:,partial:,env:\")\n    TBLPROPERTIES (\"hbase.table.name\" = \"user_profile\");\n```\nåˆ›å»ºå¤–éƒ¨è¡¨ä¹‹åï¼Œè¿˜éœ€è¦å¯¼å…¥ä¸€äº›ä¾èµ–åŒ…\n```\ncp -r /root/bigdata/hbase/lib/hbase-*.jar /root/bigdata/spark/jars/\ncp -r /root/bigdata/hive/lib/h*.jar /root/bigdata/spark/jars/\n```\næ¥ä¸‹æ¥ï¼Œè¯»å–å¤„ç†å¥½çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œç”±äºæ—¥å¿—ä¸­çš„ channel_id æœ‰å¯èƒ½æ˜¯æ¥è‡ªäºæ¨èé¢‘é“ï¼ˆ0ï¼‰ï¼Œè€Œä¸æ˜¯æ–‡ç« çœŸå®çš„é¢‘é“ï¼Œæ‰€ä»¥è¿™é‡Œè¦å°† channel_id åˆ—åˆ é™¤\n```\nspark.sql(\"use profile\")\nuser_article_basic = spark.sql(\"select * from user_article_basic\").drop('channel_id')\n```\né€šè¿‡æ–‡ç«  IDï¼Œå°†ç”¨æˆ·è¡Œä¸ºæ•°æ®ä¸æ–‡ç« ç”»åƒæ•°æ®è¿›è¡Œè¿æ¥ï¼Œä»è€Œå¾—åˆ°æ–‡ç« é¢‘é“ ID å’Œæ–‡ç« ä¸»é¢˜è¯\n```\nspark.sql('use article')\narticle_topic = spark.sql(\"select article_id, channel_id, topics from article_profile\")\nuser_article_topic = user_article_basic.join(article_topic, how='left', on=['article_id'])\n```\n`user_article_topic` ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå…¶ä¸­ topics åˆ—å³ä¸ºæ–‡ç« ä¸»é¢˜è¯åˆ—è¡¨ï¼Œå¦‚ ['è¡¥ç ', 'å­—ç¬¦ä¸²', 'æç™½', ...]\n\n![](https://upload-images.jianshu.io/upload_images/12790782-8c0d357cbea1d7e6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—æ¯ä¸€ä¸ªä¸»é¢˜è¯å¯¹äºç”¨æˆ·çš„æƒé‡ï¼Œæ‰€ä»¥éœ€è¦å°† topics åˆ—ä¸­çš„æ¯ä¸ªä¸»é¢˜è¯éƒ½æ‹†åˆ†ä¸ºå•ç‹¬çš„ä¸€æ¡è®°å½•ã€‚å¯ä»¥åˆ©ç”¨ Spark çš„ `explode()` æ–¹æ³•ï¼Œè¾¾åˆ°ç±»ä¼¼â€œçˆ†ç‚¸â€çš„æ•ˆæœ\n```\nimport pyspark.sql.functions as F\n\nuser_article_topic = user_topic.withColumn('topic', F.explode('topics')).drop('topics')\n```\n`user_article_topic` å¦‚ä¸‹å›¾æ‰€ç¤º\n\n![](https://upload-images.jianshu.io/upload_images/12790782-4c1b56aad8ec412a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\næˆ‘ä»¬é€šè¿‡ç”¨æˆ·å¯¹å“ªäº›æ–‡ç« å‘ç”Ÿäº†è¡Œä¸ºä»¥åŠè¯¥æ–‡ç« æœ‰å“ªäº›ä¸»é¢˜è¯ï¼Œè®¡ç®—å‡ºäº†ç”¨æˆ·å¯¹å“ªäº›ä¸»é¢˜è¯å‘ç”Ÿäº†è¡Œä¸ºã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®ç”¨æˆ·å¯¹ä¸»é¢˜è¯çš„è¡Œä¸ºæ¥è®¡ç®—ä¸»é¢˜è¯å¯¹ç”¨æˆ·çš„æƒé‡ï¼Œå¹¶ä¸”å°†è¿™äº›ä¸»é¢˜è¯ä½œä¸ºç”¨æˆ·çš„æ ‡ç­¾ã€‚é‚£ä¹ˆï¼Œç”¨æˆ·æ ‡ç­¾æƒé‡çš„è®¡ç®—å…¬å¼ä¸ºï¼šç”¨æˆ·æ ‡ç­¾æƒé‡ =ï¼ˆç”¨æˆ·è¡Œä¸ºåˆ†å€¼ä¹‹å’Œï¼‰x æ—¶é—´è¡°å‡ã€‚å…¶ä¸­ï¼Œæ—¶é—´è¡°å‡å…¬å¼ä¸ºï¼šæ—¶é—´è¡°å‡ç³»æ•° = 1 / (log(t) + 1)ï¼Œå…¶ä¸­ t ä¸ºå‘ç”Ÿè¡Œä¸ºçš„æ—¶é—´è·ç¦»å½“å‰æ—¶é—´çš„å¤§å°\n\nä¸åŒçš„ç”¨æˆ·è¡Œä¸ºå¯¹åº”ä¸åŒçš„æƒé‡ï¼Œå¦‚ä¸‹æ‰€ç¤º\n\nç”¨æˆ·è¡Œä¸º|åˆ†å€¼\n-|-\né˜…è¯»æ—¶é—´(<1000)\t|1\né˜…è¯»æ—¶é—´(>=1000)\t|2\næ”¶è—\t|2\nåˆ†äº«\t|3\nç‚¹å‡»\t|5\n\nè®¡ç®—ç”¨æˆ·æ ‡ç­¾åŠæƒé‡ï¼Œå¹¶å­˜å‚¨åˆ° Hbase ä¸­ user_profile è¡¨çš„ partial åˆ—æ—ä¸­ã€‚æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬å°†é¢‘é“ ID å’Œæ ‡ç­¾ä¸€èµ·ä½œä¸º partial åˆ—æ—çš„é”®å­˜å‚¨ï¼Œè¿™æ ·æˆ‘ä»¬å°±æ–¹ä¾¿æŸ¥è¯¢ä¸åŒé¢‘é“çš„æ ‡ç­¾åŠæƒé‡äº†\n```\ndef compute_user_label_weights(partitions):\n    \"\"\" è®¡ç®—ç”¨æˆ·æ ‡ç­¾æƒé‡\n    \"\"\"\n    action_weight = {\n        \"read_min\": 1,\n        \"read_middle\": 2,\n        \"collect\": 2,\n        \"share\": 3,\n        \"click\": 5\n    }\n\n    from datetime import datetime\n    import numpy as np\n    \n    # å¾ªç¯å¤„ç†æ¯ä¸ªç”¨æˆ·å¯¹åº”çš„æ¯ä¸ªä¸»é¢˜è¯\n    for row in partitions:\n        # è®¡ç®—æ—¶é—´è¡°å‡ç³»æ•°\n        t = datetime.now() - datetime.strptime(row.action_time, '%Y-%m-%d %H:%M:%S')\n        alpha = 1 / (np.log(t.days + 1) + 1)\n        \n        if row.read_time  == '':\n            read_t = 0\n        else:\n            read_t = int(row.read_time)\n        \n        # è®¡ç®—é˜…è¯»æ—¶é—´çš„è¡Œä¸ºåˆ†æ•°\n        read_score = action_weight['read_middle'] if read_t > 1000 else action_weight['read_min']\n        \n        # è®¡ç®—å„ç§è¡Œä¸ºçš„æƒé‡å’Œå¹¶ä¹˜ä»¥æ—¶é—´è¡°å‡ç³»æ•°\n        weights = alpha * (row.shared * action_weight['share'] + row.clicked * action_weight['click'] +\n                          row.collected * action_weight['collect'] + read_score)\n        \n        # æ›´æ–°åˆ°user_profilehbaseè¡¨\n        with pool.connection() as conn:\n            table = conn.table('user_profile')\n            table.put('user:{}'.format(row.user_id).encode(),\n                      {'partial:{}:{}'.format(row.channel_id, row.topic).encode(): json.dumps(\n                          weights).encode()})\n            conn.close()\n\nuser_topic.foreachPartition(compute_user_label_weights)\n```\nåœ¨ Hive ä¸­æŸ¥è¯¢ç”¨æˆ·æ ‡ç­¾åŠæƒé‡\n```\nhive> select * from user_profile_hbase limit 1;\nOK\nuser:1  {\"birthday\":0.0,\"gender\":null}  {\"18:##\":0.25704484358604845,\"18:&#\":0.25704484358604845,\"18:+++\":0.23934588700996243,\"18:+++++\":0.23934588700996243,\"18:AAA\":0.2747964402379244,\"18:Animal\":0.2747964402379244,\"18:Author\":0.2747964402379244,\"18:BASE\":0.23934588700996243,\"18:BBQ\":0.23934588700996243,\"18:Blueprint\":1.6487786414275463,\"18:Code\":0.23934588700996243,\"18:DIR......\n```\næ¥ä¸‹æ¥ï¼Œè¦å°†ç”¨æˆ·å±æ€§ä¿¡æ¯åŠ å…¥åˆ°ç”¨æˆ·ç”»åƒä¸­ã€‚è¯»å–ç”¨æˆ·åŸºç¡€ä¿¡æ¯ï¼Œå­˜å‚¨åˆ°ç”¨æˆ·ç”»åƒè¡¨çš„ basic åˆ—æ—å³å¯\n```\ndef update_user_info():\n    \"\"\"\n    æ›´æ–°ç”¨æˆ·ç”»åƒçš„å±æ€§ä¿¡æ¯\n    :return:\n    \"\"\"\n    spark.sql(\"use toutiao\")\n    user_basic = spark.sql(\"select user_id, gender, birthday from user_profile\")\n\n    def udapte_user_basic(partition):\n\n        import happybase\n        #  ç”¨äºè¯»å–hbaseç¼“å­˜ç»“æœé…ç½®\n        pool = happybase.ConnectionPool(size=10, host='172.17.0.134', port=9090)\n        for row in partition:\n            from datetime import date\n            age = 0\n            if row.birthday != 'null':\n                born = datetime.strptime(row.birthday, '%Y-%m-%d')\n                today = date.today()\n                age = today.year - born.year - ((today.month, today.day) < (born.month, born.day))\n\n            with pool.connection() as conn:\n                table = conn.table('user_profile')\n                table.put('user:{}'.format(row.user_id).encode(),\n                          {'basic:gender'.encode(): json.dumps(row.gender).encode()})\n                table.put('user:{}'.format(row.user_id).encode(),\n                          {'basic:birthday'.encode(): json.dumps(age).encode()})\n                conn.close()\n\n    user_basic.foreachPartition(udapte_user_basic)\n```\nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„ç”¨æˆ·ç”»åƒå°±è®¡ç®—å®Œæˆäº†ã€‚\n\n# Apscheduler å®šæ—¶æ›´æ–°\nå®šä¹‰æ›´æ–°ç”¨æˆ·ç”»åƒæ–¹æ³•ï¼Œé¦–å…ˆå¤„ç†ç”¨æˆ·è¡Œä¸ºæ—¥å¿—ï¼Œæ‹†åˆ†æ–‡ç« ä¸»é¢˜è¯ï¼Œæ¥ç€è®¡ç®—ç”¨æˆ·æ ‡ç­¾çš„æƒé‡ï¼Œæœ€åå†å°†ç”¨æˆ·å±æ€§ä¿¡æ¯åŠ å…¥åˆ°ç”¨æˆ·ç”»åƒä¸­\n```\ndef update_user_profile():\n    \"\"\"\n    å®šæ—¶æ›´æ–°ç”¨æˆ·ç”»åƒçš„é€»è¾‘\n    :return:\n    \"\"\"\n    up = UpdateUserProfile()\n    if up.update_user_action_basic():\n        up.update_user_label()\n        up.update_user_info()\n```\nåœ¨ Apscheduler ä¸­æ·»åŠ å®šæ—¶æ›´æ–°ç”¨æˆ·ç”»åƒä»»åŠ¡ï¼Œè®¾å®šæ¯éš” 2 ä¸ªå°æ—¶æ›´æ–°ä¸€æ¬¡\n```\nfrom apscheduler.schedulers.blocking import BlockingScheduler\nfrom apscheduler.executors.pool import ProcessPoolExecutor\n\n# åˆ›å»ºschedulerï¼Œå¤šè¿›ç¨‹æ‰§è¡Œ\nexecutors = {\n    'default': ProcessPoolExecutor(3)\n}\n\nscheduler = BlockingScheduler(executors=executors)\n\n# æ·»åŠ ä¸€ä¸ªå®šæ—¶è¿è¡Œæ–‡ç« ç”»åƒæ›´æ–°çš„ä»»åŠ¡ï¼Œ æ¯éš”1ä¸ªå°æ—¶è¿è¡Œä¸€æ¬¡\nscheduler.add_job(update_article_profile, trigger='interval', hours=1)\n# æ·»åŠ ä¸€ä¸ªå®šæ—¶è¿è¡Œç”¨æˆ·ç”»åƒæ›´æ–°çš„ä»»åŠ¡ï¼Œ æ¯éš”2ä¸ªå°æ—¶è¿è¡Œä¸€æ¬¡\nscheduler.add_job(update_user_profile, trigger='interval', hours=2)\n\nscheduler.start()\n```\nå¦å¤–è¯´ä¸€ä¸‹ï¼Œåœ¨å®é™…åœºæ™¯ä¸­ï¼Œç”¨æˆ·ç”»åƒå¾€å¾€æ˜¯éå¸¸å¤æ‚çš„ï¼Œä¸‹é¢æ˜¯ç”µå•†åœºæ™¯çš„ç”¨æˆ·ç”»åƒï¼Œå¯ä»¥äº†è§£ä¸€ä¸‹ã€‚\n\n![](https://upload-images.jianshu.io/upload_images/12790782-c44e8dbbbe82fd26.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n# å‚è€ƒ\n[https://www.bilibili.com/video/av68356229](https://www.bilibili.com/video/av68356229)\n[https://pan.baidu.com/s/1SPtttZZK5Nzh5wY7ryaBtg](https://pan.baidu.com/s/1SPtttZZK5Nzh5wY7ryaBtg)ï¼ˆå­¦ä¹ èµ„æºå·²ä¿å­˜è‡³ç½‘ç›˜ï¼‰\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æ–‡ç« æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹5ã€è®¡ç®—æ–‡ç« ç›¸ä¼¼åº¦","url":"/2019/12/05/RecSys/æ–‡ç« æ¨èç³»ç»Ÿ/ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹5ã€è®¡ç®—æ–‡ç« ç›¸ä¼¼åº¦/","content":"\nåœ¨ä¸Šç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ç¦»çº¿æ–‡ç« ç”»åƒçš„æ„å»ºï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦ä¸ºç›¸ä¼¼æ–‡ç« æ¨èåšå‡†å¤‡ï¼Œé‚£å°±æ˜¯è®¡ç®—æ–‡ç« ä¹‹é—´çš„ç›¸ä¼¼åº¦ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è¦è®¡ç®—å‡ºæ–‡ç« çš„è¯å‘é‡ï¼Œç„¶ååˆ©ç”¨æ–‡ç« çš„è¯å‘é‡æ¥è®¡ç®—æ–‡ç« çš„ç›¸ä¼¼åº¦ã€‚\n\n# è®¡ç®—æ–‡ç« è¯å‘é‡\næˆ‘ä»¬å¯ä»¥é€šè¿‡å¤§é‡çš„å†å²æ–‡ç« æ•°æ®ï¼Œè®­ç»ƒæ–‡ç« ä¸­æ¯ä¸ªè¯çš„è¯å‘é‡ï¼Œç”±äºæ–‡ç« æ•°æ®è¿‡å¤šï¼Œé€šå¸¸æ˜¯åˆ†é¢‘é“è¿›è¡Œè¯å‘é‡è®­ç»ƒï¼Œå³æ¯ä¸ªé¢‘é“è®­ç»ƒä¸€ä¸ªè¯å‘é‡æ¨¡å‹ï¼Œæˆ‘ä»¬åŒ…æ‹¬çš„é¢‘é“å¦‚ä¸‹æ‰€ç¤º\n```\nchannel_info = {\n            1: \"html\",\n            2: \"å¼€å‘è€…èµ„è®¯\",\n            3: \"ios\",\n            4: \"c++\",\n            5: \"android\",\n            6: \"css\",\n            7: \"æ•°æ®åº“\",\n            8: \"åŒºå—é“¾\",\n            9: \"go\",\n            10: \"äº§å“\",\n            11: \"åç«¯\",\n            12: \"linux\",\n            13: \"äººå·¥æ™ºèƒ½\",\n            14: \"php\",\n            15: \"javascript\",\n            16: \"æ¶æ„\",\n            17: \"å‰ç«¯\",\n            18: \"python\",\n            19: \"java\",\n            20: \"ç®—æ³•\",\n            21: \"é¢è¯•\",\n            22: \"ç§‘æŠ€åŠ¨æ€\",\n            23: \"js\",\n            24: \"è®¾è®¡\",\n            25: \"æ•°ç äº§å“\",\n        }\n```\næ¥ä¸‹æ¥ï¼Œåˆ†åˆ«å¯¹å„è‡ªé¢‘é“å†…çš„æ–‡ç« è¿›è¡Œåˆ†è¯å¤„ç†ï¼Œè¿™é‡Œå…ˆé€‰å– 18 å·é¢‘é“å†…çš„æ‰€æœ‰æ–‡ç« ï¼Œè¿›è¡Œåˆ†è¯å¤„ç†\n```\nspark.sql(\"use article\")\narticle_data = spark.sql(\"select * from article_data where channel_id=18\")\nwords_df = article_data.rdd.mapPartitions(segmentation).toDF(['article_id', 'channel_id', 'words'])\n\ndef segmentation(partition):\n    import os\n    import re\n    import jieba\n    import jieba.analyse\n    import jieba.posseg as pseg\n    import codecs\n\n    abspath = \"/root/words\"\n\n    # ç»“å·´åŠ è½½ç”¨æˆ·è¯å…¸\n    userDict_path = os.path.join(abspath, \"ITKeywords.txt\")\n    jieba.load_userdict(userDict_path)\n\n    # åœç”¨è¯æ–‡æœ¬\n    stopwords_path = os.path.join(abspath, \"stopwords.txt\")\n\n    def get_stopwords_list():\n        \"\"\"è¿”å›stopwordsåˆ—è¡¨\"\"\"\n        stopwords_list = [i.strip() for i in codecs.open(stopwords_path).readlines()]\n        return stopwords_list\n\n    # æ‰€æœ‰çš„åœç”¨è¯åˆ—è¡¨\n    stopwords_list = get_stopwords_list()\n\n    # åˆ†è¯\n    def cut_sentence(sentence):\n        \"\"\"å¯¹åˆ‡å‰²ä¹‹åçš„è¯è¯­è¿›è¡Œè¿‡æ»¤ï¼Œå»é™¤åœç”¨è¯ï¼Œä¿ç•™åè¯ï¼Œè‹±æ–‡å’Œè‡ªå®šä¹‰è¯åº“ä¸­çš„è¯ï¼Œé•¿åº¦å¤§äº2çš„è¯\"\"\"\n        # eg:[pair('ä»Šå¤©', 't'), pair('æœ‰', 'd'), pair('é›¾', 'n'), pair('éœ¾', 'g')]\n        seg_list = pseg.lcut(sentence)\n        seg_list = [i for i in seg_list if i.flag not in stopwords_list]\n        filtered_words_list = []\n        for seg in seg_list:\n            if len(seg.word) <= 1:\n                continue\n            elif seg.flag == \"eng\":\n                if len(seg.word) <= 2:\n                    continue\n                else:\n                    filtered_words_list.append(seg.word)\n            elif seg.flag.startswith(\"n\"):\n                filtered_words_list.append(seg.word)\n            elif seg.flag in [\"x\", \"eng\"]:  # æ˜¯è‡ªå®šä¸€ä¸ªè¯è¯­æˆ–è€…æ˜¯è‹±æ–‡å•è¯\n                filtered_words_list.append(seg.word)\n        return filtered_words_list\n\n    for row in partition:\n        sentence = re.sub(\"<.*?>\", \"\", row.sentence)    # æ›¿æ¢æ‰æ ‡ç­¾æ•°æ®\n        words = cut_sentence(sentence)\n        yield row.article_id, row.channel_id, words\n```\n`words_df` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œwords ä¸ºåˆ†è¯åçš„è¯è¯­åˆ—è¡¨\n\n![](https://upload-images.jianshu.io/upload_images/12790782-4cbedc535c6b965c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\næ¥ç€ï¼Œä½¿ç”¨åˆ†è¯åçš„æ‰€æœ‰è¯è¯­ï¼Œå¯¹ Word2Vec æ¨¡å‹è¿›è¡Œè®­ç»ƒå¹¶å°†æ¨¡å‹ä¿å­˜åˆ° HDFSï¼Œå…¶ä¸­ vectorSize ä¸ºè¯å‘é‡çš„é•¿åº¦ï¼ŒminCount ä¸ºè¯è¯­çš„æœ€å°å‡ºç°æ¬¡æ•°ï¼ŒwindowSize ä¸ºè®­ç»ƒçª—å£çš„å¤§å°ï¼ŒinputCol ä¸ºè¾“å…¥çš„åˆ—åï¼ŒoutputCol ä¸ºè¾“å‡ºçš„åˆ—å\n```\nfrom pyspark.ml.feature import Word2Vec\n\nw2v_model = Word2Vec(vectorSize=100, inputCol='words', outputCol='vector', minCount=3)\nmodel = w2v_model.fit(words_df)\nmodel.save(\"hdfs://hadoop-master:9000/headlines/models/word2vec_model/channel_18_python.word2vec\")\n```\nåŠ è½½è®­ç»ƒå¥½çš„ Word2Vec æ¨¡å‹\n```\nfrom pyspark.ml.feature import Word2VecModel\n\nw2v_model = Word2VecModel.load(\"hdfs://hadoop-master:9000/headlines/models/word2vec_model/channel_18_python.word2vec\")\nvectors = w2v_model.getVectors()\n```\n`vectors` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œå…¶ä¸­ vector æ˜¯è®­ç»ƒåçš„æ¯ä¸ªè¯çš„ 100 ç»´è¯å‘é‡ï¼Œæ˜¯ vector ç±»å‹æ ¼å¼çš„ï¼Œå¦‚ [0.2 -0.05 -0.1 ...]\n\n![](https://upload-images.jianshu.io/upload_images/12790782-ee792e4abfe00e75.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nè¿™é‡Œï¼Œæˆ‘ä»¬è®¡ç®—å‡ºäº†æ‰€æœ‰è¯è¯­çš„è¯å‘é‡ï¼Œæ¥ä¸‹æ¥ï¼Œè¿˜è¦å¾—åˆ°å…³é”®è¯çš„è¯å‘é‡ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦é€šè¿‡å…³é”®è¯çš„è¯å‘é‡æ¥è®¡ç®—æ–‡ç« çš„è¯å‘é‡ã€‚é‚£ä¹ˆï¼Œé¦–å…ˆé€šè¿‡è¯»å–é¢‘é“å†…çš„æ–‡ç« ç”»åƒæ¥å¾—åˆ°å…³é”®è¯ï¼ˆå®é™…åœºæ™¯åº”è¯¥åªè¯»å–æ–°å¢æ–‡ç« ç”»åƒï¼‰\n```\narticle_profile = spark.sql(\"select * from article_profile where channel_id=18\")\n```\nåœ¨æ–‡ç« ç”»åƒè¡¨ä¸­ï¼Œå…³é”®è¯å’Œæƒé‡æ˜¯å­˜å‚¨åœ¨åŒä¸€åˆ—çš„ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ `LATERAL VIEW explode()` æ–¹æ³•ï¼Œå°† map ç±»å‹çš„ keywords åˆ—ä¸­çš„å…³é”®è¯å’Œæƒé‡è½¬æ¢æˆå•ç‹¬çš„ä¸¤åˆ—æ•°æ®\n```\narticle_profile.registerTempTable('profile')\nkeyword_weight = spark.sql(\"select article_id, channel_id, keyword, weight from profile LATERAL VIEW explode(keywords) AS keyword, weight\")\n```\n`keyword_weight` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œkeyword ä¸ºå…³é”®è¯ï¼Œweight ä¸ºå¯¹åº”çš„æƒé‡\n\n![](https://upload-images.jianshu.io/upload_images/12790782-39f3605d616afc31.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nè¿™æ—¶å°±å¯ä»¥åˆ©ç”¨å…³é”®è¯ keyword åˆ—ï¼Œå°†æ–‡ç« å…³é”®è¯ `keyword_weight` ä¸è¯å‘é‡ç»“æœ `vectors` è¿›è¡Œå†…è¿æ¥ï¼Œä»è€Œå¾—åˆ°æ¯ä¸ªå…³é”®è¯çš„è¯å‘é‡\n```\nkeywords_vector = keyword_weight.join(vectors, vectors.word==keyword_weight.keyword, 'inner')\n```\n`keywords_vector` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œvector å³å¯¹åº”å…³é”®è¯çš„ 100 ç»´è¯å‘é‡\n\n![](https://upload-images.jianshu.io/upload_images/12790782-8cc8e64b8f642fec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\næ¥ä¸‹æ¥ï¼Œå°†æ–‡ç« æ¯ä¸ªå…³é”®è¯çš„è¯å‘é‡åŠ å…¥æƒé‡ä¿¡æ¯ï¼Œè¿™é‡Œä½¿æ¯ä¸ªå…³é”®è¯çš„è¯å‘é‡ = å…³é”®è¯çš„æƒé‡ x å…³é”®è¯çš„è¯å‘é‡ï¼Œå³ weight_vector = weight x vectorï¼Œæ³¨æ„è¿™é‡Œçš„ `vector` ä¸º vector ç±»å‹ï¼Œæ‰€ä»¥ weight x vector æ˜¯æƒé‡å’Œå‘é‡çš„æ¯ä¸ªå…ƒç´ ç›¸ä¹˜ï¼Œå‘é‡çš„é•¿åº¦ä¿æŒä¸å˜\n```\ndef compute_vector(row):\n    return row.article_id, row.channel_id, row.keyword, row.weight * row.vector\n\narticle_keyword_vectors = keywords_vector.rdd.map(compute_vector).toDF([\"article_id\", \"channel_id\", \"keyword\", \"weightingVector\"])\n```\n`article_keyword_vectors` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼ŒweightingVector å³ä¸ºåŠ å…¥æƒé‡ä¿¡æ¯åçš„å…³é”®è¯çš„è¯å‘é‡\n\n![](https://upload-images.jianshu.io/upload_images/12790782-cb450dceb634a754.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nå†å°†ä¸Šé¢çš„ç»“æœæŒ‰ç…§ article_id è¿›è¡Œåˆ†ç»„ï¼Œåˆ©ç”¨ `collect_set()` æ–¹æ³•ï¼Œå°†ä¸€ç¯‡æ–‡ç« å†…æ‰€æœ‰å…³é”®è¯çš„è¯å‘é‡åˆå¹¶ä¸ºä¸€ä¸ªåˆ—è¡¨\n```\narticle_keyword_vectors.registerTempTable('temptable')\narticle_keyword_vectors = spark.sql(\"select article_id, min(channel_id) channel_id, collect_set(weightingVector) vectors from temptable group by article_id\")\n```\n`article_keyword_vectors` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œvectors å³ä¸ºæ–‡ç« å†…æ‰€æœ‰å…³é”®è¯å‘é‡çš„åˆ—è¡¨ï¼Œå¦‚ [[0.6 0.2 ...], [0.1 -0.07 ...], ...]\n\n![](https://upload-images.jianshu.io/upload_images/12790782-9e68516da76d0189.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\næ¥ä¸‹æ¥ï¼Œåˆ©ç”¨ä¸Šé¢å¾—å‡ºçš„äºŒç»´åˆ—è¡¨ï¼Œè®¡ç®—æ¯ç¯‡æ–‡ç« å†…æ‰€æœ‰å…³é”®è¯çš„è¯å‘é‡çš„å¹³å‡å€¼ï¼Œä½œä¸ºæ–‡ç« çš„è¯å‘é‡ã€‚æ³¨æ„ï¼Œè¿™é‡Œçš„ `vectors` æ˜¯åŒ…å«å¤šä¸ªè¯å‘é‡çš„åˆ—è¡¨ï¼Œè¯å‘é‡åˆ—è¡¨çš„å¹³å‡å€¼ç­‰äºå…¶ä¸­æ¯ä¸ªè¯å‘é‡çš„å¯¹åº”å…ƒç´ ç›¸åŠ å†é™¤ä»¥è¯å‘é‡çš„ä¸ªæ•°\n```\ndef compute_avg_vectors(row):\n    x = 0\n    for i in row.vectors:\n        x += i\n    # æ±‚å¹³å‡å€¼\n    return row.article_id, row.channel_id, x / len(row.vectors)\n\narticle_vector = article_keyword_vectors.rdd.map(compute_avg_vectors).toDF(['article_id', 'channel_id', 'vector'])\n```\n`article_vector` ç»“æœå¦‚ä¸‹æ‰€ç¤º\n\n![](https://upload-images.jianshu.io/upload_images/12790782-a86e19255d39bf47.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\næ­¤æ—¶ï¼Œ`article_vector` ä¸­çš„ `vector` åˆ—è¿˜æ˜¯ vector ç±»å‹ï¼Œè€Œ Hive ä¸æ”¯æŒè¯¥æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥éœ€è¦å°† vector ç±»å‹è½¬æˆ array ç±»å‹ï¼ˆlistï¼‰\n```\ndef to_list(row):\n    return row.article_id, row.channel_id, [float(i) for i in row.vector.toArray()]\n\narticle_vector = article_vector.rdd.map(to_list).toDF(['article_id', 'channel_id', 'vector'])\n```\nåœ¨ Hive ä¸­åˆ›å»ºæ–‡ç« è¯å‘é‡è¡¨ article_vector\n```sql\nCREATE TABLE article_vector\n(\n    article_id INT comment \"article_id\",\n    channel_id INT comment \"channel_id\",\n    articlevector ARRAY comment \"keyword\"\n);\n```\næœ€åï¼Œå°† 18 å·é¢‘é“å†…çš„æ‰€æœ‰æ–‡ç« çš„è¯å‘é‡å­˜å‚¨åˆ° Hive çš„æ–‡ç« è¯å‘é‡è¡¨ article_vector ä¸­\n```python\narticle_vector.write.insertInto(\"article_vector\")\n```\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±è®¡ç®—å‡ºäº† 18 å·é¢‘é“ä¸‹æ¯ç¯‡æ–‡ç« çš„è¯å‘é‡ï¼Œåœ¨å®é™…åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬è¿˜è¦åˆ†åˆ«è®¡ç®—å‡ºå…¶ä»–æ‰€æœ‰é¢‘é“ä¸‹æ¯ç¯‡æ–‡ç« çš„è¯å‘é‡ã€‚\n\n# è®¡ç®—æ–‡ç« ç›¸ä¼¼åº¦\nå‰é¢æˆ‘ä»¬è®¡ç®—å‡ºäº†æ–‡ç« çš„è¯å‘é‡ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥æ ¹æ®æ–‡ç« çš„è¯å‘é‡æ¥è®¡ç®—æ–‡ç« çš„ç›¸ä¼¼åº¦äº†ã€‚é€šå¸¸æˆ‘ä»¬ä¼šæœ‰å‡ ç™¾ä¸‡ã€å‡ åƒä¸‡ç”šè‡³ä¸Šäº¿è§„æ¨¡çš„æ–‡ç« æ•°æ®ï¼Œä¸ºäº†ä¼˜åŒ–è®¡ç®—æ€§èƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åªè®¡ç®—æ¯ä¸ªé¢‘é“å†…æ–‡ç« ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œå› ä¸ºé€šå¸¸åªæœ‰ç›¸åŒé¢‘é“çš„æ–‡ç« å…³è”æ€§è¾ƒé«˜ï¼Œè€Œä¸åŒé¢‘é“ä¹‹é—´çš„æ–‡ç« é€šå¸¸å…³è”æ€§è¾ƒä½ã€‚åœ¨æ¯ä¸ªé¢‘é“å†…ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨èšç±»æˆ–å±€éƒ¨æ•æ„Ÿå“ˆå¸Œå¯¹æ–‡ç« è¿›è¡Œåˆ†æ¡¶ï¼Œå°†æ–‡ç« ç›¸ä¼¼åº¦çš„è®¡ç®—é™åˆ¶åœ¨æ›´å°çš„èŒƒå›´ï¼Œåªè®¡ç®—ç›¸åŒåˆ†ç±»å†…æˆ–ç›¸åŒæ¡¶å†…çš„æ–‡ç« ç›¸ä¼¼åº¦ã€‚\n- èšç±»ï¼ˆClusteringï¼‰ï¼Œå¯¹æ¯ä¸ªé¢‘é“å†…çš„æ–‡ç« è¿›è¡Œèšç±»ï¼Œå¯ä»¥ä½¿ç”¨ KMeans ç®—æ³•ï¼Œéœ€è¦æå‰è®¾å®šå¥½ç±»åˆ«ä¸ªæ•° Kï¼Œèšç±»ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å¹¶ä¸å°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€äº›ä¼˜åŒ–çš„èšç±»ç®—æ³•ï¼Œæ¯”å¦‚äºŒåˆ†èšç±»ã€å±‚æ¬¡èšç±»ç­‰ã€‚ä½†é€šå¸¸èšç±»ç®—æ³•ä¹Ÿæ¯”è¾ƒè€—æ—¶ï¼Œæ‰€ä»¥é€šå¸¸è¢«ä½¿ç”¨æ›´å¤šçš„æ˜¯å±€éƒ¨æ•æ„Ÿå“ˆå¸Œã€‚\n\nSpark çš„ BisectingKMeans æ¨¡å‹è®­ç»ƒä»£ç ç¤ºä¾‹\n```\nfrom pyspark.ml.clustering import BisectingKMeans\n\nbkmeans = BisectingKMeans(k=100, minDivisibleClusterSize=50, featuresCol=\"articlevector\", predictionCol='group')\nbkmeans_model = bkmeans.fit(article_vector)\nbkmeans_model.save(\"hdfs://hadoop-master:9000/headlines/models/articleBisKmeans/channel_%d_%s.bkmeans\" % (channel_id, channel))\n```\n- å±€éƒ¨æ•æ„Ÿå“ˆå¸Œ LSHï¼ˆLocality Sensitive Hashingï¼‰ï¼ŒLSH ç®—æ³•æ˜¯åŸºäºä¸€ä¸ªå‡è®¾ï¼Œå¦‚æœä¸¤ä¸ªæ–‡æœ¬åœ¨åŸæœ‰çš„æ•°æ®ç©ºé—´æ˜¯ç›¸ä¼¼çš„ï¼Œé‚£ä¹ˆç»è¿‡å“ˆå¸Œå‡½æ•°è½¬æ¢ä»¥åï¼Œå®ƒä»¬ä»ç„¶å…·æœ‰å¾ˆé«˜çš„ç›¸ä¼¼åº¦ï¼Œå³è¶Šç›¸ä¼¼çš„æ–‡æœ¬åœ¨å“ˆå¸Œä¹‹åï¼Œè½åˆ°ç›¸åŒçš„æ¡¶å†…çš„æ¦‚ç‡å°±è¶Šé«˜ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦å°†ç›®æ ‡æ–‡ç« è¿›è¡Œå“ˆå¸Œæ˜ å°„å¹¶å¾—åˆ°å…¶æ¡¶å·ï¼Œç„¶åå–å‡ºè¯¥æ¡¶å†…çš„æ‰€æœ‰æ–‡ç« ï¼Œå†è¿›è¡Œçº¿æ€§åŒ¹é…å³å¯æŸ¥æ‰¾åˆ°ä¸ç›®æ ‡æ–‡ç« ç›¸é‚»çš„æ–‡ç« ã€‚å…¶å® LSH å¹¶ä¸èƒ½ä¿è¯ä¸€å®šèƒ½å¤ŸæŸ¥æ‰¾åˆ°ä¸ç›®æ ‡æ–‡ç« æœ€ç›¸é‚»çš„æ–‡ç« ï¼Œè€Œæ˜¯åœ¨å‡å°‘éœ€è¦åŒ¹é…çš„æ–‡ç« ä¸ªæ•°çš„åŒæ—¶ï¼Œä¿è¯æŸ¥æ‰¾åˆ°æœ€è¿‘é‚»çš„æ–‡ç« çš„æ¦‚ç‡å¾ˆå¤§ã€‚\n\nä¸‹é¢æˆ‘ä»¬å°†ä½¿ç”¨ LSH æ¨¡å‹æ¥è®¡ç®—æ–‡ç« ç›¸ä¼¼åº¦ï¼Œé¦–å…ˆï¼Œè¯»å– 18 å·é¢‘é“å†…æ‰€æœ‰æ–‡ç« çš„ ID å’Œè¯å‘é‡ä½œä¸ºè®­ç»ƒé›†\n```\narticle_vector = spark.sql(\"select article_id, articlevector from article_vector where channel_id=18\")\ntrain = articlevector.select(['article_id', 'articlevector'])\n```\næ–‡ç« è¯å‘é‡è¡¨ä¸­çš„è¯å‘é‡æ˜¯è¢«å­˜å‚¨ä¸º array ç±»å‹çš„ï¼Œæˆ‘ä»¬åˆ©ç”¨ Spark çš„ `Vectors.dense()` æ–¹æ³•ï¼Œå°† array ç±»å‹ï¼ˆlistï¼‰è½¬ä¸º vector ç±»å‹\n```\nfrom pyspark.ml.linalg import Vectors\n\ndef list_to_vector(row):\n    return row.article_id, Vectors.dense(row.articlevector)\n\ntrain = train.rdd.map(list_to_vector).toDF(['article_id', 'articlevector'])\n```\nä½¿ç”¨è®­ç»ƒé›† `train` å¯¹ Spark çš„ `BucketedRandomProjectionLSH` æ¨¡å‹è¿›è¡Œè®­ç»ƒï¼Œå…¶ä¸­ inputCol ä¸ºè¾“å…¥ç‰¹å¾åˆ—ï¼ŒoutputCol ä¸ºè¾“å‡ºç‰¹å¾åˆ—ï¼ŒnumHashTables ä¸ºå“ˆå¸Œè¡¨æ•°é‡ï¼ŒbucketLength ä¸ºæ¡¶çš„æ•°é‡ï¼Œæ•°é‡è¶Šå¤šï¼Œç›¸åŒæ•°æ®è¿›å…¥åˆ°åŒä¸€ä¸ªæ¡¶çš„æ¦‚ç‡å°±è¶Šé«˜\n```\nfrom pyspark.ml.feature import BucketedRandomProjectionLSH\n\nbrp = BucketedRandomProjectionLSH(inputCol='articlevector', outputCol='hashes', numHashTables=4.0, bucketLength=10.0)\nmodel = brp.fit(train)\n```\nè®­ç»ƒå¥½æ¨¡å‹åï¼Œè°ƒç”¨ `approxSimilarityJoin()` æ–¹æ³•å³å¯è®¡ç®—æ•°æ®ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œå¦‚ `model.approxSimilarityJoin(df1, df2, 2.0, distCol='EuclideanDistance')` å°±æ˜¯åˆ©ç”¨æ¬§å‡ é‡Œå¾—è·ç¦»ä½œä¸ºç›¸ä¼¼åº¦ï¼Œè®¡ç®—åœ¨ df1 ä¸ df2 æ¯æ¡æ•°æ®çš„ç›¸ä¼¼åº¦ï¼Œè¿™é‡Œæˆ‘ä»¬è®¡ç®—è®­ç»ƒé›†ä¸­æ‰€æœ‰æ–‡ç« ä¹‹é—´çš„ç›¸ä¼¼åº¦\n```\nsimilar = model.approxSimilarityJoin(train, train, 2.0, distCol='EuclideanDistance')\n```\n`similar` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼ŒEuclideanDistance å°±æ˜¯ä¸¤ç¯‡æ–‡ç« çš„æ¬§å‡ é‡Œå¾—è·ç¦»ï¼Œå³ç›¸ä¼¼åº¦\n\n![](https://upload-images.jianshu.io/upload_images/12790782-8e98744a01f7d121.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nåœ¨åé¢çš„æ¨èæµç¨‹ä¸­ï¼Œä¼šç»å¸¸æŸ¥è¯¢æ–‡ç« ç›¸ä¼¼åº¦ï¼Œæ‰€ä»¥å‡ºäºæ€§èƒ½è€ƒè™‘ï¼Œæˆ‘ä»¬é€‰æ‹©å°†æ–‡ç« ç›¸ä¼¼åº¦ç»“æœå­˜å‚¨åˆ°  Hbase ä¸­ã€‚é¦–å…ˆåˆ›å»ºæ–‡ç« ç›¸ä¼¼åº¦è¡¨\n```\ncreate 'article_similar', 'similar'\n```\nç„¶åå­˜å‚¨æ–‡ç« ç›¸ä¼¼åº¦ç»“æœ\n```\ndef save_hbase(partition):\n    import happybase\n    pool = happybase.ConnectionPool(size=3, host='hadoop-master')\n\n    with pool.connection() as conn:\n        # å»ºç«‹è¡¨è¿æ¥\n        table = conn.table('article_similar')\n        for row in partition:\n            if row.datasetA.article_id != row.datasetB.article_id:\n                table.put(str(row.datasetA.article_id).encode(), {\"similar:{}\".format(row.datasetB.article_id).encode(): b'%0.4f' % (row.EuclideanDistance)})\n                \n        # æ‰‹åŠ¨å…³é—­æ‰€æœ‰çš„è¿æ¥\n        conn.close()\n\nsimilar.foreachPartition(save_hbase)\n```\n\n# Apscheduler å®šæ—¶æ›´æ–°\nå°†æ–‡ç« ç›¸ä¼¼åº¦è®¡ç®—åŠ å…¥åˆ°æ–‡ç« ç”»åƒæ›´æ–°æ–¹æ³•ä¸­ï¼Œé¦–å…ˆåˆå¹¶æœ€è¿‘ä¸€ä¸ªå°æ—¶çš„æ–‡ç« å®Œæ•´ä¿¡æ¯ï¼Œæ¥ç€è®¡ç®— TF-IDF å’Œ TextRank æƒé‡ï¼Œå¹¶æ ¹æ® TF-IDF å’Œ TextRank æƒé‡è®¡ç®—å¾—å‡ºå…³é”®è¯å’Œä¸»é¢˜è¯ï¼Œæœ€åè®¡ç®—æ–‡ç« çš„è¯å‘é‡åŠæ–‡ç« çš„ç›¸ä¼¼åº¦\n```\ndef update_article_profile():\n    \"\"\"\n    å®šæ—¶æ›´æ–°æ–‡ç« ç”»åƒåŠæ–‡ç« ç›¸ä¼¼åº¦\n    :return:\n    \"\"\"\n    ua = UpdateArticle()\n    sentence_df = ua.merge_article_data()\n    if sentence_df.rdd.collect():\n        textrank_keywords_df, keywordsIndex = ua.generate_article_label()\n        article_profile = ua.get_article_profile(textrank_keywords_df, keywordsIndex)\n        ua.compute_article_similar(article_profile)\n```\n\n> åŸæ–‡å‡ºè‡ªï¼ˆå·²æˆæƒï¼‰ï¼šhttps://www.jianshu.com/u/ac833cc5146e\n\n\n# å‚è€ƒ\n- [https://www.bilibili.com/video/av68356229](https://www.bilibili.com/video/av68356229)\n- [https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw](https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw)ï¼ˆå­¦ä¹ èµ„æºå·²ä¿å­˜è‡³ç½‘ç›˜ï¼Œæå–ç  EakPï¼‰\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æ–‡ç« æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹4ã€æ„å»ºç¦»çº¿æ–‡ç« ç”»åƒ","url":"/2019/12/05/RecSys/æ–‡ç« æ¨èç³»ç»Ÿ/ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹4ã€æ„å»ºç¦»çº¿æ–‡ç« ç”»åƒ/","content":"\nåœ¨ä¸Šè¿°æ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬å·²ç»å°†ä¸šåŠ¡æ•°æ®å’Œç”¨æˆ·è¡Œä¸ºæ•°æ®åŒæ­¥åˆ°äº†æ¨èç³»ç»Ÿæ•°æ®åº“å½“ä¸­ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¦å¯¹æ–‡ç« æ•°æ®å’Œç”¨æˆ·æ•°æ®è¿›è¡Œåˆ†æï¼Œæ„å»ºæ–‡ç« ç”»åƒå’Œç”¨æˆ·ç”»åƒï¼Œæœ¬æ–‡æˆ‘ä»¬ä¸»è¦è®²è§£å¦‚ä½•æ„å»ºæ–‡ç« ç”»åƒã€‚æ–‡ç« ç”»åƒç”±å…³é”®è¯å’Œä¸»é¢˜è¯ç»„æˆï¼Œæˆ‘ä»¬å°†æ¯ä¸ªè¯çš„ TF-IDF æƒé‡å’Œ TextRank æƒé‡çš„ä¹˜ç§¯ä½œä¸ºå…³é”®è¯æƒé‡ï¼Œç­›é€‰å‡ºæƒé‡æœ€é«˜çš„ K ä¸ªè¯ä½œä¸ºå…³é”®è¯ï¼Œå°† TextRank æƒé‡æœ€é«˜çš„ K ä¸ªè¯ä¸ TF-IDF æƒé‡æœ€é«˜çš„ K ä¸ªè¯çš„å…±ç°è¯ä½œä¸ºä¸»é¢˜è¯ã€‚\n\né¦–å…ˆï¼Œåœ¨ Hive ä¸­åˆ›å»ºæ–‡ç« æ•°æ®åº“ article åŠç›¸å…³è¡¨ï¼Œå…¶ä¸­è¡¨ article_data ç”¨äºå­˜å‚¨å®Œæ•´çš„æ–‡ç« ä¿¡æ¯ï¼Œè¡¨ idf_keywords_values ç”¨äºå­˜å‚¨å…³é”®è¯å’Œç´¢å¼•ä¿¡æ¯ï¼Œè¡¨ tfidf_keywords_values ç”¨äºå­˜å‚¨å…³é”®è¯å’Œ TF-IDF æƒé‡ä¿¡æ¯ï¼Œè¡¨ textrank_keywords_values ç”¨äºå­˜å‚¨å…³é”®è¯å’Œ TextRank æƒé‡ä¿¡æ¯ï¼Œè¡¨ article_profile ç”¨äºå­˜å‚¨æ–‡ç« ç”»åƒä¿¡æ¯ã€‚\n```sql\n-- åˆ›å»ºæ–‡ç« æ•°æ®åº“\ncreate database if not exists article comment \"artcile information\" location '/user/hive/warehouse/article.db/';\n-- åˆ›å»ºæ–‡ç« ä¿¡æ¯è¡¨\nCREATE TABLE article_data\n(\n    article_id   BIGINT comment \"article_id\",\n    channel_id   INT comment \"channel_id\",\n    channel_name STRING comment \"channel_name\",\n    title        STRING comment \"title\",\n    content      STRING comment \"content\",\n    sentence     STRING comment \"sentence\"\n)\n    COMMENT \"toutiao news_channel\"\n    LOCATION '/user/hive/warehouse/article.db/article_data';\n-- åˆ›å»ºå…³é”®è¯ç´¢å¼•ä¿¡æ¯è¡¨\nCREATE TABLE idf_keywords_values\n(\n    keyword STRING comment \"article_id\",\n    idf     DOUBLE comment \"idf\",\n    index   INT comment \"index\"\n);\n-- åˆ›å»ºå…³é”®è¯TF-IDFæƒé‡ä¿¡æ¯è¡¨\nCREATE TABLE tfidf_keywords_values\n(\n    article_id INT comment \"article_id\",\n    channel_id INT comment \"channel_id\",\n    keyword    STRING comment \"keyword\",\n    tfidf      DOUBLE comment \"tfidf\"\n);\n-- åˆ›å»ºå…³é”®è¯TextRankæƒé‡ä¿¡æ¯è¡¨\nCREATE TABLE textrank_keywords_values\n(\n    article_id INT comment \"article_id\",\n    channel_id INT comment \"channel_id\",\n    keyword    STRING comment \"keyword\",\n    textrank   DOUBLE comment \"textrank\"\n);\n-- åˆ›å»ºæ–‡ç« ç”»åƒä¿¡æ¯è¡¨\nCREATE TABLE article_profile\n(\n    article_id INT comment \"article_id\",\n    channel_id INT comment \"channel_id\",\n    keyword    map comment \"keyword\",\n    topics     array comment \"topics\"\n); \n```\n# è®¡ç®—æ–‡ç« å®Œæ•´ä¿¡æ¯\nä¸ºäº†è®¡ç®—æ–‡ç« ç”»åƒï¼Œéœ€è¦å°†æ–‡ç« ä¿¡æ¯è¡¨ï¼ˆnews_article_basicï¼‰ã€æ–‡ç« å†…å®¹è¡¨ï¼ˆnews_article_contentï¼‰åŠé¢‘é“è¡¨ï¼ˆnews_channelï¼‰è¿›è¡Œåˆå¹¶ï¼Œä»è€Œå¾—åˆ°å®Œæ•´çš„æ–‡ç« ä¿¡æ¯ï¼Œé€šå¸¸ä½¿ç”¨ Spark SQL è¿›è¡Œå¤„ç†ã€‚\n\né€šè¿‡å…³è”è¡¨ news_article_basic, news_article_content å’Œ news_channel è·å¾—æ–‡ç« å®Œæ•´ä¿¡æ¯ï¼ŒåŒ…æ‹¬ article_id, channel_id, channel_name, title, contentï¼Œè¿™é‡Œè·å–ä¸€ä¸ªå°æ—¶å†…çš„æ–‡ç« ä¿¡æ¯ã€‚\n```python\nspark.sql(\"use toutiao\")\n_now = datetime.today().replace(minute=0, second=0, microsecond=0)\nstart = datetime.strftime(_now + timedelta(days=0, hours=-1, minutes=0), \"%Y-%m-%d %H:%M:%S\")\nend = datetime.strftime(_now, \"%Y-%m-%d %H:%M:%S\")\nbasic_content = spark.sql(\n            \"select a.article_id, a.channel_id, a.title, b.content from news_article_basic a \"\n            \"inner join news_article_content b on a.article_id=b.article_id where a.review_time >= '{}' \"\n            \"and a.review_time < '{}' and a.status = 2\".format(start, end))\nbasic_content.registerTempTable(\"temp_article\")\nchannel_basic_content = spark.sql(\n            \"select t.*, n.channel_name from temp_article t left join news_channel n on t.channel_id=n.channel_id\")\n```\n`channel_basic_content` ç»“æœå¦‚ä¸‹æ‰€ç¤º\n\n![](https://upload-images.jianshu.io/upload_images/12790782-96f4fc864f469275.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nåˆ©ç”¨ `concat_ws()` æ–¹æ³•ï¼Œå°† channel_name, title, content è¿™ 3 åˆ—æ•°æ®åˆå¹¶ä¸ºä¸€åˆ— sentenceï¼Œå¹¶å°†ç»“æœå†™å…¥æ–‡ç« å®Œæ•´ä¿¡æ¯è¡¨ article_data ä¸­\n```\nimport pyspark.sql.functions as F\n\nspark.sql(\"use article\")\nsentence_df = channel_basic_content.select(\"article_id\", \"channel_id\", \"channel_name\", \"title\", \"content\", \\\n                                           F.concat_ws(\n                                               \",\",\n                                               channel_basic_content.channel_name,\n                                               channel_basic_content.title,\n                                               channel_basic_content.content\n                                           ).alias(\"sentence\")\n                                           )\ndel basic_content\ndel channel_basic_content\ngc.collect() # åƒåœ¾å›æ”¶\n\nsentence_df.write.insertInto(\"article_data\")\n```\n`sentence_df` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œæ–‡ç« å®Œæ•´ä¿¡æ¯åŒ…æ‹¬ article_id, channel_id, channel_name, title, content, sentenceï¼Œå…¶ä¸­ sentence ä¸º channel_name, title, content åˆå¹¶è€Œæˆçš„é•¿æ–‡æœ¬å†…å®¹\n\n![](https://upload-images.jianshu.io/upload_images/12790782-b87fe4016480095b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n# è®¡ç®— TF-IDF\nå‰é¢æˆ‘ä»¬å¾—åˆ°äº†æ–‡ç« çš„å®Œæ•´å†…å®¹ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦å…ˆå¯¹æ–‡ç« è¿›è¡Œåˆ†è¯ï¼Œç„¶åè®¡ç®—æ¯ä¸ªè¯çš„ TF-IDF æƒé‡ï¼Œå°† TF-IDF æƒé‡æœ€é«˜çš„ K ä¸ªè¯ä½œä¸ºæ–‡ç« çš„å…³é”®è¯ã€‚é¦–å…ˆï¼Œè¯»å–æ–‡ç« ä¿¡æ¯\n```\nspark.sql(\"use article\")\narticle_dataframe = spark.sql(\"select * from article_data\")\n```\nåˆ©ç”¨ `mapPartitions()` æ–¹æ³•ï¼Œå¯¹æ¯ç¯‡æ–‡ç« è¿›è¡Œåˆ†è¯ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ `jieba` åˆ†è¯å™¨\n```\nwords_df = article_dataframe.rdd.mapPartitions(segmentation).toDF([\"article_id\", \"channel_id\", \"words\"])\n\ndef segmentation(partition):\n    import os\n    import re\n    import jieba\n    import jieba.analyse\n    import jieba.posseg as pseg\n    import codecs\n\n    abspath = \"/root/words\"\n\n    # ç»“å·´åŠ è½½ç”¨æˆ·è¯å…¸\n    userdict_path = os.path.join(abspath, \"ITKeywords.txt\")\n    jieba.load_userdict(userdict_path)\n\n    # åœç”¨è¯æ–‡æœ¬\n    stopwords_path = os.path.join(abspath, \"stopwords.txt\")\n\n    def get_stopwords_list():\n        \"\"\"è¿”å›stopwordsåˆ—è¡¨\"\"\"\n        stopwords_list = [i.strip() for i in codecs.open(stopwords_path).readlines()]\n        return stopwords_list\n\n    # æ‰€æœ‰çš„åœç”¨è¯åˆ—è¡¨\n    stopwords_list = get_stopwords_list()\n\n    # åˆ†è¯\n    def cut_sentence(sentence):\n        \"\"\"å¯¹åˆ‡å‰²ä¹‹åçš„è¯è¯­è¿›è¡Œè¿‡æ»¤ï¼Œå»é™¤åœç”¨è¯ï¼Œä¿ç•™åè¯ï¼Œè‹±æ–‡å’Œè‡ªå®šä¹‰è¯åº“ä¸­çš„è¯ï¼Œé•¿åº¦å¤§äº2çš„è¯\"\"\"\n        seg_list = pseg.lcut(sentence)\n        seg_list = [i for i in seg_list if i.flag not in stopwords_list]\n        filtered_words_list = []\n        for seg in seg_list:\n            if len(seg.word) <= 1:\n                continue\n            elif seg.flag == \"eng\":\n                if len(seg.word) <= 2:\n                    continue\n                else:\n                    filtered_words_list.append(seg.word)\n            elif seg.flag.startswith(\"n\"):\n                filtered_words_list.append(seg.word)\n            elif seg.flag in [\"x\", \"eng\"]:  # æ˜¯è‡ªå®šä¸€ä¸ªè¯è¯­æˆ–è€…æ˜¯è‹±æ–‡å•è¯\n                filtered_words_list.append(seg.word)\n        return filtered_words_list\n\n    for row in partition:\n        sentence = re.sub(\"<.*?>\", \"\", row.sentence)    # æ›¿æ¢æ‰æ ‡ç­¾æ•°æ®\n        words = cut_sentence(sentence)\n        yield row.article_id, row.channel_id, words\n```\n`words_df` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œwords ä¸ºå°† sentence åˆ†è¯åçš„å•è¯åˆ—è¡¨\n\n![](https://upload-images.jianshu.io/upload_images/12790782-55862171336abc52.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nä½¿ç”¨åˆ†è¯ç»“æœå¯¹è¯é¢‘ç»Ÿè®¡æ¨¡å‹ï¼ˆCountVectorizerï¼‰è¿›è¡Œè¯é¢‘ç»Ÿè®¡è®­ç»ƒï¼Œå¹¶å°† CountVectorizer æ¨¡å‹ä¿å­˜åˆ° HDFS ä¸­\n```\nfrom pyspark.ml.feature import CountVectorizer\n# vocabSizeæ˜¯æ€»è¯æ±‡çš„å¤§å°ï¼ŒminDFæ˜¯æ–‡æœ¬ä¸­å‡ºç°çš„æœ€å°‘æ¬¡æ•°\ncv = CountVectorizer(inputCol=\"words\", outputCol=\"countFeatures\", vocabSize=200*10000, minDF=1.0)\n# è®­ç»ƒè¯é¢‘ç»Ÿè®¡æ¨¡å‹\ncv_model = cv.fit(words_df)\ncv_model.write().overwrite().save(\"hdfs://hadoop-master:9000/headlines/models/CV.model\")\n```\nåŠ è½½ CountVectorizer æ¨¡å‹ï¼Œè®¡ç®—è¯é¢‘å‘é‡\n```\nfrom pyspark.ml.feature import CountVectorizerModel\ncv_model = CountVectorizerModel.load(\"hdfs://hadoop-master:9000/headlines/models/CV.model\")\n# å¾—å‡ºè¯é¢‘å‘é‡ç»“æœ\ncv_result = cv_model.transform(words_df)\n```\n`cv_result` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼ŒcountFeatures ä¸ºè¯é¢‘å‘é‡ï¼Œå¦‚ (986, [2, 4, ...], [3.0, 5.0, ...]) è¡¨ç¤ºæ€»è¯æ±‡çš„å¤§å°ä¸º 986 ä¸ªï¼Œç´¢å¼•ä¸º 2 å’Œ 4 çš„è¯åœ¨æŸç¯‡æ–‡ç« ä¸­åˆ†åˆ«å‡ºç° 3 æ¬¡å’Œ 5 æ¬¡ï¼Œ\n\n![](https://upload-images.jianshu.io/upload_images/12790782-760b54a16a9e780b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nå¾—åˆ°è¯é¢‘å‘é‡åï¼Œå†åˆ©ç”¨é€†æ–‡æœ¬é¢‘ç‡æ¨¡å‹ï¼ˆ IDF ï¼‰ï¼Œæ ¹æ®è¯é¢‘å‘é‡è¿›è¡Œ IDF ç»Ÿè®¡è®­ç»ƒï¼Œå¹¶å°† IDF æ¨¡å‹ä¿å­˜åˆ° HDFS\n```\nfrom pyspark.ml.feature import IDF\nidf = IDF(inputCol=\"countFeatures\", outputCol=\"idfFeatures\")\nidf_model = idf.fit(cv_result)\nidf_model.write().overwrite().save(\"hdfs://hadoop-master:9000/headlines/models/IDF.model\")\n```\næˆ‘ä»¬å·²ç»åˆ†åˆ«è®¡ç®—äº†æ–‡ç« ä¿¡æ¯ä¸­æ¯ä¸ªè¯çš„ TF å’Œ IDFï¼Œè¿™æ—¶å°±å¯ä»¥åŠ è½½ CountVectorizer æ¨¡å‹å’Œ IDF æ¨¡å‹ï¼Œè®¡ç®—æ¯ä¸ªè¯çš„ TF-IDF\n```\nfrom pyspark.ml.feature import CountVectorizerModel\ncv_model = CountVectorizerModel.load(\"hdfs://hadoop-master:9000/headlines/models/countVectorizerOfArticleWords.model\")\nfrom pyspark.ml.feature import IDFModel\nidf_model = IDFModel.load(\"hdfs://hadoop-master:9000/headlines/models/IDFOfArticleWords.model\")\n\ncv_result = cv_model.transform(words_df)\ntfidf_result = idf_model.transform(cv_result)\n```\n`tfidf_result` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼ŒidfFeatures ä¸º TF-IDF æƒé‡å‘é‡ï¼Œå¦‚ (986, [2, 4, ...], [0.3, 0.5, ...]) è¡¨ç¤ºæ€»è¯æ±‡çš„å¤§å°ä¸º 986 ä¸ªï¼Œç´¢å¼•ä¸º 2 å’Œ 4 çš„è¯åœ¨æŸç¯‡æ–‡ç« ä¸­çš„ TF-IDF å€¼åˆ†åˆ«ä¸º 0.3 å’Œ 0.5\n\n![](https://upload-images.jianshu.io/upload_images/12790782-44cdf662e1e2adb2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nå¯¹æ–‡ç« çš„æ¯ä¸ªè¯éƒ½æ ¹æ® TF-IDF æƒé‡æ’åºï¼Œä¿ç•™ TF-IDF æƒé‡æœ€é«˜çš„å‰ K ä¸ªè¯ä½œä¸ºå…³é”®è¯\n```\ndef sort_by_tfidf(partition):\n    TOPK = 20\n    for row in partition:\n        # æ‰¾åˆ°ç´¢å¼•ä¸IDFå€¼å¹¶è¿›è¡Œæ’åº\n        _dict = list(zip(row.idfFeatures.indices, row.idfFeatures.values))\n        _dict = sorted(_dict, key=lambda x: x[1], reverse=True)\n        result = _dict[:TOPK]\n        for word_index, tfidf in result:\n            yield row.article_id, row.channel_id, int(word_index), round(float(tfidf), 4)\n\nkeywords_by_tfidf = tfidf_result.rdd.mapPartitions(sort_by_tfidf).toDF([\"article_id\", \"channel_id\", \"index\", \"weights\"])\n```\n`keywords_by_tfidf` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œæ¯ç¯‡æ–‡ç« ä¿ç•™äº†æƒé‡æœ€é«˜çš„ K ä¸ªå•è¯ï¼Œindex ä¸ºå•è¯ç´¢å¼•ï¼Œweights ä¸ºå¯¹åº”å•è¯çš„ TF-IDF æƒé‡\n\n![](https://upload-images.jianshu.io/upload_images/12790782-566af87857d1c5bd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æ¯ä¸ªè¯çš„å¯¹åº”çš„ TF-IDF å€¼ï¼Œå¯ä»¥åˆ©ç”¨ `zip()` æ–¹æ³•ï¼Œå°†æ‰€æœ‰æ–‡ç« ä¸­çš„æ¯ä¸ªè¯åŠå…¶ TF-IDF æƒé‡ç»„æˆå­—å…¸ï¼Œå†åŠ å…¥ç´¢å¼•åˆ—ï¼Œç”±æ­¤å¾—åˆ°æ¯ä¸ªè¯å¯¹åº”çš„ TF-IDF å€¼ï¼Œå°†è¯¥ç»“æœä¿å­˜åˆ° idf_keywords_values è¡¨\n```\nkeywords_list_with_idf = list(zip(cv_model.vocabulary, idf_model.idf.toArray()))\ndef append_index(data):\n    for index in range(len(data)):\n        data[index] = list(data[index]) # å°†å…ƒç»„è½¬ä¸ºlist\n        data[index].append(index)       # åŠ å…¥ç´¢å¼• \n        data[index][1] = float(data[index][1])\nappend_index(keywords_list_with_idf)\nsc = spark.sparkContext\nrdd = sc.parallelize(keywords_list_with_idf) # åˆ›å»ºrdd\nidf_keywords = rdd.toDF([\"keywords\", \"idf\", \"index\"])\n\nidf_keywords.write.insertInto('idf_keywords_values')\n```\n`idf_keywords` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼ŒåŒ…å«äº†æ‰€æœ‰å•è¯çš„åç§°ã€TF-IDF æƒé‡åŠç´¢å¼•\n\n![](https://upload-images.jianshu.io/upload_images/12790782-bbf3babed9a9ccfb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\né€šè¿‡ index åˆ—ï¼Œå°† `keywords_by_tfidf` ä¸è¡¨ idf_keywords_values è¿›è¡Œè¿æ¥ï¼Œé€‰å–æ–‡ç«  IDã€é¢‘é“ IDã€å…³é”®è¯ã€TF-IDF æƒé‡ä½œä¸ºç»“æœï¼Œå¹¶ä¿å­˜åˆ° TF-IDF å…³é”®è¯è¡¨ tfidf_keywords_values\n```\nkeywords_index = spark.sql(\"select keyword, index idx from idf_keywords_values\")\nkeywords_result = keywords_by_tfidf.join(keywords_index, keywords_index.idx == keywords_by_tfidf.index).select([\"article_id\", \"channel_id\", \"keyword\", \"weights\"])\nkeywords_result.write.insertInto(\"tfidf_keywords_values\")\n```\n`keywords_result` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œkeyword å’Œ weights å³ä¸ºæ‰€æœ‰è¯åœ¨æ¯ä¸ªæ–‡ç« ä¸­çš„ TF-IDF æƒé‡\n\n![](https://upload-images.jianshu.io/upload_images/12790782-7c39214d62083c30.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n# è®¡ç®— TextRank\nå‰é¢æˆ‘ä»¬å·²ç»è®¡ç®—å¥½äº†æ¯ä¸ªè¯çš„ TF-IDF æƒé‡ï¼Œä¸ºäº†è®¡ç®—å…³é”®è¯ï¼Œè¿˜éœ€è¦å¾—åˆ°æ¯ä¸ªè¯çš„ TextRank æƒé‡ï¼Œæ¥ä¸‹æ¥ï¼Œè¿˜æ˜¯å…ˆè¯»å–æ–‡ç« å®Œæ•´ä¿¡æ¯\n```\nspark.sql(\"use article\")\narticle_dataframe = spark.sql(\"select * from article_data\")\n```\nå¯¹æ–‡ç«  sentence åˆ—çš„å†…å®¹è¿›è¡Œåˆ†è¯ï¼Œè®¡ç®—æ¯ä¸ªè¯çš„ TextRank æƒé‡ï¼Œå¹¶å°†æ¯ç¯‡æ–‡ç«  TextRank æƒé‡æœ€é«˜çš„ K ä¸ªè¯ä¿å­˜åˆ° TextRank ç»“æœè¡¨ textrank_keywords_values\n```\ntextrank_keywords_df = article_dataframe.rdd.mapPartitions(textrank).toDF([\"article_id\", \"channel_id\", \"keyword\", \"textrank\"])\n\ntextrank_keywords_df.write.insertInto(\"textrank_keywords_values\")\n```\nTextRank è®¡ç®—ç»†èŠ‚ï¼šåˆ†è¯ååªä¿ç•™æŒ‡å®šè¯æ€§çš„è¯ï¼Œæ»‘åŠ¨æˆªå–é•¿åº¦ä¸º K çš„çª—å£ï¼Œè®¡ç®—çª—å£å†…çš„å„ä¸ªè¯çš„æŠ•ç¥¨æ•°\n```\ndef textrank(partition):\n    import os\n    import jieba\n    import jieba.analyse\n    import jieba.posseg as pseg\n    import codecs\n\n    abspath = \"/root/words\"\n\n    # ç»“å·´åŠ è½½ç”¨æˆ·è¯å…¸\n    userDict_path = os.path.join(abspath, \"ITKeywords.txt\")\n    jieba.load_userdict(userDict_path)\n\n    # åœç”¨è¯æ–‡æœ¬\n    stopwords_path = os.path.join(abspath, \"stopwords.txt\")\n\n    def get_stopwords_list():\n        \"\"\"è¿”å›stopwordsåˆ—è¡¨\"\"\"\n        stopwords_list = [i.strip() for i in codecs.open(stopwords_path).readlines()]\n        return stopwords_list\n\n    # æ‰€æœ‰çš„åœç”¨è¯åˆ—è¡¨\n    stopwords_list = get_stopwords_list()\n\n    class TextRank(jieba.analyse.TextRank):\n        def __init__(self, window=20, word_min_len=2):\n            super(TextRank, self).__init__()\n            self.span = window  # çª—å£å¤§å°\n            self.word_min_len = word_min_len  # å•è¯çš„æœ€å°é•¿åº¦\n            # è¦ä¿ç•™çš„è¯æ€§ï¼Œæ ¹æ®jieba github ï¼Œå…·ä½“å‚è§https://github.com/baidu/lac\n            self.pos_filt = frozenset(\n                ('n', 'x', 'eng', 'f', 's', 't', 'nr', 'ns', 'nt', \"nw\", \"nz\", \"PER\", \"LOC\", \"ORG\"))\n\n        def pairfilter(self, wp):\n            \"\"\"è¿‡æ»¤æ¡ä»¶ï¼Œè¿”å›Trueæˆ–è€…False\"\"\"\n\n            if wp.flag == \"eng\":\n                if len(wp.word) <= 2:\n                    return False\n\n            if wp.flag in self.pos_filt and len(wp.word.strip()) >= self.word_min_len \\\n                    and wp.word.lower() not in stopwords_list:\n                return True\n    # TextRankè¿‡æ»¤çª—å£å¤§å°ä¸º5ï¼Œå•è¯æœ€å°ä¸º2\n    textrank_model = TextRank(window=5, word_min_len=2)\n    allowPOS = ('n', \"x\", 'eng', 'nr', 'ns', 'nt', \"nw\", \"nz\", \"c\")\n\n    for row in partition:\n        tags = textrank_model.textrank(row.sentence, topK=20, withWeight=True, allowPOS=allowPOS, withFlag=False)\n        for tag in tags:\n            yield row.article_id, row.channel_id, tag[0], tag[1]\n```\n`textrank_keywords_df` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œkeyword å’Œ textrank å³ä¸ºæ¯ä¸ªå•è¯åœ¨æ–‡ç« ä¸­çš„ TextRank æƒé‡\n\n![](https://upload-images.jianshu.io/upload_images/12790782-4453fb49ff5e39e8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n# ç”»åƒè®¡ç®—\næˆ‘ä»¬è®¡ç®—å‡º TF-IDF å’Œ TextRank åï¼Œå°±å¯ä»¥è®¡ç®—å…³é”®è¯å’Œä¸»é¢˜è¯äº†ï¼Œè¯»å– TF-IDF æƒé‡\n```\nidf_keywords_values = oa.spark.sql(\"select * from idf_keywords_values\")\n```\nè¯»å– TextRank æƒé‡\n```\ntextrank_keywords_values = oa.spark.sql(\"select * from textrank_keywords_values\")\n```\né€šè¿‡ `keyword` å…³è” TF-IDF æƒé‡å’Œ TextRank æƒé‡\n```\nkeywords_res = textrank_keywords_values.join(idf_keywords_values, on=['keyword'], how='left')\n```\nè®¡ç®— TF-IDF æƒé‡å’Œ TextRank æƒé‡çš„ä¹˜ç§¯ä½œä¸ºå…³é”®è¯æƒé‡\n```\nkeywords_weights = keywords_res.withColumn('weights', keywords_res.textrank * keywords_res.idf).select([\"article_id\", \"channel_id\", \"keyword\", \"weights\"])\n```\n`keywords_weights` ç»“æœå¦‚ä¸‹æ‰€ç¤º\n\n![](https://upload-images.jianshu.io/upload_images/12790782-bd60d34728a7aff8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nè¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦å°†ç›¸åŒæ–‡ç« çš„è¯éƒ½åˆå¹¶åˆ°ä¸€æ¡è®°å½•ä¸­ï¼Œå°† `keywords_weights` æŒ‰ç…§ article_id åˆ†ç»„ï¼Œå¹¶åˆ©ç”¨ `collect_list()` æ–¹æ³•ï¼Œåˆ†åˆ«å°†å…³é”®è¯å’Œæƒé‡åˆå¹¶ä¸ºåˆ—è¡¨\n```\nkeywords_weights.registerTempTable('temp')\n\nkeywords_weights = spark.sql(\"select article_id, min(channel_id) channel_id, collect_list(keyword) keywords, collect_list(weights) weights from temp group by article_id\")`\n```\n`keywords_weights` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œkeywords ä¸ºæ¯ç¯‡æ–‡ç« çš„å…³é”®è¯åˆ—è¡¨ï¼Œweights ä¸ºå…³é”®è¯å¯¹åº”çš„æƒé‡åˆ—è¡¨\n\n![](https://upload-images.jianshu.io/upload_images/12790782-562748d12a395121.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nä¸ºäº†æ–¹ä¾¿æŸ¥è¯¢ï¼Œæˆ‘ä»¬éœ€è¦å°†å…³é”®è¯å’Œæƒé‡åˆå¹¶ä¸ºä¸€åˆ—ï¼Œå¹¶å­˜å‚¨ä¸º map ç±»å‹ï¼Œè¿™é‡Œåˆ©ç”¨ `dict()` å’Œ `zip()` æ–¹æ³•ï¼Œå°†æ¯ä¸ªå…³é”®è¯åŠå…¶æƒé‡ç»„åˆæˆå­—å…¸\n```\ndef to_map(row):\n    return row.article_id, row.channel_id, dict(zip(row.keywords, row.weights))\n\narticle_keywords = keywords_weights.rdd.map(to_map).toDF(['article_id', 'channel_id', 'keywords'])\n```\n`article_keywords` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œkeywords å³ä¸ºæ¯ç¯‡æ–‡ç« çš„å…³é”®è¯å’Œå¯¹åº”æƒé‡\n\n![](https://upload-images.jianshu.io/upload_images/12790782-5a02c70d3f93eb78.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nå‰é¢æˆ‘ä»¬è®¡ç®—å®Œäº†å…³é”®è¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°† TF-IDF å’Œ TextRank çš„å…±ç°è¯ä½œä¸ºä¸»é¢˜è¯ï¼Œå°† TF-IDF æƒé‡è¡¨ tfidf_keywords_values å’Œ TextRank æƒé‡è¡¨ textrank_keywords_values è¿›è¡Œå…³è”ï¼Œå¹¶åˆ©ç”¨ `collect_set()` å¯¹ç»“æœè¿›è¡Œå»é‡ï¼Œå³å¯å¾—åˆ° TF-IDF å’Œ TextRank çš„å…±ç°è¯ï¼Œå³ä¸»é¢˜è¯\n```\ntopic_sql = \"\"\"\n                select t.article_id article_id2, collect_set(t.keyword) topics from tfidf_keywords_values t\n                inner join \n                textrank_keywords_values r\n                where t.keyword=r.keyword\n                group by article_id2\n                \"\"\"\narticle_topics = spark.sql(topic_sql)\n```\n`article_topics` ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œtopics å³ä¸ºæ¯ç¯‡æ–‡ç« çš„ä¸»é¢˜è¯åˆ—è¡¨\n\n![](https://upload-images.jianshu.io/upload_images/12790782-ca3825c269a0581b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\næœ€åï¼Œå°†ä¸»é¢˜è¯ç»“æœå’Œå…³é”®è¯ç»“æœåˆå¹¶ï¼Œå³ä¸ºæ–‡ç« ç”»åƒï¼Œä¿å­˜åˆ°è¡¨ `article_profile`\n```\narticle_profile = article_keywords.join(article_topics, article_keywords.article_id==article_topics.article_id2).select([\"article_id\", \"channel_id\", \"keywords\", \"topics\"])\n\narticle_profile.write.insertInto(\"article_profile\")\n```\næ–‡ç« ç”»åƒæ•°æ®æŸ¥è¯¢æµ‹è¯•\n```\nhive> select * from article_profile limit 1;\nOK\n26      17      {\"ç­–ç•¥\":0.3973770571351729,\"jpg\":0.9806348975390871,\"ç”¨æˆ·\":1.2794959063944176,\"strong\":1.6488457985625076,\"æ–‡ä»¶\":0.28144603583387057,\"é€»è¾‘\":0.45256526469610714,\"å½¢å¼\":0.4123994242601279,\"å…¨è‡ª\":0.9594604850547191,\"h2\":0.6244481634710125,\"ç‰ˆæœ¬\":0.44280276959510817,\"Adobe\":0.8553618185108718,\"å®‰è£…\":0.8305037437573172,\"æ£€æŸ¥æ›´æ–°\":1.8088946300014435,\"äº§å“\":0.774842382276899,\"ä¸‹è½½é¡µ\":1.4256311032544344,\"è¿‡ç¨‹\":0.19827163395829256,\"json\":0.6423301791599972,\"æ–¹å¼\":0.582762869780791,\"é€€å‡ºåº”ç”¨\":1.2338671268242603,\"Setup\":1.004399549339134}   [\"Electron\",\"å…¨è‡ªåŠ¨\",\"äº§å“\",\"ç‰ˆæœ¬å·\",\"å®‰è£…åŒ…\",\"æ£€æŸ¥æ›´æ–°\",\"æ–¹æ¡ˆ\",\"ç‰ˆæœ¬\",\"é€€å‡ºåº”ç”¨\",\"é€»è¾‘\",\"å®‰è£…è¿‡ç¨‹\",\"æ–¹å¼\",\"å®šæ€§\",\"æ–°ç‰ˆæœ¬\",\"Setup\",\"é™é»˜\",\"ç”¨æˆ·\"]\nTime taken: 0.322 seconds, Fetched: 1 row(s)\n```\n\n# Apscheduler å®šæ—¶æ›´æ–°\nå®šä¹‰ç¦»çº¿æ›´æ–°æ–‡ç« ç”»åƒçš„æ–¹æ³•ï¼Œé¦–å…ˆåˆå¹¶æœ€è¿‘ä¸€ä¸ªå°æ—¶çš„æ–‡ç« ä¿¡æ¯ï¼Œæ¥ç€è®¡ç®—æ¯ä¸ªè¯çš„ TF-IDF å’Œ TextRank æƒé‡ï¼Œå¹¶æ ¹æ® TF-IDF å’Œ TextRank æƒé‡è®¡ç®—å¾—å‡ºæ–‡ç« å…³é”®è¯å’Œä¸»é¢˜è¯ï¼Œæœ€åå°†æ–‡ç« ç”»åƒä¿¡æ¯ä¿å­˜åˆ° Hive\n```\ndef update_article_profile():\n    \"\"\"\n    å®šæ—¶æ›´æ–°æ–‡ç« ç”»åƒ\n    :return:\n    \"\"\"\n    ua = UpdateArticle()\n    # åˆå¹¶æ–‡ç« ä¿¡æ¯\n    sentence_df = ua.merge_article_data()\n    if sentence_df.rdd.collect():\n        textrank_keywords_df, keywordsIndex = ua.generate_article_label()\n        ua.get_article_profile(textrank_keywords_df, keywordsIndex)\n```\nåˆ©ç”¨ Apscheduler æ·»åŠ å®šæ—¶æ›´æ–°æ–‡ç« ç”»åƒä»»åŠ¡ï¼Œè®¾å®šæ¯éš” 1 ä¸ªå°æ—¶æ›´æ–°ä¸€æ¬¡\n```\nfrom apscheduler.schedulers.blocking import BlockingScheduler\nfrom apscheduler.executors.pool import ProcessPoolExecutor\n\n# åˆ›å»ºscheduler,å¤šè¿›ç¨‹æ‰§è¡Œ\nexecutors = {\n    'default': ProcessPoolExecutor(3)\n}\n\nscheduler = BlockingScheduler(executors=executors)\n\n# æ·»åŠ ä¸€ä¸ªå®šæ—¶æ›´æ–°æ–‡ç« ç”»åƒçš„ä»»åŠ¡,æ¯éš”1ä¸ªå°æ—¶è¿è¡Œä¸€æ¬¡\nscheduler.add_job(update_article_profile, trigger='interval', hours=1)\n\nscheduler.start()\n```\nåˆ©ç”¨ Supervisor è¿›è¡Œè¿›ç¨‹ç®¡ç†ï¼Œé…ç½®æ–‡ä»¶å¦‚ä¸‹\n```shell\n[program:offline]\nenvironment=JAVA_HOME=/root/bigdata/jdk,SPARK_HOME=/root/bigdata/spark,HADOOP_HOME=/root/bigdata/hadoop,PYSPARK_PYTHON=/miniconda2/envs/reco_sys/bin/python,PYSPARK_DRIVER_PYTHON=/miniconda2/envs/reco_sys/bin/python\ncommand=/miniconda2/envs/reco_sys/bin/python /root/toutiao_project/scheduler/main.py\ndirectory=/root/toutiao_project/scheduler\nuser=root\nautorestart=true\nredirect_stderr=true\nstdout_logfile=/root/logs/offlinesuper.log\nloglevel=info\nstopsignal=KILL\nstopasgroup=true\nkillasgroup=true\n```\n\n> åŸæ–‡å‡ºè‡ªï¼ˆå·²æˆæƒï¼‰ï¼šhttps://www.jianshu.com/u/ac833cc5146e\n\n# å‚è€ƒ\n- [https://www.bilibili.com/video/av68356229](https://www.bilibili.com/video/av68356229)\n- [https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw](https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw)ï¼ˆå­¦ä¹ èµ„æºå·²ä¿å­˜è‡³ç½‘ç›˜ï¼Œæå–ç  EakPï¼‰\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æ–‡ç« æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹3ã€æ”¶é›†ç”¨æˆ·è¡Œä¸ºæ•°æ®","url":"/2019/12/05/RecSys/æ–‡ç« æ¨èç³»ç»Ÿ/ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹3ã€æ”¶é›†ç”¨æˆ·è¡Œä¸ºæ•°æ®/","content":"\nåœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å®Œæˆäº†ä¸šåŠ¡æ•°æ®çš„åŒæ­¥ï¼Œåœ¨æ¨èç³»ç»Ÿä¸­å¦ä¸€ä¸ªå¿…ä¸å¯å°‘çš„æ•°æ®å°±æ˜¯ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œå¯ä»¥è¯´ç”¨æˆ·è¡Œä¸ºæ•°æ®æ˜¯æ¨èç³»ç»Ÿçš„åŸºçŸ³ï¼Œå·§å¦‡éš¾ä¸ºæ— ç±³ä¹‹ç‚Šï¼Œæ‰€ä»¥æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¦å°†ç”¨æˆ·çš„è¡Œä¸ºæ•°æ®åŒæ­¥åˆ°æ¨èç³»ç»Ÿæ•°æ®åº“ä¸­ã€‚\n\nåœ¨æ–‡ç« æ¨èç³»ç»Ÿä¸­ï¼Œç”¨æˆ·è¡Œä¸ºåŒ…æ‹¬æ›å…‰ã€ç‚¹å‡»ã€åœç•™ã€æ”¶è—ã€åˆ†äº«ç­‰ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å®šä¹‰çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®çš„å­—æ®µåŒ…æ‹¬ï¼šå‘ç”Ÿæ—¶é—´ï¼ˆactionTimeï¼‰ã€åœç•™æ—¶é—´ï¼ˆreadTimeï¼‰ã€é¢‘é“ IDï¼ˆchannelIdï¼‰ã€äº‹ä»¶åç§°ï¼ˆactionï¼‰ã€ç”¨æˆ· IDï¼ˆuserIdï¼‰ã€æ–‡ç«  IDï¼ˆarticleIdï¼‰ä»¥åŠç®—æ³• IDï¼ˆalgorithmCombineï¼‰ï¼Œè¿™é‡Œé‡‡ç”¨ json æ ¼å¼ï¼Œå¦‚ä¸‹æ‰€ç¤º\n```\n# æ›å…‰çš„å‚æ•°\n{\"actionTime\":\"2019-04-10 18:15:35\",\"readTime\":\"\",\"channelId\":0,\"param\":{\"action\": \"exposure\", \"userId\": \"2\", \"articleId\": \"[18577, 14299]\", \"algorithmCombine\": \"C2\"}}\n\n# å¯¹æ–‡ç« è§¦å‘è¡Œä¸ºçš„å‚æ•°\n{\"actionTime\":\"2019-04-10 18:15:36\",\"readTime\":\"\",\"channelId\":18,\"param\":{\"action\": \"click\", \"userId\": \"2\", \"articleId\": \"18577\", \"algorithmCombine\": \"C2\"}}\n{\"actionTime\":\"2019-04-10 18:15:38\",\"readTime\":\"1621\",\"channelId\":18,\"param\":{\"action\": \"read\", \"userId\": \"2\", \"articleId\": \"18577\", \"algorithmCombine\": \"C2\"}}\n{\"actionTime\":\"2019-04-10 18:15:39\",\"readTime\":\"\",\"channelId\":18,\"param\":{\"action\": \"click\", \"userId\": \"1\", \"articleId\": \"14299\", \"algorithmCombine\": \"C2\"}}\n{\"actionTime\":\"2019-04-10 18:15:39\",\"readTime\":\"\",\"channelId\":18,\"param\":{\"action\": \"click\", \"userId\": \"2\", \"articleId\": \"14299\", \"algorithmCombine\": \"C2\"}}\n{\"actionTime\":\"2019-04-10 18:15:41\",\"readTime\":\"914\",\"channelId\":18,\"param\":{\"action\": \"read\", \"userId\": \"2\", \"articleId\": \"14299\", \"algorithmCombine\": \"C2\"}}\n{\"actionTime\":\"2019-04-10 18:15:47\",\"readTime\":\"7256\",\"channelId\":18,\"param\":{\"action\": \"read\", \"userId\": \"1\", \"articleId\": \"14299\", \"algorithmCombine\": \"C2\"}}\n```\n# ç”¨æˆ·ç¦»çº¿è¡Œä¸ºæ•°æ®\nç”±äºç”¨æˆ·è¡Œä¸ºæ•°æ®è§„æ¨¡åºå¤§ï¼Œé€šå¸¸æ˜¯æ¯å¤©æ›´æ–°ä¸€æ¬¡ï¼Œä»¥ä¾›ç¦»çº¿è®¡ç®—ä½¿ç”¨ã€‚é¦–å…ˆï¼Œåœ¨ Hive ä¸­åˆ›å»ºç”¨æˆ·è¡Œä¸ºæ•°æ®åº“ profile åŠç”¨æˆ·è¡Œä¸ºè¡¨ user_actionï¼Œè®¾ç½®æŒ‰ç…§æ—¥æœŸè¿›è¡Œåˆ†åŒºï¼Œå¹¶åŒ¹é… json æ ¼å¼\n```sql\n-- åˆ›å»ºç”¨æˆ·è¡Œä¸ºæ•°æ®åº“\ncreate database if not exists profile comment \"use action\" location '/user/hive/warehouse/profile.db/';\n-- åˆ›å»ºç”¨æˆ·è¡Œä¸ºä¿¡æ¯è¡¨\ncreate table user_action\n(\n    actionTime STRING comment \"user actions time\",\n    readTime   STRING comment \"user reading time\",\n    channelId  INT comment \"article channel id\",\n    param map comment \"action parameter\"\n)\n    COMMENT \"user primitive action\"\n    PARTITIONED BY (dt STRING) # æŒ‰ç…§æ—¥æœŸåˆ†åŒº\n    ROW FORMAT SERDE 'org.apache.hive.hcatalog.data.JsonSerDe' # åŒ¹é…jsonæ ¼å¼\n    LOCATION '/user/hive/warehouse/profile.db/user_action';\n```\né€šå¸¸ç”¨æˆ·è¡Œä¸ºæ•°æ®è¢«ä¿å­˜åœ¨åº”ç”¨æœåŠ¡å™¨çš„æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Flume ç›‘å¬åº”ç”¨æœåŠ¡å™¨ä¸Šçš„æ—¥å¿—æ–‡ä»¶ï¼Œå°†ç”¨æˆ·è¡Œä¸ºæ•°æ®æ”¶é›†åˆ° Hive çš„ user_action è¡¨å¯¹åº”çš„ HDFS ç›®å½•ä¸­ï¼ŒFlume é…ç½®å¦‚ä¸‹\n```\na1.sources = s1\na1.sinks = k1\na1.channels = c1\n\na1.sources.s1.channels= c1\na1.sources.s1.type = exec\na1.sources.s1.command = tail -F /root/logs/userClick.log\na1.sources.s1.interceptors=i1 i2\na1.sources.s1.interceptors.i1.type=regex_filter\na1.sources.s1.interceptors.i1.regex=\\\\{.*\\\\}\na1.sources.s1.interceptors.i2.type=timestamp\n\n# c1\na1.channels.c1.type=memory\na1.channels.c1.capacity=30000\na1.channels.c1.transactionCapacity=1000\n\n# k1\na1.sinks.k1.type=hdfs\na1.sinks.k1.channel=c1\na1.sinks.k1.hdfs.path=hdfs://192.168.19.137:9000/user/hive/warehouse/profile.db/user_action/%Y-%m-%d\na1.sinks.k1.hdfs.useLocalTimeStamp = true\na1.sinks.k1.hdfs.fileType=DataStream\na1.sinks.k1.hdfs.writeFormat=Text\na1.sinks.k1.hdfs.rollInterval=0\na1.sinks.k1.hdfs.rollSize=10240\na1.sinks.k1.hdfs.rollCount=0\na1.sinks.k1.hdfs.idleTimeout=60\n```\nç¼–å†™ Flume å¯åŠ¨è„šæœ¬ collect_click.sh\n```\n#!/usr/bin/env bash\n\nexport JAVA_HOME=/root/bigdata/jdk\nexport HADOOP_HOME=/root/bigdata/hadoop\nexport PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin\n\n/root/bigdata/flume/bin/flume-ng agent -c /root/bigdata/flume/conf -f /root/bigdata/flume/conf/collect_click.conf -Dflume.root.logger=INFO,console -name a1\n```\nFlume è‡ªåŠ¨ç”Ÿæˆç›®å½•åï¼Œéœ€è¦æ‰‹åŠ¨å…³è” Hive åˆ†åŒºåæ‰èƒ½åŠ è½½åˆ°æ•°æ®\n```sql\nalter table user_action add partition (dt='2019-11-11') location \"/user/hive/warehouse/profile.db/user_action/2011-11-11/\"\n```\n# ç”¨æˆ·å®æ—¶è¡Œä¸ºæ•°æ®\nä¸ºäº†æé«˜æ¨èçš„å®æ—¶æ€§ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æ”¶é›†ç”¨æˆ·çš„å®æ—¶è¡Œä¸ºæ•°æ®ï¼Œä»¥ä¾›åœ¨çº¿è®¡ç®—ä½¿ç”¨ã€‚è¿™é‡Œåˆ©ç”¨ Flume å°†æ—¥å¿—æ”¶é›†åˆ° Kafkaï¼Œåœ¨çº¿è®¡ç®—ä»»åŠ¡å¯ä»¥ä» Kafka è¯»å–ç”¨æˆ·å®æ—¶è¡Œä¸ºæ•°æ®ã€‚é¦–å…ˆï¼Œå¼€å¯ zookeeperï¼Œä»¥å®ˆæŠ¤è¿›ç¨‹è¿è¡Œ\n```\n/root/bigdata/kafka/bin/zookeeper-server-start.sh -daemon /root/bigdata/kafka/config/zookeeper.properties\n```\nå¼€å¯ Kafka\n```shell\n/root/bigdata/kafka/bin/kafka-server-start.sh /root/bigdata/kafka/config/server.properties\n\n# å¼€å¯æ¶ˆæ¯ç”Ÿäº§è€…\n/root/bigdata/kafka/bin/kafka-console-producer.sh --broker-list 192.168.19.19092 --sync --topic click-trace\n# å¼€å¯æ¶ˆè´¹è€…\n/root/bigdata/kafka/bin/kafka-console-consumer.sh --bootstrap-server 192.168.19.137:9092 --topic  click-trace\n```\nä¿®æ”¹ Flume çš„æ—¥å¿—æ”¶é›†é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ  c2 å’Œ k2 ï¼Œå°†æ—¥å¿—æ•°æ®æ”¶é›†åˆ° Kafka\n```\na1.sources = s1\na1.sinks = k1 k2\na1.channels = c1 c2\n\na1.sources.s1.channels= c1 c2\na1.sources.s1.type = exec\na1.sources.s1.command = tail -F /root/logs/userClick.log\na1.sources.s1.interceptors=i1 i2\na1.sources.s1.interceptors.i1.type=regex_filter\na1.sources.s1.interceptors.i1.regex=\\\\{.*\\\\}\na1.sources.s1.interceptors.i2.type=timestamp\n\n# c1\na1.channels.c1.type=memory\na1.channels.c1.capacity=30000\na1.channels.c1.transactionCapacity=1000\n\n# c2\na1.channels.c2.type=memory\na1.channels.c2.capacity=30000\na1.channels.c2.transactionCapacity=1000\n\n# k1\na1.sinks.k1.type=hdfs\na1.sinks.k1.channel=c1\na1.sinks.k1.hdfs.path=hdfs://192.168.19.137:9000/user/hive/warehouse/profile.db/user_action/%Y-%m-%d\na1.sinks.k1.hdfs.useLocalTimeStamp = true\na1.sinks.k1.hdfs.fileType=DataStream\na1.sinks.k1.hdfs.writeFormat=Text\na1.sinks.k1.hdfs.rollInterval=0\na1.sinks.k1.hdfs.rollSize=10240\na1.sinks.k1.hdfs.rollCount=0\na1.sinks.k1.hdfs.idleTimeout=60\n\n# k2\na1.sinks.k2.channel=c2\na1.sinks.k2.type=org.apache.flume.supervisorctl\næˆ‘ä»¬å¯ä»¥åˆ©ç”¨supervisorctlæ¥ç®¡ç†supervisorã€‚sink.kafka.KafkaSink\na1.sinks.k2.kafka.bootstrap.servers=192.168.19.137:9092\na1.sinks.k2.kafka.topic=click-trace\na1.sinks.k2.kafka.batchSize=20\na1.sinks.k2.kafka.producer.requiredAcks=1\n```\nç¼–å†™ Kafka å¯åŠ¨è„šæœ¬ start_kafka.sh\n```\n#!/usr/bin/env bash\n# å¯åŠ¨zookeeper\n/root/bigdata/kafka/bin/zookeeper-server-start.sh -daemon /root/bigdata/kafka/config/zookeeper.properties\n# å¯åŠ¨kafka\n/root/bigdata/kafka/bin/kafka-server-start.sh /root/bigdata/kafka/config/server.properties\n# å¢åŠ topic\n/root/bigdata/kafka/bin/kafka-topics.sh --zookeeper 192.168.19.137:2181 --create --replication-factor 1 --topic click-trace --partitions 1\n```\n# è¿›ç¨‹ç®¡ç†\næˆ‘ä»¬è¿™é‡Œä½¿ç”¨ Supervisor è¿›è¡Œè¿›ç¨‹ç®¡ç†ï¼Œå½“è¿›ç¨‹å¼‚å¸¸æ—¶å¯ä»¥è‡ªåŠ¨é‡å¯ï¼ŒFlume è¿›ç¨‹é…ç½®å¦‚ä¸‹\n```shell\n[program:collect-click]\ncommand=/bin/bash /root/toutiao_project/scripts/collect_click.sh\nuser=root\nautorestart=true\nredirect_stderr=true\nstdout_logfile=/root/logs/collect.log\nloglevel=info\nstopsignal=KILL\nstopasgroup=true\nkillasgroup=true\n```\nKafka è¿›ç¨‹é…ç½®å¦‚ä¸‹\n```shell\n[program:kafka]\ncommand=/bin/bash /root/toutiao_project/scripts/start_kafka.sh\nuser=root\nautorestart=true\nredirect_stderr=true\nstdout_logfile=/root/logs/kafka.log\nloglevel=info\nstopsignal=KILL\nstopasgroup=true\nkillasgroup=true\n```\nå¯åŠ¨ Supervisor\n```\nsupervisord -c /etc/supervisord.conf\n```\nå¯åŠ¨ Kafka æ¶ˆè´¹è€…ï¼Œå¹¶åœ¨åº”ç”¨æœåŠ¡å™¨æ—¥å¿—æ–‡ä»¶ä¸­å†™å…¥æ—¥å¿—æ•°æ®ï¼ŒKafka æ¶ˆè´¹è€…å³å¯æ”¶é›†åˆ°å®æ—¶è¡Œä¸ºæ•°æ®\n```shell\n# å¯åŠ¨Kafkaæ¶ˆè´¹è€…\n/root/bigdata/kafka/bin/kafka-console-consumer.sh --bootstrap-server 192.168.19.137:9092 --topic  click-trace\n\n# å†™å…¥æ—¥å¿—æ•°æ®\necho {\\\"actionTime\\\":\\\"2019-04-10 21:04:39\\\",\\\"readTime\\\":\\\"\\\",\\\"channelId\\\":18,\\\"param\\\":{\\\"action\\\": \\\"click\\\", \\\"userId\\\": \\\"2\\\", \\\"articleId\\\": \\\"14299\\\", \\\"algorithmCombine\\\": \\\"C2\\\"}} >> userClick.log\n\n# æ¶ˆè´¹è€…æ¥æ”¶åˆ°æ—¥å¿—æ•°æ®\n{\"actionTime\":\"2019-04-10 21:04:39\",\"readTime\":\"\",\"channelId\":18,\"param\":{\"action\": \"click\", \"userId\": \"2\", \"articleId\": \"14299\", \"algorithmCombine\": \"C2\"}}\n```\nSupervisor å¸¸ç”¨å‘½ä»¤å¦‚ä¸‹\n```\nsupervisorctl\n\n> status              # æŸ¥çœ‹ç¨‹åºçŠ¶æ€\n> start apscheduler   # å¯åŠ¨apschedulerå•ä¸€ç¨‹åº\n> stop toutiao:*      # å…³é—­toutiaoç»„ç¨‹åº\n> start toutiao:*     # å¯åŠ¨toutiaoç»„ç¨‹åº\n> restart toutiao:*   # é‡å¯toutiaoç»„ç¨‹åº\n> update              # é‡å¯é…ç½®æ–‡ä»¶ä¿®æ”¹è¿‡çš„ç¨‹åº\n```\n\n> åŸæ–‡å‡ºè‡ªï¼ˆå·²æˆæƒï¼‰ï¼šhttps://www.jianshu.com/u/ac833cc5146e\n\n# å‚è€ƒ\n- [https://www.bilibili.com/video/av68356229](https://www.bilibili.com/video/av68356229)\n- [https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw](https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw)ï¼ˆå­¦ä¹ èµ„æºå·²ä¿å­˜è‡³ç½‘ç›˜ï¼Œæå–ç  EakPï¼‰\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æ–‡ç« æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹2ã€åŒæ­¥ä¸šåŠ¡æ•°æ®.md","url":"/2019/12/05/RecSys/æ–‡ç« æ¨èç³»ç»Ÿ/ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹2ã€åŒæ­¥ä¸šåŠ¡æ•°æ®/","content":"\nåœ¨æ¨èç³»ç»Ÿæ¶æ„ä¸­ï¼Œæ¨èç³»ç»Ÿçš„æ•°æ®åº“å’Œä¸šåŠ¡ç³»ç»Ÿçš„æ•°æ®åº“æ˜¯åˆ†ç¦»çš„ï¼Œè¿™æ ·æ‰èƒ½æœ‰æ•ˆé¿å…æ¨èç³»ç»Ÿçš„æ•°æ®è¯»å†™ã€è®¡ç®—ç­‰å¯¹ä¸šåŠ¡ç³»ç»Ÿçš„å½±å“ï¼Œæ‰€ä»¥åŒæ­¥ä¸šåŠ¡æ•°æ®å¾€å¾€ä¹Ÿæ˜¯æ¨èç³»ç»Ÿè¦åšçš„ç¬¬ä¸€ä»¶äº‹æƒ…ã€‚é€šå¸¸ä¸šåŠ¡æ•°æ®æ˜¯å­˜å‚¨åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œæ¯”å¦‚ MySQLï¼Œè€Œæ¨èç³»ç»Ÿé€šå¸¸éœ€è¦ä½¿ç”¨å¤§æ•°æ®å¹³å°ï¼Œæ¯”å¦‚ Hadoopï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Sqoop å°† MySQL ä¸­çš„ä¸šåŠ¡æ•°æ®åŒæ­¥åˆ° Hive ä¸­ï¼Œåœ¨æˆ‘ä»¬çš„æ–‡ç« æ¨èç³»ç»Ÿä¸­ï¼Œéœ€è¦åŒæ­¥çš„æ•°æ®åŒ…æ‹¬ï¼š\n\n- ç”¨æˆ·ä¿¡æ¯è¡¨ï¼ˆuser_profileï¼‰ï¼šåŒ…æ‹¬ user_id | gender | birthday   | real_name | create_time | update_time   | register_media_time | id_number | id_card_front | id_card_back | id_card_handheld | area | company | career ç­‰å­—æ®µã€‚\n- ç”¨æˆ·åŸºç¡€ä¿¡æ¯è¡¨ï¼ˆuser_basicï¼‰ï¼šåŒ…æ‹¬ user_id | mobile      | password | user_name       | profile_photo                | last_login          | is_media | article_count | following_count | fans_count | like_count | read_count | introduction    | certificate | is_verified | account | email       | status ç­‰å­—æ®µã€‚\n- æ–‡ç« ä¿¡æ¯è¡¨ï¼ˆnews_article_basicï¼‰ï¼šåŒ…æ‹¬ article_id | user_id | channel_id | title                         | cover                   | is_advertising | create_time         | status | reviewer_id | review_time | delete_time | comment_count | allow_comment | update_time         | reject_reason ç­‰å­—æ®µã€‚\n- æ–‡ç« å†…å®¹è¡¨ï¼ˆnews_article_contentï¼‰ï¼šåŒ…æ‹¬ article_id | content | update_time ç­‰å­—æ®µã€‚\n- é¢‘é“ä¿¡æ¯è¡¨ï¼ˆnews_channelï¼‰ï¼šåŒ…æ‹¬ channel_id | channel_name | create_time         | update_time         | sequence | is_visible | is_default ç­‰å­—æ®µã€‚\n\né¦–å…ˆï¼Œåœ¨ Hive ä¸­åˆ›å»ºä¸šåŠ¡æ•°æ®åº“ toutiaoï¼Œå¹¶åˆ›å»ºç›¸å…³è¡¨\n```sql\ncreate database if not exists toutiao comment \"user,news information of mysql\" location '/user/hive/warehouse/toutiao.db/';\n-- ç”¨æˆ·ä¿¡æ¯è¡¨\ncreate table user_profile\n(\n    user_id             BIGINT comment \"userid\",\n    gender              BOOLEAN comment \"gender\",\n    birthday            STRING comment \"birthday\",\n    real_name           STRING comment \"real_name\",\n    create_time         STRING comment \"create_time\",\n    update_time         STRING comment \"update_time\",\n    register_media_time STRING comment \"register_media_time\",\n    id_number           STRING comment \"id_number\",\n    id_card_front       STRING comment \"id_card_front\",\n    id_card_back        STRING comment \"id_card_back\",\n    id_card_handheld    STRING comment \"id_card_handheld\",\n    area                STRING comment \"area\",\n    company             STRING comment \"company\",\n    career              STRING comment \"career\"\n)\n    COMMENT \"toutiao user profile\"\n    row format delimited fields terminated by ',' # æŒ‡å®šåˆ†éš”ç¬¦\n    LOCATION '/user/hive/warehouse/toutiao.db/user_profile';\n-- ç”¨æˆ·åŸºç¡€ä¿¡æ¯è¡¨\ncreate table user_basic\n(\n    user_id         BIGINT comment \"user_id\",\n    mobile          STRING comment \"mobile\",\n    password        STRING comment \"password\",\n    profile_photo   STRING comment \"profile_photo\",\n    last_login      STRING comment \"last_login\",\n    is_media        BOOLEAN comment \"is_media\",\n    article_count   BIGINT comment \"article_count\",\n    following_count BIGINT comment \"following_count\",\n    fans_count      BIGINT comment \"fans_count\",\n    like_count      BIGINT comment \"like_count\",\n    read_count      BIGINT comment \"read_count\",\n    introduction    STRING comment \"introduction\",\n    certificate     STRING comment \"certificate\",\n    is_verified     BOOLEAN comment \"is_verified\"\n)\n    COMMENT \"toutiao user basic\"\n    row format delimited fields terminated by ',' # æŒ‡å®šåˆ†éš”ç¬¦\n    LOCATION '/user/hive/warehouse/toutiao.db/user_basic';\n-- æ–‡ç« åŸºç¡€ä¿¡æ¯è¡¨\ncreate table news_article_basic\n(\n    article_id  BIGINT comment \"article_id\",\n    user_id     BIGINT comment \"user_id\",\n    channel_id  BIGINT comment \"channel_id\",\n    title       STRING comment \"title\",\n    status      BIGINT comment \"status\",\n    update_time STRING comment \"update_time\"\n)\n    COMMENT \"toutiao news_article_basic\"\n    row format delimited fields terminated by ',' # æŒ‡å®šåˆ†éš”ç¬¦\n    LOCATION '/user/hive/warehouse/toutiao.db/news_article_basic';\n-- æ–‡ç« é¢‘é“è¡¨\ncreate table news_channel\n(\n    channel_id   BIGINT comment \"channel_id\",\n    channel_name STRING comment \"channel_name\",\n    create_time  STRING comment \"create_time\",\n    update_time  STRING comment \"update_time\",\n    sequence     BIGINT comment \"sequence\",\n    is_visible   BOOLEAN comment \"is_visible\",\n    is_default   BOOLEAN comment \"is_default\"\n)\n    COMMENT \"toutiao news_channel\"\n    row format delimited fields terminated by ',' # æŒ‡å®šåˆ†éš”ç¬¦\n    LOCATION '/user/hive/warehouse/toutiao.db/news_channel';\n-- æ–‡ç« å†…å®¹è¡¨\ncreate table news_article_content\n(\n    article_id BIGINT comment \"article_id\",\n    content    STRING comment \"content\",\n    update_time STRING comment \"update_time\"\n)\n    COMMENT \"toutiao news_article_content\"\n    row format delimited fields terminated by ',' # æŒ‡å®šåˆ†éš”ç¬¦\n    LOCATION '/user/hive/warehouse/toutiao.db/news_article_content';\n```\næŸ¥çœ‹ Sqoop è¿æ¥åˆ° MySQL çš„æ•°æ®åº“åˆ—è¡¨\n```shell\nsqoop list-databases --connect jdbc:mysql://192.168.19.137:3306/ --username root -P\n\nmysql\nsys\ntoutiao\n```\nSqoop å¯ä»¥æŒ‡å®šå…¨é‡å¯¼å…¥å’Œå¢é‡å¯¼å…¥ï¼Œé€šå¸¸æˆ‘ä»¬å¯ä»¥å…ˆæ‰§è¡Œä¸€æ¬¡å…¨é‡å¯¼å…¥ï¼Œå°†å†å²æ•°æ®å…¨éƒ¨å¯¼å…¥è¿›æ¥ï¼Œåé¢å†é€šè¿‡å®šæ—¶ä»»åŠ¡æ‰§è¡Œå¢é‡å¯¼å…¥ï¼Œæ¥ä¿æŒ MySQL å’Œ Hive çš„æ•°æ®åŒæ­¥ï¼Œå…¨é‡å¯¼å…¥ä¸éœ€è¦æå‰åˆ›å»º Hive è¡¨ï¼Œå¯ä»¥è‡ªåŠ¨åˆ›å»º\n```shell\narray=(user_profile user_basic news_article_basic news_channel news_article_content)\n\nfor table_name in ${array[@]};\ndo\n    sqoop import \\\n        --connect jdbc:mysql://192.168.19.137/toutiao \\\n        --username root \\\n        --password password \\\n        --table $table_name \\\n        --m 5 \\ # çº¿ç¨‹æ•°\n        --hive-home /root/bigdata/hive \\ # hiveè·¯å¾„\n        --hive-import \\ # å¯¼å…¥å½¢å¼\n        --create-hive-table  \\ # è‡ªåŠ¨åˆ›å»ºè¡¨\n        --hive-drop-import-delims \\\n        --warehouse-dir /user/hive/warehouse/toutiao.db \\ # å¯¼å…¥åœ°å€\n        --hive-table toutiao.$table_name \ndone\n```\nå¢é‡å¯¼å…¥ï¼Œæœ‰ append å’Œ lastmodified ä¸¤ç§æ¨¡å¼\n- appendï¼šé€šè¿‡æŒ‡å®šä¸€ä¸ªé€’å¢çš„åˆ—è¿›è¡Œæ›´æ–°ï¼Œåªèƒ½è¿½åŠ ï¼Œä¸èƒ½ä¿®æ”¹\n```shell\nnum=0\ndeclare -A check\ncheck=([user_profile]=user_id [user_basic]=user_id [news_article_basic]=article_id [news_channel]=channel_id [news_article_content]=channel_id)\n\nfor k in ${!check[@]}\ndo\n    sqoop import \\\n        --connect jdbc:mysql://192.168.19.137/toutiao \\\n        --username root \\\n        --password password \\\n        --table $k \\\n        --m 4 \\\n        --hive-home /root/bigdata/hive \\ # hiveè·¯å¾„\n        --hive-import \\ # å¯¼å…¥åˆ°hive\n        --create-hive-table  \\ # è‡ªåŠ¨åˆ›å»ºè¡¨\n        --incremental append \\ # æŒ‰ç…§idæ›´æ–°\n        --check-column ${check[$k]} \\ # æŒ‡å®šidåˆ—\n        --last-value ${num} # æŒ‡å®šæœ€åæ›´æ–°çš„id\ndone\n```\n- lastmodifiedï¼šæŒ‰ç…§æœ€åä¿®æ”¹æ—¶é—´æ›´æ–°ï¼Œæ”¯æŒè¿½åŠ å’Œä¿®æ”¹\n```shell\ntime=`date +\"%Y-%m-%d\" -d \"-1day\"`\ndeclare -A check\ncheck=([user_profile]=update_time [user_basic]=last_login [news_article_basic]=update_time [news_channel]=update_time)\ndeclare -A merge\nmerge=([user_profile]=user_id [user_basic]=user_id [news_article_basic]=article_id [news_channel]=channel_id)\n\nfor k in ${!check[@]}\ndo\n    sqoop import \\\n        --connect jdbc:mysql://192.168.19.137/toutiao \\\n        --username root \\\n        --password password \\\n        --table $k \\\n        --m 4 \\\n        --target-dir /user/hive/warehouse/toutiao.db/$k \\ # hiveè·¯å¾„\n        --incremental lastmodified \\ # æŒ‰ç…§æœ€åä¿®æ”¹æ—¶é—´æ›´æ–°\n        --check-column ${check[$k]} \\ # æŒ‡å®šæ—¶é—´åˆ—\n        --merge-key ${merge[$k]} \\ # æ ¹æ®æŒ‡å®šåˆ—åˆå¹¶é‡å¤æˆ–ä¿®æ”¹æ•°æ®\n        --last-value ${time} # æŒ‡å®šæœ€åä¿®æ”¹æ—¶é—´\ndone\n```\nSqoop å¯ä»¥ç›´æ¥å¯¼å…¥åˆ° Hiveï¼Œè‡ªåŠ¨åˆ›å»º Hive è¡¨ï¼Œä½†æ˜¯ lastmodified æ¨¡å¼ä¸æ”¯æŒ\nSqoop ä¹Ÿå¯ä»¥å…ˆå¯¼å…¥åˆ° HDFSï¼Œç„¶åå†å»ºç«‹ Hive è¡¨å…³è”ï¼Œä¸ºäº†ä½¿ç”¨ lastmodified æ¨¡å¼ï¼Œé€šå¸¸ä½¿ç”¨è¿™ç§æ–¹æ³•\n```\n--target-dir /user/hive/warehouse/toutiao.db/user_profile # æŒ‡å®šå¯¼å…¥çš„HDFSç›®å½•\n```\nè‹¥å…ˆå¯¼å…¥åˆ° HDFSï¼Œéœ€è¦æ³¨æ„ HDFS é»˜è®¤åˆ†éš”ç¬¦ä¸º `,` è€Œ Hive é»˜è®¤åˆ†éš”ç¬¦ä¸º `/u0001`ï¼Œæ‰€ä»¥éœ€è¦åœ¨åˆ›å»º Hive è¡¨æ—¶æŒ‡å®šåˆ†éš”ç¬¦ä¸º HDFS åˆ†éš”ç¬¦ `,`ï¼Œè‹¥ä¸æŒ‡å®šåˆ†éš”ç¬¦ï¼ŒæŸ¥è¯¢ç»“æœå°†å…¨éƒ¨ä¸º NULL\n```\nrow format delimited fields terminated by ',' # æŒ‡å®šåˆ†éš”ç¬¦\n```\nå¦‚æœ MySQL æ•°æ®ä¸­å­˜åœ¨ç‰¹æ®Šå­—ç¬¦ï¼Œå¦‚ `, \\t \\n` éƒ½ä¼šå¯¼è‡´ Hive è¯»å–å¤±è´¥ï¼ˆä½†ä¸å½±å“å¯¼å…¥åˆ° HDFS ä¸­ï¼‰ï¼Œå¯ä»¥åˆ©ç”¨ `--query` å‚æ•°ï¼Œåœ¨è¯»å–æ—¶ä½¿ç”¨ `REPLACE() CHAR() CHR()` è¿›è¡Œå­—ç¬¦æ›¿æ¢ã€‚å¦‚æœç‰¹æ®Šå­—ç¬¦è¿‡å¤šï¼Œæ¯”å¦‚ news_article_content è¡¨ï¼Œå¯ä»¥é€‰æ‹©å…¨é‡å¯¼å…¥\n```\n--query 'select article_id, user_id, channel_id, REPLACE(REPLACE(REPLACE(title, CHAR(13),\"\"),CHAR(10),\"\"), \",\", \" \") title, status, update_time from news_article_basic WHERE $CONDITIONS' \\\n```\nå¦‚æœ MySQL æ•°æ®ä¸­å­˜åœ¨ tinyint ç±»å‹,å¿…é¡»åœ¨ `--connet` ä¸­åŠ å…¥ `?tinyInt1isBit=false`ï¼Œé˜²æ­¢ Hive å°† tinyint ç±»å‹é»˜è®¤è½¬åŒ–ä¸º boolean ç±»å‹\n```\n--connect jdbc:mysql://192.168.19.137/toutiao?tinyInt1isBit=false\n```\nMySQL ä¸ Hive å¯¹åº”ç±»å‹å¦‚ä¸‹\nMySQL|Hive\n-|-\nbigint|bigint\ntinyint|boolean\nint|int\ndouble|double\nbit|boolean\nvarchar|string\ndecimal|double\ndate / timestamp|string\næˆ‘ä»¬å¯ä»¥åˆ©ç”¨ crontab æ¥åˆ›å»ºå®šæ—¶ä»»åŠ¡ï¼Œå°†æ›´æ–°å‘½ä»¤å†™å…¥è„šæœ¬ import_incremental.shï¼Œè¾“å…¥ `crontab -e` æ‰“å¼€ç¼–è¾‘ç•Œé¢ï¼Œè¾“å…¥å¦‚ä¸‹å†…å®¹ï¼Œå³å¯å®šæ—¶æ‰§è¡Œæ•°æ®åŒæ­¥ä»»åŠ¡\n```\n# æ¯éš”åŠå°æ—¶å¢é‡å¯¼å…¥ä¸€æ¬¡\n*/30 * * * * /root/toutiao_project/scripts/import_incremental.sh\n```\ncrontab å‘½ä»¤æ ¼å¼ä¸º `* * * * * shell`ï¼Œå…¶ä¸­å‰äº”ä¸ª `*` åˆ†åˆ«ä»£è¡¨åˆ†é’Ÿ (0-59)ã€å°æ—¶(0-59)ã€æœˆå†…çš„æŸå¤©(1-31)ã€æœˆ(1-12)ã€å‘¨å†…çš„æŸå¤©(0-7ï¼Œå‘¨æ—¥ä¸º 0 æˆ– 7)ï¼Œ`shell` è¡¨ç¤ºè¦æ‰§è¡Œçš„å‘½ä»¤æˆ–è„šæœ¬ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹\n```\n# æ¯éš”5åˆ†é’Ÿè¿è¡Œä¸€æ¬¡backupscriptè„šæœ¬\n*/5 * * * * /root/backupscript.sh\n# æ¯å¤©çš„å‡Œæ™¨1ç‚¹è¿è¡Œbackupscriptè„šæœ¬\n0 1 * * * /root/backupscript.sh\n# æ¯æœˆçš„ç¬¬ä¸€ä¸ªå‡Œæ™¨3:15è¿è¡Œbackupscriptè„šæœ¬\n15 3 1 * * /root/backupscript.sh\n```\ncrontab å¸¸ç”¨å‘½ä»¤å¦‚ä¸‹\n```shell\ncrontab -e      # ä¿®æ”¹ crontab æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»ºã€‚ \ncrontab -l      # æ˜¾ç¤º crontab æ–‡ä»¶ã€‚ \ncrontab -r      # åˆ é™¤ crontab æ–‡ä»¶ã€‚\ncrontab -ir     # åˆ é™¤ crontab æ–‡ä»¶å‰æé†’ç”¨æˆ·ã€‚\n\nservice crond status      # æŸ¥çœ‹crontabæœåŠ¡çŠ¶æ€\nservice crond start       # å¯åŠ¨æœåŠ¡ \nservice crond stop        # å…³é—­æœåŠ¡ \nservice crond restart     # é‡å¯æœåŠ¡ \nservice crond reload      # é‡æ–°è½½å…¥é…ç½®\n```\n> åŸæ–‡å‡ºè‡ªï¼ˆå·²æˆæƒï¼‰ï¼šhttps://www.jianshu.com/u/ac833cc5146e\n\n\n# å‚è€ƒ\n- [https://www.bilibili.com/video/av68356229](https://www.bilibili.com/video/av68356229)\n- [https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw](https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw)ï¼ˆå­¦ä¹ èµ„æºå·²ä¿å­˜è‡³ç½‘ç›˜ï¼Œæå–ç  EakPï¼‰\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æ–‡ç« æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹1ã€æ¨èæµç¨‹è®¾è®¡","url":"/2019/12/05/RecSys/æ–‡ç« æ¨èç³»ç»Ÿ/ã€Šæ–‡ç« æ¨èç³»ç»Ÿã€‹ç³»åˆ—ä¹‹1ã€æ¨èæµç¨‹è®¾è®¡/","content":"\næ¨èç³»ç»Ÿä¸»è¦è§£å†³çš„æ˜¯ä¿¡æ¯è¿‡è½½çš„é—®é¢˜ï¼Œç›®æ ‡æ˜¯ä»æµ·é‡ç‰©å“ç­›é€‰å‡ºä¸åŒç”¨æˆ·å„è‡ªå–œæ¬¢çš„ç‰©å“ï¼Œä»è€Œä¸ºæ¯ä¸ªç”¨æˆ·æä¾›ä¸ªæ€§åŒ–çš„æ¨èã€‚æ¨èç³»ç»Ÿå¾€å¾€æ¶è®¾åœ¨å¤§è§„æ¨¡çš„ä¸šåŠ¡ç³»ç»Ÿä¹‹ä¸Šï¼Œé¢ä¸´ç€ç”¨æˆ·çš„ä¸æ–­å¢é•¿ï¼Œç‰©å“çš„ä¸æ–­å˜åŒ–ï¼Œå¹¶ä¸”æœ‰ç€å…¨é¢çš„æ¨èè¯„ä»·æŒ‡æ ‡å’Œä¸¥æ ¼çš„æ€§èƒ½è¦æ±‚ï¼ˆNetflix çš„è¯·æ±‚æ—¶é—´åœ¨ 250 ms ä»¥å†…ï¼Œä»Šæ—¥å¤´æ¡çš„è¯·æ±‚æ—¶é—´åœ¨ 200ms ä»¥å†…ï¼‰ï¼Œæ‰€ä»¥æ¨èç³»ç»Ÿå¾ˆéš¾ä¸€æ¬¡æ€§åœ°å¿«é€Ÿè®¡ç®—å‡ºç”¨æˆ·æ‰€å–œå¥½çš„ç‰©å“ï¼Œå¹¶ä¸”åŒæ—¶æ»¡è¶³å‡†ç¡®åº¦ã€å¤šæ ·æ€§ç­‰è¯„ä»·æŒ‡æ ‡ã€‚ä¸ºäº†è§£å†³å¦‚ä¸Šè¿™äº›é—®é¢˜ï¼Œæ¨èç³»ç»Ÿé€šå¸¸è¢«è®¾è®¡ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šå¬å›ã€æ’åºå’Œè°ƒæ•´ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![å¬å›ã€æ’åºå’Œè°ƒæ•´](https://upload-images.jianshu.io/upload_images/12790782-ee044ed9dd9cc759.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nåœ¨å¬å›é˜¶æ®µï¼Œé¦–å…ˆç­›é€‰å‡ºå’Œç”¨æˆ·ç›´æ¥ç›¸å…³æˆ–é—´æ¥ç›¸å…³çš„ç‰©å“ï¼Œå°†åŸå§‹æ•°æ®ä»ä¸‡ã€ç™¾ä¸‡ã€äº¿çº§åˆ«ç¼©å°åˆ°ä¸‡ã€åƒçº§åˆ«ï¼›åœ¨æ’åºé˜¶æ®µï¼Œé€šå¸¸ä½¿ç”¨äºŒåˆ†ç±»ç®—æ³•æ¥é¢„æµ‹ç”¨æˆ·å¯¹ç‰©å“çš„å–œå¥½ç¨‹åº¦ï¼ˆæˆ–è€…æ˜¯ç‚¹å‡»ç‡ï¼‰ï¼Œç„¶åå°†ç‰©å“æŒ‰ç…§å–œå¥½ç¨‹åºä»å¤§åˆ°å°ä¾æ¬¡æ’åˆ—ï¼Œç­›é€‰å‡ºç”¨æˆ·æœ€æœ‰å¯èƒ½å–œæ¬¢çš„ç‰©å“ï¼Œè¿™é‡Œåˆå°†å¬å›æ•°æ®ä»ä¸‡ã€åƒçº§åˆ«ç¼©å°åˆ°åƒã€ç™¾çº§åˆ«ï¼›æœ€ååœ¨è°ƒæ•´é˜¶æ®µï¼Œéœ€è¦è¿‡æ»¤æ‰é‡å¤æ¨èçš„ã€å·²ç»è´­ä¹°æˆ–é˜…è¯»çš„ã€å·²ç»ä¸‹çº¿çš„ç‰©å“ï¼Œå½“å¬å›å’Œæ’åºç»“æœä¸è¶³æ—¶ï¼Œéœ€è¦ä½¿ç”¨çƒ­é—¨ç‰©å“è¿›è¡Œè¡¥å……ï¼Œæœ€ååˆå¹¶ç‰©å“åŸºç¡€ä¿¡æ¯ï¼Œå°†åŒ…å«å®Œæ•´ä¿¡æ¯çš„ç‰©å“æ¨èåˆ—è¡¨è¿”å›ç»™å®¢æˆ·ç«¯ã€‚\n\nè¿™é‡Œä»¥æ–‡ç« æ¨èç³»ç»Ÿä¸ºä¾‹ï¼Œè®²è¿°ä¸€ä¸‹æ¨èç³»ç»Ÿçš„å®Œæ•´æµç¨‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![æ¨èç³»ç»Ÿçš„å®Œæ•´æµç¨‹](https://upload-images.jianshu.io/upload_images/12790782-40327d59055eba56.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n1. åŒæ­¥ä¸šåŠ¡æ•°æ®\nä¸ºäº†é¿å…æ¨èç³»ç»Ÿçš„æ•°æ®è¯»å†™ã€è®¡ç®—ç­‰å¯¹åº”ç”¨äº§ç”Ÿå½±å“ï¼Œæˆ‘ä»¬é¦–å…ˆè¦å°†ä¸šåŠ¡æ•°æ®ä»åº”ç”¨æ•°æ®åº“ MySQL åŒæ­¥åˆ°æ¨èç³»ç»Ÿæ•°æ®åº“ Hive ä¸­ï¼Œè¿™é‡Œåˆ©ç”¨ Sqoop å…ˆå°† MySQL ä¸­çš„ä¸šåŠ¡æ•°æ®åŒæ­¥åˆ°æ¨èç³»ç»Ÿçš„ HDFS ä¸­ï¼Œå†å…³è”åˆ°æŒ‡å®šçš„ Hive è¡¨ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æ¨èç³»ç»Ÿæ•°æ®åº“ Hive ä¸­ä½¿ç”¨ç”¨æˆ·æ•°æ®å’Œæ–‡ç« æ•°æ®äº†ï¼Œå¹¶ä¸”ä¸ä¼šå¯¹åº”ç”¨äº§ç”Ÿä»»ä½•å½±å“ã€‚\n\n2. æ”¶é›†ç”¨æˆ·è¡Œä¸ºæ•°æ®\né™¤äº†ç”¨æˆ·æ•°æ®å’Œæ–‡ç« æ•°æ®ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¾—åˆ°ç”¨æˆ·å¯¹æ–‡ç« çš„è¡Œä¸ºæ•°æ®ï¼Œæ¯”å¦‚æ›å…‰ã€ç‚¹å‡»ã€é˜…è¯»ã€ç‚¹èµã€æ”¶è—ã€åˆ†äº«ã€è¯„è®ºç­‰ã€‚æˆ‘ä»¬çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®æ˜¯è®°å½•åœ¨åº”ç”¨æœåŠ¡å™¨çš„æ—¥å¿—æ–‡ä»¶ä¸­çš„ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨ Flume å¯¹åº”ç”¨æœåŠ¡å™¨çš„æ—¥å¿—æ–‡ä»¶è¿›è¡Œç›‘å¬ï¼Œä¸€æ–¹é¢å°†æ”¶é›†åˆ°çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®åŒæ­¥åˆ° HDFS ä¸­ï¼Œå¹¶å…³è”åˆ° Hive çš„ç”¨æˆ·è¡Œä¸ºè¡¨ï¼Œæ¯å¤©æ›´æ–°ä¸€æ¬¡ï¼Œä»¥ä¾›ç¦»çº¿è®¡ç®—ä½¿ç”¨ã€‚å¦ä¸€æ–¹é¢å°† Flume æ”¶é›†åˆ°çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®åŒæ­¥åˆ° Kafkaï¼Œå®æ—¶æ›´æ–°ï¼Œä»¥ä¾›åœ¨çº¿è®¡ç®—ä½¿ç”¨ã€‚\n\n3. æ„å»ºç¦»çº¿ç”»åƒå’Œç‰¹å¾\n- æ–‡ç« ç”»åƒç”±å…³é”®è¯å’Œä¸»é¢˜è¯ç»„æˆï¼Œæˆ‘ä»¬é¦–å…ˆè¯»å– Hive ä¸­çš„æ–‡ç« æ•°æ®ï¼Œå°†æ–‡ç« å†…å®¹è¿›è¡Œåˆ†è¯ï¼Œæ ¹æ® TF-IDF æ¨¡å‹è®¡ç®—æ¯ä¸ªè¯çš„æƒé‡ï¼Œå°† TF-IDF æƒé‡æœ€é«˜çš„ K ä¸ªè¯ä½œä¸ºå…³é”®è¯ï¼Œå†æ ¹æ® TextRank æ¨¡å‹è®¡ç®—æ¯ä¸ªè¯çš„æƒé‡ï¼Œå°† TextRank æƒé‡æœ€é«˜çš„ K ä¸ªè¯ä¸ TF-IDF æƒé‡æœ€é«˜çš„ K ä¸ªè¯çš„å…±ç°è¯ä½œä¸ºä¸»é¢˜è¯ï¼Œå°†å…³é”®è¯å’Œä¸»é¢˜è¯å­˜å‚¨åˆ° Hive çš„æ–‡ç« ç”»åƒè¡¨ä¸­ã€‚æ¥ä¸‹æ¥ï¼Œåˆ©ç”¨ Word2Vec æ¨¡å‹ï¼Œè®¡ç®—å¾—åˆ°æ‰€æœ‰å…³é”®è¯çš„å¹³å‡å‘é‡ï¼Œä½œä¸ºæ–‡ç« çš„è¯å‘é‡ï¼Œå­˜å‚¨åˆ° Hive çš„æ–‡ç« å‘é‡è¡¨ä¸­ï¼Œå¹¶åˆ©ç”¨ BucketedRandomProjectionLSH æ¨¡å‹è®¡ç®—å¾—åˆ°æ–‡ç« çš„ç›¸ä¼¼åº¦ï¼Œå°†æ¯ç¯‡æ–‡ç« ç›¸ä¼¼åº¦æœ€é«˜çš„ K ç¯‡æ–‡ç« ï¼Œå­˜å‚¨åˆ° Hbase çš„æ–‡ç« ç›¸ä¼¼è¡¨ä¸­ã€‚è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†æ¯ç¯‡æ–‡ç« çš„ç”»åƒã€è¯å‘é‡ä»¥åŠç›¸ä¼¼æ–‡ç« åˆ—è¡¨ã€‚\n\n- æ„å»ºç¦»çº¿ç”¨æˆ·ç”»åƒ\næˆ‘ä»¬å¯ä»¥å°†ç”¨æˆ·å–œæ¬¢çš„æ–‡ç« çš„ä¸»é¢˜è¯ä½œä¸ºç”¨æˆ·æ ‡ç­¾ï¼Œä»¥ä¾¿åé¢æ ¹æ®ç”¨æˆ·æ ‡ç­¾æ¥æ¨èç¬¦åˆå…¶åå¥½çš„æ–‡ç« ã€‚é¦–å…ˆè¯»å–ç”¨æˆ·è¡Œä¸ºæ•°æ®å’Œæ–‡ç« ç”»åƒæ•°æ®ï¼Œè®¡ç®—åœ¨ç”¨æˆ·äº§ç”Ÿè¿‡è¡Œä¸ºçš„æ‰€æœ‰æ–‡ç« ä¸­ï¼Œæ¯ä¸ªä¸»é¢˜è¯çš„æƒé‡ï¼Œä¸åŒçš„è¡Œä¸ºï¼Œæƒé‡ä¸åŒï¼Œè®¡ç®—å…¬å¼ä¸ºï¼šç”¨æˆ·æ ‡ç­¾æƒé‡ =ï¼ˆç”¨æˆ·è¡Œä¸ºåˆ†å€¼ä¹‹å’Œï¼‰x æ—¶é—´è¡°å‡ï¼Œè¿™æ ·å°±è®¡ç®—å¾—åˆ°äº†ç”¨æˆ·çš„æ ‡ç­¾åŠæ ‡ç­¾æƒé‡ï¼Œæ¥ç€è¯»å–ç”¨æˆ·æ•°æ®ï¼Œå¾—åˆ°ç”¨æˆ·åŸºç¡€ä¿¡æ¯ï¼Œå°†ç”¨æˆ·æ ‡ç­¾ã€æ ‡ç­¾æƒé‡åŠç”¨æˆ·åŸºç¡€ä¿¡æ¯ä¸€å¹¶å­˜å‚¨åˆ° Hbase çš„ç”¨æˆ·ç”»åƒè¡¨ä¸­ã€‚åˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»é€šè¿‡æœºå™¨å­¦ä¹ ç®—æ³•ï¼ŒåŸºäºç”¨æˆ·å’Œæ–‡ç« çš„ä¸šåŠ¡æ•°æ®å¾—åˆ°äº†ç”¨æˆ·å’Œæ–‡ç« çš„ç”»åƒï¼Œä½†ä¸ºäº†åé¢å¯ä»¥æ›´æ–¹ä¾¿åœ°å°†æ•°æ®æä¾›ç»™æ·±åº¦å­¦ä¹ æ¨¡å‹è¿›è¡Œè®­ç»ƒï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°†ç”»åƒæ•°æ®è¿›ä¸€æ­¥æŠ½è±¡ä¸ºç‰¹å¾æ•°æ®ã€‚\n\n- æ„å»ºç¦»çº¿æ–‡ç« ç‰¹å¾\nç”±äºå·²ç»æœ‰äº†ç”»åƒä¿¡æ¯ï¼Œç‰¹å¾æ„é€ å°±å˜å¾—ç®€å•äº†ã€‚è¯»å–æ–‡ç« ç”»åƒæ•°æ®ï¼Œå°†æ–‡ç« æƒé‡æœ€é«˜çš„ K ä¸ªå…³é”®è¯çš„æƒé‡ä½œä¸ºæ–‡ç« å…³é”®è¯æƒé‡å‘é‡ï¼Œå°†é¢‘é“ IDã€å…³é”®è¯æƒé‡å‘é‡ã€è¯å‘é‡ä½œä¸ºæ–‡ç« ç‰¹å¾å­˜å‚¨åˆ° Hbase çš„æ–‡ç« ç‰¹å¾è¡¨ã€‚\n\n- æ„å»ºç¦»çº¿ç”¨æˆ·ç‰¹å¾\nè¯»å–ç”¨æˆ·ç”»åƒæ•°æ®ï¼Œå°†æƒé‡æœ€é«˜çš„ K ä¸ªæ ‡ç­¾çš„æƒé‡ä½œä¸ºç”¨æˆ·æ ‡ç­¾æƒé‡å‘é‡ï¼Œå°†ç”¨æˆ·æ ‡ç­¾æƒé‡å‘é‡ä½œä¸ºç”¨æˆ·ç‰¹å¾å­˜å‚¨åˆ° Hbase çš„ç”¨æˆ·ç‰¹å¾è¡¨ã€‚\n\n4. å¤šè·¯å¬å›\n\n- åŸºäºæ¨¡å‹çš„ç¦»çº¿å¬å›\næˆ‘ä»¬å¯ä»¥æ ¹æ®ç”¨æˆ·çš„å†å²ç‚¹å‡»è¡Œä¸ºæ¥é¢„æµ‹ç›¸ä¼¼ç”¨æˆ·ï¼Œå¹¶åˆ©ç”¨ç›¸ä¼¼ç”¨æˆ·çš„ç‚¹å‡»è¡Œä¸ºæ¥é¢„æµ‹å¯¹æ–‡ç« çš„åå¥½å¾—åˆ†ï¼Œè¿™ç§å¬å›æ–¹å¼ç§°ä¸º u2u2iã€‚è·å–ç”¨æˆ·å†å²ç‚¹å‡»è¡Œä¸ºæ•°æ®ï¼Œåˆ©ç”¨ ALS æ¨¡å‹è®¡ç®—å¾—åˆ°ç”¨æˆ·å¯¹æ–‡ç« çš„åå¥½å¾—åˆ†åŠæ–‡ç« åˆ—è¡¨ï¼Œè¯»å–å¹¶è¿‡æ»¤å†å²å¬å›ç»“æœï¼Œé˜²æ­¢é‡å¤æ¨èï¼Œå°†è¿‡æ»¤åçš„åå¥½å¾—åˆ†æœ€é«˜çš„ K ç¯‡æ–‡ç« å­˜å…¥ Hbase çš„å¬å›ç»“æœè¡¨ä¸­ï¼Œkey ä¸º alsï¼Œè¡¨æ˜å¬å›ç±»å‹ä¸º ALS æ¨¡å‹å¬å›ï¼Œå¹¶è®°å½•åˆ° Hbase çš„å†å²å¬å›ç»“æœè¡¨ã€‚\n\n- åŸºäºå†…å®¹çš„ç¦»çº¿å¬å›\næˆ‘ä»¬å¯ä»¥æ ¹æ®ç”¨æˆ·çš„å†å²ç‚¹å‡»è¡Œä¸ºï¼Œå‘ç”¨æˆ·æ¨èå…¶ä»¥å‰å–œæ¬¢çš„æ–‡ç« çš„ç›¸ä¼¼æ–‡ç« ï¼Œè¿™ç§æ–¹å¼ç§°ä¸º u2i2iã€‚è¯»å–ç”¨æˆ·å†å²è¡Œä¸ºæ•°æ®ï¼Œè·å–ç”¨æˆ·å†å²å‘ç”Ÿè¿‡ç‚¹å‡»ã€é˜…è¯»ã€æ”¶è—ã€åˆ†äº«ç­‰è¡Œä¸ºçš„æ–‡ç« ï¼Œæ¥ç€è¯»å–æ–‡ç« ç›¸ä¼¼è¡¨ï¼Œè·å–ä¸å‘ç”Ÿè¡Œä¸ºçš„æ¯ç¯‡æ–‡ç« ç›¸ä¼¼åº¦æœ€é«˜çš„ K ç¯‡æ–‡ç« ï¼Œç„¶åè¯»å–å¹¶è¿‡æ»¤å†å²å¬å›ç»“æœï¼Œé˜²æ­¢é‡å¤æ¨èï¼Œæœ€åå°†è¿‡æ»¤åçš„æ–‡ç« å­˜å…¥ Hbase çš„å¬å›ç»“æœè¡¨ä¸­ï¼Œkey ä¸º contentï¼Œè¡¨æ˜å¬å›ç±»å‹ä¸ºå†…å®¹å¬å›ï¼Œå¹¶è®°å½•åˆ° Hbase çš„å†å²å¬å›ç»“æœè¡¨ã€‚\n\n- åŸºäºå†…å®¹çš„åœ¨çº¿å¬å›\nå’Œä¸Šé¢ä¸€æ ·ï¼Œè¿˜æ˜¯æ ¹æ®ç”¨æˆ·çš„ç‚¹å‡»è¡Œä¸ºï¼Œå‘ç”¨æˆ·æ¨èå…¶å–œæ¬¢çš„æ–‡ç« çš„ç›¸ä¼¼æ–‡ç« ï¼Œä¸è¿‡è¿™é‡Œæ˜¯ç”¨æˆ·å®æ—¶å‘ç”Ÿçš„è¡Œä¸ºï¼Œæ‰€ä»¥å«åšåœ¨çº¿å¬å›ã€‚è¯»å– Kafka ä¸­çš„ç”¨æˆ·å®æ—¶è¡Œä¸ºæ•°æ®ï¼Œè·å–ç”¨æˆ·å®æ—¶å‘ç”Ÿç‚¹å‡»ã€é˜…è¯»ã€æ”¶è—ã€åˆ†äº«ç­‰è¡Œä¸ºçš„æ–‡ç« ï¼Œæ¥ç€è¯»å–æ–‡ç« ç›¸ä¼¼è¡¨ï¼Œè·å–ä¸å‘ç”Ÿè¡Œä¸ºçš„æ¯ç¯‡æ–‡ç« ç›¸ä¼¼åº¦æœ€é«˜çš„ K ç¯‡æ–‡ç« ï¼Œç„¶åè¯»å–å¹¶è¿‡æ»¤å†å²å¬å›ç»“æœï¼Œé˜²æ­¢é‡å¤æ¨èï¼Œæœ€åå°†è¿‡æ»¤åçš„æ–‡ç« å­˜å…¥ Hbase çš„å¬å›ç»“æœè¡¨ä¸­ï¼Œkey ä¸º onlineï¼Œè¡¨æ˜å¬å›ç±»å‹ä¸ºåœ¨çº¿å¬å›ï¼Œå¹¶è®°å½•åˆ° Hbase çš„å†å²å¬å›ç»“æœè¡¨ã€‚\n\n- åŸºäºçƒ­é—¨æ–‡ç« çš„åœ¨çº¿å¬å›\nè¯»å– Kafka ä¸­çš„ç”¨æˆ·å®æ—¶è¡Œä¸ºæ•°æ®ï¼Œè·å–ç”¨æˆ·å½“å‰å‘ç”Ÿç‚¹å‡»ã€é˜…è¯»ã€æ”¶è—ã€åˆ†äº«ç­‰è¡Œä¸ºçš„æ–‡ç« ï¼Œå¢åŠ è¿™äº›æ–‡ç« åœ¨ Redis ä¸­çš„çƒ­åº¦åˆ†æ•°ã€‚\n\n- åŸºäºæ–°æ–‡ç« çš„åœ¨çº¿å¬å›\nè¯»å– Kafka ä¸­çš„å®æ—¶ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œè·å–æ–°å‘å¸ƒçš„æ–‡ç« ï¼Œå°†å…¶åŠ å…¥åˆ° Redis ä¸­ï¼Œå¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚\n\n5. æ’åº\n\nä¸åŒæ¨¡å‹çš„åšæ³•å¤§è‡´ç›¸åŒï¼Œè¿™é‡Œä»¥ LR æ¨¡å‹ä¸ºä¾‹ã€‚\n\n- åŸºäº LR æ¨¡å‹çš„ç¦»çº¿è®­ç»ƒ\nè¯»å– Hive çš„ç”¨æˆ·å†å²è¡Œä¸ºæ•°æ®ï¼Œå¹¶åˆ‡åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œæ ¹æ®å…¶ä¸­çš„ç”¨æˆ· ID å’Œæ–‡ç«  IDï¼Œè¯»å– Hbase çš„ç”¨æˆ·ç‰¹å¾æ•°æ®å’Œæ–‡ç« ç‰¹å¾æ•°æ®ï¼Œå°†äºŒè€…åˆå¹¶ä½œä¸ºè®­ç»ƒé›†çš„è¾“å…¥ç‰¹å¾ï¼Œå°†ç”¨æˆ·å¯¹æ–‡ç« æ˜¯å¦ç‚¹å‡»ä½œä¸ºè®­ç»ƒé›†çš„æ ‡ç­¾ï¼Œå°†ä¸Šä¸€æ¬¡çš„æ¨¡å‹å‚æ•°ä½œä¸º LR æ¨¡å‹çš„åˆå§‹åŒ–å‚æ•°ï¼Œè¿›è¡Œç‚¹å‡»ç‡é¢„ä¼°è®­ç»ƒï¼Œè®¡ç®—å¾—å‡º AUC ç­‰è¯„åˆ†æŒ‡æ ‡å¹¶è¿›è¡Œæ¨èæ•ˆæœåˆ†æã€‚\n\n- åŸºäº LR æ¨¡å‹çš„åœ¨çº¿æ’åº\nå½“æ¨èä¸­å¿ƒè¯»å– Hbase çš„æ¨èç»“æœè¡¨æ— æ•°æ®æ—¶ï¼Œæ¨èä¸­å¿ƒå°†è°ƒç”¨åœ¨çº¿æ’åºæœåŠ¡æ¥é‡æ–°è·å–æ¨èç»“æœã€‚æ’åºæœåŠ¡é¦–å…ˆè¯»å– Hbase çš„å¬å›ç»“æœä½œä¸ºæµ‹è¯•é›†ï¼Œè¯»å– Hbase çš„ç”¨æˆ·ç‰¹å¾æ•°æ®å’Œæ–‡ç« ç‰¹å¾æ•°æ®ï¼Œå°†äºŒè€…åˆå¹¶ä½œä¸ºæµ‹è¯•é›†çš„è¾“å…¥ç‰¹å¾ï¼Œä½¿ç”¨ LR æ¨¡å‹è¿›è¡Œç‚¹å‡»ç‡é¢„ä¼°ï¼Œè®¡ç®—å¾—åˆ°ç‚¹å‡»ç‡æœ€é«˜çš„å‰ K ä¸ªæ–‡ç« ï¼Œç„¶åè¯»å–å¹¶è¿‡æ»¤å†å²æ¨èç»“æœï¼Œé˜²æ­¢é‡å¤æ¨èï¼Œæœ€åå°†è¿‡æ»¤åçš„æ–‡ç« åˆ—è¡¨å­˜å…¥ Hbase çš„æ¨èç»“æœè¡¨ä¸­ï¼Œkey ä¸º lrï¼Œè¡¨æ˜æ’åºç±»å‹ä¸º LR æ’åºã€‚\n\n6. æ¨èä¸­å¿ƒ\n- æµé‡åˆ‡åˆ†ï¼ˆABTestï¼‰\næˆ‘ä»¬å¯ä»¥æ ¹æ®ç”¨æˆ· ID è¿›è¡Œå“ˆå¸Œåˆ†æ¡¶ï¼Œå°†æµé‡åˆ‡åˆ†åˆ°å¤šä¸ªæ¡¶ï¼Œæ¯ä¸ªæ¡¶å¯¹åº”ä¸€ç§æ’åºç­–ç•¥ï¼Œä»è€Œå¯¹æ¯”ä¸åŒæ’åºç­–ç•¥åœ¨çº¿ä¸Šç¯å¢ƒçš„æ•ˆæœã€‚\n\n- æ¨èæ•°æ®è¯»å–é€»è¾‘\nä¼˜å…ˆè¯»å– Redis å’Œ Hbase ä¸­ç¼“å­˜çš„æ¨èç»“æœï¼Œè‹¥ Redis å’Œ Hbase éƒ½ä¸ºç©ºï¼Œåˆ™è°ƒç”¨åœ¨çº¿æ’åºæœåŠ¡è·å¾—æ¨èç»“æœã€‚\n\n- å…œåº•è¡¥è¶³ï¼ˆè¶…æ—¶æˆªæ–­ï¼‰\nå½“è°ƒç”¨æ’åºæœåŠ¡æ— ç»“æœï¼Œæˆ–è€…è¯»å–è¶…æ—¶çš„æ—¶å€™ï¼Œæ¨èä¸­å¿ƒä¼šæˆªæ–­å½“å‰è¯·æ±‚ï¼Œç›´æ¥è¯»å– Redis ä¸­çš„çƒ­é—¨æ–‡ç« å’Œæ–°æ–‡ç« ä½œä¸ºæ¨èç»“æœã€‚\n\n- åˆå¹¶ä¿¡æ¯\nåˆå¹¶ç‰©å“åŸºç¡€ä¿¡æ¯ï¼Œå°†åŒ…å«å®Œæ•´ä¿¡æ¯çš„ç‰©å“æ¨èåˆ—è¡¨è¿”å›ç»™å®¢æˆ·ç«¯ã€‚\n\n> åŸæ–‡å‡ºè‡ªï¼ˆå·²æˆæƒï¼‰ï¼šhttps://www.jianshu.com/u/ac833cc5146e\n\n# å‚è€ƒ\n- [https://space.bilibili.com/61036655/channel/detail?cid=91348](https://space.bilibili.com/61036655/channel/detail?cid=91348)ï¼ˆå¼ºçƒˆæ¨èï¼Œèš‚èšå¤§ç¥çš„è§†é¢‘è®²å¾—å¾ˆæ£’ï¼‰\n- [https://www.bilibili.com/video/av68356229](https://www.bilibili.com/video/av68356229)\n- [https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw](https://pan.baidu.com/s/1-uvGJ-mEskjhtaial0Xmgw)ï¼ˆå­¦ä¹ èµ„æºå·²ä¿å­˜è‡³ç½‘ç›˜ï¼Œæå–ç  EakPï¼‰\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æ–‡ç« æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"Django3.0å’ŒPython3.7è¿æ¥MysqlæŠ¥ï¼šError loading MySQLdb module. Did you install mysqlclient","url":"/2019/12/04/Python/Django3.0å’ŒPython3.7è¿æ¥MysqlæŠ¥ï¼šError loading MySQLdb module. Did you install mysqlclient/","content":"\n\n# ç¯å¢ƒè¯´æ˜\n- Python 3.7.3\n- Django 3.0\n    - å®‰è£…ï¼špip3 install -U Django\n    - æ–‡æ¡£ï¼šhttps://docs.djangoproject.com/zh-hans/3.0/contents/\n\n\n# é¡¹ç›®è¯´æ˜\n\nåˆ›å»ºé¡¹ç›®\n\n```\ndjango-admin startproject mysite \n```\n\né…ç½®Mysql\n```\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': 'mysite',\n        'USER': 'root',\n        'PASSWORD': '123456',\n        'HOST': '127.0.0.1',\n        'PORT': '3306',\n    }\n}\n```\n\nåˆ›å»ºè§†å›¾\n```\npython3 manage.py startapp index\n```\n\næŠ¥é”™\n```\n[MeetUpRec] python3 manage.py startapp index                                                                                                           14:45:34  â˜  master â˜‚ âœ­\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.7/site-packages/django/db/backends/mysql/base.py\", line 16, in <module>\n    import MySQLdb as Database\nModuleNotFoundError: No module named 'MySQLdb'\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"manage.py\", line 21, in <module>\n    main()\n  File \"manage.py\", line 17, in main\n    execute_from_command_line(sys.argv)\n  File \"/usr/local/lib/python3.7/site-packages/django/core/management/__init__.py\", line 401, in execute_from_command_line\n    utility.execute()\n  File \"/usr/local/lib/python3.7/site-packages/django/core/management/__init__.py\", line 377, in execute\n    django.setup()\n  File \"/usr/local/lib/python3.7/site-packages/django/__init__.py\", line 24, in setup\n    apps.populate(settings.INSTALLED_APPS)\n  File \"/usr/local/lib/python3.7/site-packages/django/apps/registry.py\", line 114, in populate\n    app_config.import_models()\n  File \"/usr/local/lib/python3.7/site-packages/django/apps/config.py\", line 211, in import_models\n    self.models_module = import_module(models_module_name)\n  File \"/usr/local/Cellar/python/3.7.3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"<frozen importlib._bootstrap>\", line 1006, in _gcd_import\n  File \"<frozen importlib._bootstrap>\", line 983, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 967, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\n  File \"/usr/local/lib/python3.7/site-packages/django/contrib/auth/models.py\", line 2, in <module>\n    from django.contrib.auth.base_user import AbstractBaseUser, BaseUserManager\n  File \"/usr/local/lib/python3.7/site-packages/django/contrib/auth/base_user.py\", line 47, in <module>\n    class AbstractBaseUser(models.Model):\n  File \"/usr/local/lib/python3.7/site-packages/django/db/models/base.py\", line 121, in __new__\n    new_class.add_to_class('_meta', Options(meta, app_label))\n  File \"/usr/local/lib/python3.7/site-packages/django/db/models/base.py\", line 325, in add_to_class\n    value.contribute_to_class(cls, name)\n  File \"/usr/local/lib/python3.7/site-packages/django/db/models/options.py\", line 208, in contribute_to_class\n    self.db_table = truncate_name(self.db_table, connection.ops.max_name_length())\n  File \"/usr/local/lib/python3.7/site-packages/django/db/__init__.py\", line 28, in __getattr__\n    return getattr(connections[DEFAULT_DB_ALIAS], item)\n  File \"/usr/local/lib/python3.7/site-packages/django/db/utils.py\", line 207, in __getitem__\n    backend = load_backend(db['ENGINE'])\n  File \"/usr/local/lib/python3.7/site-packages/django/db/utils.py\", line 111, in load_backend\n    return import_module('%s.base' % backend_name)\n  File \"/usr/local/Cellar/python/3.7.3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"/usr/local/lib/python3.7/site-packages/django/db/backends/mysql/base.py\", line 21, in <module>\n    ) from err\ndjango.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module.\nDid you install mysqlclient?\n\n```\nåŸå› ï¼šåœ¨Python2ä¸­ç”¨çš„æ˜¯mysqldbï¼Œä½†åœ¨Python3ä¸­ç”¨çš„æ˜¯ mysqlclient\n\nå°è¯•è§£å†³ï¼šæ‰§è¡Œmysqlclientå®‰è£…å‘½ä»¤\n```\npip3 install mysqlclient \n```\n\næŠ¥é”™ï¼š\n```\nCollecting mysqlclient\n  Using cached https://files.pythonhosted.org/packages/d0/97/7326248ac8d5049968bf4ec708a5d3d4806e412a42e74160d7f266a3e03a/mysqlclient-1.4.6.tar.gz\n    ERROR: Complete output from command python setup.py egg_info:\n    ERROR: /bin/sh: mysql_config: command not found\n    /bin/sh: mariadb_config: command not found\n    /bin/sh: mysql_config: command not found\n    Traceback (most recent call last):\n      File \"<string>\", line 1, in <module>\n      File \"/private/var/folders/sc/tw1zhq750h510tgxd4g32_dw0000gn/T/pip-install-9cqr2rno/mysqlclient/setup.py\", line 16, in <module>\n        metadata, options = get_config()\n      File \"/private/var/folders/sc/tw1zhq750h510tgxd4g32_dw0000gn/T/pip-install-9cqr2rno/mysqlclient/setup_posix.py\", line 61, in get_config\n        libs = mysql_config(\"libs\")\n      File \"/private/var/folders/sc/tw1zhq750h510tgxd4g32_dw0000gn/T/pip-install-9cqr2rno/mysqlclient/setup_posix.py\", line 29, in mysql_config\n        raise EnvironmentError(\"%s not found\" % (_mysql_config_path,))\n    OSError: mysql_config not found\n    ----------------------------------------\nERROR: Command \"python setup.py egg_info\" failed with error code 1 in /private/var/folders/sc/tw1zhq750h510tgxd4g32_dw0000gn/T/pip-install-9cqr2rno/mysqlclient/\n```\næ²¡æ‰¾åˆ°mysqlé…ç½®ï¼Œè§£å†³å¦‚ä¸‹ï¼š\n\n```\nexport PATH=$PATH:/usr/local/mysql/bin \n```\nå†æ¬¡å®‰è£…ï¼ŒæˆåŠŸ\n\n\n\n----\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<center>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n\n---\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["Python"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"Sparkä½¿ç”¨Libsvmæ ¼å¼æ•°æ®æ„é€ LabeledPointæ ¼é”™è¯¯","url":"/2019/11/29/Spark/Sparkä½¿ç”¨Libsvmæ ¼å¼æ•°æ®æ„é€ LabeledPointæ ¼é”™è¯¯/","content":"\n### èƒŒæ™¯\n\nä½¿ç”¨libsvmæ ¼å¼çš„æ•°æ®æ„é€ LabeledPointæ ¼å¼ï¼Œä¾‹å¦‚æˆ‘çš„libsvmæ ¼å¼æ•°æ®å¦‚ä¸‹(ç´¢å¼•ä¸‹æ ‡æœ€å¤§å€¼ä¸ºï¼Œ3000)ï¼š\n```\n790718 1:1 2:1 4:1 5:1 6:1 7:1 9:1 11:1 13:1 16:1 19:1 21:1 28:1 31:1 43:1 64:1 65:1 140:1 164:1 184:1 296:1 463:1 481:1 642:1 813:1 1093:1 2288:1\n692384 9:1 10:1 16:1 19:1 30:1 31:1 54:1 56:1 69:1 140:1 142:1 224:1 232:1 307:1 601:1 649:1 692:1 2851:1\n```\n\nä½†æ˜¯åœ¨æ„é€ LabeledPointæ ¼å¼æ•°æ®çš„æ—¶å€™å¿½ç•¥çš„åº”è¯¥åˆ›å»ºçš„æ•°ç»„é•¿åº¦ï¼Œä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š\n```\nval dataset = rdd\n    .map( l => ( l._1, l._2.split(\" \").map(_.split(\":\")).map(e => (e(0).toInt-1, e(1).toDouble)) ) )\n    .map(l => LabeledPoint(l._1.toDouble, Vectors.sparse(l._2.length, l._2.filter(_._2!=0).map(_._1), l._2.filter(_._2!=0).map(_._2))))\n    .toDF(\"label\", \"features\")\n```\n\næ‰€ä»¥æŠ¥äº† java.lang.IllegalArgumentException: requirement failed: Index 2287 out of bounds for vector of size 27 é”™è¯¯\n\n### è§£å†³åŠæ³•\n\nå°†åˆ›å»ºLabeledPointæ•°æ®çš„é•¿åº¦æ”¹ä¸º3000å³å¯ï¼Œå¦‚ä¸‹ï¼š\n\n```\nval dataset = rdd\n    .map( l => ( l._1, l._2.split(\" \").map(_.split(\":\")).map(e => (e(0).toInt-1, e(1).toDouble)) ) )\n    .map(l => LabeledPoint(l._1.toDouble, Vectors.sparse(3000, l._2.filter(_._2!=0).map(_._1), l._2.filter(_._2!=0).map(_._2))))\n    .toDF(\"label\", \"features\")\n```\næ‰“å°ä¿¡æ¯æ˜¾ç¤ºå¦‚ä¸‹ï¼š\n```\nroot\n |-- label: double (nullable = false)\n |-- features: vector (nullable = true)\n\n+---------+--------------------+\n|    label|            features|\n+---------+--------------------+\n| 790718.0|(3275,[0,1,3,4,5,...|\n| 692384.0|(3275,[8,9,15,18,...|\n| 672331.0|(3275,[0,1,2,7,8,...|\n|1646601.0|   (3275,[30],[1.0])|\n|1740585.0|(3275,[0,3,6,9,11...|\n| 615659.0|(3275,[2,4,5,30,4...|\n| 169763.0|(3275,[1,2,3,4,7,...|\n| 639653.0|(3275,[1,2,4,10,1...|\n|1774993.0|(3275,[6,11,13,14...|\n|1680621.0|(3275,[11,16,31],...|\n+---------+--------------------+\nonly showing top 10 rows\n```\n\nå®Œç¾è§£å†³é—®é¢˜ï¼ï¼ï¼å¸Œæœ›æœ¬æ–‡èƒ½å¤Ÿå¸®åŠ©åˆ°ä½ ï¼\n\nä¸å¾—ä¸è¯´å¯¹äºSparkä¸­ä¸€äº›æ ¼å¼çš„æ•°æ®ä½¿ç”¨è¿˜æ˜¯ä¸å¤ªç†Ÿæ‚‰ï¼\n\n\n----\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<center>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n\n---\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["Sparkä¸å¤§æ•°æ®"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"NLPå®æˆ˜ä¹‹åŸºäºTFIDFçš„æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—","url":"/2019/11/26/NLP/NLPå®æˆ˜ä¹‹åŸºäºTFIDFçš„æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—/","content":"\n### TFIDFç®—æ³•ä»‹ç»\n\nTF-IDFï¼ˆTerm Frequencyâ€“InverseDocument Frequencyï¼‰æ˜¯ä¸€ç§ç”¨äºèµ„è®¯æ£€ç´¢ä¸æ–‡æœ¬æŒ–æ˜çš„å¸¸ç”¨åŠ æƒæŠ€æœ¯ã€‚TF-IDFçš„ä¸»è¦æ€æƒ³æ˜¯ï¼šå¦‚æœæŸä¸ªè¯æˆ–çŸ­è¯­åœ¨ä¸€ç¯‡æ–‡ç« ä¸­å‡ºç°çš„é¢‘ç‡TFé«˜ï¼Œå¹¶ä¸”åœ¨å…¶ä»–æ–‡ç« ä¸­å¾ˆå°‘å‡ºç°ï¼Œåˆ™è®¤ä¸ºæ­¤è¯æˆ–è€…çŸ­è¯­å…·æœ‰å¾ˆå¥½çš„ç±»åˆ«åŒºåˆ†èƒ½åŠ›ï¼Œé€‚åˆç”¨æ¥åˆ†ç±»ã€‚\n\nTF-IDFå®é™…æ˜¯TF*IDFï¼Œå…¶ä¸­TFï¼ˆTerm Frequencyï¼‰è¡¨ç¤ºè¯æ¡$t$åœ¨æ–‡æ¡£$D_i$ä¸­çš„å‡ºç°çš„é¢‘ç‡ï¼ŒTFçš„è®¡ç®—å…¬å¼å¦‚ä¸‹æ‰€ç¤ºï¼š\n$$\nTF_{t,D_i} = \\frac{count(t)}{D_i}\n$$\n\nå…¶ä¸­IDFï¼ˆInverseDocument Frequencyï¼‰è¡¨ç¤ºæ€»æ–‡æ¡£ä¸åŒ…å«è¯æ¡tçš„æ–‡æ¡£çš„æ¯”å€¼æ±‚å¯¹æ•°ï¼ŒIDFçš„è®¡ç®—å…¬å¼å¦‚ä¸‹æ‰€ç¤ºï¼š \n$$\nIDF_t = log \\frac{N}{ \\sum_{i=1}^{N} I(t,D_i) }\n$$\nå…¶ä¸­$N$ä¸ºæ‰€æœ‰çš„æ–‡æ¡£æ€»æ•°ï¼Œ$I(t,D_i)$è¡¨ç¤ºæ–‡æ¡£$D_i$æ˜¯å¦åŒ…å«è¯æ¡$t$ï¼Œè‹¥åŒ…å«ä¸º1ï¼Œä¸åŒ…å«ä¸º0ã€‚ä½†æ­¤å¤„å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå³å½“è¯æ¡$t$åœ¨æ‰€æœ‰æ–‡æ¡£ä¸­éƒ½æ²¡æœ‰å‡ºç°çš„è¯IDFè®¡ç®—å…¬å¼çš„åˆ†æ¯ä¸º0ï¼Œæ­¤æ—¶å°±éœ€è¦å¯¹IDFåšå¹³æ»‘å¤„ç†ï¼Œæ”¹å–„åçš„IDFè®¡ç®—å…¬å¼å¦‚ä¸‹æ‰€ç¤ºï¼š\n$$\nIDF_t = log \\frac{N}{ 1 + \\sum_{i=1}^{N} I(t,D_i) }\n$$\né‚£ä¹ˆæœ€ç»ˆè¯æ¡$t$åœ¨æ–‡æ¡£$D_i$ä¸­çš„TF-IDFå€¼ä¸ºï¼š$TF-IDF_{t,D_i} = TF_{t,D_i} * IDF_t$ ã€‚\n\nä»ä¸Šè¿°çš„è®¡ç®—è¯æ¡$t$åœ¨æ–‡æ¡£$D_i$ä¸­çš„TF-IDFå€¼è®¡ç®—å¯ä»¥çœ‹å‡ºï¼šå½“ä¸€ä¸ªè¯æ¡åœ¨æ–‡æ¡£ä¸­å‡ºç°çš„é¢‘ç‡è¶Šé«˜ï¼Œä¸”æ–°é²œåº¦ä½ï¼ˆå³æ™®éåº¦ä½ï¼‰ï¼Œåˆ™å…¶å¯¹åº”çš„TF-IDFå€¼è¶Šé«˜ã€‚\næ¯”å¦‚ç°åœ¨æœ‰ä¸€ä¸ªé¢„æ–™åº“ï¼ŒåŒ…å«äº†100ç¯‡ï¼ˆ$N$ï¼‰è®ºæ–‡ï¼Œå…¶ä¸­æ¶‰åŠåŒ…å«æ¨èç³»ç»Ÿï¼ˆ$t$ï¼‰è¿™ä¸ªè¯æ¡çš„æœ‰20ç¯‡ï¼Œåœ¨ç¬¬ä¸€ç¯‡è®ºæ–‡ï¼ˆ$D1$ï¼‰ä¸­æ€»å…±æœ‰200ä¸ªæŠ€æœ¯è¯æ±‡ï¼Œå…¶ä¸­æ¨èç³»ç»Ÿå‡ºç°äº†15æ¬¡ï¼Œåˆ™è¯æ¡æ¨èç³»ç»Ÿçš„åœ¨ç¬¬ä¸€ç¯‡è®ºæ–‡ï¼ˆ$D1$ï¼‰ä¸­çš„TF-IDFå€¼ä¸ºï¼š\n$$\nTF-IDF_{æ¨èç³»ç»Ÿ} = \\frac {15} {200} * log \\frac{200}{20+1} = 0.051\n$$\n\næ›´å¤šè¯¦ç»†çš„å…³äºTFIDFçš„ä»‹ç»å¯ä»¥å‚è€ƒ\n- [æœç´¢å¼•æ“ï¼šæ–‡æœ¬åˆ†ç±»â€”â€”TF/IDFç®—æ³•](https://thinkgamer.blog.csdn.net/article/details/48811033)\n\nå…³äºTF-IDFçš„å…¶ä»–å®æˆ˜ï¼š\n- [åŸºäºTF-IDFç®—æ³•çš„çŸ­æ ‡é¢˜å…³é”®è¯æå–](https://thinkgamer.blog.csdn.net/article/details/85690389)\n\n### åŸºäºTFIDFè®¡ç®—æ–‡æœ¬ç›¸ä¼¼åº¦\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯åœ¨spark2.xä¸­é»˜è®¤ä¸æ”¯æŒdataframeçš„ç¬›å¡å°”ç§¯æ“ä½œï¼Œéœ€è¦åœ¨åˆ›å»ºSparkå¯¹è±¡æ—¶å¼€å¯ã€‚\n\nåˆ›å»ºsparkå¯¹è±¡ï¼Œå¹¶è®¾ç½®æ—¥å¿—ç­‰çº§\n```\n// spark.sql.crossJoin.enabled=true spark 2.0 xä¸æ”¯æŒç¬›å¡å°”ç§¯æ“ä½œï¼Œéœ€è¦å¼€å¯æ”¯æŒ\nval spark = SparkSession\n    .builder()\n    .appName(\"docSimCalWithTFIDF\")\n    .config(\"spark.sql.crossJoin.enabled\",\"true\")\n    .master(\"local[10]\")\n    .enableHiveSupport()\n    .getOrCreate()\nLogger.getRootLogger.setLevel(Level.WARN)\n```\n\nè¿™é‡Œä»¥å®˜æ–¹æ ·ä¾‹ä»£ç ä¸­çš„ä¸‰è¡Œè‹±æ–‡å¥å­ä¸ºä¾‹ï¼Œåˆ›å»ºæ•°æ®é›†ï¼Œå¹¶è¿›è¡Œåˆ†è¯ï¼ˆsparkä¸­çš„ä¸­æ–‡åˆ†è¯åŒ…æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚jiebaï¼Œhanï¼Œansjï¼Œfudannlpç­‰ï¼Œè¿™é‡Œä¸å±•å¼€ä»‹ç»ï¼‰\n```\nval sentenceData = spark.createDataFrame(Seq(\n    (0, \"Hi I heard about Spark\"),\n    (1, \"I wish Java could use case classes\"),\n    (2, \"Logistic regression models are neat\")\n)).toDF(\"label\", \"sentence\")\n\nval tokenizer = new Tokenizer()\n    .setInputCol(\"sentence\")\n    .setOutputCol(\"words\")\n\nval wordsData = tokenizer.transform(sentenceData)\nwordsData.show(10)\n```\nå±•ç¤ºçš„ç»“æœä¸ºï¼š\n```\n+-----+--------------------+--------------------+\n|label|            sentence|               words|\n+-----+--------------------+--------------------+\n|    0|Hi I heard about ...|[hi, i, heard, ab...|\n|    1|I wish Java could...|[i, wish, java, c...|\n|    2|Logistic regressi...|[logistic, regres...|\n+-----+--------------------+--------------------+\n```\n\nè°ƒç”¨å®˜æ–¹çš„tfidfåŒ…è®¡ç®—å‘é‡ï¼š\n```\n// setNumFeatures(5)è¡¨ç¤ºå°†Hashåˆ†æ¡¶çš„æ•°é‡è®¾ç½®ä¸º5ä¸ª,å¯ä»¥æ ¹æ®ä½ çš„è¯è¯­æ•°é‡æ¥è°ƒæ•´ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªå€¼è¶Šå¤§ä¸åŒçš„è¯è¢«è®¡ç®—ä¸ºä¸€ä¸ªHashå€¼çš„æ¦‚ç‡å°±è¶Šå°ï¼Œæ•°æ®ä¹Ÿæ›´å‡†ç¡®ï¼Œä½†éœ€è¦æ¶ˆè€—æ›´å¤§çš„å†…å­˜\n\nval hashingTF = new HashingTF()\n    .setInputCol(\"words\")\n    .setOutputCol(\"rawFeatures\")\n    .setNumFeatures(5)\nval featurizedData = hashingTF\n    .transform(wordsData)\n\nfeaturizedData.show(10)\n\nval idf = new IDF()\n    .setInputCol(\"rawFeatures\")\n    .setOutputCol(\"features\")\nval idfModel = idf.fit(featurizedData)\nval rescaledData = idfModel.transform(featurizedData)\n\nrescaledData.show(10)\nrescaledData.select(\"label\", \"features\").show()\n```\nå±•ç¤ºçš„ç»“æœä¸ºï¼š\n```\n+-----+--------------------+--------------------+--------------------+\n|label|            sentence|               words|         rawFeatures|\n+-----+--------------------+--------------------+--------------------+\n|    0|Hi I heard about ...|[hi, i, heard, ab...|(5,[0,2,4],[2.0,2...|\n|    1|I wish Java could...|[i, wish, java, c...|(5,[0,2,3,4],[1.0...|\n|    2|Logistic regressi...|[logistic, regres...|(5,[0,1,3,4],[1.0...|\n+-----+--------------------+--------------------+--------------------+\n\n+-----+--------------------+--------------------+--------------------+--------------------+\n|label|            sentence|               words|         rawFeatures|            features|\n+-----+--------------------+--------------------+--------------------+--------------------+\n|    0|Hi I heard about ...|[hi, i, heard, ab...|(5,[0,2,4],[2.0,2...|(5,[0,2,4],[0.0,0...|\n|    1|I wish Java could...|[i, wish, java, c...|(5,[0,2,3,4],[1.0...|(5,[0,2,3,4],[0.0...|\n|    2|Logistic regressi...|[logistic, regres...|(5,[0,1,3,4],[1.0...|(5,[0,1,3,4],[0.0...|\n+-----+--------------------+--------------------+--------------------+--------------------+\n\n+-----+--------------------+\n|label|            features|\n+-----+--------------------+\n|    0|(5,[0,2,4],[0.0,0...|\n|    1|(5,[0,2,3,4],[0.0...|\n|    2|(5,[0,1,3,4],[0.0...|\n+-----+--------------------+\n```\n\nå…¶ä¸­$(5,[0,2,4],[0.0,0...$ æ˜¯å‘é‡çš„ä¸€ç§å‹ç¼©è¡¨ç¤ºæ ¼å¼ï¼Œä¾‹å¦‚$(3,[0,1],[0.1,0.2])$è¡¨ç¤ºçš„æ˜¯ å‘é‡çš„é•¿åº¦ä¸º3ï¼Œå…¶ä¸­ç¬¬ 1ä½å’Œç¬¬2ä½çš„å€¼ä¸º0.1 å’Œ0.3ï¼Œç¬¬3ä½çš„å€¼ä¸º0ã€‚\n\n---\n\nè¿™é‡Œéœ€è¦å°†å…¶è½¬åŒ–ä¸ºå‘é‡çš„å½¢å¼ï¼Œæ–¹ä¾¿åç»­è¿›è¡Œè®¡ç®—ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡dataframeè¿›è¡Œè½¬åŒ–ï¼Œä¹Ÿå¯ä»¥å…ˆå°†dataframeè½¬åŒ–ä¸ºrddï¼Œå†è¿›è¡Œè½¬åŒ–ã€‚\ndataframé€šè¿‡è‡ªå®šä¹‰UDFè¿›è¡Œè½¬åŒ–å¦‚ä¸‹ï¼š\n```\nimport spark.implicits._\n// è§£ææ•°æ® è½¬åŒ–ä¸ºdenseVectoræ ¼å¼ datafra\nval sparseVectorToDenseVector = udf { \n    features: SV => features.toDense \n}\nval df = rescaledData\n    .select($\"label\", sparseVectorToDenseVector($\"features\"))\n    .withColumn(\"tag\",lit(1))\ndf.show(10)\n```\nå±•ç¤ºç»“æœä¸ºï¼š\n```\n+------+--------------------+---+\n|label1|           features1|tag|\n+------+--------------------+---+\n|     0|[0.0,0.0,0.575364...|  1|\n|     1|[0.0,0.0,0.575364...|  1|\n|     2|[0.0,0.6931471805...|  1|\n+------+--------------------+---+\n```\n\nå…ˆè½¬åŒ–ä¸ºRDDï¼Œå†è¿›è¡Œè½¬åŒ–å¦‚ä¸‹ï¼š\n```\nval selectedRDD = rescaledData.select(\"label\", \"features\").rdd\n    .map( l=>( l.get(0).toString, l.getAs[SV](1).toDense))\nselectedRDD.take(10).foreach(println)\n```\nå±•ç¤ºç»“æœä¸ºï¼š\n```\n(0,[0.0,0.0,0.5753641449035617,0.0,0.0])\n(1,[0.0,0.0,0.5753641449035617,0.28768207245178085,0.0])\n(2,[0.0,0.6931471805599453,0.0,0.5753641449035617,0.0])\n```\n\n----\n\nå½“ç„¶ä¹Ÿå¯ä»¥åœ¨è¿›è¡Œç›¸ä¼¼åº¦è®¡ç®—æ—¶è¿›è¡Œè½¬åŒ–ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š\n```\n// å®šä¹‰ç›¸ä¼¼åº¦è®¡ç®—udf\nimport spark.implicits._\nval df1 = rescaledData\n    .select($\"label\".alias(\"id1\"), $\"features\".alias(\"f1\"))\n    .withColumn(\"tag\",lit(1))\n\nval df2 = rescaledData\n    .select($\"label\".alias(\"id2\"), $\"features\".alias(\"f2\"))\n    .withColumn(\"tag\",lit(1))\n    \nval simTwoDoc = udf{ \n    (f1: SV, f2: SV) => calTwoDocSim(f1,f2) \n}\nval df =  df1.join(df2, Seq(\"tag\"), \"inner\")\n    .where(\"id1 != id2\")\n    .withColumn(\"simscore\",simTwoDoc(col(\"f1\"), col(\"f2\")))\n    .where(\"simscore > 0.0\")\n    .select(\"id1\",\"id2\",\"simscore\")\ndf.printSchema()\ndf.show(20)\n```\nå…¶ä¸­calTwoDocSim å‡½æ•°å®ç°å¦‚ä¸‹ï¼š\n```\n/**\n  * @Author: GaoYangtuan\n  * @Description: è‡ªå®šä¹‰è®¡ç®—ä¸¤ä¸ªæ–‡æœ¬çš„è·ç¦»\n  * @Thinkgamer: ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ä½œè€…ï¼Œã€Œæœç´¢ä¸æ¨èWikiã€å…¬å·è´Ÿè´£äººï¼Œç®—æ³•å·¥ç¨‹å¸ˆ\n  * @Param: [f1, f2]\n  * @return: double\n  **/\ndef calTwoDocSim(f1: SV, f2: SV): Double = {\n    val breeze1 =new SparseVector(f1.indices,f1.values, f1.size)\n    val breeze2 =new SparseVector(f2.indices,f2.values, f2.size)\n    val cosineSim = breeze1.dot(breeze2) / (norm(breeze1) * norm(breeze2))\n   cosineSim\n}\n```\næ‰“å°ç»“æœå¦‚ä¸‹ï¼š\n```\nroot\n |-- id1: integer (nullable = false)\n |-- id2: integer (nullable = false)\n |-- simscore: double (nullable = false)\n\n+---+---+------------------+\n|id1|id2|          simscore|\n+---+---+------------------+\n|  0|  1|0.8944271909999159|\n|  1|  0|0.8944271909999159|\n|  1|  2|0.2856369296406274|\n|  2|  1|0.2856369296406274|\n+---+---+------------------+\n```\n\næœ€åè¿›è¡Œæ’åºå’Œä¿å­˜ï¼Œä»£ç å¦‚ä¸‹ï¼š\n```\nval sortAndSlice = udf { simids: Seq[Row] =>\n    simids.map{\n        case Row(id2: Int,  simscore: Double) => (id2,simscore)\n    }\n    .sortBy(_._2)\n    .reverse\n    .slice(0,100)\n    .map(e => e._1 + \":\" + e._2.formatted(\"%.3f\"))\n    .mkString(\",\")\n}\n\nval result = df\n    .groupBy($\"id1\")\n    .agg(collect_list(struct($\"id2\", $\"simscore\")).as(\"simids\"))\n    .withColumn(\"simids\", sortAndSlice(sort_array($\"simids\", asc = false)))\n\nresult.show(10)\nresult.coalesce(1).write.format(\"parquet\").mode(\"overwrite\").save(\"data/tfidf\")\n```\næ‰“å°ç»“æœå¦‚ä¸‹ï¼š\n```\n+---+---------------+\n|id1|         simids|\n+---+---------------+\n|  1|0:0.894,2:0.286|\n|  2|        1:0.286|\n|  0|        1:0.894|\n+---+---------------+\n```\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["NLP"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"æ¨¡å‹çš„ç‹¬ç«‹å­¦ä¹ æ–¹å¼","url":"/2019/11/12/æ·±åº¦å­¦ä¹ /ç¥ç»ç½‘ç»œç¬”è®°/æ¨¡å‹çš„ç‹¬ç«‹å­¦ä¹ æ–¹å¼/","content":"\n### æ¦‚è¿°\n\né’ˆå¯¹ä¸€ä¸ªç»™å®šçš„ä»»åŠ¡ï¼Œé€šå¸¸é‡‡å–çš„æ­¥éª¤æ˜¯ï¼šå‡†ç¡®ä¸€å®šéè§„æ¨¡çš„æ•°æ®é›†ï¼Œè¿™äº›æ•°æ®è¦å’ŒçœŸå®æ•°æ®é›†çš„åˆ†å¸ƒä¸€è‡´ï¼›ç„¶åè®¾å®šä¸€ä¸ªä¼˜åŒ–ç›®æ ‡å’Œæ–¹æ³•ï¼›ç„¶ååœ¨è®­ç»ƒé›†ä¸Šè®­ç»ƒæ¨¡å‹ã€‚\n\nä¸åŒçš„æ¨¡å‹å¾€å¾€éƒ½æ˜¯ä»é›¶å¼€å§‹è®­ç»ƒçš„ï¼Œä¸€åˆ‡çŸ¥è¯†éƒ½éœ€è¦ä»è®­ç»ƒé›†ä¸­å¾—åˆ°ï¼Œè¿™å°±æ„å‘³ç€æ¯ä¸ªä»»åŠ¡éƒ½éœ€è¦å¤§é‡çš„è®­ç»ƒæ•°æ®ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬é¢å¯¹çš„ä»»åŠ¡å¾ˆéš¾æ»¡è¶³ä¸Šè¿°éœ€æ±‚ï¼Œæ¯”å¦‚è®­ç»ƒä»»åŠ¡å’Œç›®æ ‡ä»»åŠ¡çš„æ•°æ®åˆ†å¸ƒä¸ä¸€è‡´ï¼Œè®­ç»ƒæ•°æ®é›†è¿‡å°‘ç­‰ã€‚è¿™æ—¶æœºå™¨å­¦ä¹ çš„ä»»åŠ¡å°±ä¼šå—åˆ°é™åˆ¶ï¼Œå› æ­¤äººä»¬å¼€å§‹å…³æ³¨ä¸€äº›æ–°çš„ä»»åŠ¡å­¦ä¹ æ–¹å¼ã€‚\næœ¬ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»ä¸€äº›â€œæ¨¡å‹ç‹¬ç«‹çš„å­¦ä¹ æ–¹å¼â€ï¼Œæ¯”å¦‚ï¼šé›†æˆå­¦ä¹ ã€ååŒå­¦ä¹ ã€è‡ªå­¦ä¹ ã€å¤šä»»åŠ¡å­¦ä¹ ã€è¿ç§»å­¦ä¹ ã€ç»ˆèº«å­¦ä¹ ã€å°æ ·æœ¬å­¦ä¹ ã€å…ƒå­¦ä¹ ç­‰ã€‚\n\n### é›†æˆå­¦ä¹ \n\né›†æˆå­¦ä¹ ï¼ˆEnsemble Learningï¼‰å°±æ˜¯é€šè¿‡æŸç§ç­–ç•¥å°†å¤šä¸ªæ¨¡å‹é›†æˆèµ·æ¥ï¼Œé€šè¿‡ç¾¤ä½“å†³ç­–æ¥æé«˜å†³ç­–å‡†ç¡®ç‡ã€‚é›†æˆå­¦ä¹ é¦–è¦çš„é—®é¢˜æ˜¯å¦‚ä½•é›†æˆå¤šä¸ªæ¨¡å‹ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„é›†æˆç­–ç•¥æœ‰ç›´æ¥å¹³å‡ã€åŠ æƒå¹³å‡ç­‰ã€‚\n\n**é›†æˆå­¦ä¹ å¯ä»¥åˆ†ä¸ºï¼šBoostingã€Baggingã€Stacking**ï¼Œè¿™ä¸‰ç§çš„è¯¦ç»†åŒºåˆ†å’Œæµç¨‹å¯ä»¥å‚è€ƒã€Š[æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜](https://item.jd.com/12671716.html)ã€‹ä¸€ä¹¦ä¸­ç¬¬å…«ç«  ç‚¹å‡»ç‡é¢„ä¼°éƒ¨åˆ†ã€‚æœ¬æ–‡ä¸­ä¸»è¦ä»‹ç»é›†æˆå­¦ä¹ ä¸­çš„Boostingå­¦ä¹ å’ŒAdaBoostç®—æ³•ã€‚\n\né›†æˆå­¦ä¹ çš„æ€æƒ³å¯ä»¥é‡‡ç”¨ä¸€å¥å¤è€çš„è°šè¯­æ¥æè¿°ï¼šâ€œä¸‰ä¸ªè‡­çš®åŒ ï¼Œé¡¶ä¸ªè¯¸è‘›äº®â€ã€‚ä½†æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„é›†æˆéœ€è¦å„ä¸ªåŸºæ¨¡å‹çš„å·®å¼‚å°½å¯èƒ½çš„å¤§ã€‚ä¸ºäº†å¢åŠ æ¨¡å‹ä¹‹é—´çš„å·®å¼‚æ€§ï¼Œå¯ä»¥é‡‡å–Baggingç±»å’ŒBoostingç±»ä¸¤ç±»æ–¹æ³•ã€‚\n\n#### Baggingç±»æ–¹æ³•\nBaggingç±»æ–¹æ³•æ˜¯é€šè¿‡éšæœºæ„é€ è®­ç»ƒæ ·æœ¬ã€éšæœºé€‰æ‹©ç‰¹å¾ç­‰æ–¹æ³•æ¥æé«˜æ¯ä¸ªåŸºæ¨¡å‹çš„ç‹¬ç«‹æ€§ï¼Œä»£è¡¨æ€§æ–¹æ³•æœ‰Baggingå’Œéšæœºæ£®æ—ã€‚\n\n- Baggingï¼ˆBootstrap Aggregatingï¼‰æ˜¯ä¸€ä¸ªé€šè¿‡ä¸åŒæ¨¡å‹çš„è®­ç»ƒæ•°æ®é›†çš„ç‹¬ç«‹æ€§æ¥æé«˜ä¸åŒæ¨¡å‹ä¹‹é—´çš„ç‹¬ç«‹æ€§ã€‚æˆ‘ä»¬åœ¨åŸå§‹è®­ç»ƒé›†ä¸Šè¿›è¡Œæœ‰æ”¾å›çš„éšæœºé‡‡æ ·ï¼Œå¾—åˆ°Mæ¯”è¾ƒå°çš„è®­ç»ƒé›†å¹¶è®­ç»ƒMä¸ªæ¨¡å‹ï¼Œç„¶åé€šè¿‡æŠ•ç¥¨çš„æ–¹æ³•è¿›è¡Œæ¨¡å‹é›†æˆã€‚\n- éšæœºæ£®æ—ï¼ˆRandom Forestï¼‰æ˜¯åœ¨Baggingçš„åŸºç¡€ä¸Šå†å¼•å…¥äº†éšæœºç‰¹å¾ï¼Œè¿›ä¸€æ­¥æå‡æ¯ä¸ªåŸºæ¨¡å‹ä¹‹é—´çš„ç‹¬ç«‹æ€§ã€‚åœ¨éšæœºæ£®æ—ä¸­ï¼Œæ¯ä¸ªåŸºæ¨¡å‹éƒ½æ˜¯ä¸€æ£µæ ‘ã€‚\n\néšæœºæ£®æ—çš„ç®—æ³•æ­¥éª¤å¦‚ä¸‹ï¼š\n\n- ä»æ ·æœ¬é›†ä¸­é€šè¿‡é‡é‡‡æ ·çš„æ–¹å¼äº§ç”Ÿnä¸ªæ ·æœ¬\n- å‡è®¾æ ·æœ¬ç‰¹å¾æ•°ç›®ä¸ºaï¼Œå¯¹nä¸ªæ ·æœ¬é€‰æ‹©aä¸­çš„kä¸ªç‰¹å¾ï¼Œç”¨å»ºç«‹å†³ç­–æ ‘çš„æ–¹å¼è·å¾—æœ€ä½³åˆ†å‰²ç‚¹\n- é‡å¤mæ¬¡ï¼Œäº§ç”Ÿmæ£µå†³ç­–æ ‘\n-å¤šæ•°æŠ•ç¥¨æœºåˆ¶æ¥è¿›è¡Œé¢„æµ‹\n> éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œè¿™é‡Œmæ˜¯æŒ‡å¾ªç¯çš„æ¬¡æ•°ï¼Œnæ˜¯æŒ‡æ ·æœ¬çš„æ•°ç›®ï¼Œnä¸ªæ ·æœ¬æ„æˆè®­ç»ƒçš„æ ·æœ¬é›†ï¼Œè€Œmæ¬¡å¾ªç¯ä¸­åˆä¼šäº§ç”Ÿmä¸ªè¿™æ ·çš„æ ·æœ¬é›†\n\n#### Boostingç±»æ–¹æ³•\n\nBoostingç±»æ–¹æ³•æ˜¯æŒ‰ç…§ä¸€å®šçš„é¡ºåºæ¥å…ˆåè®­ç»ƒä¸åŒçš„åŸºæ¨¡å‹ï¼Œæ¯ä¸ªæ¨¡å‹éƒ½é’ˆå¯¹å‰ç»­æ¨¡å‹çš„é”™è¯¯è¿›è¡Œä¸“é—¨è®­ç»ƒã€‚æ ¹æ®å‰åºæ¨¡å‹çš„ç»“æœï¼Œæ¥æé«˜è®­ç»ƒæ ·æœ¬çš„æƒé‡ï¼Œä»è€Œå¢åŠ ä¸åŒåŸºæ¨¡å‹ä¹‹é—´çš„å·®å¼‚æ€§ã€‚Boostingç±»æ–¹æ³•çš„ä»£è¡¨æ€§æ–¹æ³•æœ‰AbaBoostï¼ŒGBDTï¼ŒXGBï¼ŒLightGBMç­‰ã€‚\n\nå…³äºGBDTçš„ä»‹ç»åŒæ ·å¯ä»¥å‚è€ƒã€Š[æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜](https://item.jd.com/12671716.html)ã€‹ä¸€ä¹¦ã€‚\n\nBoostingç±»é›†æˆæ¨¡å‹çš„ç›®æ ‡æ˜¯å­¦ä¹ ä¸€ä¸ªåŠ æ€§æ¨¡å‹ï¼ˆadditive modelï¼‰ ï¼Œå…¶è¡¨è¾¾å¼å¦‚ä¸‹ï¼š\n$$\nF(x) = \\sum_{m=1}^{M} a_m f_m(x)\n$$\nå…¶ä¸­$f_m(x)$ä¸ºå¼±åˆ†ç±»å™¨ï¼Œæˆ–åŸºåˆ†ç±»å™¨ï¼Œ$a_m$ä¸ºå¼±åˆ†ç±»å™¨çš„é›†æˆæƒé‡ï¼Œ$F(x)$ç§°ä¸ºå¼ºåˆ†ç±»å™¨ã€‚\n\nBoostingç±»æ–¹æ³•çš„å…³é”®æ˜¯å¦‚ä½•è®­ç»ƒæ¯ä¸ªå¼±åˆ†ç±»å™¨$f_m(x)$ä»¥åŠå¯¹åº”çš„æƒé‡$a_m$ã€‚ä¸ºäº†æé«˜é›†æˆçš„æ•ˆæœï¼Œåº”å°½å¯èƒ½ä½¿å¾—æ¯ä¸ªå¼±åˆ†ç±»å™¨çš„å·®å¼‚å°½å¯èƒ½å¤§ã€‚ä¸€ç§æœ‰æ•ˆçš„æ–¹æ³•æ˜¯é‡‡ç”¨è¿­ä»£çš„ç­–ç•¥æ¥å­¦ä¹ æ¯ä¸ªå¼±åˆ†ç±»å™¨ï¼Œå³æŒ‰ç…§ä¸€å®šçš„é¡ºåºä¾æ¬¡è®­ç»ƒæ¯ä¸ªå¼±åˆ†ç±»å™¨ã€‚\n\nåœ¨å­¦ä¹ äº†ç¬¬mä¸ªå¼±åˆ†ç±»å™¨ä¹‹åï¼Œå¢åŠ åˆ†é”™æ ·æœ¬çš„æƒé‡ï¼Œä½¿å¾—ç¬¬$m+1$ä¸ªå¼±åˆ†ç±»å™¨â€œæ›´å…³æ³¨â€äºå‰è¾¹å¼±åˆ†ç±»å™¨åˆ†é”™çš„æ ·æœ¬ã€‚è¿™æ ·å¢åŠ æ¯ä¸ªå¼±åˆ†ç±»å™¨çš„å·®å¼‚ï¼Œæœ€ç»ˆæå‡çš„é›†æˆåˆ†ç±»å™¨çš„å‡†ç¡®ç‡ã€‚è¿™ç§æ–¹æ³•ç§°ä¸ºAdaBoostï¼ˆå…¶å®å…¶ä»–çš„Boostæ¨¡å‹é‡‡ç”¨çš„ä¹Ÿæ˜¯ç±»ä¼¼çš„ç­–ç•¥ï¼Œæ ¹æ®å‰m-1é¢—æ ‘çš„è¯¯å·®è¿­ä»£ç¬¬mé¢—æ ‘ï¼‰ã€‚\n\n#### AdaBoostç®—æ³•\n\nAdaBoostç®—æ³•æ˜¯ä¸€ç§è¿­ä»£å¼çš„è®­ç»ƒç®—æ³•ï¼Œé€šè¿‡æ”¹å˜æ•°æ®åˆ†å¸ƒæ¥æé«˜å¼±åˆ†ç±»å™¨çš„å·®å¼‚ã€‚åœ¨æ¯ä¸€è½®è®­ç»ƒä¸­ï¼Œå¢åŠ åˆ†é”™æ ·æœ¬çš„æƒé‡ï¼Œå‡å°‘å¯¹åˆ†å¯¹æ ·æœ¬çš„æƒé‡ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªæ–°çš„æ•°æ®åˆ†å¸ƒã€‚\n\nä»¥ä¸¤ç±»åˆ†ç±»ä¸ºä¾‹ï¼Œå¼±åˆ†ç±»å™¨$f_m(x) \\in \\{ +1, -1\\}$ï¼ŒAdaBoostç®—æ³•çš„è®­ç»ƒè¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼Œæœ€åˆèµ‹äºˆæ¯ä¸ªæ ·æœ¬åŒæ ·çš„æƒé‡ã€‚åœ¨æ¯ä¸€è½®è¿­ä»£ä¸­ï¼Œæ ¹æ®å½“å‰çš„æ ·æœ¬æƒé‡è®­ç»ƒä¸€ä¸ªæ–°çš„å¼±åˆ†ç±»å™¨ã€‚ç„¶åæ ¹æ®è¿™ä¸ªå¼±åˆ†ç±»å™¨çš„é”™è¯¯ç‡æ¥è®¡ç®—å…¶é›†æˆæƒé‡ï¼Œå¹¶è°ƒæ•´æ ·æœ¬æƒé‡ã€‚\n\n![AdaBoostç®—æ³•æµç¨‹](https://img-blog.csdnimg.cn/20191106144746194.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n**AdaBoostç®—æ³•çš„ç»Ÿè®¡å­¦è§£é‡Š**\n\nAdaBoostç®—æ³•å¯ä»¥çœ‹åšæ˜¯ä¸€ç§åˆ†æ­¥ä¼˜åŒ–çš„åŠ æ€§æ¨¡å‹ï¼Œå…¶æŸå¤±å‡½æ•°å®šä¹‰ä¸ºï¼š\n$$\nL(F) = exp(-y F(x))\n\\\\\n= exp(-y \\sum_{m=1}^{M} a_m f_m(x))\n$$\nå…¶ä¸­$y,f_m(x)\\in \\{ +1,-1\\}$\n\nå‡è®¾ç»è¿‡$m-1$æ¬¡è¿­ä»£ï¼Œå¾—åˆ°ï¼š\n$$\nF_{m-1}(x) = \\sum_{t=1}^{T} a_t f_t(x)\n$$\nåˆ™ç¬¬$m$æ¬¡è¿­ä»£çš„ç›®æ ‡æ˜¯æ‰¾ä¸€ä¸ª$a_m$å’Œ$f_m(x)$ä½¿å¾—ä¸‹é¢çš„æŸå¤±å‡½æ•°æœ€å°ã€‚\n$$\nL(a_m,f_m(x)) = \\sum_{n=1}^{N}exp(-y^{(n)} (F_{m-1} (x^{(n)}) + a_m f_m(x^{(n)})))\n$$\nä»¤ $w_m^{(n)}=exp(-y^{(n)} F_{m-1}(x^{(n)}))$ï¼Œåˆ™æŸå¤±å‡½æ•°å¯ä»¥è¡¨ç¤ºä¸ºï¼š\n$$\nL(a_m,f_m(x)) = \\sum_{n=1}^{N} w_m^{(n)} exp(-y^{(n)} a_m f_m(x^{(n)}))\n$$\nå› ä¸º$y,f_m(x) \\in {+1, -1}$ï¼Œæœ‰ï¼š\n$$\nyf_m(x) = 1-2I(y\\neq f_m(x))\n$$\nå…¶ä¸­$I(x)$ä¸ºæŒ‡ç¤ºå‡½æ•°ã€‚\n\nå°†æŸå¤±å‡½æ•°åœ¨$f_m(x)=0$å¤„è¿›è¡ŒäºŒé˜¶æ³°å‹’å±•å¼€ï¼Œæœ‰ï¼š\n$$\nL(a_m, f_m(x)) = \\sum_{n=1}^{N} w_m^{(n)} (  1 - a_m y^{(n)}f_m(x^{(n)}) + \\frac{1}{2}a_m^2  ) \n\\\\\n\\propto a_m \\sum_{n=1}^{N} w_n^{(n)} I(y^{(n} \\neq f_m(x^{(n)})\n$$\nä»ä¸Šå¼å¯ä»¥çœ‹å‡ºï¼Œå½“$a_m>0$æ—¶ï¼Œæœ€ä¼˜çš„åˆ†ç±»å™¨$f_m(x)$ä¸ºä½¿å¾—åœ¨æ ·æœ¬æƒé‡ä¸º$w_m^{(n)}, 1 \\leq n \\leq N$æ—¶çš„åŠ æƒé”™è¯¯ç‡æœ€å°çš„åˆ†ç±»å™¨ã€‚\n\nåœ¨æ±‚è§£å‡º$f_m(x)$ä¹‹åï¼Œä¸Šè¿°çš„æŸå¤±å‡½æ•°å¯ä»¥å†™ä¸ºï¼š\n$$\nL(a_m, f_m(x)) = \\sum_{y^{(n)}=f_m(x^{(n)})} w_m^{(n)} exp(-a_m) + \\sum_{y^{(n)} \\neq f_m(x^{(n)})}  w_m^{(n)} exp(a_m) \n\\\\\n\\propto (1-\\epsilon _m) exp(-a_m) + \\epsilon_m exp(a_m)\n$$\nå…¶ä¸­$\\epsilon_m$ä¸ºåˆ†ç±»å™¨$f_m(x)$çš„åŠ æƒé”™è¯¯ç‡\n$$\n\\epsilon_m = \\frac { \\sum_{ y^{(n)} \\neq f_m(x^{(n)}) } w_m^{(n)} } {\\sum_{n} w_m^{(n)}}\n$$\næ±‚ä¸Šå¼å…³äº$a_m$çš„å¯¼æ•°å¹¶ä»¤å…¶ä¸º0ï¼Œå¾—åˆ°\n$$\na_m = \\frac {1}{2} log \\frac {1-\\epsilon_m}{\\epsilon_m}\n$$\n\n\n**AdaBoostç®—æ³•çš„ä¼˜ç¼ºç‚¹**\nä¼˜ç‚¹ï¼š\n\n- ä½œä¸ºåˆ†ç±»å™¨ç²¾åº¦å¾ˆé«˜\n- å¯ä»¥ä½¿ç”¨å„ç§ç®—æ³•æ„å»ºå­åˆ†ç±»å™¨ï¼ŒAdaBoostæä¾›çš„æ˜¯ä¸€ä¸ªæ¡†æ¶\n- ä½¿ç”¨ç®€å•åˆ†ç±»å™¨æ—¶ï¼Œè®¡ç®—å‡ºçš„ç»“æœå¯ç†è§£ï¼Œä¸”æ„é€ ç®€å•\n- ä¸éœ€è¦åšç‰¹å¾ç­›é€‰\n- ä¸åŒæ‹…å¿ƒè¿‡æ‹Ÿåˆ\n\nç¼ºç‚¹ï¼š\n\n- å®¹æ˜“æ”¶åˆ°å™ªå£°å¹²æ‰°\n- è®­ç»ƒæ—¶é—´é•¿ï¼Œå› ä¸ºéœ€è¦éå†æ‰€æœ‰ç‰¹å¾\n- æ‰§è¡Œæ•ˆæœä¾èµ–äºå¼±åˆ†ç±»å™¨çš„é€‰æ‹©\n\n### è‡ªè®­ç»ƒå’ŒååŒè®­ç»ƒ\n\nç›‘ç£å­¦ä¹ è™½ç„¶å‡†ç¡®åº¦ä¸Šæœ‰ä¸€å®šçš„ä¿è¯ï¼Œä½†å¾€å¾€éœ€è¦å¤§é‡çš„è®­ç»ƒæ•°æ®ï¼Œä½†åœ¨ä¸€äº›åœºæ™¯ä¸­æ ‡æ³¨æ•°æ®çš„æˆæœ¬æ˜¯éå¸¸é«˜çš„ï¼Œå› æ­¤å¦‚ä½•åˆ©ç”¨å¤§é‡çš„æ— æ ‡æ³¨æ•°æ®æé«˜ç›‘ç£å­¦ä¹ çš„æ•ˆç‡ï¼Œæœ‰ç€ååˆ†é‡è¦çš„æ„ä¹‰ã€‚è¿™ç§åˆ©ç”¨å°‘é‡æ ·æœ¬æ ‡æ³¨æ•°æ®å’Œå¤§é‡æ ·æœ¬æ ‡æ³¨æ•°æ®è¿›è¡Œå­¦ä¹ çš„æ–¹å¼ç§°ä¹‹ä¸ºåŠç›‘ç£å­¦ä¹ ï¼ˆSemi-Supervised Learningï¼ŒSSLï¼‰ã€‚\n\næœ¬èŠ‚ä»‹ç»ä¸¤ç§æ— ç›‘ç£çš„å­¦ä¹ ç®—æ³•ï¼šè‡ªè®­ç»ƒå’ŒååŒè®­ç»ƒã€‚\n\n#### è‡ªè®­ç»ƒ\nè‡ªè®­ç»ƒï¼ˆSlef-Trainingï¼‰ä¹Ÿå«è‡ªè®­ç»ƒï¼ˆSelf-teachingï¼‰æˆ–è€…è‡ªä¸¾æ³•ï¼ˆboostStrappingï¼‰ã€‚\n\nè‡ªè®­ç»ƒçš„æ€è·¯æ˜¯ï¼šåˆ©ç”¨å·²çŸ¥çš„æ ‡æ³¨æ•°æ®è®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œåˆ©ç”¨è¯¥æ¨¡å‹å»é¢„æµ‹æ— æ ‡æ³¨çš„æ ·æœ¬æ•°æ®ï¼Œç„¶åå°†ç½®ä¿¡åº¦è¾ƒé«˜çš„æ ·æœ¬ä»¥åŠå…¶ä¼ªæ ‡ç­¾åŠ å…¥è®­ç»ƒé›†ï¼Œç„¶åé‡æ–°è®­ç»ƒæ¨¡å‹ï¼Œè¿›è¡Œè¿­ä»£ã€‚ä¸‹å›¾ç»™å‡ºäº†è‡ªè®­ç»ƒçš„ç®—æ³•è¿‡ç¨‹ã€‚\n\n![è‡ªè®­ç»ƒç®—æ³•è¿‡ç¨‹](https://img-blog.csdnimg.cn/20191109150434700.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nè‡ªè®­ç»ƒå’Œå¯†åº¦ä¼°è®¡ä¸­EMç®—æ³•æœ‰ä¸€å®šçš„ç›¸ä¼¼ä¹‹å¤„ï¼Œé€šè¿‡ä¸æ–­åœ°è¿­ä»£æ¥æé«˜æ¨¡å‹èƒ½åŠ›ã€‚ä½†è‡ªè®­ç»ƒçš„ç¼ºç‚¹æ˜¯æ— æ³•ä¿è¯æ¯æ¬¡åŠ å…¥è®­ç»ƒé›†çš„æ ·æœ¬çš„ä¼ªæ ‡ç­¾æ˜¯æ­£ç¡®çš„ã€‚å¦‚æœé€‰æ‹©æ ·æœ¬çš„ä¼ªæ ‡ç­¾æ˜¯é”™è¯¯çš„ï¼Œåè€Œä¼šæŸå®³æ¨¡å‹çš„é¢„æµ‹èƒ½åŠ›ã€‚å› æ­¤è‡ªè®­ç»ƒæœ€å…³é”®çš„æ­¥éª¤æ˜¯å¦‚ä½•è®¾ç½®æŒ‘é€‰æ ·æœ¬çš„æ ‡å‡†ã€‚\n\n#### ååŒè®­ç»ƒ\nååŒè®­ç»ƒï¼ˆCo-Trainingï¼‰æ˜¯è‡ªè®­ç»ƒçš„ä¸€ç§æ”¹è¿›æ–¹æ³•ï¼Œé€šè¿‡ä¸¤ä¸ªåŸºäºä¸åŒè§†è§’çš„åˆ†ç±»å™¨æ¥ç›¸äº’ä¿ƒè¿›ã€‚å¾ˆå¤šæ•°æ®éƒ½æœ‰ç›¸å¯¹ç‹¬ç«‹çš„ä¸åŒè§†è§’ã€‚æ¯”å¦‚äº’è”ç½‘ä¸Šçš„æ¯ä¸ªç½‘é¡µéƒ½ç”±ä¸¤ç§è§†è§’ç»„æˆï¼šæ–‡å­—å†…å®¹å’ŒæŒ‡å‘å…¶ä»–ç½‘é¡µçš„é“¾æ¥ã€‚å¦‚æœè¦ç¡®å®šä¸€ä¸ªç½‘é¡µçš„ç±»åˆ«ï¼Œå¯ä»¥æ ¹æ®æ–‡å­—å†…å®¹æ¥åˆ¤æ–­ï¼Œä¹Ÿå¯ä»¥æ ¹æ®ç½‘é¡µä¹‹é—´çš„é“¾æ¡å…³ç³»æ¥åˆ¤æ–­ã€‚\n\nå‡è®¾ä¸€ä¸ªæ ·æœ¬$x=[x_1,x_2]$ï¼Œå…¶ä¸­$x_1,x_2$åˆ†åˆ«è¡¨ç¤ºä¸¤ç§ä¸åŒè§†è§’$V_1,V_2$çš„ç‰¹å¾ï¼Œå¹¶æ»¡è¶³ä¸‹é¢ä¸¤ä¸ªå‡è®¾ï¼š\n- ï¼ˆ1ï¼‰ï¼šæ¡ä»¶ç‹¬ç«‹æ€§ï¼Œå³ç»™å®šæ ·æœ¬æ ‡ç­¾yæ—¶ï¼Œä¸¤ç§ç‰¹å¾æ¡ä»¶ç‹¬ç«‹$p(x_1,x_2|y)=p(x_1|y)p(x_2|y)$\n- ï¼ˆ2ï¼‰ï¼šå……è¶³å’Œå†—ä½™æ€§ï¼Œå³å½“æ•°æ®å……åˆ†æ—¶ï¼Œæ¯ç§è§†è§’çš„ç‰¹å¾éƒ½å¯ä»¥è¶³ä»¥å•ç‹¬è®­ç»ƒå‡ºä¸€ä¸ªæ­£ç¡®çš„åˆ†ç±»å™¨ã€‚\n\nä»¤$y=g(x)$ä¸ºéœ€è¦å­¦ä¹ çš„çœŸå®æ˜ å°„å‡½æ•°ï¼Œ$f_1$å’Œ$f_2$åˆ†åˆ«ä¸ºä¸¤ä¸ªè§†è§’çš„åˆ†ç±»å™¨ï¼Œæœ‰ï¼š\n$$\n\\exists f_1, f_2,    \\forall x \\in X,\\,\\,\\,\\,\\, f_1(x_1) = f_2(x_2) = g(x)\n$$\nå…¶ä¸­$X$ä¸ºæ ·æœ¬$x$çš„å–å€¼ç©ºé—´ã€‚\n\nç”±äºä¸åŒè§†è§’çš„æ¡ä»¶ç‹¬ç«‹æ€§ï¼Œåœ¨ä¸åŒè§†è§’ä¸Šè®­ç»ƒå‡ºæ¥çš„æ¨¡å‹å°±ç›¸å½“äºä»ä¸åŒçš„è§†è§’æ¥ç†è§£é—®é¢˜ï¼Œå…·æœ‰ä¸€å®šçš„äº’è¡¥æ€§ã€‚ååŒè®­ç»ƒå°±æ˜¯åˆ©ç”¨è¿™ç§äº’è¡¥è¡Œæ¥è¿›è¡Œè‡ªè®­ç»ƒçš„ä¸€ç§æ–¹æ³•ã€‚é¦–å…ˆåœ¨è®­ç»ƒé›†ä¸Šæ ¹æ®ä¸åŒè§†è§’åˆ†åˆ«è®­ç»ƒä¸¤ä¸ªæ¨¡å‹$f_1$å’Œ$f_2$ç„¶åç”¨$f_1$å’Œ$f_2$åœ¨æ— æ ‡è®°æ•°æ®é›†ä¸Šè¿›è¡Œé¢„æµ‹ï¼Œå„é€‰å–é¢„æµ‹ç½®ä¿¡åº¦æ¯”è¾ƒé«˜çš„æ ·æœ¬åŠ å…¥åˆ°è®­ç»ƒé›†ï¼Œé‡æ–°è®­ç»ƒä¸¤ä¸ªä¸åŒè§†è§’çš„æ¨¡å‹ï¼Œå¹¶ä¸æ–­é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼ˆéœ€è¦æ³¨æ„çš„æ˜¯ååŒç®—æ³•è¦æ±‚ä¸¤ç§è§†å›¾æ—¶æ¡ä»¶ç‹¬ç«‹çš„ï¼Œå¦‚æœä¸¤ç§è§†å›¾å®Œå…¨ä¸€æ ·ï¼Œåˆ™ååŒè®­ç»ƒé€€åŒ–æˆè‡ªè®­ç»ƒç®—æ³•ï¼‰ã€‚\n\nååŒè®­ç»ƒçš„ç®—æ³•è¿‡ç¨‹å¦‚ä¸‹ï¼š\n![ååŒè®­ç»ƒçš„ç®—æ³•è¿‡ç¨‹](https://img-blog.csdnimg.cn/20191109153310892.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n### å¤šä»»åŠ¡å­¦ä¹ \nä¸€èˆ¬çš„æœºå™¨å­¦ä¹ æ¨¡å‹æ˜¯é’ˆå¯¹å•ä¸ªä»»åŠ¡è¿›è¡Œçš„ï¼Œä¸åŒä»»åŠ¡çš„æ¨¡å‹éœ€è¦åœ¨å„è‡ªçš„è®­ç»ƒé›†ä¸Šå•ç‹¬å­¦ä¹ å¾—åˆ°ã€‚è€Œå¤šä»»åŠ¡å­¦ä¹ ï¼ˆMulti-task learningï¼‰æ˜¯æŒ‡åŒæ—¶å­¦ä¹ å¤šä¸ªç›¸å…³ä»»åŠ¡ï¼Œè®© è¿™äº›ä»»åŠ¡åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­å…±äº«çŸ¥è¯†ï¼Œåˆ©ç”¨å¤šä¸ªä»»åŠ¡ä¹‹é—´çš„ç›¸å…³æ€§æ¥æ”¹è¿›æ¨¡å‹çš„æ€§èƒ½å’Œæ³›åŒ–èƒ½åŠ›ã€‚\n\nå¤šä»»åŠ¡å­¦ä¹ å¯ä»¥çœ‹åšæ—¶ä¸€ç§å½’çº³è¿ç§»å­¦ä¹ ï¼ˆInductive Transfer Learningï¼‰ï¼Œå³é€šè¿‡åˆ©ç”¨åŒ…å«åœ¨ç›¸å…³ä»»åŠ¡ä¸­çš„ä¿¡æ¯ä½œä¸ºå½’çº³åç½®ï¼ˆInductive Biasï¼‰æ¥æé«˜æ³›åŒ–èƒ½åŠ›ã€‚\n\n**å¤šä»»åŠ¡å­¦ä¹ çš„ä¸»è¦æŒ‘æˆ˜åœ¨äºå¦‚ä½•è®¾è®¡å¤šä»»åŠ¡ä¹‹é—´çš„å…±äº«æœºåˆ¶**ï¼Œåœ¨ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ ä»»åŠ¡ä¸­å¾ˆéš¾å¼•å…¥å…±äº«ä¿¡æ¯ï¼Œä½†æ˜¯åœ¨ç¥ç»ç½‘ç»œä¸­å°±å˜å¾—ç®€å•äº†è®¸å¤šï¼Œå¸¸è§çš„ä»¥ä¸‹å››ç§ï¼š\n\n- **ç¡¬å…±äº«æ¨¡å¼**ï¼šè®©ä¸åŒä»»åŠ¡çš„ç¥ç»ç½‘ç»œæ¨¡å‹å…±åŒä½¿ç”¨ä¸€äº›å…±äº«æ¨¡å—æ¥æå–ä¸€äº›é€šç”¨çš„ç‰¹å¾ï¼Œç„¶åå†é’ˆå¯¹æ¯ä¸ªä¸åŒçš„ä»»åŠ¡è®¾ç½®ä¸€äº›ç§æœ‰æ¨¡å—æ¥æå–ä¸€äº›ä»»åŠ¡ç‰¹å®šçš„ç‰¹å¾ã€‚\n- **è½¯å…±äº«æ¨¡å¼**ï¼šä¸æ˜¾å¼è®¾ç½®å…±äº«æ¨¡å—ï¼Œä½†æ¯ä¸ªä»»åŠ¡éƒ½å¯ä»¥ä»å…¶ä»–ä»»åŠ¡ä¸­â€œçªƒå–â€ä¸€äº›ä¿¡æ¯æ¥æé«˜è‡ªå·±çš„èƒ½åŠ›ã€‚çªƒå–çš„æ–¹å¼åŒ…æ‹¬ç›´æ¥å¤åˆ¶ä½¿ç”¨å…¶ä»–ä»»åŠ¡çš„éšçŠ¶æ€ï¼Œæˆ–ä½¿ç”¨æ³¨æ„åŠ›æœºåˆ¶æ¥ä¸»åŠ¨é€‰æ‹©æœ‰ç”¨çš„ä¿¡æ¯ã€‚\n- **å±‚æ¬¡å…±äº«æ¨¡å¼**ï¼šä¸€èˆ¬ç¥ç»ç½‘ç»œä¸­ä¸åŒå±‚æŠ½å–çš„ç‰¹å¾ç±»å‹ä¸åŒï¼Œåº•å±‚ä¸€èˆ¬æŠ½å–ä¸€äº›ä½çº§çš„å±€éƒ¨ç‰¹å¾ï¼Œé«˜å±‚æŠ½å–ä¸€äº›é«˜çº§çš„æŠ½è±¡è¯­ä¹‰ç‰¹å¾ã€‚å› æ­¤å¦‚æœå¤šä»»åŠ¡å­¦ä¹ ä¸­ä¸åŒä»»åŠ¡ä¹Ÿæœ‰çº§åˆ«é«˜ä½ä¹‹åˆ†ï¼Œé‚£ä¹ˆä¸€ä¸ªåˆç†çš„å…±äº«æ¨¡å¼æ˜¯è®©ä½çº§ä»»åŠ¡åœ¨åº•å±‚è¾“å‡ºï¼Œé«˜çº§ä»»åŠ¡åœ¨é«˜å±‚è¾“å‡ºã€‚\n- **å…±äº«-ç§æœ‰æ¨¡å¼**ï¼šä¸€ä¸ªæ›´åŠ åˆ†å·¥æ˜ç¡®çš„æ–¹å¼æ˜¯å°†å…±äº«æ¨¡å—å’Œä»»åŠ¡ç‰¹å®šï¼ˆç§æœ‰ï¼‰æ¨¡å—çš„è´£ä»»åˆ†å¼€ã€‚å…±äº«æ¨¡å—æ•æ‰ä¸€äº›è·¨ä»»åŠ¡çš„å…±äº«ç‰¹å¾ï¼Œè€Œç§æœ‰æ¨¡å—åªæ•æ‰å’Œç‰¹ç‚¹ä»»åŠ¡ç›¸å…³çš„ç‰¹å¾ã€‚æœ€ç»ˆçš„è¡¨ç¤ºç”±å…±äº«ç‰¹å¾å’Œç§æœ‰ç‰¹å¾å…±åŒæ„æˆã€‚\n\nåœ¨å¤šä»»åŠ¡å­¦ä¹ ä¸­ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½å¯ä»¥æœ‰è‡ªå·±å•ç‹¬çš„è®­ç»ƒé›†ã€‚ä¸ºäº†è®©æ‰€æœ‰ä»»åŠ¡åŒæ—¶å­¦ä¹ ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨äº¤æ›¿è®­ç»ƒçš„æ–¹å¼æ¥â€œè¿‘ä¼¼â€çš„å®ç°åŒæ—¶å­¦ä¹ ï¼Œä¸‹å›¾ç»™å‡ºäº†å››ç§å¸¸è§çš„å…±äº«æ¨¡å¼å›¾\n\n![å››ç§å¸¸è§çš„å…±äº«æ¨¡å¼å›¾](https://img-blog.csdnimg.cn/20191112101743882.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nå¤šä»»åŠ¡å­¦ä¹ çš„æµç¨‹å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š\n\n- ï¼ˆ1ï¼‰è”åˆè®­ç»ƒé˜¶æ®µï¼šæ¯æ¬¡è¿­ä»£æ—¶ï¼ŒéšæœºæŒ‘é€‰ä¸€ä¸ªä»»åŠ¡ï¼Œç„¶åä»è¿™ä¸ªä»»åŠ¡ä¸­éšæœºé€‰æ‹©ä¸€äº›è®­ç»ƒæ ·æœ¬ï¼Œè®¡ç®—æ¢¯åº¦å¹¶æ›´æ–°å‚æ•°\n- ï¼ˆ2ï¼‰å•ä»»åŠ¡ç²¾è°ƒé˜¶æ®µï¼šåŸºäºå¤šä»»åŠ¡å­¦ä¹ åˆ°çš„å‚æ•°ï¼Œåˆ†åˆ«åœ¨æ¯ä¸ªå•ç‹¬ä»»åŠ¡è¿›è¡Œç²¾è°ƒï¼Œå…¶ä¸­å•ä»»åŠ¡ç²¾è°ƒé˜¶æ®µä¸ºå¯é€‰é˜¶æ®µã€‚å½“å¤šä¸ªä»»åŠ¡çš„å·®å¼‚æ€§æ¯”è¾ƒå¤§æ—¶ï¼Œåœ¨æ¯ä¸ªå•ä»»åŠ¡ä¸Šç»§ç»­ä¼˜åŒ–å‚æ•°å¯ä»¥è¿›ä¸€æ­¥æå‡æ¨¡å‹èƒ½åŠ›ã€‚\n\nå‡è®¾æœ‰Mä¸ªç›¸å…³ä»»åŠ¡ï¼Œå…¶æ¨¡å‹åˆ†åˆ«ä¸º$f_m(x,\\theta), 1\\leq m \\leq M$ï¼Œå¤šä»»åŠ¡å­¦ä¹ çš„è”åˆç›®æ ‡å‡½æ•°ä¸ºæ‰€æœ‰ä»»åŠ¡æŸå¤±å‡½æ•°çš„çº¿æ€§åŠ æƒï¼š\n$$\nL(\\theta) = \\sum_{m=1}^{M}\\sum_{n=1}^{N_m} \\eta_m l_m(f_m(x^{(m,n)}, \\theta ), y_{(m,n)})\n$$\n\nå…¶ä¸­$l_m$ä¸ºç¬¬mä¸ªä»»åŠ¡çš„æŸå¤±å‡½æ•°ï¼Œ$\\eta_m$æ˜¯ç¬¬mä¸ªä»»åŠ¡çš„æƒé‡ï¼Œ$\\theta$è¡¨ç¤ºåŒ…å«äº†å…±äº«æ¨¡å—å’Œç§æœ‰æ¨¡å—åœ¨å†…çš„æ‰€æœ‰å‚æ•°ã€‚\n\nå¤šä»»åŠ¡å­¦ä¹ ä¸­è”åˆè®­ç»ƒé˜¶æ®µçš„å…·ä½“è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š\n![å¤šä»»åŠ¡å­¦ä¹ ä¸­è”åˆè®­ç»ƒé˜¶æ®µçš„å…·ä½“è¿‡ç¨‹](https://img-blog.csdnimg.cn/20191112102456841.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nå¤šä»»åŠ¡å­¦ä¹ é€šå¸¸æ¯”å•ä»»åŠ¡å­¦ä¹ è·å¾—æ›´å¥½çš„æ³›åŒ–èƒ½åŠ›ï¼Œä¸»è¦ç”±äºä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š\n\n- 1.å¤šä»»åŠ¡å­¦ä¹ åœ¨å¤šä¸ªæ•°æ®é›†ä¸Šè¿›è¡Œè®­ç»ƒï¼Œè®­ç»ƒé›†èŒƒå›´æ›´å¤§ï¼Œä¸”å¤šä»»åŠ¡ä¹‹é—´å…·æœ‰ä¸€å®šçš„ç›¸å…³æ€§ï¼Œç›¸å½“äºæ˜¯ä¸€ç§éšå¼çš„æ•°æ®å¢å¼ºï¼Œå¯ä»¥æé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚\n- 2.å¤šä»»åŠ¡å­¦ä¹ ä¸­çš„å…±äº«æ¨¡å—éœ€è¦å…¼é¡¾æ‰€æœ‰ä»»åŠ¡ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šé¿å…äº†æ¨¡å‹è¿‡æ‹Ÿåˆåˆ°å•ä¸ªä»»åŠ¡çš„è®­ç»ƒé›†ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ç§æ­£åˆ™åŒ–ã€‚\n- 3.å¤šä»»åŠ¡å­¦ä¹ æ¯”å•ä»»åŠ¡å­¦ä¹ å¯ä»¥è·å¾—æ›´å¥½çš„è¡¨ç¤º\n- 4.åœ¨å¤šä»»åŠ¡å­¦ä¹ ä¸­ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½å¯ä»¥â€œé€‰æ‹©æ€§â€åˆ©ç”¨å…¶ä»–ä»»åŠ¡ä¸­å­¦ä¹ åˆ°çš„éšè—ç‰¹å¾ï¼Œä»è€Œæé«˜è‡ªèº«çš„èƒ½åŠ›ã€‚\n\n### è¿ç§»å­¦ä¹ \næ ‡å‡†æœºå™¨å­¦ä¹ çš„å‰æå‡è®¾åªè®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®çš„åˆ†å¸ƒæ˜¯ç›¸åŒçš„ã€‚å¦‚æœä¸æ»¡è¶³è¿™ä¸ªå‡è®¾ï¼Œåœ¨è®­ç»ƒé›†ä¸Šå­¦ä¹ åˆ°çš„æ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šçš„è¡¨ç°ä¼šæ¯”è¾ƒå·®ã€‚å¦‚ä½•å°†ç›¸å…³ä»»åŠ¡çš„è®­ç»ƒæ•°æ®ä¸­å­¦ä¹ åˆ°çš„å¯æ³›åŒ–çŸ¥è¯†è¿ç§»åˆ°ç›®æ ‡ä»»åŠ¡ä¸­ï¼Œå°±æ˜¯è¿ç§»å­¦ä¹ ï¼ˆTransfer Learningï¼‰è¦è§£å†³çš„é—®é¢˜ã€‚\n\nè¿ç§»å­¦ä¹ æ ¹æ®ä¸åŒçš„è¿ç§»æ–¹å¼åˆåˆ†ä¸ºä¸¤ä¸ªç±»å‹ï¼šå½’çº³è¿ç§»å­¦ä¹ ï¼ˆInductive Transfer Learningï¼‰å’Œæ¨å¯¼è¿ç§»å­¦ä¹ ï¼ˆTransductive Transfer Learningï¼‰ã€‚è¿™ä¸¤ä¸ªç±»å‹åˆ†åˆ«å¯¹åº”ä¸¤ä¸ªæœºå™¨å­¦ä¹ çš„èŒƒå¼ï¼šå½’çº³å­¦ä¹ ï¼ˆInductive Learningï¼‰å’Œè½¬å¯¼å­¦ä¹ ï¼ˆTransductive Learningï¼‰ã€‚ä¸€èˆ¬çš„æœºå™¨å­¦ä¹ ä»»åŠ¡éƒ½æ˜¯æŒ‡å½’çº³å­¦ä¹ ï¼Œå³å¸Œæœ›å†è®­ç»ƒé›†ä¸Šå­¦ä¹ åˆ°ä½¿å¾—æœŸæœ›é£é™©æœ€å°çš„æ¨¡å‹ã€‚è€Œè½¬å¯¼å­¦ä¹ çš„ç›®æ ‡æ˜¯å­¦ä¹ ä¸€ç§åœ¨ç»™å®šæµ‹è¯•é›†ä¸Šé”™è¯¯ç‡æœ€å°çš„æ¨¡å‹ï¼Œåœ¨è®­ç»ƒé˜¶æ®µå¯ä»¥åˆ©ç”¨æµ‹è¯•é›†çš„ä¿¡æ¯ã€‚\n\n#### å½’çº³è¿ç§»å­¦ä¹ \nä¸€èˆ¬è€Œè¨€ï¼Œå½’çº³è¿ç§»å­¦ä¹ è¦æ±‚æºé¢†åŸŸå’Œç›®æ ‡é¢†åŸŸæ—¶ç›¸å…³çš„ï¼Œå¹¶ä¸”æºé¢†åŸŸ$D_S$æœ‰å¤§é‡çš„è®­ç»ƒæ ·æœ¬ï¼Œè¿™äº›æ ·æœ¬å¯ä»¥æ˜¯æœ‰æ ‡æ³¨çš„æ ·æœ¬ä¹Ÿå¯ä»¥æ—¶æ— æ ‡æ³¨çš„æ ·æœ¬ã€‚\n- å½“æºé¢†åŸŸåªæœ‰å¤§é‡æ— æ ‡æ³¨æ•°æ®æ—¶ï¼Œæºä»»åŠ¡å¯ä»¥è½¬æ¢ä¸ºæ— ç›‘ç£å­¦ä¹ ä»»åŠ¡ï¼Œæ¯”å¦‚è‡ªç¼–ç å’Œå¯†åº¦ä¼°è®¡ï¼Œé€šè¿‡æ— ç›‘ç£ä»»åŠ¡å­¦ä¹ ä¸€ç§å¯è¿ç§»çš„è¡¨ç¤ºï¼Œç„¶åå°†è¿™äº›è¡¨ç¤ºè¿ç§»åˆ°ç›®æ ‡ä»»åŠ¡ä¸Šã€‚\n- å½“æºé¢†åŸŸæœ‰å¤§é‡çš„æ ‡æ³¨æ•°æ®æ—¶ï¼Œå¯ä»¥ç›´æ¥å°†æºé¢†åŸŸä¸Šè®­ç»ƒçš„æ¨¡å‹è¿ç§»åˆ°ç›®æ ‡é¢†åŸŸä¸Šã€‚\nå½’çº³è¿ç§»å­¦ä¹ ä¸€èˆ¬æœ‰ä¸‹é¢ä¸¤ç§è¿ç§»æ–¹å¼ï¼š\n\n- åŸºäºç‰¹å¾çš„æ–¹å¼ï¼šå°†é¢„è®­ç»ƒæ¨¡å‹çš„è¾“å‡ºæˆ–è€…ä¸­é—´éšè—å±‚çš„è¾“å‡ºä½œä¸ºç‰¹å¾ç›´æ¥åŠ å…¥åˆ°ç›®æ ‡ä»»åŠ¡å­¦ä¹ æ¨¡å‹ä¸­ã€‚ç›®æ ‡ä»»åŠ¡çš„å­¦ä¹ æ¨¡å‹å¯ä»¥æ—¶ä¸€èˆ¬çš„æµ…å±‚åˆ†ç±»å™¨ï¼ˆæ¯”å¦‚æ”¯æŒå‘é‡æœºç­‰ï¼‰æˆ–ä¸€ä¸ªæ–°çš„ç¥ç»ç½‘ç»œæ¨¡å‹ã€‚\n- ç²¾è°ƒçš„æ–¹å¼ï¼šåœ¨ç›®æ ‡ä»»åŠ¡ä¸Šå¤ç”¨é¢„è®­ç»ƒæ¨¡å‹çš„éƒ¨åˆ†å‚æ•°ï¼Œå¹¶å¯¹å…¶å‚æ•°è¿›è¡Œç²¾è°ƒã€‚\n\nå‡è®¾é¢„è®­ç»ƒçš„æ¨¡å‹æ˜¯ä¸€ä¸ªæ·±å±‚ç¥ç»ç½‘ç»œï¼Œä¸åŒå±‚çš„å¯è¿ç§»æ€§ä¹Ÿä¸å°½ç›¸åŒã€‚é€šå¸¸æ¥è¯´ç½‘ç»œçš„ä½å±‚å­¦ä¹ ä¸€äº›é€šç”¨çš„ä½å±‚ç‰¹å¾ï¼Œä¸­å±‚æˆ–è€…é«˜å±‚å­¦ä¹ æŠ½è±¡çš„é«˜çº§è¯­ä¹‰ç‰¹å¾ï¼Œè€Œæœ€åå‡ å±‚ä¸€èˆ¬å­¦ä¹ å’Œç‰¹å®šä»»åŠ¡ç›¸å…³çš„ç‰¹å¾ã€‚å› æ­¤æ ¹æ®ç›®æ ‡ä»»åŠ¡çš„è‡ªèº«ç‰¹ç‚¹ä»¥åŠå’Œæºä»»åŠ¡çš„ç›¸å…³æ€§ï¼Œå¯ä»¥é’ˆå¯¹æ€§çš„é€‰æ‹©é¢„è®­ç»ƒæ¨¡å‹çš„ä¸åŒå±‚æ¥è¿ç§»åˆ°ç›®æ ‡ä»»åŠ¡ä¸­ã€‚\n\nå°†é¢„è®­ç»ƒæ¨¡å‹è¿ç§»åˆ°ç›®æ ‡ä»»åŠ¡ä¸­é€šå¸¸ä¼šæ¯”ä»é›¶å¼€å§‹å­¦ä¹ çš„æ–¹å¼å¥½ï¼Œä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹ä¸‰ç‚¹ï¼š\n\n- ï¼ˆ1ï¼‰åˆå§‹æ¨¡å‹çš„æ€§èƒ½ä¸€èˆ¬æ¯”éšæœºåˆå§‹åŒ–çš„æ¨¡å‹è¦å¥½\n- ï¼ˆ2ï¼‰è®­ç»ƒæ—¶æ¨¡å‹çš„å­¦ä¹ é€Ÿåº¦æ¯”ä»é›¶å¼€å§‹å­¦ä¹ è¦å¿«ï¼Œæ”¶æ•›æ€§æ›´å¥½\n- ï¼ˆ3ï¼‰æ¨¡å‹çš„æœ€ç»ˆæ€§èƒ½æ›´å¥½ï¼Œå…·æœ‰æ›´å¥½çš„æ³›åŒ–æ€§\n\nå½’çº³è¿ç§»å­¦ä¹ å’Œå¤šä»»åŠ¡å­¦ä¹ ä¹Ÿæ¯”è¾ƒç±»ä¼¼ï¼Œä½†æ˜¯æœ‰ä¸‹é¢ä¸¤ç‚¹åŒºåˆ«ï¼š\n\n- ï¼ˆ1ï¼‰å¤šä»»åŠ¡å­¦ä¹ æ˜¯åŒæ—¶å­¦ä¹ å¤šä¸ªä¸åŒä»»åŠ¡ï¼Œè€Œå½’çº³è¿ç§»å­¦ä¹ é€šå¸¸åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œå³æºä»»åŠ¡ä¸Šçš„å­¦ä¹ é˜¶æ®µï¼Œå’Œç›®æ ‡ä»»åŠ¡ä¸Šçš„è¿ç§»å­¦ä¹ é˜¶æ®µ\n- ï¼ˆ2ï¼‰å½’çº³è¿ç§»å­¦ä¹ æ˜¯å•å‘çš„çŸ¥è¯†è¿ç§»ï¼Œå¸Œæœ›æé«˜æ¨¡å‹åœ¨ç›®æ ‡ä»»åŠ¡ä¸Šçš„æ€§èƒ½ï¼Œè€Œå¤šä»»åŠ¡å­¦ä¹ æ—¶å¸Œæœ›æé«˜æ‰€æœ‰ä»»åŠ¡çš„æ€§èƒ½ã€‚\n\n#### è½¬å¯¼è¿ç§»å­¦ä¹ \nè½¬å¯¼è¿ç§»å­¦ä¹ æ˜¯ä¸€ç§ä»æ ·æœ¬åˆ°æ ·æœ¬çš„è¿ç§»ï¼Œç›´æ¥åˆ©ç”¨æºé¢†åŸŸå’Œç›®æ ‡é¢†åŸŸçš„æ ·æœ¬è¿›è¡Œè¿ç§»å­¦ä¹ ã€‚è½¬å¯¼è¿ç§»å­¦ä¹ å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§ç‰¹æ®Šçš„è½¬å¯¼å­¦ä¹ ã€‚è½¬å¯¼è¿ç§»å­¦ä¹ é€šå¸¸å‡è®¾æºé¢†åŸŸæœ‰å¤§é‡çš„æ ‡æ³¨æ•°æ®ï¼Œè€Œç›®æ ‡é¢†åŸŸæ²¡æœ‰ï¼ˆæˆ–å°‘é‡ï¼‰çš„æ ‡æ³¨æ•°æ®ï¼Œä½†æ˜¯æœ‰å¤§é‡çš„æ— æ ‡æ³¨æ•°æ®ã€‚ç›®æ ‡é¢†åŸŸçš„æ•°æ®åœ¨è®­ç»ƒé˜¶æ®µæ˜¯å¯è§çš„ã€‚\n\nè½¬å¯¼è¿ç§»å­¦ä¹ çš„ä¸€ä¸ªå¸¸è§å­é—®é¢˜æ—¶é¢†åŸŸé€‚åº”ï¼ˆDomain Adaptationï¼‰ï¼Œåœ¨é¢†åŸŸé€‚åº”é—®é¢˜ä¸­ï¼Œä¸€èˆ¬å‡è®¾æºé¢†åŸŸå’Œç›®æ ‡é¢†åŸŸæœ‰ç›¸åŒçš„æ ·æœ¬ç©ºé—´ï¼Œä½†æ˜¯æ•°æ®åˆ†å¸ƒä¸åŒ$p_S(x,y) \\neq p_T(x,y)$ã€‚\n\næ ¹æ®è´å¶æ–¯å…¬å¼ï¼Œ$p(x,y)=p(x|y)p(y) = p(y|x)p(x)$ï¼Œå› æ­¤æ•°æ®åˆ†å¸ƒçš„ä¸ä¸€è‡´é€šå¸¸ç”±ä¸‰ç§æƒ…å†µé€ æˆã€‚\n\n- ï¼ˆ1ï¼‰åå˜é‡åç§»ï¼ˆCovariate Shiftï¼‰ï¼šæºé¢†åŸŸå’Œç›®æ ‡é¢†åŸŸçš„è¾“å…¥è¾¹é™…åˆ†å¸ƒä¸åŒ$p_S(x) \\neq p_T(x)$ï¼Œä½†åéªŒåˆ†å¸ƒç›¸åŒ$p_S(y|x) = p_T(y|x)$ï¼Œå³å­¦ä¹ ä»»åŠ¡ç›¸åŒ$T_s = T_T$\n- ï¼ˆ2ï¼‰æ¦‚å¿µåç§»ï¼ˆConcept Shiftï¼‰ï¼šè¾“å…¥è¾¹é™…åˆ†å¸ƒç›¸åŒ$p_S(x) = p_T(x)$ï¼Œä½†åéªŒåˆ†å¸ƒä¸åŒ$p_S(y|x) \\ neq p_T(y|x)$ï¼Œå³å­¦ä¹ ä»»åŠ¡ä¸åŒ$T_S \\neq T_T$\n- ï¼ˆ3ï¼‰å…ˆéªŒåç§»ï¼ˆPrior Shiftï¼‰ï¼šæºé¢†åŸŸå’Œç›®æ ‡é¢†åŸŸä¸­çš„è¾“å‡º$y$å…ˆéªŒåˆ†å¸ƒä¸åŒ$p_S(y) \\neq p_T(y)$ï¼Œæ¡ä»¶åˆ†å¸ƒç›¸åŒ$p_S(x|y) = p_T(x|y)$ã€‚åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œç›®æ ‡é¢†åŸŸå¿…é¡»æä¾›ä¸€å®šæ•°é‡çš„æ ‡æ³¨æ ·æœ¬ã€‚\n\n### ç»ˆç”Ÿå­¦ä¹ \n\nç»ˆç”Ÿå­¦ä¹ ï¼ˆLifelong Learningï¼‰ä¹Ÿå«æŒç»­å­¦ä¹ ï¼ˆContinuous Learningï¼‰æ˜¯æŒ‡åƒäººç±»ä¸€æ ·å…·æœ‰æŒç»­ä¸æ–­çš„å­¦ä¹ èƒ½åŠ›ï¼Œæ ¹æ®å†å²ä»»åŠ¡ä¸­å­¦åˆ°çš„ç»éªŒå’ŒçŸ¥è¯†æ¥å¸®åŠ©å­¦ä¹ ä¸æ–­å‡ºç°çš„æ–°ä»»åŠ¡ï¼Œå¹¶ä¸”è¿™äº›ç»éªŒå’ŒçŸ¥è¯†æ˜¯æŒç»­ç´¯ç§¯çš„ï¼Œä¸ä¼šå› ä¸ºæ–°çš„ä»»åŠ¡è€Œå¿˜è®°æ—§çš„çŸ¥è¯†ã€‚\n\nåœ¨ç»ˆç”Ÿå­¦ä¹ ä¸­ï¼Œå‡è®¾ä¸€ä¸ªç»ˆç”Ÿå­¦ä¹ ç®—æ³•å·²ç»åœ¨å†å²äººä»»åŠ¡$T_1, T_2, ...$ä¸Šå­¦ä¹ åˆ°ä¸€ä¸ªæ¨¡å‹ï¼Œå½“å‡ºç°ä¸€ä¸ªæ–°ä»»åŠ¡$T_{m+1}$æ—¶ï¼Œè¿™ä¸ªç®—æ³•å¯ä»¥æ ¹æ®è¿‡å»åœ¨$m$ä¸ªä»»åŠ¡ä¸Šå­¦ä¹ åˆ°çš„çŸ¥è¯†æ¥å¸®åŠ©ç¬¬$m+1$ä¸ªä»»åŠ¡ï¼ŒåŒæ—¶ç§¯ç´¯æ‰€æœ‰çš„$m+1$ä¸ªä»»åŠ¡ä¸Šçš„çŸ¥è¯†ã€‚\n\nåœ¨ç»ˆç”Ÿå­¦ä¹ ä¸­ï¼Œä¸€ä¸ªå…³é”®çš„é—®é¢˜æ˜¯å¦‚ä½•é¿å…**ç¾éš¾æ€§é—å¿˜ï¼ˆCatastrophic Forgettingï¼‰**ï¼Œå³æŒ‰ç…§ä¸€å®šé¡ºåºå­¦ä¹ å¤šä¸ªä»»åŠ¡æ—¶ï¼Œåœ¨å­¦ä¹ æ–°ä»»åŠ¡çš„åŒæ—¶ä¸å¿˜è®°å…ˆå‰å­¦ä¹ åˆ°çš„å†å²çŸ¥è¯†ã€‚æ¯”å¦‚åœ¨ç¥ç»ç½‘ç»œæ¨¡å‹ä¸­ï¼Œä¸€äº›å‚æ•°å¯¹ä»»åŠ¡$T_A$éå¸¸é‡è¦ï¼Œå¦‚æœåœ¨å­¦ä¹ ä»»åŠ¡$T_B$æ—¶è¢«æ”¹å˜äº†ï¼Œå°±å¯èƒ½ç»™ä»»åŠ¡$T_A$é€ æˆä¸å¥½çš„å½±å“ã€‚\n\nè§£å†³ç¾éš¾æ€§é—å¿˜çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚å¼¹æ€§æƒé‡å·©å›ºæ–¹æ³•ï¼ˆElastic Weight Coonsolidationï¼‰ã€‚\n\n### å…ƒå­¦ä¹ \n\næ ¹æ®æ²¡æœ‰å…è´¹åˆé¤å®šç†ï¼Œæ²¡æœ‰ä¸€ç§é€šç”¨çš„å­¦ä¹ ç®—æ³•åœ¨æ‰€æœ‰ä»»åŠ¡ä¸Šéƒ½æœ‰æ•ˆã€‚å› æ­¤å½“ä½¿ç”¨æœºå™¨å­¦ä¹ ç®—æ³•å®ç°æŸä¸ªä»»åŠ¡æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦â€œå°±äº‹è®ºäº‹â€ï¼Œæ ¹æ®ä»»åŠ¡çš„ç‰¹å®šæ¥é€‰æ‹©åˆé€‚çš„æ¨¡å‹ã€æŸå¤±å‡½æ•°ã€ä¼˜åŒ–ç®—æ³•ä»¥åŠè¶…å‚æ•°ã€‚\n\nè€Œè¿™ç§åŠ¨æ€è°ƒæ•´å­¦ä¹ æ–¹å¼çš„èƒ½åŠ›ï¼Œç§°ä¸ºå…ƒå­¦ä¹ ï¼ˆMeta-Learningï¼‰ï¼Œä¹Ÿç§°ä¸ºå­¦ä¹ çš„å­¦ä¹ ï¼ˆLearning to Learnï¼‰ã€‚\n\nå…ƒå­¦ä¹ çš„ç›®çš„æ—¶ä»å·²æœ‰çš„ä»»åŠ¡ä¸­å­¦ä¹ ä¸€ç§å­¦ä¹ æ–¹æ³•æˆ–å…ƒçŸ¥è¯†ï¼Œå¯ä»¥åŠ é€Ÿæ–°ä»»åŠ¡çš„å­¦ä¹ ã€‚ä»è¿™ä¸ªè§’åº¦æ¥è¯´ï¼Œå…ƒå­¦ä¹ ååˆ†ç±»ä¼¼äºå½’çº³è¿ç§»å­¦ä¹ ï¼Œä½†å…ƒå­¦ä¹ æ›´ä¾§é‡ä»å¤šç§ä¸åŒçš„ä»»åŠ¡ä¸­å½’çº³å‡ºä¸€ç§å­¦ä¹ æ–¹æ³•ã€‚\n\nè¿™é‡Œä¸»è¦ä»‹ç»ä¸¤ç§å…¸å‹çš„å…ƒå­¦ä¹ æ–¹æ³•ï¼šåŸºäºä¼˜åŒ–å™¨çš„å…ƒå­¦ä¹ å’Œæ¨¡å‹æ— å…³çš„å…ƒå­¦ä¹ ã€‚\n\n#### åŸºäºä¼˜åŒ–å™¨çš„å…ƒå­¦ä¹ \nç›®å‰ç¥ç»ç½‘ç»œçš„çš„å­¦ä¹ æ–¹æ³•ä¸»è¦æ˜¯å®šä¹‰ä¸€ä¸ªç›®æ ‡æŸå¤±å‡½æ•°$L(\\theta)$ï¼Œå¹¶é€šè¿‡æ¢¯åº¦ä¸‹é™ç®—æ³•æ¥æœ€å°åŒ–$L(\\theta)$\n$$\n\\theta_t \\leftarrow \\theta_{t-1} - \\alpha \\bigtriangledown L(\\theta_{t-1})\n$$\nå…¶ä¸­$\\theta_t$ä¸ºç¬¬$t$æ­¥æ—¶çš„æ¨¡å‹å‚æ•°ï¼Œ$\\bigtriangledown L(\\theta_{t-1})$ä¸ºæ¢¯åº¦ï¼Œ$\\alpha$ä¸ºå­¦ä¹ ç‡ã€‚åœ¨ä¸åŒçš„ä»»åŠ¡ä¸Šï¼Œé€šå¸¸é€‰æ‹©ä¸åŒçš„å­¦ä¹ ç»¿ä»¥åŠä¸åŒçš„ä¼˜åŒ–æ–¹æ³•ï¼Œæ¯”å¦‚åŠ¨é‡æ³•ï¼ŒAdamç­‰ã€‚è¿™äº›ä¼˜åŒ–ç®—æ³•çš„æœ¬è´¨åŒºåˆ«åœ¨äºæ›´æ–°å‚æ•°çš„è§„åˆ™ä¸åŒï¼Œå› æ­¤ä¸€ç§å¾ˆè‡ªç„¶çš„å…ƒå­¦ä¹ å°±æ˜¯è‡ªåŠ¨å­¦ä¹ ä¸€ç§æ›´æ–°å‚æ•°çš„è§„åˆ™ï¼Œå³é€šè¿‡å¦ä¸€ä¸ªç¥ç»ç½‘ç»œï¼ˆæ¯”å¦‚å¾ªç¯ç¥ç»ç½‘ç»œï¼‰æ¥å»ºæ¨¡æ¢¯åº¦ä¸‹é™çš„è¿‡ç¨‹ã€‚ä¸‹å›¾ç»™å‡ºäº†åŸºäºä¼˜åŒ–å™¨çš„å…ƒå­¦ä¹ ç¤ºä¾‹ã€‚\n\n![åŸºäºä¼˜åŒ–å™¨çš„å…ƒå­¦ä¹ ç¤ºä¾‹](https://img-blog.csdnimg.cn/20191112151007633.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\næˆ‘ä»¬ç”¨å‡½æ•°$g_t(.)$æ¥é¢„æµ‹ç¬¬$t$æ­¥æ—¶å‚æ•°æ›´æ–°çš„å·®å€¼$\\Delta \\theta_t = \\theta_t - \\theta_{t-1}$ï¼Œå‡½æ•°$g_t(.)$ç§°ä¸ºä¼˜åŒ–å™¨ï¼Œè¾“å…¥æ˜¯å½“å‰æ—¶åˆ»çš„æ¢¯åº¦å€¼ï¼Œè¾“å‡ºæ—¶å‚æ•°çš„æ›´æ–°å·®å€¼$\\Delta \\theta_t$ï¼Œè¿™æ ·ç¬¬$t$æ­¥çš„æ›´æ–°è§„åˆ™å¯ä»¥å†™ä¸ºï¼š\n$$\n\\theta_{t+1} = \\theta_t + g_t(\\bigtriangledown L(\\theta_{t}), \\phi )\n$$\nå…¶ä¸­$\\phi$ä¸ºä¼˜åŒ–å™¨$g_t(.)$çš„å‚æ•°ã€‚\n\nå­¦ä¹ ä¼˜åŒ–å™¨$g_t(.)$çš„è¿‡ç¨‹å¯ä»¥çœ‹åšæ˜¯ä¸€ç§å…ƒå­¦ä¹ è¿‡ç¨‹ï¼Œå…¶ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€ä¸ªé€‚ç”¨äºå¤šä¸ªä¸åŒä»»åŠ¡çš„ä¼˜åŒ–å™¨ã€‚åœ¨æ ‡å‡†çš„æ¢¯åº¦ä¸‹é™ä¸­ï¼Œæ¯æ­¥è¿­ä»£çš„ç›®æ ‡æ˜¯ä½¿å¾—$L(\\theta)$ä¸‹é™ã€‚è€Œåœ¨ä¼˜åŒ–å™¨çš„å…ƒå­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨æ¯æ­¥è¿­ä»£çš„ç›®æ ‡æ˜¯$L(\\theta)$æœ€å°ï¼Œå…·ä½“çš„ç›®æ ‡å‡½æ•°ä¸ºï¼š\n$$\nL(\\phi) = E_f [ \\sum_{t=1}^{T} w_t L(\\theta_t) ]\n\\\\\n\\theta_t = \\theta_{t-1} + g_t\n\\\\\n[g_t: h_t] = LSTM( \\bigtriangledown L(\\theta_{t-1}), h_{t-1}, \\phi)\n$$\nå…¶ä¸­$T$ä¸ºæœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œ$w_t>0$ä¸ºæ¯ä¸€æ­¥çš„æƒé‡ï¼Œä¸€èˆ¬å¯ä»¥è®¾ç½®$w_t=1,\\forall t$ã€‚ç”±äºLSTMç½‘ç»œå¯ä»¥è®°å¿†æ¢¯åº¦çš„å†å²ä¿¡æ¯ï¼Œå­¦ä¹ åˆ°çš„ä¼˜åŒ–å™¨å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªé«˜é˜¶çš„ä¼˜åŒ–æ–¹æ³•ã€‚\n\n#### æ¨¡å‹æ— å…³çš„å…ƒå­¦ä¹ \n\næ¨¡å‹æ— å…³çš„å…ƒå­¦ä¹ ï¼ˆModel-Agnostic Meta-Learningï¼Œ MAMLï¼‰æ˜¯ä¸€ä¸ªç®€å•çš„æ¨¡å‹æ— å…³ã€ä»»åŠ¡æ— å…³çš„å…ƒå­¦ä¹ ç®—æ³•ã€‚å‡è®¾æ‰€æœ‰çš„ä»»åŠ¡éƒ½æ¥è‡ªä¸€ä¸ªä»»åŠ¡ç©ºé—´ï¼Œå…¶åˆ†å¸ƒä¸º$p(T)$ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªä»»åŠ¡ç©ºé—´çš„æ‰€æœ‰ä»»åŠ¡ä¸Šå­¦ä¹ ä¸€ç§é€šç”¨çš„è¡¨ç¤ºï¼Œè¿™ç§è¡¨ç¤ºå¯ä»¥ç»è¿‡æ¢¯åº¦ä¸‹é™æ–¹æ³•åœ¨ä¸€ä¸ªç‰¹å®šçš„å•ä»»åŠ¡ä¸Šè¿›è¡Œç²¾è°ƒã€‚å‡è®¾ä¸€ä¸ªæ¨¡å‹ä¸º$f(\\theta)$ï¼Œå¦‚æœæˆ‘ä»¬è®©è¿™ä¸ªæ¨¡å‹é€‚åº”åˆ°ä¸€ä¸ªæ–°ä»»åŠ¡$T_m$ä¸Šï¼Œé€šè¿‡ä¸€æ­¥æˆ–å¤šæ­¥çš„æ¢¯åº¦ä¸‹é™æ›´æ–°ï¼Œå­¦ä¹ åˆ°çš„ä»»åŠ¡é€‚é…å‚æ•°ä¸ºï¼š\n$$\n\\theta_m ' = \\theta- \\alpha \\bigtriangledown _\\theta L_{T_m}(f_\\theta)\n$$\nå…¶ä¸­$\\alpha$ä¸ºå­¦ä¹ ç‡ï¼Œè¿™é‡Œçš„$\\theta_m'$å¯ä»¥ç†è§£ä¸ºå…³äº$\\theta$çš„å‡½æ•°ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„å‚æ•°æ›´æ–°ã€‚\n\nMAMLçš„ç›®æ ‡æ˜¯å­¦ä¹ ä¸€ä¸ªå‚æ•°$\\theta$ä½¿å¾—å…¶ç»è¿‡ä¸€ä¸ªæ¢¯åº¦è¿­ä»£å°±å¯ä»¥åœ¨æ–°ä»»åŠ¡ä¸Šè¾¾åˆ°æœ€å¥½çš„æ€§èƒ½ã€‚\n$$\n\\underset{ \\theta }{ min } \\sum_{T_m \\sim  p(T)} L_{T_m}(f(\\theta'_m)) = \\sum_{T_m \\sim  p(T)} L_{T_m} ( f(\\theta - \\alpha \\bigtriangledown _\\theta L_{T_m} (f_\\theta )) )\n$$\nå³åœ¨æ‰€æœ‰ä»»åŠ¡ä¸Šçš„å…ƒä¼˜åŒ–ï¼ˆMeta-Optimizationï¼‰ä¹Ÿé‡‡ç”¨æ¢¯åº¦ä¸‹é™æ¥è¿›è¡Œä¼˜åŒ–ï¼Œå³ï¼š\n$$\n\\theta \\leftarrow \\theta - \\beta \\bigtriangledown _\\theta \\sum_{m=1}^{M} L_{T_m}(f_{\\theta_m'})\n$$\nå…¶ä¸­$\\beta$ä¸ºå…ƒå­¦ä¹ ç‡ï¼Œè¿™é‡Œä¸ºä¸€ä¸ªçœŸæ­£çš„å‚æ•°æ›´æ–°æ­¥éª¤ã€‚éœ€è¦è®¡ç®—å…³äº$\\theta$çš„äºŒé˜¶æ¢¯åº¦ï¼Œä½†ç”¨ä¸€çº§è¿‘ä¼¼é€šå¸¸ä¹Ÿå¯ä»¥è¾¾åˆ°æ¯”è¾ƒå¥½çš„æ€§èƒ½ã€‚\n\nMAMLçš„å…·ä½“è¿‡ç¨‹ç®—æ³•å¦‚ä¸‹ï¼š\n![MAMLçš„å…·ä½“è¿‡ç¨‹ç®—æ³•](https://img-blog.csdnimg.cn/20191112155840241.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n### æ€»ç»“\n\nç›®å‰ç¥ç»ç½‘è·¯çš„å­¦ä¹ æœºåˆ¶ä¸»è¦æ˜¯ä»¥ç›‘ç£å­¦ä¹ ä¸ºä¸»ï¼Œè¿™ç§å­¦ä¹ æ–¹å¼å¾—åˆ°çš„æ¨¡å‹å¾€å¾€æ˜¯å®šå‘çš„ï¼Œä¹Ÿæ˜¯å­¤ç«‹çš„ï¼Œæ¯ä¸ªä»»åŠ¡çš„æ¨¡å‹éƒ½æ˜¯ä»é›¶å¼€å§‹è®­ç»ƒçš„ï¼Œä¸€åˆ‡çŸ¥è¯†éƒ½éœ€è¦ä»è®­ç»ƒæ•°æ®ä¸­å¾—åˆ°ï¼Œå¯¼è‡´æ¯ä¸ªä»»åŠ¡éƒ½éœ€è¦å¤§é‡çš„è®­ç»ƒæ•°æ®ã€‚æœ¬ç« ä¸»è¦ä»‹ç»äº†ä¸€äº›å’Œæ¨¡å‹æ— å…³çš„å­¦ä¹ æ–¹å¼ï¼ŒåŒ…æ‹¬é›†æˆå­¦ä¹ ã€è‡ªè®­ç»ƒå’ŒååŒè®­ç»ƒã€å¤šä»»åŠ¡å­¦ä¹ ã€è¿ç§»å­¦ä¹ ã€å…ƒå­¦ä¹ ï¼Œè¿™äº›éƒ½æ˜¯æ·±åº¦å­¦ä¹ ä¸­ç ”ç©¶çš„é‡ç‚¹ã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["ç¥ç»ç½‘ç»œ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€è®ºæ–‡ã€‘æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•ç»¼è¿°","url":"/2019/11/07/è®ºæ–‡/ã€è®ºæ–‡ã€‘æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•ç»¼è¿°/","content":"\n\n# æ¦‚è¿°\nåœ¨ä¿¡æ¯çˆ†ç‚¸æ—¶ä»£ï¼Œäººä»¬è¿«åˆ‡å¸Œæœ›ä»æµ·é‡ä¿¡æ¯ä¸­è·å–ä¸è‡ªèº«éœ€è¦å’Œå…´è¶£å»åˆåº¦é«˜çš„å†…å®¹ï¼Œä¸ºäº†æ»¡è¶³æ­¤éœ€æ±‚ï¼Œå‡ºç°äº†å¤šç§æŠ€æœ¯ï¼Œå¦‚ï¼šæœç´¢å¼•æ“ã€æ¨èç³»ç»Ÿã€é—®ç­”ç³»ç»Ÿã€æ–‡æ¡£åˆ†ç±»ä¸èšç±»ã€æ–‡çŒ®æŸ¥é‡ç­‰ï¼Œè€Œè¿™äº›åº”ç”¨åœºæ™¯çš„å…³é”®æŠ€æœ¯ä¹‹ä¸€å°±æ˜¯æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—æŠ€æœ¯ã€‚å› æ­¤äº†è§£æ–‡æœ¬ç›¸ä¼¼åº¦çš„è®¡ç®—æ–¹æ³•æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚\n\n# æ–‡æœ¬ç›¸ä¼¼åº¦å®šä¹‰\næ–‡æœ¬ç›¸ä¼¼åº¦åœ¨ä¸åŒé¢†åŸŸè¢«å¹¿æ³›è®¨è®ºï¼Œç”±äºåº”ç”¨åœºæ™¯ä¸åŒï¼Œå…¶å†…æ¶µæœ‰æ‰€å·®å¼‚ï¼Œæ•…æ²¡æœ‰ç»Ÿä¸€ã€å…¬è®¤çš„å®šä¹‰ã€‚\n\nLinä»ä¿¡æ¯è®ºçš„è§’åº¦é˜æ˜ç›¸ä¼¼åº¦ä¸æ–‡æœ¬ä¹‹é—´çš„å…±æ€§å’Œå·®å¼‚æœ‰å…³ï¼Œå…±æ€§è¶Šå¤§ã€å·®å¼‚è¶Šå°ã€åˆ™ç›¸ä¼¼åº¦è¶Šé«˜ï¼›å…±æ€§è¶Šå°ã€å·®å¼‚è¶Šå¤§ã€åˆ™ç›¸ä¼¼åº¦è¶Šä½ã€‚ç›¸ä¼¼åº¦æœ€å¤§çš„æƒ…å†µæ˜¯æ–‡æœ¬å®Œå…¨ç›¸åŒã€‚åŒæ—¶æå‡ºåŸºäºå‡è®¾æ¨è®ºå‡ºç›¸ä¼¼åº¦å®šç†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n$$\nSim(A,B) = \\frac{ log P(common(A,B)) } {log P(description(A,B))}\n$$\nå…¶ä¸­ï¼Œcommon(A,B)æ˜¯Aå’ŒBçš„å…±æ€§ä¿¡æ¯ï¼Œdescription(A,B)æ˜¯æè¿°Aå’ŒBçš„å…¨éƒ¨ä¿¡æ¯ï¼Œä¸Šè¿°å…¬å¼è¡¨è¾¾å‡ºç›¸ä¼¼åº¦ä¸æ–‡æœ¬å…±æ€§æˆæ­£ç›¸å…³ã€‚ ç”±äºæ²¡æœ‰é™åˆ¶é¢†åŸŸï¼Œæ­¤å®šä¹‰è¢«é‡‡ç”¨è¾ƒå¤šã€‚\n\n> ç›¸å…³åº¦ä¸ç›¸ä¼¼åº¦æ˜¯å®¹æ˜“æ··æ·†çš„æ¦‚å¿µï¼Œå¤§é‡å­¦è€…æ²¡æœ‰å¯¹æ­¤åšè¿‡å¯¹æ¯”è¯´æ˜ã€‚ç›¸å…³åº¦ä½“ç°åœ¨æ–‡æœ¬å…±ç°æˆ–è€…ä»¥ä»»ä½•å½¢å¼ç›¸äº’å…³è”ï¼ˆåŒ…æ‹¬ä¸Šä¸‹ä½å…³ç³»ã€åŒä¹‰å…³ç³»ã€åä¹‰å…³ç³»ã€éƒ¨ä»¶-æ•´ä½“å…³ç³»ã€å€¼-å±æ€§å…³ç³»ç­‰ï¼‰åæ˜ å‡ºæ–‡æœ¬çš„ç»„åˆç‰¹ç‚¹ã€‚è€Œç›¸ä¼¼åº¦æ˜¯ç›¸å…³åº¦çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼ŒåŒ…æ‹¬ä¸Šä¸‹ä½å…³ç³»å’ŒåŒä¹‰å…³ç³»ã€‚ç”±æ­¤å¾—å‡ºï¼Œæ–‡æœ¬çš„ç›¸ä¼¼åº¦è¶Šé«˜ï¼Œåˆ™ç›¸å…³åº¦è¶Šå¤§ï¼Œä½†æ˜¯ç›¸å…³åº¦è¶Šå¤§å¹¶ä¸èƒ½è¯´æ˜ç›¸ä¼¼åº¦é«˜ã€‚\n\nç›¸ä¼¼åº¦ä¸€èˆ¬ç”¨[0,1]è¡¨ç¤ºï¼Œè¯¥å®æ•°å¯ä»¥é€šè¿‡è¯­ä¹‰è·ç¦»è®¡ç®—è·å¾—ã€‚ç›¸ä¼¼åº¦ä¸è¯­ä¹‰è·ç¦»å‘ˆåæ¯”å…³ç³»ï¼Œè¯­ä¹‰è·ç¦»è¶Šå°ï¼Œç›¸ä¼¼åº¦è¶Šé«˜ï¼›è¯­ä¹‰è·ç¦»è¶Šå¤§ï¼Œç›¸ä¼¼åº¦è¶Šä½ã€‚é€šå¸¸ç”¨ä¸‹é¢çš„å…¬å¼è¡¨ç¤ºç›¸ä¼¼åº¦ä¸è¯­ä¹‰è·ç¦»çš„å…³ç³»ã€‚\n$$\nSim(S_A,S_B) = \\frac {\\alpha} { Dis(S_A,S_B) + \\alpha }\n$$\nå…¶ä¸­ï¼Œ$Dis(S_A,S_B)$è¡¨ç¤ºæ–‡æœ¬$S_A,S_B$ä¹‹é—´çš„éè´Ÿè¯­ä¹‰è·ç¦»ï¼Œ$\\alpha$ä¸ºè°ƒèŠ‚å› å­ï¼Œä¿è¯äº†å½“è¯­ä¹‰è·ç¦»ä¸º0æ—¶ä¸Šè¿°å…¬å¼çš„æ„ä¹‰ã€‚\n\næ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—ä¸­è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µæ˜¯æ–‡æœ¬è¡¨ç¤ºï¼Œä»£è¡¨å¯¹æ–‡æœ¬çš„åŸºæœ¬å¤„ç†ï¼Œç›®çš„æ˜¯å°†åŠç»“æ„åŒ–æˆ–éç»“æ„åŒ–çš„æ–‡æœ¬è½¬åŒ–ä¸ºè®¡ç®—æœºå¯è¯»å½¢å¼ã€‚**æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•çš„ä¸åŒæœ¬è´¨æ˜¯æ–‡æœ¬è¡¨ç¤ºæ–¹æ³•ä¸åŒ**\n\n# æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•\n![æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•](https://img-blog.csdnimg.cn/20191105152528460.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\næ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•å¯åˆ†ä¸ºå››å¤§ç±»ï¼š\n- åŸºäºå­—ç¬¦ä¸²çš„æ–¹æ³•ï¼ˆString-Basedï¼‰\n- åŸºäºè¯­æ–™åº“çš„æ–¹æ³•ï¼ˆCorpus-Basedï¼‰\n- åŸºäºä¸–ç•ŒçŸ¥è¯†çš„æ–¹æ³•ï¼ˆKnowledge-Basedï¼‰\n- å…¶ä»–æ–¹æ³•\n\n## åŸºäºå­—ç¬¦ä¸²çš„æ–¹æ³•\nè¯¥æ–¹æ³•ä»å­—ç¬¦ä¸²åŒ¹é…åº¦å‡ºå‘ï¼Œä»¥å­—ç¬¦ä¸²å…±ç°å’Œé‡å¤ç¨‹åº¦ä¸ºç›¸ä¼¼åº¦çš„è¡¡é‡æ ‡å‡†ã€‚æ ¹æ®è®¡ç®—ç²’åº¦ä¸åŒï¼Œå¯ä»¥å°†è¯¥æ–¹æ³•åˆ†ä¸º**åŸºäºå­—ç¬¦çš„æ–¹æ³•**å’Œ**åŸºäºè¯è¯­çš„æ–¹æ³•**ã€‚ä¸‹å›¾åˆ—å‡ºä¸¤ç§æ–¹æ³•å¸¸è§çš„ç®—æ³•ä»¥åŠæ€è·¯\n\n![åŸºäºå­—ç¬¦ä¸²çš„æ–¹æ³•](https://img-blog.csdnimg.cn/20191105153106412.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nåŸºäºå­—ç¬¦ä¸²çš„æ–¹æ³•æ˜¯åœ¨å­—é¢å±‚æ¬¡ä¸Šçš„æ–‡æœ¬æ¯”è¾ƒï¼Œæ–‡æœ¬è¡¨ç¤ºå³ä¸ºåŸå§‹æ–‡æœ¬ï¼Œè¯¥æ–¹æ³•åŸç†ç®€å•ï¼Œæ˜“äºå®ç°ï¼Œç°å·²æˆä¸ºå…¶ä»–æ–¹æ³•çš„è®¡ç®—åŸºç¡€ã€‚\n\nä½†ä¸è¶³çš„æ˜¯å°†å­—ç¬¦æˆ–è¯è¯­ä½œä¸ºç‹¬ç«‹çš„çŸ¥è¯†å•å…ƒï¼Œå¹¶æœªè€ƒè™‘è¯è¯­æœ¬èº«çš„å«ä¹‰å’Œè¯è¯­ä¹‹é—´çš„å…³ç³»ã€‚ä»¥åŒä¹‰è¯ä¸ºä¾‹ï¼Œå°½ç®¡è¡¨è¾¾ä¸åŒï¼Œä½†å…·æœ‰ç›¸åŒçš„å«ä¹‰ï¼Œè€Œè¿™ç±»è¯è¯­çš„ç›¸ä¼¼åº¦ä¾é åŸºäºå­—ç¬¦ä¸²çš„æ–¹æ³•å¹¶ä¸èƒ½å‡†ç¡®è®¡ç®—ã€‚\n\n## åŸºäºè¯­æ–™åº“çš„æ–¹æ³•\n\nåŸºäºè¯­æ–™åº“çš„æ–¹æ³•åˆ©ç”¨è¯­æ–™åº“ä¸­è·å–çš„ä¿¡æ¯è®¡ç®—æ–‡æœ¬ç›¸ä¼¼åº¦ã€‚åŸºäºè¯­æ–™åº“çš„æ–¹æ³•å¯ä»¥åˆ’åˆ†ä¸ºï¼š\n- åŸºäºè¯è¢‹æ¨¡å‹çš„æ–¹æ³•\n- åŸºäºç¥ç»ç½‘ç»œçš„æ–¹æ³•\n- åŸºäºæœç´¢å¼•æ“çš„æ–¹æ³•\n\n### åŸºäºè¯è¢‹\nè¯è¢‹æ¨¡å‹ï¼ˆBag of Words Modelï¼ŒBOWï¼‰å»ºç«‹åœ¨åˆ†å¸ƒå‡è¯´çš„åŸºç¡€ä¸Šï¼Œå³â€œè¯è¯­æ‰€å¤„çš„ä¸Šä¸‹æ–‡è¯­å¢ƒç›¸ä¼¼ï¼Œå…¶è¯­ä¹‰åˆ™ç›¸ä¼¼â€ã€‚å…¶åŸºæœ¬æ€æƒ³æ˜¯ï¼šä¸è€ƒè™‘è¯è¯­åœ¨æ–‡æ¡£ä¸­å‡ºç°çš„é¡ºåºï¼Œå°†æ–‡æ¡£è¡¨ç¤ºæˆä¸€ç³»åˆ—è¯è¯­çš„ç»„åˆã€‚\n\næ ¹æ®è€ƒè™‘çš„è¯­ä¹‰æˆç¨‹åº¦ä¸åŒï¼ŒåŸºäºè¯è¢‹æ¨¡å‹çš„æ–¹æ³•ä¸»è¦åŒ…æ‹¬ï¼š\n- å‘é‡ç©ºé—´æ¨¡å‹ï¼ˆVector Space Modelï¼ŒVSMï¼‰\n- æ½œåœ¨è¯­ä¹‰åˆ†æï¼ˆLatent Semantic Analysisï¼ŒLSAï¼‰\n- æ¦‚ç‡æ½œåœ¨è¯­ä¹‰åˆ†æï¼ˆProbabilistic Latent Semantic Analysisï¼ŒPLSAï¼‰\n- æ½œåœ¨ç‹„åˆ©å…‹é›·åˆ†å¸ƒï¼ˆLatent Dirichlet Allocationï¼ŒLDAï¼‰\n\n#### VSM\nVSMæ¨¡å‹çš„åŸºæœ¬æ€æƒ³æ˜¯å°†æ¯ç¯‡æ–‡æ¡£è¡¨ç¤ºæˆä¸€ä¸ªåŸºäºè¯é¢‘æˆ–è€…è¯é¢‘-é€†æ–‡æ¡£é¢‘ç‡æƒé‡çš„å®å€¼å‘é‡ï¼Œé‚£ä¹ˆNç¯‡æ–‡æ¡£åˆ™æ„æˆnç»´å®å€¼ç©ºé—´ï¼Œå…¶ä¸­ç©ºé—´çš„æ¯ä¸€ç»´éƒ½å¯¹ç”¨è¯é¡¹ï¼Œæ¯ä¸€ç¯‡æ–‡æ¡£è¡¨ç¤ºè¯¥ç©ºé—´çš„ä¸€ä¸ªç‚¹æˆ–è€…å‘é‡ã€‚ä¸¤ä¸ªæ–‡æ¡£ä¹‹é—´çš„ç›¸ä¼¼åº¦å°±æ˜¯ä¸¤ä¸ªå‘é‡çš„è·ç¦»ï¼Œä¸€èˆ¬é‡‡ç”¨ä½™å¼¦ç›¸ä¼¼åº¦æ–¹æ³•è®¡ç®—ã€‚\n\nVSMæœ‰ä¸¤ä¸ªæ˜æ˜¾çš„ç¼ºç‚¹ï¼šä¸€æ˜¯è¯¥æ–¹æ³•åŸºäºæ–‡æœ¬ä¸­çš„ç‰¹å¾é¡¹è¿›è¡Œç›¸ä¼¼åº¦è®¡ç®—ï¼Œå½“ç‰¹å¾é¡¹è¾ƒå¤šæ—¶ï¼Œäº§ç”Ÿçš„é«˜ç»´ç¨€ç–çŸ©é˜µå¯¼è‡´è®¡ç®—æ•ˆç‡ä¸é«˜ï¼›äºŒæ˜¯å‘é‡ç©ºé—´æ¨¡å‹ç®—æ³•çš„å‡è®¾æ˜¯æ–‡æœ¬ä¸­æŠ½å–çš„ç‰¹å¾é¡¹æ²¡æœ‰å…³è”ï¼Œä¸ç¬¦åˆæ–‡æœ¬è¯­ä¹‰è¡¨è¾¾ã€‚\n\n#### LSAï¼ŒPLSA\n\nLSAç®—æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯å°†æ–‡æœ¬ä»ç¨€ç–çš„é«˜ç»´è¯æ±‡ç©ºé—´æ˜ å°„åˆ°ä½ç»´çš„æ½œåœ¨è¯­ä¹‰ç©ºé—´ï¼Œåœ¨æ½œåœ¨çš„è¯­ä¹‰ç©ºé—´è®¡ç®—ç›¸ä¼¼æ€§ã€‚LSAæ˜¯åŸºäºVSMæå‡ºçš„ï¼Œä¸¤ç§æ–¹æ³•éƒ½æ˜¯é‡‡ç”¨ç©ºé—´å‘é‡è¡¨ç¤ºæ–‡æœ¬ï¼Œä½†LSAä½¿ç”¨æ½œåœ¨è¯­ä¹‰ç©ºé—´ï¼Œåˆ©ç”¨å¥‡å¼‚å€¼åˆ†è§£æé«˜å¯¹é«˜ç»´çš„è¯æ¡-æ–‡æ¡£çŸ©é˜µè¿›è¡Œå¤„ç†ï¼Œå»é™¤äº†åŸå§‹å‘é‡ç©ºé—´çš„æŸäº›â€œå™ªéŸ³â€ï¼Œä½¿æ•°æ®ä¸å†ç¨€ç–ã€‚Hofmannåœ¨LSAçš„åŸºç¡€ä¸Šå¼•å…¥ä¸»é¢˜å±‚ï¼Œé‡‡ç”¨æœŸæœ›æœ€å¤§åŒ–ç®—æ³•ï¼ˆEMï¼‰è®­ç»ƒä¸»é¢˜ã€‚\n\nLSAæœ¬è´¨ä¸Šæ˜¯é€šè¿‡é™ç»´æé«˜è®¡ç®—å‡†ç¡®åº¦ï¼Œä½†è¯¥ç®—æ³•å¤æ‚åº¦æ¯”è¾ƒé«˜ï¼Œå¯ç§»æ¤æ€§å·®ï¼Œæ¯”è¾ƒä¹‹ä¸‹ï¼ŒPLSAå…·å¤‡ç»Ÿè®¡åŸºç¡€ï¼Œå¤šä¹‰è¯å’ŒåŒä¹‰è¯åœ¨PLSAä¸­åˆ†åˆ«è¢«è®­ç»ƒåˆ°ä¸åŒçš„ä¸»é¢˜å’Œç›¸åŒçš„ä¸»é¢˜ï¼Œä»è€Œé¿å…äº†å¤šä¹‰è¯ï¼ŒåŒä¹‰è¯çš„å½±å“ï¼Œä½¿å¾—è®¡ç®—ç»“æ„æ›´åŠ å‡†ç¡®ï¼Œä½†ä¸é€‚ç”¨äºå¤§è§„æ¨¡æ–‡æœ¬ã€‚\n\n#### LDA\nLDAä¸»é¢˜æ¨¡å‹æ˜¯ä¸€ä¸ªä¸‰å±‚çš„è´å¶æ–¯æ¦‚ç‡ç½‘ç»œï¼ŒåŒ…å«è¯ã€ä¸»é¢˜å’Œæ–‡æ¡£ä¸‰å±‚ç»“æ„ã€‚é‡‡ç”¨LDAè®¡ç®—æ–‡æœ¬ç›¸ä¼¼æ€§çš„åŸºæœ¬æ€æƒ³æ˜¯å¯¹æ–‡æœ¬è¿›è¡Œä¸»é¢˜å»ºæ¨¡ï¼Œå¹¶åœ¨ä¸»é¢˜å¯¹åº”çš„è¯è¯­åˆ†å¸ƒä¸­éå†æŠ½å–æ–‡æœ¬ä¸­çš„è¯è¯­ï¼Œå¾—åˆ°æ–‡æœ¬çš„ä¸»é¢˜åˆ†å¸ƒï¼Œé€šè¿‡æ­¤åˆ†å¸ƒè®¡ç®—æ–‡æœ¬ç›¸ä¼¼åº¦ã€‚\n\nä»¥ä¸Šä¸‰ç±»å°½ç®¡éƒ½æ˜¯é‡‡ç”¨è¯è¢‹æ¨¡å‹å®ç°æ–‡æœ¬è¡¨ç¤ºï¼Œä½†æ˜¯ä¸åŒæ–¹æ³•è€ƒè™‘çš„è¯­ä¹‰ç¨‹åº¦æœ‰æ‰€ä¸åŒã€‚åŸºäºå‘é‡ç©ºé—´å»ºæ¨¡çš„æ–¹æ³•è¯­ä¹‰ç¨‹åº¦å±…ä¸­ï¼ŒåŠ å…¥æ½œåœ¨è¯­ä¹‰ç©ºé—´æ¦‚å¿µï¼Œè§£å†³äº†å‘é‡ç©ºé—´æ¨¡å‹æ–¹æ³•çš„ç¨€ç–çŸ©é˜µé—®é¢˜å¹¶é™ä½äº†å¤šä¹‰è¯ï¼ŒåŒä¹‰è¯çš„å½±å“ã€‚åŸºäºLDAçš„ä¸»é¢˜æ¨¡å‹çš„æ–¹æ³•è¯­ä¹‰ç¨‹åº¦æœ€é«˜ï¼ŒåŸºäºç›¸ä¼¼è¯è¯­å¯èƒ½å±äºç»Ÿä¸€ä¸»é¢˜çš„ç†è®ºï¼Œä¸»é¢˜ç»è¿‡è®­ç»ƒå¾—åˆ°ï¼Œä»è€Œä¿è¯äº†æ–‡æœ¬çš„è¯­ä¹‰æ€§ã€‚\n\n### åŸºäºç¥ç»ç½‘ç»œ\nåŸºäºç¥ç»ç½‘ç»œç”Ÿæˆè¯å‘é‡è®¡ç®—æ–‡æœ¬ç›¸ä¼¼åº¦æ˜¯è¿‘äº›å¹´æçš„æ¯”è¾ƒå¤šçš„ã€‚ä¸å°‘äº§ç”Ÿè¯å‘é‡çš„æ¨¡å‹å’Œå·¥å…·ä¹Ÿè¢«æå‡ºï¼Œæ¯”å¦‚Word2Vecå’ŒGloVeç­‰ã€‚è¯å‘é‡çš„æœ¬è´¨æ˜¯ä»æœªæ ‡è®°çš„éç»“æ„æ–‡æœ¬ä¸­è®­ç»ƒå‡ºä¸€ç§ä½ç»´å®æ•°å‘é‡ï¼Œè¿™ç§è¡¨è¾¾æ–¹å¼ä½¿å¾—ç±»ä¼¼çš„è¯è¯­åœ¨è·ç¦»ä¸Šæ›´ä¸ºæ¥è¿‘ï¼ŒåŒæ—¶è¾ƒå¥½çš„è§£å†³äº†è¯è¢‹æ¨¡å‹ç”±äºè¯è¯­ç‹¬ç«‹å¸¦æ¥çš„ç»´æ•°ç¾éš¾å’Œè¯­ä¹‰ä¸è¶³é—®é¢˜ã€‚\n\nåŸºäºç¥ç»ç½‘ç»œæ–¹æ³•ä¸è¯è¢‹æ¨¡å‹æ–¹æ³•çš„ä¸åŒä¹‹å¤„åœ¨äºè¡¨è¾¾æ–‡æœ¬çš„æ–¹å¼ã€‚è¯å‘é‡æ˜¯ç»è¿‡è®­ç»ƒå¾—åˆ°çš„ä½ç»´å®æ•°å‘é‡ï¼Œç»´æ•°å¯ä»¥è®¤ä¸ºé™åˆ¶ï¼Œå®æ•°å€¼å¯æ ¹æ®æ–‡æœ¬è·ç¦»è°ƒæ•´ï¼Œè¿™ç§æ–‡æœ¬è¡¨ç¤ºç¬¦åˆäººç†è§£æ–‡æœ¬çš„æ–¹å¼ï¼Œæ‰€ä»¥åŸºäºè¯å‘é‡åˆ¤æ–­æ–‡æœ¬ç›¸ä¼¼åº¦çš„æ•ˆæœæœ‰è¿›ä¸€æ­¥ç ”ç©¶ç©ºé—´ã€‚\n\n### åŸºäºæœç´¢å¼•æ“\nåŸºæœ¬åŸç†æ˜¯ç»™å®šæœç´¢å…³é”®è¯$x,y$ï¼Œæœç´¢å¼•æ“è¿”å›åŒ…å« $x,y$çš„ç½‘é¡µæ•°é‡$f(x),f(y)$ä»¥åŠåŒæ—¶åŒ…å«$x,y$çš„ç½‘é¡µæ•°é‡$f(x,y)$ï¼Œè®¡ç®—è°·æ­Œç›¸ä¼¼åº¦è·ç¦»å¦‚ä¸‹æ‰€ç¤º:\n$$\nNGD(x,y) = \\frac { G(x,y) - min(G(x),G(y)) } { max(G(x),G(y)}\n\\\\\n= \\frac {max\\{ log \\,f(x), log\\,f(y) \\} - log \\, f(x,y)} { log \\, N - min{log \\,f(x), log \\, f(y)} }\n$$\n\nä½†æ˜¯è¯¥æ–¹æ³•æœ€å¤§çš„ä¸è¶³æ˜¯è®¡ç®—ç»“æœå®Œå…¨å–å†³äºæœç´¢å¼•æ“çš„æŸ¥è¯¢æ•ˆæœ, ç›¸ä¼¼åº¦å› æœç´¢å¼•æ“è€Œå¼‚\n\n## åŸºäºä¸–ç•ŒçŸ¥è¯†çš„æ–¹æ³•\n\nåŸºäºä¸–ç•ŒçŸ¥è¯†çš„æ–¹æ³•æ˜¯åˆ©ç”¨å…·æœ‰è§„èŒƒç»„ç»‡ä½“ç³»çš„çŸ¥è¯†åº“è®¡ç®—æ–‡æœ¬ç›¸ä¼¼åº¦ï¼Œä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ï¼šåŸºäºæœ¬ä½“çŸ¥è¯†å’ŒåŸºäºç½‘ç»œçŸ¥è¯†ã€‚\n### åŸºäºæœ¬ä½“çŸ¥è¯†\n\næ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•ä½¿ç”¨çš„æœ¬ä½“ä¸æ˜¯ä¸¥æ ¼çš„æœ¬ä½“æ¦‚å¿µ, è€ŒæŒ‡å¹¿æ³›çš„è¯å…¸ã€å™è¯è¡¨ã€è¯æ±‡è¡¨ä»¥åŠç‹­ä¹‰çš„æœ¬ä½“ã€‚ç”±äºæœ¬ä½“èƒ½å¤Ÿå‡†ç¡®åœ°è¡¨ç¤ºæ¦‚å¿µå«ä¹‰å¹¶èƒ½åæ˜ å‡ºæ¦‚å¿µä¹‹é—´çš„å…³ç³», æ‰€ä»¥æœ¬ä½“æˆä¸ºæ–‡æœ¬ç›¸ä¼¼åº¦çš„ç ”ç©¶åŸºç¡€[7]ã€‚æœ€å¸¸åˆ©ç”¨çš„æœ¬ä½“æ˜¯é€šç”¨è¯å…¸, ä¾‹å¦‚ WordNetã€ã€ŠçŸ¥ç½‘ã€‹(HowNet)å’Œã€ŠåŒä¹‰è¯è¯æ—ã€‹ç­‰, é™¤äº†è¯å…¸è¿˜æœ‰ä¸€äº›é¢†åŸŸæœ¬ä½“, ä¾‹å¦‚åŒ»ç–—æœ¬ä½“ã€ç”µå­å•†åŠ¡æœ¬ä½“ã€åœ°ç†æœ¬ä½“ã€å†œä¸šæœ¬ä½“ç­‰ã€‚\n\nç»“åˆHliaoutakiã€Batetç­‰çš„ç ”ç©¶ï¼Œå°†åŸºäºæœ¬ä½“çš„æ–‡æœ¬ç›¸ä¼¼åº¦ç®—æ³•æ¦‚æ‹¬ä¸ºå››ç§ï¼š\n- åŸºäºè·ç¦»\n- åŸºäºå†…å®¹\n- åŸºäºå±æ€§\n- æ··åˆå¼ç›¸ä¼¼åº¦\n\nä¸‹è¡¨åˆ—å‡ºäº†å„ç§æ–¹æ³•çš„åŸºæœ¬åŸç†ã€ä»£è¡¨æ–¹æ³•å’Œç‰¹ç‚¹\n![åŸºäºæœ¬ä½“çš„æ–‡æœ¬ç›¸ä¼¼åº¦ç®—æ³•](https://img-blog.csdnimg.cn/20191105162644574.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n### åŸºäºç½‘ç»œçŸ¥è¯†\n\nç”±äºæœ¬ä½“ä¸­è¯è¯­æ•°é‡çš„é™åˆ¶ï¼Œæœ‰äº›å­¦è€…å¼€å§‹è½¬å‘åŸºäºç½‘ç»œçŸ¥è¯†æ–¹æ³•çš„ç ”ç©¶ï¼ŒåŸå› æ˜¯åè€…è¦†ç›–èŒƒå›´å¹¿æ³›ã€å¯Œå«ä¸°å¯Œçš„è¯­ä¹‰ä¿¡æ¯ã€æ›´æ–°é€Ÿåº¦ç›¸å¯¹è¾ƒå¿«ï¼Œä½¿ç”¨æœ€å¤šçš„ç½‘ç»œçŸ¥è¯†æ˜¯ç»´åŸºç™¾ç§‘ã€ç™¾åº¦ç™¾ç§‘ã€‚ç½‘ç»œçŸ¥è¯†ä¸€èˆ¬åŒ…æ‹¬ä¸¤ç§ç»“æ„ï¼Œåˆ†åˆ«æ˜¯è¯æ¡é¡µé¢ä¹‹é—´çš„é“¾æ¥å’Œè¯æ¡ä¹‹é—´çš„å±‚æ¬¡ç»“æ„ã€‚\n\nåŸºäºç½‘ç»œçŸ¥è¯†çš„æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•å¤§å¤šåˆ©ç”¨é¡µé¢é“¾æ¥æˆ–å±‚æ¬¡ç»“æ„ï¼Œèƒ½è¾ƒå¥½çš„åæ˜ å‡ºè¯æ¡çš„è¯­ä¹‰å…³ç³»ã€‚ä½†å…¶ä¸è¶³åœ¨äºï¼šè¯æ¡ä¸è¯æ¡çš„ä¿¡æ¯å®Œå¤‡ç¨‹åº¦å·®å¼‚è¾ƒå¤§ï¼Œä¸èƒ½ä¿è¯è®¡ç®—å‡†ç¡®åº¦ï¼Œç½‘ç»œçŸ¥è¯†çš„ç”Ÿäº§æ–¹å¼æ˜¯å¤§ä¼—å‚ä¸ï¼Œå¯¼è‡´æ–‡æœ¬ç¼ºå°‘ä¸€å®šçš„ä¸“ä¸šæ€§ã€‚\n\n\n## å…¶ä»–æ–¹æ³• \né™¤äº†åŸºäºå­—ç¬¦ä¸²ã€åŸºäºè¯­æ–™åº“å’ŒåŸºäºä¸–ç•ŒçŸ¥è¯†çš„æ–¹æ³•, æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—è¿˜æœ‰ä¸€äº›å…¶ä»–æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š\n- å¥æ³•åˆ†æ\n- æ··åˆæ–¹æ³•\n\n# æ€»ç»“\næœ¬æ–‡æ€»ç»“äº†æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—çš„å››ç§æ–¹æ³•ï¼Œä»¥åŠä»–ä»¬çš„ä¼˜ç¼ºç‚¹ã€‚ä½œè€…è®¤ä¸ºä»Šåæ–‡æœ¬ç›¸ä¼¼åº¦çš„è®¡ç®—æ–¹æ³•è¶‹åŠ¿æœ‰ä¸‰ä¸ªæ–¹å‘ï¼Œåˆ†åˆ«æ˜¯ï¼š\n- åŸºäºç¥ç»ç½‘ç»œçš„æ–¹æ³•ç ”ç©¶å°†æ›´åŠ ä¸°å¯Œ\n- ç½‘ç»œèµ„æºä¸ºæ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•ç ”ç©¶æä¾›æ›´å¤šæ”¯æŒ\n- é’ˆå¯¹ç‰¹å®šé¢†åŸŸä»¥åŠè·¨é¢†åŸŸæ–‡æœ¬çš„ç›¸ä¼¼åº¦è®¡ç®—å°†æˆä¸ºä»Šåå‘å±•çš„é‡ç‚¹\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n---\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["è®ºæ–‡"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"æ— ç›‘ç£å­¦ä¹ ä¸­çš„æ— ç›‘ç£ç‰¹å¾å­¦ä¹ ã€èšç±»å’Œå¯†åº¦ä¼°è®¡","url":"/2019/11/05/æ·±åº¦å­¦ä¹ /ç¥ç»ç½‘ç»œç¬”è®°/æ— ç›‘ç£å­¦ä¹ ä¸­çš„æ— ç›‘ç£ç‰¹å¾å­¦ä¹ ã€èšç±»å’Œå¯†åº¦ä¼°è®¡/","content":"\n## æ— ç›‘ç£å­¦ä¹ æ¦‚è¿°\næ— ç›‘ç£å­¦ä¹ ï¼ˆUnsupervised Learningï¼‰æ˜¯æŒ‡ä»æ— æ ‡ç­¾çš„æ•°æ®ä¸­å­¦ä¹ å‡ºä¸€äº›æœ‰ç”¨çš„æ¨¡å¼ï¼Œæ— ç›‘ç£å­¦ä¹ ä¸€èˆ¬ç›´æ¥ä»åŸå§‹æ•°æ®è¿›è¡Œå­¦ä¹ ï¼Œä¸å€ŸåŠ©äººå·¥æ ‡ç­¾å’Œåé¦ˆç­‰ä¿¡æ¯ã€‚å…¸å‹çš„æ— ç›‘ç£å­¦ä¹ é—®é¢˜å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š\n- æ— ç›‘ç£ç‰¹å¾å­¦ä¹ ï¼ˆUnsupervised Feature Learningï¼‰\n> ä»æ— æ ‡ç­¾çš„è®­ç»ƒæ•°æ®ä¸­æŒ–æ˜æœ‰æ•ˆçš„ç‰¹å¾è¡¨ç¤ºï¼Œæ— ç›‘ç£ç‰¹å¾å­¦ä¹ ä¸€èˆ¬ç”¨æ¥è¿›è¡Œé™ç»´ï¼Œæ•°æ®å¯è§†åŒ–æˆ–ç›‘ç£å­¦ä¹ å‰æœŸçš„ç‰¹å¾é¢„å¤„ç†ã€‚\n\n- å¯†åº¦ä¼°è®¡ï¼ˆDensity Estimationï¼‰\n> æ˜¯æ ¹æ®ä¸€ç»„è®­ç»ƒæ ·æœ¬æ¥ä¼°è®¡æ ·æœ¬ç©ºé—´çš„æ¦‚ç‡å¯†åº¦ã€‚å¯†åº¦ä¼°è®¡å¯ä»¥åˆ†ä¸ºï¼šå‚æ•°å¯†åº¦ä¼°è®¡å’Œéå‚æ•°å¯†åº¦ä¼°è®¡ã€‚å‚æ•°å¯†åº¦ä¼°è®¡æ˜¯å‡è®¾æ•°æ®æœä»æŸä¸ªå·²çŸ¥æ¦‚ç‡å¯†åº¦å‡½æ•°å½¢å¼çš„åˆ†å¸ƒï¼Œç„¶åæ ¹æ®è®­ç»ƒæ ·æœ¬å»ä¼°è®¡è¯¥åˆ†å¸ƒçš„å‚æ•°ã€‚éå‚æ•°å¯†åº¦ä¼°è®¡æ˜¯ä¸å‡è®¾æœä»æŸä¸ªæ¦‚ç‡åˆ†å¸ƒï¼Œåªåˆ©ç”¨è®­ç»ƒæ ·æœ¬å¯¹å¯†åº¦è¿›è¡Œä¼°è®¡ï¼Œå¯ä»¥è¿›è¡Œä»»æ„å½¢çŠ¶çš„å¯†åº¦ä¼°è®¡ï¼Œéå‚æ•°å¯†åº¦ä¼°è®¡çš„æ–¹æ³•åŒ…æ‹¬ï¼šç›´æ–¹å›¾ã€æ ¸å¯†åº¦ä¼°è®¡ç­‰ã€‚\n\n- èšç±»ï¼ˆClusteringï¼‰\n> æ˜¯å°†ä¸€ç»„æ ·æœ¬æ ¹æ®ä¸€å®šçš„å‡†åˆ™åˆ’åˆ†åˆ°ä¸åŒçš„ç»„ã€‚ä¸€ä¸ªé€šç”¨çš„å‡†åˆ™æ˜¯ç»„å†…çš„æ ·æœ¬ç›¸ä¼¼æ€§è¦é«˜äºç»„é—´çš„æ ·æœ¬ç›¸ä¼¼æ€§ã€‚å¸¸è§çš„èšç±»æ–¹æ³•åŒ…æ‹¬ï¼šKMeansã€è°±èšç±»ã€å±‚æ¬¡èšç±»ç­‰ã€‚\n\nèšç±»å¤§å®¶å·²ç»éå¸¸ç†Ÿæ‚‰äº†ï¼Œä¸‹æ–‡ä¸»è¦ä»‹ç»æ— ç›‘ç£ç‰¹å¾å­¦ä¹ å’Œæ¦‚ç‡å¯†åº¦ä¼°è®¡ã€‚\n\n## æ— ç›‘ç£ç‰¹å¾å­¦ä¹ \n\næ— ç›‘ç£ç‰¹å¾å­¦ä¹ æ˜¯æŒ‡ä»æ— æ ‡æ³¨çš„æ•°æ®ä¸­è‡ªåŠ¨å­¦ä¹ æœ‰æ•ˆçš„æ•°æ®è¡¨ç¤ºï¼Œä»è€Œèƒ½å¤Ÿå¸®åŠ©åç»­çš„æœºå™¨å­¦ä¹ æ¨¡å‹è¾¾åˆ°æ›´å¥½çš„æ€§èƒ½ã€‚æ— ç›‘ç£ç‰¹å¾å­¦ä¹ ä¸»è¦æ–¹æ³•æœ‰ï¼š\n- ä¸»æˆåˆ†åˆ†æ\n- ç¨€ç–ç¼–ç \n- è‡ªç¼–ç å™¨\n\n### ä¸»æˆåˆ†åˆ†æ\n\nä¸»æˆåˆ†åˆ†æï¼ˆPrincipal Component Analysisï¼ŒPCAï¼‰æ˜¯ä¸€ç§æœ€å¸¸ç”¨çš„æ•°æ®é™ç»´æ–¹æ³•ï¼Œä½¿å¾—åœ¨è½¬æ¢åçš„ç©ºé—´ä¸­æ•°æ®çš„æ–¹å·®æœ€å¤§ã€‚ä»¥ä¸‹éƒ¨åˆ†æ‘˜è‡ªäº https://zhuanlan.zhihu.com/p/32412043\n\n#### PCAä¸­çš„æœ€å¤§å¯åˆ†æ€§æ€æƒ³\nPCAé™ç»´ï¼Œç”¨åŸå§‹æ ·æœ¬æ•°æ®ä¸­æœ€ä¸»è¦çš„æ–¹é¢ä»£æ›¿åŸå§‹æ•°æ®ï¼Œæœ€ç®€å•çš„æƒ…å†µæ˜¯ä»2ç»´é™åˆ°1ç»´ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¸Œæœ›æ‰¾åˆ°æŸä¸€ä¸ªç»´åº¦æ–¹å‘ï¼Œå¯ä»¥ä»£è¡¨ä¸¤ä¸ªç»´åº¦çš„æ•°æ®ï¼Œå›¾ä¸­åˆ—äº†ä¸¤ä¸ªæ–¹å‘ $u_1, u_2$ï¼Œé‚£ä¹ˆå“ªä¸ªæ–¹å‘å¯ä»¥æ›´å¥½çš„ä»£è¡¨åŸå§‹æ•°æ®å‘¢ï¼Ÿ\n\n![æœ€å¤§å¯åˆ†æ€§ç¤ºä¾‹](https://img-blog.csdnimg.cn/2019110418180564.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\nä»ç›´è§‚ä¸Šçœ‹ï¼Œ$u_1$æ¯”$u_2$å¥½ï¼Œè¿™å°±æ˜¯æ‰€è¯´çš„æœ€å¤§å¯åˆ†æ€§ã€‚\n\n#### åŸºå˜æ¢\n![åŸºå˜æ¢](https://img-blog.csdnimg.cn/20191104182446889.jpg)\n\nå…¶ä¸­$p_i \\in {p_1, p_2, ..., p_R}$ï¼Œ$p_i \\in R^{1*N}$æ˜¯ä¸€ä¸ªè¡Œå‘é‡ï¼Œè¡¨ç¤ºç¬¬iä¸ªåŸºï¼Œ$a_j \\in {a_1, a_2, ..., a_M}$ï¼Œ$a_i \\in R^{N*1}$æ˜¯ä¸€ä¸ªåˆ—å‘é‡ï¼Œè¡¨ç¤ºç¬¬$j$ä¸ªåŸå§‹æ•°æ®è®°å½•ï¼Œç‰¹åˆ«è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡ŒRå¯ä»¥å°äºNï¼Œè€ŒRå†³å®šäº†å˜ç»´åæ•°æ®çš„ç»´æ•°ã€‚\n\nä»ä¸Šå›¾å’Œæ–‡å­—è§£é‡Šæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ç§çŸ©é˜µç›¸ä¹˜çš„ç‰©ç†è§£é‡Šï¼šä¸¤ä¸ªçŸ©é˜µç›¸ä¹˜çš„æ„ä¹‰æ˜¯å°†å³è¾¹çŸ©é˜µä¸­çš„æ¯ä¸€åˆ—åˆ—å‘é‡å˜æ¢åˆ°å·¦è¾¹çŸ©é˜µä¸­æ¯ä¸€è¡Œè¡Œå‘é‡ä¸ºåŸºæ‰€è¡¨ç¤ºçš„ç©ºé—´ä¸­å»ã€‚æ›´æŠ½è±¡çš„è¯´ï¼Œä¸€ä¸ªçŸ©é˜µå¯ä»¥è¡¨ç¤ºä¸€ç§çº¿æ€§å˜æ¢ã€‚å¾ˆå¤šåŒå­¦åœ¨å­¦ä¹ çŸ©é˜µç›¸ä¹˜æ—¶ï¼Œåªæ˜¯ç®€å•çš„è®°ä½äº†ç›¸ä¹˜çš„è§„åˆ™ï¼Œä½†å¹¶ä¸æ¸…æ¥šå…¶èƒŒåçš„ç‰©ç†æ„ä¹‰ã€‚\n\n#### æ–¹å·®\n\nå¦‚ä½•è€ƒè™‘ä¸€ä¸ªæ–¹å‘æˆ–è€…åŸºæ˜¯æœ€ä¼˜çš„ï¼Œçœ‹ä¸‹å›¾ï¼š\n\n![å‘¨å¿—åæœºå™¨å­¦ä¹ æ’å›¾](https://img-blog.csdnimg.cn/20191104184311912.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n\næˆ‘ä»¬å°†æ‰€æœ‰çš„ç‚¹å‘ä¸¤æ¡ç›´çº¿åšæŠ•å½±ï¼ŒåŸºäºå‰é¢PCAæœ€å¤§å¯åˆ†æ€§æ€æƒ³ï¼Œæˆ‘ä»¬è¦æ‰¾çš„æ˜¯é™ç»´åæŸå¤±æœ€å°ï¼Œå¯ä»¥ç†è§£ä¸ºæŠ•å½±åæ•°æ®å°½å¯èƒ½çš„åˆ†å¼€ï¼Œé‚£ä¹ˆåœ¨æ•°å­¦ä¸­å»è¡¨ç¤ºæ•°æ®çš„åˆ†æ•£ä½¿ç”¨çš„æ˜¯æ–¹å·®ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“æ–¹å·®è¶Šå¤§ï¼Œæ•°æ®è¶Šåˆ†æ•£ï¼Œæ–¹å·®çš„è¡¨è¾¾å¼å¦‚ä¸‹ï¼š\n\n$$\nVar(a) = \\frac{1}{m} \\sum_{i=1}^{m} (a_i - \\mu)^2\n$$\nå…¶ä¸­$\\mu$ä¸ºæ ·æœ¬å‡å€¼ï¼Œå¦‚æœæå‰å¯¹æ ·æœ¬åšå»ä¸­å¿ƒåŒ–ï¼Œåˆ™æ–¹å·®è¡¨è¾¾å¼ä¸ºï¼š\n$$\nVar(a) = \\frac{1}{m} \\sum_{i=1}^{m} (a_i)^2\n$$\n\nåˆ°ç°åœ¨ï¼Œæˆ‘ä»¬çŸ¥é“äº†ä»¥ä¸‹å‡ ç‚¹ï¼š\n- å¯¹åŸå§‹æ•°æ®è¿›è¡Œï¼ˆçº¿æ€§å˜æ¢ï¼‰åŸºå˜æ¢å¯ä»¥å¯¹åŸå§‹æ ·æœ¬ç»™å‡ºä¸åŒçš„è¡¨ç¤º\n- åŸºçš„ç»´åº¦å°äºæ ·æœ¬çš„ç»´åº¦å¯ä»¥èµ·åˆ°é™ç»´çš„ä½œç”¨ï¼Œ\n- å¯¹åŸºå˜æ¢åæ–°çš„æ ·æœ¬æ±‚å…¶æ–¹å·®ï¼Œé€‰å–ä½¿å…¶æ–¹å·®æœ€å¤§çš„åŸº\n\né‚£ä¹ˆå†è€ƒè™‘å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Ÿ\n> ä¸Šé¢åªæ˜¯è¯´æ˜äº†ä¼˜åŒ–ç›®æ ‡ï¼Œä½†å¹¶æ²¡æœ‰ç»™å‡ºä¸€ä¸ªå¯è¡Œæ€§çš„æ“ä½œæ–¹æ¡ˆæˆ–è€…ç®—æ³•ï¼Œå› ä¸ºåªè¯´æ˜äº†è¦ä»€ä¹ˆï¼Œä½†æ²¡è¯´æ€ä¹ˆåšï¼Œæ‰€ä»¥ç»§ç»­è¿›è¡Œæ¢è®¨ã€‚\n\n#### åæ–¹å·®\nä»äºŒç»´é™åˆ°ä¸€ç»´å¯ä»¥é‡‡ç”¨æ–¹å·®æœ€å¤§æ¥é€‰å‡ºèƒ½ä½¿åŸºå˜æ¢åæ•°æ®åˆ†æ•£æœ€å¤§çš„æ–¹å‘ï¼ˆåŸºï¼‰ï¼Œä½†é‡åˆ°é«˜çº¬çš„åŸºå˜æ¢ï¼Œå½“å®Œæˆç¬¬ä¸€ä¸ªæ–¹å‘ï¼ˆåŸºï¼‰é€‰æ‹©åï¼Œç¬¬äºŒä¸ªæŠ•å½±æ–¹å‘åº”è¯¥å’Œç¬¬ä¸€ä¸ªâ€œå‡ ä¹é‡åˆåœ¨ä¸€èµ·â€ï¼Œè¿™æ ·æ˜¾ç„¶æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œè¦æœ‰å…¶ä»–çš„çº¦æŸï¼Œæˆ‘ä»¬å¸Œæœ›ä¸¤ä¸ªå­—æ®µå°½é‡è¡¨ç¤ºæ›´å¤šçš„ä¿¡æ¯ï¼Œä½¿å…¶ä¸å­˜åœ¨ç›¸å…³æ€§ã€‚\n\næ•°å­¦ä¸Šä½¿ç”¨åæ–¹å·®è¡¨ç¤ºå…¶ç›¸å…³æ€§ã€‚\n$$\nCov(a,b)= \\frac{1}{m} \\sum_{i=1}^{m}a_i b_i\n$$\nå½“Cov(a,b)=0æ—¶è¡¨ç¤ºä¸¤ä¸ªå­—æ®µå®Œå…¨ç‹¬ç«‹ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ä¼˜åŒ–çš„ç›®æ ‡ã€‚\n> æ³¨æ„è¿™é‡Œçš„ $a_i,b_i$æ˜¯ç»è¿‡å»ä¸­å¿ƒåŒ–å¤„ç†çš„ã€‚\n\n#### åæ–¹å·®çŸ©é˜µ\næˆ‘ä»¬æƒ³è¦è¾¾åˆ°çš„ç›®æ ‡ä¸å­—æ®µå†…æ–¹å·®åŠåæ–¹å·®æœ‰å¯†åˆ‡çš„å…³ç³»ï¼Œå‡å¦‚åªæœ‰aã€bä¸¤ä¸ªå­—æ®µï¼Œå°†ä»–ä»¬æŒ‰è¡Œç»„æˆçŸ©é˜µXï¼Œè¡¨ç¤ºå¦‚ä¸‹ï¼š\n\n![çŸ©é˜µX](https://img-blog.csdnimg.cn/20191104190715730.png)\n\nç„¶åç”¨Xä¹˜ä»¥Xçš„è½¬ç½®çŸ©é˜µï¼Œå¹¶ä¹˜ä»¥ç³»æ•° $\\frac{1}{m}$å¾—ï¼š\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20191104190820539.png)\n\nå¯è§ï¼Œåæ–¹å·®çŸ©é˜µæ˜¯ä¸€ä¸ªå¯¹ç§°çš„çŸ©é˜µï¼Œè€Œä¸”å¯¹è§’çº¿æ˜¯å„ä¸ªç»´åº¦çš„æ–¹å·®ï¼Œè€Œå…¶ä»–å…ƒç´ æ˜¯a å’Œ bçš„åæ–¹å·®ï¼Œç„¶åä¼šå‘ç°ä¸¤è€…è¢«åˆå¹¶åˆ°äº†ä¸€ä¸ªçŸ©é˜µå†…ã€‚\n\n####  åæ–¹å·®çŸ©é˜µå¯¹è§’åŒ–\n\næˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä½¿$\\frac{1}{m}\\sum_{i=1}^{m}a_ib_i=0$ï¼Œæ ¹æ®ä¸Šè¿°çš„æ¨å¯¼ï¼Œå¯ä»¥çœ‹å‡ºä¼˜åŒ–ç›®æ ‡æ˜¯$C=\\frac{1}{m}XX^T$ç­‰ä»·äºåæ–¹å·®çŸ©é˜µå¯¹è§’åŒ–ã€‚å³é™¤å¯¹è§’çº¿å¤–çš„å…¶ä»–å…ƒç´ ï¼ˆå¦‚$\\frac{1}{m} \\sum_{i=1}^{m}a_i b_i$ï¼‰åŒ–ä¸º0ï¼Œå¹¶ä¸”åœ¨å¯¹è§’çº¿ä¸Šå°†å…ƒç´ æŒ‰å¤§å°ä»ä¸Šåˆ°ä¸‹æ’åˆ—ï¼Œè¿™æ ·æˆ‘ä»¬å°±è¾¾æˆäº†ä¼˜åŒ–ç›®çš„ã€‚\n\nè¿™æ ·è¯´å¯èƒ½ä¸æ˜¯å¾ˆæ˜æ™°ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥çœ‹ä¸‹åŸçŸ©é˜µå’ŒåŸºå˜æ¢åçŸ©é˜µåæ–¹å·®çŸ©é˜µçš„å…³ç³»ï¼š\n\nè®¾åŸå§‹æ•°æ®çŸ©é˜µä¸ºXï¼Œå¯¹åº”çš„åæ–¹å·®çŸ©é˜µä¸ºCï¼Œè€ŒPæ˜¯ä¸€ç»„åŸºæŒ‰è¡Œç»„æˆçš„çŸ©é˜µï¼Œè®¾Y=PXï¼Œåˆ™Yä¸ºXå¯¹PåšåŸºå˜æ¢åçš„æ•°æ®ã€‚è®¾Yçš„åæ–¹å·®çŸ©é˜µä¸ºDï¼Œæˆ‘ä»¬æ¨å¯¼ä¸€ä¸‹Dä¸Cçš„å…³ç³»ï¼š\n$$\nD=\\frac{1}{m}YY^T\n\\\\\n= \\frac{1}{m}(PX)(PX)^T\n\\\\\n= \\frac{1}{m} PXX^TP^T\n\\\\\n=P(\\frac{1}{m} XX^T)P^T\n\\\\\n= PCP^T\n\\\\\n=P \\begin{pmatrix}\n\\frac{1}{m} \\sum_{i=1}^{m} a_i^2 & \\frac{1}{m} \\sum_{i=1}^{m} a_i b_i \\\\ \n \\frac{1}{m} \\sum_{i=1}^{m} a_ib_i  & \\frac{1}{m} \\sum_{i=1}^{m} b_i^2 \n\\end{pmatrix} P^T\n$$\n\nå¯è§æˆ‘ä»¬è¦æ‰¾çš„Pä¸æ˜¯åˆ«çš„ï¼Œè€Œæ˜¯èƒ½è®©åŸå§‹åæ–¹å·®çŸ©é˜µå¯¹è§’åŒ–çš„Pã€‚æ¢å¥è¯è¯´ï¼Œä¼˜åŒ–ç›®æ ‡å˜æˆäº†å¯»æ‰¾ä¸€ä¸ªçŸ©é˜µPï¼Œæ»¡è¶³$PCP^T$æ˜¯ä¸€ä¸ªå¯¹è§’çŸ©é˜µï¼Œå¹¶ä¸”å¯¹è§’å…ƒç´ æŒ‰ä»å¤§åˆ°å°ä¾æ¬¡æ’åˆ—ï¼Œé‚£ä¹ˆPçš„å‰Kè¡Œå°±æ˜¯è¦å¯»æ‰¾çš„åŸºï¼Œç”¨Pçš„å‰Kè¡Œç»„æˆçš„çŸ©é˜µä¹˜ä»¥Xå°±ä½¿å¾—Xä»Nç»´é™åˆ°äº†Kç»´å¹¶æ»¡è¶³ä¸Šè¿°ä¼˜åŒ–æ¡ä»¶ã€‚\n\næˆ‘ä»¬å¸Œæœ›æŠ•å½±åçš„æ–¹å·®æœ€å¤§åŒ–ï¼Œäºæ˜¯ä¼˜åŒ–ç›®æ ‡å¯ä»¥æ”¹å†™ä¸ºï¼š\n$$\n\\underset{P}{max} \\, tr(PCP^T)\n\\\\\ns.t. \\,PP^T=I\n$$\nåˆ©ç”¨æ‹‰æ ¼æœ—æ—¥å‡½æ•°å¯ä»¥å¾—åˆ°ï¼š\n$$\nJ(P) = tr(PCP^T) + \\lambda(PP^T - I)\n$$\nå¯¹Pæ±‚å¯¼æœ‰$CP^T + \\lambda P^T = 0$ï¼Œæ•´ç†å¾—ï¼š\n$$\nCP^T = (- \\lambda) P^T\n$$\näºæ˜¯ï¼Œåªéœ€å¯¹åæ–¹å·®çŸ©é˜µCè¿›è¡Œç‰¹å¾åˆ†è§£ï¼Œå¯¹æ±‚å¾—çš„ç‰¹å¾å€¼è¿›è¡Œæ’åºï¼Œå†å¯¹ $P^T = (P_1, P_2, ..., P_R)$å–å‰Kåˆ—ç»„æˆçš„çŸ©é˜µä¹˜ä»¥åŸå§‹æ•°æ®çŸ©é˜µXï¼Œå°±å¾—åˆ°äº†æˆ‘ä»¬éœ€è¦çš„é™ç»´åçš„æ•°æ®çŸ©é˜µYã€‚\n\n#### PCAç®—æ³•æµç¨‹\nä»ä¸Šè¾¹å¯ä»¥çœ‹å‡ºï¼Œæ±‚æ ·æœ¬$x_i$çš„$n'$ç»´çš„ä¸»æˆåˆ†ï¼Œå…¶å®å°±æ˜¯æ±‚æ ·æœ¬é›†çš„åæ–¹å·®çŸ©é˜µ$\\frac{1}{m}XX^T$çš„å‰$n'$ç»´ä¸ªç‰¹å¾å€¼å¯¹åº”ç‰¹å¾å‘é‡çŸ©é˜µPï¼Œç„¶åå¯¹äºæ¯ä¸ªæ ·æœ¬$x_i$ï¼Œåšå¦‚ä¸‹å˜æ¢$y_i = P x_i$ï¼Œå³è¾¾åˆ°PCAé™ç»´çš„ç›®çš„ã€‚\n\nå…·ä½“çš„ç®—æ³•æµç¨‹å¦‚ä¸‹ï¼š\n- è¾“å…¥ï¼šnç»´çš„æ ·æœ¬é›† $X=(x_i, x_2,...,x_m)$ï¼Œè¦é™ç»´åˆ°çš„ç»´æ•°$n'$\n- è¾“å‡ºï¼šé™ç»´åçš„ç»´åº¦Y\n\n1. å¯¹æ‰€æœ‰çš„æ ·æœ¬é›†å»ä¸­å¿ƒåŒ– $x_i = x_i - \\frac{1}{m} \\sum_{j=1}^{m}x_j$\n2. è®¡ç®—æ ·æœ¬çš„åæ–¹å·®çŸ©é˜µ$C = \\frac{1}{m}XX^T$\n3. æ±‚å‡ºåæ–¹å·®çŸ©é˜µå¯¹åº”çš„ç‰¹å¾å€¼å’Œå¯¹åº”çš„ç‰¹å¾å‘é‡\n4. å°†ç‰¹å¾å‘é‡æŒ‰ç…§ç‰¹å¾å€¼ä»å¤§åˆ°å°ï¼Œä»ä¸Šåˆ°ä¸‹æŒ‰è¡Œæ’åˆ—æˆçŸ©é˜µï¼Œå–å‰kè¡Œç»„æˆçŸ©é˜µP\n5. $Y=PX$å³ä¸ºé™ç»´åˆ°Kç»´ä¹‹åçš„æ•°æ®\n\næ³¨æ„ï¼šæœ‰æ—¶å€™é™ç»´å¹¶ä¸ä¼šæŒ‡å®šç»´æ•°ï¼Œè€Œæ˜¯æŒ‡å®šä¸€ä¸ªæ¯”ä¾‹$t$ï¼Œæ¯”å¦‚é™ç»´åˆ°åŸå…ˆçš„tæ¯”ä¾‹ã€‚\n\n#### PCAç®—æ³•æ€»ç»“\nPCAç®—æ³•çš„ä¸»è¦ä¼˜ç‚¹ï¼š\n- ä»…ä»…éœ€è¦ä»¥æ–¹å·®è¡¡é‡ä¿¡æ¯é‡ï¼Œä¸å—æ•°æ®é›†æ„å¤–å› ç´ çš„å½±å“\n- å„ä¸»æˆåˆ†ä¹‹é—´æ­£äº¤ï¼Œå¯æ¶ˆé™¤åŸå§‹æ•°æ®å„æˆåˆ†é—´çš„ç›¸äº’å½±å“çš„å› ç´ \n- æ–¹æ³•è®¾è®¡ç®€å•ï¼Œä¸»è¦è¿ç®—æ˜¯ç‰¹å¾å€¼åˆ†è§£ï¼Œæ˜“äºå®ç°\n\nPCAç®—æ³•çš„ä¸»è¦ç¼ºç‚¹ï¼š\n- ä¸»æˆåˆ†å„ä¸ªç‰¹å¾ç»´åº¦çš„å«ä¹‰å…·æœ‰ä¸€å®šçš„æ¨¡ç³Šæ€§ï¼Œä¸å¦‚åŸå§‹æ ·æœ¬ç‰¹å¾çš„å¯è§£é‡Šæ€§å¼º\n- æ–¹å·®å°çš„éä¸»æˆåˆ†ä¹Ÿå¯èƒ½åŒ…å«å¯¹æ ·æœ¬å·®å¼‚çš„é‡è¦ä¿¡æ¯ï¼Œå› é™ç»´ä¸¢å¼ƒå¯èƒ½ä¼šå¯¹åç»­æ•°æ®å¤„ç†æœ‰å½±å“\n- å½“æ ·æœ¬ç‰¹å¾ç»´åº¦è¾ƒå¤§æ—¶ï¼Œéœ€è¦å·¨å¤§çš„è®¡ç®—é‡ï¼ˆæ¯”å¦‚ï¼Œ10000*10000ï¼Œè¿™æ—¶å€™å°±éœ€è¦SVD[å¥‡å¼‚å€¼åˆ†è§£]ï¼ŒSVDä¸ä»…å¯ä»¥å¾—åˆ°PCAé™ç»´çš„ç»“æœï¼Œè€Œä¸”å¯ä»¥å¤§å¤§çš„å‡å°è®¡ç®—é‡ï¼‰\n\n### ç¨€ç–ç¼–ç \n#### ç¨€ç–ç¼–ç ï¼ˆSparse Codingï¼‰ä»‹ç» \n\nåœ¨æ•°å­¦ä¸Šï¼Œçº¿æ€§ç¼–ç æ˜¯æŒ‡ç»™å®šä¸€ç»„åŸºå‘é‡$A=[a_1,a_2,...,a_p]$ï¼Œå°†è¾“å…¥æ ·æœ¬$x\\in R$è¡¨ç¤ºä¸ºè¿™äº›åŸºå‘é‡çš„çº¿æ€§ç»„åˆ\n$$\nx = \\sum _{i=1}^{p} z_i a_i = Az\n$$\nå…¶ä¸­åŸºå‘é‡çš„ç³»æ•°$z=[z_1,...,z_p]$ç§°ä¸ºè¾“å…¥æ ·æœ¬xçš„ç¼–ç ï¼ŒåŸºå‘é‡Aä¹Ÿç§°ä¸ºå­—å…¸ï¼ˆdictionaryï¼‰ã€‚\n\nç¼–ç æ˜¯å¯¹dç»´ç©ºé—´ä¸­çš„æ ·æœ¬xæ‰¾åˆ°å…¶åœ¨pç»´ç©ºé—´ä¸­çš„è¡¨ç¤ºï¼ˆæˆ–æŠ•å½±ï¼‰ï¼Œå…¶ç›®æ ‡é€šå¸¸æ˜¯ç¼–ç çš„å„ä¸ªç»´åº¦éƒ½æ˜¯ç»Ÿè®¡ç‹¬ç«‹çš„ï¼Œå¹¶ä¸”å¯ä»¥é‡æ„å‡ºè¾“å…¥æ ·æœ¬ã€‚ç¼–ç çš„å…³é”®æ˜¯æ‰¾åˆ°ä¸€ç»„â€œå®Œå¤‡â€çš„åŸºå‘é‡Aï¼Œæ¯”å¦‚ä¸»æˆåˆ†åˆ†æç­‰ã€‚ä½†æ˜¯æ˜¯ä¸»æˆåˆ†åˆ†æå¾—åˆ°çš„ç¼–ç é€šå¸¸æ˜¯ç¨ å¯†å‘é‡ï¼Œæ²¡æœ‰ç¨€ç–æ€§ã€‚\n\n> å¦‚æœpä¸ªåŸºå‘é‡åˆšå¥½å¯ä»¥æ”¯æ’‘pç»´çš„æ¬§å¼ç©ºé—´ï¼Œåˆ™è¿™pä¸ªåŸºå‘é‡æ˜¯å®Œå¤‡çš„ï¼Œå¦‚æœpä¸ªåŸºå‘é‡å¯ä»¥æ”¯æ’‘dç»´çš„æ¬§å¼ç©ºé—´ï¼Œå¹¶ä¸”p>dï¼Œåˆ™è¿™pä¸ªåŸºå‘é‡æ˜¯è¿‡å®Œå¤‡ï¼Œå†—ä½™çš„ã€‚\n<br>\nâ€œè¿‡å®Œå¤‡â€åŸºå‘é‡ä¸€èˆ¬æŒ‡çš„æ˜¯åŸºå‘é‡ä¸ªæ•°è¿œå¤§äºå…¶æ”¯æ’‘ç©ºé—´ç»´åº¦ï¼Œå› æ­¤è¿™äº›åŸºå‘é‡ä¸€èˆ¬æ˜¯ä¸å…·å¤‡ç‹¬ç«‹ï¼Œæ­£äº¤ç­‰æ€§è´¨ã€‚\n\nç»™å®šä¸€ç»„Nä¸ªè¾“å…¥å‘é‡$x^1, ..., x^N$ï¼Œå…¶ç¨€ç–ç¼–ç çš„ç›®æ ‡å‡½æ•°å®šä¹‰ä¸ºï¼š\n$$\nL(A,Z)= \\sum _{n=1}^{N}( || x^n - Az^n || ^2 + \\eta \\rho (z^n))\n$$\nå…¶ä¸­$\\rho(.)$æ˜¯ä¸€ä¸ªç¨€ç–æ€§è¡¡é‡å‡½æ•°ï¼Œ$\\eta$æ˜¯ä¸€ä¸ªè¶…å‚æ•°ï¼Œç”¨æ¥æ§åˆ¶ç¨€ç–æ€§çš„å¼ºåº¦ã€‚\n\nå¯¹äºä¸€ä¸ªå‘é‡$z \\in R$ï¼Œå…¶ç¨€ç–æ€§å®šä¹‰ä¸ºéé›¶å…ƒç´ çš„æ¯”ä¾‹ã€‚å¦‚æœä¸€ä¸ªå‘é‡åªæœ‰å¾ˆå°‘çš„å‡ ä¸ªéé›¶å…ƒç´ ï¼Œå°±è¯´è¿™ä¸ªå‘é‡æ˜¯ç¨€ç–çš„ã€‚ç¨€ç–æ€§è¡¡é‡å‡½æ•°$\\rho(z)$æ˜¯ç»™å‘é‡zä¸€ä¸ªæ ‡é‡åˆ†æ•°ã€‚zè¶Šç¨€ç–ï¼Œ$\\rho(z)$è¶Šå°ã€‚\n\nç¨€ç–æ€§è¡¡é‡å‡½æ•°æœ‰å¤šç§é€‰æ‹©ï¼Œæœ€ç›´æ¥çš„è¡¡é‡å‘é‡zç¨€ç–æ€§çš„å‡½æ•°æ˜¯$l_0$èŒƒå¼\n$$\n\\rho(z) = \\sum _{i=1}^{p} I(|z_i| > 0)\n$$\nä½†$l_0$èŒƒæ•°ä¸æ»¡è¶³è¿ç»­å¯å¯¼ï¼Œå› æ­¤å¾ˆéš¾è¿›è¡Œä¼˜åŒ–ï¼Œåœ¨å®é™…ä¸­ï¼Œç¨€ç–æ€§è¡¡é‡å‡½æ•°é€šå¸¸é€‰ç”¨$l_1$èŒƒæ•°\n$$\n\\rho(z) = \\sum _{i=1}^{p} |z_i|\n$$\næˆ–å¯¹æ•°å‡½æ•°\n$$\n\\rho(z) = \\sum _{i=1}^{p} log(1+z_i^2)\n$$\næˆ–æŒ‡æ•°å‡½æ•°\n$$\n\\rho(z) = \\sum _{i=1}^{p} -exp(-z_i^2)\n$$\n\n#### è®­ç»ƒæ–¹æ³•\nç»™å®šä¸€ç»„Nä¸ªè¾“å…¥å‘é‡$x^1, ... , x^N$ï¼Œéœ€è¦åŒæ—¶å­¦ä¹ åŸºå‘é‡Aä»¥åŠæ¯ä¸ªè¾“å…¥æ ·æœ¬å¯¹åº”çš„ç¨€ç–ç¼–ç $z^1, ...,z^N$ã€‚\n\nç¨€ç–ç¼–ç çš„è®­ç»ƒè¿‡ç¨‹ä¸€èˆ¬ç”¨äº¤æ›¿ä¼˜åŒ–çš„æ–¹æ³•è¿›è¡Œï¼ˆè¿™ä¸€ç‚¹å’ŒALSå¾ˆç›¸ä¼¼ï¼‰ã€‚\n\nï¼ˆ1ï¼‰å›ºå®šåŸºå‘é‡Aï¼Œå¯¹æ¯ä¸ªè¾“å…¥$x^n$ ï¼Œè®¡ç®—å…¶å¯¹åº”çš„æœ€ä¼˜ç¼–ç ï¼ˆåŸå†…å®¹ä¸ºå‡å»ç¨€ç–æ€§è¡¡é‡å‡½æ•°ï¼Œè§‰å¾—ä¸å¯¹ï¼‰\n$$\n\\underset{x^n}{min} || x^n - Az^n ||^2 + \\eta \\rho (z^n), \\forall n \\in [1,N]\n$$\nï¼ˆ2ï¼‰å›ºå®šä¸Šä¸€æ­¥å¾—åˆ°çš„ç¼–ç $z^1, ...,z^N$ï¼Œè®¡ç®—å…¶æœ€ä¼˜çš„åŸºå‘é‡\n$$\n\\underset{A}{min} \\sum _{i=1}^{N} ( || x^n - Az^n ||^2 ) + \\lambda \\frac{1}{2} ||A||^2\n$$\nå…¶ä¸­ç¬¬äºŒé¡¹ä¸ºæ­£åˆ™åŒ–é¡¹ï¼Œ$\\lambda$ä¸ºæ­£åˆ™åŒ–é¡¹ç³»æ•°ã€‚\n\n#### ç¨€ç–ç¼–ç ä¼˜ç¼ºç‚¹\n\nç¨€ç–ç¼–ç çš„æ¯ä¸€ç»´éƒ½å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§ç‰¹å¾ï¼Œå’ŒåŸºäºç¨ å¯†å‘é‡çš„åˆ†å¸ƒå¼è¡¨ç¤ºç›¸æ¯”ï¼Œç¨€ç–ç¼–ç å…·æœ‰æ›´å°çš„è®¡ç®—é‡å’Œæ›´å¥½çš„å¯è§£é‡Šæ€§ç­‰ä¼˜ç‚¹ã€‚\n\n**è®¡ç®—é‡** ç¨€ç–æ€§å¸¦æ¥çš„æœ€å¤§å¥½å¤„å°±æ˜¯å¯ä»¥æå¤§çš„é™ä½è®¡ç®—é‡\n\n**å¯è§£é‡Šæ€§** å› ä¸ºç¨€ç–ç¼–ç åªæœ‰å°‘æ•°çš„éé›¶å…ƒç´ ï¼Œç›¸å½“äºå°†ä¸€ä¸ªè¾“å…¥æ ·æœ¬è¡¨ç¤ºä¸ºå°‘æ•°å‡ ä¸ªç›¸å…³çš„ç‰¹å¾ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æ›´å¥½çš„æè¿°å…¶ç‰¹å¾ï¼Œå¹¶æ˜“äºç†è§£\n\n**ç‰¹å¾é€‰æ‹©** ç¨€ç–æ€§å¸¦æ¥çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯å¯ä»¥å®ç°ç‰¹å¾çš„è‡ªåŠ¨é€‰æ‹©ï¼Œåªé€‰æ‹©å’Œè¾“å…¥æ ·æœ¬ç›¸å…³çš„æœ€å°‘ç‰¹å¾ï¼Œä»è€Œå¯ä»¥æ›´å¥½çš„è¡¨ç¤ºè¾“å…¥æ ·æœ¬ï¼Œé™ä½å™ªå£°å¹¶å‡è½»è¿‡æ‹Ÿåˆ\n\n### è‡ªç¼–ç å™¨\nè‡ªç¼–ç å™¨ï¼ˆAuto-Encoderï¼ŒAEï¼‰æ˜¯é€šè¿‡æ— ç›‘ç£çš„æ–¹å¼æ¥å­¦ä¹ ä¸€ç»„æ•°æ®çš„æœ‰æ•ˆç¼–ç ã€‚\n\nå‡è®¾æœ‰ä¸€ç»„dç»´çš„æ ·æœ¬$x^n \\in R^d, 1 \\leq n \\leq N$ï¼Œè‡ªç¼–ç å™¨å°†è¿™ç»„æ•°æ®æ˜ å°„åˆ°ç‰¹å¾ç©ºé—´å¾—åˆ°æ¯ä¸ªæ ·æœ¬çš„ç¼–ç $z^n \\in R^p, 1 \\leq n \\leq N$ï¼Œå¹¶ä¸”å¸Œæœ›è¿™ç»„ç¼–ç å¯ä»¥é‡æ„å‡ºåŸæ¥çš„æ ·æœ¬ã€‚\n\nè‡ªç¼–ç å™¨çš„ç»“æ„å¯åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šç¼–ç å™¨ï¼ˆencoderï¼‰ï¼š$f: R^d -> R^p$å’Œè§£ç å™¨ï¼ˆdecoderï¼‰ï¼š$R^p -> R^d$\n\nè‡ªç¼–ç å™¨çš„å­¦ä¹ ç›®æ ‡æ˜¯æœ€å°åŒ–é‡æ„è¯¯å·®ï¼ˆreconstruction errorsï¼‰\n\n$$\nL = \\sum_{n=1}^{N} || x^n -g(f(x^n)) ||^2 = \\sum || x^n -f \\cdot  g(x^n) ||^2\n$$\nå¦‚æœç‰¹å¾ç©ºé—´çš„ç»´åº¦på°é›¨åŸå§‹ç©ºé—´çš„ç»´åº¦dï¼Œè‡ªç¼–ç å™¨ç›¸å½“äºæ˜¯ä¸€ç§é™ç»´æˆ–ç‰¹å¾æŠ½å–æ–¹æ³•ã€‚å¦‚æœ$p \\geq d$ï¼Œä¸€å®šå¯ä»¥æ‰¾åˆ°ä¸€ç»„æˆ–å¤šç»„è§£ä½¿å¾—$f \\cdot g$ä¸ºå•ä½å‡½æ•°ï¼ˆIdentity Functionï¼‰ï¼Œå¹¶ä½¿å¾—é‡æ„é”™è¯¯ä¸º0ã€‚ä½†æ˜¯è¿™æ ·çš„è§£å¹¶æ²¡æœ‰å¤ªå¤šçš„æ„ä¹‰ï¼Œä½†æ˜¯å¦‚æœå†åŠ ä¸Šä¸€äº›é™„åŠ çš„çº¦æŸï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€äº›æœ‰æ„ä¹‰çš„è§£ï¼Œæ¯”å¦‚ç¼–ç çš„ç¨€ç–æ€§ã€å–å€¼èŒƒå›´ï¼Œfå’Œgçš„å…·ä½“å½¢å¼ç­‰ã€‚å¦‚æœæˆ‘ä»¬è®©ç¼–ç åªèƒ½å–kä¸ªä¸åŒçš„å€¼ï¼ˆk<Nï¼‰ï¼Œé‚£ä¹ˆè‡ªç¼–ç å™¨å°±å¯ä»¥è½¬æ¢ä¸ºä¸€ä¸ªkç±»çš„èšç±»é—®é¢˜ã€‚\n\næœ€ç®€å•çš„è‡ªç¼–ç å™¨å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä¸¤å±‚ç¥ç»ç½‘ç»œï¼Œè¾“å…¥å±‚åˆ°éšè—å±‚ç”¨æ¥ç¼–ç ï¼Œéšè—å±‚åˆ°è¾“å‡ºå±‚ç”¨æ¥è§£ç ï¼Œå±‚ä¸å±‚ä¹‹é—´äº’ç›¸å…¨è¿æ¥ã€‚\n\n![æœ€ç®€å•çš„è‡ªç¼–ç å™¨](https://img-blog.csdnimg.cn/20191104162315242.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nå¯¹äºæ ·æœ¬xï¼Œä¸­é—´éšè—å±‚ä¸ºç¼–ç ï¼š\n$$\nz = s(W^1 x + b^l)\n$$\nè¾“å‡ºä¸ºé‡æ„çš„æ•°æ®\n$$\nx' = s(W^2 z + b^l)\n$$\nå…¶ä¸­$W,b$ä¸ºç½‘æ ¼å‚æ•°ï¼Œ$s(.)$ä¸ºæ¿€æ´»å‡½æ•°ã€‚å¦‚æœä»¤$W^2$ç­‰äº$W^1$çš„è½¬ç½®ï¼Œå³$W^2=W^{(1)T}$ï¼Œç§°ä¸ºæ†ç»‘æƒé‡ï¼ˆtied weightsï¼‰ã€‚\n\nç»™å®šä¸€ç»„æ ·æœ¬ $x^n \\in [0,1]^d, 1 \\leq n \\leq N$ï¼Œå…¶é‡æ„é”™è¯¯ä¸ºï¼š\n$$\nL = \\sum_{n=1}^{N} || x^n -x^{'n} ||^2 + \\lambda ||W||_F^2\n$$\nå…¶ä¸­$\\lambda$ä¸ºæ­£åˆ™åŒ–ç³»æ•°ï¼Œé€šè¿‡æœ€å°åŒ–é‡æ„è¯¯å·®ï¼Œå¯ä»¥æœ‰æ•ˆçš„å­¦ä¹ ç½‘æ ¼çš„å‚æ•°ã€‚\n\næˆ‘ä»¬ä½¿ç”¨è‡ªç¼–ç å™¨æ˜¯ä¸ºäº†å¾—åˆ°æœ‰æ•ˆçš„æ•°æ®è¡¨ç¤ºï¼Œå› æ­¤åœ¨è®­ç»ƒæ•°æ®åï¼Œæˆ‘ä»¬ä¸€èˆ¬å»æ‰è§£ç å™¨ï¼Œåªä¿ç•™ç¼–ç å™¨ï¼Œç¼–ç å™¨çš„è¾“å‡ºå¯ä»¥ç›´æ¥ä½œä¸ºåç»­æœºå™¨å­¦ä¹ æ¨¡å‹çš„è¾“å…¥ã€‚\n\n### ç¨€ç–è‡ªç¼–ç å™¨\n\nè‡ªç¼–ç å™¨é™¤äº†å¯ä»¥å­¦ä¹ ä½ç»´ç¼–ç ä¹‹å¤–ï¼Œä¹Ÿå­¦ä¹ é«˜ç»´çš„ç¨€ç–ç¼–ç ã€‚å‡è®¾ä¸­é—´éšè—å±‚zçš„ç»´åº¦ä¸ºpï¼Œå¤§äºè¾“å…¥æ ·æœ¬çš„ç»´åº¦ï¼Œå¹¶è®©zå°½é‡ç¨€ç–ï¼Œè¿™å°±æ˜¯ç¨€ç–è‡ªç¼–ç å™¨ï¼ˆSparse Auto-Encoderï¼‰ã€‚å’Œç¨€ç–ç¼–ç ä¸€æ ·ï¼Œç¨€ç–è‡ªç¼–ç å™¨çš„ä¼˜ç‚¹æ˜¯æœ‰å¾ˆé«˜çš„æ¨¡å‹å¯è§£é‡Šæ€§ï¼Œå¹¶åŒæ—¶è¿›è¡Œäº†éšå¼çš„ç‰¹å¾é€‰æ‹©ã€‚\n\né€šè¿‡ç»™è‡ªç¼–ç å™¨ä¸­éšè—å•å…ƒzåŠ ä¸Šç¨€ç–æ€§é™åˆ¶ï¼Œè‡ªç¼–ç å™¨å¯ä»¥å­¦ä¹ åˆ°æ•°æ®ä¸­ä¸€äº›æœ‰ç”¨çš„ç»“æ„ã€‚\n\n### å †å è‡ªç¼–ç å™¨\n\nå¯¹äºå¾ˆå¤šæ•°æ®æ¥è¯´ï¼Œä»…ä½¿ç”¨ä¸¤å±‚ç¥ç»ç½‘ç»œçš„è‡ªç¼–ç å™¨è¿˜ä¸è¶³ä»¥è·å–ä¸€ç§å¥½çš„æ•°æ®è¡¨ç¤ºï¼Œä¸ºäº†è·å–æ›´å¥½çš„æ•°æ®è¡¨ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ›´æ·±å±‚çš„ç¥ç»ç½‘ç»œã€‚æ·±å±‚ç¥ç»ç½‘ç»œä½œä¸ºè‡ªç¼–ç å™¨æå–çš„æ•°æ®è¡¨ç¤ºä¸€èˆ¬ä¼šæ›´åŠ æŠ½è±¡ï¼Œèƒ½å¤Ÿå¾ˆå¥½çš„æ•æ‰åˆ°æ•°æ®çš„è¯­ä¹‰ä¿¡æ¯ã€‚åœ¨å®è·µä¸­ç»å¸¸ä½¿ç”¨é€å±‚å †å çš„æ–¹å¼æ¥è®­ç»ƒä¸€ä¸ªæ·±å±‚çš„è‡ªç¼–ç å™¨ï¼Œç§°ä¸ºå †å è‡ªç¼–ç å™¨ï¼ˆStacked Auto-Encoderï¼ŒSAEï¼‰ã€‚å †å è‡ªç¼–ç ä¸€èˆ¬å¯ä»¥é‡‡ç”¨é€å±‚è®­ç»ƒï¼ˆlayer-wise trainingï¼‰æ¥å­¦ä¹ ç½‘ç»œå‚æ•°ã€‚\n\n### é™å™ªè‡ªç¼–ç å™¨\n\né™å™ªè‡ªç¼–ç å™¨ï¼ˆDenoising Autoencoderï¼‰å°±æ˜¯ä¸€ç§é€šè¿‡å¼•å…¥å™ªå£°æ¥å¢åŠ ç¼–ç é²æ£’æ€§çš„è‡ªç¼–ç å™¨ã€‚å¯¹äºä¸€ä¸ªå‘é‡xï¼Œæˆ‘ä»¬é¦–å…ˆæ ¹æ®ä¸€ä¸ªæ¯”ä¾‹$\\mu$éšæœºå°†xçš„ä¸€äº›ç»´åº¦çš„å€¼è®¾ç½®ä¸º0ï¼Œå¾—åˆ°ä¸€ä¸ªè¢«æŸåçš„å‘é‡$\\tilde x$ã€‚ç„¶åå°†è¢«æŸåçš„å‘é‡$\\tilde x$è¾“å…¥ç»™è‡ªç¼–ç å™¨å¾—åˆ°ç¼–ç zï¼Œå¹¶é‡æ„åŸå§‹çš„æ— æŸè¾“å…¥xã€‚\n\nä¸‹å›¾ç»™å‡ºäº†è‡ªç¼–ç å™¨å’Œé™å™ªè‡ªç¼–ç å™¨çš„å¯¹æ¯”ï¼Œå…¶ä¸­$f_{\\theta}$ä¸ºç¼–ç å™¨ï¼Œ$g_{\\theta^â€™}$ä¸ºè§£ç å™¨ï¼Œ$L(x,x')$ä¸ºé‡æ„é”™è¯¯ã€‚\n\n![è‡ªç¼–ç å™¨å’Œé™å™ªè‡ªç¼–ç å™¨çš„å¯¹æ¯”](https://img-blog.csdnimg.cn/20191104175727219.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\né™å™ªè‡ªç¼–ç å™¨çš„æ€æƒ³ååˆ†ç®€å•ï¼Œé€šè¿‡å¼•å…¥å™ªå£°æ¥å­¦ä¹ æ›´é²æ£’æ€§çš„æ•°æ®ç¼–ç ï¼Œå¹¶æé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚\n\n## æ¦‚ç‡å¯†åº¦ä¼°è®¡\næ¦‚ç‡å¯†åº¦ä¼°è®¡ï¼ˆProbabilistic Density Estimationï¼‰ç®€ç§°å¯†åº¦ä¼°è®¡ï¼ˆDensity Estimationï¼‰ï¼Œæ˜¯åŸºäºä¸€äº›è§‚æµ‹æ ·æœ¬æ¥ä¼°è®¡ä¸€ä¸ªéšæœºå˜é‡çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ã€‚å¯†åº¦ä¼°è®¡åœ¨æœºå™¨å­¦ä¹ å’Œæ•°å­¦å»ºæ¨¡ä¸­åº”ç”¨ååˆ†å¹¿æ³›ã€‚\n\næ¦‚ç‡å¯†åº¦ä¼°è®¡åˆ†ä¸ºï¼š\n- å‚æ•°å¯†åº¦ä¼°è®¡\n- éå‚æ•°å¯†åº¦ä¼°è®¡\n\n### å‚æ•°å¯†åº¦ä¼°è®¡\n\nå‚æ•°å¯†åº¦ä¼°è®¡ï¼ˆParametric Density Estimationï¼‰æ˜¯æ ¹æ®å…ˆéªŒçŸ¥è¯†å‡è®¾éšæœºå˜é‡æœä»æŸç§åˆ†å¸ƒï¼Œç„¶åé€šè¿‡è®­ç»ƒæ ·æœ¬æ¥ä¼°è®¡åˆ†å¸ƒçš„å‚æ•°ã€‚\n\nä»¤ $D = {\\{x^n\\}}_{i=1}^{N}$ä¸ºæŸä¸ªæœªçŸ¥åˆ†å¸ƒä¸­ç‹¬ç«‹æŠ½å–çš„Nä¸ªè®­ç»ƒæ ·æœ¬ï¼Œå‡è®¾è¿™äº›æ ·æœ¬æœä»ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒå‡½æ•°$p(x|\\theta)$ï¼Œå…¶å¯¹æ•°ä¼¼ç„¶å‡½æ•°ä¸ºï¼š\n$$\nlog\\,p(D|\\theta) = \\sum_{n=1}^{N}log\\,p(x^n|\\theta)\n$$\n\nè¦ä¼°è®¡ä¸€ä¸ªå‚æ•°$\\theta ^{ML}$æ¥ä½¿å¾—ï¼š\n$$\n\\theta ^{ML} = \\underset{\\theta}{arg\\,max } \\sum_{n=1}^{N}log\\,p(x^n|\\theta)\n$$\nè¿™æ ·å‚æ•°ä¼°è®¡é—®é¢˜å°±è½¬åŒ–ä¸ºæœ€ä¼˜åŒ–é—®é¢˜ã€‚\n\n#### æ­£æ€åˆ†å¸ƒä¸­çš„å‚æ•°å¯†åº¦ä¼°è®¡\nå‡è®¾æ ·æœ¬$x \\in X$æœä»æ­£æ€åˆ†å¸ƒ $X \\sim N(\\mu,\\sigma^2)$ï¼Œæ­£æ€åˆ†å¸ƒçš„è¡¨è¾¾å¼å¦‚ä¸‹ï¼š\n$$\nX \\sim N(\\mu,\\sigma^2) = \\frac{1}{ \\sqrt{2\\pi} \\sigma^2} e^{- \\frac{(x-\\mu)^2}{2\\sigma^2}}\n$$\næ±‚ $\\mu,\\sigma^2$çš„æœ€å¤§ä¼¼ç„¶ä¼°è®¡é‡ã€‚\n\n$X$çš„æ¦‚ç‡å¯†åº¦ä¸ºï¼š\n$$\nf(x;\\mu,\\sigma^2) = \\frac{1}{ \\sqrt{2\\pi} \\sigma^2} e^{- \\frac{(x-\\mu)^2}{2\\sigma^2}}\n$$\nä¼¼ç„¶å‡½æ•°ä¸ºï¼š\n$$\nL(\\mu,\\sigma^2) = \\prod_{i=1}^{N} \\frac{1}{ \\sqrt{2\\pi} \\sigma^2} e^{- \\frac{(x-\\mu)^2}{2\\sigma^2}}\n\\\\\n= (2\\pi)^{-\\frac{N}{2}} (\\sigma^2)^{-\\frac{N}{2}} e^{(-\\frac{1}{2\\sigma^2} \\sum_{i=1}^{N} (x_i - \\mu)^2)}\n$$\nå¯¹å…¶æ±‚å¯¼å¯å¾—å¯¹æ•°ä¼¼ç„¶å‡½æ•°ä¸ºï¼š\n$$\nLn\\, L =-\\frac{N}{2} ln(2\\pi)-\\frac{N}{2} ln(\\sigma^2) - \\frac{1}{2\\sigma^2} \\sum_{i=1}^{N}(x_i - \\mu)^2\n$$\nä»¤ï¼š\n$$\n\\left\\{\\begin{matrix}\n\\frac{\\partial }{\\partial \\mu }ln\\, L = \\frac{1}{\\sigma^2} (\\sum_{i=1}^{N} x_i -N\\mu ) =0 & \\\\ \n\\\\\n\\frac{\\partial }{\\partial \\sigma^2 }ln\\, L = - \\frac{N}{2\\sigma^2} + \\frac{1}{ (2\\sigma^2)^2} \\sum_{i=1}^{N}(x_i-\\mu)^2 =0& \n\\end{matrix}\\right.\n$$\nç”±å‰ä¸€å¼è§£å¾—$\\tilde{\\mu}=\\frac{1}{N}\\sum_{i=1}^{N}x_i = \\bar{\\mu}$ï¼Œä»£å…¥åä¸€å¼å¾—$\\tilde{\\sigma^2}=\\frac{1}{N}\\sum_{i=1}^{N}(x_i-\\bar{x})^2$ï¼Œå› æ­¤å¾—$\\mu,\\sigma^2$çš„æœ€å¤§ä¼¼ç„¶ä¼°è®¡ä¸ºï¼š\n$$\n\\tilde{\\mu} = \\bar{X},\\tilde{\\sigma^2}=\\frac{1}{N}(x_i - \\bar{x})^2\n$$\n\n#### å¤šé¡¹åˆ†å¸ƒä¸­çš„å‚æ•°å¯†åº¦ä¼°è®¡\nå‡è®¾æ ·æœ¬æœä»Kä¸ªçŠ¶æ€çš„å¤šæ€åˆ†å¸ƒï¼Œä»¤onehotå‘é‡$x\\in[0,1]^K$æ¥è¡¨ç¤ºç¬¬Kä¸ªçŠ¶æ€ï¼Œå³$x_k=1$ï¼Œå…¶ä½™$x_{i,k \\neq k}=0$ï¼Œåˆ™æ ·æœ¬xçš„æ¦‚ç‡å¯†åº¦å‡½æ•°ä¸ºï¼š\n$$\np(x|\\mu) = \\prod_{k=1}^{K}\\mu_k ^{x_K}\n$$\nå…¶ä¸­$\\mu_k$ä¸ºç¬¬kä¸ªçŠ¶æ€çš„æ¦‚ç‡ï¼Œå¹¶ä¸”æ»¡è¶³$\\sum_{k=1}^{K} \\mu_k =1$ã€‚\n\næ•°æ®é›†$D={\\{x^n\\}}_{n=1}^{N}$çš„å¯¹æ•°ä¼¼ç„¶å‡½æ•°ä¸ºï¼š\n$$\nlog(D|\\mu) = \\sum_{n=1}^{N} \\sum_{k=1}^{K} x_n ^k log (\\mu _k)\n$$\nå¤šé¡¹åˆ†å¸ƒçš„å‚æ•°ä¼°è®¡ä¸ºçº¦æŸä¼˜åŒ–é—®é¢˜ï¼Œå¼•å…¥æ‹‰æ ¼æœ—æ—¥ä¹˜å­$\\lambda$ï¼Œå°†åŸé—®é¢˜è½¬åŒ–ä¸ºæ— çº¦æŸä¼˜åŒ–é—®é¢˜ã€‚\n\n$$\n\\underset{\\mu, \\lambda}{ max} \\sum_{n=1}^{N} \\sum_{k=1}^{K} x_k ^n log(\\mu_k) + \\lambda (\\sum_{k=1}^{K} \\mu_k -1)\n$$\nä¸Šå¼åˆ†åˆ«å¯¹$\\mu_k,\\lambda$æ±‚åï¼Œå¹¶ä»¤å…¶ç­‰äº0ï¼Œå¾—åˆ°ï¼š\n$$\n\\mu_k ^{ML} = \\frac{m_k}{N}, 1 \\leq N \\leq K\n$$\nå…¶ä¸­$m_k = \\sum_{n=1}^{N} x_k ^n$ä¸ºæ•°æ®é›†ä¸­å–å€¼ä¸ºç¬¬kä¸ªçŠ¶æ€çš„æ ·æœ¬æ•°é‡ã€‚\n\nåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå‚æ•°å¯†åº¦ä¼°è®¡ä¸€èˆ¬å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š\n- ï¼ˆ1ï¼‰æ¨¡å‹é€‰æ‹©é—®é¢˜ï¼Œå³å¦‚ä½•é€‰æ‹©æ•°æ®åˆ†å¸ƒçš„å¯†åº¦å‡½æ•°ï¼Œå®é™…çš„æ•°æ®åˆ†å¸ƒå¾€å¾€æ˜¯éå¸¸å¤æ‚çš„ï¼Œè€Œä¸æ˜¯ç®€å•çš„æ­£æ€åˆ†å¸ƒæˆ–è€…å¤šé¡¹åˆ†å¸ƒã€‚\n- ï¼ˆ2ï¼‰ä¸å¯è§‚æµ‹å˜é‡é—®é¢˜ï¼Œå³æˆ‘ä»¬ç”¨æ¥è®­ç»ƒæ•°æ®çš„æ ·æœ¬åªåŒ…å«éƒ¨åˆ†çš„å¯è§‚æµ‹å˜é‡ï¼Œè¿˜æœ‰ä¸€äº›éå¸¸å…³é”®çš„å˜é‡æ˜¯æ— æ³•è§‚æµ‹çš„ï¼Œè¿™å¯¼è‡´æˆ‘ä»¬å¾ˆéš¾ä¼°è®¡æ•°æ®çš„çœŸå®åˆ†å¸ƒã€‚\n- ï¼ˆ3ï¼‰ç»´åº¦ç¾éš¾é—®é¢˜ï¼Œå³é«˜ç»´çš„å‚æ•°ä¼°è®¡ååˆ†å›°éš¾ã€‚éšç€ç»´åº¦çš„å¢åŠ ï¼Œä¼°è®¡å‚æ•°æ‰€éœ€è¦çš„æ ·æœ¬é‡å‘ˆæŒ‡æ•°å¢åŠ ã€‚åœ¨æ ·æœ¬ä¸è¶³æ—¶ä¼šå‡ºç°è¿‡æ‹Ÿåˆã€‚\n\n\n#### éå‚æ•°å¯†åº¦ä¼°è®¡\n\néå‚æ•°å¯†åº¦ä¼°è®¡ï¼ˆNonparametric Density Estimationï¼‰æ˜¯ä¸å‡è®¾æ•°æ®æœä»æŸç§åˆ†å¸ƒï¼Œé€šè¿‡å°†æ ·æœ¬ç©ºé—´åˆ’åˆ†ä¸ºä¸åŒçš„åŒºåŸŸå¹¶ä¼°è®¡æ¯ä¸ªåŒºåŸŸçš„æ¦‚ç‡æ¥è¿‘ä¼¼æ•°æ®çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ã€‚\n\nå¯¹äºé«˜çº¬ç©ºé—´ä¸­çš„ä¸€ä¸ªéšæœºå‘é‡xï¼Œå‡è®¾å…¶æœä»ä¸€ä¸ªæœªçŸ¥åˆ†å¸ƒp(x)ï¼Œåˆ™xè½å…¥ç©ºé—´ä¸­çš„å°åŒºåŸŸRçš„æ¦‚ç‡ä¸ºï¼š  $P=\\int_{R} p(x)dx$ã€‚\n\nç»™å®šNä¸ªè®­ç»ƒæ ·æœ¬$D=\\{x^n\\}_{n=1}^{N}$ï¼Œè½å…¥åŒºåŸŸRçš„æ ·æœ¬æ•°é‡Kæœä»äºŒé¡¹åˆ†å¸ƒï¼š\n$$\nP_K = \\binom{N}{K}P^K(1-P)^{1-K}\n$$\nå…¶ä¸­$K/N$çš„æœŸæœ›ä¸º$E[K/N]=P$ï¼Œæ–¹å·®ä¸º$var(K/N)=P(1-P)/N$ã€‚å½“Néå¸¸å¤§æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿‘ä¼¼è®¤ä¸ºï¼š$P\\approx \\frac{K}{N}$ï¼Œå‡è®¾åŒºåŸŸRè¶³å¤Ÿå°ï¼Œå…¶å†…éƒ¨çš„æ¦‚ç‡å¯†åº¦æ˜¯ç›¸åŒçš„ï¼Œåˆ™æœ‰$P\\approx p(x)V$ï¼Œå…¶ä¸­Vä¸ºåŒºåŸŸRçš„æåŠï¼Œç»“åˆå‰è¾¹çš„ä¸¤ä¸ªå…¬å¼ï¼Œå¯å¾—ï¼š$p(x)\\approx \\frac{K}{NV}$ã€‚\n\næ ¹æ®ä¸Šå¼ï¼Œè¦å‡†ç¡®çš„ä¼°è®¡p(x)éœ€è¦å°½é‡ä½¿å¾—æ ·æœ¬æ•°é‡Nè¶³å¤Ÿå¤§ï¼ŒåŒºåŸŸä½“ç§¯Vå°½å¯èƒ½çš„å°ã€‚ä½†åœ¨å…·ä½“çš„åº”ç”¨ä¸­å—ï¼Œæ ·æœ¬æ•°é‡ä¸€èˆ¬æœ‰é™ï¼Œè¿‡å°çš„åŒºåŸŸå¯¼è‡´è½å…¥è¯¥åŒºåŸŸçš„æ ·æœ¬æ¯”è¾ƒå°‘ï¼Œè¿™æ ·ä¼°è®¡çš„æ¦‚ç‡å¯†åº¦å°±ä¸å¤ªå‡†ç¡®ã€‚\n\nå› æ­¤åœ¨å®è·µä¸­ä¼°è®¡éå‚æ•°å¯†åº¦é€šå¸¸ä½¿ç”¨ä¸¤ç§æ–¹æ³•ï¼š\n- ï¼ˆ1ï¼‰å›ºå®šåŒºåŸŸå¤§å°Vï¼Œç»Ÿè®¡è½å…¥ä¸åŒåŒºåŸŸçš„æ•°é‡ï¼Œè¿™ç§æ–¹å¼åŒ…æ‹¬ç›´æ–¹å›¾å’Œæ ¸æ–¹æ³•ä¸¤ç§\n- ï¼ˆ2ï¼‰æ”¹å˜åŒºåŸŸå¤§å°ï¼Œä»¥ä½¿å¾—è½å…¥æ¯ä¸ªåŒºåŸŸçš„æ ·æœ¬æ•°é‡ä¸ºKï¼Œè¿™ç§æ–¹æ³•æˆä¸ºKè¿‘é‚»æ–¹æ³•\n\n##### ç›´æ–¹å›¾æ–¹æ³•\nç›´æ–¹å›¾ï¼ˆHistogram Methodï¼‰æ˜¯ä¸€ç§éå¸¸ç›´è§‚çš„ä¼°è®¡è¿ç»­å˜é‡å¯†åº¦å‡½æ•°çš„æ–¹æ³•ï¼Œå¯ä»¥è¡¨ç¤ºä¸ºä¸€ç§æŸ±çŠ¶å›¾ã€‚\n\nä»¥ä¸€ç»´éšæœºå˜é‡ä¸ºä¾‹ï¼Œé¦–å…ˆå°†å…¶å–å€¼èŒƒå›´åˆ’åˆ†ä¸ºMä¸ªè¿ç»­çš„ã€ä¸é‡å çš„åŒºé—´ï¼Œæ¯ä¸ªåŒºé—´çš„å®½åº¦ä¸º$\\Delta m$ï¼Œç»™å®š$N$ä¸ªè®­ç»ƒæ ·æœ¬ï¼Œæˆ‘ä»¬ç»Ÿè®¡è¿™äº›æ ·æœ¬è½å…¥æ¯ä¸ªåŒºé—´çš„æ•°é‡$K_m$ï¼Œç„¶åå°†ä»–ä»¬å½’ä¸€åŒ–ä¸ºå¯†åº¦å‡½æ•°ã€‚\n\n$$\np_m = \\frac {K_m}{N\\Delta m},1 \\leq m \\leq  M\n$$\nç›´æ–¹å›¾çš„å…³é”®é—®é¢˜æ˜¯å¦‚ä½•é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„$\\Delta m$ï¼Œå¦‚æœè¯¥å€¼å¤ªå°ï¼Œé‚£ä¹ˆè½å…¥æ¯ä¸ªåŒºé—´çš„æ ·æœ¬ä¼šç‰¹åˆ«å°‘ï¼Œå…¶ä¼°è®¡çš„åŒºé—´å¯†åº¦ä¹Ÿä¼šæœ‰å¾ˆå¤§çš„éšæœºæ€§ï¼Œå¦‚æœè¯¥å€¼è¿‡å¤§ï¼Œå…¶ä¼°è®¡çš„å¯†åº¦å‡½æ•°ä¼šå˜å¾—ååˆ†å¹³æ»‘ã€‚ä¸‹å›¾ç»™å‡ºäº†ä¸¤ä¸ªç›´æ–¹å›¾çš„ä¾‹å­ï¼Œå…¶ä¸­è“è‰²è¡¨ç¤ºçœŸå®çš„å¯†åº¦å‡½æ•°ï¼Œçº¢è‰²è¡¨ç¤ºç›´æ–¹å›¾ä¼°è®¡çš„å¯†åº¦å‡½æ•°ã€‚\n\n![ç›´æ–¹å›¾ä¼°è®¡å¯†åº¦å‡½æ•°](https://img-blog.csdnimg.cn/20191104090336556.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nç›´æ–¹å›¾é€šå¸¸ç”¨æ¥å¤„ç†ä½ç»´éšæœºå˜é‡ï¼Œå¯ä»¥éå¸¸å¿«é€Ÿçš„å¯¹æ•°æ®çš„åˆ†å¸ƒè¿›è¡Œå¯è§†åŒ–ï¼Œä½†å…¶**ç¼ºç‚¹**æ˜¯å¾ˆéš¾æ‰©å±•åˆ°é«˜ç»´å˜é‡ï¼Œå‡è®¾ä¸€ä¸ªdç»´çš„éšæœºå˜é‡ï¼Œå¦‚æœæ¯ä¸€ç»´éƒ½åˆ’åˆ†ä¸ºMä¸ªç©ºé—´ï¼Œé‚£ä¹ˆæ•´ä¸ªç©ºé—´çš„åŒºåŸŸæ•°é‡ä¸º$M^d$ï¼Œç›´æ–¹å›¾ä¼°è®¡çš„æ–¹æ³•ä¼šéšç€ç©ºé—´çš„å¢å¤§è€ŒæŒ‡æ•°å¢é•¿ï¼Œä»è€Œå½¢æˆ**ç»´åº¦ç¾éš¾ï¼ˆCurse Of Dimensionalityï¼‰**\n\n##### æ ¸æ–¹æ³•\n\næ ¸å¯†åº¦ä¼°è®¡ï¼ˆKernel Density Estimationï¼‰ï¼Œä¹Ÿå«Parzençª—æ–¹æ³•ï¼Œæ˜¯ä¸€ç§ç›´æ–¹å›¾æ–¹æ³•çš„æ”¹è¿›ã€‚\n\nå‡è®¾$R$ä¸º$d$ç»´ç©ºé—´ä¸­çš„ä¸€ä¸ªä»¥ç‚¹xä¸ºä¸­å¿ƒçš„â€œè¶…ç«‹æ–¹ä½“â€ï¼Œå¹¶å®šä¹‰æ ¸å‡½æ•°\n$$\n\\phi (\\frac{z-x}{h}) = \\left\\{\\begin{matrix}\n1 \\,\\,\\,\\,\\,\\, if \\, |z_i - x_i|< \\frac{h}{2},  1 \\leq i \\leq d & \\\\ \n0 \\,\\,\\,\\,\\,\\, else & \n\\end{matrix}\\right.\n$$\n\næ¥è¡¨ç¤ºä¸€ä¸ªæ ·æœ¬æ˜¯å¦è½å…¥è¯¥è¶…ç«‹æ–¹ä½“ä¸­ï¼Œå…¶ä¸­$h$ä¸ºè¶…ç«‹æ–¹ä½“çš„è¾¹é•¿ï¼Œä¹Ÿç§°ä¸ºæ ¸å‡½æ•°çš„å¯†å®½åº¦ã€‚\n\nç»™å®š$N$ä¸ªè®­ç»ƒæ ·æœ¬$D$ï¼Œè½å…¥åŒºåŸŸ$R$çš„æ ·æœ¬æ•°é‡$K$ä¸ºï¼š\n$$\nK = \\sum_{n=1}^{K} \\phi (\\frac {x^n - x}{h})\n$$\nåˆ™ç‚¹$x$çš„å¯†åº¦ä¼°è®¡ä¸ºï¼š\n$$\np(x) = \\frac{K}{Nh^d} =\\frac{1}{Nh^d} \\sum_{n=1}^{K} \\phi (\\frac {x^n - x}{h})\n$$\nå…¶ä¸­$h^d$è¡¨ç¤ºåŒºåŸŸ$R$çš„ä½“ç§¯ã€‚\n\né™¤äº†è¶…ç«‹æ–¹ä½“çš„æ ¸å‡½æ•°æ„å¤–ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€‰æ‹©æ›´åŠ å¹³æ»‘çš„æ ¸å‡½æ•°ï¼Œæ¯”å¦‚é«˜æ–¯æ ¸å‡½æ•°ï¼š\n$$\n\\phi (\\frac {z-x}{h}) = \\frac {1}{ (2\\pi)^{\\frac{1}{2}} h} exp(- \\frac{||z-x||^2}{2h^2})\n$$\nå…¶ä¸­$h^2$å¯ä»¥çœ‹åšæ˜¯é«˜æ–¯æ ¸å‡½æ•°çš„æ–¹å·®ï¼Œè¿™æ ·ç‚¹$x$çš„å¯†åº¦ä¼°è®¡ä¸ºï¼š\n$$\np (x) = \\frac{1}{N} \\sum_{n=1}^{N}   \\frac {1}{ (2\\pi)^{\\frac{1}{2}} h} exp(- \\frac{||z-x||^2}{2h^2})\n$$\n\n##### Kè¿‘é‚»æ–¹æ³•\n\næ ¸å¯†åº¦ä¼°è®¡æ–¹æ³•ä¸­çš„æ ¸å®½åº¦æ˜¯å›ºå®šçš„ï¼Œå› æ­¤åŒä¸€ä¸ªå®½åº¦å¯èƒ½å¯¹é«˜å¯†åº¦çš„åŒºåŸŸè¿‡å¤§ï¼Œè€Œå¯¹ä½å¯†åº¦çš„åŒºåŸŸè¿‡å°ã€‚ä¸€ç§æ›´åŠ çµæ´»çš„æ–¹å¼æ˜¯è®¾ç½®ä¸€ç§å¯å˜å®½åº¦çš„åŒºåŸŸï¼Œå¹¶ä½¿å¾—è½å…¥æ¯ä¸ªåŒºåŸŸä¸­çš„æ ·æœ¬æ•°é‡å›ºå®šä¸ºKã€‚\n\nè¦ä¼°è®¡ç‚¹xçš„å¯†åº¦ï¼Œé¦–å…ˆæ‰¾åˆ°ä¸€ä¸ªä»¥xä¸ºä¸­å¿ƒçš„çƒä½“ï¼Œä½¿å¾—è½å…¥çƒä½“çš„æ ·æœ¬æ•°é‡ä¸ºKï¼Œç„¶åæ ¹æ®å…¬å¼$p(x)\\approx \\frac{K}{NV}$å°±å¯ä»¥è®¡ç®—å‡ºç‚¹xçš„å¯†åº¦ã€‚å› ä¸ºè½å…¥çƒä½“çš„æ ·æœ¬ä¹Ÿæ˜¯ç¦»xæœ€è¿‘çš„Kä¸ªæ ·æœ¬ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•ä¹Ÿç§°ä¸ºKè¿‘é‚»ï¼ˆK-Nearest Neughborï¼‰æ–¹æ³•ã€‚\n\nåœ¨Kè¿‘é‚»æ–¹æ³•ä¸­ï¼ŒKå€¼çš„é€‰æ‹©ååˆ†é‡è¦ï¼Œå¦‚æœKå¤ªå°ï¼Œæ— æ³•æœ‰æ•ˆçš„ä¼°è®¡å¯†åº¦å‡½æ•°ï¼Œè€ŒKå¤ªå¤§ä¹Ÿä¼šä½¿å±€éƒ¨çš„å¯†åº¦ä¸å‡†ç¡®ï¼Œå¹¶ä¸”ä¼šå¢åŠ è®¡ç®—å¼€é”€ã€‚\n\nKè¿‘é‚»æ–¹æ³•ä¹Ÿç»å¸¸ç”¨äºåˆ†ç±»é—®é¢˜ï¼Œç§°ä¸ºKè¿‘é‚»åˆ†ç±»å™¨ã€‚ å½“K=1æ—¶ä¸ºæœ€è¿‘é‚»åˆ†ç±»å™¨ã€‚\n\næœ€è¿‘é‚»åˆ†ç±»å™¨çš„ä¸€ä¸ªæ€§è´¨æ˜¯ï¼Œå½“ $N \\rightarrow \\infty$ï¼Œå…¶åˆ†ç±»é”™è¯¯ç‡ä¸è¶…è¿‡æœ€ä¼˜åˆ†ç±»å™¨é”™è¯¯ç‡çš„ä¸¤å€ã€‚\n\n## æ€»ç»“\næ— ç›‘ç£å­¦ä¹ æ˜¯ä¸€ç§ååˆ†é‡è¦çš„æœºå™¨å­¦ä¹ æ–¹æ³•ï¼Œæ— ç›‘ç£å­¦ä¹ é—®é¢˜ä¸»è¦å¯ä»¥åˆ†ä¸ºèšç±»ï¼Œç‰¹å¾å­¦ä¹ ï¼Œå¯†åº¦ä¼°è®¡ç­‰å‡ ç§ç±»å‹ã€‚ä½†æ˜¯æ— ç›‘ç£å­¦ä¹ å¹¶æ²¡æœ‰åƒæœ‰ç›‘ç£å­¦ä¹ é‚£æ ·å–å¾—å¹¿æ³›çš„æˆåŠŸï¼Œä¸»è¦åŸå› åœ¨äºå…¶ç¼ºå°‘æœ‰æ•ˆå®¢è§‚è¯„ä»·çš„æ–¹æ³•ï¼Œå¯¼è‡´å¾ˆéš¾è¡¡é‡ä¸€ä¸ªæ— ç›‘ç£å­¦ä¹ æ–¹æ³•çš„å¥½åã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["ç¥ç»ç½‘ç»œ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"å†·å¯åŠ¨ä¸­çš„å¤šé¿è€è™æœºé—®é¢˜ï¼ˆMulti-Armed Banditï¼ŒMABï¼‰","url":"/2019/10/15/RecSys/å†·å¯åŠ¨/å†·å¯åŠ¨ä¸­çš„å¤šé¿è€è™æœºé—®é¢˜ï¼ˆMulti-Armed Banditï¼ŒMABï¼‰/","content":"\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/102560272\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\n\n---\n\næ¨èç³»ç»Ÿä¸­æœ‰ä¸¤ä¸ªå¾ˆé‡è¦çš„é—®é¢˜ï¼šEEé—®é¢˜å’Œå†·å¯åŠ¨ã€‚åœ¨å®é™…çš„åœºæ™¯ä¸­å¾ˆå¥½çš„è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜åˆå¾ˆéš¾ï¼Œæ¯”å¦‚å†·å¯åŠ¨ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºçƒ­é—¨ã€ç”¨æˆ·ã€ç¬¬ä¸‰æ–¹ç­‰ä¿¡æ¯è¿›è¡ŒåŠä¸ªæ€§åŒ–çš„æ¨èï¼Œä½†å¾ˆéš¾å»è·å¾—ç”¨æˆ·çš„çœŸå®å…´è¶£åˆ†å¸ƒã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§ç®—æ³•å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ï¼šBanditã€‚\n\n### Banditç®—æ³•ä¸æ¨èç³»ç»Ÿ\nåœ¨æ¨èç³»ç»Ÿé¢†åŸŸé‡Œï¼Œæœ‰ä¸¤ä¸ªæ¯”è¾ƒç»å…¸çš„é—®é¢˜å¸¸è¢«äººæèµ·ï¼Œä¸€ä¸ªæ˜¯EEé—®é¢˜ï¼Œå¦ä¸€ä¸ªæ˜¯ç”¨æˆ·å†·å¯åŠ¨é—®é¢˜ã€‚\n\nEEé—®é¢˜åˆå«Exploit-Exploreã€‚\n- Exploitè¡¨ç¤ºçš„æ˜¯å¯¹äºç”¨æˆ·å·²ç»ç¡®å®šçš„å…´è¶£å½“ç„¶è¦è¿åˆã€‚\n- Exploreè¡¨ç¤ºçš„å¦‚æœä»…å¯¹ç”¨æˆ·è¿›è¡Œå…´è¶£æŠ•æ”¾ï¼Œå¾ˆå¿«å°±ä¼šçœ‹åŒï¼Œæ‰€ä»¥è¦ä¸æ–­çš„æ¢ç´¢ç”¨æˆ·çš„æ–°å…´è¶£\n\næ‰€ä»¥åœ¨è¿›è¡Œç‰©å“æ¨èæ—¶ï¼Œä¸ä»…è¦æŠ•å…¶æ‰€å¥½ï¼Œè¿˜è¦è¿›è¡Œé€‚å½“çš„é•¿å°¾ç‰©å“æŒ–æ˜ã€‚\n\nç”¨æˆ·å†·å¯åŠ¨é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯é¢å¯¹æ–°ç”¨æˆ·æ—¶ï¼Œå¦‚ä½•èƒ½å¤Ÿé€šè¿‡è‹¥å¹²æ¬¡å®éªŒï¼ŒçŒœå‡ºç”¨æˆ·çš„å¤§è‡´å…´è¶£ã€‚\n\nè¿™ä¸¤ä¸ªé—®é¢˜æœ¬è´¨ä¸Šéƒ½æ˜¯å¦‚ä½•é€‰æ‹©ç”¨æˆ·æ„Ÿå…´è¶£çš„ä¸»é¢˜è¿›è¡Œæ¨èï¼Œæ¯”è¾ƒç¬¦åˆBanditç®—æ³•èƒŒåçš„MABé—®é¢˜ã€‚\n\næ¯”å¦‚ï¼Œç”¨Banditç®—æ³•è§£å†³å†·å¯åŠ¨çš„å¤§è‡´æ€è·¯å¦‚ä¸‹ï¼šç”¨åˆ†ç±»æˆ–è€…Topicæ¥è¡¨ç¤ºæ¯ä¸ªç”¨æˆ·å…´è¶£ï¼Œä¹Ÿå°±æ˜¯MABé—®é¢˜ä¸­çš„è‡‚ï¼ˆArmï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‡ æ¬¡è¯•éªŒï¼Œæ¥åˆ»ç”»å‡ºæ–°ç”¨æˆ·å¿ƒç›®ä¸­å¯¹æ¯ä¸ªTopicçš„æ„Ÿå…´è¶£æ¦‚ç‡ã€‚è¿™é‡Œï¼Œå¦‚æœç”¨æˆ·å¯¹æŸä¸ªTopicæ„Ÿå…´è¶£ï¼ˆæä¾›äº†æ˜¾å¼åé¦ˆæˆ–éšå¼åé¦ˆï¼‰ï¼Œå°±è¡¨ç¤ºæˆ‘ä»¬å¾—åˆ°äº†æ”¶ç›Šï¼Œå¦‚æœæ¨ç»™äº†å®ƒä¸æ„Ÿå…´è¶£çš„Topicï¼Œæ¨èç³»ç»Ÿå°±è¡¨ç¤ºå¾ˆé—æ†¾ï¼ˆregretï¼‰äº†ã€‚å¦‚æ­¤ç»å†â€œé€‰æ‹©-è§‚å¯Ÿ-æ›´æ–°-é€‰æ‹©â€çš„å¾ªç¯ï¼Œç†è®ºä¸Šæ˜¯è¶Šæ¥è¶Šé€¼è¿‘ç”¨æˆ·çœŸæ­£æ„Ÿå…´è¶£çš„Topicçš„ã€‚\n\n### Banditç®—æ³•æ¥æº\nBanditç®—æ³•æ¥æºäºå†å²æ‚ ä¹…çš„èµŒåšå­¦ï¼Œå®ƒè¦è§£å†³çš„é—®é¢˜æ˜¯è¿™æ ·çš„ï¼š\n\nä¸€ä¸ªèµŒå¾’ï¼Œè¦å»æ‘‡è€è™æœºï¼Œèµ°è¿›èµŒåœºä¸€çœ‹ï¼Œä¸€æ’è€è™æœºï¼Œå¤–è¡¨ä¸€æ¨¡ä¸€æ ·ï¼Œä½†æ˜¯æ¯ä¸ªè€è™æœºåé’±çš„æ¦‚ç‡å¯ä¸ä¸€æ ·ï¼Œä»–ä¸çŸ¥é“æ¯ä¸ªè€è™æœºåé’±çš„æ¦‚ç‡åˆ†å¸ƒæ˜¯ä»€ä¹ˆï¼Œé‚£ä¹ˆæ¯æ¬¡è¯¥é€‰æ‹©å“ªä¸ªè€è™æœºå¯ä»¥åšåˆ°æœ€å¤§åŒ–æ”¶ç›Šå‘¢ï¼Ÿè¿™å°±æ˜¯å¤šè‡‚èµŒåšæœºé—®é¢˜ï¼ˆMulti-armed bandit problem, K-armed bandit problem, MABï¼‰ã€‚\n\næ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæœ€å¥½çš„åŠæ³•æ˜¯å»è¯•ä¸€è¯•ï¼Œä¸æ˜¯ç›²ç›®åœ°è¯•ï¼Œè€Œæ˜¯æœ‰ç­–ç•¥åœ°å¿«é€Ÿè¯•ä¸€è¯•ï¼Œè¿™äº›ç­–ç•¥å°±æ˜¯Banditç®—æ³•ã€‚\n\nè¿™ä¸ªå¤šè‡‚é—®é¢˜ï¼Œæ¨èç³»ç»Ÿé‡Œå¾ˆå¤šé—®é¢˜éƒ½ä¸å®ƒç±»ä¼¼ï¼š\n\n- å‡è®¾ä¸€ä¸ªç”¨æˆ·å¯¹ä¸åŒç±»åˆ«çš„å†…å®¹æ„Ÿå…´è¶£ç¨‹åº¦ä¸åŒï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æ¨èç³»ç»Ÿåˆæ¬¡è§åˆ°è¿™ä¸ªç”¨æˆ·æ—¶ï¼Œæ€ä¹ˆå¿«é€Ÿåœ°çŸ¥é“ä»–å¯¹æ¯ç±»å†…å®¹çš„æ„Ÿå…´è¶£ç¨‹åº¦ï¼Ÿè¿™å°±æ˜¯æ¨èç³»ç»Ÿçš„å†·å¯åŠ¨ã€‚\n- å‡è®¾æˆ‘ä»¬æœ‰è‹¥å¹²å¹¿å‘Šåº“å­˜ï¼Œæ€ä¹ˆçŸ¥é“è¯¥ç»™æ¯ä¸ªç”¨æˆ·å±•ç¤ºå“ªä¸ªå¹¿å‘Šï¼Œä»è€Œè·å¾—æœ€å¤§çš„ç‚¹å‡»æ”¶ç›Šï¼Ÿæ˜¯æ¯æ¬¡éƒ½æŒ‘æ•ˆæœæœ€å¥½é‚£ä¸ªä¹ˆï¼Ÿé‚£ä¹ˆæ–°å¹¿å‘Šå¦‚ä½•æ‰æœ‰å‡ºå¤´ä¹‹æ—¥ï¼Ÿ\n- æˆ‘ä»¬çš„ç®—æ³•å·¥ç¨‹å¸ˆåˆæƒ³å‡ºäº†æ–°çš„æ¨¡å‹ï¼Œæœ‰æ²¡æœ‰æ¯”A/B testæ›´å¿«çš„æ–¹æ³•çŸ¥é“å®ƒå’Œæ—§æ¨¡å‹ç›¸æ¯”è°æ›´é è°±ï¼Ÿ\n- å¦‚æœåªæ˜¯æ¨èå·²çŸ¥çš„ç”¨æˆ·æ„Ÿå…´è¶£çš„ç‰©å“ï¼Œå¦‚ä½•æ‰èƒ½ç§‘å­¦åœ°å†’é™©ç»™ä»–æ¨èä¸€äº›æ–°é²œçš„ç‰©å“ï¼Ÿ\n\nBanditç®—æ³•éœ€è¦é‡åŒ–ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šé”™è¯¯çš„é€‰æ‹©åˆ°åº•æœ‰å¤šå¤§çš„é—æ†¾ï¼Ÿèƒ½ä¸èƒ½é—æ†¾å°‘ä¸€äº›ï¼Ÿå¸¸è§Banditç®—æ³•æœ‰å“ªäº›å‘¢ï¼Ÿå¾€ä¸‹çœ‹\n\n### Thompson sampling\n\n#### 1ã€Betaåˆ†å¸ƒ\nThompson Samplingæ˜¯åŸºäºBetaåˆ†å¸ƒè¿›è¡Œçš„ï¼Œæ‰€ä»¥é¦–å…ˆçœ‹ä¸‹ä»€ä¹ˆæ˜¯Betaåˆ†å¸ƒï¼Ÿ\n\nBetaåˆ†å¸ƒå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªæ¦‚ç‡çš„æ¦‚ç‡åˆ†å¸ƒï¼Œå½“ä½ ä¸çŸ¥é“ä¸€ä¸ªä¸œè¥¿çš„å…·ä½“æ¦‚ç‡æ˜¯å¤šå°‘æ—¶ï¼Œä»–å¯ä»¥ç»™å‡ºæ‰€æœ‰æ¦‚ç‡å‡ºç°çš„å¯èƒ½æ€§ã€‚Betaæ˜¯ä¸€ä¸ªéå›ºå®šçš„å…¬å¼ï¼Œå…¶è¡¨ç¤ºçš„æ˜¯ä¸€ç»„åˆ†å¸ƒï¼ˆè¿™ä¸€ç‚¹å’Œè·ç¦»è®¡ç®—ä¸­çš„é—µå¯å¤«æ–¯åŸºè·ç¦»ç±»ä¼¼ï¼‰ã€‚\n\næ¯”å¦‚ï¼š\n\näºŒé¡¹åˆ†å¸ƒï¼ˆæŠ›næ¬¡ç¡¬å¸ï¼Œæ­£é¢å‡ºç°kæ¬¡çš„æ¦‚ç‡ï¼‰\n\n$$\nP(S=k)=\\binom{n}{k} p^k (1-p)^{n-k}\n$$\n\nå‡ ä½•åˆ†å¸ƒï¼ˆæŠ›ç¡¬å¸ï¼Œç¬¬ä¸€æ¬¡æŠ›å‡ºæ­£é¢æ‰€éœ€çš„æ¬¡æ•°çš„æ¦‚ç‡ï¼‰\n\n$$\nP(T=t)= (1-p)^{t-1} p \n$$\n\nå¸•æ–¯å¡åˆ†å¸ƒï¼ˆæŠ›ç¡¬å¸ï¼Œç¬¬kæ¬¡å‡ºç°æ­£é¢æ‰€éœ€æ¬¡æ•°çš„æ¦‚ç‡ï¼‰\n\n$$\nP(Y_k=t)=\\binom{t-1}{k-1} p^{k-1} (1-p)^{t-k}p\n$$\n\nå»æ‰¾ä¸€ä¸ªç»Ÿä¸€çš„å…¬å¼å»æè¿°è¿™äº›åˆ†å¸ƒï¼Œå°±æ˜¯Betaåˆ†å¸ƒï¼š\n$$\nBeta(x| \\alpha,\\beta) = \\frac{1}{B(\\alpha, \\beta)} x^{\\alpha-1} (1-x)^\\beta\n$$\nå…¶ä¸­ $B(\\alpha, \\beta)$æ˜¯æ ‡å‡†åŒ–å‡½æ•°ï¼Œä»–çš„ä½œç”¨æ˜¯ä½¿æ€»æ¦‚ç‡å’Œä¸º1ï¼Œ$\\alpha, \\beta$ä¸ºå½¢çŠ¶å‚æ•°ï¼Œä¸åŒçš„å‚æ•°å¯¹åº”çš„å›¾åƒå½¢çŠ¶ä¸åŒï¼Œä»–ä¸ä½†å¯ä»¥è¡¨ç¤ºå¸¸è§çš„äºŒé¡¹åˆ†å¸ƒã€å‡ ä½•åˆ†å¸ƒç­‰ï¼Œè¿˜æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯ï¼Œä¸éœ€è¦å»å…³ç³»æŸæ¬¡å®éªŒç»“æœæœä»ä»€ä¹ˆåˆ†å¸ƒï¼Œè€Œæ˜¯åˆ©ç”¨\n$\\alpha, \\beta$çš„å€¼å°±å¯ä»¥è®¡ç®—å‡ºæˆ‘ä»¬æƒ³è¦çš„ç»Ÿè®¡é‡ã€‚\n\nå¸¸è§çš„å‚æ•°å¯¹åº”çš„å›¾å½¢ä¸ºï¼š\n\n![Betaåˆ†å¸ƒ](https://img-blog.csdnimg.cn/20191015085055652.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n$Beta(\\alpha, \\beta)$çš„å¸¸è§çš„ç»Ÿè®¡é‡ä¸ºï¼š\n- ä¼—æ•°ä¸ºï¼š$\\frac {\\alpha-1}{\\alpha + \\beta -1}$\n- æœŸæœ›ä¸ºï¼š$\\mu = E(x)= \\frac {\\alpha} {\\alpha + \\beta}$\n- æ–¹å·®ä¸ºï¼š$Var(x) = E(x - \\mu)^2 = \\frac { \\alpha \\beta } { (\\alpha + \\beta)^2 (\\alpha + \\beta +1) }$\n\n#### 2ã€Betaåˆ†å¸ƒçš„ä¾‹å­\nç½‘ä¸Šèµ„æ–™ä¸­ä¸€ä¸ªå¾ˆå¸¸è§çš„ä¾‹å­æ˜¯æ£’çƒè¿åŠ¨å‘˜çš„ï¼Œè¿™é‡Œè¿›è¡Œå€Ÿé‰´ã€‚\n\næ£’çƒè¿åŠ¨æœ‰ä¸€ä¸ªæŒ‡æ ‡æ˜¯æ£’çƒå‡»çƒç‡(batting average)ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ªè¿åŠ¨å‘˜å‡»ä¸­çš„çƒæ•°é™¤ä»¥å‡»çƒçš„æ€»æ•°ï¼Œæˆ‘ä»¬ä¸€èˆ¬è®¤ä¸º0.266æ˜¯æ­£å¸¸æ°´å¹³çš„å‡»çƒç‡ï¼Œè€Œå¦‚æœå‡»çƒç‡é«˜è¾¾0.3å°±è¢«è®¤ä¸ºæ˜¯éå¸¸ä¼˜ç§€çš„ã€‚\n\nç°åœ¨æœ‰ä¸€ä¸ªæ£’çƒè¿åŠ¨å‘˜ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿé¢„æµ‹ä»–åœ¨è¿™ä¸€èµ›å­£ä¸­çš„æ£’çƒå‡»çƒç‡æ˜¯å¤šå°‘ã€‚ä½ å¯èƒ½å°±ä¼šç›´æ¥è®¡ç®—æ£’çƒå‡»çƒç‡ï¼Œç”¨å‡»ä¸­çš„æ•°é™¤ä»¥å‡»çƒæ•°ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªæ£’çƒè¿åŠ¨å‘˜åªæ‰“äº†ä¸€æ¬¡ï¼Œè€Œä¸”è¿˜å‘½ä¸­äº†ï¼Œé‚£ä¹ˆä»–å°±å‡»çƒç‡å°±æ˜¯100%äº†ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ï¼Œå› ä¸ºæ ¹æ®æ£’çƒçš„å†å²ä¿¡æ¯ï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ªå‡»çƒç‡åº”è¯¥æ˜¯0.215åˆ°0.36ä¹‹é—´æ‰å¯¹å•Šã€‚\n\nå¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªäºŒé¡¹åˆ†å¸ƒè¡¨ç¤ºï¼ˆä¸€ç³»åˆ—æˆåŠŸæˆ–å¤±è´¥ï¼‰ï¼Œä¸€ä¸ªæœ€å¥½çš„æ–¹æ³•æ¥è¡¨ç¤ºè¿™äº›ç»éªŒï¼ˆåœ¨ç»Ÿè®¡ä¸­ç§°ä¸ºå…ˆéªŒä¿¡æ¯ï¼‰å°±æ˜¯ç”¨betaåˆ†å¸ƒï¼Œè¿™è¡¨ç¤ºåœ¨æˆ‘ä»¬æ²¡æœ‰çœ‹åˆ°è¿™ä¸ªè¿åŠ¨å‘˜æ‰“çƒä¹‹å‰ï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªå¤§æ¦‚çš„èŒƒå›´ã€‚betaåˆ†å¸ƒçš„å®šä¹‰åŸŸæ˜¯(0,1)è¿™å°±è·Ÿæ¦‚ç‡çš„èŒƒå›´æ˜¯ä¸€æ ·çš„ã€‚\n\næ¥ä¸‹æ¥æˆ‘ä»¬å°†è¿™äº›å…ˆéªŒä¿¡æ¯è½¬æ¢ä¸ºbetaåˆ†å¸ƒçš„å‚æ•°ï¼Œæˆ‘ä»¬çŸ¥é“ä¸€ä¸ªå‡»çƒç‡åº”è¯¥æ˜¯å¹³å‡0.27å·¦å³ï¼Œè€Œä»–çš„èŒƒå›´æ˜¯0.21åˆ°0.35ï¼Œé‚£ä¹ˆæ ¹æ®è¿™ä¸ªä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥å–$\\alpha$=81,$\\beta$=219\n\n![æ£’çƒè¿åŠ¨å‘˜Betaåˆ†å¸ƒä¾‹å­](https://img-blog.csdnimg.cn/20191015090126646.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nä¹‹æ‰€ä»¥å–è¿™ä¸¤ä¸ªå‚æ•°æ˜¯å› ä¸ºï¼š\n- betaåˆ†å¸ƒçš„å‡å€¼æ˜¯ï¼š$\\frac{81} {81 + 219}=0.27$\n- ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°è¿™ä¸ªåˆ†å¸ƒä¸»è¦è½åœ¨äº†(0.2,0.35)é—´ï¼Œè¿™æ˜¯ä»ç»éªŒä¸­å¾—å‡ºçš„åˆç†çš„èŒƒå›´ã€‚\n\n> åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬çš„xè½´å°±è¡¨ç¤ºå„ä¸ªå‡»çƒç‡çš„å–å€¼ï¼Œxå¯¹åº”çš„yå€¼å°±æ˜¯è¿™ä¸ªå‡»çƒç‡æ‰€å¯¹åº”çš„æ¦‚ç‡ã€‚ä¹Ÿå°±æ˜¯è¯´betaåˆ†å¸ƒå¯ä»¥çœ‹ä½œä¸€ä¸ªæ¦‚ç‡çš„æ¦‚ç‡åˆ†å¸ƒã€‚\n\næœ‰äº†è¿™æ ·çš„åˆå§‹å€¼ï¼Œéšç€è¿åŠ¨çš„è¿›è¡Œï¼Œå…¶è¡¨è¾¾å¼å¯ä»¥è¡¨ç¤ºä¸ºï¼š\n$$\nBeta(\\alpha_0 + hits , \\beta_0 + misses)\n$$\nå…¶ä¸­ $\\alpha_0, \\beta_0$æ˜¯ä¸€å¼€å§‹çš„å‚æ•°ï¼Œå€¼ä¸º81ï¼Œ219ã€‚å½“å‡»ä¸­ä¸€æ¬¡çƒæ˜¯ hits + 1ï¼Œmissesä¸å˜ï¼Œå½“æœªå‡»ä¸­æ—¶ï¼Œhitsä¸å˜ï¼Œmisses+1ã€‚è¿™æ ·å°±å¯ä»¥åœ¨æ¯æ¬¡å‡»çƒåæ±‚å…¶æœ€è¿‘çš„å¹³å‡æ°´å¹³äº†ã€‚\n\n#### 3ã€Thompson Smapling\n\nThompson samplingç®—æ³•ç®€å•å®ç”¨ï¼Œç®€å•ä»‹ç»ä¸€ä¸‹å®ƒçš„åŸç†ï¼Œè¦ç‚¹å¦‚ä¸‹ï¼š\n- å‡è®¾æ¯ä¸ªè‡‚æ˜¯å¦äº§ç”Ÿæ”¶ç›Šï¼Œå…¶èƒŒåæœ‰ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒï¼Œäº§ç”Ÿæ”¶ç›Šçš„æ¦‚ç‡ä¸ºpã€‚\n- æˆ‘ä»¬ä¸æ–­åœ°è¯•éªŒï¼Œå»ä¼°è®¡å‡ºä¸€ä¸ªç½®ä¿¡åº¦è¾ƒé«˜çš„â€œæ¦‚ç‡pçš„æ¦‚ç‡åˆ†å¸ƒâ€å°±èƒ½è¿‘ä¼¼è§£å†³è¿™ä¸ªé—®é¢˜äº†ã€‚\n- æ€ä¹ˆèƒ½ä¼°è®¡â€œæ¦‚ç‡pçš„æ¦‚ç‡åˆ†å¸ƒâ€å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯å‡è®¾æ¦‚ç‡pçš„æ¦‚ç‡åˆ†å¸ƒç¬¦åˆbeta(wins, lose)åˆ†å¸ƒï¼Œå®ƒæœ‰ä¸¤ä¸ªå‚æ•°: wins, loseã€‚\n- æ¯ä¸ªè‡‚éƒ½ç»´æŠ¤ä¸€ä¸ªbetaåˆ†å¸ƒçš„å‚æ•°ã€‚æ¯æ¬¡è¯•éªŒåï¼Œé€‰ä¸­ä¸€ä¸ªè‡‚ï¼Œæ‘‡ä¸€ä¸‹ï¼Œæœ‰æ”¶ç›Šåˆ™è¯¥è‡‚çš„winså¢åŠ 1ï¼Œå¦åˆ™è¯¥è‡‚çš„loseå¢åŠ 1ã€‚\n- æ¯æ¬¡é€‰æ‹©è‡‚çš„æ–¹å¼æ˜¯ï¼šè®¡ç®—æ¯ä¸ªè‡‚ç°æœ‰çš„betaåˆ†å¸ƒçš„å¹³å‡æ°´å¹³ï¼Œé€‰æ‹©æ‰€æœ‰è‡‚äº§ç”Ÿçš„éšæœºæ•°ä¸­æœ€å¤§çš„é‚£ä¸ªè‡‚å»æ‘‡ã€‚\n\n#### 4ã€TSçš„Pythonå®ç°\n\n```\nimport numpy as np\nimport random\n\ndef ThompsonSampling(wins, trials):\n    pbeta = [0] * N\n    for i in range(0, len(trials)):\n        pbeta[i] = np.random.beta(wins[i] + 1, trials[i] - wins[i] + 1)\n    choice = np.argmax(pbeta)\n    trials[choice] += 1\n    if random.random() > 0.5:\n        wins[choice] += 1\n\nT = 10000  # å®éªŒæ¬¡æ•°\nN = 10  # ç±»åˆ«ä¸ªæ•°\n# è‡‚çš„é€‰æ‹©æ€»æ¬¡æ•°\ntrials = np.array([0] * N )\n# è‡‚çš„æ”¶ç›Š\nwins = np.array([0] * N )\nfor i in range(0, T):\n    ThompsonSampling(wins, trials)\nprint(trials)\nprint(wins)\nprint(wins/trials)\n```\n\n### UCB\n\n#### 1ã€UCBçš„åŸç†\n\nUCBï¼ˆUpper Confidence Boundï¼Œç½®ä¿¡åŒºé—´ä¸Šç•Œï¼‰å¯ä»¥ç†è§£ä¸ºä¸ç¡®å®šæ€§çš„ç¨‹åº¦ï¼ŒåŒºé—´è¶Šå®½ï¼Œè¶Šä¸ç¡®å®šï¼Œåä¹‹å°±è¶Šç¡®å®šï¼Œå…¶è¡¨è¾¾å¼å¦‚ä¸‹ï¼š\n\n$$\nscore(i) = \\frac {N_i}{T} + \\sqrt{ \\frac{2 ln T}{N_i}}\n$$\nå…¶ä¸­ Ni è¡¨ç¤ºç¬¬iä¸ªè‡‚æ”¶ç›Šä¸º 1 çš„æ¬¡æ•°ï¼ŒTè¡¨ç¤ºé€‰æ‹©çš„æ€»æ¬¡æ•°\n\nå…¬å¼åˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ†ï¼Œå·¦ä¾§ï¼ˆ+å·¦ä¾§éƒ¨åˆ†ï¼‰è¡¨ç¤ºçš„æ˜¯å€™é€‰è‡‚iåˆ°ç›®å‰ä¸ºæ­¢çš„å¹³å‡æ”¶ç›Šï¼Œååº”çš„æ˜¯å®ƒçš„æ•ˆæœã€‚å³ä¾§ï¼ˆ+å³ä¾§éƒ¨åˆ†ï¼‰å«åšBonusï¼Œæœ¬è´¨ä¸Šæ˜¯å‡å€¼çš„æ ‡å‡†å·®ï¼Œååº”çš„æ˜¯å€™é€‰è‡‚æ•ˆæœçš„ä¸ç¡®å®šæ€§ï¼Œå°±æ˜¯ç½®ä¿¡åŒºé—´çš„ä¸Šè¾¹ç•Œã€‚\n\n> ç»Ÿè®¡å­¦ä¸­çš„ä¸€äº›ç»Ÿè®¡é‡è¡¨è¾¾çš„å«ä¹‰\n\nå¦‚æœä¸€ä¸ªè‡‚çš„æ”¶ç›Šå¾ˆå°‘ï¼Œå³Niå¾ˆå°ï¼Œé‚£ä¹ˆä»–çš„ä¸ç¡®å®šæ€§å°±è¶Šå¤§ï¼Œåœ¨æœ€åæ’åºè¾“å‡ºæ—¶å°±ä¼šæœ‰ä¼˜åŠ¿ï¼Œbounsè¶Šå¤§ï¼Œå€™é€‰è‡‚çš„å¹³å‡æ”¶ç›Šç½®ä¿¡åŒºé—´è¶Šå®½ï¼Œè¶Šä¸ç¨³å®šï¼Œå°±éœ€è¦æ›´å¤šçš„æœºä¼šè¿›è¡Œé€‰æ‹©ã€‚åä¹‹å¦‚æœå¹³å‡æ”¶ç›Šå¾ˆå¤§ï¼Œå³+å·å·¦ä¾§æˆ·æ•°å¾ˆå¤§ï¼Œåœ¨é€‰æ‹©æ—¶ä¹Ÿä¼šæœ‰è¢«é€‰æ‹©çš„æœºä¼šã€‚\n\n#### 2ã€UCBçš„Pythonå®ç°\n\n```\nimport numpy as np\n\n# å®šä¹‰ T = 1000 ä¸ªç”¨æˆ·ï¼Œå³æ€»å…±è¿›è¡Œ1000æ¬¡å®ç°\nT = 1000\n# å®šä¹‰ N = 10 ä¸ªæ ‡ç­¾ï¼Œå³ N ä¸ª ç‰©å“\nN = 10\n\n# ä¿è¯ç»“æœå¯å¤ç°ï¼Œè®¾ç½®éšæœºæ•°ç§å­\nnp.random.seed(888)\n\n# æ¯ä¸ªç‰©å“çš„ç´¯ç§¯ç‚¹å‡»ç‡ï¼ˆç†è®ºæ¦‚ç‡ï¼‰\ntrue_rewards = np.random.uniform(low=0, high=1, size= N)\n# true_rewards = np.array([0.5] * N)\n# æ¯ä¸ªç‰©å“çš„å½“å‰ç‚¹å‡»ç‡\nnow_rewards = np.zeros(N)\n# æ¯ä¸ªç‰©å“çš„ç‚¹å‡»æ¬¡æ•°\nchosen_count = np.zeros(N)\n\ntotal_reward = 0\n\n# è®¡ç®—ucbçš„ç½®ä¿¡åŒºé—´å®½åº¦\ndef calculate_delta(T, item):\n    if chosen_count[item] == 0:\n        return 1\n    else:\n        return np.sqrt( 2 * np.log( T ) / chosen_count[item])\n\n# è®¡ç®—UCB\ndef ucb(t, N):\n    # ucbå¾—åˆ†\n    upper_bound_probs = [ now_rewards[item] + calculate_delta(t,item) for item in range(N) ]\n    item = np.argmax(upper_bound_probs)\n    # æ¨¡æ‹Ÿä¼¯åŠªåˆ©æ”¶ç›Š\n    # reward = sum(np.random.binomial(n =1, p = true_rewards[item], size=20000)==1 ) / 20000\n    reward = np.random.binomial(n =1, p = true_rewards[item])\n    return item, reward\n\nfor t in range(1,T+1):\n    # ä¸ºç¬¬ tä¸ªç”¨æˆ·æ¨èä¸€ä¸ªç‰©å“\n    item, reward = ucb(t, N)\n    # print(\"item is %s, reward is %s\" % (item, reward))\n\n    # ä¸€å…±æœ‰å¤šå°‘ç”¨æˆ·æ¥å—äº†æ¨èçš„ç‰©å“\n    total_reward += reward\n    chosen_count[item] += 1\n\n    # æ›´æ–°ç‰©å“çš„å½“å‰ç‚¹å‡»ç‡\n    now_rewards[item] =  ( now_rewards[item] * (t-1) + reward) /  t\n    # print(\"æ›´æ–°åçš„ç‰©å“ç‚¹å‡»ç‡ä¸ºï¼š%s\" % (now_rewards[item]))\n\n    # è¾“å‡ºå½“å‰ç‚¹å‡»ç‡ / ç´¯ç§¯ç‚¹å‡»ç‡\n    # print(\"å½“å‰ç‚¹å‡»ç‡ä¸º: %s\" % now_rewards)\n    # print(\"ç´¯ç§¯ç‚¹å‡»ç‡ä¸º: %s\" % true_rewards)\n\n    diff =  np.subtract( true_rewards, now_rewards)\n    print(diff[0])\n    print(total_reward)\n```\n\n#### 3ã€UCBçš„æ¨å¯¼\n\nè§‚æµ‹ 1ï¼šå‡è®¾ä¸€ä¸ªç‰©å“è¢«æ¨èäº†kæ¬¡ï¼Œè·å–äº†kæ¬¡åé¦ˆï¼ˆç‚¹å‡» or ä¸ç‚¹å‡»ï¼‰ï¼Œå¯ä»¥è®¡ç®—å‡ºç‰©å“è¢«ç‚¹å‡»çš„å¹³å‡æ¦‚ç‡\n\nå½“k æ¥è¿‘äºæ­£æ— ç©·æ—¶ï¼Œp' ä¼šæ¥è¿‘äºçœŸå®çš„ç‰©å“è¢«ç‚¹å‡»çš„æ¦‚ç‡\n$$\np' = \\frac {\\sum reward_i}{k}\n$$\n\nè§‚æµ‹ 2ï¼šç°å®ä¸­ç‰©å“è¢«ç‚¹å‡»çš„æ¬¡æ•°ä¸å¯èƒ½è¾¾åˆ°æ— ç©·å¤§ï¼Œå› æ­¤ä¼°è®¡å‡ºçš„è¢«ç‚¹å‡»çš„æ¦‚ç‡ p' å’ŒçœŸå®çš„ç‚¹å‡»çš„æ¦‚ç‡ p æ€»ä¼šå­˜åœ¨ä¸€ä¸ªå·®å€¼ dï¼Œå³ï¼š\n$$\np'-d \\leqslant p \\leqslant p'+d\n$$\næœ€ååªéœ€è¦è§£å†³å·®å€¼ d åˆ°åº•æ˜¯æ€ä¹ˆè®¡ç®—çš„ï¼Ÿ\n\né¦–å…ˆä»‹ç»éœå¤«ä¸ä¸ç­‰å¼ï¼ˆChernoff-Hoeffding Boundï¼‰ï¼Œéœå¤«ä¸ä¸ç­‰å¼å‡è®¾reward_1, ... , reward_n æ˜¯åœ¨[0,1]ä¹‹é—´å–å€¼çš„ç‹¬ç«‹åŒåˆ†å¸ƒéšæœºå˜é‡ï¼Œç”¨p' è¡¨ç¤ºæ ·æœ¬çš„å‡å€¼ï¼Œç”¨pè¡¨ç¤ºåˆ†å¸ƒçš„å‡å€¼ï¼Œé‚£ä¹ˆæœ‰ï¼š\n$$\nP\\{|p'-p| \\leqslant \\delta \\} \\geqslant 1 - 2e^{-2n\\delta ^2}\n$$\n\nå½“ $\\delta$ å–å€¼ä¸º$\\sqrt { 2In T /n}$ ï¼ˆå…¶ä¸­ T è¡¨ç¤ºæœ‰ç‰©å“è¢«æ¨èçš„æ¬¡æ•°ï¼Œnè¡¨ç¤ºæœ‰ç‰©å“è¢«ç‚¹å‡»çš„æ¬¡æ•°ï¼‰ï¼Œå¯ä»¥å¾—åˆ°ï¼š\n$$\nP\\{|p'-p| \\leqslant \\sqrt { \\frac{2In T }{n}} \\} \\geqslant 1 - \\frac{ 2 }{ T^4}\n$$\n\nä¹Ÿå°±æ˜¯è¯´ï¼š\n$$\np' - \\sqrt { \\frac{2In T }{n}} \\leqslant p \\leqslant p' + \\sqrt { \\frac{2In T }{n}}\n$$\n\næ˜¯ä»¥ 1 - 2/T^4 çš„æ¦‚ç‡æˆç«‹çš„ï¼Œ\nå½“T=2æ—¶ï¼Œæˆç«‹çš„æ¦‚ç‡ä¸º0.875\nå½“T=3æ—¶ï¼Œæˆç«‹çš„æ¦‚ç‡ä¸º0.975\nå½“T=4æ—¶ï¼Œæˆç«‹çš„æ¦‚ç‡ä¸º0.992\nå¯ä»¥çœ‹å‡º $d =  \\sqrt { \\frac{2In T }{n}}$ æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚\n\n### Epsilon-Greedy\n\n#### 1ã€ç®—æ³•åŸç†\nè¿™æ˜¯ä¸€ä¸ªæœ´ç´ çš„Banditç®—æ³•ï¼Œæœ‰ç‚¹ç±»ä¼¼æ¨¡æ‹Ÿé€€ç«çš„æ€æƒ³ï¼š\n1. é€‰ä¸€ä¸ªï¼ˆ0,1ï¼‰ä¹‹é—´è¾ƒå°çš„æ•°ä½œä¸ºepsilonï¼›\n2. æ¯æ¬¡ä»¥æ¦‚ç‡epsilonåšä¸€ä»¶äº‹ï¼šæ‰€æœ‰è‡‚ä¸­éšæœºé€‰ä¸€ä¸ªï¼›\n3. æ¯æ¬¡ä»¥æ¦‚ç‡1-epsilon é€‰æ‹©æˆªæ­¢åˆ°å½“å‰ï¼Œå¹³å‡æ”¶ç›Šæœ€å¤§çš„é‚£ä¸ªè‡‚ã€‚\n\næ˜¯ä¸æ˜¯ç®€å•ç²—æš´ï¼Ÿepsilonçš„å€¼å¯ä»¥æ§åˆ¶å¯¹Exploitå’ŒExploreçš„åå¥½ç¨‹åº¦ã€‚è¶Šæ¥è¿‘0ï¼Œè¶Šä¿å®ˆï¼Œåªé€‰æ‹©æ”¶ç›Šæœ€å¤§çš„ã€‚\n\n#### 2ã€Pythonå®ç°\n\n```\nimport random\n\nclass EpsilonGreedy():\n    def __init__(self, epsilon, counts, values):\n        self.epsilon = epsilon\n        self.counts = counts\n        self.values = values\n\n    def initialize(self, n_arms):\n        self.counts = [0 for col in range(n_arms)]\n        self.values = [0.0 for col in range(n_arms)]\n\n    def select_arm(self):\n        if random.random() > self.epsilon:\n            return self.values.index( max(self.values) )\n        else:\n            # éšæœºè¿”å› self.values ä¸­ä¸ªçš„ä¸€ä¸ª\n            return random.randrange(len(self.values))\n\n    def reward(self):\n        return 1 if random.random() > 0.5 else 0\n\n    def update(self, chosen_arm, reward):\n        self.counts[chosen_arm] = self.counts[chosen_arm] + 1\n        n = self.counts[chosen_arm]\n\n        value = self.values[chosen_arm]\n        new_value = ((n - 1)  * value + reward ) / float(n)\n        self.values[chosen_arm] = round(new_value,4)\n\nn_arms = 10\n\nalgo = EpsilonGreedy(0.1, [], [])\n\nalgo.initialize(n_arms)\n\nfor t in range(100):\n    chosen_arm = algo.select_arm()\n    reward = algo.reward()\n    algo.update(chosen_arm, reward)\n\nprint(algo.counts)\nprint(algo.values)\n\n```\n\n### æœ´ç´ Banditç®—æ³•\n\næœ€æœ´ç´ çš„Banditç®—æ³•å°±æ˜¯ï¼šå…ˆéšæœºè¯•è‹¥å¹²æ¬¡ï¼Œè®¡ç®—æ¯ä¸ªè‡‚çš„å¹³å‡æ”¶ç›Šï¼Œä¸€ç›´é€‰å‡å€¼æœ€å¤§é‚£ä¸ªè‡‚ã€‚è¿™ä¸ªç®—æ³•æ˜¯äººç±»åœ¨å®é™…ä¸­æœ€å¸¸é‡‡ç”¨çš„ï¼Œä¸å¯å¦è®¤ï¼Œå®ƒè¿˜æ˜¯æ¯”éšæœºä¹±çŒœè¦å¥½ã€‚\n\nPythonå®ç°æ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œå°±ä¸åšæ¼”ç¤ºäº†ã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["å†·å¯åŠ¨"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–ï¼ˆå››ï¼‰ä¹‹æ­£åˆ™åŒ–","url":"/2019/09/22/æ·±åº¦å­¦ä¹ /ç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œåŒ–å’Œæ­£åˆ™åŒ–/ç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–ï¼ˆå››ï¼‰ä¹‹æ­£åˆ™åŒ–/","content":"\n### å¼•è¨€\n\nç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–é—®é¢˜ä»‹ç»ä¸»è¦åˆ†ä¸ºä¸€ï¼ŒäºŒï¼Œä¸‰ï¼Œå››ç¯‡è¿›è¡Œä»‹ç»ï¼ˆå¦‚ä¸‹æ‰€ç¤ºï¼‰ï¼Œæœ¬ç¯‡ä¸ºæœ€åä¸€ç¯‡ä¸»è¦ä»‹ç»ç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œæ­£åˆ™åŒ–ã€‚\n- ç¬¬ä¸€ç¯‡åŒ…æ‹¬\n    - ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–æ¦‚è¿°\n    - ä¼˜åŒ–ç®—æ³•ä»‹ç»\n- ç¬¬äºŒç¯‡åŒ…æ‹¬\n    - å‚æ•°åˆå§‹åŒ– \n    - æ•°æ®é¢„å¤„ç†\n    - é€å±‚å½’ä¸€åŒ–\n- ç¬¬ä¸‰ç¯‡åŒ…æ‹¬\n    - è¶…å‚æ•°ä¼˜åŒ–\n- ç¬¬å››ç¯‡åŒ…æ‹¬\n    - ç½‘ç»œæ­£åˆ™åŒ–\n\næœºå™¨å­¦ä¹ æ¨¡å‹ä¸­çš„å…³é”®æ˜¯æ³›åŒ–é—®é¢˜ï¼Œå³æ ·æœ¬åœ¨çœŸå®æ•°æ®é›†ä¸Šçš„æœŸæœ›é£é™©æœ€å°åŒ–ï¼Œè€Œåœ¨è®­ç»ƒé›†ä¸Šçš„ç»éªŒé£é™©æœ€å°åŒ–å’ŒæœŸæœ›é£é™©å¹¶ä¸ä¸€è‡´ã€‚ç”±äºç¥ç»ç½‘ç»œçš„æ‹Ÿåˆèƒ½åŠ›å¾ˆå¼ºï¼Œå…¶åœ¨è®­ç»ƒé›†ä¸Šçš„è®­ç»ƒè¯¯å·®ä¼šé™çš„å¾ˆå°ï¼Œä»è€Œå¯¼è‡´è¿‡æ‹Ÿåˆã€‚\n\n**æ­£åˆ™åŒ–ï¼ˆRegularizationï¼‰**æ˜¯ä¸€ç±»é€šè¿‡é™åˆ¶æ¨¡å‹å¤æ‚åº¦ï¼Œä»è€Œé¿å…è¿‡æ‹Ÿåˆï¼Œæé«˜æ¨¡å‹æ³›åŒ–èƒ½åŠ›çš„ä¸€ç§æ–¹æ³•ï¼ŒåŒ…æ‹¬å¼•å…¥ä¸€äº›çº¦æŸè§„åˆ™ï¼Œå¢åŠ å…ˆéªŒï¼Œæå‰ç»ˆæ­¢ç­‰ã€‚\n\nåœ¨ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ æ¨¡å‹ä¸­ï¼Œæé«˜æ¨¡å‹æ³›åŒ–èƒ½åŠ›çš„ä¸»è¦æ–¹æ³•æ˜¯é™åˆ¶æ¨¡å‹å¤æ‚åº¦ï¼Œæ¯”å¦‚$l_1,l_2$æ­£åˆ™ï¼Œä½†æ˜¯åœ¨è®­ç»ƒæ·±å±‚ç¥ç»ç½‘ç»œæ—¶ï¼Œç‰¹åˆ«æ˜¯åœ¨è¿‡åº¦å‚æ•°ï¼ˆOverParameterizedï¼‰æ—¶ï¼Œ$l_1,l_2$æ­£åˆ™åŒ–ä¸å¦‚æœºå™¨å­¦ä¹ æ¨¡å‹ä¸­æ•ˆæœæ˜æ˜¾ï¼Œå› æ­¤ä¼šå¼•å…¥å…¶ä»–çš„ä¸€äº›æ–¹æ³•ï¼Œæ¯”å¦‚ï¼šæ•°æ®å¢å¼ºï¼Œæå‰ç»ˆæ­¢ï¼Œä¸¢å¼ƒæ³•ï¼Œç»§æ‰¿æ³•ç­‰ã€‚\n\n### $l_1,l_2$æ­£åˆ™\n$l_1,l_2$æ­£åˆ™æ˜¯æœºå™¨å­¦ä¹ ä¸­å¸¸ç”¨çš„æ­£åˆ™åŒ–æ–¹æ³•ï¼Œé€šè¿‡çº¦æŸå‚æ•°çš„$l_1,l_2$èŒƒæ•°æ¥å‡å°‘æ¨¡å‹åœ¨è®­ç»ƒæ•°æ®ä¸Šçš„è¿‡æ‹Ÿåˆç°è±¡ã€‚\n\né€šè¿‡å¼•å…¥$l_1,l_2$æ­£åˆ™ï¼Œä¼˜åŒ–é—®é¢˜å˜ä¸ºï¼š\n$$\na\\theta ^* = \\underset{a}{ arg \\,  min } \\frac{1}{N} L ( y^n, f(x^n, \\theta))+\\lambda l_p(\\theta)\n$$\n$L$ä¸ºæŸå¤±å‡½æ•°ï¼Œ$N$ä¸ºè®­ç»ƒçš„æ ·æœ¬æ•°é‡ï¼Œ$f(.)$ä¸ºå¾…å­¦ä¹ çš„ç¥ç»ç½‘ç»œï¼Œ$\\theta$ä¸ºå‚æ•°ï¼Œ$l_p$ä¸º$l_1,l_2$æ­£åˆ™ä¸­çš„ä¸€ä¸ªï¼Œ$\\lambda$ä¸ºæ­£åˆ™é¡¹ç³»æ•°ã€‚\n\nå¸¦æ­£åˆ™åŒ–çš„ä¼˜åŒ–é—®é¢˜ç­‰ä»·äºä¸‹é¢å¸¦çº¦æŸæ¡ä»¶çš„ä¼˜åŒ–é—®é¢˜ï¼š\n$$\n\\theta ^* = \\underset{a}{ arg \\,  min } \\frac{1}{N} L ( y^n, f(x^n, \\theta))\n\\\\\nsubject \\, to \\, l_p(\\theta) \\leq 1\n$$\n\nä¸‹å›¾ç»™å‡ºäº†ä¸åŒèŒƒæ•°çº¦æŸæ¡ä»¶ä¸‹çš„æœ€ä¼˜åŒ–é—®é¢˜ç¤ºä¾‹ï¼š\n![ä¸åŒèŒƒæ•°çº¦æŸæ¡ä»¶ä¸‹çš„æœ€ä¼˜åŒ–é—®é¢˜ç¤ºä¾‹](https://img-blog.csdnimg.cn/20190926205404238.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n\nä¸Šå›¾ä¸­çº¢çº¿è¡¨ç¤º$l_p$èŒƒæ•°ï¼Œé»‘çº¿è¡¨ç¤º$f(\\theta)$çš„ç­‰é«˜çº¿ï¼ˆç®€å•èµ·è§ï¼Œè¿™é‡Œç”¨ç›´çº¿è¡¨ç¤ºï¼‰\n\nä»ä¸Šå›¾æœ€å·¦ä¾§å›¾å¯ä»¥çœ‹å‡ºï¼Œ$l_1$èŒƒæ•°çš„çº¦æŸæ¡ä»¶å¾€å¾€ä¼šä½¿æœ€ä¼˜è§£ä½äºåæ ‡è½´ä¸Šï¼Œä»è€Œä½¿ç”¨æœ€ç»ˆçš„å‚æ•°ä¸ºç¨€ç–å‘é‡ï¼Œæ­¤å¤–$l_1$èŒƒæ•°åœ¨é›¶ç‚¹ä¸å¯å¯¼ï¼Œå¸¸ç”¨ä¸‹å¼æ¥ä»£æ›¿ï¼š\n$$\nl_1(\\theta) = \\sum_{i} \\sqrt{\\theta_i ^2 + \\epsilon } \n$$\nå…¶ä¸­$\\epsilon$ä¸ºä¸€ä¸ªéå¸¸å°çš„å¸¸æ•°ã€‚\n\nä¸€ç§æŠ˜ä¸­çš„æ–¹æ³•æ˜¯**å¼¹æ€§ç½‘ç»œæ­£åˆ™åŒ–ï¼ˆElastic Net Regularizationï¼‰** ï¼ŒåŒæ—¶åŠ å…¥$l_1, l_2$æ­£åˆ™ï¼Œå¦‚ä¸‹ï¼š\n$$\na\\theta ^* = \\underset{a}{ arg \\,  min } \\frac{1}{N} L ( y^n, f(x^n, \\theta)_+\\lambda_1 l_1(\\theta) + \\lambda_2 l_2(\\theta)\n$$\nå…¶ä¸­$\\lambda_1, \\lambda_2$åˆ†åˆ«æ˜¯æ­£åˆ™åŒ–é¡¹çš„å‚æ•°ã€‚\n\n\n\n### æƒé‡è¡°å‡\n**æƒé‡è¡°å‡ï¼ˆWeight Deacyï¼‰** ä¹Ÿæ˜¯ä¸€ç§æœ‰æ•ˆçš„æ­£åˆ™åŒ–æ–¹æ³•ï¼Œåœ¨æ¯æ¬¡è°ƒå‚æ—¶ï¼Œå¼•å…¥ä¸€ä¸ªè¡°å‡ç³»æ•°ï¼Œè¡¨ç¤ºå¼ä¸ºï¼š\n$$\n\\theta_t \\leftarrow (1-w)\\theta_{t-1} - \\alpha g_t\n$$\nå…¶ä¸­$g_t$ä¸ºç¬¬tæ¬¡æ›´æ–°æ—¶çš„æ¢¯åº¦ï¼Œ$\\alpha$ä¸ºå­¦ä¹ ç‡ï¼Œ$w$ä¸ºæƒé‡è¡°å‡ç³»æ•°ï¼Œä¸€èˆ¬å–å€¼æ¯”è¾ƒå°ï¼Œæ¯”å¦‚0.0005ã€‚åœ¨æ ‡å‡†çš„éšæœºæ¢¯åº¦ä¸‹é™ä¸­ï¼Œæƒé‡è¡°å‡å’Œ$l_2$æ­£åˆ™è¾¾åˆ°çš„æ•ˆæœç›¸åŒï¼Œå› æ­¤ï¼Œæƒé‡è¡°å‡åœ¨ä¸€äº›æ·±åº¦å­¦ä¹ æ¡†æ¶ä¸­ç”¨$l_2$æ­£åˆ™æ¥ä»£æ›¿ã€‚ä½†æ˜¯åœ¨è¾ƒä¸ºå¤æ‚çš„ä¼˜åŒ–æ–¹æ³•ä¸­ï¼Œä¸¤è€…å¹¶ä¸ç­‰ä»·ã€‚\n\n### æå‰ç»ˆæ­¢\n\n**æå‰ç»ˆæ­¢ï¼ˆearly stopï¼‰** å¯¹äºæ·±å±‚ç¥ç»ç½‘ç»œè€Œè¨€æ˜¯ä¸€ç§ç®€å•æœ‰æ•ˆçš„æ­£åˆ™åŒ–æ–¹æ³•ï¼Œç”±äºæ·±å±‚ç¥ç»ç½‘ç»œæ‹Ÿåˆèƒ½åŠ›å¾ˆå¼ºï¼Œæ¯”è¾ƒå®¹æ˜“åœ¨è®­ç»ƒé›†ä¸Šè¿‡æ‹Ÿåˆï¼Œå› æ­¤åœ¨å®é™…æ“ä½œæ—¶å¾€å¾€äº§å‡ºä¸€ä¸ªå’Œè®­ç»ƒé›†ç‹¬ç«‹çš„éªŒè¯é›†ï¼Œå¹¶ç”¨åœ¨éªŒè¯é›†ä¸Šçš„é”™è¯¯æ¥ä»£è¡¨æœŸæœ›é”™è¯¯ï¼Œå½“éªŒè¯é›†ä¸Šçš„é”™è¯¯ä¸å†ä¸‹é™æ—¶ï¼Œåœæ­¢è¿­ä»£ã€‚\n\nç„¶è€Œåœ¨å®é™…æ“ä½œä¸­ï¼ŒéªŒè¯é›†ä¸Šçš„é”™è¯¯ç‡å˜åŒ–æ›²çº¿å¹¶ä¸æ˜¯ä¸€æ¡å¹³è¡¡çš„æ›²çº¿ï¼Œå¾ˆå¯èƒ½æ˜¯å…ˆå‡é«˜å†é™ä½ï¼Œå› æ­¤æå‰åœæ­¢çš„å…·ä½“åœæ­¢æ ‡å‡†éœ€è¦æ ¹æ®å®é™…ä»»åŠ¡ä¸Šè¿›è¡Œä¼˜åŒ–ã€‚\n\n### ä¸¢å¼ƒæ³•\n\nå½“è®­ç»ƒä¸€ä¸ªæ·±å±‚ç¥ç»ç½‘ç»œæ—¶ï¼Œå¯ä»¥éšæœºä¸¢å¼ƒä¸€éƒ¨åˆ†ç¥ç»å…ƒï¼ˆåŒæ—¶ä¸¢å¼ƒå…¶å¯¹åº”çš„è¿æ¥è¾¹ï¼‰æ¥é¿å…è¿‡æ‹Ÿåˆï¼Œè¿™ç§æ–¹æ³•ç§°ä¸º **ä¸¢å¼ƒæ³•ï¼ˆDropout Methodï¼‰**ã€‚æ¯æ¬¡ä¸¢å¼ƒçš„ç¥ç»å…ƒä¸ºéšæœºçš„ï¼Œå¯¹äºæ¯ä¸€ä¸ªç¥ç»å…ƒéƒ½ä»¥ä¸€ä¸ªæ¦‚ç‡pæ¥åˆ¤æ–­è¦ä¸è¦åœç•™ï¼Œå¯¹äºæ¯ä¸€ä¸ªç¥ç»å±‚ $y=f(Wx + b)$ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥ä¸€ä¸ªä¸¢å¼ƒå‡½æ•°$d(.)$ä½¿å¾—$y=f(Wd(x)+b)$ã€‚ä¸¢å¼ƒå‡½æ•°çš„å®šä¹‰ä¸ºï¼š\n$$\nd(x) = \\left\\{\\begin{matrix}\nm \\odot x, When \\, Train\\\\ \npx, When \\,  Test\n\\end{matrix}\\right.\n$$\nå…¶ä¸­$m \\in \\{0,1\\}^d$æ˜¯ä¸¢å¼ƒæ©ç ï¼ˆdropout maskï¼‰ï¼Œé€šè¿‡ä»¥æ¦‚ç‡ä¸ºpçš„è´åŠªåŠ›åˆ†å¸ƒéšæœºç”Ÿæˆï¼Œ$p$å¯ä»¥é€šè¿‡ä¸€ä¸ªéªŒè¯é›†é€‰å–ä¸€ä¸ªæœ€ä¼˜å€¼ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸º0.5ï¼Œ è¿™æ ·å¯¹å¤§éƒ¨åˆ†ç½‘ç»œå’Œä»»åŠ¡æ¯”è¾ƒæœ‰æ•ˆã€‚åœ¨è®­ç»ƒæ—¶ï¼Œç¥ç»å…ƒçš„å¹³å‡æ•°é‡ä¸ºåŸæ¥çš„$p$å€ï¼Œè€Œåœ¨æµ‹è¯•æ—¶ï¼Œæ‰€æœ‰çš„ç¥ç»å…ƒéƒ½å¯ä»¥æ˜¯æ¿€æ´»çš„ï¼Œè¿™ä¼šé€ æˆè®­ç»ƒæ—¶å’Œæµ‹è¯•æ—¶çš„ç½‘ç»œç»“æ„ä¸ä¸€è‡´ï¼Œä¸ºäº†ç¼“è§£è¿™ä¸ªé—®é¢˜ï¼Œåœ¨æµ‹è¯•æ—¶ï¼Œéœ€è¦å°†æ¯ä¸€ä¸ªç¥ç»å…ƒçš„è¾“å‡ºä¹˜ä»¥$p$ï¼Œä¹Ÿç›¸å½“äºæŠŠä¸åŒçš„ç¥ç»ç½‘ç»œåšäº†ä¸€ä¸ªå¹³å‡ã€‚\n\nä¸‹å›¾ç»™å‡ºäº†ä¸€ä¸ªç½‘ç»œç»è¿‡dropoutçš„ç¤ºä¾‹ã€‚\n![ä¸¢å¼ƒæ³•ç¤ºä¾‹](https://img-blog.csdnimg.cn/20190926170817842.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nä¸€èˆ¬æ¥è®²ï¼Œå¯¹äºéšè—å±‚çš„ç¥ç»å…ƒï¼Œä¸¢å¼ƒç‡$p=0.5$æ—¶æœ€å¥½ï¼Œè¿™æ ·å½“è®­ç»ƒæ—¶æœ‰ä¸€åŠçš„ç¥ç»å…ƒæ˜¯ä¸¢å¼ƒçš„ï¼Œéšæœºç”Ÿæˆçš„ç½‘ç»œç»“æ„å…·æœ‰å¤šæ ·æ€§ã€‚å¯¹äºè¾“å…¥å±‚çš„ç¥ç»å…ƒï¼Œå…¶ä¸¢å¼ƒç‡å¾€å¾€è®¾ç½®ä¸ºæ›´æ¥è¿‘äº1çš„æ•°ï¼Œä½¿å¾—è¾“å…¥å˜åŒ–ä¸ä¼šå¤ªå¤§ï¼Œå¯¹è¾“å…¥å±‚çš„ç¥ç»å…ƒè¿›è¡Œä¸¢å¼ƒæ—¶ï¼Œç›¸å½“äºç»™æ•°æ®å¢åŠ å™ªå£°ï¼Œæé«˜ç½‘ç»œçš„é²æ£’æ€§ã€‚\n\nä¸¢å¼ƒæ³•ä¸€èˆ¬æ˜¯é’ˆå¯¹ç¥ç»å…ƒè¿›è¡Œéšæœºä¸¢å¼ƒï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æ‰©å±•åˆ°ç¥ç»å…ƒä¹‹é—´çš„è¿æ¥è¿›è¡Œéšæœºä¸¢å¼ƒï¼Œæˆ–æ¯ä¸€å±‚è¿›è¡Œéšæœºä¸¢å¼ƒã€‚\n\nä¸¢å¼ƒæ³•æœ‰ä¸¤ç§è§£é‡Šï¼š\n\nï¼ˆ1ï¼‰é›†æˆå­¦ä¹ çš„è§£é‡Š\næ¯åšä¸€æ¬¡ä¸¢å¼ƒï¼Œç›¸å½“äºä»åŸå§‹çš„ç½‘ç»œä¸­é‡‡æ ·å¾—åˆ°ä¸€ä¸ªå­ç½‘ç»œï¼Œå¦‚æœä¸€ä¸ªç¥ç»ç½‘ç»œæœ‰nä¸ªç¥ç»å…ƒï¼Œé‚£ä¹ˆå¯ä»¥é‡‡æ ·å‡º$2^n$ä¸ªå­ç½‘ç»œï¼Œæ¯æ¬¡è®­ç»ƒéƒ½ç›¸å½“äºæ˜¯è®­ç»ƒä¸€ä¸ªä¸åŒçš„å­ç½‘ç»œï¼Œè¿™äº›å­ç½‘ç»œéƒ½å…±äº«æœ€å¼€å§‹çš„å‚æ•°ã€‚é‚£ä¹ˆæœ€ç»ˆçš„ç½‘ç»œå¯ä»¥çœ‹æˆæ˜¯é›†æˆäº†æŒ‡æ•°çº§ä¸ªä¸åŒé£æ ¼çš„ç»„åˆæ¨¡å‹ã€‚\n\n\nï¼ˆ2ï¼‰è´å¶æ–¯å­¦ä¹ çš„è§£é‡Š\n\nä¸¢å¼ƒæ³•ä¹Ÿå¯ä»¥è§£é‡Šä¸ºä¸€ä¸ªè´å¶æ–¯å­¦ä¹ çš„è¿‘ä¼¼ï¼Œç”¨$y=f(x,\\theta)$è¡¨ç¤ºä¸€ä¸ªè¦å­¦ä¹ çš„ç½‘ç»œï¼Œè´å¶æ–¯å­¦ä¹ æ˜¯å‡è®¾å‚æ•°$\\theta$ä¸ºéšæœºå‘é‡ï¼Œå¹¶ä¸”å…ˆéªŒåˆ†å¸ƒä¸º$q(\\theta)$ï¼Œè´å¶æ–¯æ–¹æ³•çš„é¢„æµ‹ä¸ºï¼š\n$$\nE_{q(\\theta)}[y] = \\int_{q}f(x,\\theta)q(\\theta)d\\theta \\approx \\frac{1}{M}\\sum_{m=1}^{M}f(x, \\theta_m)\n$$\nå…¶ä¸­$f(x, \\theta_m)$ä¸ºç¬¬mæ¬¡åº”ç”¨ä¸¢å¼ƒæ–¹æ³•åçš„ç½‘ç»œï¼Œå…¶å‚æ•°$\\theta_m$ä¸ºå…¨éƒ¨å‚æ•°$\\theta$çš„ä¸€æ¬¡é‡‡æ ·ã€‚\n\n### æ•°æ®å¢å¼º\næ·±å±‚ç¥ç»ç½‘ç»œçš„è®­ç»ƒéœ€è¦å¤§é‡çš„æ ·æœ¬æ‰èƒ½å–å¾—ä¸é”™çš„æ•ˆæœï¼Œå› ä¸ºåœ¨æ•°æ®é‡æœ‰é™çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡ **æ•°æ®å¢å¼ºï¼ˆData Augmentationï¼‰**æ¥å¢åŠ æ•°æ®é‡ï¼Œæé«˜æ¨¡å‹é²æ£’æ€§ï¼Œé¿å…è¿‡æ‹Ÿåˆã€‚ç›®å‰æ•°æ®å¢å¼ºä¸»è¦åº”ç”¨åœ¨å›¾åƒæ•°æ®ä¸Šï¼Œåœ¨æ–‡æœ¬ç­‰å…¶ä»–ç±»å‹çš„æ•°æ®è¿˜æ²¡æœ‰å¤ªå¥½çš„æ–¹æ³•ã€‚\n\nå›¾åƒæ•°æ®å¢å¼ºä¸»è¦é€šè¿‡ç®—æ³•å¯¹å›¾åƒè¿›è¡Œè½¬æ¢ï¼Œå¼•å…¥å™ªå£°æ–¹æ³•å¢å¼ºæ•°æ®çš„å¤šæ ·æ€§ï¼Œå¢å¼ºçš„æ–¹æ³•ä¸»è¦æœ‰ï¼š\n- è½¬æ¢ï¼ˆRotationï¼‰ï¼šå°†å›¾åƒæŒ‰ç…§é¡ºæ—¶é’ˆæˆ–è€…é€†æ—¶é’ˆæ–¹å‘éšæœºæ—‹è½¬ä¸€å®šçš„è§’åº¦ï¼›\n- ç¿»è½¬ï¼ˆFlipï¼‰ï¼šå°†å›¾åƒæ²¿æ°´å¹³æˆ–è€…å‚ç›´æ–¹å‘éšæœºç¿»è½¬ä¸€å®šçš„è§’åº¦ï¼›\n- ç¼©æ”¾ï¼ˆZoom in/outï¼‰ï¼šå°†å›¾åƒæ”¾å¤§æˆ–è€…ç¼©å°ä¸€å®šçš„æ¯”ä¾‹ï¼›\n- å¹³ç§»ï¼ˆShiftï¼‰ï¼šå°†å›¾åƒæŒ‰ç…§æ°´å¹³æˆ–è€…å‚ç›´çš„æ–¹æ³•å¹³ç§»ä¸€å®šæ­¥é•¿ï¼›\n- åŠ å™ªå£°ï¼ˆNoiseï¼‰ï¼šåŠ å…¥éšæœºå™ªå£°ã€‚\n\n### æ ‡ç­¾å¹³æ»‘\nåœ¨æ•°æ®å¢å¼ºä¸­ï¼Œå¯ä»¥é€šè¿‡ç»™æ ·æœ¬åŠ å…¥éšæœºå™ªå£°æ¥é¿å…è¿‡æ‹Ÿåˆï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ç»™æ ·æœ¬çš„æ ‡ç­¾å¼•å…¥ä¸€å®šçš„å™ªå£°ã€‚å‡è®¾åœ¨è®­ç»ƒæ•°æ®é›†ä¸­ï¼Œæœ‰ä¸€äº›æ ·æœ¬çš„æ ‡ç­¾æ˜¯è¢«é”™è¯¯æ ‡æ³¨çš„ï¼Œé‚£ä¹ˆæœ€å°åŒ–è¿™äº›æ ·æœ¬ä¸Šçš„æŸå¤±å‡½æ•°ä¼šå¯¼è‡´è¿‡æ‹Ÿåˆã€‚ä¸€ç§æ”¹å–„çš„æ­£åˆ™åŒ–æ–¹æ³•æ˜¯**æ ‡ç­¾å¹³æ»‘ï¼ˆlabel smothingï¼‰**ï¼Œå³åœ¨è¾“å‡ºæ ‡ç­¾ä¸­éšæœºåŠ å…¥å™ªå£°ï¼Œæ¥é¿å…æ¨¡å‹è¿‡æ‹Ÿåˆã€‚\n\nä¸€ä¸ªæ ·æœ¬$x$çš„æ ‡ç­¾ä¸€èˆ¬ç”¨onehotå‘é‡è¡¨ç¤ºï¼Œå¦‚ä¸‹ï¼š\n$$\ny = [0,...,0,1,.....,1]^T\n$$\nè¿™ç§æ ‡ç­¾å¯ä»¥çœ‹ä½œ**ç¡¬ç›®æ ‡ï¼ˆhard targetsï¼‰**ï¼Œå¦‚æœä½¿ç”¨softmaxåˆ†ç±»å™¨å¹¶ä½¿ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°ï¼Œæœ€å°åŒ–æŸå¤±å‡½æ•°ä¼šä½¿å¾—æ­£ç¡®ç±»å’Œå…¶ä»–ç±»æƒé‡å·®å¼‚å¾ˆå¤§ã€‚æ ¹æ®softmaxå‡½æ•°çš„æ€§è´¨å¯ä»¥çŸ¥é“ï¼Œå¦‚æœè¦ä½¿å¾—æŸä¸€ç±»çš„è¾“å‡ºæ¦‚ç‡æ¥è¿‘äº1ï¼Œå…¶æœªå½’ä¸€åŒ–çš„å¾—åˆ†è¦è¿œå¤§äºå…¶ä»–ç±»çš„å¾—åˆ†ï¼Œè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´å…¶æƒé‡è¶Šæ¥è¶Šå¤§ï¼Œå¹¶å¯¼è‡´è¿‡æ‹Ÿåˆã€‚i\n\næ­¤å¤–å¦‚æœæ ‡ç­¾æ˜¯é”™è¯¯çš„ï¼Œä¼šå¯¼è‡´ä¸¥é‡çš„è¿‡æ‹Ÿåˆç°è±¡ï¼Œä¸ºäº†æ”¹å–„è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥ä¸€ä¸ªå™ªå£°ä¼šæ ‡ç­¾è¿›è¡Œå¹³æ»‘ï¼Œå³å‡è®¾æ ·æœ¬ä»¥$\\epsilon$çš„æ¦‚ç‡ä¸ºå…¶ä»–ç±»ï¼Œå¹³æ»‘åçš„æ ‡ç­¾ä¸ºï¼š\n$$\n\\tilde{y} =[ \\frac{ \\epsilon }{K-1} ,...,\\frac{ \\epsilon }{K-1} ,1- \\epsilon,\\frac{ \\epsilon }{K-1},....,\\frac{ \\epsilon }{K-1}]^T\n$$\nå…¶ä¸­$K$ä¸ºæ ‡ç­¾æ•°é‡ï¼Œè¿™ç§æ ‡ç­¾å¯ä»¥çœ‹ä½œæ˜¯**è½¯ç›®æ ‡ï¼ˆsoft targetsï¼‰**ã€‚æ ‡ç­¾å¹³æ»‘å¯ä»¥é¿å…æ¨¡å‹çš„è¾“å‡ºè¿‡æ‹Ÿåˆåˆ°ç¡¬ç›®æ ‡ä¸Šï¼Œå¹¶ä¸”é€šå¸¸ä¸ä¼šé™ä½å…¶åˆ†ç±»èƒ½åŠ›ã€‚\n\nä¸Šè¾¹çš„æ ‡ç­¾å¹³æ»‘æ–¹æ³•æ˜¯ç»™å…¶ä»–$K-1$ä¸ªæ ‡ç­¾ç›¸åŒçš„æ¦‚ç‡$\\frac{\\epsilon}{K-1}$ï¼Œæ²¡æœ‰è€ƒè™‘ç›®æ ‡ä¹‹é—´çš„ç›¸å…³æ€§ã€‚ä¸€ç§æ›´å¥½çš„åšæ³•æ˜¯æŒ‰ç…§ç±»åˆ«ç›¸å…³æ€§æ¥èµ‹äºˆå…¶ä»–æ ‡ç­¾ä¸åŒçš„æ¦‚ç‡ï¼Œæ¯”å¦‚å…ˆè®­ç»ƒå¦å¤–ä¸€ä¸ªæ›´å¤æ‚çš„æ•™å¸ˆç½‘ç»œï¼Œå¹¶ä½¿ç”¨å¤§ç½‘ç»œçš„è¾“å‡ºä½œä¸ºè½¯ç›®æ ‡è¿›è¡Œè®­ç»ƒå­¦ç”Ÿç½‘ç»œï¼Œè¿™ç§æ–¹æ³•ä¹Ÿç§°ä¸ºçŸ¥è¯†ç²¾ç‚¼ï¼ˆKnowledge Distillationï¼‰ã€‚\n\n### æ€»ç»“\nè‡³æ­¤ï¼Œç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–ï¼ˆä¸€ï¼‰ï¼ˆäºŒï¼‰ï¼ˆä¸‰ï¼‰ï¼ˆå››ï¼‰ç¯‡å·²ç»å®Œæˆï¼Œå¦‚ä¸‹ï¼š\n- [ç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–ï¼ˆä¸€ï¼‰ä¹‹å­¦ä¹ ç‡è¡°å‡å’ŒåŠ¨æ€æ¢¯åº¦æ–¹å‘](https://thinkgamer.blog.csdn.net/article/details/100996744)\n- [ç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–ï¼ˆäºŒï¼‰ä¹‹å‚æ•°åˆå§‹åŒ–/æ•°æ®é¢„å¤„ç†/é€å±‚å½’ä¸€åŒ–](https://thinkgamer.blog.csdn.net/article/details/101026786)\n- [ç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–ï¼ˆä¸‰ï¼‰ä¹‹è¶…å‚æ•°ä¼˜åŒ–](https://thinkgamer.blog.csdn.net/article/details/101033047)\n- [ç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–ï¼ˆå››ï¼‰ä¹‹æ­£åˆ™åŒ–]()\n\n\nç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–å³æ˜¯å¯¹ç«‹åˆç»Ÿä¸€çš„å…³ç³»ï¼Œä¸€æ–¹é¢æˆ‘ä»¬å¸Œæœ›æ‰¾åˆ°ä¸€ä¸ªæœ€ä¼˜è§£ä½¿å¾—æ¨¡å‹è¯¯å·®æœ€å°ï¼Œå¦ä¸€æ–¹é¢åˆä¸å¸Œæœ›å¾—åˆ°ä¸€ä¸ªæœ€ä¼˜è§£ï¼Œå¯èƒ½é™·å…¥è¿‡æ‹Ÿåˆã€‚ä¼˜åŒ–å’Œæ­£åˆ™åŒ–çš„ç›®æ ‡æ˜¯æœŸæœ›é£é™©æœ€å°åŒ–ã€‚\n\nç›®å‰åœ¨æ·±å±‚ç¥ç»ç½‘ç»œä¸­æ³›åŒ–èƒ½åŠ›è¿˜æ²¡æœ‰å¾ˆå¥½çš„ç†è®ºæ”¯æŒï¼Œåœ¨ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ ä¸Šæ¯”è¾ƒæœ‰æ•ˆçš„$l_1,l_2$æ­£åˆ™åŒ–åœ¨æ·±å±‚ç¥ç»ç½‘ç»œä¸­ä½œç”¨ä¹Ÿæ¯”è¾ƒæœ‰é™ï¼Œè€Œä¸€äº›ç»éªŒæ€§çš„åšæ³•ï¼Œæ¯”å¦‚éšæœºæ¢¯åº¦ä¸‹é™å’Œæå‰ç»ˆæ­¢ï¼Œä¼šæ›´åŠ æœ‰æ•ˆã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["ç¥ç»ç½‘ç»œ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–ï¼ˆä¸‰ï¼‰ä¹‹è¶…å‚æ•°ä¼˜åŒ–","url":"/2019/09/22/æ·±åº¦å­¦ä¹ /ç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œåŒ–å’Œæ­£åˆ™åŒ–/ç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–ï¼ˆä¸‰ï¼‰ä¹‹è¶…å‚æ•°ä¼˜åŒ–/","content":"\n> å…¬ä¼—å·æ ‡é¢˜ï¼šç¥ç»ç½‘ç»œä¸­çš„ä¼˜åŒ–æ–¹æ³•ä¹‹å­¦ä¹ ç‡è¡°å‡å’ŒåŠ¨æ€æ¢¯åº¦æ–¹å‘\n\n### å¼•è¨€\n\nç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–é—®é¢˜ä»‹ç»ä¸»è¦åˆ†ä¸ºä¸€ï¼ŒäºŒï¼Œä¸‰ï¼Œå››ç¯‡è¿›è¡Œä»‹ç»ã€‚\n- ç¬¬ä¸€ç¯‡åŒ…æ‹¬\n    - ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–æ¦‚è¿°\n    - ä¼˜åŒ–ç®—æ³•ä»‹ç»\n- ç¬¬äºŒç¯‡åŒ…æ‹¬\n    - å‚æ•°åˆå§‹åŒ–\n    - æ•°æ®é¢„å¤„ç†\n    - é€å±‚å½’ä¸€åŒ–\n- ç¬¬ä¸‰ç¯‡åŒ…æ‹¬\n    - è¶…å‚æ•°ä¼˜åŒ–\n- ç¬¬å››ç¯‡åŒ…æ‹¬\n    - ç½‘ç»œæ­£åˆ™åŒ– \n\n\n---\n\næ— è®ºæ˜¯ç¥ç»ç½‘ç»œè¿˜æ˜¯æœºå™¨å­¦ä¹ éƒ½ä¼šå­˜åœ¨å¾ˆå¤šçš„è¶…å‚æ•°ï¼Œåœ¨ç¥ç»ç½‘ç»œä¸­ï¼Œå¸¸è§çš„è¶…å‚æ•°æœ‰ï¼š\n- ç½‘ç»œç»“æ„ï¼šåŒ…æ‹¬ç¥ç»å…ƒä¹‹é—´çš„è¿æ¥å…³ç³»ï¼Œå±‚æ•°ï¼Œæ¯å±‚çš„ç¥ç»å…ƒæ•°é‡ï¼Œæ¿€æ´»å‡½æ•°çš„ç±»å‹ç­‰\n- ä¼˜åŒ–å‚æ•°ï¼šåŒ…æ‹¬ä¼˜åŒ–æ–¹æ³•ï¼Œå­¦ä¹ ç‡ï¼Œå°æ‰¹é‡æ ·æœ¬æ•°é‡\n- æ­£åˆ™åŒ–ç³»æ•°\n\n**è¶…å‚æ•°ä¼˜åŒ–ï¼ˆHyperparamter Optimizationï¼‰** ä¸»è¦å­˜åœ¨ä¸¤æ–¹é¢çš„å›°éš¾ï¼š\n- è¶…å‚æ•°ä¼˜åŒ–æ˜¯ä¸€ä¸ªç»„åˆä¼˜åŒ–é—®é¢˜ï¼Œæ— æ³•åƒä¸€èˆ¬å‚æ•°é‚£æ ·é€šè¿‡æ¢¯åº¦ä¼˜åŒ–çš„æ–¹æ³•æ¥æ±‚è§£ï¼Œä¹Ÿæ²¡æœ‰ä¸€ç§é€šç”¨çš„ä¼˜åŒ–æ–¹æ³•\n- è¯„ä¼°ä¸€ç»„è¶…å‚æ•°é…ç½®æ—¶é—´ä»£ä»·å¾ˆé«˜ï¼Œä»è€Œå¯¼è‡´ä¸€äº›ä¼˜åŒ–ç®—æ³•ï¼ˆæ¯”å¦‚æ—¶é—´æ¼”åŒ–ç®—æ³•ï¼‰åœ¨è¶…å‚æ•°ä¼˜åŒ–ä¸­éš¾ä»¥åº”ç”¨\n\nå¯¹äºè¶…å‚æ•°çš„è®¾ç½®ï¼Œä¸€èˆ¬æœ‰ä¸‰ç§æ¯”è¾ƒç®€å•çš„ä¼˜åŒ–æ–¹æ³•ï¼Œäººå·¥æœç´¢ï¼Œç½‘æ ¼æœç´ ï¼Œéšæœºæœç´¢\n\n---\n### ç½‘æ ¼æœç´¢\nç½‘æ ¼æœç´¢ï¼ˆgrid searchï¼‰æ˜¯ä¸€ç§é€šè¿‡å°è¯•æ‰€æœ‰è¶…å‚æ•°çš„ç»„åˆæ¥å¯»æ‰¾ä¸€ç»„åˆé€‚çš„è¶…å‚æ•°ç»„åˆçš„æ–¹æ³•ã€‚å¦‚æœå‚æ•°æ˜¯è¿ç»­ï¼Œå¯ä»¥å°†å…¶ç¦»æ•£åŒ–ã€‚æ¯”å¦‚â€œå­¦ä¹ ç‡â€ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ç»éªŒé€‰å–å‡ ä¸ªå€¼:$\\alpha \\in {0.01, 0.1, 0.5, 1.0}$ã€‚\n\nä¸€èˆ¬è€Œè¨€ï¼Œå¯¹äºè¿ç»­çš„è¶…å‚æ•°ï¼Œä¸èƒ½é‡‡ç”¨ç­‰é—´éš”çš„æ–¹å¼è¿›è¡Œåˆ’åˆ†ï¼Œéœ€è¦æ ¹æ®è¶…å‚æ•°è‡ªèº«çš„ç‰¹ç‚¹è¿›è¡Œç¦»æ•£åŒ–ã€‚\n\nç½‘æ ¼æœç´¢æ ¹æ®ä¸åŒçš„å‚æ•°ç»„åˆåœ¨æµ‹è¯•é›†ä¸Šçš„è¡¨ç°ï¼Œé€‰æ‹©ä¸€ç»„æœ€ä¼˜çš„å‚æ•°ä½œä¸ºç»“æœã€‚\n\n### éšæœºæœç´¢\nä¸åŒè¶…å‚æ•°å¯¹æ¨¡å‹çš„å½±å“ä¸åŒï¼Œæœ‰çš„è¶…å‚æ•°ï¼ˆæ¯”å¦‚æ­£åˆ™é¡¹ç³»æ•°ï¼‰å¯¹æ¨¡å‹çš„å½±å“æœ‰é™ï¼Œæœ‰çš„è¶…å‚æ•°ï¼ˆæ¯”å¦‚å­¦ä¹ ç‡ï¼‰å¯¹æ¨¡å‹çš„å½±å“æ¯”è¾ƒå¤§ï¼Œè¿™æ—¶å€™é‡‡ç”¨ç½‘æ ¼æœç´¢å°±ä¼šåœ¨å½±å“ä¸å¤§çš„è¶…å‚æ•°ä¸Šæµªè´¹æ—¶é—´ã€‚\n\nä¸€ç§åœ¨å®è·µä¸­æ¯”è¾ƒæœ‰æ•ˆçš„æ–¹æ³•æ˜¯å¯¹è¶…å‚æ•°è¿›è¡Œéšæœºç»„åˆï¼ˆæ¯”å¦‚ä¸å¤ªé‡è¦çš„å‚æ•°è¿›è¡ŒéšæœºæŠ½å–ï¼Œé‡è¦çš„å‚æ•°å¯ä»¥æŒ‰ç…§ç½‘æ ¼æœç´¢çš„æ–¹å¼é€‰æ‹©ï¼‰ï¼Œé€‰æ‹©è¡¨ç°æœ€å¥½çš„å‚æ•°ä½œä¸ºç»“æœ,è¿™å°±æ˜¯**éšæœºæœç´¢ï¼ˆrandom searchï¼‰**\n\n> ç½‘æ ¼æœç´¢å’Œéšæœºæœç´¢æ²¡æœ‰åˆ©ç”¨è¶…å‚æ•°ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œå³å¦‚æœæ¨¡å‹çš„è¶…å‚æ•°ç»„åˆæ¯”è¾ƒç±»ä¼¼ï¼Œå…¶æ¨¡å‹çš„æ€§èƒ½è¡¨ç°ä¹Ÿæ˜¯æ¯”è¾ƒæ¥è¿‘çš„ï¼Œè¿™æ—¶å€™ç½‘æ ¼æœç´¢å’Œéšæœºæœç´¢å°±æ¯”è¾ƒä½æ•ˆã€‚ä¸‹é¢ä»‹ç»ä¸¤ç§è‡ªé€‚åº”çš„è¶…å‚æ•°ä¼˜åŒ–æ–¹æ³•ï¼šè´å¶æ–¯ä¼˜åŒ–å’ŒåŠ¨æ€èµ„æºåˆ†é…ã€‚\n\n---\n### åŠ¨æ€èµ„æºåˆ†é…\nåœ¨è¶…å‚æ•°ä¼˜åŒ–ä¸­ï¼Œæ¯ç»„è¶…å‚æ•°é…ç½®çš„è¯„ä¼°ä»£ä»·å¾ˆé«˜ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥åœ¨è¾ƒæ—©çš„é˜¶æ®µå°±ä¼°è®¡å‡ºè¯¥ç»„è¶…å‚æ•°æ•ˆæœå°±æ¯”è¾ƒå·®ï¼Œç„¶åæå‰ç»ˆæ­¢è¯¥ç»„å‚æ•°çš„æµ‹è¯•ï¼Œä»è€Œå°†æ›´å¤šçš„èµ„æºç•™ç»™å…¶ä»–ã€‚è¿™ä¸ªé—®é¢˜å¯ä»¥å½’ç»“ä¸º**å¤šè‡‚èµŒåšæœºé—®é¢˜**çš„ä¸€ä¸ªæ³›åŒ–é—®é¢˜ï¼Œå³**æœ€ä¼˜è‡‚é—®é¢˜ï¼ˆbest-arm problemï¼‰**ï¼Œå³åœ¨ç»™å®šæœ‰é™æ¬¡æ•°çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•è·å–æœ€å¤§æ”¶ç›Šã€‚\n\nåŠ¨æ€èµ„æºåˆ†é…çš„ä¸€ç§æœ‰æ•ˆæ–¹æ³•æ˜¯**é€å±‚å‡åŠï¼ˆsuccessive halvingï¼‰**ï¼Œå°†è¶…å‚æ•°ä¼˜åŒ–çœ‹ä½œæ˜¯ä¸€ç§ééšæœºçš„æœ€ä¼˜è‡‚é—®é¢˜ã€‚è¯¥æ–¹æ³•å‡ºè‡ª2015å¹´çš„ä¸€ç¯‡è®ºæ–‡ï¼Œè®ºæ–‡ä¸‹è½½åœ°å€ä¸ºï¼šhttps://arxiv.org/pdf/1502.07943.pdf\n\nå‡è®¾è¦å°è¯•Nç»„è¶…å‚æ•°é…ç½®ï¼Œæ€»å…±å¯åˆ©ç”¨çš„æ‘‡è‡‚èµ„æºæ¬¡æ•°ä¸ºBï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡$T= [log_2N]-1$è½®é€æ¬¡å‡åŠçš„æ–¹æ³•æ¥é€‰å–æœ€ä¼˜çš„é…ç½®ï¼Œå…·ä½“è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š\n\n![é€æ¬¡å‡åŠ](https://img-blog.csdnimg.cn/20190919191933874.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n> åœ¨é€æ¬¡å‡åŠæ–¹æ³•ä¸­ï¼ŒNçš„è®¾ç½®ååˆ†é‡è¦ï¼Œå¦‚æœNè¶Šå¤§ï¼Œå¾—åˆ°æœ€ä½³é…ç½®çš„æœºä¼šä¹Ÿè¶Šå¤§ï¼Œä½†æ¯ç»„é…ç½®åˆ†é…åˆ°çš„èµ„æºå°±è¶Šå°‘ï¼Œè¿™æ ·æ—©æœŸçš„è¯„ä¼°ç»“æœå¯èƒ½ä¸å‡†ç¡®ï¼Œåä¹‹ï¼Œå¦‚æœNè¶Šå°ï¼Œæ¯ç»„è¶…å‚æ•°é…ç½®çš„è¯„ä¼°å°±ä¼šè¶Šå‡†ç¡®ï¼Œä½†ä¹Ÿæœ‰å¯èƒ½æ— æ³•å¾—åˆ°æœ€ä¼˜çš„å‚æ•°é…ç½®ã€‚å› æ­¤å¦‚ä½•è®¾ç½®Næ˜¯è¯„ä¼°â€œåˆ©ç”¨-æ¢ç´¢â€çš„ä¸€ä¸ªå…³é”®å› ç´ ï¼Œä¸€ç§æ”¹è¿›çš„æ–¹æ³•æ˜¯ï¼šHyperBrandæ–¹æ³•ï¼Œé€šè¿‡å°è¯•ä¸åŒçš„Næ¥å¯»æ‰¾æœ€ä¼˜çš„å‚æ•°é…ç½®ã€‚å¯¹åº”çš„è®ºæ–‡ä¸‹è½½åœ°å€ä¸ºï¼šhttps://openreview.net/pdf?id=ry18Ww5ee\n\n---\n### è´å¶æ–¯ä¼˜åŒ–\n\n#### è´å¶æ–¯ä¼˜åŒ–èƒŒåçš„æ€æƒ³\n\nè´å¶æ–¯ä¼˜åŒ–ï¼ˆBayesian optimizationï¼‰æ˜¯ä¸€ç§è‡ªé€‚åº”çš„è¶…å‚æ•°ä¼˜åŒ–æ–¹æ³•ï¼Œæ ¹æ®å½“å‰å·²ç»è¯•éªŒçš„è¶…å‚æ•°ç»„åˆï¼Œæ¥é¢„æµ‹ä¸‹ä¸€ä¸ªå¯èƒ½å¸¦æ¥æœ€å¤§æ”¶ç›Šçš„ç»„åˆã€‚\n\n> å¯¹äºåŒä¸€ä¸ªç®—æ³•æ¥è®²ï¼Œä¸åŒçš„è¶…å‚æ•°ç»„åˆå…¶å®æ˜¯å¯¹åº”ä¸åŒçš„æ¨¡å‹ï¼Œè€Œè´å¶æ–¯ä¼˜åŒ–å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ä¼—å¤šæ¨¡å‹ä¸­å¯»æ‰¾æ€§èƒ½æœ€ä¼˜çš„æ¨¡å‹ï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨äº¤å‰éªŒè¯çš„æ€æƒ³å¯»æ‰¾æ›´å¥½çš„è¶…å‚æ•°ç»„åˆï¼Œä½†æ˜¯ä¸çŸ¥é“éœ€è¦å¤šå°‘æ ·æœ¬æ‰èƒ½ä»ä¸€ç³»åˆ—å€™é€‰æ¨¡å‹ä¸­é€‰æ‹©å‡ºæœ€ä¼˜çš„æ¨¡å‹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè´å¶æ–¯ä¼˜åŒ–èƒ½å¤Ÿå‡å°‘è®¡ç®—ä»»åŠ¡åŠ é€Ÿä¼˜åŒ–è¿‡ç¨‹çš„è¿›ç¨‹ï¼ŒåŒæ ·è´å¶æ–¯ä¼˜åŒ–ä¸ä¾èµ–äºäººä¸ºçŒœæµ‹éœ€è¦æ ·æœ¬é‡çš„å¤šå°‘ï¼Œè¿™ç§ä¼˜åŒ–è®¡ç®—æ˜¯åŸºäºéšæœºæ€§å’Œæ¦‚ç‡åˆ†å¸ƒå¾—åˆ°çš„ã€‚\n<br>\nç®€å•æ¥è¯´ï¼Œå½“æˆ‘ä»¬æŠŠç¬¬ä¸€æ¡æ ·æœ¬é€åˆ°æ¨¡å‹ä¸­çš„æ—¶å€™ï¼Œæ¨¡å‹ä¼šæ ¹æ®å½“å‰çš„æ ·æœ¬ç‚¹æ„å»ºä¸€æ¡ç›´æ¥ï¼Œå½“æŠŠç¬¬äºŒå¤©æ ·æœ¬é€åˆ°æ¨¡å‹ä¸­çš„æ—¶å€™ï¼Œæ¨¡å‹å°†ç»“åˆè¿™ä¸¤ä¸ªç‚¹å¹¶ä»å‰é¢çš„çº¿å‡ºå‘ç»˜åˆ¶ä¸€æ¡ä¿®æ­£çš„çº¿ï¼Œå½“è¾“é€ç¬¬ä¸‰ä¸ªæ ·æœ¬çš„æ—¶å€™ï¼Œæ¨¡å‹ç»˜åˆ¶çš„å°±æ˜¯ä¸€æ¡éçº¿æ€§æ›²çº¿ï¼Œå½“æ ·æœ¬æ•°æ®å¢åŠ æ—¶ï¼Œæ¨¡å‹æ‰€ç»“åˆçš„æ›²çº¿å°±ä¼šå˜å¾—æ›´å¤šï¼Œè¿™å°±åƒç»Ÿè®¡å­¦é‡Œçš„æŠ½æ ·å®šç†ï¼Œå³æˆ‘ä»¬ä»æ ·æœ¬å‚æ•°å‡ºå‘ä¼°è®¡æ€»ä½“å‚æ•°ï¼Œä¸”å¸Œæœ›æ„å»ºå‡ºçš„ä¼°è®¡é‡ä¸æ€»ä½“å‚æ•°ç›¸åˆï¼Œæ— åä¼°è®¡ã€‚\n<br>\nä¸‹å›¾ä¸ºéçº¿æ€§ç›®æ ‡å‡½æ•°æ›²çº¿å›¾ï¼Œå¯¹äºç»™å®šçš„ç›®æ ‡å‡½æ•°ï¼Œåœ¨è¾“é€äº†æ‰€æœ‰çš„è§‚å¯Ÿæ ·æœ¬ä¹‹åï¼Œå®ƒå°†æœå¯»åˆ°æœ€å¤§å€¼ï¼Œå³å¯»æ‰¾ä»¤ç›®æ ‡å‡½æ•°æœ€å¤§çš„å‚æ•°ï¼ˆarg maxï¼‰ã€‚\n![éçº¿æ€§ç›®æ ‡å‡½æ•°æ›²çº¿å›¾](https://img-blog.csdnimg.cn/20190920122716823.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\næˆ‘ä»¬çš„ç›®æ ‡å¹¶ä¸æ˜¯ä½¿ç”¨å°½å¯èƒ½å¤šçš„æ ·æœ¬å»å®Œå…¨æ¨æ–­æœªçŸ¥çš„ç›®æ ‡å‡½æ•°ï¼Œè€Œæ˜¯å¸Œæœ›èƒ½æ±‚å¾—ä½¿ç›®æ ‡å‡½æ•°æœ€å¤§åŒ–çš„å‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†æ³¨æ„åŠ›ä»æ›²çº¿ä¸Šç§»å¼€ï¼Œå½“ç›®æ ‡å‡½æ•°ç»„åˆèƒ½æå‡æ›²çº¿å½¢æˆåˆ†å¸ƒæ—¶ï¼Œå…¶å°±å¯ä»¥ç§°ä¸ºé‡‡é›†å‡½æ•°ï¼ˆAcquisition funtionï¼‰ï¼Œè¿™å°±æ˜¯**è´å¶æ–¯ä¼˜åŒ–èƒŒåçš„æ€æƒ³**ã€‚ï¼ˆç°è‰²åŒºåŸŸéƒ¨åˆ†å‚è€ƒï¼šhttps://www.jiqizhixin.com/articles/2017-08-18-5ï¼‰\n\n\n#### æ—¶åºæ¨¡å‹ä¼˜åŒ–\n\nä¸€ç§å¸¸ç”¨çš„è´å¶æ–¯ä¼˜åŒ–æ–¹æ³•ä¸ºæ—¶åºæ¨¡å‹ä¼˜åŒ–ï¼ˆSequential Model-Based Optimizationï¼ŒSMBDï¼‰ï¼Œå‡è®¾è¶…å‚æ•°ä¼˜åŒ–çš„å‡½æ•°f(x)æœä»é«˜æ–¯è¿‡ç¨‹ï¼Œåˆ™$p(f(x)|x)$ä¸ºä¸€ä¸ªæ­£æ€åˆ†å¸ƒã€‚è´å¶æ–¯ä¼˜åŒ–è¿‡ç¨‹æ˜¯æ ¹æ®å·²æœ‰çš„Nç»„å®éªŒç»“æœ$H={x_n,y_n}, n\\in(1,N)$ï¼ˆ$y_n$ä¸º$f(x_n)$çš„è§‚æµ‹å€¼ï¼‰æ¥å»ºæ¨¡é«˜æ–¯è¿‡ç¨‹ï¼Œå¹¶è®¡ç®—$f(x)$çš„åéªŒåˆ†å¸ƒ$p(f(x)|x,H)$ã€‚\n\nä¸ºäº†ä½¿å¾—$p(f(x)|x,H)$æ¥è¿‘å…¶çœŸå®åˆ†å¸ƒï¼Œå°±éœ€è¦å¯¹æ ·æœ¬ç©ºé—´è¿›è¡Œè¶³å¤Ÿå¤šçš„é‡‡æ ·ï¼Œä½†æ˜¯è¶…å‚æ•°ä¼˜åŒ–ä¸­æ¯ä¸€ä¸ªæ ·æœ¬çš„ç”Ÿæˆæˆæœ¬éƒ½å¾ˆé«˜ï¼Œéœ€è¦ä½¿ç”¨å°½å¯èƒ½å°‘çš„æ ·æœ¬æ¥ä½¿å¾—$p_\\theta(f(x)|x,H)$æ¥è¿‘äºçœŸå®åˆ†å¸ƒã€‚å› æ­¤éœ€è¦å®šä¹‰ä¸€ä¸ªæ”¶ç›Šå‡½æ•°ï¼ˆAcquisition funtionï¼‰$\\alpha (x, H)$æ¥åˆ¤æ–­ä¸€ä¸ªæ ·æœ¬èƒ½å¦ç»™å»ºæ¨¡$p_\\theta(f(x)|x,H)$æä¾›æ›´å¤šçš„æ”¶ç›Šã€‚æ”¶ç›Šè¶Šå¤§ï¼Œå…¶ä¿®æ­£çš„é«˜æ–¯è¿‡ç¨‹ä¼šè¶Šæ¥è¿‘ç›®æ ‡å‡½æ•°çš„çœŸå®åˆ†å¸ƒã€‚\n\næ”¶ç›Šå‡½æ•°çš„å®šä¹‰æœ‰å¾ˆå¤šæ–¹å¼ï¼Œä¸€ä¸ªå¸¸ç”¨çš„æ˜¯æœŸæœ›æ”¹å–„ï¼ˆExpected Improvementï¼ŒEIï¼‰ã€‚å‡è®¾$y^* = min \\left \\{  y_n, 1 \\leq n \\leq N \\right \\}$æ˜¯å½“å‰å·²æœ‰æ ·æœ¬ä¸­çš„æœ€ä¼˜å€¼ï¼ŒæœŸæœ›æ”¹å–„å‡½æ•°ä¸ºï¼š\n$$\nEI(x, H) = \\int_{-\\infty }^{ +\\infty } max (y^* - y, 0) p(y|x, H) dy\n$$\næœŸæœ›æ”¹å–„æ˜¯å®šä¹‰ä¸€ä¸ªæ ·æœ¬$x$åœ¨å½“å‰æ¨¡å‹$p(f(x)|x,H)$ä¸‹ï¼Œ$f(x)$è¶…è¿‡æœ€å¥½ç»“æœ$y^*$çš„æœŸæœ›ã€‚é™¤äº†æœŸæœ›æ”¹å–„å‡½æ•°ä¹‹å¤–ï¼Œæ”¶ç›Šå‡½æ•°è¿˜æœ‰å…¶ä»–å‡½æ•°çš„å®šä¹‰ï¼Œæ¯”å¦‚æ”¹å–„æ¦‚ç‡ï¼ˆProbability Of Improvementï¼‰ï¼Œé«˜æ–¯è¿‡ç¨‹ç½®ä¿¡ä¸Šç•Œï¼ˆGP Up Confidence Boundï¼ŒGP-UCBï¼‰ç­‰ã€‚\n\næ—¶åºæ¨¡å‹ä¼˜åŒ–è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š\n![æ—¶åºæ¨¡å‹ä¼˜åŒ–è¿‡ç¨‹](https://img-blog.csdnimg.cn/20190920150457198.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nè´å¶æ–¯ä¼˜åŒ–çš„ç¼ºç‚¹æ˜¯é«˜æ–¯å»ºæ¨¡è¿‡ç¨‹éœ€è¦è®¡ç®—çŸ©é˜µçš„é€†ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º$O(n^3)$ï¼Œå› æ­¤ä¸èƒ½å¾ˆå¥½çš„å¤„ç†é«˜ç»´è¿‡ç¨‹ï¼Œæ·±å±‚ç¥ç»ç½‘ç»œçš„å‚æ•°ä¸€èˆ¬æ¯”è¾ƒå¤šï¼Œéœ€è¦æ›´åŠ é«˜æ•ˆçš„é«˜æ–¯è¿‡ç¨‹å»ºæ¨¡ï¼Œä¹Ÿæœ‰ä¸€äº›æ–¹æ³•å°†æ—¶é—´å¤æ‚åº¦ä»$O(n^3)$é™åˆ°äº†$O(n)$ã€‚\n\n> è‡³æ­¤ï¼Œè¶…å‚æ•°ä¼˜åŒ–éƒ¨åˆ†å·²ç»ä»‹ç»å®Œæˆï¼Œè¿™é‡Œå¹¶æ²¡æœ‰å¯¹è¶…å‚æ•°ä¼˜åŒ–è¿›è¡Œå®ç°ï¼Œæœ‰å¾ˆå¤šPythonåº“å·²ç»å¯¹å…¶è¿›è¡Œäº†å°è£…ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å…³æ³¨ä¸‹ï¼Œå¦å¤–è´å¶æ–¯ä¼˜åŒ–åœ¨æ—¥å¸¸å®è·µä¸­ç”¨çš„æ¯”è¾ƒå¤šä½†æ˜¯ä¸å¤ªå¥½ç†è§£ï¼Œå¯ä»¥å¤šçœ‹å‡ éï¼Œå¯¹æ¯”ä¸€äº›æ–‡ç« ä»€ä¹ˆçœ‹ä¸‹ç†è§£ä¸‹ã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["ç¥ç»ç½‘ç»œ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–ï¼ˆäºŒï¼‰ä¹‹å‚æ•°åˆå§‹åŒ–/æ•°æ®é¢„å¤„ç†/é€å±‚å½’ä¸€åŒ–","url":"/2019/09/22/æ·±åº¦å­¦ä¹ /ç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œåŒ–å’Œæ­£åˆ™åŒ–/ç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–ï¼ˆäºŒï¼‰ä¹‹å‚æ•°åˆå§‹åŒ–:æ•°æ®é¢„å¤„ç†:é€å±‚å½’ä¸€åŒ–/","content":"\n### å¼•è¨€\n\nç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–é—®é¢˜ä»‹ç»ä¸»è¦åˆ†ä¸ºä¸€ï¼ŒäºŒï¼Œä¸‰ï¼Œå››ç¯‡è¿›è¡Œä»‹ç»ã€‚\n- ç¬¬ä¸€ç¯‡åŒ…æ‹¬\n    - ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–æ¦‚è¿°\n    - ä¼˜åŒ–ç®—æ³•ä»‹ç»\n- ç¬¬äºŒç¯‡åŒ…æ‹¬\n    - å‚æ•°åˆå§‹åŒ–\n    - æ•°æ®é¢„å¤„ç†\n    - é€å±‚å½’ä¸€åŒ–\n- ç¬¬ä¸‰ç¯‡åŒ…æ‹¬\n    - è¶…å‚æ•°ä¼˜åŒ–\n- ç¬¬å››ç¯‡åŒ…æ‹¬\n    - ç½‘ç»œæ­£åˆ™åŒ– \n\n\n### å‚æ•°åˆå§‹åŒ–\n#### å¯¹ç§°æƒé‡ç°è±¡\nåœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬æåˆ°ç¥ç»ç½‘ç»œä¸­çš„å‚æ•°å­¦ä¹ æ˜¯åŸºäºæ¢¯åº¦ä¸‹é™çš„ï¼Œè€Œæ¢¯åº¦ä¸‹é™éœ€è¦èµ‹äºˆä¸€ä¸ªåˆå§‹çš„å‚æ•°ï¼Œæ‰€ä»¥è¿™ä¸ªå‚æ•°çš„åˆå§‹åŒ–å°±æ˜¾å¾—ç‰¹åˆ«é‡è¦ã€‚\n\nåœ¨æ„ŸçŸ¥å™¨å’Œé€»è¾‘å›å½’ä¸­ï¼Œä¸€èˆ¬å°†å‚æ•°åˆå§‹åŒ–ä¸º0ï¼Œä½†æ˜¯åœ¨ç¥ç»ç½‘ç»œä¸­å¦‚æœæŠŠå‚æ•°åˆå§‹åŒ–ä¸º0ï¼Œå°±ä¼šå¯¼è‡´åœ¨ç¬¬ä¸€æ¬¡å‰å‘è®¡ç®—æ—¶ï¼Œæ‰€æœ‰éšè—å±‚ç¥ç»å…ƒçš„æ¿€æ´»å€¼éƒ½ç›¸åŒï¼Œè¿™æ ·ä¼šå¯¼è‡´æ·±å±‚ç¥ç»å…ƒæ²¡æœ‰åŒºåˆ†æ€§ï¼Œè¿™ç§ç°è±¡ç§°ä¸º**å¯¹ç§°æƒé‡ç°è±¡**\n\nå› æ­¤å¦‚æœè¦é«˜è´¨é‡çš„è®­ç»ƒä¸€ä¸ªç½‘ç»œï¼Œç»™å‚æ•°é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„åˆå§‹åŒ–åŒºé—´æ˜¯éå¸¸é‡è¦çš„ï¼Œä¸€èˆ¬è€Œè¨€ï¼Œå‚æ•°åˆå§‹åŒ–çš„åŒºé—´åº”è¯¥æ ¹æ®ç¥ç»å…ƒçš„æ€§è´¨è¿›è¡Œå·®å¼‚åŒ–çš„è®¾ç½®ï¼Œå¦‚æœä¸€ä¸ªç¥ç»å…ƒçš„è¾“å…¥è¿‡å¤šï¼Œæƒé‡å°±ä¸è¦è®¾ç½®å¤ªå¤§ï¼Œä»¥é¿å…ç¥ç»å…ƒçš„çš„è¾“å‡ºè¿‡å¤§ï¼ˆå½“æ¿€æ´»å‡½æ•°ä¸ºReLUæ—¶ï¼‰æˆ–è€…è¿‡é¥±å’Œï¼ˆæ¿€æ´»å‡½æ•°ä¸ºSigmoidå‡½æ•°æ—¶ï¼‰ã€‚\nå…³äºç¥ç»ç½‘ç»œä¸­çš„æ¿€æ´»å‡½æ•°ä»‹ç»å¯å‚è€ƒï¼š\n> https://blog.csdn.net/Gamer_gyt/article/details/89440152\n\nå¸¸è§çš„å‚æ•°åˆå§‹åŒ–æ–¹æ³•åŒ…æ‹¬ä»¥ä¸‹ä¸¤ç§ã€‚\n\n#### Gaussianåˆå§‹åŒ–\n\né«˜æ–¯åˆå§‹åŒ–æ˜¯æœ€ç®€å•çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œå‚æ•°æœä»ä¸€ä¸ªå›ºå®šå‡å€¼å’Œå›ºå®šæ–¹å·®çš„é«˜æ–¯åˆ†å¸ƒè¿›è¡Œéšæœºåˆå§‹åŒ–ã€‚\n\nåˆå§‹åŒ–ä¸€ä¸ªæ·±åº¦ç½‘ç»œæ—¶ï¼Œä¸€ä¸ªæ¯”è¾ƒå¥½çš„åˆå§‹åŒ–æ–¹æ¡ˆæ˜¯ä¿æŒæ¯ä¸ªç¥ç»å…ƒè¾“å…¥çš„æ–¹å·®æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œå½“ä¸€ä¸ªç¥ç»å…ƒçš„è¾“å…¥è¿æ¥æ•°é‡ä¸ºnæ—¶ï¼Œå¯ä»¥è€ƒè™‘å…¶è¾“å…¥è¿æ¥æƒé‡ä»¥$N(0,\\sqrt{\\frac{1}{n}})$çš„é«˜æ–¯åˆ†å¸ƒè¿›è¡Œåˆå§‹åŒ–ï¼Œå¦‚æœåŒæ—¶è€ƒè™‘ç¥ç»å…ƒçš„è¾“å‡ºè¿æ¥æ•°é‡ä¸ºmæ—¶ï¼Œå¯ä»¥æŒ‰ç…§$N(0,\\sqrt{\\frac{2}{m+n}})$è¿›è¡Œé«˜æ–¯åˆ†å¸ƒåˆå§‹åŒ–ã€‚\n\n#### å‡åŒ€åˆ†å¸ƒåˆå§‹åŒ–\n> å‡åŒ€åˆå§‹åŒ–æ˜¯æŒ‡åœ¨ä¸€ä¸ªç»™å®šçš„åŒºé—´[-r,r]å†…é‡‡ç”¨å‡åŒ€åˆ†å¸ƒæ¥åˆå§‹åŒ–å‚æ•°ï¼Œè¶…å‚æ•°rçš„è®¾ç½®ä¹Ÿå¯ä»¥æ ¹æ®ç¥ç»å…ƒçš„è¿æ¥æ•°é‡æ¥è¿›è¡Œè‡ªé€‚åº”è°ƒæ•´ã€‚\n\n**Xavieråˆå§‹åŒ–æ–¹æ³•**æ˜¯ä¸€ç§è‡ªåŠ¨è®¡ç®—è¶…å‚æ•°rçš„æ–¹æ³•ï¼Œå‚æ•°å¯ä»¥åœ¨[-r,r]ä¹‹é—´é‡‡ç”¨å‡åŒ€åˆ†å¸ƒè¿›è¡Œåˆå§‹åŒ–ã€‚\n\nå¦‚æœç¥ç»å…ƒæ¿€æ´»å‡½æ•°ä¸ºlogisticå‡½æ•°ï¼Œå¯¹äºç¬¬l-1å±‚åˆ°ç¬¬lå±‚çš„æƒé‡å‚æ•°åŒºé—´å¯ä»¥è®¾ç½®ä¸ºï¼š\n$$\nr = \\sqrt{ \\frac{6}{ n^{l-1} + n^l}}\n$$\n$n^l$ è¡¨ç¤ºç¬¬lå±‚ç¥ç»å…ƒçš„ä¸ªæ•°ï¼Œ$n^{l-1}$è¡¨ç¤ºl-1å±‚ç¥ç»å…ƒçš„ä¸ªæ•°ã€‚\n\nå¦‚æœæ˜¯tanhæ¿€æ´»å‡½æ•°ï¼Œæƒé‡å‚æ•°åŒºé—´å¯ä»¥è®¾ç½®ä¸ºï¼š\n$$\nr =4 \\sqrt{ \\frac{6}{ n^{l-1} + n^l}}\n$$\n> åœ¨å®é™…ç»éªŒä¸­ï¼ŒXavieråˆå§‹åŒ–æ–¹æ³•ç”¨çš„æ¯”è¾ƒå¤šã€‚\n\n### æ•°æ®é¢„å¤„ç†\n\n#### ä¸ºä»€ä¹ˆè¦è¿›è¡Œæ•°æ®é¢„å¤„ç†\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨åŸå§‹æ•°æ®ä¸­ï¼Œæ•°æ®çš„ç»´åº¦å¾€å¾€ä¸ä¸€è‡´ï¼Œæ¯”å¦‚åœ¨ç”µå•†æ•°æ®ä¸­ï¼ŒæŸä¸ªå•†å“ç‚¹å‡»çš„æ¬¡æ•°å¾€å¾€è¦è¿œå¤§äºè´­ä¹°çš„æ¬¡æ•°ï¼Œå³**ç‰¹å¾çš„åˆ†å¸ƒèŒƒå›´å·®è·å¾ˆå¤§**ï¼Œè¿™æ ·åœ¨ä¸€äº›ä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦è®¡ç®—çš„ç®—æ³•ä¸­ï¼Œè¾ƒå¤§çš„ç‰¹å¾å€¼å°±ä¼šèµ·åˆ°ç»å¯¹ä½œç”¨ï¼Œæ˜¾ç„¶è¿™æ ·åšæ˜¯æå…¶ä¸åˆç†çš„ã€‚åŒæ ·åœ¨æ·±åº¦ç¥ç»ç½‘ç»œä¸­ï¼Œè™½ç„¶å¯ä»¥é€šè¿‡å‚æ•°çš„è°ƒæ•´æ¥è‡ªé€‚åº”ä¸åŒèŒƒå›´çš„è¾“å…¥ï¼Œä½†æ˜¯è¿™æ ·è®­ç»ƒçš„æ•ˆç‡ä¹Ÿæ˜¯å¾ˆä½çš„ã€‚\n\nå‡è®¾ä¸€ä¸ªåªæœ‰ä¸€å±‚çš„ç½‘ç»œ $y=tanh(w_1x_1 + w_2 x_2 +b)$ï¼Œå…¶ä¸­$x_1 \\in [0,10], x_2 \\in [0,1]$ã€‚å› ä¸ºæ¿€æ´»å‡½æ•° tanhçš„å¯¼æ•°åœ¨[-2,2]ä¹‹é—´æ˜¯æ•æ„Ÿçš„ï¼Œå…¶ä½™çš„å€¼åŸŸå¯¼æ•°æ¥è¿‘0ï¼Œå› æ­¤$w_1x_1 + w_2 x_2 +b$è¿‡å¤§æˆ–è€…è¿‡å°éƒ½ä¼šå½±å“è®­ç»ƒï¼Œä¸ºäº†æé«˜è®­ç»ƒæ•ˆç‡ï¼Œæˆ‘ä»¬éœ€è¦æŠŠ$w_1x_1 + w_2 x_2 +b$é™å®šåœ¨[-2,2]ä¹‹é—´ï¼Œå› ä¸º$x_1,x_2$çš„å–å€¼èŒƒå›´ï¼Œéœ€è¦æŠŠ$w_1$è®¾ç½®çš„å°ä¸€äº›ï¼Œæ¯”å¦‚åœ¨[-0.1, 0.1]ä¹‹é—´ï¼Œå¯ä»¥æƒ³è±¡ï¼Œå¦‚æœæ•°æ®ç»´åº¦æ¯”è¾ƒå¤šçš„è¯ï¼Œæˆ‘ä»¬éœ€è¦ç²¾å¿ƒçš„å»è®¾ç½®æ¯ä¸€ä¸ªå‚æ•°ï¼Œ**ä½†æ˜¯å¦‚æœæŠŠç‰¹å¾é™å®šåœ¨ä¸€ä¸ªèŒƒå›´å†…ï¼Œæ¯”å¦‚[0,1]**ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å¤ªåŒºåˆ«å¯¹å¾…æ¯ä¸€ä¸ªå‚æ•°ã€‚\n\né™¤äº†å‚æ•°åˆå§‹åŒ–ä¹‹å¤–ï¼Œä¸åŒç‰¹å¾å–å€¼èŒƒå›´å·®å¼‚æ¯”è¾ƒå¤§æ—¶ä¹Ÿä¼šå½±å“æ¢¯åº¦ä¸‹é™æ³•çš„æœç´¢æ•ˆç‡ï¼Œä¸‹å›¾ï¼ˆå›¾1-1ï¼‰ç»™å‡ºäº†æ•°æ®å½’ä¸€åŒ–å¯¹æ¢¯åº¦çš„å½±å“ï¼Œå¯¹æ¯”ç­‰é«˜çº¿å›¾å¯ä»¥çœ‹å‡ºï¼Œå½’ä¸€åŒ–åï¼Œæ¢¯åº¦çš„ä½ç½®æ–¹å‘æ›´åŠ æ¥è¿‘äºæœ€ä¼˜æ¢¯åº¦çš„æ–¹å‘ã€‚\n\n![æ•°æ®å½’ä¸€åŒ–å¯¹æ¢¯åº¦çš„å½±å“](https://img-blog.csdnimg.cn/20190919111801183.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n\n#### æ•°æ®é¢„å¤„ç†çš„æ–¹æ³•\n\nå…³äºåŸå§‹æ•°æ®å½’ä¸€åŒ–çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œå¯ä»¥å‚è€ƒã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ä¸­ç¬¬å››ç« èŠ‚éƒ¨åˆ†å†…å®¹ï¼Œå†™çš„å¾ˆå…¨é¢ï¼Œè€Œä¸”æœ‰å¯¹åº”çš„ä»£ç å®ç°ã€‚è¯¥ä¹¦çš„è´­ä¹°é“¾æ¥ï¼š\n\n> [ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…-äº¬ä¸œé“¾æ¥](https://item.jd.com/12671716.html)\n\n### é€å±‚å½’ä¸€åŒ–\n\n#### æ·±å±‚ç¥ç»ç½‘ç»œä¸­ä¸ºä»€ä¹ˆè¦åšé€å±‚å½’ä¸€åŒ–\n\nåœ¨æ·±å±‚ç¥ç»ç½‘ç»œä¸­ï¼Œå½“å‰å±‚çš„è¾“å…¥æ˜¯ä¸Šä¸€å±‚çš„è¾“å‡ºï¼Œå› æ­¤ä¹‹å‰å±‚å‚æ•°çš„å˜åŒ–å¯¹åç»­å±‚çš„å½±å“æ¯”è¾ƒå¤§ï¼Œå°±åƒä¸€æ ‹é«˜æ¥¼ï¼Œä½å±‚å¾ˆå°çš„å˜åŒ–å°±ä¼šå½±å“åˆ°é«˜å±‚ã€‚\n\nä»æœºå™¨å­¦ä¹ çš„è§’åº¦å»çœ‹ï¼Œå¦‚æœæŸä¸ªç¥ç»ç½‘ç»œå±‚çš„è¾“å…¥å‚æ•°å‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£ä¹ˆå…¶å‚æ•°éœ€è¦é‡æ–°å­¦ä¹ ï¼Œè¿™ç§ç°è±¡å«åš**å†…éƒ¨åå˜é‡åç§»ï¼ˆInternal Covariate Shiftï¼‰**ã€‚\n\n> è¿™é‡Œè¡¥å……ä¸‹æœºå™¨å­¦ä¹ ä¸­çš„åå˜é‡åç§»ï¼ˆCovariate Shiftï¼‰ã€‚åå˜é‡æ˜¯ä¸€ä¸ªç»Ÿè®¡å­¦çš„æ¦‚å¿µï¼Œæ˜¯å½±å“é¢„æµ‹ç»“æœçš„ç»Ÿè®¡å˜é‡ã€‚åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œåå˜é‡å¯ä»¥çœ‹ä½œæ˜¯è¾“å…¥ï¼Œä¸€èˆ¬çš„æœºå™¨å­¦ä¹ éƒ½è¦æ±‚è¾“å…¥åœ¨è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸Šçš„åˆ†å¸ƒæ˜¯ç›¸ä¼¼çš„ï¼Œå¦‚æœä¸æ»¡è¶³è¿™ä¸ªå‡è®¾ï¼Œåœ¨è®­ç»ƒé›†ä¸Šå¾—åˆ°çš„æ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šè¡¨ç°å°±ä¼šæ¯”è¾ƒå·®ã€‚\n![åå˜é‡åç§»](https://img-blog.csdnimg.cn/20190919130030578.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n\n\n\nä¸ºäº†è§£å†³å†…éƒ¨åå˜é‡åç§»é—®é¢˜ï¼Œéœ€è¦å¯¹ç¥ç»ç½‘ç»œå±‚çš„æ¯ä¸€å±‚è¾“å…¥åšå½’ä¸€åŒ–ï¼Œä¸‹é¢ä»‹ç»å‡ ç§å¸¸è§çš„æ–¹æ³•ï¼š\n- æ‰¹é‡å½’ä¸€åŒ–\n- å±‚å½’ä¸€åŒ–\n- å…¶ä»–æ–¹æ³•\n\n#### æ‰¹é‡å½’ä¸€åŒ–\nä¸ºäº†å‡å°‘å†…éƒ¨åå˜é‡åç§»çš„å½±å“ï¼Œéœ€è¦å¯¹ç¥ç»ç½‘ç»œæ¯ä¸€å±‚çš„å‡€è¾“å…¥$z^l$è¿›è¡Œå½’ä¸€åŒ–ï¼Œç›¸å½“äºæ¯ä¸€å±‚éƒ½è¦åšä¸€æ¬¡æ•°æ®é¢„å¤„ç†ï¼Œä»è€ŒåŠ å¿«æ”¶æ•›é€Ÿåº¦ï¼Œä½†æ˜¯å› ä¸ºå¯¹æ¯ä¸€å±‚éƒ½è¿›è¡Œæ“ä½œï¼Œæ‰€ä»¥è¦æ±‚å½’ä¸€åŒ–çš„æ•ˆç‡è¦å¾ˆé«˜ï¼Œä¸€èˆ¬ä½¿ç”¨æ ‡å‡†å½’ä¸€åŒ–ï¼Œå°†å‡€è¾“å…¥$z^l$çš„æ¯ä¸€ç»´éƒ½å½’ä¸€åˆ°æ ‡å‡†æ­£æ€åˆ†å¸ƒï¼Œå…¶å…¬å¼å¦‚ä¸‹ï¼š\n$$\n\\hat{z}^l = \\frac{ z^l - E[z^l] }{ \\sqrt{var(z^l) + \\epsilon } }\n$$\n$E[z^l]ï¼Œvar(z^l)$è¡¨ç¤ºåœ¨å½“å‰å‚æ•°ä¸‹$z^l$çš„æ¯ä¸€ç»´åœ¨æ•´ä¸ªè®­ç»ƒé›†ä¸Šçš„æœŸæœ›å’Œæ–¹å·®ï¼Œå› ä¸ºæ·±åº¦ç¥ç»ç½‘ç»œé‡‡ç”¨çš„æ˜¯ä¸‹æ‰¹é‡çš„æ¢¯åº¦ä¸‹é™ä¼˜åŒ–æ–¹æ³•ï¼ŒåŸºäºå…¨éƒ¨æ ·æœ¬è®¡ç®—æœŸæœ›å’Œæ–¹å·®æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºé€šå¸¸é‡‡ç”¨å°æ‰¹é‡è¿›è¡Œä¼°è®¡ã€‚ç»™å®šä¸€ä¸ªåŒ…å«Kä¸ªæ ·æœ¬çš„é›†åˆï¼Œç¬¬$l$å±‚ç¥ç»å…ƒçš„å‡€è¾“å…¥$z^{(1,l)},....z^{(K,l)}$çš„å‡å€¼å’Œæ–¹å·®ä¸ºï¼š\n$$\n\\mu _\\beta = \\frac{1 }{ K } \\sum_{k=1}^{K } z^{(k,l)}\n\\\\\n\\sigma^2 _\\beta = \\frac{1 }{ K }\\sum_{ k=1}^{K} (z^{(k,l)} - \\mu _\\beta)^2\n$$\nå¯¹å‡€è¾“å…¥$z^l$çš„æ ‡å‡†å½’ä¸€åŒ–ä¼šä½¿å…¶å–å€¼é›†ä¸­åœ¨0é™„è¿‘ï¼Œè¿™æ ·å½“ä½¿ç”¨sigmoidæ¿€æ´»å‡½æ•°æ—¶ï¼Œè¿™ä¸ªå–å€¼ç©ºé—´åˆšå¥½æ¥è¿‘çº¿æ€§å˜æ¢çš„ç©ºé—´ï¼Œå‡å¼±äº†ç¥ç»ç½‘ç»œçš„éçº¿æ€§æ€§è´¨ã€‚å› æ­¤ä¸ºäº†ä¸ä½¿å½’ä¸€åŒ–å¯¹ç½‘ç»œäº§ç”Ÿå½±å“ï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œç¼©æ”¾å’Œå¹³ç§»å¤„ç†ï¼Œå…¬å¼å¦‚ä¸‹ï¼š\n$$\n\\hat{z}^l = \\frac{ z^l - \\mu _\\beta }{ \\sqrt{\\sigma^2 _\\beta+ \\epsilon } } \\odot \\gamma  + \\beta \n$$\nå…¶ä¸­$\\gamma  , \\beta$åˆ†åˆ«ä»£è¡¨ç¼©æ”¾å’Œå¹³ç§»çš„å‘é‡ã€‚\n\n> è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯æ¯æ¬¡å°æ‰¹é‡æ ·æœ¬çš„å‡å€¼å’Œæ–¹å·®æ˜¯å‡€è¾“å…¥$z^l$çš„å‡½æ•°ï¼Œè€Œä¸æ˜¯å¸¸é‡å› æ­¤åœ¨è®¡ç®—æ¢¯åº¦æ—¶è¦è€ƒè™‘åˆ°å‡å€¼å’Œæ–¹å·®äº§ç”Ÿçš„å½±å“ï¼Œå½“è®­ç»ƒå®Œæˆæ—¶ï¼Œç”¨æ•´ä¸ªæ•°æ®é›†ä¸Šçš„å‡å€¼å’Œæ–¹å·®æ¥ä»£æ›¿æ¯æ¬¡å°æ ·æœ¬è®¡ç®—å¾—åˆ°çš„å‡å€¼å’Œæ–¹å·®ã€‚åœ¨å®é™…å®è·µç»éªŒä¸­ï¼Œå°æ‰¹é‡æ ·æœ¬çš„å‡å€¼å’Œæ–¹å·®ä¹Ÿå¯ä»¥ä½¿ç”¨ç§»åŠ¨å¹³å‡æ¥è®¡ç®—ã€‚\n\n#### å±‚å½’ä¸€åŒ–\n\næ‰¹é‡å½’ä¸€åŒ–çš„æ“ä½œå¯¹è±¡æ˜¯å•ä¸€ç¥ç»å…ƒï¼Œå› æ­¤è¦æ±‚é€‰æ‹©æ ·æœ¬æ‰¹é‡çš„æ—¶å€™ï¼Œä¸èƒ½å¤ªå°ï¼Œå¦åˆ™éš¾ä»¥è®¡ç®—å•ä¸ªç¥ç»å…ƒçš„ç»Ÿè®¡ä¿¡æ¯ï¼Œå¦å¤–ä¸€ä¸ªç¥ç»å…ƒçš„è¾“å…¥æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œæ¯”å¦‚å¾ªç¯ç¥ç»ç½‘ç»œï¼Œé‚£ä¹ˆå°±æ— æ³•åº”ç”¨æ‰¹é‡å½’ä¸€åŒ–æ“ä½œã€‚\n\n**å±‚å½’ä¸€åŒ–ï¼ˆLayer Normalizationï¼‰** æ˜¯å’Œæ‰¹é‡å½’ä¸€åŒ–éå¸¸ç±»ä¼¼çš„æ–¹æ³•ï¼Œä½†å±‚å½’ä¸€åŒ–çš„æ“ä½œå¯¹è±¡æ˜¯æŸå±‚å…¨éƒ¨ç¥ç»å…ƒã€‚\n\nå¯¹äºæ·±å±‚ç¥ç»ç½‘ç»œï¼Œç¬¬$l$å±‚ç¥ç»å…ƒçš„å‡€è¾“å…¥ä¸º$z^l$ï¼Œå…¶å‡å€¼å’Œæ–¹å·®ä¸ºï¼š\n$$\nu^l = \\frac{1}{n^l} \\sum_{i=1}^{ n^l} z_i^l\n\\\\\n\\sigma ^2_l = \\frac{1}{n^l} \\sum_{i=1}^{ n^l} (z_i^l - u^l )\n$$\nå…¶ä¸­$n^l$ä¸ºç¬¬$l$å±‚ç¥ç»å…ƒçš„æ•°é‡ã€‚åˆ™å±‚å½’ä¸€åŒ–å®šä¹‰ä¸ºï¼š\n$$\n\\hat{z^l} = \\frac{z^l - u^l }{ \\sqrt {\\sigma^2 _l + \\epsilon } } \\odot \\gamma  + \\beta \n$$\nå…¶ä¸­$\\gamma ,\\beta$åˆ†åˆ«ä»£è¡¨ç¼©æ”¾å’Œå¹³ç§»çš„å‘é‡ï¼Œå’Œ$z^l$çš„ç»´åº¦ç›¸åŒã€‚\n\n**å¾ªç¯ç¥ç»ç½‘ç»œä¸­çš„å±‚å½’ä¸€åŒ–**ä¸ºï¼š\n$$\nz_t = U h_{t-1} + W x_t\n\\\\\nh_t = f(\\hat{z^l})\n$$\nå…¶ä¸­éšè—å±‚ä¸º$h_t$ï¼Œ$x_t$ä¸ºç¬¬$t$æ—¶åˆ»çš„å‡€è¾“å…¥ï¼Œ$U,W$ä¸ºå‚æ•°ã€‚\n> åœ¨æ ‡å‡†å¾ªç¯ç½‘ç»œä¸­ï¼Œå¾ªç¯ç¥ç»å±‚çš„è¾“å…¥ä¸€èˆ¬å°±éšç€æ—¶é—´æ…¢æ…¢å˜å¤§æˆ–è€…å˜å°ï¼Œä»è€Œå¼•èµ·æ¢¯åº¦çˆ†ç‚¸æˆ–è€…æ¢¯åº¦æ¶ˆå¤±ï¼Œè€Œå±‚å½’ä¸€åŒ–çš„ç¥ç»ç½‘ç»œå¯ä»¥æœ‰æ•ˆçš„ç¼“è§£è¿™ç§çŠ¶å†µã€‚\n\n#### å…¶ä»–æ–¹æ³•\né™¤äº†ä¸Šé¢ä»‹ç»çš„ä¸¤ç§å½’ä¸€åŒ–æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„ä¸€äº›å½’ä¸€åŒ–æ–¹æ³•ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è‡ªè¡Œæœç´¢æŸ¥çœ‹ã€‚\n- æƒé‡å½’ä¸€åŒ–(Weight Normalization)\n- å±€éƒ¨å“åº”å½’ä¸€åŒ–\n\n> è‡³æ­¤ï¼Œç¥ç»ç½‘ç»œä¸­çš„ä¼˜åŒ–æ–¹æ³•ç¬¬äºŒéƒ¨åˆ†ä»‹ç»å®Œæˆï¼Œä¸»è¦åŒ…å¥½äº†ä¸‰éƒ¨åˆ†å†…å®¹ï¼šå‚æ•°åˆå§‹åŒ–ï¼Œæ•°æ®é¢„å¤„ç†å’Œé€å±‚å½’ä¸€åŒ–ã€‚å†ä¸‹ä¸€ç¯‡å°†ä¼šé‡ç‚¹ä»‹ç»è¶…å‚æ•°ä¼˜åŒ–çš„æ–¹æ³•ä¸ä»…é€‚ç”¨äºæ·±åº¦ç¥ç»ç½‘ç»œï¼Œä¹Ÿé€‚ç”¨äºä¸€èˆ¬çš„æœºå™¨å­¦ä¹ ä»»åŠ¡ã€‚å¦‚æœä½ è§‰å¾—ä¸é”™ï¼Œåˆ†äº«ä¸€ä¸‹å§ï¼\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["ç¥ç»ç½‘ç»œ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–ï¼ˆä¸€ï¼‰ä¹‹å­¦ä¹ ç‡è¡°å‡å’ŒåŠ¨æ€æ¢¯åº¦æ–¹å‘","url":"/2019/09/22/æ·±åº¦å­¦ä¹ /ç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œåŒ–å’Œæ­£åˆ™åŒ–/ç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–ï¼ˆä¸€ï¼‰ä¹‹å­¦ä¹ ç‡è¡°å‡å’ŒåŠ¨æ€æ¢¯åº¦æ–¹å‘/","content":"\n### å¼•è¨€\n\nç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–é—®é¢˜ä»‹ç»ä¸»è¦åˆ†ä¸ºä¸€ï¼ŒäºŒï¼Œä¸‰ï¼Œå››ç¯‡è¿›è¡Œä»‹ç»ã€‚\n- ç¬¬ä¸€ç¯‡åŒ…æ‹¬\n    - ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–æ¦‚è¿°\n    - ä¼˜åŒ–ç®—æ³•ä»‹ç»\n- ç¬¬äºŒç¯‡åŒ…æ‹¬\n    - å‚æ•°åˆå§‹åŒ–\n    - æ•°æ®é¢„å¤„ç†\n    - é€å±‚å½’ä¸€åŒ–\n- ç¬¬ä¸‰ç¯‡åŒ…æ‹¬\n    - è¶…å‚æ•°ä¼˜åŒ–\n- ç¬¬å››ç¯‡åŒ…æ‹¬\n    - ç½‘ç»œæ­£åˆ™åŒ– \n\n---\n\n### æ¦‚è¿°\nè™½ç„¶ç¥ç»ç½‘ç»œæœ‰æ¯”è¾ƒå¼ºçš„è¡¨è¾¾èƒ½åŠ›ï¼Œä½†æ˜¯åº”ç”¨ç¥ç»ç½‘ç»œåˆ°æœºå™¨å­¦ä¹ ä»»åŠ¡æ—¶ä»å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œä¸»è¦åˆ†ä¸ºï¼š\n1.  ç½‘ç»œä¼˜åŒ–\n> ç¥ç»ç½‘ç»œæ¨¡å‹æ˜¯ä¸€ä¸ªéå‡¸å‡½æ•°ï¼Œå†åŠ ä¸Šç¥ç»ç½‘ç»œä¸­çš„æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸ï¼Œå¾ˆéš¾è¿›è¡Œä¼˜åŒ–ï¼Œå¦å¤–ç½‘ç»œçš„å‚æ•°æ¯”è¾ƒå¤šï¼Œä¸”æ•°æ®é‡æ¯”è¾ƒå¤§å¯¼è‡´è®­ç»ƒæ•ˆç‡æ¯”è¾ƒä½ã€‚\n2.  æ­£åˆ™åŒ–\n> ç¥ç»ç½‘ç»œæ‹Ÿåˆèƒ½åŠ›å¼ºï¼Œå®¹æ˜“åœ¨è®­ç»ƒé›†ä¸Šäº§ç”Ÿè¿‡æ‹Ÿåˆï¼Œéœ€è¦ä¸€äº›æ­£åˆ™åŒ–çš„æ–¹æ³•æ¥æé«˜ç½‘ç»œçš„æ³›åŒ–èƒ½åŠ›ã€‚\n\nä»å¤§é‡çš„å®è·µç»éªŒçœ‹ä¸»è¦æ˜¯ä»ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–ä¸¤ä¸ªæ–¹é¢æé«˜å­¦ä¹ æ•ˆç‡å¹¶å¾—åˆ°ä¸€ä¸ªå¥½çš„ç½‘ç»œæ¨¡å‹ã€‚\n\nåœ¨ä½ç»´ç©ºé—´çš„éå‡¸ä¼˜åŒ–é—®é¢˜ä¸­ä¸»è¦æ˜¯å­˜åœ¨ä¸€äº›å±€éƒ¨æœ€ä¼˜ç‚¹ï¼ŒåŸºäºæ¢¯åº¦ä¸‹é™ä¼˜åŒ–ç®—æ³•ä¼šé™·å…¥å±€éƒ¨æœ€ä¼˜ç‚¹ï¼Œå› æ­¤ä½ç»´ç©ºé—´çš„éå‡¸ä¼˜åŒ–çš„éš¾ç‚¹åœ¨äºå¦‚ä½•é€‰æ‹©åˆé€‚çš„å‚æ•°å’Œé€ƒç¦»å±€éƒ¨æœ€ä¼˜ç‚¹ã€‚\n\næ·±å±‚ç¥ç»ç½‘ç»œä¸­å‚æ•°è¾ƒå¤šï¼Œå…¶æ˜¯åœ¨é«˜ç»´ç©ºé—´çš„éå‡¸ä¼˜åŒ–é—®é¢˜ä¸­ï¼Œå’Œä½ç»´ç©ºé—´çš„éå‡¸ä¼˜åŒ–æœ‰äº›ä¸åŒï¼Œå…¶ä¸»è¦éš¾ç‚¹åœ¨äºå¦‚ä½•é€ƒç¦»éç‚¹ï¼ˆSaddle Pointï¼‰ï¼Œéç‚¹çš„æ¢¯åº¦ä¸º0ï¼Œä½†æ˜¯åœ¨ä¸€äº›ç»´åº¦ä¸Šæ˜¯æœ€é«˜ç‚¹ï¼Œåœ¨å¦ä¸€äº›ç»´åº¦ä¸Šæ˜¯æœ€ä½ç‚¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆå›¾1-1ï¼‰ï¼š\n![éç‚¹ç¤ºä¾‹](https://img-blog.csdnimg.cn/2019091814412421.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nåœ¨é«˜ç»´ç©ºé—´ä¸­ï¼Œå±€éƒ¨æœ€ä¼˜ç‚¹è¦æ±‚åœ¨æ¯ä¸€ç»´åº¦ä¸Šéƒ½æ˜¯æœ€ä½ç‚¹ï¼Œè¿™ç§æ¦‚ç‡å¾ˆä½ï¼Œå‡è®¾ç½‘ç»œæœ‰1000\nä¸ªå‚æ•°ï¼Œæ¯ä¸€ç»´ä¸Šå–å¾—å±€éƒ¨æœ€ä¼˜ç‚¹çš„æœ€å°æ¦‚ç‡ä¸ºpï¼Œåˆ™åœ¨æ•´ä¸ªå‚æ•°ç©ºé—´ä¸­å–å¾—å±€éƒ¨æœ€ä¼˜ç‚¹çš„æœ€å°æ¦‚ç‡ä¸º$p^{1000}$ï¼Œè¿™ç§æ¦‚ç‡å¾ˆå°ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æ•´ä¸ªå‚æ•°ç©ºé—´ä¸­ï¼Œå¤§éƒ¨åˆ†æ¢¯åº¦ä¸º0çš„ç‚¹éƒ½æ˜¯éç‚¹ã€‚\n\n\n---\n\n### ä¼˜åŒ–ç®—æ³•ä»‹ç»\n\næ·±å±‚ç¥ç»ç½‘ç»œçš„å‚æ•°å­¦ä¹ ä¸»è¦æ˜¯é€šè¿‡æ¢¯åº¦ä¸‹é™ç®—æ³•å¯»æ‰¾ä¸€ç»„æœ€å°ç»“æ„çš„é£é™©å‚æ•°ï¼Œæ¢¯åº¦ä¸‹é™åˆ†ä¸ºï¼š\n- æ‰¹é‡æ¢¯åº¦ä¸‹é™\n- éšæœºæ¢¯åº¦ä¸‹é™\n- å°æ‰¹é‡æ¢¯åº¦ä¸‹é™\n\næ ¹æ®ä¸åŒçš„æ•°æ®é‡å’Œå‚æ•°é‡ï¼Œå¯ä»¥é€‰æ‹©ä¸€ç§åˆé€‚çš„æ¢¯åº¦ä¸‹é™ä¼˜åŒ–ç®—æ³•ï¼Œé™¤äº†åœ¨æ”¶æ•›æ•ˆæœå’Œæ•ˆç‡ä¸Šçš„åŒºåˆ«ï¼Œè¿™ä¸‰ç§æ¢¯åº¦ä¸‹é™ä¼˜åŒ–ç®—æ³•è¿˜å­˜åœ¨ä¸€äº›å…±åŒé—®é¢˜ï¼ˆ**å…·ä½“ä¼šåœ¨ä¸‹ä¸€ç¯‡è¿›è¡Œè¯¦ç»†ä»‹ç»**ï¼‰ï¼š\n- å¦‚ä½•åˆå§‹åŒ–å‚æ•°\n- é¢„å¤„ç†æ•°æ®\n- å¦‚ä½•é€‰æ‹©åˆé€‚çš„å­¦ä¹ ç‡ï¼Œé¿å…é™·å…¥å±€éƒ¨æœ€ä¼˜\n\nåœ¨è®­ç»ƒæ·±å±‚ç¥ç»ç½‘ç»œæ—¶ï¼Œé€šå¸¸é‡‡ç”¨å°æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•ã€‚ä»¤$f(x,\\theta)$ä¸ºä¸€ä¸ªæ·±å±‚ç¥ç»ç½‘ç»œï¼Œ$\\theta$ä¸ºç½‘ç»œå‚æ•°ï¼Œä½¿ç”¨å°æ‰¹é‡æ¢¯åº¦ä¼˜åŒ–ç®—æ³•æ—¶ï¼Œæ¯æ¬¡é€‰æ‹©Kä¸ªè®­ç»ƒæ ·æœ¬$I_t =\\left \\{ (x^t,y^t)  \\right \\} , t \\in (1,T)$ï¼Œç¬¬tæ¬¡è¿­ä»£æ—¶æŸå¤±å‡½æ•°å…³äº$\\theta$çš„åå¯¼æ•°ä¸ºï¼ˆå…¬å¼1-1ï¼‰ï¼š\n$$\ng_t(\\theta ) = \\frac{ 1 }{ K } \\sum_{ (x^t,y^t) \\in I_t} \\frac{ \\partial L(y^t,f(x^t, \\theta)) }{ \\partial \\theta }\n$$\n\nç¬¬tæ¬¡æ›´æ–°çš„æ¢¯åº¦$g'_t$å®šä¹‰ä¸ºï¼ˆå…¬å¼1-2ï¼‰ï¼š\n$$\ng_t'(\\theta)= g_t(\\theta_{t-1})\n$$\nä½¿ç”¨æ¢¯åº¦ä¸‹é™æ¥æ›´æ–°å‚æ•°ï¼ˆå…¬å¼1-3ï¼‰ï¼š\n$$\n\\theta_t = \\theta_{t-1} - \\alpha g'(\\theta)\n$$\nä¸€èˆ¬æ‰¹é‡è¾ƒå°æ—¶ï¼Œéœ€è¦é€‰æ‹©è¾ƒå°çš„å­¦ä¹ ç‡ï¼Œå¦åˆ™æ¨¡å‹ä¸ä¼šæ”¶æ•›ã€‚ä¸‹å›¾ï¼ˆå›¾1-2ï¼‰ç»™å‡ºäº†åœ¨Mnistæ•°æ®é›†ä¸Šæ‰¹é‡å¤§å°å¯¹æ¢¯åº¦çš„å½±å“ã€‚ä»å›¾1-2(a)å¯ä»¥çœ‹å‡ºï¼Œæ‰¹é‡å¤§å°è®¾ç½®çš„è¶Šå¤§ï¼Œä¸‹é™çš„è¶Šæ˜æ˜¾ï¼Œå¹¶ä¸”ä¸‹é™çš„æ¯”è¾ƒå¹³æ»‘ï¼Œå½“é€‰æ‹©æ‰¹é‡çš„å¤§å°ä¸º1æ—¶ï¼Œæ•´ä½“æŸå¤±å‘ˆä¸‹é™è¶‹åŠ¿ï¼Œä½†æ˜¯å±€éƒ¨æ¯”è¾ƒéœ‡è¡ã€‚ä»å›¾1-2(b)å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœæŒ‰æ•´ä¸ªæ•°æ®é›†ä¸Šçš„è¿­ä»£æ¬¡æ•°ï¼ˆEpochï¼‰æ¥çœ‹æŸå¤±å˜åŒ–æƒ…å†µï¼Œåˆ™æ˜¯æ‰¹é‡æ ·æœ¬æ•°è¶Šå°ï¼Œä¸‹é™æ•ˆæœè¶Šæ˜æ˜¾ã€‚\n\n![æ‰¹é‡çš„å¤§å°å¯¹æ¢¯åº¦çš„å½±å“](https://img-blog.csdnimg.cn/20190918153354525.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nä¸ºäº†æ›´åŠ æœ‰æ•ˆçš„è®­ç»ƒæ·±å±‚ç¥ç»ç½‘ç»œï¼Œåœ¨æ ‡å‡†çš„å°æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•ä¸­ï¼Œç»å¸¸ä½¿ç”¨ä¸€äº›æ”¹è¿›æ–¹æ³•åŠ å¿«ä¼˜åŒ–é€Ÿåº¦ï¼Œå¸¸è§çš„æ”¹è¿›æ–¹æ³•æœ‰ä¸¤ç§ï¼š\n- å­¦ä¹ ç‡è¡°å‡\n- æ¢¯åº¦æ–¹å‘ä¼˜åŒ–\n\n> è¿™äº›æ”¹è¿›çš„ä¼˜åŒ–æ–¹æ³•ä¹ŸåŒæ ·å¯ä»¥åº”ç”¨åœ¨æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•å’Œéšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•ã€‚\n\n---\n### å­¦ä¹ ç‡è¡°å‡\n\nåœ¨æ¢¯åº¦ä¸‹é™ä¸­ï¼Œå­¦ä¹ ç‡çš„è®¾ç½®å¾ˆé‡è¦ï¼Œè®¾ç½®è¿‡å¤§ï¼Œåˆ™ä¸ä¼šæ”¶æ•›ï¼Œè®¾ç½®è¿‡å°ï¼Œåˆ™æ”¶æ•›å¤ªæ…¢ã€‚ä»ç»éªŒä¸Šçœ‹ï¼Œå­¦ä¹ ç‡åœ¨ä¸€å¼€å§‹è¦è®¾ç½®çš„å¤§äº›æ¥ä¿è¯æ”¶æ•›é€Ÿåº¦ï¼Œåœ¨æ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜ç‚¹é™„è¿‘æ—¶è¦å°äº›æ¥é¿å…éœ‡è¡ï¼Œå› æ­¤æ¯”è¾ƒç®€å•çš„å­¦ä¹ ç‡è°ƒæ•´å¯ä»¥é€šè¿‡å­¦ä¹ ç‡è¡°å‡ï¼ˆLearning Rate Decayï¼‰çš„æ–¹å¼æ¥å®ç°ã€‚å‡è®¾åˆå§‹å­¦ä¹ ç‡ä¸º$\\alpha_0$ï¼Œç¬¬tæ¬¡è¿­ä»£çš„å­¦ä¹ ç‡ä¸º$a_t$ï¼Œå¸¸ç”¨çš„è¡°å‡æ–¹å¼ä¸ºæŒ‰ç…§è¿­ä»£æ¬¡æ•°è¿›è¡Œè¡°å‡ï¼Œä¾‹å¦‚\n- é€†æ—¶è¡°å‡ï¼ˆå…¬å¼1-4ï¼‰\n\n$$\na_t = a_0 \\frac{1 }{ 1 + \\beta t}\n$$\n- æŒ‡æ•°è¡°å‡ï¼ˆå…¬å¼1-5ï¼‰\n\n$$\na_t = a_0\\beta^t\n$$\n\n- è‡ªç„¶æŒ‡æ•°è¡°å‡ï¼ˆå…¬å¼1-6ï¼‰\n\n$$\na_t = a_0 exp(-\\beta * t)\n$$\nå…¶ä¸­$\\beta$ä¸ºè¡°å‡ç‡ï¼Œä¸€èˆ¬ä¸º0.96\n\n#### AdaGrad\nAdaGradï¼ˆAdaptive Gradientï¼‰ç®—æ³•æ˜¯å€Ÿé‰´L2æ­£åˆ™åŒ–çš„æ€æƒ³ï¼Œæ¯æ¬¡è¿­ä»£æ—¶è‡ªé€‚åº”çš„è°ƒæ•´æ¯ä¸ªå‚æ•°çš„å­¦ä¹ ç‡ã€‚AdaGradçš„å‚æ•°æ›´æ–°å…¬å¼ä¸ºï¼ˆå…¬å¼1-7ï¼‰ï¼š\n$$\nG_t = \\sum_{t=1}^{T} g_t \\odot g_t\n\\\\\n\\bigtriangleup \\theta_t = - \\frac{\\alpha }{ \\sqrt{G_t + \\epsilon  } } \\odot g_t\n\\\\\ng'_t(\\theta) = g_t(\\theta_{t-1}) + \\bigtriangleup \\theta_t\n$$\nå…¶ä¸­$\\alpha$ä¸ºå­¦ä¹ ç‡ï¼Œ$\\epsilon$æ˜¯ä¸ºäº†ä¿è¯æ•°æ®ç¨³å®šæ€§è€Œè®¾ç½®çš„éå¸¸å°çš„å¸¸æ•°ï¼Œä¸€èˆ¬å–å€¼æ˜¯ $e^{-7}$åˆ°$e^{-10}$ï¼Œè¿™é‡Œçš„å¼€å¹³æ–¹ï¼ŒåŠ ï¼Œé™¤è¿ç®—éƒ½æ˜¯æŒ‰ç…§å…ƒç´ è¿›è¡Œçš„æ“ä½œã€‚\n\nåœ¨AdaGradç®—æ³•ä¸­ï¼Œå¦‚æœæŸä¸ªå‚æ•°çš„åå¯¼æ•°ç´¯ç§¯æ¯”è¾ƒå¤§ï¼Œå…¶å­¦ä¹ ç‡ç›¸å¯¹è¾ƒå°ï¼Œç›¸åï¼Œå¦‚æœå…¶åå¯¼æ•°ç´¯ç§¯æ¯”è¾ƒå¤§ï¼Œå…¶å­¦ä¹ ç‡ç›¸å¯¹è¾ƒå¤§ã€‚ä½†æ˜¯æ•´ä½“ä¸Šéšç€è¿­ä»£æ¬¡æ•°çš„å¢åŠ ï¼Œå­¦ä¹ ç‡é€æ¸å‡å°ã€‚\n\nAdaGradç®—æ³•çš„ç¼ºç‚¹æ˜¯åœ¨ç»è¿‡ä¸€å®šæ¬¡æ•°çš„è¿­ä»£åä¾ç„¶æ²¡æœ‰æ‰¾åˆ°æœ€ä¼˜ç‚¹ï¼Œç”±äºè¿™æ—¶å€™çš„å­¦ä¹ ç‡å·²ç»å¾ˆå°äº†ï¼Œå°±å¾ˆéš¾æ‰¾åˆ°æœ€ä¼˜ç‚¹ã€‚\n\n\n#### RMSProp\n\n\nRMSPropæ˜¯Geoff Hintonæå‡ºçš„ä¸€ç§è‡ªé€‚åº”å­¦ä¹ ç‡çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨æœ‰äº›æƒ…å†µä¸‹é¿å…AdaGradçš„å­¦ä¹ ç‡å•è°ƒé€’å‡ä»¥è‡³äºè¿‡æ—©è¡°å‡çš„ç¼ºç‚¹ã€‚\n\nRMSPropç®—æ³•é¦–å…ˆè®¡ç®—çš„æ˜¯æ¯æ¬¡è¿­ä»£é€Ÿåº¦$g_t$å¹³æ–¹çš„æŒ‡æ•°è¡°å‡ç§»åŠ¨å¹³å‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼ˆå…¬å¼1-8ï¼‰ï¼š\n$$\nG_t = \\beta G_{t-1}  + (1-\\beta) g_t \\odot g_t = (1- \\beta) \\sum_{t=1}^{T} \\beta ^{T-t} g_t \\odot g_t\n$$\nå…¶ä¸­$\\beta$ä¸ºè¡°å‡ç‡ï¼Œä¸€èˆ¬å–å€¼ä¸º0.9ï¼ŒRMSPropç®—æ³•å‚æ•°æ›´æ–°å…¬å¼ä¸ºï¼ˆå…¬å¼1-9ï¼‰ï¼š\n$$\n\\bigtriangleup \\theta_t = - \\frac{\\alpha }{ \\sqrt{G_t + \\epsilon  } } \\odot g_t\n\\\\\ng'_t(\\theta) = g_t(\\theta_{t-1}) + \\bigtriangleup \\theta_t\n$$\nå…¶ä¸­$\\alpha$ä¸ºå­¦ä¹ ç‡ï¼Œé€šå¸¸ä¸º0.001ã€‚\n\n> ä»å…¬å¼1-8 å¯ä»¥çœ‹å‡ºï¼ŒRMSPropå’ŒAdaGradçš„åŒºåˆ«åœ¨äº$G_t$çš„è®¡ç®—ç”±ç´¯ç§¯æ–¹å¼å˜æˆäº†æŒ‡æ•°è¡°å‡ç§»åŠ¨å¹³å‡ï¼Œåœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªå‚æ•°çš„å­¦ä¹ ç‡å¹¶ä¸æ˜¯å‘ˆè¡°å‡è¶‹åŠ¿ï¼Œå³å¯ä»¥å˜å¤§ï¼Œä¹Ÿå¯ä»¥å˜å°ã€‚\n\n\n#### AdaDelta\nAdaDeltaç®—æ³•ä¹Ÿæ˜¯AdaGradç®—æ³•çš„ä¸€ä¸ªæ”¹è¿›ï¼Œå’ŒRMSPropç®—æ³•ç±»ä¼¼ï¼ŒAdaDeltaç®—æ³•é€šè¿‡æ¢¯åº¦å¹³æ–¹çš„æŒ‡æ•°è¡°å‡ç§»åŠ¨å¹³å‡æ¥è°ƒæ•´å­¦ä¹ ç‡ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒAdaDeltaç®—æ³•è¿˜å¼•å…¥äº†æ¯æ¬¡å‚æ•°æ›´æ–°å·®$\\bigtriangleup \\theta$çš„å¹³æ–¹çš„æŒ‡æ•°è¡°å‡ç§»åŠ¨å¹³å‡ã€‚\n\nç¬¬tæ¬¡è¿­ä»£æ—¶ï¼Œæ¯æ¬¡å‚æ•°æ›´æ–°å·®$\\bigtriangleup \\theta_t , 1<t<T-1$çš„æŒ‡æ•°è¡°å‡ç§»åŠ¨å¹³å‡ä¸ºï¼ˆå…¬å¼1-10ï¼‰ï¼š\n$$\n\\bigtriangleup X^2_{t-1} =\\beta _1 \\bigtriangleup X^2_{t-2} + (1 - \\beta) \\bigtriangleup \\theta_{t-1} \\odot \\bigtriangleup \\theta_{t-1}\n$$\nå…¶ä¸­$\\beta_1$ä¸ºè¡°å‡ç‡ï¼ŒAdaDeltaç®—æ³•çš„å‚æ•°æ›´æ–°å·®å€¼ä¸ºï¼ˆå…¬å¼1-11ï¼‰ï¼š\n$$\n\\bigtriangleup \\theta_t = - \\frac{\\sqrt {\\bigtriangleup X^2_{t-1} + \\epsilon }}{ \\sqrt {G_t + \\epsilon}} g_t\n$$\n\n> å…¶ä¸­$G_t$çš„è®¡ç®—æ–¹å¼å’ŒRMSPropç®—æ³•ä¸€æ ·ã€‚ä»å…¬å¼1-11å¯ä»¥çœ‹å‡ºï¼ŒAdaDeltaç®—æ³•å°†RMSPropç®—æ³•ä¸­çš„åˆå§‹å­¦ä¹ ç‡$\\alpha$æ”¹ä¸ºåŠ¨æ€è®¡ç®—çš„$\\sqrt {\\bigtriangleup X^2_{t-1} + \\epsilon }$ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡ç¼“äº†å­¦ä¹ æ—…ç‡çš„æ³¢åŠ¨ã€‚\n\n\n---\n### æ¢¯åº¦æ–¹å‘ä¼˜åŒ–\né™¤äº†è°ƒæ•´å­¦ä¹ ç‡å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æœ€è¿‘ä¸€æ®µæ—¶é—´å†…çš„å¹³å‡æ¢¯åº¦æ¥ä»£æ›¿å½“å‰æ—¶åˆ»çš„æ¢¯åº¦æ¥ä½œä¸ºå‚æ•°çš„æ›´æ–°æ–¹å‘ï¼Œä»å›¾1-2ä¸­å¯ä»¥çœ‹å‡ºï¼Œåœ¨å°æ‰¹é‡æ¢¯åº¦ä¸‹é™ä¸­ï¼Œå¦‚æœæ¯æ¬¡é€‰å–æ ·æœ¬æ•°é‡æ¯”è¾ƒå°ï¼ŒæŸå¤±å°±ä¼šå‘ˆç°éœ‡è¡çš„æ–¹å¼ä¸‹é™ï¼Œæœ‰æ•ˆçš„ç¼“è§£æ¢¯åº¦ä¸‹é™ä¸­çš„éœ‡è¡çš„æ–¹å¼æ˜¯é€šè¿‡ç”¨æ¢¯åº¦çš„ç§»åŠ¨å¹³å‡æ¥ä»£æ›¿æ¯æ¬¡çš„å®é™…æ¢¯åº¦ã€‚å¹¶æé«˜ä¼˜åŒ–é€Ÿåº¦ï¼Œè¿™å°±æ˜¯**åŠ¨é‡æ³•**ã€‚\n\n#### åŠ¨é‡æ³•\nåŠ¨é‡æ³•ï¼ˆMomentum Methodï¼‰æ˜¯ç”¨ä¹‹å‰ç§¯ç´¯çš„åŠ¨é‡æ¥æ›¿ä»£çœŸæ­£çš„æ¢¯åº¦ï¼Œæ¯æ¬¡æ›¿ä»£çš„æ¢¯åº¦å¯ä»¥çœ‹ä½œæ˜¯åŠ é€Ÿåº¦ã€‚\n\nåœ¨ç¬¬tæ¬¡è¿­ä»£æ—¶ï¼Œè®¡ç®—è´Ÿæ¢¯åº¦çš„â€œåŠ æƒç§»åŠ¨å¹³å‡â€ä½œä¸ºå‚æ•°çš„æ›´æ–°æ–¹å‘ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼ˆå…¬å¼1-12ï¼‰ï¼š\n$$\n\\bigtriangleup \\theta_t = \\rho \\bigtriangleup \\theta_{t-1}-\\alpha g_t\n$$\nå…¶ä¸­$\\rho$ä¸ºåŠ¨é‡å› å­ï¼Œé€šå¸¸è®¾ç½®ä¸º0.9ï¼Œ$\\alpha$ä¸ºå­¦ä¹ ç‡ã€‚\n\n> å‚æ•°çš„å®é™…æ›´æ–°å€¼å–å†³äºæœ€è¿‘ä¸€æ®µæ—¶é—´å†…æ¢¯åº¦çš„åŠ æƒå¹³å‡å€¼ã€‚å½“æŸä¸ªå‚æ•°åœ¨æœ€è¿‘ä¸€æ®µæ—¶é—´å†…æ¢¯åº¦æ–¹å‘ä¸ä¸€è‡´æ—¶ï¼Œå‚æ•°æ›´æ–°çš„å¹…åº¦å˜å°ï¼Œç›¸åï¼Œå‚æ•°æ›´æ–°çš„å¹…åº¦å˜å¤§ï¼Œèµ·åˆ°åŠ é€Ÿçš„ä½œç”¨ã€‚\n\n> ä¸€èˆ¬è€Œè¨€ï¼Œåœ¨è¿­ä»£åˆæœŸï¼Œæ¢¯åº¦çš„æ›´æ–°æ–¹å‘æ¯”è¾ƒä¸€è‡´ï¼ŒåŠ¨é‡æ³•ä¼šèµ·åˆ°åŠ é€Ÿä½œç”¨ï¼Œå¯ä»¥æ›´å¿«çš„èµ·åˆ°åŠ é€Ÿçš„ä½œç”¨ï¼Œå¯ä»¥æ›´å¿«çš„åˆ°è¾¾æœ€ä¼˜ç‚¹ï¼Œåœ¨è¿­ä»£åæœŸï¼Œæ¢¯åº¦çš„æ›´æ–°æ–¹å‘ä¸ä¸€è‡´ï¼Œåœ¨æ”¶æ•›æ—¶æ¯”è¾ƒåŠ¨è¡ï¼ŒåŠ¨é‡æ³•ä¼šèµ·åˆ°å‡é€Ÿä½œç”¨ï¼Œå¢åŠ ç¨³å®šæ€§ã€‚ä»æŸç§ç¨‹åº¦æ¥è®²ï¼Œå½“å‰æ¢¯åº¦å åŠ ä¸Šéƒ¨åˆ†çš„ä¸Šæ¬¡æ¢¯åº¦ï¼Œä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥çœ‹ä½œäºŒæ¬¡æ¢¯åº¦ã€‚\n\n\n#### NesterovåŠ é€Ÿæ¢¯åº¦\n\nNesterovåŠ é€Ÿæ¢¯åº¦ï¼ˆNesterov Accelerated Gradientï¼Œ NAGï¼‰ä¹Ÿå«NesterovåŠ¨é‡æ³•ï¼ˆNesterov Momentumï¼‰ï¼Œæ˜¯ä¸€ç§å¯¹åŠ¨é‡æ³•çš„æ”¹è¿›ã€‚\n\nåœ¨åŠ¨é‡æ³•ä¸­ï¼Œå®é™…çš„å‚æ•°æ›´æ–°æ–¹å‘$\\bigtriangleup \\theta_t$ä¸ºä¸Šä¸€æ­¥çš„å‚æ•°æ›´æ–°æ–¹å‘$\\bigtriangleup \\theta_{t-1}$å’Œå½“å‰çš„æ¢¯åº¦ $-g_t$çš„å åŠ ï¼Œè¿™æ ·ï¼Œ$\\bigtriangleup \\theta_t$å¯ä»¥æ‹†åˆ†ä¸ºä¸¤æ­¥è¿›è¡Œï¼Œå…ˆæ ¹æ®$\\bigtriangleup \\theta_{t-1}$æ›´æ–°ä¸€æ¬¡å¾—åˆ°å‚æ•°$\\tilde{\\theta }$ï¼Œå†ç”¨$g_t$è¿›è¡Œæ›´æ–°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼ˆå…¬å¼1-13ï¼‰ï¼š\n$$\n\\tilde{\\theta } = \\theta_{t-1} + \\rho \\bigtriangleup \\theta_{t-1} \n\\\\\n\\theta_t = \\tilde{\\theta } - \\alpha g_t\n$$\n\nå…¶ä¸­$g_t$ä¸ºç‚¹$\\theta_{t-1}$ä¸Šçš„æ¢¯åº¦ï¼Œæ‰€ä»¥ç¬¬äºŒæ­¥ä¸å¤ªåˆç†ï¼Œæ›´åˆç†çš„æ›´æ–°æ–¹å‘ä¸º$\\tilde{\\theta }$ä¸Šçš„æ¢¯åº¦ï¼Œè¿™æ ·åˆå¹¶åçš„æ›´æ–°æ–¹å‘ä¸ºï¼ˆå…¬å¼1-14ï¼‰ï¼š\n$$\n \\bigtriangleup \\theta_t =  \\rho \\bigtriangleup \\theta_{t-1} -\\alpha g_t(\\theta_{t-1} + \\rho \\bigtriangleup \\theta_{t-1} )\n$$\nå…¶ä¸­$g_t(\\theta_{t-1} + \\rho \\bigtriangleup \\theta_{t-1} )$è¡¨ç¤ºæŸå¤±å‡½æ•°åœ¨$\\tilde{\\theta } = \\theta_{t-1} + \\rho \\bigtriangleup \\theta_{t-1}$ä¸Šçš„åå¯¼æ•°ã€‚\n\nä¸‹å›¾ï¼ˆå›¾1-3ï¼‰ç»™å‡ºäº†åŠ¨é‡æ³•å’Œ Nesterov åŠ é€Ÿæ¢¯åº¦åœ¨å‚æ•°æ›´æ–°æ—¶çš„æ¯”è¾ƒï¼š\n\n![åŠ¨é‡æ³•å’Œ Nesterov åŠ é€Ÿæ¢¯åº¦åœ¨å‚æ•°æ›´æ–°æ—¶çš„æ¯”è¾ƒ](https://img-blog.csdnimg.cn/20190918192321930.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n#### AdaMç®—æ³•\nè‡ªé€‚åº”åŠ¨é‡ä¼°è®¡ç®—æ³•ï¼ˆAdaptive Moment Estimationï¼ŒAdamï¼‰å¯ä»¥çœ‹ä½œæ˜¯åŠ¨é‡æ³•å’ŒRMSpropçš„ç»“åˆï¼Œä¸ä½†ä½¿ç”¨åŠ¨é‡ä½œä¸ºå‚æ•°æ›´æ–°ï¼Œè€Œä¸”å¯ä»¥è‡ªé€‚åº”è°ƒæ•´å­¦ä¹ ç‡ï¼ˆå…¬å¼1-15ï¼‰ã€‚\n$$\nM_t = \\beta _1M_{t-1} + (1-\\beta _1)g_t\n\\\\ \nG_t = \\beta _2 G_{t-1} + (1-\\beta _2)g_t \\odot g_t\n$$\nå…¶ä¸­$\\beta_1 ï¼Œ\\beta_2$åˆ†åˆ«ä¸ºä¸¤ä¸ªç§»åŠ¨å¹³å‡çš„è¡°å‡ç‡ï¼Œé€šå¸¸å–å€¼ï¼š$\\beta_1=0.9,\\beta_2=0.99$ã€‚\n\n$M_t$å¯ä»¥çœ‹ä½œæ˜¯æ¢¯åº¦çš„å‡å€¼ï¼ˆä¸€é˜¶çŸ©ï¼‰ï¼Œ$G_t$å¯ä»¥çœ‹ä½œæ˜¯æ¢¯åº¦çš„æœªå‡å»å‡å€¼çš„æ–¹å·®ï¼ˆäºŒé˜¶çŸ©ï¼‰ã€‚\n\nå‡è®¾$M_t =0,G_t=0$ï¼Œé‚£ä¹ˆåœ¨è¿­ä»£åˆæœŸï¼Œ$M_tï¼ŒG_t$çš„å€¼ä¼šæ¯”çœŸå®çš„å‡å€¼å’Œæ–¹å·®è¦å°ï¼Œç‰¹åˆ«æ˜¯å½“$\\beta_1 ï¼Œ\\beta_2$éƒ½æ¥è¿‘1æ—¶ï¼Œåå·®ä¼šå¾ˆå¤§ï¼Œå› æ­¤éœ€è¦å¯¹åå·®è¿›è¡Œä¿®æ­£ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼ˆå…¬å¼1-16ï¼‰ï¼š\n$$\n\\tilde{M_t} = \\frac{M_t}{ 1 - \\beta^t _1}\n\\\\\n\\tilde{G_t} = \\frac{G_t}{ 1 - \\beta^t _2}\n$$\nAdamç®—æ³•çš„æ›´æ–°å·®å€¼ä¸ºï¼ˆå…¬å¼1-17ï¼‰ï¼š\n$$\n\\bigtriangleup \\theta_t = - \\frac{\\alpha }{\\sqrt{ \\tilde{G_t} + \\varepsilon  }} \\tilde{M_t}\n$$\nå…¶ä¸­å­¦ä¹ ç‡$\\alpha$é€šå¸¸è®¾ç½®ä¸º0.001ï¼Œå¹¶ä¸”ä¹Ÿå¯ä»¥è¿›è¡Œè¡°å‡ï¼Œæ¯”å¦‚$a_t = \\frac{a_0} { \\sqrt{t}}$ã€‚\n\n> Adamç®—æ³•æ˜¯RMSpropä¸åŠ¨é‡æ³•çš„ç»“åˆï¼Œå› æ­¤ä¸€ç§è‡ªç„¶çš„Adamæ”¹è¿›æ–¹æ³•æ˜¯å¼•å…¥NesterovåŠ é€Ÿæ¢¯åº¦ï¼Œç§°ä¸ºNadamç®—æ³•ã€‚\n\n\n#### æ¢¯åº¦æˆªæ–­\n\nåœ¨æ·±å±‚ç¥ç»ç½‘ç»œæˆ–è€…å¾ªç¯ç½‘ç»œä¸­ï¼Œé™¤äº†æ¢¯åº¦æ¶ˆå¤±ä¹‹å¤–ï¼Œæ¢¯åº¦çˆ†ç‚¸æ˜¯å½±å“å­¦ä¹ æ•ˆç‡çš„ä¸»è¦éšç§ï¼Œåœ¨åŸºäºæ¢¯åº¦ä¸‹é™çš„ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ¢¯åº¦çªç„¶å¢å¤§ï¼Œç”¨è¾ƒå¤§çš„æ¢¯åº¦æ›´æ–°å‚æ•°ï¼Œåè€Œä¼šä½¿ç»“æœè¿œç¦»æœ€ä¼˜ç‚¹ï¼Œä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå½“æ¢¯åº¦è¾¾åˆ°ä¸€å®šå€¼çš„æ—¶å€™ï¼Œè¦è¿›è¡Œæ¢¯åº¦æˆªæ–­ï¼ˆgradient clippingï¼‰ã€‚\n\næ¢¯åº¦æˆªæ–­æ˜¯ä¸€ç§æ¯”è¾ƒç®€å•çš„å¯å‘å¼æ–¹æ³•ï¼ŒæŠŠæ¢¯åº¦çš„æ¨¡é™å®šåœ¨ä¸€ä¸ªèŒƒå›´å†…ï¼Œå½“æ¢¯åº¦çš„æ¨¡å¤§äºæˆ–è€…å°äºæŸä¸ªåŒºé—´æ—¶ï¼Œå°±è¿›è¡Œæˆªæ–­ï¼Œä¸€èˆ¬æˆªæ–­çš„æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š\n- æŒ‰å€¼æˆªæ–­\n\nåœ¨ç¬¬tæ¬¡è¿­ä»£æ—¶ï¼Œæ¢¯åº¦ä¸º$g_t$ï¼Œç»™çš„ä¸€ä¸ªåŒºé—´[a,b]ï¼Œå¦‚æœæ¢¯åº¦å°äºaæ—¶ï¼Œä»¤å…¶ä¸ºaï¼Œå¤§äºbæ—¶ï¼Œä»¤å…¶ä¸ºbã€‚\n\n- æŒ‰æ¨¡æˆªæ–­\nå°†æ¢¯åº¦çš„æ¨¡æˆªæ–­åˆ°ä¸€ä¸ªç»™å®šçš„æˆªæ–­é˜ˆå€¼bã€‚å¦‚æœ$||g_t||^2 \\leq b$ä¿æŒæ¢¯åº¦ä¸å˜ï¼Œå¦‚æœ$||g_t||^2 > b$ï¼Œåˆ™$g_t= \\frac{ b}{||g_t||} g_t$ã€‚\n\næˆªæ–­é˜ˆå€¼ b æ˜¯ä¸€ä¸ªè¶…å‚æ•°,ä¹Ÿå¯ä»¥æ ¹æ®ä¸€æ®µæ—¶é—´å†…çš„å¹³å‡æ¢¯åº¦æ¥è‡ªåŠ¨è°ƒæ•´ã€‚å®éªŒä¸­å‘ç°,è®­ç»ƒè¿‡ç¨‹å¯¹é˜ˆå€¼ b å¹¶ä¸ååˆ†æ•æ„Ÿ,é€šå¸¸ä¸€ä¸ªå°çš„é˜ˆå€¼å°±å¯ä»¥å¾—åˆ°å¾ˆå¥½çš„ç»“æœã€‚\n\n> åœ¨è®­ç»ƒå¾ªç¯ç¥ç»ç½‘ç»œæ—¶ï¼ŒæŒ‰æ¨¡æˆªæ–­æ˜¯é¿å…æ¢¯åº¦çˆ†ç‚¸çš„æœ‰æ•ˆæ–¹æ³•ã€‚\n\n----\n\n### ä¼˜åŒ–ç®—æ³•æ€»ç»“\n\næœ¬æ–‡ä»‹ç»äº†ç¥ç»ç½‘ç»œä¸­çš„ç½‘ç»œä¼˜åŒ–å’Œæ­£åˆ™åŒ–æ¦‚è¿°ï¼Œä»¥åŠç½‘ç»œä¼˜åŒ–ä¸­çš„åŠ å¿«ç½‘ç»œä¼˜åŒ–çš„ä¸¤ç§æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å¤§ä½“åˆ†ä¸ºä¸¤ç±»ï¼š\n- è°ƒæ•´å­¦ä¹ ç‡ï¼Œä½¿å¾—ä¼˜åŒ–æ›´ç¨³å®š\n> æ¯”å¦‚ï¼šAdaGradï¼ŒRMSpropï¼ŒAdaDelta\n- è°ƒæ•´æ¢¯åº¦æ–¹å‘ï¼Œä¼˜åŒ–è®­ç»ƒé€Ÿåº¦\n> æ¯”å¦‚ï¼šåŠ¨é‡æ³•ï¼ŒNesterovåŠ é€Ÿæ¢¯åº¦ï¼Œæ¢¯åº¦æˆªæ–­\n\nAdamåˆ™æ˜¯RMSprop å’Œ åŠ¨é‡æ³•çš„ç»“åˆã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["ç¥ç»ç½‘ç»œ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€è®ºæ–‡ã€‘RecSys18-åºåˆ—æ¨èæ¨¡å‹TransFM(Translation-based Factorization Machines for Sequential Recommendation)","url":"/2019/08/31/è®ºæ–‡/ã€è®ºæ–‡ã€‘RecSys18-åºåˆ—æ¨èæ¨¡å‹TransFM(Translation-based Factorization Machines for Sequential Recommendation)/","content":"\nåºåˆ—æ¨èæ¨¡å‹ Translation-based Recommendationï¼Œå‚è€ƒï¼š[ç‚¹å‡»é˜…è¯»](https://thinkgamer.blog.csdn.net/article/details/100129827)\n\n<!--More-->\n\n# æ¦‚è¿°\nè®ºæ–‡æ˜¯ç”±Rajiv Pasrichaå’ŒJulian McAuleyä¸¤ä½å¤§ä½¬æå‡ºçš„å‘è¡¨åœ¨RecSys18 ä¸Šçš„ï¼Œæ˜¯TransRecå’ŒFMçš„ç»“åˆç‰ˆæœ¬ï¼ˆè®ºæ–‡ä¸‹è½½åœ°å€ï¼šhttps://cseweb.ucsd.edu/~jmcauley/pdfs/recsys18a.pdfï¼‰ã€‚åœ¨ä¸‹é¢ä¼šç®€å•ä»‹ç»TransRecå’ŒFMã€‚\n\n\n\nå¯¹äºç”µå•†ç½‘ç«™ï¼ˆå¦‚äºšé©¬é€Šï¼‰ï¼Œåª’ä½“ç½‘ç«™ï¼ˆå¦‚Netflixï¼ŒYoutubeï¼‰ç­‰è€Œè¨€ï¼Œæ¨èç³»ç»Ÿæ˜¯å…¶ä¸­è‡³å…³é‡è¦çš„ä¸€ç¯ã€‚ä¼ ç»Ÿçš„æ¨èæ–¹æ³•å°è¯•å¯¹ç”¨æˆ·å’Œç‰©å“çš„å…¨å±€äº¤äº’è¿›è¡Œå»ºæ¨¡ã€‚ä¾‹å¦‚çŸ©é˜µåˆ†è§£å’Œå…¶æ´¾ç”Ÿæ¨¡å‹ï¼Œè™½ç„¶èƒ½å¤Ÿæœ‰æ•ˆçš„æ•è·åˆ°ç”¨æˆ·çš„åå¥½ï¼Œä½†æ˜¯æœªè€ƒè™‘åˆ°æ—¶åºç‰¹å¾ï¼Œå…¶å¿½ç•¥äº†ç”¨æˆ·çš„æœ€è¿‘äº¤äº’è¡Œä¸ºï¼Œæä¾›äº†ä¸€ä¸ªé™æ€çš„æ¨èåˆ—è¡¨ã€‚\n\nåºåˆ—æ¨èçš„ç›®çš„æ˜¯åŸºäºç”¨æˆ·çš„å†å²è¡Œä¸ºåºåˆ—å»é¢„æµ‹ç”¨æˆ·å°†æ¥çš„è¡Œä¸ºã€‚Julian McAuleyä½œä¸ºä¸»è¦ä½œè€…çš„å¦ä¸€ç¯‡è®ºæ–‡ï¼ˆTranslation-based Recommendationï¼‰æå‡ºäº†â€œç¿»è¯‘â€ç©ºé—´çš„æ¦‚å¿µï¼Œå°†ç‰©å“ä½œä¸ºä¸€ä¸ªç‚¹åµŒå…¥åˆ°â€œç¿»è¯‘â€ç©ºé—´å†…ï¼Œç”¨æˆ·çš„åºåˆ—è¡Œä¸ºåˆ™ä½œä¸ºä¸€ä¸ªç¿»è¯‘å‘é‡å­˜åœ¨äºè¯¥ç©ºé—´ï¼Œç„¶åé€šè¿‡è·ç¦»è®¡ç®—ä¾¿æ ¹æ®ç”¨æˆ·uçš„å½“å‰è¡Œä¸ºç‰©å“iï¼Œé¢„æµ‹å…¶æ¥ä¸‹æ¥å¯èƒ½æœ‰è¡Œä¸ºçš„ç‰©å“ï¼Œå…·ä½“å¯å‚è€ƒï¼šhttps://mp.weixin.qq.com/s/YovZKGd2BDqnpW5BBGLA-Aã€‚TransRecçš„ä¸»è¦æ€è·¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n<center><img  src=\"https://img-blog.csdnimg.cn/20190831085905828.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=500px></center>\n\næœ¬è®ºæ–‡ä¸­æå‡ºäº†TransFMï¼Œå…¶ç»“åˆäº†FMå’ŒTransRecçš„æ€æƒ³ï¼Œå°†å…¶åº”ç”¨åœ¨åºåˆ—æ¨èä¸­ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ä½¿ç”¨ç®€å•çš„æ¨¡å‹å¯¹å¤æ‚çš„äº¤äº’ä¹‹é—´è¿›è¡Œå»ºæ¨¡å¹¶èƒ½å–å¾—ä¸é”™çš„æ•ˆæœã€‚\n\n> FMèƒ½å¤Ÿå¯¹ä»»æ„çš„å®å€¼ç‰¹å¾å‘é‡è¿›è¡Œæ“ä½œï¼Œå¹¶é€šè¿‡å‚æ•°åˆ†è§£å¯¹ç‰¹å¾ä¹‹é—´çš„é«˜é˜¶äº¤äº’è¿›è¡Œå»ºæ¨¡ã€‚ä»–å¯ä»¥åº”ç”¨åœ¨ä¸€èˆ¬çš„é¢„æµ‹ä»»åŠ¡é‡Œï¼Œå¹¶å¯ä»¥é€šè¿‡ç‰¹å¾æ›¿æ¢ï¼Œå–ä»£å¸¸è§çš„æ¨èç®—æ³•æ¨¡å‹ã€‚\n\nTransFMçš„ä¸»è¦æ€è·¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n<center><img  src=\"https://img-blog.csdnimg.cn/20190831085920392.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=500px></center>\n\nTransFMæ˜¯å¯¹æ‰€æœ‰è§‚å¯Ÿåˆ°çš„è¡Œä¸ºä¹‹é—´å¯èƒ½çš„äº¤äº’è¿›è¡Œå»ºæ¨¡ï¼Œå¯¹äºæ¯ä¸€ä¸ªç‰¹å¾iï¼Œæ¨¡å‹å­¦ä¹ åˆ°ä¸¤éƒ¨åˆ†ï¼šä¸€ä¸ªä½ç»´çš„embeddingå‘é‡$\\overrightarrow{v_i}$å’Œä¸€ä¸ªç¿»è¯‘å‘é‡$\\overrightarrow{v_i'}$\n\nç‰¹å¾ä¹‹é—´çš„äº¤äº’å¼ºåº¦ä½¿ç”¨å¹³æ–¹æ¬§å‡ é‡Œå¾·è·ç¦»æ¥è¿›è¡Œè®¡ç®—ï¼Œåœ¨ä¸Šå›¾ä¸­ï¼Œå±•ç¤ºäº†userï¼Œitemï¼Œtimeçš„embeddingç‰¹å¾å’Œç¿»è¯‘å‘é‡ï¼Œäº¤äº’è¡Œä¸ºä¹‹é—´çš„æƒé‡ç”±èµ·å§‹ç‚¹å’Œç»“æŸç‚¹ä¹‹é—´çš„å¹³æ–¹æ¬§å‡ é‡Œå¾·è·ç¦»è¿›è¡Œè®¡ç®—ã€‚ä¸FMä¸€æ ·ï¼ŒTransFMå¯ä»¥åœ¨å‚æ•°å’Œç‰¹å¾çº¬åº¦çš„çº¿æ€§æ—¶é—´å†…è¿›è¡Œè®¡ç®—ï¼Œä»è€Œæœ‰æ•ˆçš„å®ç°å¤§è§„æ¨¡æ•°æ®é›†çš„è®¡ç®—ã€‚\n# ç›¸å…³ç ”ç©¶\n## åºåˆ—æ¨è\nå·²ç»å­˜åœ¨äº†è®¸å¤šåŸºäºMCï¼ˆé©¬å°”å¯å¤«é“¾ï¼ŒMarkov Chainsï¼‰çš„åºåˆ—æ¨èæ¨¡å‹ï¼Œæ¯”å¦‚FPMCï¼ˆFactorized Personalized Markov Chainsï¼‰ï¼Œä½¿ç”¨ç‹¬ç«‹åˆ†è§£çŸ©é˜µå¯¹ä¸‰é˜¶äº¤äº’è¡Œä¸ºè¿›è¡Œåˆ†è§£ï¼Œç»§è€Œæ¥æ¨¡æ‹Ÿæˆå¯¹çš„ç›¸äº’ä½œç”¨ã€‚PRMEä½¿ç”¨æ¬§å‡ é‡Œå¾·è·ç¦»æ›¿æ¢å†…ç§¯å¯¹ç”¨æˆ·-ç‰©å“ä¹‹é—´çš„äº¤äº’è¡Œä¸ºè¿›è¡Œå»ºæ¨¡ã€‚TransRecåŒæ ·ä¹Ÿæ˜¯ä¸€ä¸ªåºåˆ—æ¨èæ¨¡å‹ï¼Œé€šè¿‡å…±äº«ç‰©å“çš„embeddingå‘é‡ç©ºé—´ï¼Œå°†ç”¨æˆ·è¡Œä¸ºè½¬åŒ–ä¸ºç¿»è¯‘å‘é‡ï¼Œå…¶è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š\n<center><img  src=\"https://img-blog.csdnimg.cn/20190831085937428.png\" width=200px></center>\nè¿™äº›å¯¹äºç»™å®šçš„ç”¨æˆ·å†å²è¡Œä¸ºåºåˆ—ååˆ†æœ‰æ•ˆï¼Œä½†æ˜¯åœ¨ä¸æ”¹å˜æ¨¡å‹ç»“æ„çš„å‰æä¸‹ï¼Œå¹¶ä¸èƒ½æ•è·æ—¶é—´ï¼Œåœ°ç†å’Œå…¶ä»–çš„ä¸Šä¸‹æ–‡ç‰¹å¾ã€‚\n\n## å› å­åˆ†è§£æœº\nFMå¯¹äºä»»æ„çš„æœºå™¨å­¦ä¹ ä»»åŠ¡æ¥è®²æ˜¯ä¸€ä¸ªé€šç”¨çš„å­¦ä¹ æ¡†æ¶ï¼Œä»–æ¨¡å‹ä»»æ„ä»»æ„ç‰¹å¾ä¹‹é—´çš„äºŒé˜¶äº¤äº’ï¼Œå¹¶å¾ˆå®¹æ˜“æ‰©æ‹›åˆ°æ›´é«˜é˜¶ï¼Œæ¯ä¸ªç‰¹å¾çš„äº¤äº’é€šè¿‡å‚æ•°ä¹‹é—´çš„å†…ç§¯æ¥æƒè¡¡ã€‚å…¶å…¬å¼å¦‚ä¸‹ï¼ˆè¿™é‡Œè®¨è®ºçš„æ˜¯FMçš„äºŒé˜¶å½¢å¼ï¼‰ï¼š\n<center><img  src=\"https://img-blog.csdnimg.cn/20190831085947201.png\" width=200px></center>\né€šè¿‡é€‰æ‹©åˆé€‚çš„æŸå¤±å‡½æ•°ï¼ŒFMå¯ä»¥åº”ç”¨åœ¨ä»»æ„çš„åˆ†ç±»ï¼Œå›å½’æˆ–è€…æ’åºä»»åŠ¡ä¸­ï¼Œåœ¨è¿™ç¯‡æ–‡ç« é‡Œä¸»è¦æ˜¯é’ˆå¯¹éšå¼åé¦ˆç»“åˆBPRç®—æ³•æ¡†æ¶å»ä¼˜åŒ–é¢„æµ‹çš„ç»“æœã€‚\n\n## æ··åˆæ¨è\næ··åˆæ¨èç»“åˆäº†ååŒå’Œconetnt-basedï¼Œç›®çš„åœ¨äºæå‡æ•ˆæœå¹¶ä¸”ä¸ºè¡Œä¸ºå¾ˆè¾ƒå°‘çš„ç”¨æˆ·æä¾›æœ‰æ•ˆçš„é€‰æ‹©ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£äº†ç”¨æˆ·å†·å¯åŠ¨ã€‚è¿™é‡Œå¯ä»¥åˆ©ç”¨çš„æ½œåœ¨çš„ä¿¡æ¯åŒ…æ‹¬ï¼šæ—¶é—´ç‰¹å¾ï¼Œåœ°ç†ç‰¹å¾ï¼Œç¤¾äº¤ç‰¹å¾ç­‰ã€‚æœ€è¿‘çš„ä¸€äº›å…³äºæ··åˆæ¨èçš„å·¥ä½œç»“åˆäº†å›¾åƒç‰¹å¾ï¼Œæˆ–è€…æ˜¯ä½¿ç”¨æ·±åº¦å­¦ä¹ è‡ªåŠ¨ç”Ÿæˆæœ‰ç”¨çš„å†…å®¹ç‰¹å¾ã€‚\n\nè™½ç„¶è¿™äº›æ–¹æ³•éƒ½å–å¾—äº†ä¸é”™çš„è¡¨ç°ï¼Œä½†ä¾èµ–äºä¸“é—¨çš„æ¨¡å‹å’ŒæŠ€æœ¯ã€‚ç›¸æ¯”ä¹‹é—´ï¼Œè®ºæ–‡é‡Œæå‡ºçš„TransFMæ˜¯ä¸€ç§æ›´å¹¿ä¹‰çš„åŠæ³•ï¼Œå¯ä»¥å¯¹ä»»æ„çš„ç‰¹å¾å‘é‡å’Œé¢„æµ‹ä»»åŠ¡è¿›è¡Œæ“ä½œï¼Œé€šè¿‡é€‚å½“çš„ç‰¹å¾å·¥ç¨‹ï¼ŒTransFMæ¨¡å‹å¯ä»¥ç»“åˆæ—¶é—´ï¼Œåœ°ç†ï¼Œäººå£ç»Ÿè®¡å’Œå…¶ä»–å†…å®¹ç‰¹å¾ï¼Œè€Œæ— éœ€æ›´æ”¹æ¨¡å‹æœ¬èº«ç»“æ„ã€‚\n\n# TransFMæ¨¡å‹\n## é—®é¢˜å®šä¹‰\n<center><img  src=\"https://img-blog.csdnimg.cn/20190831085958369.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=500px></center>\n\nTransFMä½¿ç”¨å¹³æ–¹æ¬§å‡ é‡Œå¾·è·ç¦»æ›¿æ¢FMä¸­çš„å†…ç§¯è®¡ç®—ï¼Œå¹¶ç”¨embedding å‘é‡å’Œç¿»è¯‘å‘é‡ä¹‹å’Œè¡¨ç¤ºç‰¹å¾v_içš„å‘é‡ï¼Œå…¶å…¬å¼å¦‚ä¸‹ï¼š\n<center><img  src=\"https://img-blog.csdnimg.cn/20190831090026658.png\" width=300px></center>\nå…¶ä¸­è·ç¦»è®¡ç®—æ–¹å¼ä¸ºï¼š\n<center><img  src=\"https://img-blog.csdnimg.cn/20190831090035517.png\" width=230px></center>\n\nä½¿ç”¨å¹³æ–¹æ¬§å‡ é‡Œå¾·è·ç¦»æ›¿æ¢å†…ç§¯çš„å¥½å¤„æ˜¯ï¼šæé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œæ›´æœ‰æ•ˆçš„æ•è·embeddingä¹‹é—´çš„ä¼ é€’æ€§ã€‚æ¯”å¦‚(a,b)ï¼Œ(b,c)ä¹‹é—´æœ‰å¾ˆé«˜çš„äº¤äº’æƒé‡ï¼Œé‚£ä¹ˆ(a,c)ä¹‹é—´çš„ç›¸å…³æ€§ä¹Ÿä¼šæ›´å¼ºã€‚\n\nä¸‹å›¾å±•ç¤ºäº†TransFMå’Œå…¶ä»–å‡ ç§ç®—æ³•çš„é¢„æµ‹æ–¹æ³•ï¼Œä»ä¸­å¯ä»¥çœ‹å‡ºPRMEå­¦ä¹ çš„æ˜¯ä¸¤ä¸ªç”¨æˆ·çš„embeddingå‘é‡ä¹‹é—´çš„è·ç¦»ï¼ŒFMå­¦ä¹ çš„æ˜¯ä»»æ„ç‰¹å¾ä¸ç›¸åº”å‚æ•°ä¹‹é—´çš„å†…ç§¯ï¼ŒTransRecå­¦ä¹ çš„æ˜¯ç‰©å“çš„embeddingå‘é‡å’Œç”¨æˆ·è¡Œä¸ºçš„ç¿»è¯‘åºåˆ—ï¼ŒTransFMå­¦ä¹ çš„æ˜¯æ¯ä¸ªç‰¹å¾çš„embeddingå‘é‡å’Œç¿»è¯‘å‘é‡ï¼Œä½¿ç”¨å¹³æ–¹æ¬§å‡ é‡Œå¾·è·ç¦»å»åº¦é‡ç‰¹å¾ä¹‹é—´çš„äº¤äº’ã€‚\n<center><img  src=\"https://img-blog.csdnimg.cn/20190831090058665.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=500px></center>\n## æ¨¡å‹è®¡ç®—\nFMæ˜¯å¯ä»¥å°†è®¡ç®—å¤æ‚åº¦é™ä½åˆ°nkçš„ï¼ŒåŒæ ·TransFMä¹Ÿå¯ä»¥é™ä½å…¶è®¡ç®—è´Ÿè´£åº¦ã€‚é¦–å…ˆï¼š\n<center><img  src=\"https://img-blog.csdnimg.cn/20190831090139230.png\" width=300px></center>\n\nå…¶æ¬¡è¿›è¡ŒåŒ–ç®€å¾—ï¼š\n<center><img  src=\"https://img-blog.csdnimg.cn/20190831090151717.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=400px></center>\n\nä¸Šé¢çš„ç¬¬ä¸€ä¸ªæ€»å’Œå¯ä»¥åˆ†æˆå…­ä¸ªå•ç‹¬é¡¹ï¼Œæ¯ä¸€é¡¹åˆå¯ä»¥ç»§ç»­è¿›è¡ŒåŒ–ç®€ï¼š\n<center><img  src=\"https://img-blog.csdnimg.cn/20190831090204314.png\" width=300px></center>\n\nå‡è®¾è¾“å…¥çš„ç‰¹å¾æ˜¯nç»´ï¼Œéšå‘é‡é•¿åº¦ä¸ºkï¼Œé‚£ä¹ˆæ—¶é—´å¤æ‚åº¦å°±æ˜¯O(nk)ï¼Œè€Œä¸æ˜¯O(n^2k)ã€‚\n## å‚æ•°ä¼˜åŒ–\næ¨¡å‹ä½¿ç”¨S-BPRï¼ˆSequential Bayesian Personalized Rankingï¼‰è¿›è¡Œä¼˜åŒ–ï¼Œå…¶ä¼˜åŒ–æ–¹å¼å¦‚ä¸‹ï¼š\n<center><img  src=\"https://img-blog.csdnimg.cn/20190831090239744.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=350px></center>\nå…¶ä¸­Î©(Î˜)ä¸ºL2æ­£åˆ™ã€‚\n\n## å®è·µå’Œæ¨æ–­\nä½œè€…ç­‰äººåœ¨TensorFlowä¸­å¯¹TransFMè¿›è¡Œäº†å®ç°ï¼Œç”¨çš„æ˜¯mini-batch gradient descent å’Œ Adamè¿›è¡Œæ¨¡å‹çš„è®­ç»ƒï¼ˆadamå¯¹äºæœ‰å¤§é‡å‚æ•°ä¸”ç¨€ç–çš„æ•°æ®é›†ä¸Šè¡¨ç°è‰¯å¥½ï¼‰ã€‚\nä½œè€…è¿™é‡Œä¹Ÿç½¢ä»£ç è¿›è¡Œäº†å¼€æºï¼ŒåŒ…æ‹¬æ•°æ®é›†ï¼Œå·²ç»ä¸åŒç®—æ³•å®ç°å®ç°å¯¹æ¯”ï¼Œå…¶åœ°å€ä¸ºï¼šhttps://github.com/rpasricha/TransFM\n\n# å®éªŒ\nä½œè€…ç»“åˆäº†ä¸€äº›ç®—æ³•åœ¨äºšé©¬é€Šå’Œè°·æ­Œæ•°æ®é›†ä¸Šè¿›è¡Œæµ‹è¯•ï¼Œå…¶ä¸­è¯„ä»·çš„æŒ‡æ ‡æ˜¯AUCï¼Œæ•ˆæœå¦‚ä¸‹ï¼š\n<center><img  src=\"https://img-blog.csdnimg.cn/20190831090454914.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=500px></center>\n\n<center><img  src=\"https://img-blog.csdnimg.cn/20190831090503108.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=350px></center>\n\nä¸Šè¾¹çš„Table 3æ˜¯æŒ‡ä»Amazoné€‰å–top5 å“ç±» ï¼Œä»Google Local ä¸­é€‰å–6ä¸ªåŸå¸‚ä½œä¸ºå®éªŒä¾æ®ã€‚\n# FMæ¨¡å‹å’Œå…¶ä»–æ¨¡å‹çš„èåˆ\nPRMEï¼ˆPersonalized Ranking Metric Embeddingï¼‰\n<center><img  src=\"https://img-blog.csdnimg.cn/2019083109063261.png\" width=300px></center>\n\n> å’ŒTransFMå¯¹æ¯”çš„ä¸åŒåœ¨äºTransFMä¸­içš„å‘é‡æ˜¯embeddingå‘é‡å’Œtranslationå‘é‡å’Œï¼Œè€Œè¿™é‡Œæ²¡æœ‰translationå‘é‡ã€‚å®æ—¶è¯æ˜TransFMæ•ˆæœè¦å¥½å¾ˆå¤šã€‚\n\nHRMï¼ˆHierarchical Representation Model ï¼‰\n<center><img  src=\"https://img-blog.csdnimg.cn/20190831090640757.png\" width=300px></center>\n\nå¯¹æ¯”çš„å®éªŒç»“æœå¦‚ä¸‹ï¼š\n<center><img  src=\"https://img-blog.csdnimg.cn/20190831090647827.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=500px></center>\n\n# æˆ‘çš„æ€»ç»“\n1. TransFMç»“åˆäº†TransRec å’Œ FMå’Œä¼˜åŠ¿ï¼Œåœ¨å¤§é‡ï¼Œç¨€ç–çš„æ•°æ®é›†ä¸Šå–å¾—äº†ä¸é”™çš„æ•ˆæœã€‚\n2. åœ¨å‚æ•°å’Œç‰¹å¾çº¬åº¦ä¸‹ï¼Œè®¡ç®—æ—¶é—´çº¿æ€§å¢å¤§ï¼ˆnkï¼‰\n3. æ”¹å˜FMä¸­çš„å†…ç§¯è®¡ç®—æ–¹å¼ï¼Œä½¿ç”¨å¹³æ–¹æ¬§å‡ é‡Œå¾·è·ç¦»ï¼Œæé«˜äº†æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œå’Œæ ·æœ¬ç‰¹å¾ä¹‹é—´çš„ä¼ é€’æ€§\n4. åœ¨ä¸æ”¹å˜æ¨¡å‹ç»“æ„çš„å‰æä¸‹ï¼Œå¯ä»¥è½»æ˜“å°†æ—¶é—´ï¼Œåœ°åŸŸæˆ–è€…å…¶ä»–å†…å®¹ç‰¹å¾åŠ å…¥åˆ°æ¨¡å‹ä¸­\n5. æ•°æ®é›†æ‹†åˆ†æ—¶é¿å…äº†ä»æ•´ä½“æ•°æ®é›†ä¸­çš„éšæœºæ‹†åˆ†ï¼Œè€Œæ˜¯æŒ‰ç…§æ—¶é—´å…ˆåçš„é¡ºåºè¿›è¡Œæ‹†åˆ†ã€‚ä¿è¯äº†ä¸€å®šçš„æ—¶é—´è¿ç»­æ€§ï¼Œå¾ˆå¤šè®ºæ–‡ä¸­åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†æ—¶éƒ½æ˜¯è¿™æ ·åšçš„ï¼Œåœ¨å·¥ä¸šç•Œä¸­æ¨¡å‹çš„è®­ç»ƒå’Œè¯„ä¼°å¤§éƒ¨åˆ†ä¹Ÿæ˜¯è¿™æ ·åšçš„ã€‚\n6. æ ¹æ®ç»éªŒå°†å‚æ•°é™å®šåœ¨ä¸€ä¸ªèŒƒå›´å†…ï¼Œæ ¹æ®ç½‘æ ¼æœç´¢æ³•å¯»æ‰¾æœ€ä½³å‚æ•°\n7. å®éªŒå¯¹æ¯”çš„ä¸°å¯Œæ€§ï¼Œä½¿ç»“è®ºæ›´å…·æœ‰è¯´æœåŠ›\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["è®ºæ–‡"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€è®ºæ–‡ã€‘RecSys17-åºåˆ—æ¨èæ¨¡å‹ Translation-based Recommendation","url":"/2019/08/29/è®ºæ–‡/ã€è®ºæ–‡ã€‘RecSys17-åºåˆ—æ¨èæ¨¡å‹ Translation-based Recommendation/","content":"\n> åºåˆ—æ¨èæ¨¡å‹ TransFMï¼ˆTranslation-based Factorization Machines for Sequential Recommendationï¼‰å‚è€ƒï¼š[ç‚¹å‡»é˜…è¯»](https://thinkgamer.blog.csdn.net/article/details/100168818)\n\n<!--More-->\n\n# èƒŒæ™¯\nè¿™ç¯‡è®ºæ–‡æ˜¯ç”± Ruining Heï¼ŒWang-Cheng Kangå’ŒJulian McAuleyä¸‰ä½å¤§ä½¬æå‡ºçš„ï¼Œåœ¨2017å¹´çš„ACMæ¨èç³»ç»Ÿä¼šè®®ï¼ˆRecSys'17ï¼‰ä¸Šè·å¾—äº†æœ€ä½³è®ºæ–‡å¥–ï¼ˆåœ¨å¤§ä½¬ä¸»é¡µå¯ä»¥ä¸‹è½½è¯¥è®ºæ–‡ä¸­æ¶‰åŠçš„ä»£ç å’Œæ•°æ®é›†ï¼Œå¯æƒœä»£ç æ˜¯C++å†™çš„ï¼Œä¸æ‡‚C++çš„ç«¥é‹æŒ‘æˆ˜æ€§å¾ˆå¤§ï½ï¼‰\n- ç¬¬ä¸€ä½œè€…çš„Ruining Heä¸»é¡µä¸ºhttps://sites.google.com/view/ruining-he/\n- RecSyså†å±Šæœ€ä½³è®ºæ–‡åœ°å€ï¼šhttps://recsys.acm.org/best-papers/\n- æœ¬è®ºæ–‡ä¸‹è½½åœ°å€ï¼šhttps://arxiv.org/pdf/1707.02410.pdf\n\nè®ºæ–‡çš„ä¸¤ä¸ªç ”ç©¶ç‚¹ï¼š\n- ç”¨æˆ·çš„åºåˆ—æ¨èï¼ˆç”¨æˆ·åœ¨æµè§ˆäº†ä¸€äº›itemsä¹‹åç»™ä»–æ¨èç‰©å“jï¼‰\n- ç‰©å“åˆ°ç‰©å“çš„æ¨èï¼ˆç”¨æˆ·è´­ä¹°äº†ä¸€ä¸ªç‰›ä»”è£¤ï¼Œç»™ä»–æ¨èä¸€ä¸ªè¡¬è¡«ï¼‰\n\n---\n# æ¦‚è¿°\nå¯¹ç”¨æˆ·å’Œç‰©å“ä»¥åŠç‰©å“å’Œç‰©å“ä¹‹é—´çš„å…³ç³»è¿›è¡Œå»ºæ¨¡æ˜¯è®¾è®¡ä¸€ä¸ªæˆåŠŸæ¨èç³»ç»Ÿçš„æ ¸å¿ƒã€‚ä¸€ç§ç»å…¸çš„åšæ³•æ˜¯é¢„æµ‹ç”¨æˆ·è¡Œä¸ºåºåˆ—ï¼ˆæˆ–è€…æ˜¯ä¸‹ä¸€ä¸ªç‰©å“çš„æ¨èï¼‰ï¼Œå…¶æŒ‘æˆ˜åœ¨äºå¯¹ç”¨æˆ·ï¼Œç”¨æˆ·å†å²è¡Œä¸ºç‰©å“å’Œç”¨æˆ·æ¥ä¸‹æ¥æœ‰è¡Œä¸ºçš„ç‰©å“ä¹‹é—´çš„ä¸‰é˜¶äº¤äº’å…³ç³»è¿›è¡Œå»ºæ¨¡ã€‚ç°æœ‰çš„æ–¹æ³•æ˜¯å¯¹è¿™äº›é«˜é˜¶çš„äº¤äº’åˆ†è§£ä¸ºæˆå¯¹çš„å…³ç³»ç»„åˆï¼Œé€šè¿‡ä¸åŒçš„æ¨¡å‹å»å¯¹ç”¨æˆ·çš„åå¥½ï¼ˆç”¨æˆ·å’Œç‰©å“çš„äº¤äº’ï¼‰å’Œåºåˆ—åŒ¹é…ï¼ˆç‰©å“å’Œç‰©å“çš„äº¤äº’ï¼‰è¿›è¡Œå»ºæ¨¡ã€‚\n\næ¯”å¦‚MFï¼ˆMatrix Factorizationï¼ŒçŸ©é˜µåˆ†è§£ï¼‰åªå¯¹ç”¨æˆ·å’Œç‰©å“ä¹‹é—´çš„äº¤äº’è¡Œä¸ºè¿›è¡Œå»ºæ¨¡ï¼›MCï¼ˆMarkov Chainï¼Œé©¬å°”å¯å¤«é“¾ï¼‰åªå¯¹ç”¨äº¤äº’è¿‡ç¨‹ä¸­çš„ç‰©å“å¯¹è¿›è¡Œå»ºæ¨¡ï¼Œé€šå¸¸é€šè¿‡å¯¹è½¬ç§»çŸ©é˜µè¿›è¡Œåˆ†è§£æé«˜å…¶æ³›åŒ–èƒ½åŠ›ã€‚\n\nå¯¹äºåºåˆ—æ¨èï¼Œç ”ç©¶è€…æå‡ºäº†å¯æ‰©å±•çš„å¼ é‡åˆ†è§£æ–¹æ³•ï¼Œæ¯”å¦‚FPMCï¼ˆFactorized Personalized Markov Chainsï¼‰ï¼ŒFPMCé€šè¿‡ä¸¤ä¸ªæˆå¯¹çš„äº¤äº’å…³ç³»æ¥æ¨¡æ‹Ÿuï¼Œiï¼Œjä¹‹é—´çš„ä¸‰é˜¶äº¤äº’å…³ç³»ï¼Œå…¶å®è¿™å°±æ˜¯MFå’ŒMCçš„ç»“åˆã€‚å¯¹äºæå‡FPMCæœ‰ä¸¤ä¸ªæ–¹å‘çš„ç ”ç©¶æ€è·¯ï¼Œä¸€ä¸ªæ€è·¯æ˜¯åœ¨ä¸ªæ€§åŒ–åº¦é‡åµŒå…¥æ–¹æ³•ç”¨æ¬§å‡ é‡Œå¾·è·ç¦»æ›¿æ¢FPMCä¸­çš„å†…ç§¯ï¼Œå…¶ä¸­åº¦é‡å‡è®¾å°¤å…¶æ˜¯ä¸‰è§’ä¸ç­‰å¼ä½¿æ¨¡å‹çš„æ³›åŒ–æ€§æ›´å¥½ï¼Œç„¶è€Œï¼Œè¿™äº›ç ”ç©¶å·¥ä½œé‡‡ç”¨çš„ä»ç„¶æ˜¯å¯¹ç”¨æˆ·åå¥½å’Œåºåˆ—çš„è¿ç»­æ€§åˆ†åˆ«å»ºæ¨¡çš„æ¡†æ¶ï¼Œç”±äºè¿™ä¸¤éƒ¨åˆ†æœ¬èº«å­˜åœ¨å…³ç³»ï¼Œå› æ­¤è¿™æ ·åšæ˜¯å­˜åœ¨ä¸€å®šçš„é—®é¢˜çš„ã€‚å¦ä¸€ä¸ªæ€è·¯æ˜¯åˆ©ç”¨å¹³å‡/æœ€å¤§æ± åŒ–ç­‰æ“ä½œå»èšåˆç”¨æˆ·uå’Œå‰ä¸€é¡¹içš„å‘é‡è¡¨ç¤ºï¼Œç„¶åå†æµ‹é‡å®ƒä»¬ä¸ä¸‹ä¸€ä¸ªé¡¹jçš„ç›¸ä¼¼åº¦ï¼Œè¿™ç§æ€è·¯è™½ç„¶éƒ¨åˆ†è§£å†³äº†ä¸¤ä¸ªç»„ä»¶ä¹‹é—´çš„ç›¸äº’ä¾èµ–é—®é¢˜ï¼Œä½†å¾ˆéš¾è§£é‡Šè€Œä¸”ä¸èƒ½ä»åº¦é‡embeddingå‘é‡ä¸­è·å¾—æ”¶ç›Šã€‚\n\nä¸ºäº†è§£å†³ä¸Šè¿°å­˜åœ¨çš„é—®é¢˜ï¼Œæå‡ºäº†Translation-based Recommendationæ¨¡å‹ï¼Œå…·ä½“è§£é‡Šå¾€ä¸‹çœ‹ã€‚\n\n----\n\n# æ¨¡å‹ä»‹ç»\n## é—®é¢˜å®šä¹‰\næ¶‰åŠçš„ç›¸å…³å­—ç¬¦å«ä¹‰å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/20190829080844419.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=400px>\n</center>\n\n## æ¨¡å‹ç»“æ„\nTransRecçš„ä¸»è¦æ€è·¯å¦‚ä¸‹å›¾ï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/20190829080909516.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=400px>\n</center>\n\nç‰©å“ä½œä¸ºä¸€ä¸ªç‚¹è¢«åµŒå…¥åˆ°ç¿»è¯‘ç©ºé—´å†…ï¼Œç”¨æˆ·çš„åºåˆ—è¡Œä¸ºåˆ™ä½œä¸ºä¸€ä¸ªç¿»è¯‘å‘é‡å­˜åœ¨äºè¯¥ç©ºé—´ï¼Œç„¶åï¼Œé€šè¿‡ä¸ªæ€§åŒ–ç¿»è¯‘æ“ä½œæ•è·å‰é¢æåˆ°çš„ä¸‰é˜¶äº¤äº’ï¼Œå…¶åŸºæœ¬æ€è·¯å°±æ˜¯ç”¨æˆ·çš„ç¿»è¯‘å‘é‡å’Œä¸Šä¸€ä¸ªè¡Œä¸ºç‰©å“çš„ç¿»è¯‘å‘é‡ä¹‹å’Œï¼Œç¡®å®šä¸‹ä¸€ä¸ªæœ‰è¡Œä¸ºçš„ç‰©å“jï¼Œå¦‚ä¸‹æ‰€ç¤º\n$$\n\\underset{ \\gamma _i }{\\rightarrow} + \\underset{t_u}{\\rightarrow}  \\approx  \\underset{ \\gamma _j }{\\rightarrow} \n$$\n\nå…¶ä¸­è·ç¦»çš„è®¡ç®—å¯ä»¥é‡‡ç”¨L1-distanceæˆ–è€…L2-distanceã€‚\nç”±äºç”Ÿäº§ç¯å¢ƒä¸­æ•°æ®çš„ç¨€ç–æ€§ï¼Œå¾ˆéš¾ä¸ºæ¯ä¸ªç”¨æˆ·å­¦ä¹ åˆ°ä¸€ä¸ªå‘é‡ï¼Œå› æ­¤æ·»åŠ äº†ä¸€ä¸ªå…¨å±€ç¿»è¯‘å‘é‡æ¥åˆå§‹åŒ–æ‰€æœ‰çš„ç”¨æˆ·ï¼Œè¿™æ ·ä¹Ÿèƒ½å¤Ÿæœ‰æ•ˆçš„ç¼“è§£ç”¨æˆ·å†·å¯åŠ¨ã€‚å¦‚ä¸‹æ‰€ç¤º\n$$\n\\underset{ T_u }{\\rightarrow} = \\underset{t}{\\rightarrow}  + \\underset{ t_u }{\\rightarrow} \n$$\nåœ¨ä¸€ä¸ªç”Ÿäº§ç³»ç»Ÿä¸­ï¼Œå¾€å¾€ä¼šå­˜åœ¨å¤´éƒ¨ç‰©å“ï¼ˆå³çƒ­é—¨ç‰©å“ï¼‰ï¼Œè¿™äº›ç‰©å“çš„æµè¡Œåº¦å¾ˆé«˜ï¼Œé‚£ä¹ˆå¦‚æœä»…ä»…é‡‡ç”¨ç®€å•çš„è·ç¦»è®¡ç®—çš„è¯ï¼Œé‚£äº›å¤´éƒ¨ç‰©å“å°±å¾ˆå¯èƒ½å‡ºç°åœ¨æ¯ä¸ªç”¨æˆ·çš„æ¨èç»“æœä¸­ã€‚å› æ­¤åœ¨è®¡ç®—æ—¶å¢åŠ äº†ä¸€ä¸ªåç½®é¡¹beta_jæ¥å¯¹çƒ­é—¨ç‰©å“è¿›è¡Œé™æƒã€‚æœ€ç»ˆå¯¹äºç»™å®šçš„ç”¨æˆ·uå’Œä¹‹å‰çš„è¡Œä¸ºç‰©å“iå¯ä»¥ç”±ä»¥ä¸‹çš„è®¡ç®—å…¬å¼ä¸ºå…¶æ¨èç‰©å“jã€‚\n<center><img src=\"https://img-blog.csdnimg.cn/20190829080953218.png\" width=200px>\n</center>\nç‰©å“jçš„çƒ­åº¦è¶Šé«˜ï¼Œåˆ™beta_jè¶Šå°ï¼Œè¿™æ ·å½“ä¸¤ä¸ªç‰©å“è®¡ç®—å‡ºæ¥çš„è·ç¦»ä¸€è‡´æ—¶ï¼Œå€¾å‘äºæ¨èé‚£äº›çƒ­åº¦å°çš„ç‰©å“ï¼Œè¿™æ ·ä¹Ÿèƒ½å¤Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜æ¨èç‰©å“çš„å¤šæ ·æ€§ã€‚\n\n***è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼šä¸ºäº†é¿å…â€œç»´åº¦è¯…å’’â€é—®é¢˜ï¼Œå°†r_jé™å®šåœ¨æ•´ä¸ªç¿»è¯‘ç©ºé—´çš„ä¸€ä¸ªå­é›†ä¸Šï¼Œä¾‹å¦‚ä¸€ä¸ªå•ä½çƒä½“çš„ç©ºé—´èŒƒå›´ã€‚***\n\nå¯¹äºç»™å®šè¿‡çš„ç”¨æˆ·å’Œå†å²è¡Œä¸ºåºåˆ—ï¼Œæ¨¡å‹çš„ç›®æ ‡æ˜¯å¯¹é›†åˆä¸­çš„ç‰©å“è¿›è¡Œæ’åºï¼Œè¿™é‡Œé‡‡ç”¨çš„æ˜¯pairwiseæ–¹æ³•çš„S-BPRï¼ˆSequential Bayesian Personalized Rankingï¼‰ã€‚å…¶ä¼˜åŒ–çš„å…¬å¼å¦‚ä¸‹ï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/20190829081100913.png\" width=300px>\n</center>\nå…¶ä¸­jæ˜¯çœŸå®çš„ä¸‹ä¸€ä¸ªäº¤äº’çš„ç‰©å“ï¼Œj'æ˜¯é™¤jä¹‹å¤–çš„é›†åˆä¸­çš„ä»»æ„ä¸€ä¸ªç‰©å“ã€‚omegaä¸ºL2æ­£åˆ™é¡¹ã€‚\n\n## å‚æ•°å­¦ä¹ \nç‰©å“iå’Œç”¨æˆ·å¯¹åº”çš„å…¨å±€ç¿»è¯‘å‘é‡éšæœºåˆå§‹åŒ–ä¸ºå•å…ƒå‘é‡ï¼Œæ¯ä¸ªç‰©å“çš„åç½®å‘é‡å’Œæ¯ä¸ªç”¨æˆ·çš„ç¿»è¯‘å‘é‡åˆå§‹åŒ–ä¸º0ã€‚\n\nç›®æ ‡å‡½æ•°é€šè¿‡éšæœºæ¢¯åº¦ä¸Šå‡è¿›è¡Œä¼˜åŒ–ï¼Œéšæœºä»é›†åˆä¸­æŠ½å–ç”¨æˆ·uï¼Œæ­£ä¾‹jå’Œè´Ÿä¾‹j'ï¼Œé€šè¿‡ä¸‹é¢çš„è®¡ç®—å…¬å¼è¿›è¡Œè¿­ä»£ï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/20190829081139397.png\" width=300px></center>\nå…¶ä¸­Îµä¸ºå­¦ä¹ ç‡ï¼ŒÎ»ä¸ºæ­£åˆ™é¡¹å‚æ•°ã€‚é‡å¤è¯¥å…¬å¼ï¼Œç›´åˆ°æ”¶æ•›æˆ–è€…æ•ˆæœè¾¾åˆ°æœ€ä¼˜æˆ–è€…è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°ã€‚\n\n## æœ€è¿‘é‚»æŸ¥æ‰¾\nåœ¨æµ‹è¯•æ—¶ï¼Œå¯ä»¥é€šè¿‡æœ€è¿‘é‚»æœç´¢è¿›è¡Œæ¨èï¼Œä¸€ä¸ªå°çš„æŒ‘æˆ˜å°±æ˜¯ç‰©å“çš„åå·®ã€‚è¿™é‡Œåˆ†ä¸ºä¸¤éƒ¨åˆ†å»è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\nç¬¬ä¸€ä½¿ç”¨ï¼š\n$$\\beta _j ' \\leftarrow  \\beta _j - max_{k\\in I}\\beta _k$$ è¡¨ç¤º$\\beta _j$\n\nå¯¹åç½®é¡¹è¿›è¡Œè½¬æ¢ï¼Œä¸ä¼šæ”¹å˜è®¡ç®—ç»“æœçš„æ’åºã€‚\n\n\nç¬¬äºŒä½¿ç”¨L2èŒƒæ•°è®¡ç®—\n$$\\overrightarrow{\\gamma _j}' = (\\overrightarrow{\\gamma _j}';\\sqrt{-\\beta _j'})$$\næˆ–è€…ä½¿ç”¨L1èŒƒæ•°è®¡ç®—\n$$\\overrightarrow{\\gamma _j}' = (\\overrightarrow{\\gamma _j}';-\\beta _j')$$\nå®éªŒè¯æ˜L2èŒƒæ•°æ•ˆæœæ›´å¥½ã€‚å¯¹äºç»™å®šçš„ç”¨æˆ·uå’Œç‰©å“iï¼Œåœ¨æ•´ä¸ªå‘é‡ç©ºé—´å†…ä¸ºå…¶è®¡ç®—å¯»æ‰¾æœ€è¿‘çš„$\\overrightarrow{\\gamma _j}'$\n\n---\n# å®éªŒ\nä¸ºäº†å……åˆ†éªŒè¯TransRecçš„ä¼˜åŠ¿ï¼Œä½¿ç”¨äº†å¤§é‡çš„å…¬å¼€æ•°æ®é›†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/20190829081637879.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=400px></center>\n\nåœ¨ç®—æ³•é€‰æ‹©ä¸Šä»¥PopRecä¸ºbaselineï¼ŒBPR-MFï¼ŒFMCï¼ŒFPMCï¼ŒPRMEï¼ŒHRMä½œä¸ºå¯¹æ¯”ç®—æ³•æ¨¡å‹ï¼Œåœ¨ä¸Šè¡¨ä¸­çš„æ•°æ®é›†ä¸Šå¯¹æ¯”å®éªŒå¦‚ä¸‹ï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/2019082908164614.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=400px></center>\n\nåœ¨è¿›è¡Œå®éªŒå¯»æ‰¾æœ€ä½³å‚æ•°æ—¶ï¼Œä½¿ç”¨çš„æ˜¯ç½‘æ ¼æœç´¢æ³•ï¼Œä½¿ç”¨éšæœºæç£ä¸Šå‡ä¼˜åŒ–æ¨¡å‹çš„å­¦ä¹ ç‡ä¸º0.05ï¼Œæ­£åˆ™é¡¹å‚æ•°çš„æµ‹è¯•èŒƒå›´æ˜¯ï¼š{0, 0.001, 0.01, 0.1, 1}ã€‚åœ¨TransRecä¸­å°è¯•äº†L2-ball å’Œ L2-sphereè®¡ç®—è·ç¦»ï¼ŒL2-ballçš„æ•ˆæœæ›´å¥½ä¸€äº›ã€‚\n\nåœ¨æœ€å¼€å§‹æˆ‘ä»¬æåˆ°æœ¬è®ºæ–‡ä¸»è¦æœ‰ä¸¤ç‚¹\nç”¨æˆ·çš„åºåˆ—æ¨èï¼ˆç”¨æˆ·åœ¨æµè§ˆäº†ä¸€äº›itemsä¹‹åç»™ä»–æ¨èç‰©å“jï¼‰\nç‰©å“åˆ°ç‰©å“çš„æ¨èï¼ˆç”¨æˆ·è´­ä¹°äº†ä¸€ä¸ªç‰›ä»”è£¤ï¼Œç»™ä»–æ¨èä¸€ä¸ªè¡¬è¡«ï¼‰\n\nåœ¨TransRecä¸­ï¼Œé€šè¿‡åˆ é™¤ä¸ªæ€§åŒ–å‘é‡éƒ¨åˆ†ï¼ŒTransRecå¯ä»¥ç›´æ¥è¿›è¡Œç‰©å“åˆ°ç‰©å“çš„æ¨èï¼Œè¿™å’ŒçŸ¥è¯†å›¾è°±ä¸­çš„æ¨èæœ‰ç‚¹ç›¸ä¼¼ï¼Œå› ä¸ºéœ€è¦å¯¹ä¸åŒé¡¹ä¹‹é—´çš„å…³ç³»è¿›è¡Œå»ºæ¨¡ã€‚å…¶ä¸­å®ç°çš„ç»“æœç±»ä¼¼äºä¸‹å›¾è¿™æ ·ã€‚\n<center><img src=\"https://img-blog.csdnimg.cn/20190829081659946.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=400px></center>\n\nåŒæ ·ä¹Ÿå¯¹è¯¥éƒ¨åˆ†è¿›è¡Œäº†å•ç‹¬çš„å®éªŒï¼Œé‡‡ç”¨çš„æ•°æ®é›†ï¼Œå¯¹æ¯”çš„ç®—æ³•å’Œå®éªŒçš„ç»“è®ºå¦‚ä¸‹ï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/20190829081707975.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=400px></center>\n\n----\n# æˆ‘çš„æ€»ç»“\n1. æ–‡ç« ä¸­ä»‹ç»äº†TransRecçš„ä¼˜åŠ¿\nï¼ˆ1ï¼‰åªç”¨ä¸€ä¸ªæ¨¡å‹æ¥æ¨¡æ‹Ÿç”¨æˆ·ï¼Œç‰©å“ä¹‹é—´çš„ä¸‰é˜¶äº¤äº’\nï¼ˆ2ï¼‰å¯ä»¥ä»éšå¼å‡è®¾åº¦é‡ä¸­è·ç›Š\nï¼ˆ3ï¼‰è½»æ˜“çš„è§£å†³æ•°æ®é‡å¤§çš„é—®é¢˜\n2. è®ºæ–‡ä¸­ä¸ä»…æå‡ºäº†ä½¿ç”¨ä¸€ä¸ªæ¨¡å‹æ¥å¯¹ç”¨æˆ·ç‰©å“ä¹‹é—´çš„ä¸‰é˜¶å…³ç³»è¿›è¡Œå»ºæ¨¡ï¼Œè¿˜å€Ÿé‰´çŸ¥è¯†å›¾è°±ä¸­çš„æ€æƒ³æå‡ºäº†ç‰©å“é“ç‰©å“ä¹‹é—´çš„æ¨èã€‚\n3. æ–‡ä¸­å®éªŒæ—¶å°†æ•°æ®é›†æ‹†åˆ†æˆäº†ä¸‰éƒ¨åˆ†ï¼Œè®­ç»ƒé›†ï¼ŒéªŒè¯é›†ï¼Œå’Œæµ‹è¯•é›†ã€‚å…¶æ¯”ä¾‹ä¸º8:1:1ã€‚\n4. æ•°æ®é›†æ‹†åˆ†æ—¶é¿å…äº†ä»æ•´ä½“æ•°æ®é›†ä¸­çš„éšæœºæ‹†åˆ†ï¼Œè€Œæ˜¯æŒ‰ç…§æ—¶é—´å…ˆåçš„é¡ºåºè¿›è¡Œæ‹†åˆ†ã€‚ä¿è¯äº†ä¸€å®šçš„æ—¶é—´è¿ç»­æ€§ï¼Œè¿™ä¸€ç‚¹å€¼å¾—å€Ÿé‰´ã€‚\n5. åœ¨å¯»æ‰¾æœ€ä½³å‚æ•°æ—¶ä½¿ç”¨çš„æ˜¯ç½‘æ ¼æœç´¢æ³•ã€‚\n6. ç”¨æˆ·çš„ç¿»è¯‘å‘é‡é‡‡ç”¨äº†å…¨å±€ç¿»è¯‘å‘é‡å’Œä¸ªæ€§åŒ–çš„ç¿»è¯‘å‘é‡ä¹‹å’Œã€‚ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†ç”¨æˆ·çš„å†·å¯åŠ¨ã€‚\n7. æ ·æœ¬åç½®é¡¹ï¼Œå‡å°ç‰©å“æœ¬èº«çƒ­åº¦å¯¹æ¨¡å‹çš„å½±å“ã€‚\n8. ä¸ºäº†é¿å…â€œç»´åº¦è¯…å’’â€é—®é¢˜ï¼Œå°†æ ·æœ¬é™å®šåœ¨æ•´ä½“æ ·æœ¬ç©ºé—´çš„ä¸€ä¸ªå­é›†ä¸Šã€‚\n9. åŸºäºTransRecçš„æ€è·¯ï¼Œä½œè€…åˆæå‡ºäº†å’ŒFMçš„ç»“åˆï¼Œå…¶è®ºæ–‡æ˜¯Translation-based Factorization Machines for Sequential Recommendationï¼Œæ¥ä¸‹æ¥ä¼šå¯¹å…¶è¿›è¡Œä»‹ç»ã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["è®ºæ–‡"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"Sparkæ’åºç®—æ³•ç³»åˆ—ä¹‹ALSæ¨¡å‹å®ç°","url":"/2019/08/13/RecSys/Sparkä¸æ¨èç³»ç»Ÿ/Sparkæ’åºç®—æ³•ç³»åˆ—ä¹‹ALSæ¨¡å‹å®ç°/","content":"\n> åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»äº†ALSç®—æ³•çš„åŸç†ï¼ˆ[ç‚¹å‡»é˜…è¯»](https://blog.csdn.net/Gamer_gyt/article/details/98897829)ï¼‰ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ä¸»è¦ä»‹ç»ä¸€ä¸‹ALSç®—æ³•åœ¨Sparkä¸­çš„å®ç°ã€‚\n\n<!--More-->\n\n### æ¦‚è¿°\nååŒè¿‡æ»¤(Collaborative Filtering)åœ¨æ¨èç³»ç»Ÿä¸­åº”ç”¨çš„éå¸¸å¹¿ï¼Œè¯¥ç®—æ³•çš„ç›®æ ‡æ˜¯å»å¡«å……ç”¨æˆ·-ç‰©å“è¯„åˆ†çŸ©é˜µä¸­çš„ç¼ºå¤±å€¼ï¼Œå³æœªè¯„åˆ†ã€‚è¯¥ç®—æ³•çš„Sparkçš„MLåŒ…å’ŒMLlibåŒ…ä¸­å‡æœ‰å®ç°ã€‚\n\nå…¶ä¸­æ¶‰åŠçš„å‚æ•°å¦‚ä¸‹ï¼š\n- numBlocksï¼šæ•°æ®åˆ†åŒºçš„æ•°ç›®ï¼Œé»˜è®¤ä¸º10\n- rankï¼šéšå‘é‡çš„é•¿åº¦ï¼Œé»˜è®¤æ˜¯10ï¼ˆm * n => m * k - k * nï¼‰\n- maxIterï¼šæœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œé»˜è®¤ä¸º10\n- regParamï¼šæ­£åˆ™åŒ–å‚æ•°ç³»æ•°ï¼Œé»˜è®¤ä¸º1.0\n- implicitPrefsï¼šæ§åˆ¶ä½¿ç”¨æ˜¾å¼åé¦ˆè¿˜æ˜¯éšå¼åé¦ˆï¼Œé»˜è®¤æ˜¯falseå³æ˜¾å¼åé¦ˆã€‚\n- alphaï¼šéšå¼åé¦ˆæ—¶çš„ç½®ä¿¡åº¦å‚æ•°ï¼Œé»˜è®¤ä¸º1.0\n- nonnegativeï¼šæ˜¯å¦å¯¹æœ€å°äºŒä¹˜ä½¿ç”¨éè´Ÿçº¦æŸï¼Œé»˜è®¤ä¸ºfalse\n\n### éšå¼åé¦ˆä¸æ˜¾å¼åé¦ˆ\nåŸºäºçŸ©é˜µåˆ†è§£çš„ååŒè¿‡æ»¤æ ‡å‡†æ–¹æ³•å°†ç”¨æˆ·-ç‰©å“çŸ©é˜µä¸­çš„rateè§†ä¸ºç”¨æˆ·å¯¹é¡¹ç›®ç»™å‡ºçš„æ˜¾å¼åå¥½ï¼Œä¾‹å¦‚ï¼šç”¨æˆ·å¯¹ç”µå½±è¿›è¡Œè¯„åˆ†ã€‚\n\nåœ¨è®¸å¤šå®é™…çš„ç”¨ä¾‹ä¸­ï¼Œé€šå¸¸åªèƒ½è·å–éšå¼åé¦ˆæ•°æ®ï¼ˆä¾‹å¦‚ï¼šè§‚çœ‹ï¼Œç‚¹å‡»ï¼Œè´­ä¹°ï¼Œå–œæ¬¢ï¼Œåˆ†äº«ç­‰ï¼‰ã€‚spark.mlä¸­ç”¨äºå¤„ç†æ­¤ç±»æ•°æ®çš„æ–¹æ³•å–è‡ªCollaborative Filtering for Implicit Feedback Datasetsã€‚æœ¬è´¨ä¸Šï¼Œè¿™ç§æ–¹æ³•ä¸æ˜¯è¯•å›¾ç›´æ¥å¯¹è¯„çº§çŸ©é˜µè¿›è¡Œå»ºæ¨¡ï¼Œè€Œæ˜¯å°†æ•°æ®è§†ä¸ºè¡¨ç¤ºç”¨æˆ·æ“ä½œè§‚å¯Ÿå¼ºåº¦çš„æ•°å­—ï¼ˆä¾‹å¦‚ç‚¹å‡»æ¬¡æ•°æˆ–æŸäººèŠ±åœ¨è§‚çœ‹ç”µå½±ä¸Šçš„ç´¯ç§¯æŒç»­æ—¶é—´ï¼‰ã€‚ç„¶åï¼Œè¿™äº›æ•°å­—ä¸è§‚å¯Ÿåˆ°çš„ç”¨æˆ·åå¥½çš„ç½®ä¿¡æ°´å¹³ç›¸å…³ï¼Œè€Œä¸æ˜¯ä¸é¡¹ç›®çš„æ˜ç¡®è¯„çº§ç›¸å…³ã€‚ç„¶åï¼Œè¯¥æ¨¡å‹è¯•å›¾æ‰¾åˆ°å¯ç”¨äºé¢„æµ‹ç”¨æˆ·å¯¹é¡¹ç›®çš„é¢„æœŸåå¥½çš„æ½œåœ¨å› ç´ ã€‚\n\n### æ­£åˆ™åŒ–å‚æ•°\né€šè¿‡ç”¨æˆ·-ç‰©å“çš„è¯„åˆ†çŸ©é˜µä¸­ç”¨æˆ·çš„è¯„åˆ†ç‰©å“æ•°å’Œç‰©å“æ”¶åˆ°çš„è¯„åˆ†ä¸ªæ•°æ¥ä½œä¸ºæ­£åˆ™é¡¹ï¼Œè§£å†³æœ€å°äºŒä¹˜æ›´æ–°è¿‡ç¨‹ä¸­çš„é—®é¢˜ã€‚ è¿™ç§æ–¹æ³•è¢«å‘½åä¸ºâ€œALS-WRâ€ï¼Œå¯ä»¥å‚è€ƒè®ºæ–‡ï¼š Collaborative Filtering for Implicit Feedback Datasetsã€‚å®ƒå‡å°æ¥regParamå¯¹æ•°æ®é›†è§„æ¨¡çš„ä¾èµ–ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†ä»é‡‡æ ·å­é›†ä¸­å­¦ä¹ çš„æœ€ä½³å‚æ•°åº”ç”¨äºå®Œæ•´æ•°æ®é›†ï¼Œå¹¶è·å¾—è¾ƒå¥½çš„ç»“æœã€‚\n\n\n### åº”ç”¨åœºæ™¯\n\nSpark ALSç®—æ³•æ”¯æŒè¾“å‡ºitem æˆ–è€…userçš„éšå‘é‡ï¼Œæ®æ­¤æˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºç”¨æˆ·æˆ–è€…ç‰©å“çš„ç›¸ä¼¼åº¦ï¼Œç»§è€Œè¿›è¡Œæ’åºå¾—åˆ°ç”¨æˆ·æˆ–è€…itemçš„top Nç›¸ä¼¼useræˆ–è€…itemã€‚è¿™æ ·åœ¨æ•°æ®è¿›è¡Œå¬å›æ—¶ä¾¿å¯ä»¥è¿›è¡Œå¬å›äº†ã€‚\n\næ¯”å¦‚æ ¹æ®ç”¨æˆ·ç”¨è¡Œä¸ºçš„ç‰©å“å¬å›ï¼Œå½“ç”¨æˆ·æµè§ˆäº†è‹¥å¹²äº†itemæ—¶ï¼Œä¾¿å°†è¿™äº›itemç›¸ä¼¼çš„itemåŠ å…¥åˆ°å¬å›æ± ä¸­ï¼Œè¿›è¡Œrankæ’åºã€‚\n\n### MLä¸­çš„ALSå®ç°\n\n```\nobject ALSML {\n\n    def main(args: Array[String]): Unit = {\n        val spark = SparkSession.builder().master(\"local[5]\").appName(\"ALSML\").enableHiveSupport().getOrCreate()\n        Logger.getRootLogger.setLevel(Level.WARN)\n\n        val input = \"data/sample_movielens_ratings.txt\"\n        val model_param = \"maxIters:10,rank:5,numBlocks:10,regParam:0.01,alpha:0.618,userCol:userId,itemCol:movieId,rateCol:rating,implicitPrefs:true\"\n        val output_model = \"model/als_ml\"\n        // è®­ç»ƒæ¨¡å‹ æ‰¾åˆ°åˆé€‚çš„å‚æ•°\n        runBasedML(spark,input,model_param,output_model)\n    }\n\n    def runBasedML(spark: SparkSession, input: String, param: String,output_model_path: String) = {\n        import spark.sqlContext.implicits._\n        val ratings = spark.read.textFile(input).map(parseRating).toDF()\n        val Array(training, test) = ratings.randomSplit(Array(0.8, 0.2))\n\n        println(\"åˆ›å»ºå¹¶è®­ç»ƒALSæ¨¡å‹ ...\")\n        val als = ALSMLUtil.createModel(param)\n        val model = als.fit(training)\n        println(\"æ¨¡å‹çš„æ•ˆæœè¯„ä¼° ...\")\n        ALSMLUtil.evaluateModel(model, test)\n\n        println(\"ä¸ºç”¨æˆ·è¿›è¡Œitemæ¨è ...\")\n        model.recommendForAllUsers(10).show(10)\n\n        println(\"ä¸ºæŒ‡å®šç”¨æˆ·è¿›è¡Œtop N itemæ¨è ...\")\n        val users = ratings.select(als.getUserCol).distinct().limit(3)\n        model.recommendForUserSubset(users,10).show(10)\n\n        println(\"ä¸ºitemè¿›è¡Œç”¨æˆ·æ¨è ...\")\n        model.recommendForAllItems(10).show(10)\n        println(\"ä¸ºæŒ‡å®šçš„itemè¿›è¡Œtop N ç”¨æˆ·æ¨è ...\")\n        val movies = ratings.select(als.getItemCol).distinct().limit(3)\n        model.recommendForItemSubset(movies, 10).show(10)\n\n        println(\"è¾“å‡ºéšå‘é‡ ...\")\n        model.itemFactors.rdd.map(f => (f.get(0), f.getList(1).toArray.mkString(\",\"))).take(10).foreach(println)\n\n        println(\"ä¿å­˜ä¸åŠ è½½æ¨¡å‹ ...\")\n        model.write.overwrite().save(output_model_path)\n        val newModel = ALSModel.load(output_model_path)\n        newModel.itemFactors.rdd.map(f => (f.get(0), f.getList(1).toArray.mkString(\",\"))).take(10).foreach(println)\n    }\n\n    def parseRating(str: String): Rating = {\n        val fields = str.split(\"::\")\n        assert(fields.size == 4)\n        Rating(fields(0).toInt, fields(1).toInt, fields(2).toFloat, fields(3).toLong)\n    }\n\n    case class Rating(userId: Int, movieId: Int, rating: Float, timestamp: Long)\n}\n```\n\n### MLlibä¸­çš„ALSå®ç°\n```\nobject ALSMLlib {\n\n    def main(args: Array[String]): Unit = {\n        val spark = SparkSession.builder().master(\"local[5]\").appName(\"ALS\").enableHiveSupport().getOrCreate()\n        Logger.getRootLogger.setLevel(Level.WARN)\n\n        val input = \"data/sample_movielens_ratings.txt\"\n        val model_param = \"maxIters:10,rank:5,numBlocks:10,regParam:0.01,alpha:0.618,implicitPrefs:true\"\n        val output_model_path = \"model/als_ml\"\n\n        run(spark, input, model_param, output_model_path)\n    }\n\n    def run(spark: SparkSession, input: String, model_param: String, output_model_path: String): Unit = {\n        println(\"åŠ è½½æ•°æ® ...\")\n        val ratings = spark.sparkContext.textFile(input)\n            .map(_.split(\"::\").slice(0,3) match { case Array(userId, movieId, rating)  =>\n                Rating(userId.toString.toInt, movieId.toString.toInt, rating.toString.toDouble)\n            })\n        println(\"è®­ç»ƒæ¨¡å‹ ...\")\n        val param = new ALSMLlibParam()\n        param.parseString(model_param)\n        val model = ALS.train(ratings,param.getRank, param.getMaxIters,param.getAlpha,param.getNumBlocks)\n\n        println(\"è¯„ä¼°æ¨¡å‹ ...\")\n        val usersProducts = ratings.map { case Rating(user, product, rate) => (user, product) }\n        val predictions = model.predict(usersProducts).map{ case Rating(user, product, rate) => ((user,product),rate)}\n        val rateAndPre = ratings.map { case Rating(user, product, rate) => ((user, product), rate) }.join(predictions)\n        val MSE = rateAndPre.map { case ((user, product), (r1, r2)) =>\n            val err = (r1 - r2)\n            err * err\n        }.mean()\n        println(\"Mean Squared Error = \" + MSE)\n\n\n        println(s\"ç”¨æˆ·ï¼ˆ2ï¼‰å¯¹ ç‰©å“ï¼ˆ2ï¼‰çš„é¢„æµ‹è¯„åˆ†ä¸ºï¼š${model.predict(2,2)}\")\n        println(\"ç”¨æˆ·çº¬åº¦çš„ç‰¹å¾å‘é‡ä¸ºï¼š\")\n        model.userFeatures.map(f => (f._1,f._2.mkString(\",\"))).take(10).foreach(println)\n        println(\"ç‰©å“çº¬åº¦çš„ç‰¹å¾å‘é‡ä¸ºï¼š\")\n        model.productFeatures.map(f => (f._1,f._2.mkString(\",\"))).take(10).foreach(println)\n    }\n}\n```\n\n\n\n### é—®é¢˜\n```\norg.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:1821)\n\tat org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:1810)\n\tat org.apache.spark.util.EventLoop$$anon$1.run(EventLoop.scala:48)\n\tat org.apache.spark.scheduler.DAGScheduler.runJob(DAGScheduler.scala:642)\n\tat org.apache.spark.SparkContext.runJob(SparkContext.scala:2034)\n\tat org.apache.spark.SparkContext.runJob(SparkContext.scala:2055)\n\tat org.apache.spark.SparkContext.runJob(SparkContext.scala:2074)\n\tat org.apache.spark.rdd.RDD$$anonfun$take$1.apply(RDD.scala:1364)\n\tat org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:151)\n\tat org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:112)\n\tat org.apache.spark.rdd.RDD.withScope(RDD.scala:363)\n\tat org.apache.spark.rdd.RDD.take(RDD.scala:1337)\n\tat com.kk.recommend.tools.model.ALSBasedMLUtil$.evaluateModel(ALSBasedMLUtil.scala:51)\n\tat com.kk.recommend.topic.follow.ItemCFV2$.testBasedML(ItemCFV2.scala:104)\n\tat com.kk.recommend.topic.follow.ItemCFV2$.main(ItemCFV2.scala:40)\n\tat com.kk.recommend.topic.follow.ItemCFV2.main(ItemCFV2.scala)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.apache.spark.deploy.yarn.ApplicationMaster$$anon$2.run(ApplicationMaster.scala:688)\nCaused by: java.lang.ArrayStoreException: org.apache.spark.sql.catalyst.expressions.GenericRowWithSchema\n\tat scala.runtime.ScalaRunTime$.array_update(ScalaRunTime.scala:90)\n\tat scala.collection.IndexedSeqOptimized$class.copyToArray(IndexedSeqOptimized.scala:180)\n\tat scala.collection.mutable.WrappedArray.copyToArray(WrappedArray.scala:35)\n\tat scala.collection.TraversableOnce$class.copyToArray(TraversableOnce.scala:278)\n\tat scala.collection.AbstractTraversable.copyToArray(Traversable.scala:104)\n\tat scala.collection.TraversableOnce$class.toArray(TraversableOnce.scala:286)\n\tat scala.collection.mutable.WrappedArray.toArray(WrappedArray.scala:73)\n\tat com.kk.recommend.tools.model.ALSBasedMLUtil$$anonfun$2.apply(ALSBasedMLUtil.scala:48)\n\tat com.kk.recommend.tools.model.ALSBasedMLUtil$$anonfun$2.apply(ALSBasedMLUtil.scala:46)\n\tat scala.collection.Iterator$$anon$12.nextCur(Iterator.scala:434)\n\tat scala.collection.Iterator$$anon$12.hasNext(Iterator.scala:440)\n\tat scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:389)\n\tat scala.collection.Iterator$class.foreach(Iterator.scala:893)\n\tat scala.collection.AbstractIterator.foreach(Iterator.scala:1336)\n\tat scala.collection.generic.Growable$class.$plus$plus$eq(Growable.scala:59)\n\tat scala.collection.mutable.ArrayBuffer.$plus$plus$eq(ArrayBuffer.scala:104)\n\tat scala.collection.mutable.ArrayBuffer.$plus$plus$eq(ArrayBuffer.scala:48)\n\tat scala.collection.TraversableOnce$class.to(TraversableOnce.scala:310)\n\tat scala.collection.AbstractIterator.to(Iterator.scala:1336)\n\tat scala.collection.TraversableOnce$class.toBuffer(TraversableOnce.scala:302)\n\tat scala.collection.AbstractIterator.toBuffer(Iterator.scala:1336)\n\tat scala.collection.TraversableOnce$class.toArray(TraversableOnce.scala:289)\n\tat scala.collection.AbstractIterator.toArray(Iterator.scala:1336)\n\tat org.apache.spark.rdd.RDD$$anonfun$take$1$$anonfun$28.apply(RDD.scala:1364)\n\tat org.apache.spark.rdd.RDD$$anonfun$take$1$$anonfun$28.apply(RDD.scala:1364)\n\tat org.apache.spark.SparkContext$$anonfun$runJob$5.apply(SparkContext.scala:2074)\n\tat org.apache.spark.SparkContext$$anonfun$runJob$5.apply(SparkContext.scala:2074)\n\tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:87)\n\tat org.apache.spark.scheduler.Task.run(Task.scala:109)\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:381)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat java.lang.Thread.run(Thread.java:748)\n```\n\nç»“å±€åŠæ³•ï¼š\n\nè§£å†³åŠæ³•ï¼š[ç‚¹å‡»é˜…è¯»](https://stackoverflow.com/questions/32727518/genericrowwithschema-exception-in-casting-arraybuffer-to-hashset-in-dataframe-to)\n\næ‰“å°çš„Schemaä¿¡æ¯ï¼š\n```\nroot\n |-- userId: integer (nullable = false)\n |-- recommendations: array (nullable = true)\n |    |-- element: struct (containsNull = true)\n |    |    |-- topicId: integer (nullable = true)\n |    |    |-- rating: float (nullable = true)\n```\n\n> åœ¨row ä¸­çš„è¿™äº›åˆ—å–å¾—æ—¶å€™ï¼Œè¦æ ¹æ®ç±»å‹å–ï¼Œç®€å•çš„åƒStringï¼ŒSeq[Double] è¿™ç§ç±»å‹å°±å¯ä»¥ç›´æ¥å–å‡ºæ¥ï¼Œä½†æ˜¯åƒ Seq[(Double,Double)] è¿™ç§ç±»å‹ç›´æ¥å–å¾—èŠ±å°±ä¼šä¸¢å¤±schemaä¿¡æ¯ï¼Œè™½ç„¶å€¼èƒ½å–åˆ°ï¼Œä½†æ˜¯schemaä¿¡æ¯ä¸¢äº†ï¼Œåœ¨dataFrameä¸­æ“ä½œçš„æ—¶å€™å°±ä¼šæŠ›é”™\n\nALSæµ‹è¯•ç»“æœæ•°æ®çš„æ ¼å¼å¦‚ä¸‹ï¼š\n\n|userId|     recommendations|\n------|----------------------\n  148 |  [[1972, 0.0334868...\n\n\nåŸå§‹çš„å†™æ³•æ˜¯ï¼š\n\n```\nresult.select(\"userId\", \"recommendations\")\n        .filter(row => !(row.isNullAt(0) || row.isNullAt(1)))\n        .rdd.flatMap( l=>{\n            val uid = l.get(0).toString\n            val itemList = l.getAs[mutable.WrappedArray[(Int,Double)]](\"recommendations\")\n            for(item<- itemList) yield (uid, item._1.toString)\n        })\n    \n```\nä¿®æ”¹åä¸ºï¼š\n```\nresult.select(\"userId\", \"recommendations\")\n        .filter(row => !(row.isNullAt(0) || row.isNullAt(1)))\n        .rdd.flatMap( l=>{\n            val uid = l.get(0).toString\n            val itemList= l.getAs[Seq[Row]](1).map(x=>{(x.getInt(0),x.getFloat(1))})\n            for(item<- itemList) yield (uid, item._1.toString)\n            })\n```\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["Sparkä¸æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"åŸºäºååŒçš„ALSç®—æ³•åŸç†ä»‹ç»ä¸å®ç°","url":"/2019/08/08/RecSys/Sparkä¸æ¨èç³»ç»Ÿ/åŸºäºååŒçš„ALSç®—æ³•åŸç†ä»‹ç»ä¸å®ç°/","content":"> ALSä¹Ÿæ˜¯ä¸€ç§ååŒç®—æ³•ï¼Œå…¶å…¨ç§°æ˜¯äº¤æ›¿æœ€å°äºŒä¹˜æ³•ï¼ˆAlternating Least Squaresï¼‰ï¼Œç”±äºç®€å•é«˜æ•ˆï¼Œå·²è¢«å¹¿æ³›åº”ç”¨åœ¨æ¨èåœºæ™¯ä¸­ï¼Œç›®å‰å·²ç»è¢«é›†æˆåˆ°Spark MLlibå’ŒMLåº“ä¸­ï¼Œåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¼šå¯¹å…¶ä½¿ç”¨æ–¹å¼è¿›è¡Œè¯¦ç»†ä»‹ç»ï¼Œæœ¬ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»ALSçš„åº•å±‚ç®—æ³•åŸç†ã€‚\n\n<!--More-->\n\n### æœ€å°äºŒä¹˜æ³•ï¼ˆLeast Squaresï¼‰\nåœ¨ä»‹ç»ALSç®—æ³•ä¹‹å‰ï¼Œå…ˆæ¥äº†è§£LSï¼Œå³æœ€å°äºŒä¹˜æ³•ã€‚LSç®—æ³•æ˜¯ALSçš„åŸºç¡€ï¼Œæ˜¯ä¸€ç§æ•°å­¦ä¼˜åŒ–æŠ€æœ¯ï¼Œä¹Ÿæ˜¯ä¸€ç§å¸¸ç”¨çš„æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œä»–é€šè¿‡æœ€å°åŒ–è¯¯å·®å¹³æ–¹å’Œå¯»æ‰¾æ•°æ®çš„æœ€ä½³åŒ¹é…ï¼Œåˆ©ç”¨æœ€å°äºŒä¹˜æ³•å¯»æ‰¾æœ€ä¼˜çš„æœªçŸ¥æ•°æ®ï¼Œä¿è¯æ±‚çš„æ•°æ®ä¸å·²çŸ¥çš„æ•°æ®è¯¯å·®æœ€å°ã€‚\n\nLSä¹Ÿè¢«ç”¨äºæ‹Ÿåˆæ›²çº¿ï¼Œæ¯”å¦‚æ‰€ç†Ÿæ‚‰çš„çº¿æ€§æ¨¡å‹ã€‚ä¸‹é¢ä»¥ç®€å•çš„çº¿æ€§ä¸€å…ƒçº¿æ€§å›å½’æ¨¡å‹è¯´æ˜æœ€å°äºŒä¹˜æ³•ã€‚\nå‡è®¾æˆ‘ä»¬æœ‰ä¸€ç»„æ•°æ®{(x1,y1),(x2,y2),(x3,y3)...}å…¶ç¬¦åˆçº¿æ€§å›å½’ï¼Œå‡è®¾å…¶ç¬¦åˆçš„å‡½æ•°ä¸ºå¦‚ä¸‹ï¼š\n$$\ny = w_0 + w_1 x\n$$\næˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå¹³æ–¹å·®å‡½æ•°æ¥è¡¨è¾¾å‚æ•°çš„å¥½åï¼Œå¹³æ–¹å·®å‡½æ•°å¦‚ä¸‹ï¼š\n$$\nL_n = (y_n - f(x;w_0,w_1))^2\n$$\nå…¶ä¸­f(.) è¡¨ç¤ºæˆ‘ä»¬å‡è®¾çš„çº¿æ€§å›å½’å‡½æ•°ã€‚æ˜¾ç„¶Lnè¶Šå°è¶Šå¥½ï¼ŒLnè¶Šå°è¡¨ç¤ºè¯¯å·®è¶Šå°ã€‚å‡è®¾æœ‰Nä¸ªæ ·æœ¬ï¼Œåˆ™Nä¸ªæ ·æœ¬çš„å¹³å‡å¹³æ–¹å·®ä¸ºï¼š\n$$\nL = \\frac{1}{N} \\sum_{n=1}^{N} (y_n - f(x;w_0,w_1))^2\n$$\nLè¶Šå°è¡¨ç¤ºå‚æ•°wè¶Šç²¾ç¡®ï¼Œè€Œè¿™é‡Œæœ€å…³é”®çš„å°±æ˜¯å¯»æ‰¾åˆ°æœ€åˆé€‚çš„w0å’Œw1ï¼Œåˆ™æ­¤æ—¶çš„æ•°å­¦è¡¨è¾¾å¼ä¸ºï¼š\n$$\n\\underset{w_0,w_1}{arg \\ min}  \\frac{1}{N} \\sum_{n=1}^{N} (y_n - f(x;w_0,w_1))^2\n$$\nå°†å…ˆè¡Œå›å½’å‡½æ•°ä»£å…¥åˆ°æœ€å°äºŒä¹˜æŸå¤±å‡½æ•°ä¸­ï¼Œå¾—åˆ°çš„ç»“æœä¸ºï¼š\n$$\nL = \\frac{1}{N} \\sum_{n=1}^{N} (y_n - w_0 - w_1 x_n)^2\n\\\\\n\\frac{1}{N} \\sum_{n=1}^{N} (w_1 ^2x_n^2 + 2w_1x_n(w_0 - y_n) + w_0^2 - 2w_0y_n + y_n^2)\n$$\nLå‡½æ•°å–å¾—æœ€å°å€¼æ—¶ï¼Œw0å’Œw1çš„ä¸€é˜¶åå¯¼æ•°ä¸€å®šæ˜¯0ï¼ˆå› ä¸ºè¯¯å·®å¹³æ–¹å’Œæ˜¯ä¸€ä¸ªå¤§äºç­‰äº0çš„æ•°ï¼Œæ˜¯æ²¡æœ‰æœ€å¤§å€¼çš„ï¼Œæ‰€ä»¥å–å¾—æœ€å°å€¼æ—¶ï¼Œä¸€é˜¶åå¯¼æ•°ä¸€å®šä¸º0ï¼‰ã€‚å› ä¸ºå¯¹Lå‡½æ•°åˆ†åˆ«æ±‚åå¯¼ï¼Œä½¿å…¶ç­‰äº0ï¼Œå¹¶å¯¹w0å’Œw1æ±‚è§£ï¼Œå³å¯ã€‚\n\n### äº¤æ›¿æœ€å°äºŒä¹˜æ³•ï¼ˆAlternating Least Squaresï¼‰\nALSç®—æ³•æœ¬è´¨ä¸Šæ˜¯åŸºäºç‰©å“çš„ååŒï¼Œè¿‘å¹´æ¥ï¼ŒåŸºäºæ¨¡å‹çš„æ¨èç®—æ³•ALS(äº¤æ›¿æœ€å°äºŒä¹˜)åœ¨NetflixæˆåŠŸåº”ç”¨å¹¶å–å¾—æ˜¾è‘—æ•ˆæœæå‡ï¼ŒALSä½¿ç”¨æœºå™¨å­¦ä¹ ç®—æ³•å»ºç«‹ç”¨æˆ·å’Œç‰©å“é—´çš„ç›¸äº’ä½œç”¨æ¨¡å‹ï¼Œè¿›è€Œå»é¢„æµ‹æ–°é¡¹ã€‚\n\n#### åŸºæœ¬åŸç†\nç”¨æˆ·å¯¹ç‰©å“çš„æ‰“åˆ†è¡Œä¸ºå¯ä»¥ç”¨ä¸€ä¸ªçŸ©é˜µï¼ˆRï¼‰æ¥è¡¨ç¤ºï¼š\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20190808233244547.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\nçŸ©é˜µä¸­çš„æ‰“åˆ†å€¼ r_ijè¡¨ç¤ºç”¨æˆ· u_i å¯¹ç‰©å“ v_j çš„æ‰“åˆ†ï¼Œå…¶ä¸­â€?â€è¡¨ç¤ºç”¨æˆ·æ²¡æœ‰æ‰“åˆ†ï¼Œè¿™ä¹Ÿå°±æ˜¯è¦é€šè¿‡æœºå™¨å­¦ä¹ çš„æ–¹æ³•å»é¢„æµ‹è¿™ä¸ªæ‰“åˆ†å€¼ï¼Œä»è€Œè¾¾åˆ°æ¨èçš„ç›®çš„ã€‚\n\n#### æ¨¡å‹æŠ½è±¡\næ ¹ç»ååŒè¿‡æ»¤çš„æ€æƒ³ï¼ŒRçŸ©é˜µçš„è¡Œå‘é‡å¯¹åº”æ¯ä¸ªç”¨æˆ·Uï¼Œåˆ—å‘é‡å¯¹åº”æ¯ä¸ªç‰©å“Vã€‚ALSçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šå°†ç”¨æˆ·å’Œç‰©å“éƒ½æŠ•å°„åˆ°kç»´ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯è¯´å‡è®¾æœ‰kä¸ªéšå‘é‡ç‰¹å¾ï¼Œè‡³äºè¿™ä¸ªkä¸ªéšå‘é‡æ˜¯ä»€ä¹ˆä¸ç”¨å…³ç³»ï¼ˆå¯èƒ½æ˜¯æ ‡ç­¾ï¼Œå¹´é¾„ï¼Œæ€§åˆ«ç­‰ï¼‰ï¼Œå°†æ¯ä¸ªç”¨æˆ·å’Œæ¯ä¸ªç‰©å“éƒ½ç”¨kç»´çš„å‘é‡æ¥è¡¨ç¤ºï¼ŒæŠŠä»–ä»¬çš„å†…ç§¯è¿‘ä¼¼ä¸ºæ‰“åˆ†å€¼ï¼Œè¿™æ ·ä¾¿å¯ä»¥å¾—åˆ°è¿‘ä¼¼çš„è¯„åˆ†ã€‚\n$$\nR \\approx UV^T\n$$\nå…¶ä¸­ï¼š\n- Rä¸ºæ‰“åˆ†çŸ©é˜µï¼ˆm*nï¼Œmè¡¨ç¤ºç”¨æˆ·ä¸ªæ•°ï¼Œnè¡¨ç¤ºç‰©å“ä¸ªæ•°ï¼‰\n- Uè¡¨ç¤ºç”¨æˆ·å¯¹éšå«ç‰¹å¾çš„åå¥½çŸ©é˜µï¼ˆm*kï¼‰\n- Vè¡¨ç¤ºç‰©å“å¯¹éšå«ç‰¹å¾çš„å½’å±çŸ©é˜µï¼ˆn*Kï¼‰\n\nä¸Šè¿°æ¨¡å‹çš„å‚æ•°å°±æ˜¯Uå’ŒVï¼Œæ±‚å¾—Uå’ŒVä¹‹åï¼Œå°±å¯ä»¥è¿‘ä¼¼çš„å¾—åˆ°ç”¨æˆ·å¯¹æœªè¯„åˆ†ç‰©å“çš„è¯„åˆ†ã€‚\n\n#### ä»£ä»·å‡½æ•°\næ±‚ä¸Šè¿°å…¬å¼ä¸­çš„Uå’ŒVï¼Œå°±éœ€è¦ä¸€ä¸ªä»£ä»·å‡½æ•°æ¥è¡¡é‡å‚æ•°çš„æ‹Ÿåˆç¨‹åº¦ã€‚ç”¨æˆ·å¯¹ç‰©å“çš„è¡Œä¸ºåˆ†ä¸ºæ˜¾å¼è¡Œä¸ºå’Œéšå¼è¡Œä¸ºï¼Œä¸¤ç§ä¸åŒç±»å‹çš„è¡Œä¸ºä¸‹ï¼Œå¯¹åº”çš„ä»£ä»·å‡½æ•°ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚\n> å…³äºæ˜¾å¼è¡Œä¸ºå’Œéšå¼è¡Œä¸ºçš„ä»‹ç»å¯ä»¥é¤è€ƒ æˆ‘çš„ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ä¸€ä¹¦ã€‚\n\n**æ˜¾å¼åé¦ˆä»£ä»·å‡½æ•°**\nå¦‚æœç”¨æˆ·å¯¹ç‰©å“æœ‰æ˜ç¡®çš„è¯„åˆ†è¡Œä¸ºï¼Œé‚£ä¹ˆå¯ä»¥å¯¹æ¯”é‡æ„å‡ºæ¥çš„è¯„åˆ†çŸ©é˜µå’Œå®é™…çš„è¯„åˆ†çŸ©é˜µï¼Œä¾¿å¯å¾—åˆ°è¯¯å·®ã€‚ç”±äºç”¨æˆ·å¯¹ç‰©å“çš„è¯„åˆ†å´å¤±å¾ˆå¤šï¼Œä»…ä»¥æœ‰è¯„åˆ†è¡Œä¸ºçš„ç‰©å“å»è®¡ç®—è¯¯å·®ã€‚ä¸‹é¢æ˜¯æ˜¾å¼åé¦ˆçš„ä»£ä»·å‡½æ•°ã€‚\n$$\nJ(U,V) = \\sum_{i}^{m} \\sum_{j}^{n}[(r_{ij} - u_iv_j^T) ^2 + \\lambda ( ||u_i||^2 + ||v_j||^2 ) ]\n$$\nå…¶ä¸­ï¼šÎ» ä¸ºæ­£åˆ™é¡¹ç³»æ•°\n#### éšå¼åé¦ˆä»£ä»·å‡½æ•°\n***éšå¼åé¦ˆå¯¹åº”çš„ALSç®—æ³•å³ï¼šALS-WRï¼ˆAlternating Least Squares With Weighted-Î» -regularizationï¼‰***\n\nå¾ˆå¤šæƒ…å†µä¸‹ï¼Œç”¨æˆ·å¹¶æ²¡æœ‰æ˜ç¡®åé¦ˆå¯¹ç‰©å“çš„åå¥½ï¼Œéœ€è¦é€šè¿‡ç”¨æˆ·çš„ç›¸å…³è¡Œä¸ºå»æ¨æµ‹å…¶å¯¹ç‰©å“çš„åå¥½ï¼Œæ¯”å¦‚åœ¨ç”µå•†ç½‘ç«™ä¸­ï¼Œç”¨æˆ·æ˜¯å¦ç‚¹å‡»ç‰©å“ï¼Œç‚¹å‡»çš„è¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šè¡¨ç¤ºå–œæ¬¢ï¼Œæœªç‚¹å‡»çš„è¯å¯èƒ½æ˜¯ä¸å–œæ¬¢ï¼Œä¹Ÿå¯èƒ½æ˜¯æ²¡æœ‰çœ‹åˆ°è¯¥ç‰©å“ã€‚è¿™ç§å½¢å¼ä¸‹çš„åé¦ˆå°±è¢«ç§°ä¸ºéšå¼åé¦ˆã€‚å³çŸ©é˜µRä¸ºéšå¼åé¦ˆçŸ©é˜µï¼Œå¼•å…¥å˜é‡p_ijè¡¨ç¤ºç”¨æˆ·u_iå¯¹ç‰©å“v_jçš„ç½®ä¿¡åº¦ï¼Œå¦‚æœéšå¼åé¦ˆå¤§äº0ï¼Œç½®ä¿¡åº¦ä¸ºï¼Œåä¹‹ç½®ä¿¡åº¦ä¸º0ã€‚\n$$\np_{ij} = \\left\\{\\begin{matrix}\n1  & r_{ij} >0 \\\\ \n0 & r_{ij} =0\n\\end{matrix}\\right.\n$$\nä¸Šæ–‡ä¹Ÿæåˆ°äº†ï¼Œéšå¼åé¦ˆä¸º0ï¼Œä¸ä»£è¡¨ç”¨æˆ·å®Œå…¨ä¸å–œæ¬¢ï¼Œä¹Ÿå¯èƒ½æ˜¯ç”¨æˆ·æ²¡æœ‰çœ‹åˆ°è¯¥ç‰©å“ã€‚å¦å¤–ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªç‰©å“ï¼Œä¹Ÿä¸ä»£è¡¨æ˜¯å–œæ¬¢ä»–ï¼Œå¯èƒ½æ˜¯è¯¯ç‚¹ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªä¿¡ä»»ç­‰çº§æ¥æ˜¾ç¤ºç”¨æˆ·å–œæ¬¢æŸä¸ªç‰©å“ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œr_ijè¶Šå¤§(ç”¨æˆ·è¡Œä¸ºçš„æ¬¡æ•°)ï¼Œè¶Šèƒ½æš—ç¤ºç”¨æˆ·å–œæ¬¢æŸä¸ªç‰©å“ï¼Œå› æ­¤å¼•å…¥å˜é‡c_ijï¼Œæ¥è¡¡é‡p_ijçš„ä¿¡ä»»åº¦ã€‚\n$$\nc_{ij} = 1 + \\alpha r_{ij}\n$$\nÎ± ä¸ºç½®ä¿¡åº¦ç³»æ•°ï¼Œé‚£ä¹ˆä»£ä»·å‡½æ•°å˜ä¸ºå¦‚ä¸‹å½¢å¼ï¼š\n$$\nJ(U,V) = \\sum_{i}^{m} \\sum_{j}^{n}[c_{ij}(p_{ij} - u_iv_j^T) ^2 + \\lambda ( ||u_i||^2 + ||v_j||^2 ) ]\n$$\n#### ç®—æ³•æ±‚è§£\næ— è®ºæ˜¯éšå¼ä»£ä»·å‡½æ•°æ±‚è§£è¿˜æ˜¯æ˜¾å¼ä»£ä»·å‡½æ•°æ±‚è§£ï¼Œä»–ä»¬éƒ½æ˜¯å‡¸å‡½æ•°ï¼Œè€Œä¸”å˜é‡è€¦åˆåœ¨ä¸€èµ·ï¼Œå¸¸è§„çš„æ¢¯åº¦ä¸‹é™ç®—æ³•ä¸èƒ½æ±‚è§£ã€‚ä½†æ˜¯å…ˆå›ºå®šUæ±‚Vï¼Œå†å›ºå®šVæ±‚Uï¼Œå¦‚æ­¤è¿­ä»£ä¸‹å»ï¼Œé—®é¢˜å°±å¯ä»¥è§£å†³äº†ã€‚\n$$\nU^0 \\rightarrow V^1 \\rightarrow U^1 \\rightarrow V^2 \\rightarrow U^2 ....\n$$\nå›ºå®šä¸€ä¸ªå˜é‡ï¼Œæ±‚å¦å¤–ä¸€ä¸ªå˜é‡ï¼Œç”¨ä»€ä¹ˆæ–¹æ³•æ±‚è§£å‘¢ï¼Ÿæ¢¯åº¦ä¸‹é™ï¼Ÿå¯ä»¥ï¼Œä½†æ˜¯æ¯”è¾ƒéº»çƒ¦ã€‚è¿™å…¶å®æ˜¯ä¸€ä¸ªæœ€å°äºŒä¹˜çš„é—®é¢˜ï¼Œç”±äºä¸€èˆ¬éšå«çš„ç‰¹å¾kä¸ä¼šå¤ªå¤§ï¼Œå¯ä»¥ç›´æ¥å½“åšæ˜¯æ­£è§„æ–¹ç¨‹å»è§£å†³ã€‚å¦‚æ­¤çš„äº¤æ›¿çš„ä½¿ç”¨æœ€å°äºŒä¹˜å»æ±‚è§£ï¼Œæ‰€ä»¥åå­—å°±å«åšäº¤æ›¿æœ€å°äºŒä¹˜æ³•ã€‚\n\n**æ˜¾æ°åé¦ˆæ±‚è§£**\nå›ºå®šVæ±‚è§£Uï¼Œå¯¹å…¬å¼è¿›è¡Œæ±‚å¯¼åŒ–ç®€ï¼Œå¯å¾—ï¼š\n$$\nU ^T = \\left( V^T V + \\lambda I \\right)^{-1} V^T R^T\n$$\nåŒç†ï¼Œå›ºå®šUæ±‚è§£Vï¼Œå¯¹å…¬å¼è¿›è¡Œæ±‚å¯¼åŒ–ç®€ï¼Œå¯å¾—ï¼š\n$$\nV ^T = \\left( U^T U + \\lambda I \\right)^{-1} U^T R\n$$\n**éšå¼åé¦ˆæ±‚è§£**\nå›ºå®šVæ±‚è§£Uï¼Œå¯¹å…¬å¼è¿›è¡Œæ±‚å¯¼åŒ–ç®€ï¼Œå¯å¾—ï¼š\n$$\nU ^T = \\left( V^T C_v V + \\lambda I \\right)^{-1} V^T C_v R^T\n$$\nåŒç†ï¼Œå›ºå®šUæ±‚è§£Vï¼Œå¯¹å…¬å¼è¿›è¡Œæ±‚å¯¼åŒ–ç®€ï¼Œå¯å¾—ï¼š\n$$\nV ^T = \\left( U^T C_u U + \\lambda I \\right)^{-1} U^T C_u R\n$$\n\n---\n### é¢è¯•ç‚¹\n1. æœ€å°äºŒä¹˜æ³•è‹±æ–‡åå­—æ˜¯ä»€ä¹ˆï¼Ÿè§£é‡ŠåŠå…¶å¯¹åº”çš„æ•°å­¦åŸç†\n```\nLeast Squares\nå‚è€ƒä¸Šæ–‡\n```\n2. ALSå…¨ç§°æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆå«äº¤æ›¿æœ€å°äºŒä¹˜æ³•ï¼Ÿ\n```\nAlternaing Least Squares\nå‚è€ƒä¸Šæ–‡\n```\n3. éšå¼åé¦ˆå’Œæ˜¾æ°åé¦ˆçš„åŒºåˆ«ï¼Ÿä¸¤ç§å½¢å¼ä¸‹ALSçš„ä»£ä»·å‡½æ•°\n```\nã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ä¸­æœ‰å¯¹å…¶çš„ä»‹ç»\n ä¸¤ç§å½¢å¼ä¸‹çš„ä»£ä»·å‡½æ•°å‚è€ƒä¸Šæ–‡\n```\n4. ä»£ä»·å‡½æ•°ä¸­çš„æ­£åˆ™é¡¹åŠå…¶å«ä¹‰ï¼Ÿ\n```\nå‚è€ƒä¸Šæ–‡\n```\n5. è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆçš„å«ä¹‰ï¼Ÿåœ¨ALSä¸­ä»€ä¹ˆæƒ…å†µä¼šå‡ºç°è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆï¼Ÿå¯¹åº”çš„è§£å†³åŠæ³•ï¼Ÿ\n```\næ¬ æ‹Ÿåˆå®šä¹‰ï¼šæ‹Ÿåˆçš„å‡½æ•°ä¸è®­ç»ƒé›†è¯¯å·®è¾ƒå¤§ï¼Œ\nè¿‡æ‹Ÿåˆå®šä¹‰ï¼šæ‹Ÿåˆçš„å‡½æ•°ä¸è®­ç»ƒé›†å®Œç¾åŒ¹é…ï¼ˆè¯¯å·®å¾ˆå°ï¼‰\nåˆé€‚æ‹Ÿåˆå®šä¹‰ï¼šæ‹Ÿåˆçš„å‡½æ•°ä¸è®­ç»ƒé›†è¯¯å·®è¾ƒå°\n\næ¬ æ‹Ÿåˆå‡ºç°åŸå› ï¼šæ•°æ®è§„æ¨¡å¤ªå°ï¼Œç‰¹å¾å¤ªå¤šï¼Œæ­£åˆ™åŒ–é¡¹ç³»æ•°è¾ƒå°\nè¿‡æ‹Ÿåˆå‡ºç°åŸå› ï¼šæ•°æ®ç‰¹å¾å¤ªå°‘ï¼Œæ­£åˆ™åŒ–é¡¹ç³»æ•°è¾ƒå¤§\n\næ¬ æ‹Ÿåˆè§£å†³åŠæ³•ï¼šå¢å¤§æ•°æ®è§„æ¨¡ã€å‡å°æ•°æ®ç‰¹å¾æ•°ï¼ˆç»´æ•°ï¼‰ã€å¢å¤§æ­£åˆ™åŒ–ç³»æ•°Î»\nè¿‡æ‹Ÿåˆè§£å†³åŠæ³•ï¼šå¢å¤šæ•°æ®ç‰¹å¾æ•°ã€æ·»åŠ é«˜æ¬¡å¤šé¡¹å¼ç‰¹å¾ã€å‡å°æ­£åˆ™åŒ–ç³»æ•°Î»\n```\n6. Sparkå®ç°ALSå¯è°ƒèŠ‚çš„å‚æ•°æœ‰å“ªäº›ï¼Ÿåˆ†åˆ«è¡¨ç¤ºä»€ä¹ˆå«ä¹‰ï¼Ÿ\n```\nmaxIters // æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œé»˜è®¤10 \nrank // éšå‘é‡çš„é•¿åº¦ï¼Œé»˜è®¤æ˜¯10ï¼Œä¸€èˆ¬è¿œå°äºmï¼Œn\nnumBlocks // æ•°æ®åˆ†åŒºçš„ä¸ªæ•°ï¼Œé»˜è®¤æ˜¯10\nregParam // ALSä¸­çš„æ­£åˆ™åŒ–å‚æ•°ï¼Œé»˜è®¤æ˜¯1.0\nalpha // ALSéšæ°åé¦ˆå˜é‡çš„å‚æ•°ï¼Œç½®ä¿¡åº¦ç³»æ•°ï¼Œé»˜è®¤æ˜¯1.0\nuserCol // ç”¨æˆ·åˆ—å\nitemCol // itemåˆ—å\nrateCol // è¯„åˆ†åˆ—å\nimplicitPrefs // æ˜¾æ°åé¦ˆ è¿˜æ˜¯ éšæ°åé¦ˆï¼Œé»˜è®¤falseï¼Œæ„å‘³æ˜¾æ°åé¦ˆ\n```\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["Sparkä¸æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€æŠ€æœ¯åˆ†äº«ã€‘2019å…¨çƒäººå·¥æ™ºèƒ½æŠ€æœ¯å³°ä¼šPDFèµ„æ–™æ‹¿èµ°ä¸è°¢","url":"/2019/08/08/Share/ã€æŠ€æœ¯åˆ†äº«ã€‘2019å…¨çƒäººå·¥æ™ºèƒ½æŠ€æœ¯å³°ä¼šPDFèµ„æ–™æ‹¿èµ°ä¸è°¢/","content":"\n> 2019 å…¨çƒäººå·¥æ™ºèƒ½æŠ€æœ¯å³°ä¼šPDFèµ„æ–™å…è´¹åˆ†äº«ï¼Œèµ„æ–™å†…å®¹æ¶µç›–å„ä¸ªæ–¹é¢ï¼Œå…¨éƒ¨éƒ½æ˜¯ä¸€çº¿äº’è”ç½‘å…¬å¸çš„äº§ä¸šå®è·µã€‚\n\n<!--More-->\n\n### å·¥ä¸šå®è·µ\n- ã€Œç™¾åº¦ã€æºäºäº§ä¸šå®è·µçš„å¼€æºæ·±åº¦å­¦ä¹ å¹³å°é£æµ†ï¼ˆPaddlePaddleï¼‰\n- ã€Œæ˜“è§‚ã€å¦‚ä½•å»ºè®¾å¤§æ•°æ®ä¸­å°ï¼ˆä»0åˆ°1å»ºè®¾å¤§æ•°æ®ä¸­å°ï¼‰\n- ã€Œåä¸ºã€äº‘è¾¹ååŒï¼Œé‡æ–°å®šä¹‰AI\n\n### æœºå™¨å­¦ä¹ \n- ã€Œç½‘æ˜“äº‘ã€AIç®—æ³•åœ¨éŸ³ä¹æ¨èä¸­çš„åº”ç”¨\n- ã€ŒVIPKIDã€åœ¨çº¿æ•™è‚²è¡Œä¸šä¸­è§†é¢‘ç†è§£çš„åº”ç”¨\n- ã€Œç¾å›¢ç‚¹è¯„ã€ç¾å›¢å¤–å–å•†ä¸šå˜ç°å®è·µ\n### æœç´¢æ¨è\n- ã€Œè”æã€è”æUGCæ¨èæ¢ç´¢ä¸å®è·µ\n- ã€Œé‡‘å±±ã€æ¨èç³»ç»Ÿåœ¨å‰‘ç½‘3æ¨æ é¡¹ç›®ä¸­çš„è½åœ°\n\n### çŸ¥è¯†å›¾è°±\n- ã€Œç‘å£«å†ä¿é™©ã€çŸ¥è¯†å›¾è°±æ„å»ºï¼ˆæ•°æ®ï¼Œç®—æ³•ä¸æ¶æ„ï¼‰\n- ã€Œç¾å›¢ç‚¹è¯„ã€åŸºäºçŸ¥è¯†å›¾è°±çš„é—®ç­”åœ¨O2Oæ™ºèƒ½äº¤ äº’åœºæ™¯ä¸­çš„åº”ç”¨å’Œæ¼”è¿›\n- ã€Œä¸­ç§‘é™¢ã€åŸºäºçŸ¥è¯†å›¾è°±çš„é—®ç­”å…³é”®æŠ€æœ¯â€”ä»ç­”æ¡ˆåˆ°è‡ªç„¶ç­”æ¡ˆ\n\n### NLP \n- ã€Œé˜¿é‡Œå·´å·´ã€è¯­éŸ³å¯¹è¯æœºå™¨äººåœ¨é˜¿é‡Œå°èœœä¸­çš„ç›¸å…³æŠ€æœ¯æ¢ç´¢\n- ã€Œè¿½ä¸€ç§‘æŠ€ã€æ·±åº¦å­¦ä¹ åœ¨ä¼ä¸šæ™ºèƒ½äº¤äº’ä¸­çš„åº”ç”¨\n- ã€Œè´å£³æ‰¾æˆ¿ã€4Dçœ‹æˆ¿ï¼šå†™ç¨¿æœºå™¨äººä¸VRçš„ç¾ä¸½é‚‚é€…\n\n### æ™ºèƒ½å®‰é˜²\n- ã€Œæ‰‡è´ã€A Short Intro: æ— å¤„ä¸åœ¨çš„å¯¹æŠ—æ ·æœ¬æ”»é˜²\n- ã€Œå‹é‚¦å®‰è¾¾ã€AIè¾¹ç¼˜è®¡ç®—çš„å´›èµ·\n\n### æ™ºèƒ½é‡‘è\n- ã€Œæ—·è§†ã€æ—·è§†AI åœ¨é‡‘èé£æ§é¢†åŸŸçš„è¿ç”¨\n- ã€ŒMinTechã€MinTechçš„é‡‘èç§‘æŠ€ å®è·µä¸æ¢ç´¢\n- ã€Œç™¾ä¿¡é“¶è¡Œã€æœºå™¨é˜…è¯»åœ¨æ™ºèƒ½é“¶è¡Œä¸­çš„åº”ç”¨æ·±åº¦å‰–æä¸å®è·µ\n\n### æ™ºæ…§é›¶å”®\n- ã€ŒWakeDataã€å”¤é†’æ²‰ç¡çš„æ•°æ®\n- ã€ŒMobTechã€åŸºäºåˆ›æ–°ç®—æ³•çš„åŠç›‘ç£çš„ lookalikeæ•ˆæœè¥é”€\n- ã€Œäº¬ä¸œã€æ–°é›¶å”®æ—¶ä»£çš„æ™ºæ…§ä¸­å°\n\n### æ™ºæ…§åŸå¸‚\n- ã€Œå“ˆç½—å‡ºè¡Œã€ç§‘æŠ€æ¨åŠ¨å‡ºè¡Œè¿›åŒ–-å¯†å¯†ç»‡å°±çš„å‡ºè¡Œæ™ºèƒ½\n\n### æ™ºèƒ½å•†ä¸š\n- ã€Œè‹å®ã€è‹å®ç‰©æµ æ™ºèƒ½å†³ç­–ç³»ç»Ÿå»ºè®¾ä¸åº”ç”¨\n- ã€Œè´é”ç§‘æŠ€ã€ä¸‰ç”Ÿä¸‡ç‰©ç†è®ºçš„å®è·µè¿›åŒ–\n- ã€Œç§‘å¤§è®¯é£ã€ä¸€åœºå®¢æœä¸AIçš„èåˆä¹‹æ—…\n\n### ITæ¶æ„\n- ã€Œå¨ä½©ç½‘ç»œã€äººå·¥æ™ºèƒ½å’Œå¤§æ•°æ®ç³»ç»Ÿåœ¨ç”µå­ç«æŠ€æ•°æ®å¤„ç†å¹³å°ä¸­çš„åº”ç”¨\n- ã€Œå¿«ç‹—æ‰“è½¦ã€å¿«ç‹—æ‰“è½¦æ™ºèƒ½è°ƒåº¦ç³»ç»Ÿæ¶æ„æ¼”è¿›\n- ã€Œå›½ç¾ã€å›½ç¾Redisé›†ç¾¤-å›½ç¾åƒäº¿çº§Redisé›†ç¾¤æ¶æ„å˜è¿çš„æ€è€ƒ\n\n### AIOps\n- ã€Œå®œä¿¡ã€åˆ†å¸ƒå¼ä¸»åŠ¨æ„ŸçŸ¥åœ¨æ™ºèƒ½è¿ç»´ä¸­çš„å®è·µ\n- ã€ŒF5ã€æ— æ¢é’ˆå®æ—¶åº”ç”¨å¤§æ•°æ®é‡‡é›†å¼•æ“æœ€ä½³å®è·µå’ŒAIOpså®ç°\n- ã€Œæ—¥å¿—æ˜“ã€æµ·é‡æ—¥å¿—åˆ†æä¸æ™ºèƒ½è¿ç»´\n\n### æ™ºèƒ½ä¼ä¸šèµ‹èƒ½\n- ã€Œç™¾åº¦ã€ä¼ä¸šèµ‹èƒ½AI æœåŠ¡ç”Ÿæ´» DuerOSçš„æŠ€èƒ½æœåŠ¡å¼€å‘\n- ã€Œè˜‘è‡è¡—ã€åŸºäºå›¾åƒæŠ€æœ¯æ„å»ºè˜‘è‡è¡—æ—¶å°šç›®çš„åœ°\n- ã€Œ51Talkã€äººå·¥æ™ºèƒ½èµ‹èƒ½æ•™è‚²-äººå·¥æ™ºèƒ½å¦‚ä½•åŠ©åŠ›K12åœ¨çº¿è‹±è¯­\n\n---\n\nä»¥ä¸Šèµ„æ–™ï¼Œç§èŠå¾®ä¿¡è·å–\n<center><img src=\"https://img-blog.csdnimg.cn/20190808125509913.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=200px></center>\n\n---\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=200px>\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n\n---\n\n<center>\n<font color=red>æ³¨ï¼šã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹å·²ç»åœ¨äº¬ä¸œä¸Šçº¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è¿›è¡Œå…³æ³¨ï¼</font>\n</center>\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20190708234949217.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=40% />\n</center>","tags":["æŠ€æœ¯åˆ†äº«"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"é‡åº†ä¿æ—¶æ·å¥³å¸æœºæ­éœ²äº†ä¸‘æ¶ä¸–é“ï¼Œä½†ç»ˆè¦ç›¸ä¿¡æœ‰å–„æœ‰æ­£ä¹‰æœ‰å¼ å°æ•¬è¿™æ ·çš„é•¿å®‰ä¸è‰¯å¸…","url":"/2019/08/04/éšæ‰‹è®°/é‡åº†ä¿æ—¶æ·å¥³å¸æœºæ­éœ²äº†ä¸‘æ¶ä¸–é“ï¼Œä½†ç»ˆè¦ç›¸ä¿¡æœ‰å–„æœ‰æ­£ä¹‰æœ‰å¼ å°æ•¬è¿™æ ·çš„é•¿å®‰ä¸è‰¯å¸…/","content":"\nä¸–é“å¾ˆå¥½ï¼Œåªæ˜¯è¢«è—çš„å¾ˆå¥½ï¼Œåªæœ‰èµ°åœ¨é‚£äº›é’çŸ³æ¿ä¸Šï¼Œæˆ‘æ‰èƒ½çœ‹åˆ°çŸ³ç –å¢™ç“¦çš„æµèŠ³ç™¾å¹´\n\nä¸–é“å¾ˆåï¼Œåªæ˜¯å¾ˆå°‘çš„å­˜åœ¨ï¼Œåªæœ‰é‡è§é‚£äº›å­¤ç«‹æ— æ´ï¼Œæˆ‘æ‰èƒ½çœ‹åˆ°äººå¿ƒå†·æš–çš„è‚†æ— å¿Œæƒ®\n\n<!--More-->\n\n> è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å†™å¯¹ç¤¾ä¼šäº‹ä»¶çš„çœ‹æ³•ï¼Œå½“ç„¶ä¸æ˜¯ä¸ºäº†è¹­çƒ­ç‚¹ï¼Œè€Œæ˜¯è¿™ä»¶äº‹çœŸçš„æ˜¯è§¦åŠ¨äº†æˆ‘ã€‚å› ä¸ºæœ€è¿‘æ²‰è¿·äºå…³äºè¥¿è—çš„è®°å½•ç‰‡ï¼ŒçœŸå¿ƒæ„Ÿå—åˆ°äº†è—æ°‘çš„è´¨æœ´æ— åå’Œäº²åˆ‡å‹å–„ï¼Œç„¶è€Œè¿™ä¸ªå¼€ç€ä¿æ—¶æ·çš„é‡åº†å¥³å¸æœºå´å†æ¬¡åˆ·æ–°äº†æˆ‘çš„ä¸‰è§‚ã€‚æˆ‘ä»¥ä¸ºé‚£äº›ä¸è¢«äººçœ‹åˆ°çš„ä¸‘æ¶ä¼šè¢«å²æœˆæ·¡åŒ–ï¼Œæ—¶å…‰åªä¼šè®°å½•åˆ°å­˜äºè¿™ä¸–ç•Œçš„ç¾å¥½ï¼Œç„¶è€Œæˆ‘å¤±æœ›äº†...\n\n> PSï¼šæœ€è¿‘çœ‹çš„ä¸¤éƒ¨è—åŒºçºªå½•ç‰‡æ˜¯ã€Šå†ˆä»æ³¢é½ã€‹ã€Šé˜¿æ‹‰å§œè‰²ã€‹\n\n\n7æœˆ30æ—¥ä¸Šåˆï¼Œé‡åº†ä¸€ä½é©¾é©¶ä¿æ—¶æ·çš„å¥³å­åœ¨æ–‘é©¬çº¿è¿ç« æ‰å¤´æ—¶ä¸å¦ä¸€è¾†è½¦çš„ç”·å¸æœºå‘ç”Ÿå£è§’ã€‚è¿™ä»¶äº‹æœ¬èº«æ²¡ä»€ä¹ˆï¼ŒåŒæ ·ä½œä¸ºä¸€åå¸æœºï¼Œæˆ‘è§‰å¾—åŒæ–¹äº’ç›¸é“ä¸ªæ­‰ï¼Œç„¶åæ•…äº‹å°±å¤§ç»“å±€äº†ï¼ä¸ä¼šåƒã€Šé•¿å®‰åäºŒæ—¶è¾°ã€‹ä¸­é¾™æ³¢èƒ½ä¸èƒ½æŠŠèŠ±è¼æ¥¼ç‚¸æ‰é‚£æ ·ç‰µåŠ¨ç€æˆ‘çš„å¿ƒï¼Œæ—¶æ—¶ä¸èƒ½å¤§ç»“å±€ã€‚\n\n<video src=\"https://v.qq.com/x/page/y090600y5uh.html\" controls=\"controls\"></video>\n\nç„¶è€Œï¼Œå¥³å¸æœºçš„ä¸€å·´æŒç›´æ¥æŠŠå¥¹æ‰‡åˆ°äº†å¾®åšçƒ­æœï¼Œæ‰‡æˆäº†äººæ°‘èŒ¶ä½™é¥­åçš„è°ˆèµ„ï¼Œæ‰‡å‡ºäº†å¥¹çš„å¾€å¾€ç§ç§è¿ç« ï¼Œæ‰‡é†’äº†æ²‰è¿·äºå’Œå¹³å®‰ä¹çš„æ™®ç½—å¤§ä¼—ï¼Œæ‰‡æƒŠäº†å¥¹èº«åçš„æ´¾å‡ºæ‰€æ‰€é•¿ä¸ˆå¤«ã€‚\n\nå†æ¥çœ‹ä¸‹å¥³å¸æœºï¼Œ16å¹´è´­å…¥ä¿æ—¶æ·è‡³ä»Šï¼Œä¸‰å¹´ä¸­å…±æœ‰29æ¡äº¤é€šè¿æ³•è®°å½•ï¼Œè¿æ³•è¡Œä¸ºåŒ…æ‹¬é—¯çº¢ç¯ã€ä¹±åœè½¦ã€è¿åç¦æ­¢æ ‡çº¿ã€é©¾é©¶æ—¶æ‹¨æ‰“æ¥å¬æ‰‹æŒç”µè¯ç­‰ã€‚æ›¾ç»åœ¨éƒŠåŒºæ— æ„é—´é—¯äº†ä¸€ä¸ªçº¢ç¯ï¼Œè¢«æ‰£äº†3åˆ†+200äººæ°‘å¸ï¼è¯´å®è¯å¯¹äºè¿™é’±ï¼Œè¿™åˆ†æˆ‘æŒºæ‚”æ¨çš„ï¼Œæ¯•ç«Ÿæˆ‘ä»¬çš„é©¾é©¶è¯åªæœ‰12åˆ†ï¼Œæˆ‘ä»¬ä¹Ÿéƒ½æ˜¯å¹³å‡¡äººï¼ä½†æ˜¯å¥¹å´ä¸ä¸€æ ·ï¼Œ29æ¡è¿ç« è®°å½•ä¹‹åä¾æ—§åœ¨é“è·¯ä¸Šæ¨ªè¡Œéœ¸é“ï¼Ÿéš¾é“äººå®¶çš„æœ¬æœ¬è·Ÿæˆ‘çš„ä¸å¤ªä¸€æ ·ï¼\n\néšç€äº‹ä»¶çš„å‘é…µï¼Œè¿™ä¸ªæ±Ÿæ¹–äººç§°â€œæœˆå§â€çš„ä¿æ—¶æ·å¥³å¸æœºè¢«æŒ–å‡ºäº†æ›´å¤šçš„â€œä¸è‰¯å½¢è±¡â€ï¼Œå¤´æ‰¹å¤§æ³¢æµªï¼Œæˆ´ç™½å¸½ï¼Œèº«ç€å–‡å­è£¤ï¼ŒåŠå¸¦å°èƒŒå¿ƒï¼Œé»‘è‰²å¢¨é•œï¼Œå˜´åˆä¸­å—æµ·ï¼Œé»‘é“æ„Ÿåè¶³ï¼Œç®€ç›´å°±åƒé»‘é“ä¸­çš„å¤§å«‚ã€‚å†åŠ ä¸Šé‚£ä¸ªæ ‡å¿—æ€§çš„ç”¨é£ŸæŒ‡æŒ‡äººçš„åŠ¨ä½œï¼Œè¯´å®è¯ï¼Œé‡è§è¿™ç§äººï¼Œæˆ‘ä¼šç¦»å¥¹æ–¹åœ†åé‡Œå¼€å¤–ï¼\n\nå…³äºè¿™ä»¶äº‹çš„å¤„ç†ç»“æœè¿˜æ²¡æœ‰å…¬å¸ƒï¼Œä¸è¿‡å¥¹çš„å‡ å¥éœ¸è¯­å€’æƒŠé†’äº†æˆ‘ï¼š\n- â€œæˆ‘å‡ºäº†åçš„é£™è½¦ï¼çº¢ç¯ä»æ¥éƒ½æ˜¯é—¯ï¼Œæ²¡äººæ•¢æŠŠæˆ‘æ€ä¹ˆæ ·ã€‚â€\n- â€œæˆ‘ä¸€ä¸ªç”µè¯ï¼Œæ‰€æœ‰è®°å½•éƒ½å¯ä»¥åˆ é™¤ã€‚â€\n- â€œä¿¡ä¸ä¿¡ï¼Œæˆ‘åˆ†åˆ†é’Ÿæ‰¾äººå¼„ä½ å…¨å®¶ã€‚â€\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190804105026263.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\"></center>\n## ä¸–é“æ˜¯æ€æ ·çš„è´¥è½ï¼Œç«Ÿæ²¡äººæ•¢æŠŠä½ æ€ä¹ˆæ ·ï¼Ÿ\n\nâ€œè¿™ä¸–é—´çš„ç§ç§ç¹è£ï¼Œéƒ½åªä¸è¿‡æ˜¯å±•ç°åœ¨ä½ çœ¼å‰çš„å‡è±¡â€ï¼Œè¿™å¥è¯è¯´çš„æœ‰ç‚¹è¿‡äº†ï¼Œä½†æ˜¯è¿™ä¸–é“ä¸Šçš„ä¸€äº›é»‘æš—æ˜¯è¶…ä¹æˆ‘ä»¬æƒ³è±¡çš„ã€‚\n\næŸäº›æ‹¿ç€å›½å®¶æ´¥è´´çš„ç®¡å‘˜ä¸ä½œä¸ºï¼Œè´ªæ±¡å—è´¿ï¼ŒåŒ…å…»å°ä¸‰ï¼Œå½“è¢«æŠ“æ—¶çš„é‚£ç§æ‚”æ¨æ‡Šæ¼æ˜¯ä½ è§¦ç¢°æ³•å¾‹åº•çº¿æœ€åçš„æ•‘èµå—\n\næŸäº›èº«ç©¿ç™½å¤§è¤‚åŸæœ¬è¯¥æµä¸–æ•‘äººçš„åŒ»ç”Ÿï¼Œå´ä¹Ÿå—ä¸äº†â€œç°è‰²æ”¶å…¥â€çš„è¯±æƒ‘ï¼Œè€Œä¸¢æ‰äº†è¯¥æœ‰çš„èŒä¸šæ“å®ˆ\n\næŸäº›å–æˆ¿æ—¶è¯´çš„æ¯”å”±çš„éƒ½å¥½å¬çš„å¼€å‘å•†ï¼Œåœ¨æ”¶å®Œå®šé‡‘å’Œé¦–ä»˜æ¬¾ä¹‹åï¼Œè¿Ÿè¿Ÿä¸èƒ½äº¤æˆ¿ï¼Œæœ€åå˜æˆçƒ‚å°¾æ¥¼\n\nè¿™ç§äº‹æƒ…åœ¨ç¤¾ä¼šä¸Šå±¡è§ä¸é²œï¼Œä½†æœ‰æ³•å¾‹è¿™æ¡çº¦æŸçº¿ï¼Œè¿˜èƒ½èµ·åˆ°è­¦æˆ’å’Œæƒ©ç½šçš„ä½œç”¨ï¼Œæˆ‘ä»¬èƒ½åšçš„å°±æ˜¯ä¸ç®¡ä»–äººï¼Œçº¦æŸå¥½è‡ªå·±ï¼Œä¸è§¦ç¢°æ³•å¾‹çš„åº•çº¿ï¼Œè¦å§‹ç»ˆç›¸ä¿¡é‚£äº›è§¦çŠ¯æ³•å¾‹çš„äººç»ˆä¼šå¾—åˆ°åˆ¶è£ï¼\n\n## è¿™ä¸–ä¸Šè°å¯ä»¥å‘½ä»¤é™¤ä»–ä¹‹å¤–çš„æ‰€æœ‰äººï¼Œæ˜¯å¤§å”æ—¶é«˜é«˜åœ¨ä¸Šçš„åœ£äººå—ï¼Ÿ\n\næƒåˆ©å¤§æ¦‚æ˜¯è¿™ä¸ªä¸–ç•Œä¸Šæœ€è®©äººå´‡å°šçš„ä¸œè¥¿ï¼Œä¹Ÿæ˜¯æœ€è®©äººç•æƒ§çš„ä¸œè¥¿ï¼Œæ²¡é’±çš„æ€•æœ‰é’±çš„ï¼Œæœ‰é’±çš„æ€•æœ‰æƒçš„ï¼Œæœ‰æƒçš„å¤©ä¸æ€•åœ°ä¸æ€•ï¼Œå°±æ€•æƒåˆ©æ›´å¤§çš„ã€‚\n\nä¸æ™“å¾—è¿™å¥³å¸æœºæ˜¯ä½•æ–¹ç¥åœ£ï¼Œä½†è¿™ç§é€šè¿‡â€œæƒåˆ©â€å¯ä»¥åŠæˆä¸€äº›å¹³å‡¡äºº åŠä¸æˆçš„äº‹çš„ç°è±¡æ˜¯æ˜¾ç„¶å­˜åœ¨çš„ï¼Œè¿™å°±åƒä¸€ä¸ªæ½œè§„åˆ™ï¼Œåªä¸è¿‡æˆ‘ä»¬éƒ½æ˜¯å—å®³è€…ï¼\n\nåªè¦ä½ èƒŒé å¤§æ ‘ï¼Œé‚£ä½ å°±å¯ä»¥äº«å—æç¹å¶èŒ‚å¸¦æ¥çš„é˜´å‡‰ã€‚ã€Šé•¿å®‰åäºŒæ—¶è¾°ã€‹ä¸­èƒŒé æ°¸ç‹çš„ç†Šç«å¸®ä¸æ˜¯çƒ§æ€æŠ¢æ ï¼Œæ— æ¶ä¸ä½œå—ï¼\n\nåŒæ ·çš„ä¸€äº›å…¶ä»–æ½œè§„åˆ™ï¼Œæ¯”å¦‚ï¼Œè°æœ‰é’±æœ‰æƒæ›´éœ¸é“ï¼Œè°å°±æ›´æœ‰ç†ï¼Œè¿™æ˜¯å¼ºè€…çš„é€»è¾‘ã€‚\n\nå†æ¯”å¦‚ï¼Œå¿ä¸€æ—¶é£å¹³æµªé™ï¼Œé€€ä¸€æ­¥æµ·é˜”å¤©ç©ºï¼Œè¿™æ˜¯å¼±è€…çš„å€Ÿå£ã€‚\n\næœ‰å¥è¯è¯´å¾—å¥½ï¼šäººå–„è¢«äººæ¬ºï¼Œé©¬å–„è¢«äººéª‘ï¼ŒæŸ¿å­ä¸“æŒ‘è½¯çš„æã€‚\n\næœ‰äº›äººä¹‹æ‰€ä»¥è‚†æ— å¿Œæƒ®ã€æ¨ªè¡Œéœ¸é“ï¼Œå°±æ˜¯çœ‹å‡†äº†è€å®äººå¿ƒåœ°å–„è‰¯ï¼Œä¸æ•¢åæŠ—ã€‚\n\n\n## ä½ çš„é‚£å¥â€œå¼„æ­»ä½ å…¨å®¶â€è®©æˆ‘å¿ƒæœ‰ä½™æ‚¸ã€‚\n\nç”Ÿè€ç—…æ­»æ˜¯äººä¹‹å¸¸æƒ…ï¼Œä½†æ¬²åŠ ä¹‹ç½ªä½•æ‚£æ— è¯ã€‚å¼±è€…ç”Ÿå­˜çš„é˜¶çº§é‡Œæœ€å®³æ€•çš„å°±æ˜¯å¼ºè€…çš„è·µè¸ã€‚\n\næ˜¯ä½ çš„é”™ï¼Œä½ å…ˆåŠ¨çš„æ‰‹ï¼Œä»–è¿˜äº†ä¸€ä¸‹ï¼Œå°±æ”¾è¯è¦å¼„æ­»ä»–å…¨å®¶ï¼è¯´å®è¯çœŸçš„æ€•äº†ï¼Œèƒ½è¯´å‡ºè¿™å¥è¯çš„äººï¼Œè‚¯å®šå¤„äºé‡‘å­—å¡”çš„ä¸Šå±‚ï¼Œè¿™æ ·å¥¹æ‰æœ‰è¿™æ ·çš„åº•æ°”ï¼Œå¦‚æ­¤è‚†æ— å¿Œæƒ®ã€‚\n\nå¦‚ä»Šçš„æ³•åˆ¶ç¤¾ä¼šï¼Œæˆ‘ä»¬åº”è¯¥æå«çš„æ˜¯æ³•å¾‹ï¼Œåœ¨é‡åˆ°äº‹æƒ…æ—¶ï¼Œæ‹¿èµ·æ³•å¾‹çš„æ­¦å™¨æ¥ä¿æŠ¤è‡ªå·±ã€‚è€Œé‚£ä¸ªå¥³å¸æœºåˆ™æ˜¯é ç€â€œæ³•å¾‹æ‰§è¡Œäººâ€çš„ä¸ˆå¤«â€œå¼„æ­»ä½ å…¨å®¶â€ã€‚\n\næƒ³æƒ³ä¹ŸæŒºå¯ç¬‘çš„ï¼Œå£«å…µæ‰‹é‡Œçš„å‰‘æ˜¯åˆºæ€æ•Œäººçš„ï¼ŒåŒ»ç”Ÿæ‰‹é‡Œçš„åˆ€æ˜¯æµä¸–æ•‘äººçš„ï¼Œå®˜å‘˜æ‰‹é‡Œçš„æƒåˆ©æ˜¯ç»´æŠ¤æ²»å®‰çš„ï¼Œè€Œä½ åˆ™æ˜¯æ¥åˆ·æ–°æˆ‘çš„ä¸‰è§‚çš„ï¼\n\n## é‚£ä¸ªæ‰‡äº†å¥³å¸æœºçš„ç”·å¸æœºä»¥åä¼šæ€ä¹ˆæ ·ï¼Ÿ\nåœ¨è¿™ä¸ªä¸–ç•Œä¸Šï¼Œæœ‰äººæ‰“å¿ƒåº•é‡Œè®¤ä¸ºï¼Œåªè¦æœ‰é’±ï¼Œä¾¿å¯ä»¥ä¸ºæ‰€æ¬²ä¸ºï¼ŒåŒæ ·å› ä¸ºæ²¡é’±ï¼Œè¿™ä¸–ä¸Šçš„å¾ˆå¤šå¼±è€…åœ¨è‡ªå·±å—äº†å§”å±ˆä¹‹åï¼Œéƒ½ä¼šé€‰æ‹©é»˜ä¸ä½œå£°ï¼Œä»»äººå®°å‰²ã€‚\n\nå³ä½¿æ˜¯äº‹ä»¶ä¸­çš„ç”·å¸æœºï¼Œä¸€æ—¶å¿æ— å¯å¿çš„ï¼ŒåŠ¨æ‰‹è¿˜å‡»ã€‚å¯äº‹åå†·é™ä¸‹æ¥ï¼Œè¿˜æ˜¯ç¬¬ä¸€æ—¶é—´é“æ­‰äº†äº‹ã€‚å°½ç®¡é”™ä¸åœ¨ä»–ï¼Œä½†æˆ‘ä»¬ä¹Ÿèƒ½ä½“ä¼šåˆ°ä»–å†…å¿ƒçš„æ— å¥ˆã€‚\n\nå¼±å°çš„åŠ›é‡æ€ä¹ˆèƒ½å»å’Œé‡‘é’±ï¼ŒåŠ¿åŠ›æŠ—è¡¡ï¼\n\nã€Šé•¿å®‰åäºŒæ—¶è¾°ã€‹ä¸­æœ‰è¿™æ ·ä¸€ä¸ªæƒ…èŠ‚äº¤ä»£ï¼Œæ°¸ç‹ï¼ˆå³ç›¸æƒ³è¦æ‰¶æŒçš„ç‹å­ï¼‰å› ä¸ºä¸ºè¥¿åŸŸçš„å°å‹ƒå¾‹ä½¿ä¿®å»ºä¸€ä¸ªé©¿é¦†ï¼Œåœ¨èŠ±è¼æ¥¼ä¸Šé¢†åŠŸã€‚è¢«å¤ªå­æ­äº†è€åº•ï¼ŒåŸæ¥æçš„æš´åŠ›æ‹†è¿ã€‚è€Œé—»æŸ“çš„çˆ¶äº²é—»æ— å¿Œï¼Œè™½ä¸ºçƒ½ç‡§å ¡æˆ˜å½¹çš„å¹¸å­˜è€…ï¼Œä½†ä¾æ—§ä¸èƒ½æŠµæŠ—è¿™åœºæ‰€è°“çš„æš´åŠ›æ‹†è¿ï¼Œä»–çš„åå•†å’Œäº‰è®ºåªæ˜¯è®©ä»–ç™½ç™½é€äº†å§“åï¼\n\nè¿™ä»¶äº‹ä»¶çš„ç”·å¸æœºä»£è¡¨çš„ä¸æ­£æ˜¯æˆ‘ä»¬è¿™äº›å¹³å‡¡çš„äººï¼Œå ‚å ‚çš„ä¸ƒå°ºç”·å„¿ï¼Œä¸ºäº†å¦»å„¿å®¶äººï¼Œåœ¨äº‹å‘ä¹‹åä¹Ÿä¸å¾—ä¸ä½ä¸‹å¤´ï¼Œè¿›è¡Œäº†é“æ­‰ï¼\n\nè°å«å¯¹æ–¹æœ‰é’±ä¼˜æœ‰åŠ¿ï¼Œè€Œè‡ªå·±å´æ˜¯ä¸ªæ™®é€šä¹‹äººå‘¢ï¼\n\n\n## é‚£ä¸ªå¼€ä¿æ—¶æ·çš„å¥³å¸æœºåæ¥æ€ä¹ˆæ ·äº†ï¼Ÿ\n\né‡åº†å¸‚å…¬å®‰å±€å·²ç»æˆç«‹äº†è°ƒæŸ¥ç»„ï¼Œå½»æŸ¥ç›¸å…³æƒ…å†µï¼Œä¾æ³•å¤„ç†ï¼Œé‡è§†ç¾¤ä¼—ååº”ã€‚\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190805175924660.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\"></center>\n\næ”¿åºœçš„æ€åº¦å·²ç»å¾ˆæ˜æ˜¾äº†ï¼Œä½†é‚£åªæ˜¯æ”¿åºœçš„å®˜æ–¹æ€åº¦ï¼Œå…·ä½“åäº‹å¦‚ä½•ï¼Œæš‚æ—¶æ˜¯æœªçŸ¥çš„ã€‚ä¸è¿‡è¿™è®©æˆ‘æƒ³èµ·æ¥äº†æœ€è¿‘çƒ­æ’­çš„ã€Šé•¿å®‰åäºŒæ—¶è¾°ã€‹ã€‚\n\nå…¶ä¸­å‘ç”Ÿçš„äº‹ä»¶æ˜¯ï¼šé¾™æ³¢æºä¼—äººå’Œé˜™ä¹éœå¤šï¼Œå¯¹èŠ±è¼æ¥¼éº’éºŸè‡‚è¿›è¡Œå·æ¢æ¢æŸ±ï¼Œæ„å›¾é€åœ£äººè¥¿å»ï¼Œè€Œâ€œå¤§æ¡ˆç‰æœ¯â€é€‰æ‹©çš„å¼ å°æ•¬å¯¹å…¶ç©·è¿½ä¸èˆï¼Œå½»æŸ¥æ­¤æ¡ˆã€‚\n\näº‹ä»¶çš„èµ·å› æ˜¯ï¼šå®‰è¥¿é“å†›ç¬¬å…«å›¢åœ¨çƒ½ç‡§å ¡å·¡æŸ¥ä¹‹é™…ï¼Œé­é‡æ•Œå…µï¼Œäºæ˜¯æ­»å®ˆåŸå¢™ï¼Œä½†æ˜¯æ´å†›è¿Ÿè¿Ÿä¸æ¥ï¼Œæœ€åå¾—çŸ¥æ´å†›æ—©å·²æ’¤ç¦»ï¼Œè€Œæ´å†›ä¸è‡³çš„ç¼˜ç”±æ˜¯å½“æ—¶çš„å…µéƒ¨å°šä¹¦æ—ä¹éƒå¹¶æœªä¸‹ä»¤è¿›è¡Œæ”¯æ´ï¼Œäºæ˜¯æ•Œæ„å‡çº§åˆ°äº†å¤§å”çš„åœ£äººã€‚\n\nä¸è¿‡åœ£äººåœ¨è¿™é‡Œæ˜¯åšäº†ä¸ªå†¤å¤§å¤´ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿå› ä¸ºå½“æ—¶çš„åº•å±‚å®˜å‘˜ä¸ŠæŠ¥çš„æ˜¯å¤§å”è¾¹å¢ƒå¹³é™ï¼Œå¹¶æ— æ•Œå†›æ¥çŠ¯ï¼Œå¦‚æœä½œä¸ºæ—ä¹éƒä¸‹ä»¤å¢å…µçƒ½ç‡§å ¡ï¼Œè¿™æ— ç–‘æ˜¯åœ¨æ‰“åœ£äººçš„è„¸ï¼Œæ˜¯æ‹†ç©¿å¤§å”è¾¹å¢ƒä¸€ç‰‡å¹³å’Œçš„è°è¨€ã€‚é‚£ä¹ˆåœ£äººå¿…ä¼šè¿æ€’äºä»–ï¼Œä»–çš„å³ç›¸ä¹‹è·¯ææ€•å°±æ²¡é‚£ä¹ˆé¡ºåˆ©äº†å§...\n\næ›¾ç»è¡¨é¢â€œç¹è£â€çš„å¤§å”ä¸å’Œç°åœ¨çš„æˆ‘ä»¬ä¸€æ ·ï¼Œçœ‹ä¼¼å’Œå¹³å®‰å®šï¼Œå²æœˆé™å¥½ï¼Œå®åˆ™æ³¢æ¶›æ±¹æ¶Œï¼Œå¤šå°‘ä¸ä¸ºäººçŸ¥çš„â€œé»‘æš—æ–™ç†â€ä¸€ä¸ªä¸ªåœ¨æ˜¾éœ²å‡ºæ¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±é™ç­‰é‡åº†å¥³å¸æœºçš„å¤„ç†ç»“æœå§ï¼\n\n## è¯¥æœ‰çš„å…‰æ˜ä¼šæ¥ï¼Œå› ä¸ºæœ‰å¼ å°æ•¬è¿™æ ·çš„é•¿å®‰ä¸è‰¯å¸…\n<center><img src=\"https://img-blog.csdnimg.cn/20190804105136566.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\n\"></center>\nä¸€ä¸ªå¥½äººï¼Œä»€ä¹ˆæ—¶å€™å¼€å§‹å˜åï¼Ÿä»ä»–è§‰å¾—å­¤ç«‹æ— æ´çš„é‚£ä¸€åˆ»èµ·ï¼›\n\nä¸€ä¸ªè€å®äººï¼Œä»€ä¹ˆæ—¶å€™å¼€å§‹å†·æ¼ ï¼Œä»ä»–çœ‹é€äººå¿ƒå†·æš–çš„é‚£ä¸€ç§’å§‹ã€‚\n\nå¯å¦‚æœäººäººéƒ½å¦‚æ­¤ï¼Œé‚£ç¤¾ä¼šä¸Šçš„å¥½äººå°±è¶Šæ¥è¶Šå°‘ï¼Œåäººå°±è¶Šæ¥è¶Šå¤šã€‚æœ€åå¿…ç„¶é™·å…¥æ•´ä½“å´©æºƒä¸­ã€‚\n\næ‰€ä»¥ï¼Œä¸è¦æŠŠè¿™ä¸ªä¸–ç•Œè®©ç»™é‚£äº›åäººï¼Œä¹Ÿä¸è¦è®©å¥½äººåœ¨é»‘æš—é‡Œå­¤ç‹¬çš„æŠ—äº‰ã€‚\n\nåå¹´é¥®å†°éš¾å‡‰çƒ­è¡€ï¼Œé¢å¯¹ä¸‘æ¶ï¼Œå¿è€ä¸æ˜¯ç¾å¾·ï¼Œæ„¤æ€’æ‰æ˜¯ã€‚è€Œæ„¤æ€’ï¼Œç»ä¸æ˜¯ä¸€ä¸¤ä¸ªäººçš„äº‹æƒ…ï¼Œè€Œæ˜¯æ‰€æœ‰æœ‰æ­£ä¹‰æ„Ÿçš„äººå…±åŒçš„äº‹ä¸šã€‚\n\nè¯´åˆ°åº•ï¼Œè¿™ä¸–ç•Œå¹¶ä¸å®Œç¾ï¼ŒçŠ¹å¦‚è¡¨è±¡ç¹è£çš„å¤§å”ï¼Œä½†å´ä¾æ—§å€¼å¾—æˆ‘ä»¬å»å¥‹æ–—ï¼Œå°±åƒå¼ å°æ•¬ä¸€æ ·ï¼Œä¸é€€ï¼ï¼ï¼\n\nä½ çš„å–„è‰¯ï¼Œä½ çš„åšæŒï¼Œç»ˆä¼šå‘å…‰ï¼\n\n---\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=200px>\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n\n---\n\n<center>\n<font color=red>æ³¨ï¼šã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹å·²ç»åœ¨äº¬ä¸œä¸Šçº¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è¿›è¡Œå…³æ³¨ï¼</font>\n</center>\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20190708234949217.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=40% />\n</center>","tags":["éšæ‰‹è®°"],"categories":["éšæ‰‹è®°"]},{"title":"åŸºäºååŒçš„Slope Oneç®—æ³•åŸç†ä»‹ç»å’Œå®ç°","url":"/2019/08/02/RecSys/Sparkä¸æ¨èç³»ç»Ÿ/åŸºäºååŒçš„Slope Oneç®—æ³•åŸç†ä»‹ç»å’Œå®ç°/","content":"\n> è¯¥ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»Slope Oneç®—æ³•ã€‚Slope One ç®—æ³•æ˜¯ç”± Daniel Lemire æ•™æˆåœ¨ 2005 å¹´æå‡ºçš„ä¸€ä¸ª Item-Based çš„ååŒè¿‡æ»¤æ¨èç®—æ³•ã€‚å’Œå…¶å®ƒç±»ä¼¼ç®—æ³•ç›¸æ¯”, å®ƒçš„æœ€å¤§ä¼˜ç‚¹åœ¨äºç®—æ³•å¾ˆç®€å•, æ˜“äºå®ç°, æ‰§è¡Œæ•ˆç‡é«˜, åŒæ—¶æ¨èçš„å‡†ç¡®æ€§ç›¸å¯¹è¾ƒé«˜ã€‚ \n\n<!--More-->\n\n- [ååŒè¿‡æ»¤ç®—æ³•ç†è§£å’ŒPythonå®ç°](https://blog.csdn.net/Gamer_gyt/article/details/51346159)\n- [åŸºäºæ ‡ç­¾çš„æ¨èç®—æ³•](https://thinkgamer.blog.csdn.net/article/details/51684716)\n- [åŸºäºå›¾çš„æ¨èç®—æ³•](https://thinkgamer.blog.csdn.net/article/details/51694250)\n\n# ç»å…¸çš„ItemCFçš„é—®é¢˜\n\nç»å…¸çš„åŸºäºç‰©å“æ¨èï¼Œç›¸ä¼¼åº¦çŸ©é˜µè®¡ç®—æ— æ³•å®æ—¶æ›´æ–°ï¼Œæ•´ä¸ªè¿‡ç¨‹éƒ½æ˜¯ç¦»çº¿è®¡ç®—çš„ï¼Œè€Œä¸”è¿˜æœ‰å¦ä¸€ä¸ªé—®é¢˜ï¼Œç›¸ä¼¼åº¦è®¡ç®—æ—¶æ²¡æœ‰è€ƒè™‘ç›¸ä¼¼åº¦çš„ç½®ä¿¡é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œä¸¤ä¸ªç‰©å“ï¼Œä»–ä»¬éƒ½è¢«åŒä¸€ä¸ªç”¨æˆ·å–œæ¬¢äº†ï¼Œä¸”åªè¢«è¿™ä¸€ä¸ªç”¨æˆ·å–œæ¬¢äº†ï¼Œé‚£ä¹ˆä½™å¼¦ç›¸ä¼¼åº¦è®¡ç®—çš„ç»“æœæ˜¯ 1ï¼Œè¿™ä¸ª 1 åœ¨æœ€åæ±‡æ€»è®¡ç®—æ¨èåˆ†æ•°æ—¶ï¼Œå¯¹ç»“æœçš„å½±å“å´æœ€å¤§ã€‚\n\nSlope One ç®—æ³•é’ˆå¯¹è¿™äº›é—®é¢˜æœ‰å¾ˆå¥½çš„æ”¹è¿›ã€‚ä¸è¿‡ Slope One ç®—æ³•ä¸“é—¨é’ˆå¯¹è¯„åˆ†çŸ©é˜µï¼Œä¸é€‚ç”¨äºè¡Œä¸ºçŸ©é˜µã€‚\n\n# Slope Oneç®—æ³•è¿‡ç¨‹\n\nSlope One ç®—æ³•æ˜¯åŸºäºä¸åŒç‰©å“ä¹‹é—´çš„è¯„åˆ†å·®çš„çº¿æ€§ç®—æ³•ï¼Œé¢„æµ‹ç”¨æˆ·å¯¹ç‰©å“è¯„åˆ†çš„ä¸ªæ€§åŒ–ç®—æ³•ã€‚\n\nSlopeç®—æ³•ä¸»è¦åˆ†ä¸º3æ­¥\n\n1. è®¡ç®—ç‰©å“ä¹‹é—´çš„è¯„åˆ†å·®çš„å‡å€¼ï¼Œè®°ä¸ºç‰©å“é—´çš„è¯„åˆ†åå·® (ä¸¤ç‰©å“åŒæ—¶è¢«è¯„åˆ†)\n$$\nR(i,j) = \\frac{ \\sum_{ u \\in N(i)\\bigcap N(j) } (r_{ui} - r_{uj}) }{ | N(i) \\bigcap N(j) | }\n$$\n> ( r_ui - r_uj ) è¡¨ç¤ºè¯„åˆ†çš„å·®,è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯jç›¸å¯¹içš„è¯„åˆ†åå·®æ˜¯ r_ui - r_uj ï¼Œå¦‚æœæ˜¯iç›¸å¯¹jçš„è¯„åˆ†åå·®åˆ™æ˜¯ r_uj - r _ui,ä¸¤ è€…æ˜¯äº’ä¸ºç›¸åæ•°çš„å…³ç³»ã€‚\n\nå…¶ä¸­ï¼š\n- r_ui ï¼šç”¨æˆ·uå¯¹ç‰©å“içš„è¯„åˆ†\n- r_uj ï¼šç”¨æˆ·uå¯¹ç‰©å“jçš„è¯„åˆ†\n- N(i) ï¼šç‰©å“iè¯„è¿‡åˆ†çš„ç”¨æˆ·\n- N(j) ï¼šç‰©å“jè¯„è¿‡åˆ†çš„ç”¨æˆ·\n- N(i) äº¤ N(j) ï¼šè¡¨ç¤ºåŒæ—¶å¯¹ç‰©å“i å’Œç‰©å“jè¯„è¿‡åˆ†çš„ç”¨æˆ·æ•°ã€‚\n\n2. æ ¹æ®ç‰©å“é—´çš„è¯„åˆ†åå·®å’Œç”¨æˆ·çš„å†å²è¯„åˆ†ï¼Œé¢„æµ‹ç”¨æˆ·å¯¹æœªè¯„åˆ†çš„ç‰©å“çš„è¯„åˆ†ã€‚\n$$\np_{uj} = \\frac{ \\sum_{i \\in N(u)} |N(i) \\bigcap N(j) |(r_{ui} - R(i,j))  }{ \\sum_{i \\in N(u)}|N(i) \\bigcap N(j)| }\n$$\nå…¶ä¸­ï¼š\n- N(u) ï¼šç”¨æˆ·uè¯„è¿‡åˆ†çš„ç‰©å“\n\n\n3. å°†é¢„æµ‹è¯„åˆ†è¿›è¡Œæ’åºï¼Œå–Top Nå¯¹åº”çš„ç‰©å“æ¨èç»™ç”¨æˆ·\n\n\n# å®ä¾‹è¯´æ˜\nä¾‹å¦‚ç°åœ¨æœ‰ä¸€ä»½è¯„åˆ†æ•°æ®ï¼Œè¡¨ç¤ºç”¨æˆ·å¯¹ç”µå½±çš„è¯„åˆ†ï¼š\n\n - | a | b | c | d | e\n --- | --- | --- | ----|--- | ---\nU1 | 2 | 3 | 3 | 4 | \nU2 |  | 4 | 2 | 3  | 3\nU3 | 4 | 2 | 3 |  | 2\nU4 | 3 |  | 5 | 4 | 3\n\nç°åœ¨æˆ‘ä»¬æ¥é¢„æµ‹é¢„æµ‹æ¯ä¸ªç”¨æˆ·å¯¹æœªè¯„åˆ†ç”µå½±çš„è¯„åˆ†ã€‚\n\nStep1: è®¡ç®—ç‰©å“ä¹‹é—´çš„è¯„åˆ†åå·®ï¼Œä»¥U1ä¸ºä¾‹ï¼š\n$$\nR(a,b) = \\frac{ (2-3) + (4-2) }{ 2 } = 0.5\n$$\n$$\nR(a,c) = \\frac{ (2-3) + (4-3) +(3-5) }{ 3 } = -0.67\n$$\n$$\nR(a,d) = \\frac{ (2-4) + (3-4) }{ 2 } = -1.5\n$$\n$$\nR(a,e) = \\frac{ (4-2) + (3-3) }{ 2 } = 1\n$$\n\nåŒç†å¯ä»¥è®¡ç®—å‡ºç”µå½±bï¼Œcï¼Œdï¼Œeä¸å…¶ä»–ç”µå½±çš„è¯„åˆ†åå·®ã€‚\n\nStep2: è®¡ç®—ç”¨æˆ·å¯¹æœªè¯„åˆ†ç‰©å“çš„å¯èƒ½è¯„åˆ†ï¼ˆä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œè¿™é‡Œä»¥U2ä¸ºä¾‹ï¼‰\n\nç”±ä¸Šè¡¨å¯çŸ¥ï¼Œç”¨æˆ·U2 å¯¹ç”µå½±aæ²¡æœ‰è¯„åˆ†ï¼Œè¿™é‡Œè®¡ç®—ç”¨æˆ·U2å¯¹ç”µå½±açš„è¯„åˆ†ã€‚\n\n$$\np_{u_2,a} = \\frac{2 *  (4-0.5) +3 * (2-(-0.67)) + 2 * (3-(-1.5) ) + 2 * (3-1))    }{ 2+3+2+2}  = 3.11\n$$\n\nStep3: è¯„åˆ†æ’åº\n\nç”±äºç»™å®šæ ·ä¾‹ä¸­ï¼ŒU2åªå¯¹aæ²¡æœ‰è¯„è¿‡åˆ†ï¼Œæ‰€ä»¥è¿™é‡Œä¸éœ€è¦è¿›è¡Œæ’åºï¼Œæ­£å¸¸çš„è¯ï¼ŒæŒ‰åˆ†æ•°è¿›è¡Œå€’æ’å°±è¡Œã€‚\n\n# ä»£ç å®ç°\n\nè¿™é‡Œé‡‡ç”¨Pythonå®ç°ï¼Œåœ¨å®ç°è¿‡ç¨‹ä¸­å¹¶æ²¡æœ‰è€ƒè™‘ç®—æ³•çš„å¤æ‚åº¦é—®é¢˜ã€‚\n\nåŠ è½½æ•°æ®\n```\n    def loadData(self):\n        user_rate = {\n            \"U1\": {\"a\": 2, \"b\": 3, \"c\": 3, \"d\": 4},\n            \"U2\": {\"b\": 4, \"c\": 2, \"d\": 3, \"e\": 3},\n            \"U3\": {\"a\": 4, \"b\": 2, \"c\": 3, \"e\": 2},\n            \"U4\": {\"a\": 3, \"c\": 5, \"d\": 4, \"e\": 3}\n        }\n        item_rate = {\n            \"a\": {\"U1\": 2, \"U3\": 4, \"U4\": 3},\n            \"b\": {\"U1\": 3, \"U2\": 4, \"U3\": 2},\n            \"c\": {\"U1\": 3, \"U2\": 2, \"U3\": 3, \"U4\": 5},\n            \"d\": {\"U1\": 4, \"U2\": 3, \"U4\": 4},\n            \"e\": {\"U2\": 3, \"U3\": 2, \"U4\": 3}\n        }\n        return user_rate,item_rate\n```\n\nè®¡ç®—ç‰©å“ä¹‹é—´çš„è¯„åˆ†åå·®\n```\n    def cal_item_avg_diff(self):\n        avgs_dict = {}\n        for item1 in self.item_rate.keys():\n            for item2 in self.item_rate.keys():\n                avg = 0.0\n                user_count = 0\n                if item1 != item2:\n                    for user in self.user_rate.keys():\n                        user_rate = self.user_rate[user]\n                        if item1 in user_rate.keys() and item2 in user_rate.keys():\n                            user_count += 1\n                            avg += user_rate[item1] - user_rate[item2]\n                    avg = avg / user_count\n                avgs_dict.setdefault(item1,{})\n                avgs_dict[item1][item2] = avg\n        return avgs_dict\n```\nè®¡ç®—é¢„ä¼°è¯„åˆ†\n```\n    def item_both_rate_user(self, item1, item2):\n        count = 0\n        for user in self.user_rate.keys():\n            if item1 in self.user_rate[user].keys() and item2 in self.user_rate[user].keys():\n                count += 1\n        return count\n\n    def predict(self, user, item, avgs_dict):\n        total = 0.0 # åˆ†å­\n        count = 0   # åˆ†æ¯\n        for item1 in self.user_rate[user].keys():\n            num = self.item_both_rate_user(item, item1)\n            count += num\n            total += num * (self.user_rate[user][item1] - avgs_dict[item][item1])\n        return total/count\n```\nä¸»å‡½æ•°è°ƒç”¨\n```\nif __name__ == \"__main__\":\n    slope = SlopeOne()\n    avgs_dict = slope.cal_item_avg_diff()\n    result = slope.predict(\"U2\", \"a\", avgs_dict)\n    print(\"U2 å¯¹ açš„é¢„æµ‹è¯„åˆ†ä¸º: %s\" % result)\n```\n\næ‰“å°ç»“æœä¸ºï¼š\n```\nU2 å¯¹ açš„é¢„æµ‹è¯„åˆ†ä¸º: 3.111111111111111\n```\nå’Œä¸Šè¾¹æˆ‘ä»¬è®¡ç®—çš„ç»“æœä¸€è‡´ã€‚\n\nå®Œæ•´ä»£ç åœ¨ï¼šhttps://github.com/Thinkgamer/Machine-Learning-With-Python/tree/master/Recommend\n\n# Slope Oneçš„åº”ç”¨åœºæ™¯\n\nè¯¥ç®—æ³•é€‚ç”¨äºç‰©å“æ›´æ–°ä¸é¢‘ç¹ï¼Œæ•°é‡ç›¸å¯¹è¾ƒç¨³å®šå¹¶ä¸”ç‰©å“æ•°ç›®æ˜æ˜¾å°äºç”¨æˆ·æ•°çš„åœºæ™¯ã€‚æ¯”è¾ƒä¾èµ–ç”¨æˆ·çš„ç”¨æˆ·è¡Œä¸ºæ—¥å¿—å’Œç‰©å“åå¥½çš„ç›¸å…³å†…å®¹ã€‚ \n\nå…¶ä¼˜ç‚¹ï¼š \n\n- ç®—æ³•ç®€å•ï¼Œæ˜“äºå®ç°ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ï¼› \n- å¯ä»¥å‘ç°ç”¨æˆ·æ½œåœ¨çš„å…´è¶£çˆ±å¥½ï¼› \n\nå…¶ç¼ºç‚¹ï¼š \n- ä¾èµ–ç”¨æˆ·è¡Œä¸ºï¼Œå­˜åœ¨å†·å¯åŠ¨é—®é¢˜å’Œç¨€ç–æ€§é—®é¢˜ã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n---\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n----\n\n<center>\n<font color=red>æ³¨ï¼šã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹å·²ç»åœ¨äº¬ä¸œä¸Šçº¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è¿›è¡Œå…³æ³¨ï¼</font>\n</center>\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20190708234949217.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=40% />\n</center>","tags":["Sparkä¸æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€æŠ€æœ¯åˆ†äº«ã€‘ä½ æƒ³çŸ¥é“çš„ç½‘æ˜“äº‘éŸ³ä¹æ¨èæ¶æ„è§£æï¼Œéƒ½åœ¨è¿™é‡Œï¼","url":"/2019/08/01/Share/ã€æŠ€æœ¯åˆ†äº«ã€‘ä½ æƒ³çŸ¥é“çš„ç½‘æ˜“äº‘éŸ³ä¹æ¨èæ¶æ„è§£æï¼Œéƒ½åœ¨è¿™é‡Œï¼/","content":"\n> æœ¬æ–‡é€‰è‡ªç½‘æ˜“äº‘éŸ³ä¹æ¨èç®—æ³•è´Ÿè´£äºº-è‚–å¼ºå‰è¾ˆåœ¨å…¨çƒäººå·¥æ™ºèƒ½å³°ä¼šä¸Šçš„åˆ†äº«ï¼Œä¸»è¦ä»‹ç»äº†ä¸‰æ–¹é¢ï¼šå…³äºç½‘æ˜“äº‘éŸ³ä¹ï¼ŒAIç®—æ³•åœ¨éŸ³ä¹æ¨èä¸­çš„åº”ç”¨å’ŒAIåœºæ™¯ä¸‹çš„éŸ³ä¹æ€è€ƒã€‚è¿™é‡Œæ‹¿æ¥åˆ†äº«ç»™å¤§å®¶ï¼Œå¹¶åŠ ä¸Šè‡ªå·±çš„ç†è§£ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚\n\n<!--More-->\n\n> é¦–å…ˆè¯´æ˜æˆ‘æ˜¯ç½‘æ˜“äº‘éŸ³ä¹çš„æ·±åº¦ç”¨æˆ·ï¼Œç›®å‰çº§åˆ«LV9ï¼Œæ¯å¤©éƒ½ä¼šå»å¬æ—¥æ¨ã€‚å–œæ¬¢ç½‘æ˜“äº‘éŸ³ä¹çš„åŸå› ä¸ä»…æ˜¯å‹å¥½çš„ç”¨æˆ·äº¤äº’è®¾è®¡ï¼Œè€Œä¸”è¿˜æ˜¯å› ä¸ºåœ¨ç½‘æ˜“äº‘éŸ³ä¹ä¸­èƒ½çœ‹åˆ°ä¸€ä¸ªä¸ªé™Œç”Ÿçš„æ•…äº‹ã€‚è™½ä¸çŸ¥è¿™äº›æ•…äº‹æ˜¯çœŸæ˜¯å‡ï¼Œä½†æ€»ä¼šæ‰¾åˆ°ä¸€äº›å…±é¸£ï¼Œåœ¨è¿™é‡Œåƒæ˜¯ä¸€ä¸ªå¿ƒçµçš„å¯„æ‰˜ä¸€æ ·ã€‚æˆ‘ç›¸ä¿¡å¤§å¤šæ•°äººå’Œæˆ‘ä¸€æ ·ï¼Œå–œæ¬¢åœ¨æ•²ä»£ç çš„æ—¶å€™æˆ´ä¸Šè€³æœºï¼Œæ¥ä¸€ä¸ªç‡¥ä¸€ç‚¹çš„éŸ³ä¹ï¼Œæ‰€æœ‰çš„äº‹æƒ…ä¸æˆ‘æ— å…³ï¼Œæˆ‘åªæƒ³ä¸“å¿ƒå†™ä»£ç ï¼Œå“ˆå“ˆï¼Œå¼€ç¯‡å°å°çš„é¢˜å¤–è¯ï¼Œä¸‹é¢è¿›å…¥æ­£é¢˜ã€‚\n\nÂ \n\nå…³äºæœ¬æ–‡çš„PDFï¼Œå¯å…³æ³¨å…¬å·Â åˆä½œ=>ç§ä¿¡ è·å–å°ç¼–å¾®ä¿¡ï¼Œç§èŠè·å–ï¼\n\næœ¬æ–‡å°†ä»ä¸‰ä¸ªæ–¹é¢ä»‹ç»AIç®—æ³•åœ¨ç½‘æ˜“äº‘éŸ³ä¹æ¨èä¸­çš„åº”ç”¨ï¼š\n- å…³äºç½‘æ˜“äº‘éŸ³ä¹\n- AIç®—æ³•åœ¨éŸ³ä¹æ¨èä¸­çš„åº”ç”¨\n- éŸ³ä¹åœºæ™¯ä¸‹çš„AIæ€è€ƒ\n\n---\n\n# å…³äºç½‘æ˜“äº‘éŸ³ä¹\n> å…³äºç½‘æ˜“äº‘éŸ³ä¹çš„ä»‹ç»å°±ä¸ç”¨å¤šè¯´äº†ï¼Œç›¸ä¿¡å¤§å®¶éƒ½çŸ¥é“è¿™ä¸ªäº§å“ã€‚ä½†æ˜¯è¿™ä¸ªäº§å“é‡Œè¾¹ä¹Ÿæœ‰å¾ˆå¤šå…¶ä»–çš„ä¸šåŠ¡ï¼Œå¦‚ä¸‹è¿™äº›ã€‚å½“ç„¶æ¨èä¹Ÿä¼šåœ¨å„ä¸ªä¸šåŠ¡çº¿è¿›è¡Œåº”ç”¨ï¼Œæœ€å¤§åŒ–çš„æé«˜ç”¨æˆ·ä½“éªŒã€‚\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbjlOWUpEU3laT0hGUkZERGJ1WGdWajdLdnBtWkNXaGY3S3Rvem5kZlQ1T3ZyT0tQMUdpY0tBalEvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbnBqYjhlUFhSakVEekV3SHFSUXBjSnB6NkROVnBFc01ZYzNSYWFHMlhYblNMaWIybDB4TjB3UFEvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbjdYNnlYdlQySjk0OGROcXAzbUZNTHo1S3Bnd0d2ZUhobWsxaWFMZ0pGMWJLb3VQbW5FQkloMncvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n# AIç®—æ³•åœ¨éŸ³ä¹æ¨èä¸­çš„åº”ç”¨\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbjR5ZTFNaWFxckt2d1lBVGp0SUQ2ZlJKREFRQWljeGpFV3h3VHZkSGljUkk1WFFic2xpY3h1Y2xYZ1EvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n> é™¤äº†ä¸Šå›¾ä¸­ä»‹ç»çš„ä¸‰ä¸ªåœºæ™¯ä»¥å¤–ï¼Œæ¨èåœ¨äº‘éŸ³ä¹è¿˜æœ‰å…¶ä»–å¾ˆå¤šçš„åº”ç”¨ï¼Œæ¯”å¦‚æ¨èçš„MV/è§†é¢‘ï¼Œæ¨èçš„ç”µå°ï¼Œæ¨èçš„Lookç›´æ’­ç­‰ã€‚\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbjVMemc4MFg5RERWa053RVZpY01lUWNkc3dXRzJFT25QOXl2WXRBZldJbXlJdjNQUW9Rbk1WTVEvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbkt2U1htcGJ3c3JzWlE1SVNpYUZnUWhpY3hGNFg0bjB0amhBaFpMZXlpYm5EbnhpYWo3SGlicHRmcEtnLzY0MD93eF9mbXQ9cG5n\"> </center>\n\n> å‡ ä¹æ‰€æœ‰çš„æ¨èç³»ç»Ÿæˆ–è€…ä¸šåŠ¡ç³»ç»Ÿçš„åˆ†æå’Œåº•å±‚æ•°æ®æ”¯æŒéƒ½ç¦»ä¸å¼€ç”¨æˆ·çš„è¡Œä¸ºæ—¥å¿—ï¼Œåœ¨å¯¹åŸºç¡€çš„æ—¥å¿—è¿›è¡ŒETLå¤„ç†ä¹‹åï¼Œè¿›è¡Œæ•°ä»“çš„å­˜å‚¨ï¼Œç”»åƒæ¨¡å‹ï¼Œç‰¹å¾å·¥ç¨‹ç­‰å‡åŸºäºè¿™ä¸ªæ—¥å¿—æ¥è¿›è¡Œæ„å»ºã€‚\n\n<br/>\n> åœ¨æ­¤ä¹‹ä¸Šè¿™æ˜¯æ¨èç³»ç»Ÿçš„å¬å›æ¨¡å—ï¼Œç„¶åè¿›è¡Œç²—æ’ï¼Œç²¾æ’å’Œå±•ç¤ºã€‚è¿™æ˜¯æ‰€æœ‰æ¨èç³»ç»Ÿçš„é€šç”¨æ¶æ„ï¼Œç„¶åå„ä¸ªå…¬å¸ï¼Œå„ä¸ªéƒ¨é—¨ä¼šåœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œé€‚åˆå„è‡ªä¸šåŠ¡çš„å¼€å‘å’Œç²¾ç»†åŒ–åº”ç”¨ï¼Œä»¥é€‚åº”å…·ä½“çš„éœ€æ±‚ï¼Œç»§è€Œæœ€å¤§åŒ–çš„å‘æŒ¥æ¨èç³»ç»Ÿçš„ä»·å€¼ã€‚\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbll5WnBPaWFoU1JqWWhLRHVXdkYzVVNpY0pSbGlieUxIQ1E2TnJtSEdpYWhpYW41YVdvWGlhcWFybWt6US82NDA_d3hfZm10PXBuZw\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjblpFS3IzMUJ3TnVpYzhrd0hOS0FHUzNscnFVaWNhREtLS3ZiQVB4WmxWQld3SEJMWnZ5eWgyek1nLzY0MD93eF9mbXQ9cG5n\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbnhKaWFXbmw3V3hkWXRHOWt4aWNJMk85RzMyQ0NmVzk1SzQyQXFaOTN4dWt2aWNJMHdaSlJGWXVzQS82NDA_d3hfZm10PXBuZw\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbnRSaGY4a2lhcjZqSXVYNmFjTWxCWG5tMUlUMEVFYXhzTlFNRE1WWUgwV2Fub29OOG80NjUyU0EvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbjc1dXNibmJFeUJJdlZZZkdodE41aWFzbnYwN05IVGI1YnRUNjRwWThpY29xRFFiV1NJN3hIbzNRLzY0MD93eF9mbXQ9cG5n\"> </center>\n\n> ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œæ¨èçš„ä¾§é‡ç‚¹å’Œå®ç°æ–¹æ³•æ˜¯ä¸ä¸€æ ·çš„ã€‚éŸ³ä¹æ¨èï¼Œè§†é¢‘æ¨èï¼Œå•†å“æ¨èï¼Œæ–°é—»æ¨èç­‰ï¼Œè¿™äº›å„è‡ªæœ‰å„è‡ªçš„ç‰¹ç‚¹ï¼ŒéŸ³ä¹æœ¬èº«çš„å¤æ‚æ€§ï¼Œå°±è¦è¦æ±‚ç³»ç»Ÿèƒ½å¤Ÿæ›´å¥½çš„ç†è§£éŸ³ä¹ï¼Œç½‘æ˜“äº‘éŸ³ä¹åˆ™ä¸»è¦ä»NLPå’Œè§†é¢‘ï¼Œå›¾åƒå±‚é¢å»ç†è§£éŸ³ä¹ã€‚\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbkhPZWV6dVRaMmRxb2Uwa0swbTdweGE1VWRqdTE5VkJsUGljaWI3R2ljQ2ljUWdkeFQ0TFB4a21pYlFBLzY0MD93eF9mbXQ9cG5n\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbjZ4UFNHY25qemVUdURhSzlyTGlhY2hKc2FicE5mTXRKbTBtRXd2MkFaZHYzTjV6SndKYzU3T3cvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n> ä¼ ç»Ÿçš„CFç®—æ³•åº”ç”¨çš„æ˜¯ä½™å¼¦ç›¸ä¼¼åº¦æˆ–è€…Jaccardè·ç¦»è¿›è¡Œè®¡ç®—ï¼Œäº‘éŸ³ä¹è¿™é‡Œåˆ™å¯¹å…¶ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå…¶è®¡ç®—å…¬å¼å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸ä¼ ç»Ÿç›¸æ¯”ï¼Œæ•ˆæœæå‡æ˜¾è‘—ã€‚PSï¼šCFå³ååŒè¿‡æ»¤ï¼Œè™½ç„¶ä¼ ç»Ÿï¼Œä½†æ˜¯åœ¨æ¨èä¸­æ‰®æ¼”çš„è§’è‰²è‡³å…³é‡è¦ã€‚\n\n> æ¥ä¸‹æ¥ä¸»è¦ä»‹ç»ä¸‹äº‘éŸ³ä¹ä¸­çš„æ’åºæ¨¡å‹ï¼Œå…¶ç»å†äº†çº¿æ€§æ¨¡å‹ï¼Œæ ‘æ¨¡å‹ï¼ŒFTRLï¼Œæ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œæ·±åº¦æ—¶åºæ¨¡å‹ã€‚PSï¼šä¸è¿‡åœ¨è¿™é‡Œå°ç¼–è¦æé†’çš„ï¼Œåšæ’åºæ¨¡å‹è¦ä¸€æ­¥ä¸€ä¸ªè„šå°ï¼Œä¸€æ­¥ä¸€æ­¥æ¥ï¼Œæˆ‘ä»¬ä¸å¯èƒ½åœ¨å»ºè®¾æ¨èç³»ç»Ÿä¹‹æ—¶ï¼Œç›´æ¥ä¸Šæ·±åº¦å­¦ä¹ ï¼Œå› ä¸ºåªæœ‰ç»å†è¿‡æ¯ä¸ªé˜¶æ®µçš„æ’åºæ¨¡å‹ï¼Œæˆ‘ä»¬æ‰èƒ½æ›´å¥½çš„å»ç†è§£ä¸šåŠ¡ï¼Œå»æå‡ä¸šåŠ¡ã€‚\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbmZSMjdmYXg0dThRMkFtcjNLTk9OMVc3QWREdHQ5UmhpYlh4QjZFZU1ya1pjemlhSjBoNXNMWEh3LzY0MD93eF9mbXQ9cG5n\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbkgwMU9vQmpVWUtwNHl4NkZWd200djBOS1NWN1c2U0FNMWNXdGlhODVBbGMxRFlpYmVTTGlhTU9aQS82NDA_d3hfZm10PXBuZw\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbmZOT1FzTEgxR0poTUE1NWliN2xpYzNKWlZaSjlxV2J6bUtWN3Q2NEk3VFdTbzVEbXJMUFEwZ1l3LzY0MD93eF9mbXQ9cG5n\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbk1rVWR5cHRHV201b0x6NjJHckhFbldFY2liM2F2VEVSN1d1SjQzYU12bXdsNXNFdjBUVUdVbHcvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjblpqSXdNeWo0TDRHbVVnZkpDcURrODFLaWJmd2ljVUtyNVFkaWJBVUtqc21nQTlIVGtpYlJONXVQMXcvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbnhpY2tDaWF3ODM2c3pLZ3IzVFJrU2VxZFU2VkhYQnk4aG9vZ3M3ZFpZaWF4R0w2eTQ1c25obzZpYUEvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbm11aWNRS3d3ZU96UnV4aWNONGd0OWtudHRUZE5BSmtsbVVtZlJQbE1oMXZxSFI4OTRVaDhyeGJBLzY0MD93eF9mbXQ9cG5n\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbnpvUE1oamxxcW9XTXpMVmtiTXk1NGljR1VobFQzcWptVHI4cmpjYkk3ZUluaFRxbVpsamtzc3cvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbnZBdTh6S1dpYzBiTmZGZWRmeGx3cUNpY0hwSkFQalpnUmpIU2ZsNUpCRmFnTXEwdVdTODVpY3ZmQS82NDA_d3hfZm10PXBuZw\"> </center>\n\n# éŸ³ä¹åœºæ™¯ä¸‹çš„AIæ€è€ƒ\n> å½“æŸç§ç®—æ³•åœ¨æ¨èä¸­å‘æŒ¥çš„ä»·å€¼å¾ˆéš¾å†è¿›è¡Œæå‡æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œçš„æ˜¯ä¸šåŠ¡çš„æ·±å±‚æ¬¡çš„æ€è€ƒå’Œå¯¹æ›´åŠ æœ‰æ•ˆæˆ–è€…å…ˆè¿›çš„ç®—æ³•è¿›è¡Œæ¢ç´¢ã€‚\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbmlhbE1WdFhZMzgzUkNqUkx0MTZGSGJHOWgzaldtTEtHWXJQY3hQZ1Z4QWw5QzJnMzRtRWhZd1EvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbnhJb2pQSmgyWFhKWWh1TVBVemNuRjM3dDlmQnNnWGszaG5VaHlNeGt5UEhSS3c0ZnhDRlhnZy82NDA_d3hfZm10PXBuZw\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjblp4alJLWkN0aGFxc0dKQnEyb1BJSnFTUmNtMzB5RndIMXpvN3FyZWh3czFtWFFEWDNXRkRLQS82NDA_d3hfZm10PXBuZw\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbkdYaWJkQjlUVm9KaWE3OEdoSWxTdGlhSkpxeFBVOXFjcDNscko2VHc5UzNOQ2JpY2liU1pCUkJ1S1d3LzY0MD93eF9mbXQ9cG5n\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbklQaWNpYWZLWnVtemVBcVFma0o4dnZwcVpiTzVNOGp1Q2w5YXdlUzJ0UnRyTHNQNzhEbEptaWM1US82NDA_d3hfZm10PXBuZw\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjblRpY2xTZWt0ejNKY29pYUdLWkhPRGliRzFJaWNIbnEyQlBHWDYzSTFSYXZZd2FoaWFaZzJKZHJtSzNBLzY0MD93eF9mbXQ9cG5n\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNqaENmc1J6NEJjdWh5Y3JpYloxRTFjbnZGSlBCUDhSME1SWGhydjUya3FtYUk3NEZLWHRKcUYzZEVKeFFhMm12d0lRUmdmc3BQaGVlUS82NDA_d3hfZm10PXBuZw\"> </center>\n\n---\n\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n\n---\n<font color=red>æ³¨ï¼šã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹æ˜¯å°ç¼–çš„æœ€æ–°å‡ºç‰ˆçš„æŠ€æœ¯å›¾ä¹¦ï¼Œå·²ç»åœ¨äº¬ä¸œï¼Œå½“å½“ä¸Šçº¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è¿›è¡Œè´­ä¹°é˜…è¯»ï¼</font>\n<center><img src=\"https://img-blog.csdnimg.cn/20190708234949217.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=50% /></center>\n","tags":["æŠ€æœ¯åˆ†äº«"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€æŠ€æœ¯åˆ†äº«ã€‘ç¾å›¢å¤–å–çš„å•†ä¸šå˜ç°çš„æŠ€æœ¯æ€è€ƒå’Œå®è·µ","url":"/2019/08/01/Share/ã€æŠ€æœ¯åˆ†äº«ã€‘ç¾å›¢å¤–å–çš„å•†ä¸šå˜ç°çš„æŠ€æœ¯æ€è€ƒå’Œå®è·µ/","content":"> æœ¬æ–‡é€‰è‡ªç¾å›¢-ç‹æ°¸åº·å‰è¾ˆåœ¨å…¨çƒäººå·¥æ™ºèƒ½å³°ä¼šä¸Šçš„åˆ†äº«ï¼Œä¸»è¦ä»‹ç»äº†å››æ–¹é¢ï¼šä¸šåŠ¡ä»‹ç»ï¼Œå¹³å°ä¾§æ”¶å…¥ä¼˜åŒ–ï¼Œå•†å®¶ä¾§è½¬åŒ–ä¼˜åŒ–å’Œç”¨æˆ·ä¾§ä½“éªŒä¼˜åŒ–ã€‚è¿™é‡Œæ‹¿æ¥åˆ†äº«ç»™å¤§å®¶ï¼Œå¹¶åŠ ä¸Šè‡ªå·±çš„ç†è§£ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚\n\n<!--More-->\n\næœ¬æ–‡å°†ä»å››ä¸ªæ–¹é¢ä»‹ç»ç¾å›¢å¤–å–å•†ä¸šå˜ç°å®è·µï¼š\n- ä¸šåŠ¡ä»‹ç»\n- å¹³å°ä¾§ï¼šæ”¶å…¥ä¼˜åŒ–\n- å•†å®¶ä¾§ï¼šè½¬åŒ–ä¼˜åŒ–\n- ç”¨æˆ·ä¾§ï¼šä½“éªŒä¼˜åŒ–\n\n# ä¸šåŠ¡ä»‹ç»\né¦–å…ˆä»‹ç»äº†ç¾å›¢å¤–å–çš„ä¸šåŠ¡æƒ…å†µï¼Œå…¶åŒ…å«äº†å¤–å–å•†å®¶360wï¼Œç”¨æˆ·æ•°3äº¿+ï¼Œæ—¥æ´»è·ƒéª‘æ‰‹æ•°60wï¼Œè¦†ç›–åŸå¸‚2500+ã€‚å…¶æ¬¡ä»‹ç»äº†å¤–å–çš„ä¸šåŠ¡å½¢æ€ï¼ŒåŒ…å«ï¼š\n- å±•ç¤ºå¹¿å‘Š\n- æœç´¢å¹¿å‘Š\n- feedæµå¹¿å‘Š\n- æ¶ˆæ¯pushå¹¿å‘Š\n\nå…¶å¹¿å‘Šçš„è½¬åŒ–å½¢å¼ç”±æ›å…‰åˆ°ç‚¹å‡»å†åˆ°ä¸‹å•ï¼Œåˆ™ä¸ºä¸€æ¡æœ‰æ•ˆçš„è½¬åŒ–ã€‚å…¶ä¸­æ¶‰åŠçš„åæ¬¡å«ä¹‰ä¸ºï¼š\n- CPTï¼šCost Per Timeï¼ˆæˆæœ¬/æ—¶é—´ï¼‰ï¼Œå³æŒ‰æ—¶é•¿è®¡è´¹å¹¿å‘Šã€‚æŒ‰æ—¶é•¿è®¡è´¹æ˜¯åŒ…æ—¶æ®µåŒ…ä½ç½®æŠ•æ”¾å¹¿å‘Šçš„ä¸€ç§å½¢å¼ã€‚\n- GDï¼šGuarentee Deliveryï¼ˆä¿è¯äº¤è´§ï¼‰ï¼Œä¿è¯é€’é€çš„å¹¿å‘Šï¼Œå³ä¿é‡å¹¿å‘Šï¼ŒæŒ‰å±•ç¤ºé‡å®šä»·ã€‚\n- CPMï¼šCost Per Milleï¼ˆæˆæœ¬/åƒæ¬¡ï¼‰ï¼Œåƒæ¬¡å±•ç¤ºæˆæœ¬ï¼Œå³æŒ‰å±•ç¤ºä»˜è´¹ã€‚\n- CPCï¼šCost Per Clickï¼ˆæ¯æ¬¡ç‚¹å‡»æˆæœ¬ï¼‰ï¼Œæ¯æ¬¡ç‚¹å‡»æˆæœ¬ï¼ŒæŒ‰ç‚¹å‡»ä»˜è´¹ï¼Œå¦‚å…³é”®è¯å¹¿å‘Šã€‚\n- CPAï¼šCost Per Actionï¼ˆæ¯æ¬¡è¡Œä¸ºæˆæœ¬ï¼‰ï¼ŒCPAè®¡ä»·æ–¹å¼æ˜¯æŒ‡æŒ‰å¹¿å‘ŠæŠ•æ”¾å®é™…æ•ˆæœï¼Œå³æŒ‰å›åº”çš„æœ‰æ•ˆé—®å·æˆ–å®šå•æ¥è®¡è´¹ï¼Œè€Œä¸é™å¹¿å‘ŠæŠ•æ”¾é‡ã€‚\n\n\n\nå¦å¤–è¡¥å……ä¸¤ä¸ªåæ¬¡å«ä¹‰ï¼š\n- oCPCï¼šoptimization Cost Per Clickï¼ˆæ¯æ¬¡ç‚¹å‡»ä¼˜åŒ–æˆæœ¬ï¼‰ï¼Œç›®æ ‡è½¬åŒ–æˆæœ¬ï¼Œä»æŒ‰ç‚¹å‡»ä»˜è´¹ã€‚\n- åˆ·æ¬¡ï¼šç”¨æˆ·åœ¨APPä¿¡æ¯æµç•Œé¢ï¼Œæ‰‹æŒ‡æ¯æ¬¡ä¸‹æ»‘åˆ·æ–°ï¼Œå«åšä¸€æ¬¡åˆ·æ¬¡ã€‚\n\nåŒæ—¶ä»‹ç»äº†è®¡ç®—å¹¿å‘Šçš„æ ¸å¿ƒâ€”â€”æœ€ä½³åŒ¹é…ã€‚â€‹\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRmVaTEZwVGI1aWFMc1NPaWJYU25ITTMxMHdFY21YbmJpY1F2VTRkZTc5eHZZZlFlZUxSd3NuMDJwZy82NDA_d3hfZm10PXBuZw\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRlh2MFl5NTZWUXhVZHFoN0c5c0o1WTVOZjB1Ynh4TEhYUE1MNjVITWRVMVNpYmlhVnVsQWpPcHFnLzY0MD93eF9mbXQ9cG5n\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRlJJN1lHeTJnaWN2bUxmbUo2bjBPUDJKTDBjVFdjV1JYWkpRb1JRc3E1ZWh0eVhHNkxZb2ljcnlRLzY0MD93eF9mbXQ9cG5n\"> </center>\n\n\n\n# å¹³å°ä¾§ï¼šæ”¶å…¥ä¼˜åŒ–\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRlc2V3hpYldBbDVGWE13Yk9KUFBlSWU3ajNsTlJvcnNDRFhtcTJPckFESnhCZkFDa0tydzVmcFEvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRlhYM1IxY203U1FxOG54RDI2ME9xV2lhaDJCak93R3pONjQyM3hqTXdCaWJVcDdVdWd3NUtPTVBRLzY0MD93eF9mbXQ9cG5n\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRlZZM2ljVjZpYWxuTGV5eDFYR0xQMXA2Y3ZpYWx5YXZrWVM0U1NXSW1QVUduVEV6aWJBcGFjMGhLdHcvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRjFkbWN5akM0MFdySjI3MjlITTFPSkQyZ1p5d1prWW5PQlo5ZVRUdUhuOWlhRzl2bGpaMmEzYXcvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRmdEa210OW9lMzY1WktaRjI2RUd2Q0VwVDhBNUxrV0VweGlhdkk5ODg1SkVTeVZsc3ZadWgyNHcvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRnB0elhHMUdqcWlicGliaGZhejQ5SUl1YmE1aWNlcGVIdHl6cWFjY1NsbHlWZjczMFZJM0tVTkdNQS82NDA_d3hfZm10PXBuZw\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRmhEeUFTZVpFWVRERFlpY2VFR3BlaHJpYnpvbDhqUG9UcEFPaWF0OGljVFc4RUxIQjc0Yng4YVpSblEvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n> éœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œæåˆ°äº†ä¸€ä¸ªä½¿ç”¨Side Informationæ¡†æ¶è§£å†³å†·å¯åŠ¨çš„æ–¹æ³•ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥è‡ªå·±ç ”ç©¶ä¸‹ä»€ä¹ˆæ˜¯side information\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRjNTc2tmTjFiV21jeUNlZXV6NGZQTHVQQkk2Nm82aWM1OGNxczZnV0xINUhhRmdQOGEzWjVxdUEvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n> è¿™é‡ŒåŸºäºç”¨æˆ·çš„è¡Œä¸ºåºåˆ—æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨wode2vecï¼ŒLSTMï¼ŒVGGï¼ŒInceptionè¿›è¡ŒEmbeddingåºåˆ—çš„ç”Ÿæˆ\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRk93NFRUNkROWEZLVjZoVVlRY3IxcldFWHVxeTNpYmM2VlR6UUFhc0VSa1RDR2liWlVnbmJkS3VnLzY0MD93eF9mbXQ9cG5n\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRlB5d1VtazA3YXlBTlhaa2N3NVBFbjNJUnp3c0drYXo0TVFiRWZGRlJRcWh3T2lja085UlFXVHcvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRkhyVUNRaEtxcWREbDV1cXAzcFhxRHNaaGRQUGlhM2ZzSklrV04wa2lhTXUwb3JuRUtMYXhsTzFBLzY0MD93eF9mbXQ9cG5n\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRkRYMmh1S1JBNVFvdnBUMkJlbnByZGFpY2ZxYVJFRUk2aWJ6bzVJSjFhNW1naWNiT0xuTEVhSEZnUS82NDA_d3hfZm10PXBuZw\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRnBISFU1Z3dyWGF6cG1DbXRwVHJja3Q5TTlXbk1Ub0JXaWFtQVJ2MHcxamJmdEtOR0t2c2lhczFRLzY0MD93eF9mbXQ9cG5n\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRkZjeG5RU1liOWxCUTVnOWJpYmZ2eHJmTVh0aWFTYXR3ZnFITHpLUkVZcThHMjh5OHdCR0gzaEhnLzY0MD93eF9mbXQ9cG5n\"> </center>\n\n# å•†å®¶ä¾§ï¼šè½¬åŒ–ä¼˜åŒ–\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRnI2QWNiT1ZpYlo2VUxNQk1FeE15TzVkNmhndWliRWxUYlBLMFQzNkxqMFFIbTgzOVNQNVJxaWJLUS82NDA_d3hfZm10PXBuZw\"> </center>\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRklGTmJoS0dQVTBnOER2dmNsbVdEZTVIMEVpYThHRmN0eVJsNzRUQ3lwdVI1N0ljQXN3aWFZRFVBLzY0MD93eF9mbXQ9cG5n\"> </center>\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRnZMSlBGWFNpYnB6bkQ5aWNkUHhEbGpQSVhVUmliMGRyTzl6a0xrVkVQSXd1V1NncEhTU0tVaWJqNUEvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRmFSNEVJSUpVZFFoVHozY05ZaWNTdHNRcWY4VThLY0xZMVIwZ29iZFhqWHFmTno1NkhpY0ZOdHlRLzY0MD93eF9mbXQ9cG5n\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRmRDVEhJbXEzb3JqeGljb2REbnBFd2liUVNadU5TcjZ1bWZYWU9kaDNrTjlpYW5JVmpsWmhrWnpIUS82NDA_d3hfZm10PXBuZw\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRnE4emlhRUloV0Q4aWJhWThibE5pYlh2YUNPWjhQUTNra09ZUk5UUHROaWNnZjJvWkNWMW5xRVpGVHcvNjQwP3d4X2ZtdD1wbmc\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X2pwZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRmIxTkFzZUswV29udVFqc1JYWFZpYmpveVBuelBkdk1lMXBxT3ZyTXhWUVNlc28xZmU2aGJ1MGcvNjQwP3d4X2ZtdD1qcGVn\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRjRENTBCUWZNYzRmTjV0R2FtSGZMWU0yVXhVdGlhYVgyNXFXY1pwcWljeUFBRVQ0TElmbkZqN3N3LzY0MD93eF9mbXQ9cG5n\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRktpYWdNdWUxUzlkOHlpYUF3YnZRaEgxaWFTTzNyZFRjdVRhbndIM1BhT0I2YUZ3OThwbXNLU3c3US82NDA_d3hfZm10PXBuZw\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRno4bURaOWw0Rk5BeVdWeExldWxCYk50SDJQbURnT0dyNzJjc2x2TExCMWlia2lidUJ6VERyUkRRLzY0MD93eF9mbXQ9cG5n\"> </center>\n\n# ç”¨æˆ·ä¾§ï¼šä½“éªŒä¼˜åŒ–\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRmljVVU1bW1vaFhzVEhCZDFHWG1BZ055NGtpYWlhbHdpYllkamJJM2d6Ulg0VTRQWXdmN2diaWFPWlJ3LzY0MD93eF9mbXQ9cG5n\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRklORzJTM2t3R0w1UUV1aWFMbno5dk5sdklhY0J5bmNMVENGZ3NEbVp5N2lhclA1RDBnQ284YXZnLzY0MD93eF9mbXQ9cG5n\"> </center>\n\n<center><img src=\"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy8wMmtpY0VXc0luaWNnNXhKNVpXOUJnUmljUkJlZmZ4bzhmRlh4SjZwWFhkR2taS2E3ZFN6cWdJRnhCMHR6M1cyakhOUU1WT2VoTGxaSWZpYmlib2txYTF6dTN3LzY0MD93eF9mbXQ9cG5n\"> </center>\n\n---\n\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n\n---\n<font color=red>æ³¨ï¼šã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹æ˜¯å°ç¼–çš„æœ€æ–°å‡ºç‰ˆçš„æŠ€æœ¯å›¾ä¹¦ï¼Œå·²ç»åœ¨äº¬ä¸œï¼Œå½“å½“ä¸Šçº¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è¿›è¡Œè´­ä¹°é˜…è¯»ï¼</font>\n<center><img src=\"https://img-blog.csdnimg.cn/20190708234949217.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=50% /></center>","tags":["æŠ€æœ¯åˆ†äº«"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"Spark MLlib ä¹‹ æ•°æ®ç±»å‹ä¸å¤§è§„æ¨¡æ•°æ®é›†çš„ç›¸ä¼¼åº¦è®¡ç®—åŸç†æ¢ç´¢","url":"/2019/07/29/Spark/Spark MLlib ä¹‹ æ•°æ®ç±»å‹ä¸å¤§è§„æ¨¡æ•°æ®é›†çš„ç›¸ä¼¼åº¦è®¡ç®—åŸç†æ¢ç´¢/","content":"\n> æœ¬æ–‡å‡ºè‡ªã€Œxingooã€åœ¨åŸæ–‡çš„åŸºç¡€ä¸ŠåŠ ä»¥å°ç¼–è‡ªå·±çš„ç†è§£å½¢æˆçš„å­¦ä¹ ç¬”è®°ï¼Œå¸Œæœ›å¯¹è¯»è€…æœ‰å¸®åŠ©ã€‚åŸæ–‡å‡ºè‡ªï¼š[Spark MLlib ä¹‹ å¤§è§„æ¨¡æ•°æ®é›†çš„ç›¸ä¼¼åº¦è®¡ç®—åŸç†æ¢ç´¢](https://www.cnblogs.com/xing901022/p/9296882.html)\n\n<!--More-->\n\n\n# èƒŒæ™¯\n\næœ€è¿‘å°ç¼–åœ¨åšçš„æ˜¯è®¡ç®—ä¸¤ä¸¤ç”¨æˆ·çš„ç²‰ä¸é‡åˆåº¦ï¼Œæ ¹æ®ç²‰ä¸é‡åˆåº¦å»è¯„ä¼°ä¸¤ä¸ªç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œæ ¹æ®æ¡ä»¶è¿›è¡Œè¿‡æ»¤ä¹‹åå¤§æ¦‚æœ‰3000ä¸ªç”¨æˆ·ï¼Œä½†æ¯ä¸ªç”¨æˆ·çš„ç²‰ä¸é‡å‚å·®ä¸é½ï¼Œæœ‰ä¸Šç™¾ä¸‡çš„ï¼Œæœ‰å‡ åƒçš„ï¼Œè¿™æ ·åœ¨å»æ„å»ºç¬›å¡å°”ç§¯çš„æ—¶å€™ï¼Œè¿›è¡Œç²‰ä¸æ•°æ®å…³è”ï¼Œå¾—åˆ°çš„ç”¨æˆ·é›†å°±ä¼šç‰¹åˆ«å¤§ï¼Œsparkè¿è¡Œçš„æ—¶å€™å°±ä¼šå¾ˆæ…¢ï¼Œè€Œä¸”ä¼šå‡ºç°å¾ˆä¸¥é‡çš„æ•°æ®å€¾æ–œã€‚è¿™ä¸ªæ—¶å€™äº†è§£åˆ°äº†sparkæ”¯æŒçš„æ•°æ®ç±»å‹ï¼Œçœ‹åˆ°äº†CoordinateMatrixï¼Œç„¶åæ·±ç©¶å…¶åŸç†ï¼Œä¾¿çœ‹åˆ°äº†è¿™ç¯‡æ–‡ç« ï¼Œç»è¿‡æ•´ç†å½¢æˆäº†æ­¤æ–‡ã€‚\n\n# Sparkæ”¯æŒçš„æ•°æ®ç±»å‹\n\nå®˜æ–¹æ–‡æ¡£åœ°å€ï¼šhttps://spark.apache.org/docs/latest/mllib-data-types.html\n\n## 1.Local Vectorï¼ˆæœ¬åœ°å‘é‡ï¼‰\n\næœ¬åœ°å‘é‡æ˜¯ä»0å¼€å§‹çš„ä¸‹æ ‡å’Œdoubleç±»å‹çš„æ•°æ®ç»„æˆï¼Œå­˜å‚¨åœ¨æœ¬åœ°æœºå™¨ä¸Šï¼Œæ‰€ä»¥ç§°ä¸ºLocal Vectorã€‚å®ƒæ”¯æŒä¸¤ç§å½¢å¼ï¼š\n- Dense ï¼ˆå¯†é›†çš„å‘é‡ï¼‰\n- Sparse ï¼ˆç¨€ç–çš„å‘é‡ï¼‰\n\næ¯”å¦‚ä¸€ä¸ªå‘é‡[1.0,0.0,3.0]ï¼Œç”¨Denseè¡¨ç¤ºä¸ºï¼š[1.0,0.0,3.0]ï¼Œç”¨Sparseè¡¨ç¤ºä¸ºï¼š(3,[0,2],[1.0,3.0])ï¼Œå…¶ä¸­3ä¸ºå‘é‡çš„é•¿åº¦ï¼Œ[0,2]è¡¨ç¤ºå…ƒç´ [1.0,3.0]çš„ä½ç½®ï¼Œå¯è§sparseå½¢å¼ä¸‹0.0æ˜¯ä¸å­˜å‚¨çš„ã€‚\n\n\n```\nimport org.apache.spark.mllib.linalg.Vectors\n\nval denseVector = Vectors.dense(1.0,0.0,3.0)\nval sparseVector1 = Vectors.sparse(3,Array(0,2),Array(1.0,3.0))\nval sparseVector2 = Vectors.sparse(3,Seq((0,1.0),(2,3.0)))\n\nprintln(s\"DenseVector is : $denseVector\")\nprintln(s\"DenseVector to Sparse is : ${denseVector.toSparse}\")\n\nprintln(s\"sparseVector1 is : $sparseVector1\")\nprintln(s\"sparseVector1 to Dense is : ${sparseVector1.toDense}\")\n\nprintln(s\"sparseVector2 is : $sparseVector2\")\nprintln(s\"sparseVector2 to Dense is : ${sparseVector2.toDense}\")\n```\nè¾“å‡ºä¸ºï¼š\n```\nDenseVector is : [1.0,0.0,3.0]\nDenseVector to Sparse is : (3,[0,2],[1.0,3.0])\n\nsparseVector1 is : (3,[0,2],[1.0,3.0])\nsparseVector1 to Dense is : [1.0,0.0,3.0]\n\nsparseVector2 is : (3,[0,2],[1.0,3.0])\nsparseVector2 to Dense is : [1.0,0.0,3.0]\n```\n## 2. Labeled point(å¸¦æ ‡ç­¾çš„ç‚¹)\n\nlabeled pointç”±æœ¬åœ°å‘é‡ç»„æˆï¼Œæ—¢å¯ä»¥æ˜¯denseå‘é‡ï¼Œä¹Ÿå¯ä»¥æ˜¯sparseå‘é‡ã€‚åœ¨mllibä¸­å¸¸ç”¨äºç›‘ç£ç±»ç®—æ³•ï¼Œä½¿ç”¨doubleç±»å‹æ¥ä¿å­˜è¯¥ç±»å‹çš„æ•°æ®ï¼Œå› ä¸ºä¹Ÿå¯ä»¥ç”¨äºå›å½’å’Œåˆ†ç±»ç®—æ³•ã€‚ä¾‹å¦‚äºŒåˆ†ç±»ï¼Œlabelå¯ä»¥æ˜¯0ï¼ˆè´Ÿä¾‹ï¼‰æˆ–1ï¼ˆæ­£ä¾‹ï¼‰ï¼Œå¯¹äºå¤šåˆ†ç±»ï¼Œlabelå¯ä»¥æ˜¯0ï¼Œ1ï¼Œ2...\n\n\n```\nimport org.apache.spark.mllib.linalg.Vectors\nimport org.apache.spark.mllib.regression.LabeledPoint\n\nval pos = LabeledPoint(1.0, Vectors.dense(1.0,0.0,3.0))\nval neg = LabeledPoint(0.0, Vectors.sparse(3, Array(0, 2), Array(1.0, 3.0)))\n\n```\n\n**sparse data**\n\nç¨€ç–æ•°æ®å­˜å‚¨æ˜¯éå¸¸æ™®éçš„ç°è±¡ï¼Œmllibæ”¯æŒè¯»å–libsvmæ ¼å¼çš„æ•°æ®ï¼Œå…¶æ•°æ®æ ¼å¼å¦‚ä¸‹ï¼š\n```\nlabel index1:value1,index2:value2 ...\n```\nå…¶è¯»å–æ–¹å¼åŒ…æ‹¬ï¼š\n```\nimport org.apache.spark.mllib.util.MLUtils\n\n// method 1\nspark.read.format(\"libsvm\") .load(\"libsvm data path\")\n\n// method 2\nMLUtils.loadLibSVMFile(spark.sparkContext, \"libsvm data path\")\n```\n\n## 3. Local Matrixï¼ˆæœ¬åœ°çŸ©é˜µï¼‰\n\nlocal matrixç”±è¡Œä¸‹æ ‡ï¼Œåˆ—ç´¢å¼•å’Œdoubleç±»å‹çš„å€¼ç»„æˆï¼Œå­˜å‚¨åœ¨æœ¬åœ°æœºå™¨ä¸Šï¼Œmllibæ”¯æŒå¯†é›†çŸ©é˜µå’Œç¨€ç–çŸ©é˜µï¼Œå…¶å­˜å‚¨æ˜¯æŒ‰ç…§åˆ—è¿›è¡Œå­˜å‚¨çš„ã€‚\n\nä¾‹å¦‚ä¸‹é¢çš„ä¸ºå¯†é›†çŸ©é˜µ:\n\n<center><img  src=\"https://img-blog.csdnimg.cn/20190722205304310.gif\" width=100px></center>\n\né€šè¿‡æ•°ç»„å­˜å‚¨çš„å½¢å¼ä¸ºï¼š [1.0, 3.0, 5.0, 2.0, 4.0, 6.0]ï¼ŒçŸ©é˜µå¤§å°ä¸º[3ï¼Œ2]\n\n```\n// Create a dense matrix ((1.0, 2.0), (3.0, 4.0), (5.0, 6.0))\nval denseMatrix = Matrices.dense(3,2, Array(1.0,3.0,5.0,2.0,4.0,6.0))\nprintln(s\"denseMatrix is : $denseMatrix\")\n\n// Create a sparse matrix ((9.0, 0.0), (0.0, 8.0), (0.0, 6.0))\nval sparseMatrix = Matrices.sparse(3,2, Array(0,1,3),Array(0,2,1),Array(9,6,8))\nprintln(s\"sparseMatrix is : $sparseMatrix\")\n```\n\næ³¨ï¼šç¨€ç–çŸ©é˜µè§£é‡Šï¼Œé¦–å…ˆæŒ‡å®šçŸ©é˜µæ˜¯3è¡Œ2åˆ—ï¼ŒArray(0, 1, 3)æ˜¯æŒ‡ï¼Œç¬¬0ä¸ªéé›¶å…ƒç´ åœ¨ç¬¬ä¸€åˆ—ï¼Œç¬¬ä¸€ç¬¬äºŒä¸ªéé›¶å…ƒç´ åœ¨ç¬¬äºŒåˆ—ã€‚\n\nArray(0, 2, 1)æ˜¯æŒ‡ï¼Œç¬¬ä¸€ä¸ªéé›¶å…ƒç´ åœ¨ç¬¬0è¡Œï¼Œç¬¬äºŒä¸ªéé›¶å…ƒç´ åœ¨ç¬¬2è¡Œï¼Œç¬¬ä¸‰ä¸ªéé›¶å…ƒç´ åœ¨ç¬¬1è¡Œã€‚\n\næ­¤å¤„è®¾è®¡æ¯”è¾ƒå¥½ï¼Œå‡è®¾100ä¸ªå…ƒç´ åˆ†ä¸¤åˆ—ï¼Œä¸éœ€è¦æŠŠæ¯ä¸ªå…ƒç´ æ‰€åœ¨åˆ—éƒ½æ ‡å‡ºæ¥ï¼Œåªéœ€è¦è®°å½•3ä¸ªæ•°å­—å³å¯ã€‚Array(9, 6, 8)è¡¨ç¤ºæŒ‰é¡ºåºå­˜å‚¨éé›¶å…ƒç´ .\n\n--- \n\nArray(0,1,3)æ¯”è¾ƒéš¾ç†è§£ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹æ–‡ç« ï¼š\n- https://www.cnblogs.com/lyy-blog/p/9288701.html\n- https://www.tuicool.com/articles/A3emmqi\n\n## 4. Distributed Matrixï¼ˆåˆ†å¸ƒå¼çŸ©é˜µï¼‰\nä¸€ä¸ªåˆ†å¸ƒå¼çŸ©é˜µç”±ä¸‹æ ‡å’Œdoubleç±»å‹çš„æ•°æ®ç»„æˆï¼Œä¸è¿‡åˆ†å¸ƒå¼çš„çŸ©é˜µçš„ä¸‹æ ‡ä¸æ˜¯intç±»å‹ï¼Œè€Œæ˜¯longç±»å‹ï¼Œæ•°æ®ä¿å­˜åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªrddä¸­ï¼Œé€‰æ‹©ä¸€ä¸ªæ­£ç¡®çš„æ ¼å¼å»å­˜å‚¨åˆ†å¸ƒå¼çŸ©é˜µæ˜¯éå¸¸é‡è¦çš„ã€‚åˆ†å¸ƒå¼çŸ©é˜µè½¬æ¢æˆä¸åŒçš„æ ¼å¼éœ€è¦ä¸€ä¸ªå…¨å±€çš„shuffle(global shuffle)ï¼Œè€Œå…¨å±€shuffleçš„ä»£ä»·ä¼šéå¸¸é«˜ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒSpark MLlibä¸­å·²ç»å®ç°äº†ä¸‰ç§åˆ†å¸ƒå¼çŸ©é˜µã€‚\n\næœ€åŸºæœ¬çš„åˆ†å¸ƒå¼çŸ©é˜µæ˜¯RowMatrixï¼Œå®ƒæ˜¯ä¸€ä¸ªè¡Œå¼çš„åˆ†å¸ƒå¼çŸ©é˜µï¼Œæ²¡æœ‰è¡Œç´¢å¼•ã€‚æ¯”å¦‚ä¸€ç³»åˆ—ç‰¹å¾å‘é‡çš„é›†åˆã€‚RowMatrixç”±ä¸€ä¸ªRDDä»£è¡¨æ‰€æœ‰çš„è¡Œï¼Œæ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªæœ¬åœ°å‘é‡ã€‚å‡è®¾ä¸€ä¸ªRowMatrixçš„åˆ—æ•°ä¸æ˜¯ç‰¹åˆ«å·¨å¤§ï¼Œé‚£ä¹ˆä¸€ä¸ªç®€å•çš„æœ¬åœ°å‘é‡èƒ½å¤Ÿä¸driverè¿›è¡Œè”ç³»ï¼Œå¹¶ä¸”æ•°æ®å¯ä»¥åœ¨å•ä¸ªèŠ‚ç‚¹ä¸Šä¿å­˜æˆ–ä½¿ç”¨ã€‚IndexedRowMatrixä¸RowMatrixç±»ä¼¼ä½†æ˜¯æœ‰è¡Œç´¢å¼•ï¼Œè¡Œç´¢å¼•å¯ä»¥ç”¨æ¥åŒºåˆ†è¡Œå¹¶ä¸”è¿›è¡Œè¿æ¥ç­‰æ“ä½œã€‚CoordinateMatrixæ˜¯ä¸€ä¸ªä»¥ååŒåˆ—è¡¨ï¼ˆcoordinate list)æ ¼å¼å­˜å‚¨æ•°æ®çš„åˆ†å¸ƒå¼çŸ©é˜µï¼Œæ•°æ®ä»¥RDDå½¢å¼å­˜å‚¨ã€‚\n\næ³¨æ„ï¼šå› ä¸ºæˆ‘ä»¬éœ€è¦ç¼“å­˜çŸ©é˜µçš„å¤§å°ï¼Œæ‰€ä»¥åˆ†å¸ƒå¼çŸ©é˜µçš„RDDsæ ¼å¼æ˜¯éœ€è¦ç¡®å®šçš„ï¼Œä½¿ç”¨éç¡®å®šRDDsçš„è¯ä¼šæŠ¥é”™ã€‚\n\n### Row Matrix\n\nRowMatrixå®ƒæ˜¯ä¸€ä¸ªè¡Œå¼çš„åˆ†å¸ƒå¼çŸ©é˜µï¼Œæ²¡æœ‰è¡Œç´¢å¼•ã€‚æ¯”å¦‚ä¸€ç³»åˆ—ç‰¹å¾å‘é‡çš„é›†åˆã€‚RowMatrixç”±ä¸€ä¸ªRDDä»£è¡¨æ‰€æœ‰çš„è¡Œï¼Œæ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªæœ¬åœ°å‘é‡ã€‚å› ä¸ºæ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªæœ¬åœ°å‘é‡ï¼Œæ‰€ä»¥å®ƒçš„åˆ—æ•°è¢«é™åˆ¶åœ¨Integer.maxçš„èŒƒå›´å†…ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ä¸ä¼šå¤ªå¤§ã€‚\n\nä¸€ä¸ªRowMatrixå¯ä»¥ç”±ä¸€ä¸ªRDD[Vector]çš„å®ä¾‹åˆ›å»ºã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥è®¡ç®—ç»Ÿè®¡ä¿¡æ¯æˆ–è€…è¿›è¡Œåˆ†è§£ã€‚QRåˆ†è§£ï¼ˆQR decompositionï¼‰æ˜¯A=QRï¼Œå…¶ä¸­Qæ˜¯ä¸€ä¸ªçŸ©é˜µï¼ŒRæ˜¯ä¸€ä¸ªä¸Šä¸‰è§’çŸ©é˜µã€‚å¯¹sigular value decomposition(SVDå’Œprincipal component analysisï¼ˆPCAï¼‰,å¯ä»¥å»å‚è€ƒé™ç»´çš„éƒ¨åˆ†ã€‚ \nã€€ã€€\n```\n// Row Matrix\nprintln(\"Row Matrix ...\")\nval arr = Array(Vectors.dense(1,0),Vectors.dense(0,1))\nval rows = spark.sparkContext.parallelize(arr)\nval mat: RowMatrix = new RowMatrix(rows)\nval m = mat.numRows()\nval n = mat.numCols()\nval qrResult = mat.tallSkinnyQR(true)\nprintln(s\"m is: $mï¼Œn is $nï¼Œ\\nqrResult is :\")\nqrResult.Q.rows.foreach(println)\nprintln()\nqrResult.R.rowIter.foreach(println)\n\n```\nè¾“å‡ºä¸ºï¼š\n```\nRow Matrix ...\nm is: 2ï¼Œn is 2ï¼Œ\nqrResult is :\n[1.0,0.0]\n[0.0,1.0]\n\n[1.0,0.0]\n[0.0,1.0]\n```\n### IndexedRowMatrix\n\nIndexedRowMatrixä¸RowMatrixç±»ä¼¼ï¼Œä½†æ˜¯å®ƒæœ‰è¡Œç´¢å¼•ã€‚ç”±ä¸€ä¸ªè¡Œç´¢å¼•RDDè¡¨ç¤ºï¼Œç´¢å¼•æ¯ä¸€è¡Œç”±ä¸€ä¸ªlongå‹è¡Œç´¢å¼•å’Œä¸€ä¸ªæœ¬åœ°å‘é‡ç»„æˆã€‚ \n\nä¸€ä¸ªIndexedRowMatrixå¯ä»¥ç”±RDD[IndexedRow]çš„å®ä¾‹æ¥ç”Ÿæˆï¼ŒIndexedRowæ˜¯ä¸€ä¸ªï¼ˆLong, Vector)çš„å°è£…ã€‚å»æ‰è¡Œç´¢å¼•ï¼ŒIndexedRowMatrixèƒ½å¤Ÿè½¬æ¢æˆRowMatrixã€‚\n\n\n```\n// IndexedRowMatrix\nprintln(\"Indexed Row Matrix ...\")\nval arr2 = Array(\n        IndexedRow(0,Vectors.dense(1,0)),\n        IndexedRow(1,Vectors.dense(0,1))\n    )\nval rows2: RDD[IndexedRow] = spark.sparkContext.parallelize(arr2)\nval mat2 = new IndexedRowMatrix(rows2)\nval m2 = mat2.numRows()\nval n2 = mat2.numCols()\n// å»æ‰è¡Œç´¢å¼•ï¼Œè½¬æ¢æˆRowMatrix\nval qrResult2 = mat2.toRowMatrix().tallSkinnyQR(true)\nprintln(s\"m2 is: $m2ï¼Œn2 is $n2ï¼Œ\\nqrResult2 is :\")\nqrResult2.Q.rows.foreach(println)\nprintln()\nqrResult2.R.rowIter.foreach(println)\n```\n\nè¾“å‡ºä¸ºï¼š\n\n```\nIndexed Row Matrix ...\nm2 is: 2ï¼Œn2 is 2ï¼Œ\nqrResult2 is :\n[1.0,0.0]\n[0.0,1.0]\n\n[1.0,0.0]\n[0.0,1.0]\n```\n\n### CoordinateMatrix\nCoordinateMatrixæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çŸ©é˜µï¼Œå…¶å®ä½“é›†åˆæ˜¯ä¸€ä¸ªRDDï¼Œæ¯ä¸€ä¸ªæ˜¯ä¸€ä¸ªä¸‰å…ƒç»„(i:Long, j:Long, value:Doubleï¼‰ã€‚å…¶ä¸­iæ˜¯è¡Œç´¢å¼•ï¼Œjæ˜¯åˆ—ç´¢å¼•ï¼Œvalueæ˜¯å®ä½“çš„å€¼ã€‚å½“çŸ©é˜µçš„ç»´åº¦å¾ˆå¤§å¹¶ä¸”æ˜¯ç¨€ç–çŸ©é˜µæ—¶ï¼Œæ‰ä½¿ç”¨CoordinateMatrixã€‚ \n\nä¸€ä¸ªCoordinateMatrixå¯ä»¥é€šè¿‡ä¸€ä¸ªRDD[MatrixEntry]çš„å®ä¾‹æ¥åˆ›å»ºï¼ŒMatrixEntryæ˜¯ä¸€ä¸ª(Long, Long, Double)çš„å°è£…ã€‚CoordinateMatrixå¯ä»¥é€šè¿‡è°ƒç”¨toIndexedRowMatrixè½¬æ¢æˆä¸€ä¸ªIndexedRowMatrixã€‚CoordinateMatrixçš„å…¶ä»–é™ç»´æ–¹æ³•æš‚æ—¶è¿˜ä¸æ”¯æŒï¼ˆSpark-1.6.2)ã€‚ \nã€€ã€€\n\n```\n// CoordinateMatrix\nprintln(\"Coordinate Matrix ...\")\nval arr3 = Array(\n    MatrixEntry(0,0,1),\n    MatrixEntry(1,1,1)\n)\nval entries = spark.sparkContext.parallelize(arr3)\nval mat3 = new CoordinateMatrix(entries)\nval m3 = mat.numRows()\nval n3 = mat.numCols()\nval qrResult3 = mat3.toIndexedRowMatrix().toRowMatrix().tallSkinnyQR(true)\nprintln(s\"m3 is: $m3ï¼Œn3 is $n3ï¼Œ\\nqrResult3 is :\")\nqrResult3.Q.rows.foreach(println)\nprintln()\nqrResult3.R.rowIter.foreach(println)\n```\nè¾“å‡ºä¸ºï¼š\n\n```\nCoordinate Matrix ...\nm3 is: 2ï¼Œn3 is 2ï¼Œ\nrowMat3 is :\n[1.0,0.0]\n[0.0,1.0]\n\n[1.0,0.0]\n[0.0,1.0]\n```\n### BlockMatrix\n\nä¸€ä¸ªBlockMatrixæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„çŸ©é˜µï¼Œç”±ä¸€ä¸ªMatrixBlocksçš„RDDç»„æˆã€‚MatrixBlockæ˜¯ä¸€ä¸ªä¸‰å…ƒç»„((Int, Int), Matrix),å…¶ä¸­(Int, Int)æ˜¯blockçš„ç´¢å¼•ï¼ŒMatrixæ˜¯ä¸€ä¸ªåœ¨æŒ‡å®šä½ç½®ä¸Šçš„ç»´åº¦ä¸ºrowsPerBlock * colsPerBlockçš„å­çŸ©é˜µã€‚BlockMatrixæ”¯æŒä¸å¦ä¸€ä¸ªBlockMatrixå¯¹è±¡çš„addå’Œmultiplyæ“ä½œã€‚BlockMatrixæä¾›äº†ä¸€ä¸ªå¸®åŠ©æ–¹æ³•validateï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥ç”¨äºæ£€æµ‹è¯¥`BlockMatrixÂ·æ˜¯å¦æ­£ç¡®ã€‚\n\nå¯ä»¥é€šè¿‡IndexedRowMatrixæˆ–è€…CoordinateMatrixè°ƒç”¨toBlockMatrixå¿«é€Ÿå¾—åˆ°BlockMatrixå¯¹è±¡ã€‚é»˜è®¤æƒ…å†µä¸‹toBlockMatrixæ–¹æ³•ä¼šå¾—åˆ°ä¸€ä¸ª1024 x 1024çš„BlockMatrixã€‚ä½¿ç”¨æ—¶å¯ä»¥é€šè¿‡æ‰‹åŠ¨ä¼ é€’ç»´åº¦å€¼æ¥è®¾ç½®ç»´åº¦ï¼ŒtoBlockMatrix(rowsPerBlock, colsPerBlock)ã€‚\n\n\n```\n// BlockMatrix\nprintln(\"Block Matrix ...\")\nval arr4 = Array(\n    MatrixEntry(0,0,1),\n    MatrixEntry(1,1,1)\n)\nval entries4: RDD[MatrixEntry] = spark.sparkContext.parallelize(arr4)\nval coordMat: CoordinateMatrix = new CoordinateMatrix(entries4)\nval matA: BlockMatrix = coordMat.toBlockMatrix().cache()\n// æ£€æµ‹BlockMatrixæ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œé”™è¯¯çš„è¯ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ­£ç¡®çš„è¯æ— å…¶ä»–å½±å“\nmatA.validate()\nmatA.blocks.foreach(println)\nval m4 = matA.numRowBlocks\nval n4 = matA.numColBlocks\nprintln(s\"m4 is: $m4ï¼Œn4 is $n4\")\n\n// è®¡ç®—A^T * A.\nval ata = matA.transpose.multiply(matA)\nata.blocks.foreach(println)\n\n```\nè¾“å‡ºä¸ºï¼š\n\n```\nBlock Matrix ...\n((0,0),2 x 2 CSCMatrix\n(0,0) 1.0\n(1,1) 1.0)\nm4 is: 1ï¼Œn4 is 1\n((0,0),1.0  0.0  \n0.0  1.0  )\n```\n\n# ç›¸ä¼¼åº¦è®¡ç®—åŸç†æ¢ç´¢\n> æ— è®ºæ˜¯ICFåŸºäºç‰©å“çš„ååŒè¿‡æ»¤ã€UCFåŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤ã€åŸºäºå†…å®¹çš„æ¨èï¼Œæœ€åŸºæœ¬çš„ç¯èŠ‚éƒ½æ˜¯è®¡ç®—ç›¸ä¼¼åº¦ã€‚å¦‚æœæ ·æœ¬ç‰¹å¾ç»´åº¦å¾ˆé«˜æˆ–è€…<user, item, score>çš„ç»´åº¦å¾ˆå¤§ï¼Œéƒ½ä¼šå¯¼è‡´æ— æ³•ç›´æ¥è®¡ç®—ã€‚è®¾æƒ³ä¸€ä¸‹100w*100wçš„äºŒç»´çŸ©é˜µï¼Œè®¡ç®—ç›¸ä¼¼åº¦æ€ä¹ˆç®—ï¼Ÿ\n\n> åœ¨sparkä¸­RowMatrixæä¾›äº†ä¸€ç§å¹¶è¡Œè®¡ç®—ç›¸ä¼¼åº¦çš„æ€è·¯ï¼Œä¸‹é¢å°±æ¥çœ‹çœ‹å…¶ä¸­çš„å¥¥å¦™å§ï¼\n\n## ç›¸ä¼¼åº¦è®¡ç®—\nç›¸ä¼¼åº¦æœ‰å¾ˆå¤šç§ï¼Œæ¯ä¸€ç§é€‚åˆçš„åœºæ™¯éƒ½ä¸å¤ªä¸€æ ·ã€‚æ¯”å¦‚ï¼š\n- æ¬§æ°è·ç¦»ï¼Œåœ¨å‡ ä½•ä¸­æœ€ç®€å•çš„è®¡ç®—æ–¹æ³•\n- å¤¹è§’ä½™å¼¦ï¼Œé€šè¿‡æ–¹å‘è®¡ç®—ç›¸ä¼¼åº¦ï¼Œé€šå¸¸åœ¨ç”¨æˆ·å¯¹å•†å“è¯„åˆ†ã€NLPç­‰åœºæ™¯ä½¿ç”¨\n- æ°å¡å¾·è·ç¦»ï¼Œåœ¨ä¸è€ƒè™‘æ¯ä¸€æ ·çš„å…·ä½“å€¼æ—¶ä½¿ç”¨\n- çš®å°”æ£®ç³»æ•°ï¼Œä¸å¤¹è§’ä½™å¼¦ç±»ä¼¼ï¼Œä½†æ˜¯å¯ä»¥å»ä¸­å¿ƒåŒ–ã€‚æ¯”å¦‚è¯„åˆ†æ—¶ï¼Œæœ‰äººå€¾å‘äºæ‰“é«˜åˆ†ï¼Œæœ‰äººå€¾å‘äºæ‰“ä½åˆ†ï¼Œä»–ä»¬çš„æœ€åæ•ˆæœåœ¨çš®å°”æ£®ä¸­æ˜¯ä¸€æ ·çš„\n- æ›¼å“ˆé¡¿è·ç¦»ï¼Œä¸€èˆ¬åœ¨è·¯å¾„è§„åˆ’ã€åœ°å›¾ç±»ä¸­å¸¸ç”¨ï¼Œæ¯”å¦‚A*ç®—æ³•ä¸­ä½¿ç”¨æ›¼å“ˆé¡¿æ¥ä½œä¸ºæ¯ä¸€æ­¥ä»£ä»·å€¼çš„ä¸€éƒ¨åˆ†ï¼ˆF=G+H, Gæ˜¯ä»å½“å‰ç‚¹ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªç‚¹çš„è·ç¦»ï¼ŒHæ˜¯è·ç¦»ç›®æ ‡ç‚¹çš„è·ç¦»ï¼Œè¿™ä¸ªHå°±å¯ä»¥ç”¨æ›¼å“ˆé¡¿è·ç¦»è¡¨ç¤ºï¼‰\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190722195328417.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\"> </center>\n\nä¸Šé¢ä¸¤ä¸ªå‘é‡(x1,y1)å’Œ(x2,y2)è®¡ç®—å¤¹è§’çš„ä½™å¼¦å€¼å°±æ˜¯ä¸¤ä¸ªå‘é‡æ–¹å‘çš„ç›¸ä¼¼åº¦ï¼Œå…¶å…¬å¼ä¸ºï¼š\n$$\ncos(\\theta )=\\frac { a\\cdot b }{ ||a||\\ast ||b|| } \\\\ =\\quad \\frac { { x }_{ 1 }\\ast { x }_{ 2 }\\quad +\\quad { y }_{ 1 }\\ast y_{ 2 } }{ \\sqrt { { x }_{ 1 }^{ 2 }+{ y }_{ 1 }^{ 2 } } \\ast \\sqrt { { x }_{ 2 }^{ 2 }+{ y }_{ 2 }^{ 2 } }  }\n$$\n\nå…¶ä¸­ï¼Œ||a||è¡¨ç¤ºaçš„æ¨¡ï¼Œå³æ¯ä¸€é¡¹çš„å¹³æ–¹å’Œå†å¼€æ–¹ã€‚\n\n## å…¬å¼æ‹†è§£\né‚£ä¹ˆå¦‚æœå‘é‡ä¸åªæ˜¯ä¸¤ç»´ï¼Œè€Œæ˜¯nç»´å‘¢ï¼Ÿæ¯”å¦‚æœ‰ä¸¤ä¸ªå‘é‡ï¼š\n$$\nç¬¬ä¸€ä¸ªå‘é‡ï¼š({x}_{1}, {x}_{2}, {x}_{3}, ..., {x}_{n})\\\\\nç¬¬äºŒä¸ªå‘é‡ï¼š({y}_{1}, {y}_{2}, {y}_{3}, ..., {y}_{n})\n$$\nä»–ä»¬çš„ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•å¥—ç”¨ä¸Šé¢çš„å…¬å¼ä¸ºï¼š\n$$\ncos(\\theta )\\quad =\\quad \\frac { \\sum _{ i=1 }^{ n }{ ({ x }_{ i }\\ast { y }_{ i }) }  }{ \\sqrt { \\sum _{ i=1 }^{ n }{ { x }_{ i }^{ 2 } }  } \\ast \\sqrt { \\sum _{ i=1 }^{ n }{ y_{ i }^{ 2 } }  }  } \\\\ =\\quad \\frac { { x }_{ 1 }\\ast { y }_{ 1 }+{ x }_{ 2 }\\ast { y }_{ 2 }+...+{ x }_{ n }\\ast { y }_{ n } }{ \\sqrt { \\sum _{ i=1 }^{ n }{ { x }_{ i }^{ 2 } }  } \\ast \\sqrt { \\sum _{ i=1 }^{ n }{ y_{ i }^{ 2 } }  }  } \\\\ =\\quad \\frac { { x }_{ 1 }\\ast { y }_{ 1 } }{ \\sqrt { \\sum _{ i=1 }^{ n }{ { x }_{ i }^{ 2 } }  } \\ast \\sqrt { \\sum _{ i=1 }^{ n }{ y_{ i }^{ 2 } }  }  } +\\frac { { x }_{ 2 }\\ast { y }_{ 2 } }{ \\sqrt { \\sum _{ i=1 }^{ n }{ { x }_{ i }^{ 2 } }  } \\ast \\sqrt { \\sum _{ i=1 }^{ n }{ y_{ i }^{ 2 } }  }  } +...+\\frac { { x }_{ n }\\ast { y }_{ n } }{ \\sqrt { \\sum _{ i=1 }^{ n }{ { x }_{ i }^{ 2 } }  } \\ast \\sqrt { \\sum _{ i=1 }^{ n }{ y_{ i }^{ 2 } }  }  } \\\\ =\\quad \\frac { { x }_{ 1 } }{ \\sqrt { \\sum _{ i=1 }^{ n }{ { x }_{ i }^{ 2 } }  }  } \\ast \\frac { { y }_{ 1 } }{ \\sqrt { \\sum _{ i=1 }^{ n }{ y_{ i }^{ 2 } }  }  } +\\frac { { x }_{ 2 } }{ \\sqrt { \\sum _{ i=1 }^{ n }{ { x }_{ i }^{ 2 } }  }  } \\ast \\frac { { y }_{ 2 } }{ \\sqrt { \\sum _{ i=1 }^{ n }{ y_{ i }^{ 2 } }  }  } +...+\\frac { { x }_{ n } }{ \\sqrt { \\sum _{ i=1 }^{ n }{ { x }_{ i }^{ 2 } }  }  } \\ast \\frac { { y }_{ n } }{ \\sqrt { \\sum _{ i=1 }^{ n }{ y_{ i }^{ 2 } }  }  }\n$$\n\né€šè¿‡ä¸Šé¢çš„å…¬å¼å°±å¯ä»¥å‘ç°ï¼Œå¤¹è§’ä½™å¼¦å¯ä»¥æ‹†è§£æˆæ¯ä¸€é¡¹ä¸å¦ä¸€é¡¹å¯¹åº”ä½ç½®çš„ä¹˜ç§¯x1âˆ—y1ï¼Œå†é™¤ä»¥æ¯ä¸ªå‘é‡è‡ªå·±çš„\n$$\n\\sqrt { \\sum _{ i=1 }^{ n }{ { x }_{ i }^{ 2 } }  }\n$$\nå°±å¯ä»¥äº†ã€‚\n\n## çŸ©é˜µå¹¶è¡Œ\n\nç”»ä¸ªå›¾çœ‹çœ‹ï¼Œé¦–å…ˆåˆ›å»ºä¸‹é¢çš„çŸ©é˜µï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190722195942186.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\"></center>\n\næ³¨æ„ï¼ŒçŸ©é˜µé‡Œé¢éƒ½æ˜¯ä¸€åˆ—ä»£è¡¨ä¸€ä¸ªå‘é‡....ä¸Šé¢æ˜¯åˆ›å»ºçŸ©é˜µæ—¶çš„ä¸‰å…ƒç»„ï¼Œå¦‚æœåœ¨sparkä¸­æƒ³è¦åˆ›å»ºmatrixï¼Œå¯ä»¥è¿™æ ·ï¼š\n\n```\nval df = spark.createDataFrame(Seq(\n      (0, 0, 1.0),\n      (1, 0, 1.0),\n      (2, 0, 1.0),\n      (3, 0, 1.0),\n      (0, 1, 2.0),\n      (1, 1, 2.0),\n      (2, 1, 1.0),\n      (3, 1, 1.0),\n      (0, 2, 3.0),\n      (1, 2, 3.0),\n      (2, 2, 3.0),\n      (0, 3, 1.0),\n      (1, 3, 1.0),\n      (3, 3, 4.0)\n    ))\n\nval matrix = new CoordinateMatrix(df.map(row => MatrixEntry(row.getAs[Integer](0).toLong, row.getAs[Integer](1).toLong, row.getAs[Double](2))).toJavaRDD)\n```\nç„¶åè®¡ç®—æ¯ä¸€ä¸ªå‘é‡çš„normL2ï¼Œå³å¹³æ–¹å’Œå¼€æ ¹å·ã€‚\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190722200134362.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\"></center>\nä»¥ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå‘é‡è®¡ç®—ä¸ºä¾‹ï¼Œç¬¬ä¸€ä¸ªå‘é‡ä¸º(1,1,1,1)ï¼Œç¬¬äºŒä¸ªå‘é‡ä¸º(2,2,1,1)ï¼Œæ¯ä¸€é¡¹é™¤ä»¥å¯¹åº”çš„normL2ï¼Œå¾—åˆ°åé¢çš„ä¸¤ä¸ªå‘é‡ï¼š\n$$\n0.5*0.63+0.5*0.63+0.5*0.31+0.5*0.31 \\approx 0.94\n$$\nä¸¤ä¸ªå‘é‡æœ€ç»ˆçš„ç›¸ä¼¼åº¦ä¸º0.94ã€‚\n\né‚£ä¹ˆåœ¨Sparkå¦‚ä½•å¿«é€Ÿå¹¶è¡Œå¤„ç†å‘¢ï¼Ÿé€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå‘é‡çš„ç›¸ä¼¼åº¦ï¼Œéœ€è¦æŠŠæ¯ä¸€ç»´åº¦ä¹˜ç§¯åç›¸åŠ ï¼Œä½†æ˜¯ä¸€ä¸ªå‘é‡ä¸€èˆ¬éƒ½æ˜¯è·¨RDDä¿å­˜çš„ï¼Œæ‰€ä»¥å¯ä»¥å…ˆè®¡ç®—æ‰€æœ‰å‘é‡çš„ç¬¬ä¸€ç»´ï¼Œå¾—å‡ºç»“æœ\n$$\n(å‘é‡1çš„ç¬¬1ç»´ï¼Œå‘é‡2çš„ç¬¬1ç»´ï¼Œvalue)\\\\\n(å‘é‡1çš„ç¬¬2ç»´ï¼Œå‘é‡2çš„ç¬¬2ç»´ï¼Œvalue)\\\\\n...\\\\\n(å‘é‡1çš„ç¬¬nç»´ï¼Œå‘é‡2çš„ç¬¬nç»´ï¼Œvalue)\\\\\n(å‘é‡1çš„ç¬¬1ç»´ï¼Œå‘é‡3çš„ç¬¬1ç»´ï¼Œvalue)\\\\\n..\\\\\n(å‘é‡1çš„ç¬¬nç»´ï¼Œå‘é‡3çš„ç¬¬nç»´ï¼Œvalue)\\\\\n$$\næœ€åå¯¹åšä¸€æ¬¡reduceByKeyç´¯åŠ ç»“æœå³å¯.....\n\n## é˜…è¯»æºç \né¦–å…ˆåˆ›å»ºdataframeå½¢æˆmatrixï¼š\n\n\n```\nimport org.apache.spark.mllib.linalg.distributed.{CoordinateMatrix, MatrixEntry}\nimport org.apache.spark.sql.SparkSession\n\nobject MatrixSimTest {\n  def main(args: Array[String]): Unit = {\n    // åˆ›å»ºdataframeï¼Œè½¬æ¢æˆmatrix\n    val spark = SparkSession.builder().master(\"local[*]\").appName(\"sim\").getOrCreate()\n    spark.sparkContext.setLogLevel(\"WARN\")\n\n    import spark.implicits._\n\n    val df = spark.createDataFrame(Seq(\n      (0, 0, 1.0),\n      (1, 0, 1.0),\n      (2, 0, 1.0),\n      (3, 0, 1.0),\n      (0, 1, 2.0),\n      (1, 1, 2.0),\n      (2, 1, 1.0),\n      (3, 1, 1.0),\n      (0, 2, 3.0),\n      (1, 2, 3.0),\n      (2, 2, 3.0),\n      (0, 3, 1.0),\n      (1, 3, 1.0),\n      (3, 3, 4.0)\n    ))\n\n    val matrix = new CoordinateMatrix(df.map(row => MatrixEntry(row.getAs[Integer](0).toLong, row.getAs[Integer](1).toLong, row.getAs[Double](2))).toJavaRDD)\n    // è°ƒç”¨simæ–¹æ³•\n    val x = matrix.toRowMatrix().columnSimilarities()\n    // å¾—åˆ°ç›¸ä¼¼åº¦ç»“æœ\n    x.entries.collect().foreach(println)\n  }\n}\n```\nå¾—åˆ°çš„ç»“æœä¸ºï¼š\n\n```\nMatrixEntry(0,3,0.7071067811865476)\nMatrixEntry(0,2,0.8660254037844386)\nMatrixEntry(2,3,0.2721655269759087)\nMatrixEntry(0,1,0.9486832980505139)\nMatrixEntry(1,2,0.9128709291752768)\nMatrixEntry(1,3,0.596284793999944)\n\n```\nç›´æ¥è¿›å…¥columnSimilaritiesæ–¹æ³•çœ‹çœ‹æ˜¯æ€ä¹ˆä¸ªæµç¨‹å§ï¼\n\n\n```\ndef columnSimilarities(): CoordinateMatrix = {\n  columnSimilarities(0.0)\n}\n```\nå†…éƒ¨è°ƒç”¨äº†å¸¦é˜ˆå€¼çš„ç›¸ä¼¼åº¦æ–¹æ³•ï¼Œè¿™é‡Œçš„é˜ˆå€¼æ˜¯æŒ‡ç›¸ä¼¼åº¦å°äºè¯¥å€¼æ—¶ï¼Œè¾“å‡ºç»“æœæ—¶ï¼Œä¼šè‡ªåŠ¨è¿‡æ»¤æ‰ã€‚\n\n\n```\ndef columnSimilarities(threshold: Double): CoordinateMatrix = {\n  //æ£€æŸ¥å‚æ•°...\n\n  val gamma = if (threshold < 1e-6) {\n    Double.PositiveInfinity\n  } else {\n    10 * math.log(numCols()) / threshold\n  }\n\n columnSimilaritiesDIMSUM(computeColumnSummaryStatistics().normL2.toArray, gamma)\n}\n```\nè¿™é‡Œçš„gammaç”¨äºé‡‡æ ·ï¼Œå…·ä½“çš„åšæ³•å’±ä»¬æ¥ç»§ç»­çœ‹æºç ã€‚ç„¶åçœ‹ä¸€ä¸‹computeColumnSummaryStatistics().normL2.toArrayè¿™ä¸ªæ–¹æ³•ï¼š\n\n```\ndef computeColumnSummaryStatistics(): MultivariateStatisticalSummary = {\n  val summary = rows.treeAggregate(new MultivariateOnlineSummarizer)(\n    (aggregator, data) => aggregator.add(data),\n    (aggregator1, aggregator2) => aggregator1.merge(aggregator2))\n  updateNumRows(summary.count)\n  summary\n}\n```\nä¹‹å‰æœ‰ä»‹ç»è¿™ä¸ªtreeAggregateæ˜¯ä¸€ç§å¸¦â€œé¢„reduceâ€çš„map-reduceï¼Œè¿”å›çš„summaryï¼Œé‡Œé¢å¸®æˆ‘ä»¬ç»Ÿè®¡äº†æ¯ä¸€ä¸ªå‘é‡çš„å¾ˆå¤šæŒ‡æ ‡ï¼Œæ¯”å¦‚\n\n```\ncurrMean    ä¸º æ¯ä¸€ä¸ªå‘é‡çš„å¹³å‡å€¼\ncurrM2      ä¸º æ¯ä¸ªå‘é‡çš„æ¯ä¸€ç»´çš„å¹³æ–¹å’Œ\ncurrL1      ä¸º æ¯ä¸ªå‘é‡çš„ç»å¯¹å€¼çš„å’Œ\ncurrMax     ä¸º æ¯ä¸ªå‘é‡çš„æœ€å¤§å€¼\ncurrMin     ä¸º æ¯ä¸ªå‘é‡çš„æœ€å°å€¼\nnnz         ä¸º æ¯ä¸ªå‘é‡çš„é0ä¸ªæ•°\n```\nè¿™é‡Œæˆ‘ä»¬åªéœ€è¦currM2ï¼Œå®ƒæ˜¯æ¯ä¸ªå‘é‡çš„å¹³æ–¹å’Œã€‚summaryè°ƒç”¨çš„normL2æ–¹æ³•ï¼š\n\n\n```\noverride def normL2: Vector = {\n  require(totalWeightSum > 0, s\"Nothing has been added to this summarizer.\")\n\n  val realMagnitude = Array.ofDim[Double](n)\n\n  var i = 0\n  val len = currM2.length\n  while (i < len) {\n    realMagnitude(i) = math.sqrt(currM2(i))\n    i += 1\n  }\n  Vectors.dense(realMagnitude)\n}\n```\nä¸Šé¢è¿™æ­¥å°±æ˜¯å¯¹å¹³æ–¹å’Œå¼€ä¸ªæ ¹å·ï¼Œè¿™æ ·å°±æ±‚å‡ºæ¥äº†æ¯ä¸ªå‘é‡çš„åˆ†æ¯éƒ¨åˆ†ã€‚\nä¸‹é¢å°±æ˜¯æœ€å…³é”®çš„åœ°æ–¹äº†ï¼š\n\n\n```\nprivate[mllib] def columnSimilaritiesDIMSUM(\n      colMags: Array[Double],\n      gamma: Double): CoordinateMatrix = {\n    // ä¸€äº›å‚æ•°æ ¡éªŒ\n\n    // å¯¹gammaè¿›è¡Œå¼€æ–¹\n    val sg = math.sqrt(gamma) // sqrt(gamma) used many times\n\n    // è¿™é‡ŒæŠŠå‰é¢ç®—çš„å¹³æ–¹æ ¹çš„å€¼è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå› ä¸ºå¦‚æœä¸º0ï¼Œé™¤0ä¼šæŠ¥å¼‚å¸¸ï¼Œæ‰€ä»¥è®¾ç½®ä¸º1\n    val colMagsCorrected = colMags.map(x => if (x == 0) 1.0 else x)\n\n    // æŠŠæŠ½æ ·æ¦‚ç‡æ•°ç»„ å’Œ å¹³æ–¹æ ¹æ•°ç»„è¿›è¡Œå¹¿æ’­\n    val sc = rows.context\n    val pBV = sc.broadcast(colMagsCorrected.map(c => sg / c))\n    val qBV = sc.broadcast(colMagsCorrected.map(c => math.min(sg, c)))\n\n    // éå†æ¯ä¸€è¡Œï¼Œè®¡ç®—æ¯ä¸ªå‘é‡è¯¥ç»´çš„ä¹˜ç§¯ï¼Œå½¢æˆä¸‰å…ƒç»„\n    val sims = rows.mapPartitionsWithIndex { (indx, iter) =>\n      val p = pBV.value\n      val q = qBV.value\n      // è·å¾—éšæœºå€¼\n      val rand = new XORShiftRandom(indx)\n      val scaled = new Array[Double](p.size)\n      iter.flatMap { row =>\n        row match {\n          case SparseVector(size, indices, values) =>\n            // å¦‚æœæ˜¯ç¨€ç–å‘é‡ï¼Œéå†å‘é‡çš„æ¯ä¸€ç»´ï¼Œé™¤ä»¥å¹³æ–¹æ ¹\n            val nnz = indices.size\n            var k = 0\n            while (k < nnz) {\n              scaled(k) = values(k) / q(indices(k))\n              k += 1\n            }\n\n            // éå†å‘é‡æ•°ç»„ï¼Œè®¡ç®—æ¯ä¸€ä¸ªæ•°å€¼ä¸å…¶ä»–æ•°å€¼çš„ä¹˜æœºã€‚\n            // æ¯”å¦‚å‘é‡(1, 2, 0 ,1)\n            // å¾—åˆ°çš„ç»“æœä¸º (0,1,value)(0,3,value)(2,3,value)\n            Iterator.tabulate (nnz) { k =>\n              val buf = new ListBuffer[((Int, Int), Double)]()\n              val i = indices(k)\n              val iVal = scaled(k)\n              // åˆ¤æ–­å½“å‰åˆ—æ˜¯å¦ç¬¦åˆé‡‡æ ·èŒƒå›´ï¼Œå¦‚æœå°äºé‡‡æ ·å€¼ï¼Œå°±å¿½ç•¥\n              if (iVal != 0 && rand.nextDouble() < p(i)) {\n                var l = k + 1\n                while (l < nnz) {\n                  val j = indices(l)\n                  val jVal = scaled(l)\n                  if (jVal != 0 && rand.nextDouble() < p(j)) {\n                    // è®¡ç®—æ¯ä¸€ç»´ä¸å…¶ä»–ç»´çš„å€¼\n                    buf += (((i, j), iVal * jVal))\n                  }\n                  l += 1\n                }\n              }\n              buf\n            }.flatten\n          case DenseVector(values) =>\n            // è·Ÿç¨€ç–åŒç†\n            val n = values.size\n            var i = 0\n            while (i < n) {\n              scaled(i) = values(i) / q(i)\n              i += 1\n            }\n            Iterator.tabulate (n) { i =>\n              val buf = new ListBuffer[((Int, Int), Double)]()\n              val iVal = scaled(i)\n              if (iVal != 0 && rand.nextDouble() < p(i)) {\n                var j = i + 1\n                while (j < n) {\n                  val jVal = scaled(j)\n                  if (jVal != 0 && rand.nextDouble() < p(j)) {\n                    buf += (((i, j), iVal * jVal))\n                  }\n                  j += 1\n                }\n              }\n              buf\n            }.flatten\n        }\n      }\n    // æœ€åå†æ‰§è¡Œä¸€ä¸ªreduceBykeyï¼Œç´¯åŠ æ‰€æœ‰çš„å€¼ï¼Œå°±æ˜¯iå’Œjçš„ç›¸ä¼¼åº¦\n    }.reduceByKey(_ + _).map { case ((i, j), sim) =>\n      MatrixEntry(i.toLong, j.toLong, sim)\n    }\n    new CoordinateMatrix(sims, numCols(), numCols())\n  }\n```\nè¿™æ ·æŠŠæ‰€æœ‰å‘é‡çš„å¹³æ–¹å’Œå¹¿æ’­åï¼Œæ¯ä¸€è¡Œéƒ½å¯ä»¥åœ¨ä¸åŒçš„èŠ‚ç‚¹å¹¶è¡Œå¤„ç†äº†ã€‚\n\næ€»ç»“æ¥è¯´ï¼ŒSparkæä¾›çš„è¿™ä¸ªè®¡ç®—ç›¸ä¼¼åº¦çš„æ–¹æ³•æœ‰ä¸¤ç‚¹ä¼˜åŠ¿ï¼š\n\n- é€šè¿‡æ‹†è§£å…¬å¼ï¼Œä½¿å¾—æ¯ä¸€è¡Œç‹¬ç«‹è®¡ç®—ï¼ŒåŠ å¿«é€Ÿåº¦\n- æä¾›é‡‡æ ·æ–¹æ¡ˆï¼Œä»¥é‡‡æ ·æ–¹å¼æŠ½æ ·å›ºå®šçš„ç‰¹å¾ç»´åº¦è®¡ç®—ç›¸ä¼¼åº¦\n\nä¸è¿‡æ°å¡å¾·ç›®å‰å¹¶ä¸èƒ½ä½¿ç”¨è¿™ç§æ–¹æ³•æ¥è®¡ç®—ï¼Œå› ä¸ºæ°å¡å¾·ä¸­é—´æœ‰ä¸€é¡¹éœ€è¦å¯¹å‘é‡æ±‚dotï¼Œè¿™ç§æ–¹å¼å°±ä¸é€‚åˆäº†ï¼›å¦‚æœæ°å¡å¾·æƒ³è¦å¿«é€Ÿè®¡ç®—ï¼Œå¯ä»¥å»å‚è€ƒLSHå±€éƒ¨æ•æ„Ÿå“ˆå¸Œç®—æ³•ï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†è¯´æ˜äº†ã€‚\n\n---\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n\n---\n<font color=red>æ³¨ï¼šã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹æ˜¯å°ç¼–çš„æœ€æ–°å‡ºç‰ˆçš„æŠ€æœ¯å›¾ä¹¦ï¼Œå·²ç»åœ¨äº¬ä¸œï¼Œå½“å½“ä¸Šçº¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è¿›è¡Œè´­ä¹°é˜…è¯»ï¼</font>\n<center><img src=\"https://img-blog.csdnimg.cn/20190708234949217.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=50% /></center>","tags":["Sparkä¸å¤§æ•°æ®"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹11ã€ä¸‰å¤§æ¡ˆä¾‹å¸¦ä½ ä»0åˆ°1è‡ªå·±å®ç°ä¸€ä¸ªæ¨èç³»ç»Ÿ","url":"/2019/07/10/RecSys/æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜/ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹11ã€ä¸‰å¤§æ¡ˆä¾‹å¸¦ä½ ä»0åˆ°1è‡ªå·±å®ç°ä¸€ä¸ªæ¨èç³»ç»Ÿ/","content":"\n> ä¿—è¯è¯´çš„å¥½ï¼šâ€œçœ¼çœ‹åƒé,ä¸å¦‚æ‰‹å†™ä¸€éâ€ï¼Œå‰å‡ ç¯‡ä»‹ç»äº†æ¨èç³»ç»Ÿçš„æ¥æºã€å‘å±•ã€æ•°æ®é¢„å¤„ç†ã€å¸¸è§çš„æ¨èç®—æ³•ï¼Œä»¥åŠå†·å¯åŠ¨å’Œæ¨èç³»ç»Ÿæ•ˆæœè¯„ä¼°ã€‚æœ¬ç¯‡æ–‡ç« å°†ä¼šé€šè¿‡å®ä¾‹ä»‹ç»æ¨èç³»ç»Ÿçš„å®Œæ•´å¼€å‘è¿‡ç¨‹ï¼Œä»¥ä¾¿å¤§å®¶æœ‰æ›´åŠ ç›´è§‚ã€ç³»ç»Ÿçš„ç†è§£ã€‚\n\n<!--More-->\n\n---\n\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/96211201\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\nä¸ªäººç½‘ç«™ï¼šhttp://thinkgamer.github.io\n\n---\n\n\nåœ¨å­¦ä¹ äº†ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ä¹‹åï¼Œå¦‚ä½•æ‰èƒ½å°†è¿™äº›çŸ¥è¯†åº”ç”¨åˆ°å®é™…çš„æ¡ˆä¾‹ä¸­å‘¢ï¼Œæœ¬æ–‡ä»‹ç»äº†ä»¥ä¸‹ä¸‰ä¸ªæ¡ˆä¾‹ï¼Œæ¥å¸¦é¢†å¤§å®¶æ¸©ä¹ å’Œåº”ç”¨å­¦åˆ°çš„çŸ¥è¯†ã€‚ä¸‰å¤§æ¡ˆä¾‹åŒ…å«ï¼š\n- æ–°é—»æ¨èç³»ç»Ÿ\n- éŸ³ä¹æ¨èç³»ç»Ÿ\n- å›¾ä¹¦æ¨èç³»ç»Ÿ\n\n## æ–°é—»æ¨èç³»ç»Ÿ\nå®ç°çš„ç¬¬ä¸€ä¸ªæ¡ˆä¾‹æ˜¯æ–°é—»æ¨èç³»ç»Ÿï¼Œè¿™é‡Œä½¿ç”¨çš„æ•°æ®é›†ä¸ºï¼šæŸæ–°é—»ç½‘ç«™æŒ‡å®šæ—¥æœŸå‰çš„éƒ¨åˆ†æ–°é—»æ•°æ®ï¼ŒèŠ‚é€‰çš„å‡ ä¸ªä¸»é¢˜ä¸ºï¼šå›½é™…è¦é—»ã€äº’è”ç½‘ã€ç»æµè¦é—»ã€ç¤¾ä¼šå…¬ç›Šã€ä¹¦è¯„ã€å½±è§†ç»¼è‰ºã€‚çˆ¬å–çš„æ¯æ¡æ•°æ®åŒ…å«ä¸‰ä¸ªå­—æ®µï¼šæ ‡é¢˜ã€æ—¶é—´ã€æ­£æ–‡ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚\n<center><img src=\"https://img-blog.csdnimg.cn/20190717002449843.png\" width=700px></center>\nåœ¨å¾—åˆ°åŸºç¡€æ•°æ®ä¹‹åå°±æ˜¯å¯¹æ•°æ®çš„é¢„å¤„ç†ï¼Œå…¶ä¸»è¦åŒ…æ‹¬ï¼š\n- å¯¹åŸå§‹æ•°æ®çš„åŠ å·¥\n- æ–°é—»ç›¸ä¼¼åº¦è®¡ç®—\n- æ–°é—»çƒ­åº¦å€¼è®¡ç®—\n- æŒ‡å®šæ ‡ç­¾ä¸‹çš„æ–°é—»ç»Ÿè®¡\n\nå…¶ç³»ç»Ÿçš„æ•´ä½“æ¶æ„å¦‚ä¸‹æ‰€ç¤ºï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/20190717002709673.png\" width=500px></center>\n\nå…¶ä¸­å„ä¸ªæ¨¡å—ä»‹ç»å¦‚ä¸‹ã€‚\n- MySQLæ•°æ®å­˜å‚¨ï¼šè¿™é‡Œä½¿ç”¨MySQLå­˜å‚¨ç³»ç»Ÿæ‰€ä½¿ç”¨çš„æ•°æ®ã€‚ç³»ç»Ÿå®ç°é€‰ç”¨çš„æ˜¯Pythonçš„Djangoæ¡†æ¶ï¼Œåœ¨æ¡†æ¶ä¸­æœ‰å¯¹æ•°æ®å¯¹è±¡çš„å°è£…ï¼Œåœ¨ç¬¬11.4èŠ‚ä¸­å°†ä¼šè¯´æ˜æ‰€åˆ›å»ºçš„æ•°æ®å¯¹è±¡ã€‚\n\n- ç”¨æˆ·é€‰æ‹©ï¼šç³»ç»ŸæŒ‡å®šäº†ä¸‰ä¸ªç”¨æˆ·ï¼ˆå¼ ä¸‰ã€æå››ã€ç‹äº”ï¼‰ä½œä¸ºæ¼”ç¤ºç”¨æˆ·ï¼Œåªæ˜¯ä¸ºäº†åŒºåˆ†ä¸åŒç”¨æˆ·ã€ä¸åŒè¡Œä¸ºï¼Œâ€œä¸ºä½ æ¨èâ€çš„å†…å®¹ä¹Ÿä¸åŒã€‚\n\n- é€‰æ‹©æ ‡ç­¾ï¼šç”¨æˆ·ä¸ç³»ç»Ÿçš„äº¤äº’è¿‡ç¨‹ï¼Œè§£å†³ç³»ç»Ÿçš„å†·å¯åŠ¨ã€‚å½“ç„¶ç”¨æˆ·ä¹Ÿå¯ä»¥ä¸é€‰æ‹©ç›¸åº”çš„æ ‡ç­¾ï¼Œæ­¤æ—¶â€œä¸ºä½ æ¨èâ€æ¨¡å—æ˜¾ç¤ºçš„æ˜¯çƒ­åº¦æ•°æ®ã€‚\n\n- ç”¨æˆ·ç‚¹å‡»æµè§ˆæ–‡ç« ï¼šå³ç”¨æˆ·åœ¨ç³»ç»Ÿä¸­äº§ç”Ÿäº†ç›¸å…³è¡Œä¸ºï¼Œæ¯ç¯‡æ–‡ç« çš„è¯¦ç»†é¡µéƒ½ä¼šæ¨èè¯¥ç¯‡æ–‡ç« çš„ç›¸ä¼¼æ–‡ç« ã€‚\n\n- çƒ­åº¦æ¦œï¼šæŒ‰ç…§ç¬¬11.2.2èŠ‚ä¸­è®¡ç®—çš„çƒ­åº¦å€¼è¿›è¡Œæ’åºï¼Œæ˜¾ç¤ºçƒ­åº¦å€¼è¾ƒå¤§çš„æ–°é—»ã€‚\n\n- ä¸ºä½ æ¨èï¼šå¦‚æœç”¨æˆ·æ˜¯åˆæ¬¡ç™»å½•ï¼Œåˆ™æ ¹æ®ç”¨æˆ·é€‰æ‹©çš„æ ‡ç­¾è¿”å›â€œä¸ºä½ æ¨èâ€çš„å†…å®¹ï¼›è‹¥ç”¨æˆ·æ²¡æœ‰é€‰æ‹©æ ‡ç­¾ï¼Œåˆ™è¿”å›çƒ­åº¦å€¼è¾ƒé«˜çš„æ–°é—»ä½œä¸ºâ€œä¸ºä½ æ¨èâ€çš„å†…å®¹ï¼›å¦‚æœç”¨æˆ·æ˜¯åœ¨ç‚¹å‡»\u001f\u001fæµè§ˆè¿‡æ–°é—»ä¹‹åè¿”å›â€œä¸ºä½ æ¨èâ€æ¨¡å—ï¼Œåˆ™è¿”å›ç”¨æˆ·æœ‰è¡Œä¸ºæ–‡ç« çš„ç›¸ä¼¼æ–‡ç« ï¼Œä½œä¸ºâ€œä¸ºä½ æ¨èâ€çš„å†…å®¹ã€‚\n\nç³»ç»Ÿæ•´ä½“æ¶æ„è®¾è®¡æ¯”è¾ƒç®€å•ï¼Œå’Œçº¿ä¸ŠçœŸæ­£åº”ç”¨çš„å¤æ‚çš„æ¨èç³»ç»Ÿæ˜¯æœ‰å¾ˆå¤§å·®è·çš„ï¼Œä½†å®ç°æ€è·¯æ˜¯ä¸€è‡´çš„ã€‚\n\næ¥ä¸‹æ¥å°±æ˜¯ç³»ç»Ÿå®ç°äº†ï¼Œæœ¬å®ä¾‹é‡‡ç”¨å‰åç«¯åˆ†ç¦»çš„å½¢å¼è¿›è¡Œå®ç°ï¼Œåç«¯é‡‡ç”¨Pythonçš„Djangoæ¡†æ¶è¿›è¡Œå¼€å‘ï¼Œå‰ç«¯é‡‡ç”¨Vue.jsæ¡†æ¶å¼€å‘ã€‚\n\nåç«¯å¼€å‘ä¾èµ–äºPython 3.6ç‰ˆæœ¬ï¼Œå…¶ä¸­ä½¿ç”¨çš„åŒ…ä¸ºï¼šDjango==2.1ï¼ŒPyMySQL==0.9.2ï¼Œjieba==0.39ï¼Œxlrd==1.1.0ï¼Œgensim==3.6.0ã€‚\n\nå‰ç«¯å¼€å‘ä¾èµ–äºnode.jsç¯å¢ƒï¼Œä½¿ç”¨çš„æ˜¯Vue.jsæ¡†æ¶ï¼Œnode.jså¯¹åº”çš„ç‰ˆæœ¬æ˜¯10.13ã€‚\n\nå…¶æœ€ç»ˆå®ç°çš„æ•ˆæœå›¾å¦‚ä¸‹ï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/20190717003718141.jpg\" width=700px></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190717003727282.jpg\" width=700px></center>\n<center><img src=\"https://img-blog.csdnimg.cn/20190717003738407.png\" width=500px></center>\n\n\né€šè¿‡è¿™æ ·ä¸€ä¸ªå®ä¾‹ï¼Œæ¨èç³»ç»Ÿå˜å¾—ä¸é‚£ä¹ˆæŠ½è±¡ï¼Œæ›´åŠ ç›´è§‚åœ°å±•ç¤ºåœ¨è¯»è€…çœ¼å‰ã€‚å½“ç„¶ï¼Œæ¯ä¸€ä¸ªæ¨èç³»ç»ŸèƒŒåéƒ½è¦ä»˜å‡ºå¾ˆå¤šï¼Œè€Œä¸ä»…æ˜¯ç®—æ³•å±‚é¢ï¼Œåœ¨ä»äº‹ç›¸å…³å·¥ä½œæ—¶ï¼Œæ›´è¦æ‹¥æœ‰å…¨å±€æ„è¯†ï¼Œè¦æ˜ç™½ä¸€ä¸ªå¥½çš„æ¨èç³»ç»Ÿæ˜¯æ•°æ®ã€ç®—æ³•ã€æ¶æ„å’Œå±•ç¤ºç­‰å…±åŒå†³å®šçš„ï¼Œè€Œä¸æ˜¯é â€œä¸€å·±ä¹‹åŠ›â€ã€‚\n\n## éŸ³ä¹æ¨èç³»ç»Ÿ\nè¿‡å¤šçš„å†…å®¹è¿™é‡Œä¸å±•å¼€ä»‹ç»ï¼Œå¤§å®¶çœ‹ä¸‹æ•ˆæœå›¾ï¼Œæ„Ÿå…´è¶£çš„åŒ–å¯ä»¥å…³æ³¨ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹\n<center><img src=\"https://img-blog.csdnimg.cn/20190717004024151.png\" width=700px></center>\n<center><img src=\"https://img-blog.csdnimg.cn/20190717004034658.png\" width=700px></center>\n<center><img src=\"https://img-blog.csdnimg.cn/20190717004044810.png\" width=700px></center>\n<center><img src=\"https://img-blog.csdnimg.cn/20190717004053533.png\" width=700px></center>\n<center><img src=\"https://img-blog.csdnimg.cn/20190717004101890.png\" width=700px></center>\n\n---\n## å›¾ä¹¦æ¨èç³»ç»Ÿ\n<center><img src=\"https://img-blog.csdnimg.cn/20190717004217623.png\" width=700px></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190717004226269.png\" width=500px></center>\n<center><img src=\"https://img-blog.csdnimg.cn/2019071700423590.png\" width=700px></center>\n\n---\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n\n---\n<font color=red>æ³¨ï¼šã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹æ˜¯å°ç¼–è¿‘æœŸè¦ä¸Šçš„ä¸€æœ¬å›¾ä¹¦ï¼Œé¢„è®¡æœ¬æœˆï¼ˆ7æœˆæœ«ï¼‰å¯åœ¨äº¬ä¸œï¼Œå½“å½“ä¸Šçº¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è¿›è¡Œå…³æ³¨ï¼</font>\n<center><img src=\"https://img-blog.csdnimg.cn/20190708234949217.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=50% /></center>","tags":["æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹10ã€ä¸šå†…æ¨èç³»ç»Ÿæ¶æ„ä»‹ç»","url":"/2019/07/10/RecSys/æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜/ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹10ã€ä¸šå†…æ¨èç³»ç»Ÿæ¶æ„ä»‹ç»/","content":"> ä¸ç®¡æ˜¯ç”µå•†ç½‘ç«™ï¼Œè¿˜æ˜¯æ–°é—»èµ„è®¯ç±»ç½‘ç«™ï¼Œæ¨èç³»ç»Ÿéƒ½æ‰®æ¼”ç€ååˆ†é‡è¦çš„è§’è‰²ã€‚ä¸€ä¸ªä¼˜ç§€çš„æ¨èç³»ç»Ÿèƒ½å¤Ÿæ¨èå‡ºè®©äººæ»¡æ„çš„ç‰©å“ï¼Œä½†è¿™ä¸ä»…æ˜¯æ¨èç®—æ³•çš„åŠŸåŠ³ï¼Œæ•´ä¸ªæ¨èæ¶æ„æ‰€æ‰®æ¼”çš„è§’è‰²ä¹Ÿä¸¾è¶³è½»é‡ã€‚\n\n<!--More-->\n\n---\n\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/96265282\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\nä¸ªäººç½‘ç«™ï¼šhttp://thinkgamer.github.io\n\n---\n\n\nå­¦æœ¯ç•Œå¾€å¾€æ›´åŠ å…³æ³¨æ¨èç®—æ³•çš„å„é¡¹è¯„ä¼°æŒ‡æ ‡ã€‚ä»åŸºæœ¬çš„ååŒè¿‡æ»¤åˆ°ç‚¹å‡»ç‡é¢„ä¼°ç®—æ³•ï¼Œä»æ·±åº¦å­¦ä¹ åˆ°å¼ºåŒ–å­¦ä¹ ï¼Œå­¦æœ¯ç•Œéƒ½å§‹ç»ˆèµ°åœ¨æœ€å‰åˆ—ã€‚ä¸€ä¸ªæ¨èç®—æ³•ä»å‡ºç°åˆ°åœ¨ä¸šç•Œå¾—åˆ°å¹¿æ³›åº”ç”¨æ˜¯ä¸€ä¸ªé•¿æœŸçš„è¿‡ç¨‹ï¼Œå› ä¸ºåœ¨å®é™…çš„ç”Ÿäº§ç³»ç»Ÿä¸­ï¼Œé¦–å…ˆéœ€è¦ä¿è¯çš„æ˜¯ç¨³å®šã€å®æ—¶åœ°å‘ç”¨æˆ·æä¾›æ¨èæœåŠ¡ï¼Œåœ¨è¿™ä¸ªå‰æä¸‹æ‰èƒ½è¿½æ±‚æ¨èç³»ç»Ÿçš„æ•ˆæœã€‚\n\nåœ¨ç”Ÿäº§ç³»ç»Ÿä¸­ï¼Œä¸ç®¡æ˜¯ç”¨æˆ·ç»´åº¦ã€ç‰©å“ç»´åº¦è¿˜æ˜¯ç”¨æˆ·å’Œç‰©å“çš„äº¤äº’ç»´åº¦ï¼Œæ•°æ®éƒ½æ˜¯æå…¶ä¸°å¯Œçš„ï¼Œå­¦æœ¯ç•Œå¯¹ç®—æ³•çš„ä½¿ç”¨æ–¹æ³•ä¸èƒ½ç…§æ¬åˆ°å·¥ä¸šç•Œã€‚å½“ä¸€ä¸ªç”¨æˆ·è®¿é—®æ¨èæ¨¡å—æ—¶ï¼Œç³»ç»Ÿä¸å¯èƒ½é’ˆå¯¹è¯¥ç”¨æˆ·å¯¹æ‰€æœ‰çš„ç‰©å“è¿›è¡Œæ’åºï¼Œé‚£ä¹ˆæ¨èç³»ç»Ÿæ˜¯æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿå¯¹åº”çš„å•†å“ä¼—å¤šï¼Œå¦‚ä½•å†³å®šå°†å“ªäº›å•†å“å±•ç¤ºç»™ç”¨æˆ·ï¼Ÿå¯¹äºæ’åºå¥½çš„å•†å“ï¼Œå¦‚ä½•åˆç†åœ°å±•ç¤ºç»™ç”¨æˆ·ï¼Ÿ\n\n# æ¶æ„ä»‹ç»\nå›¾14-1æ‰€ç¤ºæ˜¯ä¸šç•Œæ¨èç³»ç»Ÿé€šç”¨æ¶æ„å›¾ï¼Œä¸»è¦åŒ…æ‹¬ï¼šåº•å±‚åŸºç¡€æ•°æ®ã€æ•°æ®åŠ å·¥å­˜å‚¨ã€å¬å›å†…å®¹ã€è®¡ç®—æ’åºã€è¿‡æ»¤å’Œå±•ç¤ºã€ä¸šåŠ¡åº”ç”¨ã€‚\nåº•å±‚åŸºç¡€æ•°æ®æ˜¯æ¨èç³»ç»Ÿçš„åŸºçŸ³ï¼Œåªæœ‰æ•°æ®é‡è¶³å¤Ÿå¤šï¼Œæ‰èƒ½ä»ä¸­æŒ–æ˜å‡ºæ›´å¤šæœ‰ä»·å€¼çš„ä¿¡æ¯ï¼Œè¿›è€Œæ›´å¥½åœ°ä¸ºæ¨èç³»ç»ŸæœåŠ¡ã€‚åº•å±‚åŸºç¡€æ•°æ®åŒ…æ‹¬ç”¨æˆ·å’Œç‰©å“æœ¬èº«æ•°æ®ã€ç”¨æˆ·è¡Œä¸ºæ•°æ®ã€ç”¨æˆ·ç³»ç»Ÿä¸ŠæŠ¥æ•°æ®ç­‰ã€‚\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190717080622698.png\" width=500px></center>\n\nå›¾14-2ï½å›¾14-4æ‰€ç¤ºä¸ºç”¨æˆ·æœ¬èº«æ•°æ®ã€ç‰©å“æœ¬èº«æ•°æ®å’Œç”¨æˆ·è¡Œä¸ºæ•°æ®ã€‚\n<center><img src=\"https://img-blog.csdnimg.cn/20190717080738525.png\" width=300px></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190717080746725.png\" width=300px></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190717080753359.png\" width=300px></center>\n\nå¾—åˆ°åº•å±‚åŸºç¡€æ•°æ®ä¹‹åï¼Œå°±è¦å¯¹æ•°æ®è¿›è¡ŒåŠ å·¥å¤„ç†å’Œåˆ†æäº†ï¼Œå¦‚ç»“åˆç”¨æˆ·å±æ€§ä¿¡æ¯å’Œè¡Œä¸ºä¿¡æ¯æ„å»ºç”¨æˆ·ç”»åƒï¼Œç»“åˆç‰©å“å±æ€§ä¿¡æ¯å’Œç”¨æˆ·å¯¹ç‰©å“çš„è¡Œä¸ºä¿¡æ¯æ„å»ºç‰©å“ç”»åƒã€‚åŸºäºç”¨æˆ·å¯¹ç‰©å“çš„è¡Œä¸ºæ•°æ®æ„å»ºç‰¹å¾å·¥ç¨‹ï¼ŒåŒæ—¶è¿›è¡Œç›¸å…³çš„æ•°æ®åˆ†æã€‚\næ•°æ®åœ¨å¤„ç†ä¹‹åå­˜å‚¨åˆ°ç›¸åº”çš„ä½ç½®ï¼ˆä¸šåŠ¡æ¨èç³»ç»Ÿä½¿ç”¨çš„æ•°æ®ä¸€èˆ¬å­˜å‚¨åœ¨redisä¸­ï¼‰ï¼Œä¾›æ¨èç³»ç»Ÿå®æ—¶è°ƒç”¨ã€‚\n\n\n# å¬å›å†…å®¹\nç”µå•†ç½‘ç«™ã€å†…å®¹ç½‘ç«™ã€è§†é¢‘ç½‘ç«™ä¸­æ•°æ®é‡å¾ˆå¤§ï¼Œå¹¶ä¸èƒ½ç›´æ¥æŠŠæ‰€æœ‰çš„ç‰©å“æ•°æ®å…¨éƒ¨è¾“é€åˆ°æ¨èç³»ç»Ÿè¿›è¡Œæ’åºï¼Œé‚£ä¹ˆå¦‚ä½•å¯¹ç‰©å“è¿›è¡Œç­›é€‰å°±æˆäº†å¾ˆå…³é”®çš„é—®é¢˜ã€‚\nç¬¬4ç« ä¸­ä»‹ç»äº†ä¸€äº›å¸¸ç”¨çš„æ•°æ®æŒ–æ˜ç®—æ³•å’Œåº”ç”¨åœºæ™¯ï¼Œåœ¨è¿›è¡Œç‰©å“å¬å›æ—¶å¯ä»¥åŸºäºä¸€äº›å¸¸ç”¨çš„æœºå™¨å­¦ä¹ ç®—æ³•æ„å»ºç”¨æˆ·åå¥½æ¨¡å‹ã€ç”¨æˆ·å…´è¶£æ¨¡å‹ã€ç‰©å“ç›¸ä¼¼æ¨¡å‹ã€ç‰©å“äº’è¡¥æ¨¡å‹ç­‰ã€‚åœ¨è¿›è¡Œå†…å®¹å¬å›æ—¶ï¼Œåªå¬å›å’Œç”¨æˆ·æœ‰åå¥½å…³ç³»ã€å’Œç”¨æˆ·æœ‰ç›´æ¥å…³è”ã€å’Œç”¨æˆ·æœ‰ç›´æ¥å…³ç³»çš„ç›¸å…³ç‰©å“ï¼Œè¾“å…¥æ’åºæ¨¡å‹ï¼Œè¿›è¡Œæ‰“åˆ†æ’åºã€‚\nä¾‹å¦‚ï¼Œåœ¨æŸæ–°é—»ç±»ç½‘ç«™ä¸­ï¼Œæ ¹æ®ç”¨æˆ·å¯¹æ–°é—»çš„ç›¸å…³è¡Œä¸ºä¿¡æ¯æ„å»ºç”¨æˆ·å¯¹æ–°é—»æ ‡ç­¾çš„å…´è¶£æ¨¡å‹ï¼Œåœ¨ä¸ºç”¨æˆ·æ¨èæ—¶å°±å¯ä»¥æ¨èç”¨æˆ·åå¥½æ ‡ç­¾ä¸‹çš„æ–°é—»æ•°æ®ï¼Œå¦‚å›¾14-5æ‰€ç¤ºã€‚\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190717080944181.png\" width=500px></center>\n\nåœ¨ç‰©å“å¬å›è¿‡ç¨‹ä¸­ï¼Œé‡ç‚¹æ˜¯å¦‚ä½•æ„å»ºåˆé€‚çš„ç”¨æˆ·åå¥½æ¨¡å‹ï¼Œåªæœ‰ä¿è¯åå¥½æ¨¡å‹çš„å‡†ç¡®æ€§æ‰èƒ½ç¡®ä¿ç”¨æˆ·å¬å›ç‰©å“çš„å‡†ç¡®æ€§ã€‚\n\n# è®¡ç®—æ’åº\n## ç‰¹å¾å·¥ç¨‹\nâ€œæ•°æ®å†³å®šäº†æœºå™¨å­¦ä¹ çš„ä¸Šé™ï¼Œè€Œç®—æ³•åªæ˜¯å°½å¯èƒ½é€¼è¿‘è¿™ä¸ªä¸Šé™â€ï¼Œè¿™é‡Œçš„æ•°æ®æŒ‡çš„å°±æ˜¯ç»è¿‡ç‰¹å¾å·¥ç¨‹å¾—åˆ°çš„æ•°æ®ã€‚ç‰¹å¾å·¥ç¨‹æŒ‡çš„æ˜¯æŠŠåŸå§‹æ•°æ®è½¬å˜ä¸ºæ¨¡å‹çš„è®­ç»ƒæ•°æ®çš„è¿‡ç¨‹ï¼Œç›®çš„å°±æ˜¯è·å–æ›´å¥½çš„è®­ç»ƒæ•°æ®ç‰¹å¾ï¼Œä½¿å¾—æœºå™¨å­¦ä¹ æ¨¡å‹é€¼è¿‘è¿™ä¸ªä¸Šé™ã€‚ç‰¹å¾å·¥ç¨‹èƒ½ä½¿æ¨¡å‹çš„æ€§èƒ½å¾—åˆ°æå‡ï¼Œæœ‰æ—¶ç”šè‡³åœ¨ç®€å•çš„æ¨¡å‹ä¸Šä¹Ÿèƒ½å–å¾—ä¸é”™çš„æ•ˆæœã€‚\n\nç‰¹å¾å·¥ç¨‹åœ¨æœºå™¨å­¦ä¹ ä¸­èµ·ç€éå¸¸é‡è¦çš„ä½œç”¨ï¼Œä¸€èˆ¬è®¤ä¸ºåŒ…æ‹¬ç‰¹å¾æ„å»ºã€ç‰¹å¾æå–ã€ç‰¹å¾é€‰æ‹©ä¸‰éƒ¨åˆ†ã€‚ ç‰¹å¾æå–ä¸ç‰¹å¾é€‰æ‹©éƒ½æ˜¯ä¸ºäº†ä»åŸå§‹ç‰¹å¾ä¸­æ‰¾å‡ºæœ€æœ‰æ•ˆçš„ç‰¹å¾ã€‚å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ï¼š\n- ç‰¹å¾æå–å¼ºè°ƒé€šè¿‡ç‰¹å¾è½¬æ¢çš„æ–¹å¼å¾—åˆ°ä¸€ç»„å…·æœ‰æ˜æ˜¾ç‰©ç†æ„ä¹‰æˆ–ç»Ÿè®¡æ„ä¹‰çš„ç‰¹å¾ï¼›\n- ç‰¹å¾é€‰æ‹©æ˜¯ä»ç‰¹å¾é›†åˆä¸­æŒ‘é€‰ä¸€ç»„å…·æœ‰æ˜æ˜¾ç‰©ç†æ„ä¹‰æˆ–ç»Ÿè®¡æ„ä¹‰çš„ç‰¹å¾å­é›†ã€‚\n\nä¸¤è€…éƒ½èƒ½å¸®åŠ©å‡å°‘ç‰¹å¾ç»´åº¦ã€æ•°æ®å†—ä½™ï¼Œç‰¹å¾æå–æœ‰æ—¶èƒ½å‘ç°æ›´æœ‰æ„ä¹‰çš„ç‰¹å¾å±æ€§ï¼Œç‰¹å¾é€‰æ‹©çš„è¿‡ç¨‹ç»å¸¸èƒ½è¡¨ç¤ºå‡ºæ¯ä¸ªç‰¹å¾å¯¹äºæ¨¡å‹æ„å»ºçš„é‡è¦æ€§ã€‚\nç‰¹å¾å·¥ç¨‹çš„æ ‡å‡†åŒ–æµç¨‹ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š\nï¼ˆ1ï¼‰åŸºäºä¸šåŠ¡ç†è§£ï¼Œæ‰¾åˆ°å¯¹å› å˜é‡æœ‰å½±å“çš„æ‰€æœ‰è‡ªå˜é‡ï¼Œå³ç‰¹å¾ã€‚\nï¼ˆ2ï¼‰è¯„ä¼°ç‰¹å¾çš„å¯ç”¨æ€§ã€è¦†ç›–ç‡ã€å‡†ç¡®ç‡ç­‰ã€‚\nï¼ˆ3ï¼‰ç‰¹å¾å¤„ç†ï¼šåŒ…æ‹¬ç‰¹å¾æ¸…æ´—ã€ç‰¹å¾é¢„å¤„ç†ï¼ˆç‰¹å¾é¢„å¤„ç†å¯å‚è€ƒç¬¬4ç« â€œæ•°æ®é¢„å¤„ç†â€éƒ¨åˆ†ï¼‰ã€ç‰¹å¾é€‰æ‹©ã€‚\nï¼ˆ4ï¼‰ç‰¹å¾ç›‘æ§ï¼šç‰¹å¾å¯¹ç®—æ³•æ¨¡å‹çš„å½±å“å¾ˆå¤§ï¼Œå¾®å°çš„æµ®åŠ¨éƒ½ä¼šå¸¦æ¥æ¨¡å‹æ•ˆæœçš„å¾ˆå¤§æ³¢åŠ¨ï¼Œå› æ­¤åšå¥½é‡è¦ç‰¹å¾çš„ç›‘æ§å¯é˜²æ­¢ç‰¹å¾å¼‚å¸¸å˜åŠ¨å¸¦æ¥çº¿ä¸Šäº‹æ•…ã€‚\n## ç‰¹å¾åˆ†ç±»\nåœ¨å·¥ä¸šç•Œçš„æ¨èç³»ç»Ÿä¸­ï¼Œå…¸å‹çš„ç‰¹å¾ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å››ç±»ã€‚\n- ç›¸å…³æ€§ç‰¹å¾ï¼šè¯„ä¼°å†…å®¹çš„å±æ€§ä¸ç”¨æˆ·æ˜¯å¦åŒ¹é…ã€‚æ˜¾æ€§çš„åŒ¹é…åŒ…æ‹¬å…³é”®è¯åŒ¹é…ã€åˆ†ç±»åŒ¹é…ã€æ¥æºåŒ¹é…ã€ä¸»é¢˜åŒ¹é…ç­‰ã€‚\n- ç¯å¢ƒç‰¹å¾ï¼šåŒ…æ‹¬åœ°ç†ä½ç½®ã€æ—¶é—´ã€‚è¿™äº›æ—¢æ˜¯åå·®ç‰¹å¾ï¼Œåˆèƒ½ä»¥æ­¤æ„å»ºä¸€äº›åŒ¹é…ç‰¹å¾ã€‚\n- çƒ­åº¦ç‰¹å¾ï¼šåŒ…æ‹¬å…¨å±€çƒ­åº¦ã€åˆ†ç±»çƒ­åº¦ã€ä¸»é¢˜çƒ­åº¦åŠå…³é”®è¯çƒ­åº¦ç­‰ã€‚å†…å®¹çƒ­åº¦ä¿¡æ¯åœ¨å¤§çš„æ¨èç³»ç»Ÿä¸­ç‰¹åˆ«æ˜¯åœ¨ç”¨æˆ·å†·å¯åŠ¨æ—¶éå¸¸æœ‰æ•ˆã€‚\n- ååŒç‰¹å¾ï¼šå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¸®åŠ©è§£å†³æ‰€è°“ç®—æ³•è¶Šæ¨è¶Šçª„çš„é—®é¢˜ã€‚ååŒç‰¹å¾å¹¶ä¸è€ƒè™‘ç”¨æˆ·å·²æœ‰å†å²ï¼Œè€Œæ˜¯é€šè¿‡ç”¨æˆ·è¡Œä¸ºåˆ†æä¸åŒç”¨æˆ·é—´çš„ç›¸ä¼¼æ€§ï¼Œå¦‚ç‚¹å‡»ç›¸ä¼¼ã€å…´è¶£åˆ†ç±»ç›¸ä¼¼ã€ä¸»é¢˜ç›¸ä¼¼ã€å…´è¶£è¯ç›¸ä¼¼ï¼Œç”šè‡³å‘é‡ç›¸ä¼¼ï¼Œä»è€Œæ‰©å±•æ¨¡å‹çš„æ¢ç´¢èƒ½åŠ›ã€‚\n## æ’åºç®—æ³•\nåœ¨å¾—åˆ°å¬å›çš„ç‰©å“ä¹‹åï¼Œå°±è¦è€ƒè™‘å¦‚ä½•å¯¹è¿™äº›ç‰©å“è¿›è¡Œæ­£ç¡®çš„æ’åºã€‚ç›®å‰ä¸šç•Œåœ¨æœºå™¨å­¦ä¹ é¢†åŸŸæœ€æ™®éçš„åšæ³•æ˜¯å°†æ’åºæ¨èæ¨¡å‹ä½œä¸ºäºŒåˆ†ç±»æ¨¡å‹æ¥è®­ç»ƒï¼Œå³åœ¨æ„é€ æ ·æœ¬é›†çš„è¿‡ç¨‹ä¸­å¯¹åº”çš„æ ‡ç­¾ä¸º0æˆ–1ï¼ˆæœªç‚¹å‡»æˆ–ç‚¹å‡»ï¼‰ã€‚å¸¸ç”¨çš„æ’åºç®—æ³•åŒ…æ‹¬ä½†ä¸å±€é™äºGBDTã€LRã€XGBoostç­‰ï¼Œå½“ç„¶ä¹Ÿæœ‰å¾ˆå¤šæŠŠGBDTå’ŒLRç»“åˆèµ·æ¥ä½¿ç”¨çš„ï¼Œä½†æ˜¯æ¨¡å‹èåˆåçš„æ•ˆæœåœ¨ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ä¸­å¸¦æ¥çš„æå‡å¹¶ä¸æ˜¯å¾ˆå¤§ã€‚\n\n# ç‰©å“è¿‡æ»¤å’Œå±•ç¤º\n> è¿‡æ»¤å’Œå±•ç¤ºç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒï¼Œå› æ­¤åœ¨åšæ¨èç³»ç»Ÿæ—¶ä¸€å®šè¦æ³¨æ„ç›¸å…³çš„è¿‡æ»¤å’Œå±•ç¤ºè§„åˆ™ã€‚\n\n## ç‰©å“è¿‡æ»¤\nç»å¸¸ä¼šå¬åˆ°äººä»¬è¯´â€œç”µå•†ç½‘ç«™ç»å¸¸ç»™æˆ‘æ¨èæˆ‘å·²ç»ä¹°è¿‡çš„ä¸œè¥¿â€ã€‚å…¶å®åœ¨åšæ¨èç³»ç»Ÿçš„è¿‡ç¨‹ä¸­ä¼šæœ‰ç›¸å…³çš„è¿‡æ»¤è§„åˆ™ï¼Œåœ¨ç”µå•†æ¨èç³»ç»Ÿä¸­ï¼Œæœ€å¸¸ç”¨çš„è¿‡æ»¤è§„åˆ™æ˜¯ï¼šç”¨æˆ·è´­ä¹°è¿‡æ»¤ï¼Œå³åœ¨è¿›è¡Œå•†å“å¬å›æ—¶è¿‡æ»¤æ‰ç”¨æˆ·è¿‡å»ä¸€æ®µæ—¶é—´å†…å·²ç»è´­ä¹°è¿‡çš„å•†å“å’Œç›¸ä¼¼å•†å“ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·æ˜¨å¤©ä¹°äº†ä¸€ä¸ªæœºæ¢°é”®ç›˜ï¼Œä»Šå¤©çš„æ¨èç³»ç»Ÿå°±ä¸ä¼šå†ç»™è¯¥ç”¨æˆ·æ¨èæœºæ¢°é”®ç›˜äº†ã€‚\nåŒæ—¶ä¹Ÿä¼šæœ‰ä¸€äº›å…¶ä»–è¿‡æ»¤è§„åˆ™å¦‚ï¼š\n- é¡¹ç›®æŒ‡å®šçš„ä¸€äº›æ•æ„Ÿè¯æ±‡æˆ–æ•æ„Ÿå•†å“ç­‰è¿‡æ»¤ã€‚\n- åˆ·å•å•†å“è¿‡æ»¤ã€‚\n- æ›å…‰å•†å“è¿‡æ»¤ï¼ˆæœ‰æ—¶ä¼šè®¤ä¸ºé‚£äº›æ›å…‰è¿‡çš„å•†å“æ˜¯ç”¨æˆ·ä¸æ„Ÿå…´è¶£çš„ï¼Œå³çœ‹åˆ°äº†æ²¡æœ‰è¿›è¡Œç‚¹å‡»ï¼‰ã€‚\n- æ— è´§å•†å“è¿‡æ»¤ã€‚\n\nè‡³äºä¸ºä»€ä¹ˆæ¨èç³»ç»Ÿä¼šç»™ç”¨æˆ·æ¨èå·²ç»è´­ä¹°è¿‡çš„å•†å“ï¼Œæ˜¯å› ä¸ºåœ¨ç”¨æˆ·è´­ä¹°è¯¥å•†å“ä¹‹åï¼Œåˆå¯¹è¯¥ç±»å‹çš„å•†å“äº§ç”Ÿäº†æ–°çš„è¡Œä¸ºï¼Œæ‰€ä»¥æ¨èç³»ç»Ÿä¼šå†æ¬¡è¿›è¡Œæ¨èã€‚\n## ç‰©å“å±•ç¤º\nå±•ç¤ºå³ç”¨æˆ·çœ‹åˆ°çš„æ¨èç»“æœã€‚ä¸åŒç±»å‹çš„æ¨èç³»ç»Ÿä¸­å±•ç¤ºçš„è§„åˆ™ä¸ä¸€æ ·ï¼Œä½†åŸºæœ¬åŸåˆ™æ˜¯ï¼šå“ç±»éš”ç¦»å±•ç¤ºï¼Œå³åŒç±»å‹çš„å•†å“ä¸èƒ½å‡ºç°åœ¨ç›¸é‚»çš„ä½ç½®ã€‚ä¾‹å¦‚æ¨èç³»ç»Ÿè¿”å›çš„æ¨èç»“æœé›†ä¸­æœ‰ä¸¤ä¸ªæ‰‹æœºï¼Œè¿™ä¸¤ä¸ªæ‰‹æœºå°±ä¸èƒ½åœ¨ç›¸é‚»çš„ä½ç½®å±•ç¤ºã€‚\n\næœ‰çš„æ¨èç³»ç»Ÿä¼šè¦æ±‚ç¬¬ä¸€å±å†…ä¸èƒ½å‡ºç°åŒç±»å‹çš„å•†å“ï¼Œå¦‚æ¨èç³»ç»Ÿç»™ç”¨æˆ·çš„ç¬¬ä¸€å±å±•ç¤ºäº†8ä¸ªå•†å“ï¼Œé‚£ä¹ˆè¿™8ä¸ªå•†å“ä¸­å°±ä¸èƒ½å‡ºç°åŒç±»å‹çš„å•†å“ï¼ˆå¦‚ä¸èƒ½å‡ºç°ä¸¤ä¸ªæ‰‹æœºï¼‰ã€‚\n\n# æ•ˆæœè¯„ä¼°\næ— è®ºæ˜¯æ¨èæ¶æ„æœ€å¼€å§‹çš„å¬å›å†…å®¹ã€è®¡ç®—æ’åºï¼Œè¿˜æ˜¯æœ€åçš„è¿‡æ»¤å’Œå±•ç¤ºï¼Œæ¯æ¬¡æ–°ä¸Šä¸€ä¸ªæ–¹æ¡ˆä¹‹åéƒ½è¦è¿›è¡Œæ•ˆæœç»Ÿè®¡ï¼Œç”Ÿäº§ç³»ç»Ÿä¸­æœ€å¸¸ç”¨çš„æ•ˆæœè¯„ä¼°æ–¹æ³•å°±æ˜¯ABTestï¼Œæ›´å¤šå…³äºABTestçš„ä½¿ç”¨ä»‹ç»å¯ä»¥å‚è€ƒç¬¬10ç« ã€‚\nåœ¨ç”Ÿäº§ç³»ç»Ÿä¸­ï¼Œè¿›è¡ŒABtestä¹‹åï¼Œå¾€å¾€ä¼šå°†ä¸å¥½çš„æ–¹æ¡ˆä¸‹çº¿ï¼Œä¿ç•™æ•ˆæœæ›´å¥½çš„ä¸€æ–¹ï¼ŒåŒæ—¶ä¹Ÿä¼šä¸æ–­ä¸Šçº¿æ–°çš„å¬å›ã€æ’åºç‰¹å¾ç­‰ï¼Œè¿­ä»£ä¼˜åŒ–æ¨¡å‹ï¼Œæå‡çº¿ä¸Šæ•ˆæœã€‚\n\n---\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n\n---\n<font color=red>æ³¨ï¼šã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹æ˜¯å°ç¼–è¿‘æœŸè¦ä¸Šçš„ä¸€æœ¬å›¾ä¹¦ï¼Œé¢„è®¡æœ¬æœˆï¼ˆ7æœˆæœ«ï¼‰å¯åœ¨äº¬ä¸œï¼Œå½“å½“ä¸Šçº¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è¿›è¡Œå…³æ³¨ï¼</font>\n<center><img src=\"https://img-blog.csdnimg.cn/20190708234949217.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=50% /></center>","tags":["æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹9ã€æ•ˆæœè¯„ä¼°","url":"/2019/07/10/RecSys/æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜/ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹9ã€æ•ˆæœè¯„ä¼°/","content":"\n> æ¨èç³»ç»Ÿçš„è¯„ä¼°æ–¹æ³•åˆ†ä¸ºç”¨æˆ·è°ƒç ”ã€åœ¨çº¿è¯„ä¼°å’Œç¦»çº¿è¯„ä¼°ã€‚\n\n<!--More-->\n\n---\n\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/96207006\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\nä¸ªäººç½‘ç«™ï¼šhttp://thinkgamer.github.io\n\n---\n\n\n# ç”¨æˆ·è°ƒç ”\næ¨èç³»ç»Ÿçš„ç¦»çº¿å®éªŒæŒ‡æ ‡å’Œå®é™…å•†ä¸šæŒ‡æ ‡ä¹‹é—´å­˜åœ¨å·®å¼‚ã€‚ä¾‹å¦‚ï¼Œé¢„æµ‹å‡†ç¡®ç‡å’Œç”¨æˆ·æ»¡æ„åº¦ä¹‹é—´å°±å­˜åœ¨å¾ˆå¤§çš„å·®å¼‚ï¼Œé«˜é¢„æµ‹å‡†ç¡®ç‡ä¸ç­‰äºé«˜ç”¨æˆ·æ»¡æ„åº¦ã€‚å› æ­¤ï¼Œè¦å‡†ç¡®è¯„ä¼°ä¸€ä¸ªç®—æ³•ï¼Œéœ€è¦ç›¸å¯¹çœŸå®çš„ç¯å¢ƒï¼Œæœ€å¥½çš„æ–¹æ³•å°±æ˜¯å°†ç®—æ³•ç›´æ¥ä¸Šçº¿æµ‹è¯•ã€‚ä½†å¦‚æœå¯¹ç®—æ³•æ˜¯å¦ä¼šé™ä½ç”¨æˆ·æ»¡æ„åº¦ä¸å¤ªæœ‰æŠŠæ¡ï¼Œé‚£ä¹ˆç›´æ¥ä¸Šçº¿å¾€å¾€æœ‰è¾ƒå¤§çš„é£é™©ï¼Œæ‰€ä»¥åœ¨ä¸Šçº¿æµ‹è¯•å‰ä¸€èˆ¬éœ€è¦åšä¸€æ¬¡ç”¨æˆ·è°ƒç ”ã€‚\nåœ¨è¿›è¡Œç”¨æˆ·è°ƒç ”çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä¿è¯æµ‹è¯•ç”¨æˆ·çš„åˆ†å¸ƒå’ŒçœŸå®ç”¨æˆ·åˆ†å¸ƒç›¸åŒã€‚ä¾‹å¦‚ï¼Œç”·å¥³å„ä¸€åŠï¼Œå¹´é¾„ã€æ´»è·ƒåº¦çš„åˆ†å¸ƒéƒ½å’ŒçœŸå®ç”¨æˆ·åˆ†å¸ƒå°½é‡ç›¸åŒã€‚æ­¤å¤–ï¼Œç”¨æˆ·è°ƒæŸ¥è¦å°½é‡ä¿è¯æ˜¯åŒç›²å®éªŒï¼Œå³ä¸è¦è®©å®éªŒäººå‘˜å’Œç”¨æˆ·äº‹å…ˆçŸ¥é“æµ‹è¯•çš„ç›®æ ‡ï¼Œä»¥å…ç”¨æˆ·çš„å›ç­”å’Œå®éªŒäººå‘˜çš„æµ‹è¯•å—ä¸»è§‚æˆåˆ†çš„å½±å“ã€‚\n\nç”¨æˆ·è°ƒç ”çš„ä¼˜ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ã€‚\n- ä¼˜ç‚¹ï¼šå¯ä»¥è·å¾—å¾ˆå¤šä½“ç°ç”¨æˆ·ä¸»è§‚æ„Ÿå—çš„æŒ‡æ ‡ï¼Œæ¯”åœ¨çº¿å®éªŒé£é™©ä½ï¼Œå‡ºç°é”™è¯¯åå¾ˆå®¹æ˜“å¼¥è¡¥ã€‚\n- ç¼ºç‚¹ï¼šæ‹›å‹Ÿæµ‹è¯•ç”¨æˆ·ä»£ä»·è¾ƒå¤§ï¼›å¾ˆéš¾ç»„ç»‡å¤§è§„æ¨¡çš„æµ‹è¯•ç”¨æˆ·ï¼Œå› æ­¤æµ‹è¯•ç»“æœçš„ç»Ÿè®¡æ„ä¹‰ä¸è¶³ã€‚\n\næ­¤å¤–ï¼Œåœ¨å¾ˆå¤šæ—¶å€™è®¾è®¡åŒç›²å®éªŒéå¸¸å›°éš¾ï¼Œè€Œä¸”ç”¨æˆ·åœ¨æµ‹è¯•ç¯å¢ƒä¸‹çš„è¡Œä¸ºå’ŒçœŸå®ç¯å¢ƒä¸‹çš„è¡Œä¸ºå¯èƒ½æœ‰æ‰€ä¸åŒï¼Œå› è€Œï¼Œåœ¨æµ‹è¯•ç¯å¢ƒä¸‹æ”¶é›†åˆ°çš„æµ‹è¯•æŒ‡æ ‡å¯èƒ½ä¸çœŸå®ç¯å¢ƒä¸‹çš„ä¸å¤ªç›¸åŒã€‚æ‰€ä»¥ï¼Œåœ¨å®é™…æ¨èç³»ç»Ÿè¯„ä¼°è¿‡ç¨‹ä¸­ï¼ŒåŸºæœ¬ä¸ä¼šé‡‡ç”¨è¯¥æ–¹å¼è¿›è¡Œè¯„ä¼°ï¼Œç›¸åï¼Œä¼šé€šè¿‡çº¿ä¸Šçš„ä¸€äº›è¡Œä¸ºç»Ÿè®¡å¾—å‡ºç»“æœã€‚ä¾‹å¦‚ï¼Œè±†ç“£FMé¢‘é“çš„ç‚¹èµå’Œåˆ é™¤ï¼Œç•Œé¢å¦‚å›¾10-1æ‰€ç¤ºã€‚\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190716234700573.png\" width=500px></center>\n\n# åœ¨çº¿è¯„ä¼°\nåœ¨çº¿è¯„ä¼°ï¼šè®¾è®¡ä¸€ä¸ªåœ¨çº¿å®éªŒï¼Œç„¶åæ ¹æ®ç”¨æˆ·çš„åœ¨çº¿åé¦ˆç»“æœæ¥è¡¡é‡æ¨èç³»ç»Ÿçš„è¡¨ç°ã€‚åœ¨çº¿è¯„ä¼°ä¸­ï¼Œæ¯”è¾ƒé‡è¦çš„ä¸¤ä¸ªé€‰æ‹©ç‚¹æ˜¯â€”â€”åœ¨çº¿å®éªŒæ–¹å¼å’Œåœ¨çº¿è¯„ä¼°æŒ‡æ ‡ï¼Œ10.3å’Œ10.4èŠ‚å°†åˆ†åˆ«ä»‹ç»è¿™ä¸¤ä¸ªçŸ¥è¯†ç‚¹ã€‚\n\n## ABTestä»‹ç»\nABTestå°±æ˜¯ä¸ºäº†å®ç°åŒä¸€ä¸ªç›®æ ‡åˆ¶å®šä¸¤ä¸ªæ–¹æ¡ˆï¼Œè®©ä¸€éƒ¨åˆ†ç”¨æˆ·ä½¿ç”¨Aæ–¹æ¡ˆï¼Œå¦ä¸€éƒ¨åˆ†ç”¨æˆ·ä½¿ç”¨Bæ–¹æ¡ˆï¼Œè®°å½•ä¸‹ä¸¤éƒ¨åˆ†ç”¨æˆ·çš„åé¦ˆæƒ…å†µï¼Œç„¶åæ ¹æ®ç›¸åº”çš„è¯„ä¼°æŒ‡æ ‡ç¡®è®¤å“ªç§æ–¹æ¡ˆæ›´å¥½ã€‚\n\näº’è”ç½‘è¡Œä¸šé‡Œï¼Œåœ¨è½¯ä»¶å¿«é€Ÿä¸Šçº¿çš„è¿‡ç¨‹ä¸­ï¼ŒABTestæ˜¯ä¸€ä¸ªå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿè¯•é”™çš„å®éªŒæ–¹æ³•ã€‚åœ¨ç»Ÿè®¡å­¦ä¸Šï¼ŒABTestå…¶å®æ˜¯å‡è®¾æ£€éªŒçš„ä¸€ç§å½¢å¼ã€‚å®ƒèƒ½å¸®åŠ©å¼€å‘è€…äº†è§£æ¨èç³»ç»Ÿçš„æ”¹åŠ¨æ˜¯å¦æœ‰æ•ˆã€èƒ½å¤Ÿå¸¦æ¥å¤šå¤§çš„KPIæå‡ã€‚\n\nåœ¨æ¨èç³»ç»Ÿä¸­ï¼Œä¸ºäº†å¯¹æ¯”ä¸åŒç®—æ³•ã€ä¸åŒæ•°æ®é›†å¯¹æœ€ç»ˆç»“æœçš„å½±å“ï¼Œé€šè¿‡ä¸€å®šçš„è§„åˆ™å°†ç”¨æˆ·éšæœºåˆ†æˆå‡ ç»„ï¼Œå¹¶å¯¹ä¸åŒç»„é‡‡å–ä¸åŒçš„å¬å›æˆ–æ¨èç®—æ³•ï¼Œæœ€ç»ˆé€šè¿‡ä¸åŒç»„ç”¨æˆ·çš„å„ç§è¯„ä¼°æŒ‡æ ‡æ¥è¿›è¡Œå¯¹æ¯”åˆ†æã€‚\n\nä¸€ä¸ªå…¸å‹å¾—åˆ°ABTestæ¶æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190716234907436.png\" width=500px></center>\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¯¹ç”¨æˆ·è¿›è¡Œåˆ†æ¡¶å¹¶å¬å›å•†å“ä¹‹åï¼Œéœ€è¦é‡æ–°å°†ç”¨æˆ·æ‰“æ•£å¹¶åˆ†æ¡¶ï¼Œè¿™æ ·èƒ½ç¡®ä¿ä¸åŒæ¡¶ä¹‹é—´çš„ç”¨æˆ·æ²¡æœ‰ç›¸å…³æ€§ï¼Œå¬å›æ± ä¸­çš„ABTestå’Œæ’åºéƒ¨åˆ†çš„ABTestæ²¡æœ‰å…³è”ï¼Œäº’ä¸å½±å“ã€‚\n\n## ABTestæ³¨æ„äº‹é¡¹\nABTestæ˜¯ä¸€ç§åœ¨çº¿ä¸Šæµ‹è¯•ç®—æ³•å¥½åçš„æ–¹æ³•ï¼Œç”±äºå…¶ç®€å•ã€ç›´æ¥ã€ä¾¿äºå®æ–½ï¼Œè¢«å¹¿æ³›åº”ç”¨åœ¨å…¬å¸ä¸­ã€‚ä½†åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä»è¦æ³¨æ„ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ã€‚\nï¼ˆ1ï¼‰è¯å®åå·®ã€‚\nè¯å®åå·®æ˜¯æŒ‡ï¼šé‡åˆ°ä¸€ä¸ªå‘½é¢˜æ—¶ï¼Œäººä»¬å€¾å‘äºå¯»æ‰¾æ”¯æŒè¿™ä¸ªå‘½é¢˜çš„è¯æ®ï¼Œè€Œå¿½ç•¥å¦å®šè¿™ä¸ªå‘½é¢˜çš„è¯æ®ã€‚\nåœ¨ABTestä¸­ï¼Œç®—æ³•å·¥ç¨‹å¸ˆåœ¨è°ƒä¼˜çš„è¿‡ç¨‹ä¸­ï¼Œä¼šè‡ªç„¶åœ°å°†æµ‹è¯•å‡è®¾å’Œè®¾è®¡å»ºç«‹åœ¨ä»–ä»¬è‡ªå·±çš„æ€åº¦å’Œè§‚ç‚¹ä¸Šï¼Œè€Œå¿½ç•¥äº†ä¸€äº›äº’ç›¸çŸ›ç›¾çš„ä¿¡æ¯ï¼Œä¸å»æµ‹è¯•å’Œè®¾è®¡ä¸è‡ªå·±æ„è§ä¸ä¸€è‡´çš„æƒ³æ³•ã€‚è¿™å°±ä¼šå¯¼è‡´ï¼šä¸€æ—¦æ¨èç³»ç»Ÿå‡ºç°ç¬¦åˆé¢„æœŸçš„ç»“æœï¼Œä»–ä»¬ä¼šè®¤ä¸ºæ­¤å‰çš„æƒ³æ³•æ˜¯å¯¹çš„ï¼Œä¹Ÿå°±ä¸å†è¿›è¡Œå®éªŒäº†ã€‚è¿™æ ·å°±ä¼šå¯¼è‡´å¾ˆå¤§çš„è¯¯å·®ï¼Œä¸åŒçš„ä¸šåŠ¡åœºæ™¯ä¼šå—åˆ°è¥é”€å’Œå¤–ç•Œå…¶ä»–æ´»åŠ¨çš„å½±å“ã€‚å› æ­¤ï¼Œåœ¨è¿›è¡ŒABTestæ—¶è¦æ³¨æ„å¤–ç•Œå› ç´ å¯¹ç³»ç»Ÿçš„å½±å“ï¼Œåº”é€‚å½“æ‹‰é•¿æµ‹è¯•å‘¨æœŸã€‚\nï¼ˆ2ï¼‰å¹¸å­˜åå·®ã€‚\nå¹¸å­˜åå·®æ˜¯ä¸€ç§è®¤çŸ¥åå·®ï¼Œå…¶é€»è¾‘è°¬è¯¯ä¸ºï¼šæ¨èç³»ç»Ÿå€¾å‘äºå…³æ³¨ç»å¸¸æ¥è®¿ç”¨æˆ·ï¼Œè€Œå¿½ç•¥ä»–ä»¬åœ¨è®¿é—®æ¨èç³»ç»Ÿçš„è¿‡ç¨‹ä¸­å·²ç»è¢«å½±å“ã€‚\nä¾‹å¦‚â€œä¹”å¸ƒæ–¯å‹‡äºæŒ‘æˆ˜ä½“åˆ¶å–å¾—äº†æˆåŠŸï¼Œæ‰€ä»¥å¤§å®¶éƒ½åº”è¯¥éƒ½å»å°è¯•æŒ‘æˆ˜ä½“åˆ¶â€ï¼Œåœ¨è¿™å¥è¯ä¸­æ²¡æœ‰æåˆ°é‚£äº›æŒ‘æˆ˜ä½“åˆ¶å¤±è´¥çš„äººï¼Œä»…ä»¥ä¸€åæˆåŠŸè€…ä¸ºä¾‹è¯´æ˜ï¼Œæ²¡æœ‰è¯´æ˜å¤±è´¥è€…çš„ä¸‹åœºã€‚\nåœ¨æ¨èç³»ç»Ÿä¸­ä¹Ÿä¸€æ ·ï¼Œä¸èƒ½åªå…³æ³¨æ¥è®¿è€…çš„è¡Œä¸ºç‰¹å¾å’Œåå¥½ï¼Œæ›´è¦æ³¨æ„é‚£äº›æ²¡æœ‰æ¥è®¿çš„ç”¨æˆ·çš„è¡Œä¸ºç‰¹å¾å’Œåå¥½ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯æ¨èç³»ç»Ÿçš„æ³›åŒ–èƒ½åŠ›ã€‚\nï¼ˆ3ï¼‰è¾›æ™®æ£®æ‚–è®ºã€‚\nå¼€å§‹è¿›è¡ŒABTeståï¼Œå°±ä¸è¦æ›´æ”¹è®¾ç½®ã€å˜é‡æˆ–å¯¹ç…§çš„è®¾è®¡ï¼Œå¹¶ä¸”ä¸è¦åœ¨å®éªŒè¿‡ç¨‹ä¸­æ›´æ”¹å·²ç»åˆ†é…åˆ°å˜é‡çš„æµé‡ã€‚\nåœ¨æµ‹è¯•æœŸé—´è°ƒæ•´å˜é‡çš„æµé‡åˆ†é…ï¼Œå¯èƒ½ä¼šå½±å“æµ‹è¯•ç»“æœã€‚å½“ä¸¤ç»„æ•°æ®åˆå¹¶æ—¶ï¼Œä¸åŒæ•°æ®ç»„ä¸­çš„è¶‹åŠ¿æ¶ˆå¤±ï¼Œä¾¿ä¼šäº§ç”Ÿâ€œè¾›æ™®æ£®æ‚–è®ºâ€ç°è±¡ã€‚\nï¼ˆ4ï¼‰å‡å€¼å›å½’ã€‚\nåœ¨è¿›è¡ŒABTestå‡ å¤©åï¼Œå¦‚æœå‘ç°KPIæŒ‡æ ‡æœ‰å¤§å¹…æå‡ï¼Œè¯·ä¸è¦ç«‹å³ä¸‹ç»“è®ºã€‚å› ä¸ºè¿™ç§æ—©æœŸçš„æ˜¾è‘—æå‡å¾€å¾€ä¼šåœ¨æ¥ä¸‹æ¥çš„å‡ å¤©æˆ–å‡ å‘¨çš„æµ‹è¯•ä¸­é€æ¸æ¶ˆå¤±ï¼Œæ­¤æ—¶çœ‹åˆ°çš„ä¸è¿‡æ˜¯å‡å€¼å›å½’ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæŸä¸€æŒ‡æ ‡åœ¨ç¬¬ä¸€æ¬¡è¯„ä¼°æ—¶å‡ºç°æç«¯ç»“æœï¼Œåœ¨åç»­çš„è§‚å¯Ÿä¸­ï¼Œè¯¥æŒ‡æ ‡ä¼šé€æ¸è¶‹å‘äºå¹³å‡å€¼ã€‚å°æ ·æœ¬å°¤å…¶å®¹æ˜“ç”Ÿäº§æç«¯ç»“æœï¼Œå› æ­¤ä¸è¦åœ¨åˆšå¼€å§‹ç”Ÿæˆæ•°æ®æ—¶å°±å°†æ‰€å¾—åˆ°çš„ç»“æœè§£è¯»æˆè½¬åŒ–ç‡ï¼Œè¦é€‚å½“å¢åŠ æµ‹è¯•æ—¶é—´ï¼Œè‡³å°‘ä¿è¯ä¸€ä¸ªæ—¶é—´å‘¨æœŸï¼ˆå¦‚ä¸€å‘¨ï¼‰ã€‚\n## åœ¨çº¿è¯„ä¼°æŒ‡æ ‡\nåœ¨çº¿è¯„ä¼°æŒ‡æ ‡æ˜¯æŒ‡åœ¨å®é™…çš„ä¸šåŠ¡åœºæ™¯ä¸­å»è¯„ä¼°æ¨èç³»ç»Ÿå¥½åçš„æŒ‡æ ‡ã€‚å¸¸è§çš„åœ¨çº¿è¯„ä¼°æŒ‡æ ‡åŒ…æ‹¬ç‚¹å‡»ç‡ã€è½¬åŒ–ç‡ã€GMVç­‰ã€‚\n> è¿™é‡Œä¸å±•å¼€ä»‹ç»ï¼Œæ¬¢è¿é˜…è¯»ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹\n\n# ç¦»çº¿è¯„ä¼°\nç¦»çº¿è¯„ä¼°ï¼šæ ¹æ®å¾…è¯„ä¼°æ¨èç³»ç»Ÿåœ¨å®éªŒæ•°æ®é›†ä¸Šçš„è¡¨ç°ï¼ŒåŸºäºä¸€äº›ç¦»çº¿è¯„ä¼°æŒ‡æ ‡æ¥è¡¡é‡æ¨èç³»ç»Ÿçš„æ•ˆæœã€‚ç›¸æ¯”äºåœ¨çº¿è¯„ä¼°ï¼Œç¦»çº¿è¯„ä¼°æ›´æ–¹ä¾¿ã€æ›´ç»æµï¼Œä¸€æ—¦æ•°æ®é›†é€‰å®šï¼Œåªéœ€å°†å¾…è¯„ä¼°çš„æ¨èç³»ç»Ÿåœ¨æ­¤æ•°æ®é›†ä¸Šè¿è¡Œå³å¯ã€‚ç¦»çº¿è¯„ä¼°æœ€ä¸»è¦çš„ç¯èŠ‚æœ‰ä¸¤ä¸ªï¼šæ‹†åˆ†æ•°æ®é›†ã€é€‰æ‹©ç¦»çº¿è¯„ä¼°æŒ‡æ ‡ã€‚\n## æ•°æ®é›†æ‹†åˆ†\nåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œé€šå¸¸å°†æ•°æ®é›†æ‹†åˆ†ä¸ºè®­ç»ƒæ•°æ®é›†ã€éªŒè¯æ•°æ®é›†å’Œæµ‹è¯•æ•°æ®é›†ã€‚å®ƒä»¬çš„åŠŸèƒ½åˆ†åˆ«å¦‚ä¸‹ã€‚\n- è®­ç»ƒæ•°æ®é›†ï¼ˆTrain Datasetï¼‰ï¼šç”¨æ¥æ„å»ºæœºå™¨å­¦ä¹ æ¨¡å‹ã€‚\n- éªŒè¯æ•°æ®é›†ï¼ˆValidation Datasetï¼‰ï¼šè¾…åŠ©æ„å»ºæ¨¡å‹ï¼Œç”¨äºåœ¨æ„å»ºè¿‡ç¨‹ä¸­è¯„ä¼°æ¨¡å‹ï¼Œä¸ºæ¨¡å‹æä¾›æ— åä¼°è®¡ï¼Œè¿›è€Œè°ƒæ•´æ¨¡å‹çš„è¶…å‚æ•°ã€‚\n- æµ‹è¯•æ•°æ®é›†ï¼ˆTest Datasetï¼‰ï¼šè¯„ä¼°è®­ç»ƒå®Œæˆçš„æœ€ç»ˆæ¨¡å‹çš„æ€§èƒ½ã€‚\nä¸‰ç±»æ•°æ®é›†åœ¨æ¨¡å‹è®­ç»ƒå’Œè¯„ä¼°è¿‡ç¨‹ä¸­çš„ä½¿ç”¨é¡ºåºå¦‚å›¾æ‰€ç¤ºã€‚\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20190716235204796.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\næ•°æ®é›†æ‹†åˆ†çš„æ–¹å¼æœ‰ï¼š\n- ç•™å‡ºæ³•\n- K-æŠ˜äº¤å‰éªŒè¯æ³•\n- è‡ªåŠ©æ³•\n\n> å…·ä½“æ¯ç§æ–¹æ³•æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä»¥åŠä»–ä»¬çš„å®ç°ï¼Œè¿™é‡Œä¸å±•å¼€ä»‹ç»ï¼Œæ¬¢è¿é˜…è¯»ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹\n\n## ç¦»çº¿è¯„ä¼°æŒ‡æ ‡\nç¦»çº¿è¯„ä¼°æŒ‡æ ‡ç”¨äºé¢„ä¼°æ¨¡å‹ä¸Šçº¿å‰åœ¨æ•´ä¸ªæ¨èç³»ç»Ÿä¸­èƒ½è¾¾åˆ°çš„æ•ˆæœã€‚å¸¸è§çš„ç¦»çº¿è¯„ä¼°æŒ‡æ ‡å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼š\n- å‡†ç¡®åº¦æŒ‡æ ‡ï¼šè¯„ä¼°æ¨èç³»ç»Ÿçš„æœ€åŸºæœ¬çš„æŒ‡æ ‡ï¼Œè¡¡é‡çš„æ˜¯æŒ‡æ ‡æ¨èç®—æ³•åœ¨å¤šå¤§ç¨‹åº¦ä¸Šèƒ½å¤Ÿå‡†ç¡®é¢„æµ‹ç”¨æˆ·å¯¹æ¨èå•†å“çš„åå¥½ç¨‹åº¦ï¼Œå¯ä»¥åˆ†ä¸ºåˆ†ç±»å‡†ç¡®åº¦æŒ‡æ ‡ã€é¢„æµ‹è¯„åˆ†å‡†ç¡®åº¦æŒ‡æ ‡ã€é¢„æµ‹è¯„åˆ†æŒ‡æ ‡å…³è”ã€‚\n- éå‡†ç¡®åº¦æŒ‡æ ‡ï¼šåœ¨æ¨èç³»ç»Ÿè¾¾åˆ°ä¸€å®šçš„å‡†ç¡®åº¦ä¹‹åï¼Œè¡¡é‡æ¨èç³»ç»Ÿä¸°å¯Œåº¦å’Œå¤šæ ·æ€§ç­‰çš„æŒ‡æ ‡ã€‚\n\nå…¶ä¸­é¢„æµ‹åˆ†ç±»å‡†ç¡®åº¦æŒ‡æ ‡åŒ…å«ï¼š\n- AUC\n- å‡†ç¡®ç‡ï¼ˆAccuracyï¼‰\n- ç²¾ç¡®ç‡ï¼ˆPrecisionï¼‰\n- å¬å›ç‡ï¼ˆRecallï¼‰\n- F-measureå€¼ã€‚\n\né¢„æµ‹è¯„åˆ†å‡†ç¡®åº¦æŒ‡æ ‡åŒ…å«ï¼š\n- å¹³å‡ç»å¯¹è¯¯å·®ï¼ˆMAEï¼‰\n- å‡æ–¹è¯¯å·®ï¼ˆMSEï¼‰\n- å‡æ–¹æ ¹è¯¯å·®ï¼ˆRMSEï¼‰\n\né¢„æµ‹è¯„åˆ†å…³è”æŒ‡æ ‡åŒ…å«ï¼š\n- çš®å°”é€Šç§¯è·ç›¸å…³ç³»ç»Ÿ\n- æ–¯çš®å°”æ›¼ç­‰çº§ç›¸å…³ç³»æ•°\n- è‚¯å¾·å°”ç­‰çº§ç›¸å…³ç³»æ•°\n\né¢„æµ‹æ’åºå‡†ç¡®åº¦æŒ‡æ ‡åŒ…å«ï¼š\n- è¯„ä»·æ’åºåˆ†\n\néå‡†ç¡®åº¦çš„æŒ‡æ ‡åŒ…å«ï¼š\n- å¤šæ ·æ€§\n- æ–°é¢–æ€§\n- æƒŠå–œåº¦\n- è¦†ç›–ç‡\n- ä¿¡ä»»åº¦\n- å®æ—¶æ€§\n- å¥å£®æ€§\n- å•†ä¸šç›®æ ‡\n\n> å…·ä½“æŒ‡æ ‡çš„å«ä¹‰è¿™é‡Œä¸è¿‡å¤šä»‹ç»ï¼Œæ¬¢è¿é˜…è¯»ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹äº†è§£å…·ä½“å«ä¹‰å’Œå®ç°ä»¥åŠåº”ç”¨åœºæ™¯ã€‚\n\n---\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n\n\n---\n<font color=red>æ³¨ï¼šã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹æ˜¯å°ç¼–è¿‘æœŸè¦ä¸Šçš„ä¸€æœ¬å›¾ä¹¦ï¼Œé¢„è®¡æœ¬æœˆï¼ˆ7æœˆæœ«ï¼‰å¯åœ¨äº¬ä¸œï¼Œå½“å½“ä¸Šçº¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è¿›è¡Œå…³æ³¨ï¼</font>\n<center><img src=\"https://img-blog.csdnimg.cn/20190708234949217.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=50% /></center>\n","tags":["æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹8ã€å†·å¯åŠ¨ä»‹ç»ä¸è§£å†³","url":"/2019/07/10/RecSys/æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜/ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹8ã€å†·å¯åŠ¨ä»‹ç»ä¸è§£å†³/","content":"> æ¨èç³»ç»ŸåŸºäºç”¨æˆ·å¤§é‡çš„å†å²è¡Œä¸ºåšå‡ºäº‹ç‰©å‘ˆç°ï¼Œå› æ­¤ç”¨æˆ·çš„å†å²è¡Œä¸ºæ•°æ®æ˜¯æ„å»ºä¸€ä¸ªä¼˜è´¨æ¨èç³»ç»Ÿçš„å…ˆå†³æ¡ä»¶ï¼Œä½†åœ¨å®é™…åœºæ™¯ä¸­å¹¶éæ‰€æœ‰çš„ç”¨æˆ·éƒ½æ‹¥æœ‰ä¸°å¯Œçš„å†å²æ•°æ®ï¼Œå¦‚é¦–æ¬¡è¿›å…¥ç”µå•†ç½‘ç«™çš„ç”¨æˆ·ã€‚å¦‚ä½•åœ¨æ²¡æœ‰ä¸°å¯Œå†å²æ•°æ®çš„æƒ…å†µä¸‹ä¸ºç”¨æˆ·æ¨èä¸ªæ€§åŒ–çš„å•†å“ï¼Œè¿™å°±æ˜¯å†·å¯åŠ¨é—®é¢˜ã€‚ \n\n<!--More-->\n\n---\n\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/96203152\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\nä¸ªäººç½‘ç«™ï¼šhttp://thinkgamer.github.io\n\n---\n\n\n# å†·å¯åŠ¨ä»‹ç»\nå†·å¯åŠ¨ä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼šç”¨æˆ·å†·å¯åŠ¨ã€ç‰©å“å†·å¯åŠ¨ã€ç³»ç»Ÿå†·å¯åŠ¨ã€‚\n- ç”¨æˆ·å†·å¯åŠ¨ï¼šè§£å†³çš„æ˜¯å¦‚ä½•ç»™æ–°ç”¨æˆ·è¿›è¡Œä¸ªæ€§åŒ–æ¨èçš„é—®é¢˜ã€‚å½“ä¸€ä¸ªæ–°ç”¨æˆ·è¿›å…¥ç½‘ç«™æˆ–APPæ—¶ï¼Œç”±äºç³»ç»Ÿä¹‹å‰æ²¡æœ‰ä»»ä½•å…³äºè¯¥ç”¨æˆ·çš„å†å²è¡Œä¸ºæ•°æ®ï¼Œå¯¼è‡´æ— æ³•å¯¹ç”¨æˆ·è¿›è¡Œå…´è¶£å»ºæ¨¡ï¼Œä»è€Œæ— æ³•ä¸ºè¯¥ç”¨æˆ·è¿›è¡Œä¸ªæ€§åŒ–æ¨èã€‚\n- ç‰©å“å†·å¯åŠ¨ï¼šè§£å†³çš„æ˜¯å¦‚ä½•å°†æ–°åŠ å…¥ç³»ç»Ÿçš„ç‰©å“æ¨èç»™ç”¨æˆ·ã€‚ç”±äºæ–°ç‰©å“æ²¡æœ‰ä»»ä½•è¢«åŠ¨è¡Œä¸ºï¼Œåœ¨ç³»ç»Ÿä¸­æ‰€å çš„æƒé‡å‡ ä¹ä¸º0ï¼Œè¿™ä¼šå¯¼è‡´åœ¨å¯¹å•†å“æ’åºæˆ–è¿›è¡ŒååŒè¿‡æ»¤æ¨èæ—¶è¯¥ç‰©å“æ— æ³•å‡ºç°åœ¨æ¨èåˆ—è¡¨ä¸­ã€‚\n- ç³»ç»Ÿå†·å¯åŠ¨ï¼šè§£å†³çš„æ˜¯åœ¨ä¸€ä¸ªæ–°ç³»ç»Ÿä¸­æ²¡æœ‰ç”¨æˆ·ï¼Œä¹Ÿæ²¡æœ‰ç”¨æˆ·è¡Œä¸ºï¼Œåªæœ‰ç‰©å“ä¿¡æ¯ï¼Œå¦‚ä½•ç»™ç”¨æˆ·è¿›è¡Œä¸ªæ€§åŒ–æ¨èçš„é—®é¢˜ã€‚\n\né’ˆå¯¹æ¨èç³»ç»Ÿçš„å†·å¯åŠ¨ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§å®ç°æ–¹æ³•ï¼š\n- åŸºäºçƒ­é—¨æ•°æ®æ¨èï¼›\n- åˆ©ç”¨ç”¨æˆ·æ³¨å†Œä¿¡æ¯ï¼›\n- åˆ©ç”¨ç”¨æˆ·ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼›\n- åˆ©ç”¨ç¬¬ä¸‰æ–¹æ•°æ®ï¼›\n- åˆ©ç”¨ç”¨æˆ·å’Œç³»ç»Ÿä¹‹é—´çš„äº¤äº’ï¼›\n- åˆ©ç”¨ç‰©å“å†…å®¹å±æ€§ï¼›\n- åˆ©ç”¨ä¸“å®¶æ ‡æ³¨æ•°æ®ã€‚\nä¸‹é¢å°†å¯¹å¦‚ä½•è§£å†³æ¨èç³»ç»Ÿä¸­çš„å†·å¯åŠ¨é—®é¢˜è¿›è¡Œè§£ç­”ã€‚\n\n# åŸºäºçƒ­é—¨æ•°æ®æ¨èå®ç°å†·å¯åŠ¨\nçƒ­é—¨æ•°æ®æ˜¯æŒ‡ï¼ˆæŸç±»ï¼‰ç‰©å“æŒ‰ç…§ä¸€å®šè§„åˆ™è¿›è¡Œæ’åºå¾—åˆ°çš„æ’åé å‰çš„æ•°æ®ã€‚çƒ­é—¨æ•°æ®åæ˜ çš„æ˜¯å¤§ä¼—çš„åå¥½ï¼Œä½†å—å¤–ç•Œå½±å“å› ç´ è¾ƒå¤§ã€‚ä¾‹å¦‚æŸç”µå•†ç½‘ç«™ä¸Šçš„ä¸€ä¸ªå•†å“æ¨å¹¿å¹¿å‘Šï¼Œå¯èƒ½ä¼šå¯¼è‡´è¯¥å•†å“åœ¨å¾ˆçŸ­çš„æ—¶é—´å†…çƒ­åº¦é£™å‡ï¼›æŸæ–°é—»ç½‘ç«™ä¸­çš„ä¸€æ¡å¨±ä¹æ–°é—»ï¼Œçƒ­åº¦å®¹æ˜“å—èˆ†è®ºå’Œæ˜æ˜Ÿæ•ˆåº”çš„å½±å“ã€‚\nè™½ç„¶çƒ­é—¨æ•°æ®ä¸èƒ½å¤Ÿå‡†ç¡®åœ°ä¼ è¾¾å‡ºç”¨æˆ·åå¥½ï¼Œä½†åœ¨æŸç§ç¨‹åº¦ä¸Šä¹Ÿæ˜¯ç”¨æˆ·ç¾¤ä½“ä¸­å¤§éƒ¨åˆ†äººçš„çŸ­æœŸå…´è¶£ç‚¹ã€‚å°†çƒ­é—¨æ•°æ®ä½œä¸ºè§£å†³ç”¨æˆ·å†·å¯åŠ¨çš„æ¨èæ•°æ®ï¼Œâ€œä¸ªæ€§åŒ–â€åœ°å±•ç¤ºç»™ç”¨æˆ·ï¼Œç”¨æˆ·åœ¨è¿™äº›æ•°æ®ä¸­äº§ç”Ÿè¡Œä¸ºä¹‹åï¼Œå†è¿›è¡Œä¸ªæ€§åŒ–æ¨èã€‚\n\nçƒ­é—¨æ•°æ®æ’è¡Œæ¦œåœ¨å®é™…åœºæ™¯ä¸­åº”ç”¨ååˆ†å¹¿æ³›ã€‚ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·æ–°åˆ°è¾¾ä¸€ä¸ªåœ°æ–¹ï¼Œæ‰“å¼€æŸç”Ÿæ´»æœåŠ¡APPçš„ç¾é£Ÿé¢‘é“åï¼Œé™„è¿‘çš„å•†å®¶å°±ä¼šé»˜è®¤ä»¥çƒ­åº¦æ’åºå±•ç¤ºç»™ç”¨æˆ·ï¼Œå¦‚å›¾9-1æ‰€ç¤ºã€‚\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190716232241310.png\"  width=400px/></center>\n\n> åœ¨å·¥ä¸šç•Œçš„æ¨èç³»ç»Ÿä¸­ï¼Œå¬å›çš„ç±»å‹æ˜¯å¤šç§å¤šæ ·çš„ï¼Œä½†å¾€å¾€ä¹Ÿä¼šå¬å›æ€§åˆ«çƒ­é—¨ã€åœ°åŸŸçƒ­é—¨æˆ–ç¾¤ä½“çƒ­é—¨ç­‰æ•°æ®ï¼Œè¿›è€Œæ‰©å±•æ¨èç³»ç»Ÿçš„ä¸°å¯Œæ€§ã€‚åŒæ—¶ï¼Œåœ¨ç”¨æˆ·è¡Œä¸ºè¾ƒå°‘æˆ–åå¥½è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½å‡†ç¡®åœ°ä¸ºç”¨æˆ·è¿›è¡Œå•†å“æ¨èã€‚\n\n# åˆ©ç”¨ç”¨æˆ·æ³¨å†Œä¿¡æ¯å®ç°å†·å¯åŠ¨\nç”¨æˆ·æ³¨å†Œä¿¡æ¯æ˜¯æŒ‡ç”¨æˆ·åœ¨æ–°æ³¨å†Œä¸€ä¸ªç³»ç»Ÿæ—¶æ‰€å¡«å†™çš„ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯æ˜¯è”ç³»æ–°ç”¨æˆ·å’Œç³»ç»Ÿçš„å…³é”®ï¼Œä¹Ÿæ˜¯ç³»ç»Ÿè·å–çš„ç”¨æˆ·ç›´æ¥ä¿¡æ¯ã€‚\n\nå½“ä¸€ä¸ªæ–°ç”¨æˆ·æ³¨å†ŒæŸä¸ªç½‘ç«™æ—¶ï¼Œç³»ç»Ÿå¹¶ä¸çŸ¥é“è¯¥ç”¨æˆ·å–œæ¬¢ä»€ä¹ˆç‰©å“ï¼Œç³»ç»Ÿå¯ä»¥åŸºäºçƒ­é—¨æ•°æ®æ¨èä¸ºç”¨æˆ·è¿›è¡Œå•†å“æ¨èã€‚ä½†å¦‚æœç³»ç»Ÿèƒ½åœ¨ç”¨æˆ·è¿›è¡Œæ³¨å†Œæ—¶è·å–ä¸€äº›ä¿¡æ¯ï¼Œåˆ™å¯ä»¥æ ¹æ®è¿™äº›ä¿¡æ¯ä¸ºç”¨æˆ·è¿›è¡Œå•†å“æ¨èã€‚ä¾‹å¦‚ï¼Œç³»ç»ŸçŸ¥é“è¯¥ç”¨æˆ·æ¥è‡ªä¸œåŒ—ï¼Œå°±å¯ä»¥ç»™ä»–æ¨èä¸€äº›ä¸œåŒ—åŒºåŸŸçš„çƒ­é—¨ç‰©å“ï¼›è‹¥çŸ¥é“è¯¥ç”¨æˆ·æ˜¯æ¥è‡ªä¸œåŒ—çš„å¥³æ€§æœ‹å‹ï¼Œé‚£ä¹ˆå°±ä¼šåœ¨åœ°åŸŸçš„çº¦æŸæ¡ä»¶å†…ï¼Œå†ç»™å¥¹æ¨èä¸€äº›é€‚åˆå¥³æ€§ä½¿ç”¨çš„ç‰©å“ï¼Œæˆ–è€…åœ¨æ€§åˆ«çš„çº¦æŸæ¡ä»¶å†…ï¼Œç»™å¥¹æ¨èä¸€äº›åŒºåŸŸå†…çš„çƒ­é—¨å•†å“ã€‚\n\nç”¨æˆ·åœ¨è¿›è¡Œæ³¨å†Œæ—¶ï¼Œæ‰€å¡«å†™çš„æ³¨å†Œä¿¡æ¯å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ã€‚\n- äººå£ç»Ÿè®¡å­¦ä¿¡æ¯ï¼šåŒ…æ‹¬ç”¨æˆ·çš„å¹´é¾„ã€èº«é«˜ã€ä½“é‡ã€å±…ä½åœ°ç­‰ã€‚\n- ç”¨æˆ·å…´è¶£çš„æè¿°ï¼šæŸäº›ç½‘ç«™æˆ–APPä¼šè®©ç”¨æˆ·å¡«å†™è‡ªå·±çš„å…´è¶£çˆ±å¥½ã€‚\n- å…¶ä»–ç½‘ç«™çš„å¯¼å…¥æ•°æ®ï¼šå¦‚ç”¨æˆ·é€šè¿‡å¾®ä¿¡ã€å¾®åšç­‰ç™»å½•ç¬¬ä¸‰æ–¹ç½‘ç«™ã€‚\n\nç½‘ç«™è·å–è¿™äº›æ•°æ®ä¹‹åï¼Œå°±å¯ä»¥å¯¹ç”¨æˆ·è¿›è¡Œç²—ç²’åº¦çš„ä¸ªæ€§åŒ–æ¨èäº†ã€‚å…¶æ¨èçš„å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š\n- è·å–ç”¨æˆ·æ³¨å†Œä¿¡æ¯ï¼›\n- æ ¹æ®ç”¨æˆ·æ³¨å†Œä¿¡æ¯å¯¹ç”¨æˆ·è¿›è¡Œåˆ†ç±»ï¼ˆå¯ä»¥æ˜¯å¤šåˆ†ç±»ï¼Œå³ä¸€ä¸ªç”¨æˆ·è¢«åˆ†åˆ°å¤šä¸ªç±»åˆ«ä¸­ï¼‰ï¼›\n- ç»™ç”¨æˆ·æ¨èå…¶æ‰€åœ¨åˆ†ç±»çš„ç”¨æˆ·æœ€å–œæ¬¢çš„ç‰©å“ï¼Œå¯¹ä¸åŒç±»åˆ«ä¸‹çš„ç‰©å“è¿›è¡ŒåŠ æƒæ±‚å’Œã€‚\n# åˆ©ç”¨ç”¨æˆ·ä¸Šä¸‹æ–‡ä¿¡æ¯å®ç°å†·å¯åŠ¨\nå‰è¾¹ä»‹ç»äº†ç”¨æˆ·çš„æ—¶é—´å’Œåœ°åŸŸç­‰ä¸Šä¸‹æ–‡ä¿¡æ¯åœ¨æ¨èç³»ç»Ÿä¸­çš„åº”ç”¨ã€‚åœ¨å®é™…çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œç”¨æˆ·çš„ä¸Šä¸‹æ–‡ä¿¡æ¯æ‰€æ„é€ çš„ç‰¹å¾ç»´åº¦æ›´åŠ ä¸°å¯Œï¼Œå¦‚ç”¨æˆ·ä½¿ç”¨çš„è®¾å¤‡ä¿¡æ¯ã€ç”¨æˆ·æ‰€å¤„çš„æ—¶é—´åœ°åŸŸä¿¡æ¯ã€ç”¨æˆ·çœ‹åˆ°å•†å“çš„å±•ç¤ºä¿¡æ¯ã€‚\n> ä¸Šä¸‹æ–‡ç‰¹å¾æ˜¯ä»£è¡¨ç”¨æˆ·å½“å‰æ—¶ç©ºçŠ¶æ€ã€æœ€è¿‘ä¸€æ®µæ—¶é—´çš„è¡Œä¸ºæŠ½è±¡çš„ç‰¹å¾ã€‚\n## è®¾å¤‡ä¿¡æ¯ç‰¹å¾\nè®¾å¤‡ä¿¡æ¯ä¸»è¦æ˜¯ç”¨æˆ·è¿›è¡Œæµè§ˆçš„è½½ä½“ï¼ˆæ‰‹æœºã€å¹³æ¿ç”µè„‘ã€ç”µè„‘ç­‰ï¼‰çš„ä¿¡æ¯ã€‚ä¸åŒè®¾å¤‡æ‰€æºå¸¦çš„ä¿¡æ¯æ˜¯ä¸ä¸€æ ·çš„ã€‚ä¾‹å¦‚ï¼Œæ‰‹æœºæˆ–å¹³æ¿çš„æ“ä½œç³»ç»Ÿåˆ†ä¸ºiOSã€Androidã€PCç­‰ï¼›è®¡ç®—æœºçš„æ“ä½œç³»ç»Ÿåˆ†ä¸ºWindowsã€MacOSã€UNIXç­‰ï¼Œæ‰‹æœºå’Œè®¡ç®—æœºå“ç‰Œæ›´æ˜¯å¤šç§å¤šæ ·ï¼Œä¸åŒè®¾å¤‡çš„åˆ†è¾¨ç‡ã€å±å¹•å°ºå¯¸ã€ä»·æ ¼ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚\nä¸åŒè®¾å¤‡ä¸‹ç”¨æˆ·çš„åå¥½ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚ä¾‹å¦‚ï¼ŒiOSç³»ç»Ÿçš„ç”¨æˆ·å¯èƒ½æ˜¯ä¸ªâ€œè‹¹æœç²‰â€ï¼Œé‚£ä¹ˆåœ¨å†·å¯åŠ¨æ—¶å°±å¯ä»¥æ¨èä¸€äº›è‹¹æœç›¸å…³çš„äº§å“ï¼Œä¸ºäº†æå‡æ¨èç³»ç»Ÿçš„ä¸°å¯Œåº¦ï¼Œä¹Ÿå¯ä»¥æ¨èä¸€äº›æ‰‹æœºæ•°ç ç±»åˆ«çš„å•†å“ã€‚å†å¦‚ï¼Œç”¨æˆ·æ˜¯ç”¨UNIXç³»ç»Ÿè¿›è¡Œå•†å“æµè§ˆçš„ï¼Œé‚£ä¹ˆè¯¥ç”¨æˆ·æœ‰å¯èƒ½æ˜¯ITå·¥ä½œè€…ï¼Œå¯ä»¥ç»™è¯¥ç”¨æˆ·æ¨èä¸€äº›æ•°ç ã€æŠ€æœ¯ä¹¦ç±ç­‰å•†å“ã€‚\nå½“ç„¶ï¼Œé™¤äº†åœ¨å†·å¯åŠ¨ä¸­ä½¿ç”¨è¿™äº›ç‰¹å¾ï¼Œåœ¨æ­£å¸¸è®­ç»ƒæ¨èç³»ç»Ÿæ¨¡å‹æ—¶ä¹Ÿå¯ä»¥å¯¹è®¾å¤‡çš„ç›¸å…³ä¿¡æ¯è¿›è¡Œç‰¹å¾æ„é€ ï¼Œè¿›è€Œä½œä¸ºç‰¹å¾æ¥è®­ç»ƒæ¨¡å‹ã€‚\n## æ—¶é—´åœ°åŸŸä¿¡æ¯ç‰¹å¾\næ—¶é—´å’Œåœ°åŸŸæ˜¯æ¨èç³»ç»Ÿä¸­æ¯”è¾ƒé‡è¦çš„ä¿¡æ¯ï¼Œåœ¨ç¬¬7ç« ä¸­ä»‹ç»äº†ç›¸å…³å†…å®¹ã€‚é‚£ä¹ˆé’ˆå¯¹å†·å¯åŠ¨ï¼Œæ—¶é—´å’Œåœ°åŸŸæ˜¯æ€æ ·å‘æŒ¥å®ƒä»¬ä½œç”¨çš„å‘¢ï¼Ÿ\næ—¶é—´å¯ä»¥æ˜¯èŠ‚å‡æ—¥ã€å­£èŠ‚ã€å‘¨æœ«ç­‰ã€‚åœ°åŸŸå¯ä»¥æ˜¯çœå¸‚åŒºã€ç»çº¬åº¦ç­‰ï¼Œä¹Ÿå¯ä»¥æ˜¯é€»è¾‘ä¸Šçš„åŒºåŸŸåˆ’åˆ†ï¼ˆå¦‚ä¸­å…³æ‘è½¯ä»¶å›­ã€å•†åŠ¡ä¸­å¿ƒåŒºã€æµ·æ»¨åŸå¸‚ç­‰ï¼‰ã€‚å½“ä¸€ä¸ªæ–°ç”¨æˆ·æ¥è®¿æ—¶ï¼Œé€šè¿‡å¯¹å…¶å»ºç«‹æ—¶é—´å’Œåœ°åŸŸä¸Šçš„æ˜ å°„æ¥ä¸ºç”¨æˆ·å¬å›ç›¸å…³çš„å•†å“å¹¶è¿›è¡Œæ¨èã€‚\nåœ¨æ„å»ºç‰¹å¾æ—¶ï¼Œæ—¶é—´å’Œåœ°åŸŸä¹Ÿæ˜¯éå¸¸é‡è¦çš„ã€‚ä¾‹å¦‚ï¼Œå¯¹äºæ—¶é—´ï¼Œå¯ä»¥æ„é€ å¦‚ä¸‹ç‰¹å¾ï¼šæ˜¯å¦æ˜¯å·¥ä½œæ—¥ã€æ˜¯å¦æ˜¯ä¼‘æ¯æ—¥ã€è®¿é—®æ—¶é—´æ‰€å±çš„æ—¶é—´æ®µï¼ˆæ—©ä¸Šã€ä¸Šåˆã€ä¸­åˆã€ä¸‹åˆã€æ™šä¸Šã€å‡Œæ™¨ï¼‰ç­‰ã€‚\n## å®ç°åŸç†\né’ˆå¯¹ç”¨æˆ·çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·çš„å†å²æ•°æ®åˆ†æå‡ºç”¨æˆ·åœ¨ç›¸åº”å±æ€§ä¸‹çš„è¡Œä¸ºåå¥½ï¼Œä¸ºç›¸åº”çš„å•†å“æ‰“ä¸Šå¯¹åº”çš„æ—¶é—´å’Œåœ°åŸŸä¿¡æ¯ã€‚åœ¨æ–°ç”¨æˆ·æ¥è®¿æ—¶ï¼Œç³»ç»Ÿé€šè¿‡è·å–æ—¶é—´å’Œåœ°åŸŸä¿¡æ¯ï¼Œå¬å›å¯¹åº”å±æ€§ä¸‹çš„æ•°æ®ï¼Œå¹¶æŒ‰ç…§ä¸€å®šçš„è§„åˆ™è¿›è¡Œæ’åºï¼Œç„¶åè¿”å›å‰ Kæ¡æ•°æ®ç»™ç”¨æˆ·ã€‚\nä¾‹å¦‚ï¼Œæœè£…ã€é£Ÿç‰©ç±»å•†å“æœ‰ç€æ˜æ˜¾çš„å­£èŠ‚å±æ€§ï¼Œç‰¹äº§ã€æµ·é²œç±»å•†å“æœ‰ç€æ˜æ˜¾çš„èŠ‚æ—¥å±æ€§ï¼Œæ¯ä¸ªå•†å“éƒ½æœ‰äº§åœ°å±æ€§å’Œå“ç‰Œå±æ€§ï¼Œè¿™æ ·é€šè¿‡ç›¸åº”çš„æ ‡ç­¾å°±å¯ä»¥å°†ç”¨æˆ·çš„ä¸Šä¸‹æ–‡ä¿¡æ¯å’Œå·²ç»æ„å»ºå¥½çš„æ ‡ç­¾è¿›è¡Œå…³è”äº†ã€‚\nåŒæ ·ï¼Œä¸ä»…å¯ä»¥å°†ç”¨æˆ·çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ä½œä¸ºå¬å›çš„æ ‡ç­¾æ•°æ®ï¼Œä¹Ÿå¯ä»¥å¯¹ä¿¡æ¯å±æ€§è¿›è¡ŒOne-Hotç¼–ç ï¼Œä½œä¸ºè®­ç»ƒæ¨¡å‹çš„ç‰¹å¾ä½¿ç”¨ã€‚\n# åˆ©ç”¨ç¬¬ä¸‰æ–¹æ•°æ®å®ç°å†·å¯åŠ¨\nç›®å‰å¾ˆå¤šAPPæ”¯æŒç¬¬ä¸‰æ–¹è´¦æˆ·ç™»å½•ï¼Œé€šè¿‡ç¬¬ä¸‰æ–¹çš„æˆæƒç™»å½•ï¼Œç³»ç»Ÿå¯ä»¥è·å–åˆ°ç”¨æˆ·åœ¨ç¬¬ä¸‰æ–¹å¹³å°ä¸Šçš„ç›¸å…³ä¿¡æ¯ï¼ˆåŒ…æ‹¬ç”¨æˆ·æœ¬èº«çš„å±æ€§ä¿¡æ¯å’Œæœ‹å‹å…³ç³»ä¿¡æ¯ï¼‰ï¼Œä»è€Œå¯ä»¥ä½¿ç”¨ååŒè¿‡æ»¤ç®—æ³•è®¡ç®—å‡ºç”¨æˆ·å¯èƒ½æ„Ÿå…´è¶£çš„å•†å“ï¼Œè¿›è€Œè§£å†³ç”¨æˆ·çš„å†·å¯åŠ¨é—®é¢˜ï¼Œä¸ºç”¨æˆ·æ¨èä¸ªæ€§åŒ–çš„å†…å®¹ã€‚\n\n# åˆ©ç”¨ç”¨æˆ·å’Œç³»ç»Ÿä¹‹é—´çš„äº¤äº’å®ç°å†·å¯åŠ¨\näº¤äº’ï¼Œå³ç”¨æˆ·å¯¹ç³»ç»Ÿçš„æ¨èç»“æœåšå‡ºåé¦ˆï¼Œæˆ–è€…ç³»ç»Ÿé€šè¿‡ä¸€å®šçš„æ–¹å¼å‘ç”¨æˆ·è¿›è¡Œå…´è¶£å¾é›†ã€‚äº¤äº’ä¸ä»…åœ¨å†·å¯åŠ¨æ–¹é¢æœ‰ç€æ¯”è¾ƒé‡è¦çš„ä½œç”¨ï¼Œåœ¨æ¨èç³»ç»Ÿçš„ç»“æœåé¦ˆä¸­ä¹Ÿæœ‰ç€å¾ˆé‡è¦çš„ä½œç”¨ã€‚\n\n> äº¤äº’å®ç°å†·å¯åŠ¨çš„åŸç†å’Œæ¨èç³»ç»Ÿä¸­å®æ—¶äº¤äº’çš„åº”ç”¨æœ‰é‚£äº›å‘¢ï¼Ÿ\n\n# åˆ©ç”¨ç‰©å“çš„å†…å®¹å±æ€§å®ç°å†·å¯åŠ¨\nå‰è¾¹ä»‹ç»çš„æ˜¯å¦‚ä½•è§£å†³æ¨èç³»ç»Ÿä¸­çš„ç”¨æˆ·å†·å¯åŠ¨é—®é¢˜ï¼Œå¯¹äºç‰©å“å†·å¯åŠ¨é—®é¢˜è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿç‰©å“å†·å¯åŠ¨è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œå¦‚ä½•å°†æ–°åŠ å…¥ç³»ç»Ÿçš„ç‰©å“æ¨èç»™å¯¹å®ƒæ„Ÿå…´è¶£çš„ç”¨æˆ·ã€‚\n\nç‰©å“çš„å†·å¯åŠ¨åœ¨æ–°é—»ã€å¨±ä¹ã€èµ„è®¯ç±»ç½‘ç«™ä¸­æ ¼å¤–é‡è¦ã€‚ç”±äºæ–°é—»çš„ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­ï¼Œå¦‚æœæ— æ³•åœ¨çŸ­æœŸå†…å°†å…¶æ›å…‰ç»™æ›´å¤šçš„ç”¨æˆ·ï¼Œé‚£ä¹ˆå…¶æœ¬èº«çš„ä»·å€¼å°†å¤§å¤§å‡å°ã€‚\n\nå¯¹äºç‰©å“çš„å†·å¯åŠ¨ï¼Œå¯ä»¥åˆ©ç”¨ç‰©å“çš„å†…å®¹å±æ€§å°†ç‰©å“å±•ç¤ºç»™å°½å¯èƒ½ç¬¦åˆå…¶åå¥½çš„ç”¨æˆ·ã€‚\n\n## ç‰©å“å†…å®¹å±æ€§çš„åˆ†ç±»\nç‰©å“çš„å†…å®¹å±æ€§å¤šç§å¤šæ ·ï¼Œä¸åŒç±»å‹çš„ç‰©å“æœ‰ä¸åŒçš„å†…å®¹å±æ€§ï¼Œè¿™é‡Œå°†ç‰©å“çš„å†…å®¹å±æ€§æ¦‚æ‹¬ä¸ºä¸‰å¤§ç±»ï¼š\n- ç‰©å“æœ¬èº«çš„å±æ€§ï¼šç”¨æ¥æè¿°ç‰©å“æœ¬èº«çš„å±æ€§ï¼Œå…·æœ‰å®è§‚ä¸Šçš„å”¯ä¸€æ€§ï¼Œå¦‚ç‰©å“ç¼–ç ã€æ ‡é¢˜åå­—ã€äº§å‡ºæ—¶é—´ç­‰ã€‚\n- ç‰©å“çš„å½’çº³å±æ€§ï¼šç”¨æ¥å½¢å®¹ç‰©å“çš„ç±»åˆ«ä¿¡æ¯å±æ€§ï¼Œå…·æœ‰å®è§‚æ¦‚æ‹¬æ€§ï¼Œå¦‚ç±»åˆ«ã€å“ç‰Œã€æ ‡ç­¾ã€é£æ ¼ç­‰ã€‚\n- ç‰©å“çš„è¢«åŠ¨å±æ€§ï¼šç”¨æˆ·è¡¨ç¤ºç‰©å“çš„è¢«åŠ¨è¡Œä¸ºå±æ€§ï¼Œå…·æœ‰å®¢è§‚æ¦‚æ‹¬æ€§ï¼Œå¦‚ç‰©å“çš„æµè§ˆé‡ã€ç‚¹å‡»ç‡ã€è¯„è®ºç­‰ã€‚\n\n> ç‰©å“å†…å®¹å±æ€§åˆ†æï¼Ÿ ç‰©å“å†…å®¹å±æ€§åº”ç”¨ï¼Ÿ\n\n# åˆ©ç”¨ä¸“å®¶æ ‡æ³¨æ•°æ®å®ç°å†·å¯åŠ¨\nå¾ˆå¤šæ¨èç³»ç»Ÿåœ¨åˆšå¼€å§‹å»ºç«‹æ—¶ï¼Œæ—¢æ²¡æœ‰ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œä¹Ÿæ²¡æœ‰èƒ½ç”¨æ¥å‡†ç¡®è®¡ç®—ç‰©å“ç›¸ä¼¼åº¦çš„ç‰©å“ä¿¡æ¯ã€‚é‚£ä¹ˆä¸ºäº†åœ¨åˆšå¼€å§‹å°±è®©ç”¨æˆ·è·å¾—è‰¯å¥½çš„ä½“éªŒï¼Œå¾ˆå¤šç³»ç»Ÿéƒ½ä¼šé‡‡ç”¨ä¸“å®¶æ ‡æ•°æ®ã€‚è¿™æ–¹é¢çš„ä»£è¡¨æ˜¯PandoraéŸ³ä¹ç”µå°ã€‚\n\nPandoraæ˜¯ä¸€ä¸ªç»™ç”¨æˆ·æ’­æ”¾éŸ³ä¹çš„ä¸ªæ€§åŒ–ç½‘ç»œç”µå°ã€‚è®¡ç®—éŸ³ä¹ã€è§†é¢‘ä¹‹é—´çš„ç›¸ä¼¼åº¦æ˜¯éå¸¸éš¾çš„ï¼ŒéŸ³ä¹å±äºæµåª’ä½“ï¼Œå¦‚æœä»éŸ³é¢‘åˆ†æå…¥æ‰‹è®¡ç®—éŸ³ä¹çš„ç›¸ä¼¼åº¦ï¼ŒæŠ€æœ¯é—¨æ§›å¾ˆé«˜ï¼Œè€Œä¸”ç»“æœä¹Ÿéš¾ä»¥ä»¤äººæ»¡æ„ã€‚å¦å¤–ï¼Œä»…ä»…åˆ©ç”¨éŸ³ä¹çš„ä¸“è¾‘ã€æ­Œæ‰‹ç­‰ä¿¡æ¯ä¹Ÿéš¾ä»¥å¾—åˆ°ä»¤äººæ»¡æ„çš„ç»“æœã€‚\n\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒPandoraå¯åŠ¨äº†ä¸€é¡¹ç§°ä¸ºâ€œéŸ³ä¹åŸºå› ç»„â€çš„é¡¹ç›®ã€‚è¿™ä¸ªåä¸ºâ€œéŸ³ä¹åŸºå› ç»„â€çš„é¡¹ç›®å¼€å§‹äº1999å¹´ï¼Œè¯¥é¡¹ç›®é›‡ç”¨ä¸€æ‰¹æ‡‚è®¡ç®—æœºçš„éŸ³ä¹äººï¼Œå¬äº†å‡ ä¸‡åæ­Œæ‰‹çš„æ­Œï¼Œå¹¶å¯¹è¿™äº›æ­Œä»å„ä¸ªç»´åº¦è¿›è¡Œæ ‡æ³¨ï¼Œæœ€ç»ˆä»–ä»¬æä¾›äº†450å¤šç»´çš„ç‰¹å¾æ¥åŒºåˆ†ä¸åŒçš„éŸ³ä¹ï¼Œè¿™äº›æ ‡ç­¾å¯ä»¥ç»†åŒ–åˆ°ä¸€é¦–æ­Œæ˜¯å¦æœ‰å‰ä»–çš„å’Œå¼¦ã€æ˜¯å¦æœ‰æ¶å­é¼“ã€ä¸»å”±çš„å¹´é¾„ç­‰ã€‚åœ¨å¾—åˆ°è¿™äº›ç»´åº¦çš„ç‰¹å¾ä¹‹åå°±å¯ä»¥åˆ©ç”¨åŸºäºå†…å®¹çš„æ¨èç®—æ³•è¿›è¡Œç›¸ä¼¼åº¦è®¡ç®—äº†ã€‚è¿™é‡Œçš„å†…å®¹æŒ‡çš„æ˜¯éŸ³ä¹æœ¬èº«æ‰€è¡¨ç°å‡ºæ¥çš„å†…å®¹ã€‚\n\n----\n\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n\n\n---\n<font color=red>æ³¨ï¼šã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹æ˜¯å°ç¼–è¿‘æœŸè¦ä¸Šçš„ä¸€æœ¬å›¾ä¹¦ï¼Œé¢„è®¡æœ¬æœˆï¼ˆ7æœˆæœ«ï¼‰å¯åœ¨äº¬ä¸œï¼Œå½“å½“ä¸Šçº¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è¿›è¡Œå…³æ³¨ï¼</font>\n<center><img src=\"https://img-blog.csdnimg.cn/20190708234949217.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=50% /></center>\n","tags":["æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹7ã€åŸºäºç‚¹å‡»ç‡é¢„ä¼°çš„æ¨èç®—æ³•ä»‹ç»å’Œæ¡ˆä¾‹å¼€å‘å®æˆ˜","url":"/2019/07/10/RecSys/æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜/ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹7ã€åŸºäºç‚¹å‡»ç‡é¢„ä¼°çš„æ¨èç®—æ³•ä»‹ç»å’Œæ¡ˆä¾‹å¼€å‘å®æˆ˜/","content":"> æœ¬ç³»åˆ—ä¹‹å‰ä»‹ç»çš„éƒ½æ˜¯ä¸€äº›åŸºæœ¬çš„æ¨èç®—æ³•ï¼Œå°†è¿™äº›ç®—æ³•çœŸæ­£åº”ç”¨åˆ°å·¥ä¸šç•Œï¼ˆå³åº”ç”¨æ¨èç³»ç»Ÿçš„åœ°æ–¹ï¼Œå¦‚ç”µå•†ç½‘ç«™ã€å¹¿å‘Šæ¨å¹¿ç­‰ï¼‰å…¶å®æ˜¯å¾ˆéš¾çš„ã€‚å¹¶ä¸æ˜¯è¯´è¿™äº›ç®—æ³•æ²¡æœ‰ç”¨æ­¦ä¹‹åœ°ï¼Œè€Œæ˜¯è¦æ ¹æ®å…·ä½“çš„åœºæ™¯æ¥åˆ¤æ–­æ˜¯å¦èƒ½ä½¿ç”¨æ¨èç³»ç»Ÿã€‚æœ¬ç¯‡ä¼šå…ˆå¯¹ä¼ ç»Ÿçš„æ¨èç®—æ³•è¿›è¡Œæ€»ç»“å’Œè¯´æ˜ï¼Œç„¶åå¯¹ç›®å‰ä¸šç•Œç”¨å¾—æœ€å¹¿çš„GBDTç®—æ³•å’ŒLRç®—æ³•è¿›è¡Œä»‹ç»ã€‚\n\n<!--More-->\n\n---\n\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/95519780\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\nä¸ªäººç½‘ç«™ï¼šhttp://thinkgamer.github.io\n\n---\n\n# ä¼ ç»Ÿæ¨èç®—æ³•çš„å±€é™å’Œåº”ç”¨\n## 1. æµ·é‡æ•°æ®\nä¾‹å¦‚ï¼ŒååŒè¿‡æ»¤ç®—æ³•èƒ½å¤Ÿå®¹æ˜“åœ°ä¸ºâ€œåƒä¸‡â€çº§çš„ç”¨æˆ·æä¾›æ¨èï¼Œä½†æ˜¯å¯¹äºç”µå­å•†åŠ¡ç½‘ç«™ï¼ˆå…¶ç”¨æˆ·æ•°å’Œç‰©å“æ•°å¾€å¾€ä»¥â€œäº¿â€æ¥è®¡é‡ï¼‰ï¼ŒååŒè¿‡æ»¤ç®—æ³•å°±å¾ˆéš¾æä¾›æœåŠ¡äº†ã€‚\nåœ¨ååŒè¿‡æ»¤ç®—æ³•ä¸­ï¼Œèƒ½åˆ©ç”¨æœ€æ–°çš„ä¿¡æ¯åŠæ—¶ä¸ºç”¨æˆ·äº§ç”Ÿç›¸å¯¹å‡†ç¡®çš„ç”¨æˆ·å…´è¶£åº¦é¢„æµ‹ï¼Œæˆ–è€…è¿›è¡Œæ¨èã€‚ä½†æ˜¯é¢å¯¹æ—¥ç›Šå¢å¤šçš„ç”¨æˆ·ï¼Œæ•°æ®é‡æ€¥å‰§å¢åŠ ï¼Œç®—æ³•çš„æ‰©å±•æ€§é—®é¢˜ï¼ˆå³é€‚åº”ç³»ç»Ÿè§„æ¨¡ä¸æ–­æ‰©å¤§çš„é—®é¢˜ï¼‰æˆä¸ºåˆ¶çº¦æ¨èç³»ç»Ÿå®æ–½çš„é‡è¦å› ç´ ã€‚\nä¸åŸºäºæ¨¡å‹çš„ç®—æ³•ç›¸æ¯”ï¼Œå…¨å±€æ•°å€¼ç®—æ³•è™½ç„¶èŠ‚çº¦äº†ä¸ºå»ºç«‹æ¨¡å‹è€ŒèŠ±è´¹çš„è®­ç»ƒæ—¶é—´ï¼Œä½†æ˜¯å…¶ç”¨äºè¯†åˆ«â€œæœ€è¿‘é‚»å±…â€ç®—æ³•çš„è®¡ç®—é‡ä¼šéšç€ç”¨æˆ·å’Œç‰©å“çš„å¢åŠ è€Œæ€¥å‰§å¢å¤§ã€‚\nå¯¹äºä»¥â€œäº¿â€æ¥è®¡é‡çš„ç”¨æˆ·å’Œç‰©å“ï¼Œé€šå¸¸çš„ç®—æ³•ä¼šé‡åˆ°ä¸¥é‡çš„æ‰©å±•æ€§ç“¶é¢ˆé—®é¢˜ã€‚å¯¹äºé‡‡ç”¨äº†ååŒè¿‡æ»¤æŠ€æœ¯çš„æ¨èç³»ç»Ÿï¼Œè¯¥é—®é¢˜è§£å†³ä¸å¥½ï¼Œç›´æ¥ä¼šå½±å“å…¶å®æ—¶æ€§ã€‚æ¨èç³»ç»Ÿçš„å®æ—¶æ€§è¶Šå¥½ã€ç²¾ç¡®åº¦è¶Šé«˜ï¼Œè¯¥ç³»ç»Ÿæ‰è¶Šä¼šè¢«ç”¨æˆ·æ‰€æ¥å—ã€‚\n## 2. ç¨€ç–æ€§\nä¼´éšç€æµ·é‡æ•°æ®çš„ä¸€ä¸ªé—®é¢˜ä¾¿æ˜¯æ•°æ®çš„ç¨€ç–æ€§ã€‚\nåœ¨ç”µå­å•†åŠ¡ç½‘ç«™ä¸­ï¼Œæ´»è·ƒç”¨æˆ·æ‰€å çš„æ¯”ä¾‹å¾ˆå°ï¼Œå¤§éƒ¨åˆ†ç”¨æˆ·éƒ½æ˜¯éæ´»è·ƒç”¨æˆ·ï¼Œéæ´»è·ƒç”¨æˆ·è´­ä¹°æˆ–ç‚¹å‡»çš„å•†å“æ•°ç›®ä¹Ÿå¾ˆå°‘ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨ååŒè¿‡æ»¤ç®—æ³•æ„å»ºçŸ©é˜µæ—¶ï¼ŒçŸ©é˜µä¼šéå¸¸ç¨€ç–ï¼›ä½¿ç”¨åŸºäºå†…å®¹çš„æ¨èç®—æ³•ä¸ºç”¨æˆ·æ„å»ºçš„åå¥½çŸ©é˜µä¹Ÿæ˜¯éå¸¸ç¨€ç–çš„ã€‚è¿™æ ·ï¼Œä¸€æ–¹é¢éš¾ä»¥æ‰¾åˆ°æœ€è¿‘é‚»çš„ç”¨æˆ·é›†ï¼Œæˆ–è€…éš¾ä»¥å‡†ç¡®åœ°å¾—åˆ°ç”¨æˆ·è¡Œä¸ºåå¥½ï¼›å¦ä¸€æ–¹é¢ï¼Œåœ¨è®¡ç®—çš„è¿‡ç¨‹ä¸­ä¼šæ¶ˆè€—å¤§é‡çš„èµ„æºã€‚\n## 3. å®æ—¶æ€§\nå®æ—¶æ€§æ˜¯è¯„åˆ¤ä¸€ä¸ªæ¨èç³»ç»Ÿèƒ½å¦åŠæ—¶æ•æ‰ç”¨æˆ·å…´è¶£å˜åŒ–çš„é‡è¦æŒ‡æ ‡ã€‚æ¨èç³»ç»Ÿçš„å®æ—¶æ€§ä¸»è¦åŒ…æ‹¬ä¸¤æ–¹é¢ï¼š\n- æ¨èç³»ç»Ÿèƒ½å®æ—¶åœ°æ›´æ–°æ¨èåˆ—è¡¨æ¥æ»¡è¶³ç”¨æˆ·æ–°çš„è¡Œä¸ºå˜åŒ–ï¼›\n- æ¨èç³»ç»Ÿèƒ½æŠŠæ–°åŠ å…¥ç³»ç»Ÿçš„ç‰©å“æ¨èç»™ç”¨æˆ·ã€‚\nè€Œä¼ ç»Ÿçš„ååŒè¿‡æ»¤ç®—æ³•æ¯æ¬¡éƒ½éœ€è¦è®¡ç®—æ‰€æœ‰ç”¨æˆ·å’Œç‰©å“çš„æ•°æ®ï¼Œéš¾ä»¥åœ¨â€œç§’â€çº§å†…æ•æ‰åˆ°ç”¨æˆ·çš„å®æ—¶å…´è¶£å˜åŒ–ã€‚\n\n# ç‚¹å‡»ç‡é¢„ä¼°åœ¨æ¨èç³»ç»Ÿä¸­çš„åº”ç”¨\nç‚¹å‡»ç‡é¢„ä¼°ï¼ˆCTRï¼‰æœ€æ—©åº”ç”¨äºæœç´¢å¹¿å‘Šä¸­ã€‚æ—¶è‡³ä»Šæ—¥ï¼Œç‚¹å‡»ç‡é¢„ä¼°çš„åº”ç”¨åœºæ™¯ä¸ä»…ä»æœ€å¼€å§‹çš„æœç´¢å¹¿å‘Šæ‰©å±•åˆ°å±•ç¤ºå¹¿å‘Šã€ä¿¡æ¯æµå¹¿å‘Šç­‰å„ç§å„æ ·çš„å¹¿å‘Šï¼Œè€Œä¸”åœ¨æ¨èç³»ç»Ÿçš„åœºæ™¯ä¸­ä¹Ÿå¾—åˆ°äº†å¹¿æ³›åº”ç”¨ã€‚\n\nä»ç”¨æˆ·çš„ç‚¹å‡»è¡Œä¸ºæ¥åˆ†æï¼Œâ€œç‚¹å‡»ç‡é¢„ä¼°â€åœ¨å¹¿å‘Šæˆ–æ¨èåœºæ™¯ä¸­çš„åº”ç”¨æ˜¯ä¸€è‡´çš„ã€‚å¹¿å‘Šçš„â€œç‚¹å‡»ç‡é¢„ä¼°â€è®¡ç®—çš„æ˜¯ç”¨æˆ·ç‚¹å‡»å¹¿å‘Šçš„å¯èƒ½æ€§ï¼›è€Œåœ¨æ¨èç³»ç»Ÿä¸­ï¼Œæ¨èå•†å“ä¹Ÿè¢«é¢„æµ‹ç”¨æˆ·çš„å…´è¶£ï¼Œå¦‚æœç”¨æˆ·å¯¹ä¸€ä¸ªå•†å“æ„Ÿå…´è¶£ä¾¿ä¼šå»ç‚¹å‡»ã€‚è¿™ä¹Ÿæ˜¯è¿‘äº›å¹´CTRåœ¨æ¨èç³»ç»Ÿä¸­è¢«å¹¿æ³›åº”ç”¨çš„åŸå› ã€‚\nç›®å‰åœ¨CTRé¢†åŸŸåº”ç”¨è¾ƒå¤šçš„ç®—æ³•åŒ…å«LRã€GBDTã€XGBoostã€FMã€FFMã€ç¥ç»ç½‘ç»œç®—æ³•ç­‰ï¼Œè¿™äº›ç®—æ³•ä¹Ÿè¢«åº”ç”¨åˆ°æ¨èç³»ç»Ÿä¸­ã€‚å…¶ä¸­ï¼ŒGBDTæ˜¯ä¸€ç§éçº¿æ€§ç®—æ³•ï¼ŒåŸºäºé›†æˆå­¦ä¹ ä¸­çš„Boostingï¼ˆæå‡æ–¹æ³•ï¼‰æ€æƒ³ï¼Œæ¯æ¬¡è¿­ä»£éƒ½åœ¨å‡å°‘æ®‹å·®çš„æ¢¯åº¦æ–¹å‘æ–°å»ºç«‹ä¸€æ£µå†³ç­–æ ‘ï¼Œè¿­ä»£å¤šå°‘æ¬¡å°±ä¼šç”Ÿæˆå¤šå°‘æ£µå†³ç­–æ ‘ã€‚\n\nGBDTç®—æ³•çš„æ€æƒ³ä½¿å…¶å…·æœ‰å¤©ç„¶ä¼˜åŠ¿ï¼šå¯ä»¥å‘ç°å¤šç§æœ‰åŒºåˆ†æ€§çš„ç‰¹å¾å’Œç‰¹å¾ç»„åˆï¼›å†³ç­–æ ‘çš„è·¯å¾„å¯ä»¥ç›´æ¥ä½œä¸ºLRè¾“å…¥ç‰¹å¾ä½¿ç”¨ï¼›çœå»äº†äººå·¥å¯»æ‰¾ç‰¹å¾ã€ç‰¹å¾ç»„åˆçš„æ­¥éª¤ã€‚\n\n# ç‚¹å‡»ç‡é¢„ä¼°ç®—æ³•çš„åŸºç¡€\n## é›†æˆå­¦ä¹ \næœºå™¨å­¦ä¹ ç®—æ³•åˆ†ä¸ºæœ‰ç›‘ç£å­¦ä¹ ç®—æ³•å’Œæ— ç›‘ç£å­¦ä¹ ç®—æ³•ã€‚åœ¨æœ‰ç›‘ç£å­¦ä¹ ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å­¦ä¹ å‡ºä¸€ä¸ªç¨³å®šçš„ä¸”åœ¨å„ä¸ªæ–¹é¢éƒ½è¡¨ç°è¾ƒå¥½çš„æ¨¡å‹ã€‚ä½†å®é™…æƒ…å†µå¾€å¾€ä¸ç†æƒ³ï¼Œæœ‰æ—¶åªèƒ½å¾—åˆ°å¤šä¸ªåœ¨æŸäº›æ–¹é¢è¡¨ç°æ¯”è¾ƒå¥½çš„â€œå¼±ç›‘ç£æ¨¡å‹â€ã€‚é›†æˆå­¦ä¹ å°±æ˜¯ç»„åˆå¤šä¸ªâ€œå¼±ç›‘ç£æ¨¡å‹â€ä»¥å¾—åˆ°ä¸€ä¸ªæ›´å¥½ã€æ›´å…¨é¢çš„â€œå¼ºç›‘ç£æ¨¡å‹â€ã€‚\né›†æˆå­¦ä¹ æœ¬èº«ä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œè€Œæ˜¯é€šè¿‡æ„å»ºå¹¶ç»„åˆå¤šä¸ªå¼±å­¦ä¹ å™¨æ¥å®Œæˆå­¦ä¹ ä»»åŠ¡ï¼Œå¦‚å›¾æ‰€ç¤º\n<center><img src=\"https://img-blog.csdnimg.cn/20190716083854202.png\" width=400px /></center>\né›†æˆå­¦ä¹ åŒ…æ‹¬Boostingç®—æ³•ï¼ˆæå‡æ³•ï¼‰ã€Baggingç®—æ³•ï¼ˆè‡ªåŠ©æ³•ï¼‰å’ŒStackingç®—æ³•ï¼ˆèåˆæ³•ï¼‰ä¸‰ç§ç®—æ³•ã€‚\n> é‚£ä¹ˆä¸‰ç§é›†æˆå­¦ä¹ æ–¹æ³•çš„å…·ä½“å«ä¹‰æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n\n## å¯¼æ•°ã€åå¯¼æ•°ã€æ–¹å‘å¯¼æ•°ã€æ¢¯åº¦\näº†è§£è¿™äº›æ¦‚å¿µæ˜¯å­¦ä¹ ç‚¹å‡»ç‡é¢„ä¼°ç®—æ³•çš„åŸºç¡€ï¼Œå¾ˆå¤šç®—æ³•éƒ½æ˜¯åŸºäºæ¢¯åº¦ä¸‹é™è¿›è¡Œæ±‚è§£çš„ï¼Œä½†è¦äº†è§£æ¢¯åº¦ä¸‹é™å°±å¿…é¡»è¦æ˜ç™½å¯¼æ•°ï¼Œåå¯¼æ•°ï¼Œæ–¹å‘å¯¼æ•°çš„æ¦‚å¿µã€‚\n\nè¿™é‡Œä¸å±•å¼€ä»‹ç»ï¼Œå¤§å®¶å¯ä»¥ä»ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ä¸­è·å–å†…å®¹ã€‚\n\n# GBDTç®—æ³•\nGBDTç®—æ³•ï¼ˆGradient Boosting Decision Treeï¼‰åˆå« MARTï¼ˆMultiple Additive Regression Tree)ï¼Œæ˜¯ä¸€ç§è¿­ä»£çš„å†³ç­–æ ‘ç®—æ³•ã€‚\n\nè¯¥ç®—æ³•ä¸­æ„å»ºå¤šæ£µå†³ç­–æ ‘ç»„æˆï¼Œæ‰€æœ‰å†³ç­–æ ‘çš„ç»“è®ºç´¯åŠ èµ·æ¥ä½œä¸ºæœ€ç»ˆç­”æ¡ˆã€‚å®ƒåœ¨è¢«æå‡ºä¹‹åˆå°±å’ŒSVMä¸€èµ·è¢«è®¤ä¸ºæ˜¯æ³›åŒ–èƒ½åŠ›è¾ƒå¼ºçš„ç®—æ³•ã€‚\n## GBDTçš„ç®—æ³•åŸç†\nGBDTç®—æ³•å¯ä»¥çœ‹æˆæ˜¯Tæ£µæ ‘ç»„æˆçš„åŠ æ³•æ¨¡å‹ï¼Œå…¶å¯¹åº”çš„å…¬å¼å¦‚ä¸‹ï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190716084320362.png\" width=300px /></center>\n\nå¼ä¸­ï¼š\n- xï¼šè¾“å…¥æ ·æœ¬ï¼›\n- wï¼šæ¨¡å‹å‚æ•°ï¼›\n- hï¼šåˆ†ç±»å›å½’æ ‘ï¼›\n- Î±ï¼šæ¯æ£µæ ‘çš„æƒé‡ã€‚\nGBDTç®—æ³•çš„å®ç°è¿‡ç¨‹å¦‚ä¸‹ã€‚\nï¼ˆ1ï¼‰åˆå§‹åŒ–å‡½æ•°F0å¸¸é‡ï¼ˆå…¶ä¸­Lä¸ºæŸå¤±å‡½æ•°ï¼‰ï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190716084400344.png\" width=300px /></center>\n\nï¼ˆ2ï¼‰å¾ªç¯æ‰§è¡ŒMæ¬¡ï¼Œå»ºç«‹Mæ£µåˆ†ç±»å›å½’æ ‘ã€‚åˆ›å»ºç¬¬mï¼ˆm=1,2,â€¦,Mï¼‰æ£µæ ‘çš„è¿‡ç¨‹è§æ­¥éª¤ï¼ˆ3ï¼‰~æ­¥éª¤ï¼ˆ6ï¼‰ã€‚\nï¼ˆ3ï¼‰è®¡ç®—ç¬¬mæ£µæ ‘å¯¹åº”çš„å“åº”å€¼ï¼ˆä¼ªæ®‹å·®ï¼‰ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190716084426566.png\" width=300px /></center>\n\n\nï¼ˆ4ï¼‰ä½¿ç”¨CARTå›å½’æ ‘æ‹Ÿåˆæ•°æ®å¾—åˆ°ç¬¬mæ£µæ ‘çš„å¶å­èŠ‚ç‚¹åŒºåŸŸRj,mï¼Œå…¶ä¸­j=1,2,â€¦ ,Jmã€‚\nï¼ˆ5ï¼‰å¯¹äºj=1,2, â€¦ ,Jmï¼Œè®¡ç®—ï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190716084452561.png\" width=300px /></center>\n\nï¼ˆ6ï¼‰æ›´æ–°Fmä¸º:\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190716084508847.png\" width=300px /></center>\n\nï¼ˆ7ï¼‰è¾“å‡ºFm(x)\n\n> å…·ä½“çš„GBDTç®—æ³•å®ä¾‹ï¼Œè¿™é‡Œä¸å±•å¼€ä»‹ç»ã€‚\n\n\n# å›å½’åˆ†æ\nå›å½’åˆ†æç®—æ³•ï¼ˆRegression Analysis Algorithmï¼‰æ˜¯æœºå™¨å­¦ä¹ ç®—æ³•ä¸­æœ€å¸¸è§çš„ä¸€ç±»æœºå™¨å­¦ä¹ ç®—æ³•ã€‚å°±æ˜¯åˆ©ç”¨æ ·æœ¬ï¼ˆå·²çŸ¥æ•°æ®ï¼‰ï¼Œäº§ç”Ÿæ‹Ÿåˆæ–¹ç¨‹ï¼Œä»è€Œï¼ˆå¯¹æœªçŸ¥æ•°æ®ï¼‰è¿›è¡Œé¢„æµ‹ã€‚ä¾‹å¦‚æœ‰ä¸€ç»„éšæœºå˜é‡Xï¼ˆx1ï¼Œx2ï¼Œx3ï¼Œâ€¦ï¼‰å’Œå¦å¤–ä¸€ç»„éšæœºå˜é‡Yï¼ˆy1ï¼Œy2ï¼Œy3ï¼Œâ€¦ï¼‰ï¼Œé‚£ä¹ˆç ”ç©¶å˜é‡Xä¸Yä¹‹é—´å…³ç³»çš„ç»Ÿè®¡å­¦æ–¹æ³•å°±å«ä½œå›å½’åˆ†æã€‚å› ä¸ºè¿™é‡ŒXå’ŒYæ˜¯å•ä¸€å¯¹åº”çš„ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ä¸€å…ƒçº¿æ€§å›å½’ã€‚\n\nå›å½’åˆ†æç®—æ³•åˆ†ä¸ºçº¿æ€§å›å½’ç®—æ³•å’Œéçº¿æ€§å›å½’ç®—æ³•ã€‚\n- çº¿æ€§å›å½’\n\nçº¿æ€§å›å½’å¯ä»¥åˆ†ä¸ºä¸€å…ƒçº¿æ€§å›å½’å’Œå¤šå…ƒçº¿æ€§å›å½’ã€‚å½“ç„¶çº¿æ€§å›å½’ä¸­è‡ªå˜é‡çš„æŒ‡æ•°éƒ½æ˜¯1ï¼Œè¿™é‡Œçš„çº¿æ€§å¹¶éçœŸçš„æ˜¯æŒ‡ç”¨ä¸€æ¡çº¿å°†æ•°æ®è¿èµ·æ¥ï¼Œä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªäºŒç»´å¹³é¢ã€ä¸‰ç»´æ›²é¢ç­‰ã€‚\nä¸€å…ƒçº¿æ€§å›å½’ï¼šåªæœ‰ä¸€ä¸ªè‡ªå˜é‡çš„å›å½’ã€‚ä¾‹å¦‚æˆ¿å­é¢ç§¯ï¼ˆAreaï¼‰å’Œæˆ¿å­æ€»ä»·ï¼ˆMoneyï¼‰çš„å…³ç³»ï¼Œéšç€é¢ç§¯ï¼ˆAreaï¼‰çš„å¢å¤§ï¼Œæˆ¿å±‹ä»·æ ¼ä¹Ÿæ˜¯ä¸æ–­å¢åŠ ã€‚è¿™é‡Œçš„è‡ªå˜é‡åªæœ‰é¢ç§¯ï¼Œæ‰€ä»¥æ˜¯ä¸€å…ƒçº¿æ€§å›å½’ã€‚ \nå¤šå…ƒçº¿æ€§å›å½’ï¼šè‡ªå˜é‡å¤§äºæˆ–ç­‰äºä¸¤ä¸ªçš„å›å½’ã€‚ä¾‹å¦‚æˆ¿å­é¢ç§¯ï¼ˆAreaï¼‰ã€æ¥¼å±‚ï¼ˆfloorï¼‰å’Œæˆ¿å±‹ä»·æ ¼ï¼ˆMoneyï¼‰çš„å…³ç³»ï¼Œè¿™é‡Œè‡ªå˜é‡æœ‰ä¸¤ä¸ªï¼Œæ‰€ä»¥æ˜¯äºŒå…ƒçº¿æ€§å›å½’ã€‚\nå…¸å‹çš„çº¿æ€§å›å½’æ–¹ç¨‹å¦‚ä¸‹ï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190716085329978.png\" width=300px /></center>\n\nåœ¨ç»Ÿè®¡æ„ä¹‰ä¸Šï¼Œå¦‚æœä¸€ä¸ªå›å½’ç­‰å¼æ˜¯çº¿æ€§çš„ï¼Œé‚£ä¹ˆå®ƒç›¸å¯¹äºå‚æ•°å°±å¿…é¡»æ˜¯çº¿æ€§çš„ã€‚å¦‚æœç›¸å¯¹äºå‚æ•°æ˜¯çº¿æ€§çš„ï¼Œé‚£ä¹ˆå³ä½¿ç›¸å¯¹äºæ ·æœ¬å˜é‡çš„ç‰¹å¾æ˜¯äºŒæ¬¡æ–¹æˆ–å¤šæ¬¡æ–¹çš„ï¼Œè¿™ä¸ªå›å½’æ¨¡å‹ä¹Ÿæ˜¯çº¿æ€§çš„ã€‚ä¾‹å¦‚ä¸‹é¢çš„å¼å­ï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190716085345548.png\"  width=300px /></center>\n\nç”šè‡³å¯ä»¥ä½¿ç”¨å¯¹æ•°æˆ–æŒ‡æ•°å»å½¢å¼åŒ–ç‰¹å¾ï¼Œå¦‚ä¸‹ï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190716085402694.png\" width=300px /></center>\n\n- éçº¿å½¢å›å½’\n\næœ‰ä¸€ç±»æ¨¡å‹ï¼Œå…¶å›å½’å‚æ•°ä¸æ˜¯çº¿æ€§çš„ï¼Œä¹Ÿä¸èƒ½é€šè¿‡è½¬æ¢çš„æ–¹æ³•å°†å…¶å˜ä¸ºçº¿æ€§çš„å‚æ•°ï¼Œè¿™ç±»æ¨¡å‹ç§°ä¸ºéçº¿æ€§å›å½’æ¨¡å‹ã€‚éçº¿æ€§å›å½’å¯ä»¥åˆ†ä¸ºä¸€å…ƒå›å½’å’Œå¤šå…ƒå›å½’ã€‚éçº¿æ€§å›å½’ä¸­è‡³å°‘æœ‰ä¸€ä¸ªè‡ªå˜é‡çš„æŒ‡æ•°ä¸ä¸º1ã€‚å›å½’åˆ†æä¸­ï¼Œå½“ç ”ç©¶çš„å› æœå…³ç³»åªæ¶‰åŠå› å˜é‡å’Œä¸€ä¸ªè‡ªå˜é‡æ—¶ï¼Œå«ä½œä¸€å…ƒå›å½’åˆ†æï¼›å½“ç ”ç©¶çš„å› æœå…³ç³»æ¶‰åŠå› å˜é‡å’Œä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šè‡ªå˜é‡æ—¶ï¼Œå«ä½œå¤šå…ƒå›å½’åˆ†æã€‚\n\tä¾‹å¦‚ä¸‹é¢çš„ä¸¤ä¸ªå›å½’æ–¹ç¨‹ï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/2019071608541966.png\" width=300px /></center>\n\nä¸çº¿æ€§å›å½’æ¨¡å‹ä¸ä¸€æ ·çš„æ˜¯ï¼Œè¿™äº›éçº¿æ€§å›å½’æ¨¡å‹çš„ç‰¹å¾å› å­å¯¹åº”çš„å‚æ•°ä¸æ­¢ä¸€ä¸ªã€‚\n- å¹¿ä¹‰çº¿æ€§å›å½’\n\næœ‰äº›éçº¿æ€§å›å½’ä¹Ÿå¯ä»¥ç”¨çº¿æ€§å›å½’çš„æ–¹æ³•æ¥è¿›è¡Œåˆ†æï¼Œè¿™æ ·çš„éçº¿æ€§å›å½’å«ä½œå¹¿ä¹‰çº¿æ€§å›å½’ã€‚ å…¸å‹çš„ä»£è¡¨æ˜¯Logisticå›å½’ã€‚\n# LRç®—æ³•\né€»è¾‘å›å½’ä¸çº¿æ€§å›å½’æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯é€šè¿‡è¯¯å·®å‡½æ•°æ±‚è§£æœ€ä¼˜ç³»æ•°ï¼Œåœ¨å½¢å¼ä¸Šåªä¸è¿‡æ˜¯åœ¨çº¿æ€§å›å½’ä¸Šå¢åŠ äº†ä¸€ä¸ªé€»è¾‘å‡½æ•°ã€‚ä¸çº¿æ€§å›å½’ç›¸æ¯”ï¼Œé€»è¾‘å›å½’ï¼ˆLogistic Regressionï¼ŒLRï¼‰æ›´é€‚ç”¨äºå› å˜é‡ä¸ºäºŒåˆ†å˜é‡çš„æ¨¡å‹ï¼ŒLogistic å›å½’ç³»æ•°å¯ç”¨äºä¼°è®¡æ¨¡å‹ä¸­æ¯ä¸ªè‡ªå˜é‡çš„æƒé‡æ¯”ã€‚\n\n> æˆ‘ä»¬éƒ½çŸ¥é“LRç®—æ³•ä½¿ç”¨çš„æ˜¯Sigmoidå‡½æ•°ä½œä¸ºç»“æœå€¼çš„åŒºåˆ†å‡½æ•°ï¼Œé‚£ä¹ˆLRä¸ºä»€ä¹ˆè¦ä½¿ç”¨Sigmoidå‘¢ï¼Ÿ\n\n## LRçš„ç®—æ³•åŸç†\næœºå™¨å­¦ä¹ æ¨¡å‹å®é™…ä¸ŠæŠŠå†³ç­–å‡½æ•°é™å®šåœ¨æŸä¸€ç»„æ¡ä»¶ä¸‹ï¼Œè¿™ç»„é™å®šæ¡ä»¶å°±å†³å®šäº†æ¨¡å‹çš„å‡è®¾ç©ºé—´ã€‚å½“ç„¶ï¼Œè¿˜å¸Œæœ›è¿™ç»„é™å®šæ¡ä»¶ç®€å•è€Œåˆç†ã€‚\né€»è¾‘å›å½’æ¨¡å‹æ‰€åšçš„å‡è®¾æ˜¯ï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190716085713775.png\" width=300px /></center>\n\nè¿™é‡Œçš„g(h)å°±æ˜¯Sigmoidå‡½æ•°ï¼Œç›¸åº”çš„å†³ç­–å‡½æ•°ä¸ºï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/20190716085734391.png\" width=300px /></center>\n\né€‰æ‹©0.5ä½œä¸ºé˜ˆå€¼æ˜¯ä¸€èˆ¬çš„åšæ³•ï¼Œå®é™…åº”ç”¨æ—¶ï¼Œç‰¹å®šçš„æƒ…å†µä¸‹å¯ä»¥é€‰æ‹©ä¸åŒçš„é˜ˆå€¼ã€‚å¦‚æœå¯¹æ­£ä¾‹çš„åˆ¤åˆ«å‡†ç¡®æ€§è¦æ±‚é«˜ï¼Œå¯ä»¥ä½¿é˜ˆå€¼å¤§ä¸€äº›ï¼›å¦‚æœå¯¹æ­£ä¾‹çš„å¬å›è¦æ±‚é«˜ï¼Œåˆ™å¯ä»¥ä½¿é˜ˆå€¼å°ä¸€äº›ã€‚\nåœ¨å‡½æ•°çš„æ•°å­¦å½¢å¼ç¡®å®šä¹‹åï¼Œå°±è¦æ±‚è§£æ¨¡å‹ä¸­çš„å‚æ•°äº†ã€‚ç»Ÿè®¡å­¦ä¸­å¸¸ç”¨çš„ä¸€ç§æ•°å­¦æ–¹æ³•æ˜¯æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼Œå³æ‰¾åˆ°ä¸€ç»„å‚æ•°ï¼Œä½¿å¾—åœ¨è¿™ç»„å‚æ•°æ¡ä»¶ä¸‹æ•°æ®çš„ä¼¼ç„¶åº¦ï¼ˆæ¦‚ç‡ï¼‰æ›´å¤§ã€‚åœ¨é€»è¾‘å›å½’ç®—æ³•ä¸­ï¼Œä¼¼ç„¶å‡½æ•°å¯ä»¥è¡¨ç¤ºä¸ºï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/20190716085751784.png\" width=300px /></center>\n\nå–å¯¹æ•°ï¼Œå¯ä»¥å¾—åˆ°å¯¹æ•°å½¢å¼çš„ä¼¼ç„¶å‡½æ•°ï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190716085808618.png\"  width=300px /></center>\n\nåŒæ ·è¿™é‡Œä¹Ÿä½¿ç”¨æŸå¤±å‡½æ•°æ¥è¡¡é‡æ¨¡å‹é¢„æµ‹ç»“æœå‡†ç¡®çš„ç¨‹åº¦ï¼Œè¿™é‡Œé‡‡ç”¨lgæŸå¤±å‡½æ•°ï¼Œå…¶åœ¨å•æ¡æ•°æ®ä¸Šçš„å®šä¹‰ä¸ºï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/2019071608583169.png\" width=300px /></center>\n\nå¦‚æœå–æ•´ä¸ªæ•°æ®é›†ä¸Šçš„å¹³å‡lgæŸå¤±ï¼Œå¯ä»¥å¾—åˆ°ï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/20190716085842515.png\" width=150px /></center>\n\nåœ¨é€»è¾‘å›å½’æ¨¡å‹ä¸­ï¼Œæœ€å¤§åŒ–ä¼¼ç„¶å‡½æ•°å’Œæœ€å°åŒ–lgæŸå¤±å‡½æ•°å®é™…ä¸Šæ˜¯ç­‰ä»·çš„ã€‚å¯¹äºè¯¥ä¼˜åŒ–é—®é¢˜ï¼Œå­˜åœ¨å¤šç§æ±‚è§£æ–¹æ³•ï¼Œè¿™é‡Œä»¥æ¢¯åº¦ä¸‹é™çš„æƒ…å†µä¸ºä¾‹è¯´æ˜ã€‚åŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼š\n<img src=\"https://img-blog.csdnimg.cn/20190716085925776.png\" width=420px>\næ²¿æ¢¯åº¦è´Ÿæ–¹å‘é€‰æ‹©ä¸€ä¸ªè¾ƒå°çš„æ­¥é•¿å¯ä»¥ä¿è¯æŸå¤±å‡½æ•°çš„å€¼æ˜¯å‡å°çš„ï¼Œå¦å¤–ï¼Œé€»è¾‘å›å½’æ¨¡å‹çš„æŸå¤±å‡½æ•°æ˜¯å‡¸å‡½æ•°ï¼ˆåŠ å…¥æ­£åˆ™é¡¹åæ˜¯ä¸¥æ ¼å‡¸å‡½æ•°ï¼‰ï¼Œå¯ä»¥ä¿è¯æ‰¾åˆ°çš„å±€éƒ¨æœ€ä¼˜å€¼æ˜¯å…¨å±€æœ€ä¼˜å€¼ã€‚\n## æ­£åˆ™åŒ–\nå½“æ¨¡å‹ä¸­å‚æ•°è¿‡å¤šæ—¶ï¼Œå®¹æ˜“äº§ç”Ÿè¿‡æ‹Ÿåˆï¼Œè¿™æ—¶å°±è¦æ§åˆ¶æ¨¡å‹çš„å¤æ‚åº¦ï¼Œå…¶ä¸­æœ€å¸¸è§çš„åšæ³•æ˜¯åœ¨ç›®æ ‡ä¸­åŠ å…¥æ­£åˆ™é¡¹ï¼Œé€šè¿‡æƒ©ç½šè¿‡å¤§çš„å‚æ•°æ¥é˜²æ­¢è¿‡æ‹Ÿåˆã€‚å¸¸è§çš„æ­£åˆ™åŒ–æ–¹æ³•åŒ…æ‹¬L1 æ­£åˆ™åŒ–å’ŒL2 æ­£åˆ™åŒ–ã€‚å…¶åˆ†åˆ«å¯¹åº”å¦‚ä¸‹ä¸¤ä¸ªå…¬å¼ï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190716090002490.png\" width=200px /></center>\n\n- L1 æ­£åˆ™åŒ–æ˜¯æŒ‡æƒå€¼å‘é‡w ä¸­å„ä¸ªå…ƒç´ çš„ç»å¯¹å€¼ä¹‹å’Œï¼Œé€šå¸¸è¡¨ç¤ºä¸º||w||1ã€‚\n- L2 æ­£åˆ™åŒ–æ˜¯æŒ‡æƒå€¼å‘é‡w ä¸­å„ä¸ªå…ƒç´ çš„å¹³æ–¹å’Œç„¶åå†æ±‚å¹³æ–¹æ ¹ï¼ˆå¯ä»¥çœ‹åˆ°Ridge å›å½’\nçš„L2 æ­£åˆ™åŒ–é¡¹æœ‰å¹³æ–¹ç¬¦å·ï¼‰ï¼Œé€šå¸¸è¡¨ç¤ºä¸º||w||2ã€‚\n\n## æ¨¡å‹èåˆ\n## èƒŒæ™¯ä»‹ç»\nåœ¨CTR é¢„ä¼°é—®é¢˜å‘å±•åˆæœŸï¼Œä½¿ç”¨æœ€å¤šçš„æ–¹æ³•å°±æ˜¯é€»è¾‘å›å½’ï¼ˆLRï¼‰ï¼ŒLR ä½¿ç”¨äº†Sigmoid å˜æ¢å°†å‡½æ•°å€¼æ˜ å°„åˆ°0~1 åŒºé—´ï¼Œæ˜ å°„åçš„å‡½æ•°å€¼å°±æ˜¯CTR çš„é¢„ä¼°å€¼ã€‚LR å±äºçº¿æ€§æ¨¡å‹ï¼Œå®¹æ˜“å¹¶è¡ŒåŒ–ï¼Œå¯ä»¥è½»æ¾å¤„ç†ä¸Šäº¿æ¡æ•°æ®ï¼Œä½†æ˜¯å­¦ä¹ èƒ½åŠ›ååˆ†æœ‰é™ï¼Œéœ€è¦å¤§é‡çš„ç‰¹å¾å·¥ç¨‹æ¥å¢å¼ºæ¨¡å‹çš„å­¦ä¹ èƒ½åŠ›ã€‚\nGBDT æ˜¯ä¸€ç§å¸¸ç”¨çš„éçº¿æ€§æ¨¡å‹ï¼Œå®ƒåŸºäºé›†æˆå­¦ä¹ ä¸­çš„Boosting æ€æƒ³ï¼Œæ¯æ¬¡è¿­ä»£éƒ½åœ¨å‡å°‘æ®‹å·®çš„æ¢¯åº¦æ–¹å‘æ–°å»ºç«‹ä¸€æ£µå†³ç­–æ ‘ï¼Œè¿­ä»£å¤šå°‘æ¬¡å°±ä¼šç”Ÿæˆå¤šå°‘æ£µå†³ç­–æ ‘ã€‚GBDT çš„æ€æƒ³ä½¿å…¶å…·æœ‰å¤©ç„¶ä¼˜åŠ¿ï¼Œå¯ä»¥å‘ç°å¤šç§æœ‰åŒºåˆ†æ€§çš„ç‰¹å¾åŠç‰¹å¾ç»„åˆã€‚å†³ç­–æ ‘çš„è·¯å¾„å¯ä»¥ç›´æ¥ä½œä¸ºLR è¾“å…¥ç‰¹å¾ä½¿ç”¨ï¼Œçœå»äº†äººå·¥å¯»æ‰¾ç‰¹å¾ã€ç‰¹å¾ç»„åˆçš„æ­¥éª¤ã€‚è¿™ç§é€šè¿‡GBDT ç”ŸæˆLR ç‰¹å¾çš„æ–¹å¼ï¼ˆGBDT+LRï¼‰ï¼Œä¸šç•Œå·²æœ‰å®è·µï¼ˆFacebookã€Kaggle ç­‰ï¼‰ï¼Œä¸”å–å¾—äº†ä¸é”™çš„æ•ˆæœã€‚\n## ä¸ºä»€ä¹ˆä½¿ç”¨GBDTå’ŒLRè¿›è¡Œæ¨¡å‹èåˆ\nåœ¨ä»‹ç»æ¨¡å‹èåˆä¹‹å‰ï¼Œéœ€è¦å…ˆäº†è§£ä¸‹é¢ä¸¤ä¸ªé—®é¢˜ã€‚\n- ä¸ºä»€ä¹ˆä½¿ç”¨é›†æˆçš„å†³ç­–æ ‘\n\nä¸€æ£µæ ‘çš„è¡¨è¾¾èƒ½åŠ›å¾ˆå¼±ï¼Œä¸è¶³ä»¥è¡¨è¾¾å¤šä¸ªæœ‰åŒºåˆ†æ€§çš„ç‰¹å¾ç»„åˆï¼Œå¤šæ£µæ ‘çš„è¡¨è¾¾èƒ½åŠ›æ›´å¼ºä¸€äº›ã€‚GBDT ä¸­ï¼Œæ¯æ£µæ ‘éƒ½åœ¨å­¦ä¹ å‰é¢çš„æ ‘å­˜åœ¨çš„ä¸è¶³ï¼Œè¿­ä»£å¤šå°‘æ¬¡å°±ä¼šç”Ÿæˆå¤šå°‘æ£µæ ‘ã€‚æŒ‰Facebookçš„è®ºæ–‡åŠKaggle ç«èµ›ä¸­çš„GBDT+LR èåˆæ–¹å¼ï¼Œå¤šæ£µæ ‘æ­£å¥½æ»¡è¶³LR æ¯æ¡è®­ç»ƒæ ·æœ¬å¯ä»¥é€šè¿‡GBDT æ˜ å°„æˆå¤šä¸ªç‰¹å¾çš„éœ€æ±‚ã€‚\n\n- ä¸ºä»€ä¹ˆä½¿ç”¨GBDT æ„å»ºå†³ç­–æ ‘è€Œä¸æ˜¯RandomForestï¼ˆRFï¼‰\n\nRFï¼ˆéšæœºæ£®æ—ï¼‰ä¹Ÿæ˜¯å¤šæ£µæ ‘ç»„æˆçš„ï¼Œä½†ä»æ•ˆæœä¸Šæœ‰å®è·µè¯æ˜ä¸å¦‚GBDTã€‚å¯¹äºGBDT å‰é¢çš„æ ‘ï¼Œç‰¹å¾åˆ†è£‚ä¸»è¦ä½“ç°å¯¹å¤šæ•°æ ·æœ¬æœ‰åŒºåˆ†åº¦çš„ç‰¹å¾ï¼›å¯¹äºåé¢çš„æ ‘ï¼Œä¸»è¦ä½“ç°çš„æ˜¯ç»è¿‡å‰Næ£µæ ‘ï¼Œæ®‹å·®ä»ç„¶è¾ƒå¤§çš„å°‘æ•°æ ·æœ¬ã€‚ä¼˜å…ˆé€‰ç”¨åœ¨æ•´ä½“ä¸Šæœ‰åŒºåˆ†åº¦çš„ç‰¹å¾ï¼Œå†é€‰ç”¨é’ˆå¯¹å°‘æ•°æ ·æœ¬æœ‰åŒºåˆ†åº¦çš„ç‰¹å¾ï¼Œè¿™æ ·çš„æ€è·¯æ›´åŠ åˆç†ï¼Œè¿™ä¹Ÿæ˜¯ç”¨GBDT çš„åŸå› ã€‚\n\n# GBDT+LR æ¨¡å‹èåˆçš„åŸç†\nGBDT+LR æ¨¡å‹èåˆæ€æƒ³æ¥æºäºFacebook å…¬å¼€çš„è®ºæ–‡Practical Lessons from Predicting\nClicks on Ads at Facebookã€‚å…¶ä¸»è¦æ€æƒ³æ˜¯ï¼šGBDT æ¯æ£µæ ‘çš„è·¯å¾„ç›´æ¥ä½œä¸ºLR çš„è¾“å…¥ç‰¹å¾ä½¿ç”¨ã€‚\nå³ç”¨å·²æœ‰ç‰¹å¾è®­ç»ƒGBDT æ¨¡å‹ï¼Œç„¶ååˆ©ç”¨GBDT æ¨¡å‹å­¦ä¹ åˆ°çš„æ ‘æ¥æ„é€ æ–°ç‰¹å¾ï¼Œæœ€åæŠŠè¿™äº›æ–°ç‰¹å¾åŠ å…¥åŸæœ‰ç‰¹å¾ä¸€èµ·è®­ç»ƒæ¨¡å‹ã€‚æ„é€ çš„æ–°ç‰¹å¾å‘é‡æ˜¯å–å€¼0/1 çš„ï¼Œå‘é‡çš„æ¯ä¸ªå…ƒç´ å¯¹åº”äºGBDT æ¨¡å‹ä¸­æ ‘çš„å¶å­èŠ‚ç‚¹ã€‚è‹¥ä¸€ä¸ªæ ·æœ¬ç‚¹é€šè¿‡æŸæ£µæ ‘æœ€ç»ˆè½åœ¨è¿™æ£µæ ‘çš„ä¸€ä¸ªå¶å­èŠ‚ç‚¹ä¸Šï¼Œé‚£ä¹ˆåœ¨æ–°ç‰¹å¾å‘é‡ä¸­è¿™ä¸ªå¶å­èŠ‚ç‚¹å¯¹åº”çš„å…ƒç´ å€¼ä¸º1ï¼Œè€Œè¿™æ£µæ ‘çš„å…¶ä»–å¶å­èŠ‚ç‚¹å¯¹åº”çš„å…ƒç´ å€¼ä¸º0ã€‚æ–°ç‰¹å¾å‘é‡çš„é•¿åº¦ç­‰äºGBDT æ¨¡å‹é‡Œæ‰€æœ‰æ ‘åŒ…å«çš„å¶å­èŠ‚ç‚¹æ•°ä¹‹å’Œã€‚åœ¨Facebook çš„å…¬å¼€è®ºæ–‡ä¸­ï¼Œæœ‰ä¸€ä¸ªä¾‹å­ï¼Œå¦‚å›¾8-10 æ‰€ç¤ºã€‚\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190716090158539.png\" width=70% /></center>\n\nå›¾8-10 ä¸­å…±æœ‰ä¸¤æ£µæ ‘ï¼Œx ä¸ºä¸€æ¡è¾“å…¥æ ·æœ¬ï¼Œéå†ä¸¤æ£µæ ‘åï¼Œx æ ·æœ¬åˆ†åˆ«è½åˆ°ä¸¤æ£µæ ‘çš„å¶å­èŠ‚ç‚¹ä¸Šï¼Œæ¯ä¸ªå¶å­èŠ‚ç‚¹å¯¹åº”LRä¸€ç»´ç‰¹å¾ï¼Œé‚£ä¹ˆé€šè¿‡éå†æ ‘å°±å¾—åˆ°äº†è¯¥æ ·æœ¬å¯¹åº”çš„æ‰€æœ‰LRç‰¹å¾ã€‚æ„é€ çš„æ–°ç‰¹å¾å‘é‡æ˜¯å–å€¼0/1 çš„ã€‚ä¸¾ä¾‹æ¥è¯´ï¼šå›¾8-10 ä¸­æœ‰ä¸¤æ£µå­æ ‘ï¼Œå·¦å­æ ‘æœ‰ä¸‰ä¸ªå¶å­èŠ‚ç‚¹ï¼Œå³å­æ ‘æœ‰ä¸¤ä¸ªå¶å­èŠ‚ç‚¹ï¼Œæœ€ç»ˆçš„ç‰¹å¾å³ä¸ºäº”ç»´çš„å‘é‡ã€‚å¯¹äºè¾“å…¥xï¼Œå‡è®¾x è½åœ¨å·¦å­æ ‘ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œç¼–ç [1,0,0]ï¼Œè½åœ¨å³å­æ ‘ç¬¬äºŒä¸ªèŠ‚ç‚¹æ—¶ç¼–ç [0,1]ï¼Œåˆ™æ•´ä½“çš„ç¼–ç ä¸º[1,0,0,0,1]ï¼Œè¿™ç±»ç¼–ç ä½œä¸ºç‰¹å¾ï¼Œè¾“å…¥åˆ°LR ä¸­è¿›è¡Œåˆ†ç±»ã€‚\n\n# ç”µä¿¡å®¢æˆ·æµå¤±æ¡ˆä¾‹\nè¿™é‡Œå°†ä¼šä»‹ç»ä½¿ç”¨GBDTï¼ŒLRå’Œæ¨¡å‹èåˆä¸‰ç§æ–¹å¼å®ç°ç”µä¿¡å®¢æˆ·æµå¤±ï¼Œåœ¨ä¸‰ç§æƒ…å†µçš„å¯¹æ¯”ä¸‹ï¼Œæ¨¡å‹èåˆçš„æ–¹æ³•æ•ˆæœæ›´å¥½ï¼Œå…·ä½“ä¸å±•å¼€ä»‹ç»ï¼Œå¯ä»¥å‚è€ƒã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹\n\n-----\n\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n\n\n---\n<font color=red>æ³¨ï¼šã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹æ˜¯å°ç¼–è¿‘æœŸè¦ä¸Šçš„ä¸€æœ¬å›¾ä¹¦ï¼Œé¢„è®¡æœ¬æœˆï¼ˆ7æœˆæœ«ï¼‰å¯åœ¨äº¬ä¸œï¼Œå½“å½“ä¸Šçº¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è¿›è¡Œå…³æ³¨ï¼</font>\n<center><img src=\"https://img-blog.csdnimg.cn/20190708234949217.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=50% /></center>\n","tags":["æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹6ã€åŸºäºä¸Šä¸‹æ–‡çš„æ¨èç®—æ³•ä»‹ç»å’Œæ¡ˆä¾‹å®æˆ˜å¼€å‘","url":"/2019/07/10/RecSys/æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜/ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹6ã€åŸºäºä¸Šä¸‹æ–‡çš„æ¨èç®—æ³•ä»‹ç»å’Œæ¡ˆä¾‹å®æˆ˜å¼€å‘/","content":"> åœ¨æœ¬ç³»åˆ—ä¹‹å‰ä»‹ç»çš„æ¨èç®—æ³•ä¸»è¦æ˜¯ä¸ºäº†è”ç³»ç”¨æˆ·çš„åå¥½å’Œç‰©å“ï¼Œå°†ç¬¦åˆç”¨æˆ·åå¥½çš„ç‰©å“æ¨èç»™ç”¨æˆ·ã€‚ä¾‹å¦‚â€œåŸºäºæ ‡ç­¾çš„æ¨èç®—æ³•â€ä¸­ä»‹ç»çš„åå¥½æ˜¯â€œç”¨æˆ·çš„ä¸»è§‚æ„è§è¡¨è¾¾â€ï¼Œç‰©å“æœ¬èº«æ‰€ä¼ è¾¾çš„å«ä¹‰å’Œç”¨æˆ·æ‰€å¤„çš„å®¢è§‚ç¯å¢ƒå¯¹æ¨èç³»ç»Ÿè€Œè¨€ä¹Ÿæ˜¯æå…¶é‡è¦çš„ï¼Œå¦‚å†¬å¤©æ¨èçŸ­è¢–ã€ä¸­ç§‹èŠ‚æ¨èç²½å­ç­‰éƒ½æ˜¯ä¸åˆç†çš„ï¼Œä¸èƒ½è¯´ç”¨æˆ·åœ¨å†¬å¤©æœç´¢äº†çŸ­è¢–æˆ–åœ¨ä¸­ç§‹èŠ‚æœç´¢äº†ç²½å­å°±ç»™ç”¨æˆ·æ¨èä¸åˆæ—¶èŠ‚çš„ç‰©å“ã€‚å› æ­¤ï¼Œå‡†ç¡®åœ°äº†è§£ç”¨æˆ·çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆåŒ…æ‹¬ç”¨æˆ·è®¿é—®æ¨èç³»ç»Ÿçš„æ—¶é—´ã€åœ°ç‚¹ã€è®¿é—®æ—¶çš„å¿ƒæƒ…ç­‰ï¼‰ï¼Œå¹¶å°†è¿™äº›ä¿¡æ¯åº”ç”¨åˆ°æ¨èç³»ç»Ÿä¸­ï¼Œæ˜¯å®ç°ä¸€ä¸ªå¥½çš„æ¨èç³»ç»Ÿçš„å…³é”®ã€‚\n\n<!--More-->\n\n---\n\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/95445593\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\nä¸ªäººç½‘ç«™ï¼šhttp://thinkgamer.github.io\n\n---\n\n# åŸºäºæ—¶é—´ç‰¹å¾çš„æ¨è\n## ä»€ä¹ˆæ˜¯æ—¶é—´æ•ˆåº”ï¼Ÿ\næ—¶é—´æ•ˆåº”åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­éšå¤„å¯è§ã€‚ä¾‹å¦‚ï¼Œéšç€å¹´é¾„çš„å¢é•¿ï¼Œäººä»¬çš„ç©¿è¡£é£æ ¼ä¼šæ”¹å˜ï¼Œé’Ÿçˆ±çš„è¯¾å¤–è¯»ç‰©ä¹Ÿä¼šæ”¹å˜ï¼›å­£èŠ‚ä¸åŒï¼Œäººä»¬çš„ç©¿ç€ä¼šæ”¹å˜ï¼Œæœè”¬ä¾›ç»™ä¹Ÿä¼šæ”¹å˜ç­‰ã€‚\n\nåœ¨æ¨èç³»ç»Ÿä¸­ï¼Œæ—¶é—´æ•ˆåº”å¯ä»¥å®šä¹‰ä¸ºï¼šç”¨æˆ·çš„åå¥½å…´è¶£ã€ç‰©å“çš„ç”Ÿå‘½å‘¨æœŸç­‰éšç€æ—¶é—´çš„å˜åŒ–è€Œå‘ç”Ÿå˜åŒ–ã€‚\n\næ—¶é—´æ•ˆåº”å¯¹æ¨èç³»ç»Ÿçš„æ•ˆæœæœ‰ç€ç›´æ¥çš„å½±å“ï¼Œå…¶å¯¹ç”¨æˆ·å…´è¶£çš„å½±å“ä¸»è¦è¡¨ç°åœ¨ä»¥ä¸‹å‡ æ–¹é¢ã€‚\n\n- åå¥½è¿ç§»ã€‚\nç”±äºç”¨æˆ·è‡ªèº«åŸå› ï¼Œéšç€æ—¶é—´çš„å˜åŒ–å…¶åå¥½ã€å…´è¶£å‘ç”Ÿäº†æ”¹å˜ã€‚ä¾‹å¦‚ï¼Œäººä»¬åœ¨ä¸åŒå¹´é¾„æ‰€çƒ­çˆ±çš„äº‹ç‰©ä¸ä¸€æ ·ï¼Œç”¨æˆ·Aå°æ—¶å€™å–œæ¬¢åƒç³–æœï¼Œé•¿å¤§äº†å´ä¸å†åƒç³–æœäº†ï¼›ç”¨æˆ·Båœ¨ä¸Šé«˜ä¸­æ—¶å–œæ¬¢è¯»ä¸€äº›å°è¯´ä¹‹ç±»çš„è¯»ç‰©ï¼Œå¯åœ¨å¿µäº†å¤§å­¦ä¹‹åï¼Œä¾¿å¼€å§‹é˜…è¯»ä¸€äº›å’Œä¸“ä¸šè¯¾ç›¸å…³çš„è¯»ç‰©ã€‚\n\n\tç”¨æˆ·çš„åå¥½ç›´æ¥å½±å“ç€æ¨èçš„ç»“æœé›†ï¼Œæ‰€ä»¥ï¼Œæ¨èç³»ç»Ÿéœ€è¦å®æ—¶å…³æ³¨ç”¨æˆ·çš„å®æ—¶å…´è¶£å˜åŒ–ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·åœ¨æŸä¸ªæ—¶åˆ»ç‚¹å‡»æˆ–å…³æ³¨äº†æŸä¸ªå•†å“ï¼Œé‚£ä¹ˆåœ¨ä¸‹ä¸€åˆ»ï¼Œç”¨æˆ·å·²ç»ç‚¹å‡»æˆ–è€…å…³æ³¨çš„ç›¸å…³å•†å“å°±åº”è¯¥å‡ºç°åœ¨æ¨èç»“æœé›†ä¸­ã€‚ä½†æ˜¯ï¼Œæ¨èç³»ç»Ÿè¿˜è¦æ³¨æ„æŒ–æ˜ç”¨æˆ·çš„çŸ­æœŸåå¥½å’Œé•¿æœŸåå¥½ï¼ˆå³æŒ–æ˜ç”¨æˆ·å…´è¶£ä¸­çš„é•¿å°¾å•†å“ï¼‰ï¼Œè¿™æ—¶å°±éœ€è¦æ ¹æ®ç”¨æˆ·è¿‡å»ä¸€æ®µæ—¶é—´å†…çš„è¡Œä¸ºä¹ æƒ¯è¿›è¡Œå…´è¶£å»ºæ¨¡ã€‚\n- ç”Ÿå‘½å‘¨æœŸã€‚\n\tç”Ÿå‘½å‘¨æœŸå³äº‹ç‰©åˆç†å­˜åœ¨çš„æ—¶é—´å‘¨æœŸã€‚ä¾‹å¦‚æŸä¸ªçƒ­é—¨æ–°é—»ï¼Œåœ¨æ–°é—»åˆšå‘å¸ƒæ—¶ï¼Œå—å…³æ³¨çš„ç¨‹åº¦å¾ˆé«˜ï¼Œå„å¤§åª’ä½“ç½‘ç«™éƒ½ä¼šè¿›è¡ŒæŠ¥é“ï¼Œä½†éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¯¥æ–°é—»çš„çƒ­åº¦åœ¨é€æ¸å‡å°ï¼Œæœ€åæ…¢æ…¢è¢«äººé—å¿˜ï¼Œè¿™å°±æ˜¯è¯¥çƒ­é—¨æ–°é—»çš„ç”Ÿå‘½å‘¨æœŸã€‚\n\n\tæ¨èç³»ç»Ÿåœ¨è¿›è¡Œäº‹ç‰©æ¨èæ—¶ï¼Œè¦æ³¨æ„è¯¥äº‹ç‰©çš„æœ‰æ•ˆæ€§ã€‚ä¸€ä¸ªåˆç†çš„æ¨èç³»ç»Ÿä¸ä¼šåœ¨2018å¹´æ¨è2004å¹´é›…å…¸å¥¥è¿ä¼šåˆ˜ç¿”æ‰“ç ´å¥¥è¿çºªå½•çš„æ–°é—»ï¼Œä¹Ÿä¸ä¼šæ¨èæŸç§è¿‡æ—¶çš„é£Ÿç‰©ã€‚ä¸åŒåœºæ™¯ä¸‹çš„æ¨èç³»ç»Ÿä¸­ï¼Œæ¨èäº‹ç‰©çš„ç”Ÿå‘½å‘¨æœŸé•¿åº¦ä¹Ÿä¸å°½ç›¸åŒã€‚æ–°é—»çš„ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­ï¼Œä¸€èˆ¬åœ¨å‡ å¤©ä¹‹å†…å°±ä¼šè¤ªå»çƒ­åº¦ï¼Œè€Œé£Ÿç‰©çš„ç”Ÿå‘½å‘¨æœŸå°±è¾ƒé•¿ã€‚\n- å­£èŠ‚æ•ˆåº”ã€‚\n\tå­£èŠ‚æ•ˆåº”ï¼šäº‹ç‰©çš„æµè¡Œåº¦ä¸å­£èŠ‚æ˜¯å¼ºç›¸å…³çš„ï¼Œåæ˜ çš„æ˜¯æ—¶é—´æœ¬èº«å¯¹ç”¨æˆ·åå¥½å…´è¶£çš„å½±å“ã€‚ä¾‹å¦‚ï¼Œäººä»¬åœ¨å¤å¤©ç©¿çŸ­è¢–ï¼Œåœ¨å†¬å¤©ç©¿ç¾½ç»’æœï¼Œåœ¨å¤å¤©å–å•¤é…’ï¼Œåœ¨å†¬å¤©åƒç«é”…ç­‰ã€‚\n\n\tåœ¨ä¸åŒå­£èŠ‚ï¼Œäººä»¬çš„è¡£é£Ÿä½è¡Œé€‰æ‹©éƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚åœ¨æ¨èç³»ç»Ÿä¸­è¦å®æ—¶æ•æ‰åˆ°å­£èŠ‚çš„å˜åŒ–ï¼Œè¿›è€Œç»™ç”¨æˆ·æ¨èç¬¦åˆæ—¶èŠ‚çš„ç‰©å“ã€‚\n- èŠ‚æ—¥é€‰æ‹©ã€‚\n\tèŠ‚æ—¥é€‰æ‹©ï¼šä¸åŒçš„èŠ‚æ—¥å¯¹ç”¨æˆ·çš„é€‰æ‹©ä¼šäº§ç”Ÿå½±å“ï¼Œä¹Ÿæ˜¯æ—¶é—´æ•ˆåº”ä¸­çš„ä¸€ç§ã€‚ä¾‹å¦‚ï¼Œç«¯åˆèŠ‚äººä»¬ä¼šé€‰è´­ä¸€äº›ç²½å­é€ç»™äº²æœ‹å¥½å‹ï¼Œè€Œåœ¨ä¸­ç§‹èŠ‚åˆ™ä¼šé€‰è´­ä¸€äº›æœˆé¥¼ã€èƒèŸ¹ã€‚åˆå¦‚ï¼Œç¾å›½çš„æ„Ÿæ©èŠ‚ï¼Œäººä»¬ä¼šè´­ä¹°ç«é¸¡ä½œä¸ºé¤æ¡Œä¸Šçš„ä¸»èœã€‚\n\t\n\tåœ¨ä¸åŒçš„èŠ‚æ—¥é€‚å½“åœ°ç»™ç”¨æˆ·æ¨é€ä¸€äº›èŠ‚æ—¥ä¸»æ‰“ç‰©å“ï¼Œä¸ä»…å¯ä»¥æé«˜ç”¨æˆ·ç‚¹å‡»ç‡ï¼Œè€Œä¸”å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‘æ˜ç”¨æˆ·çš„éšå«å…´è¶£\n## æ—¶é—´æ•ˆåº”åˆ†æ\næ¨èç³»ç»Ÿä¸­å¼•å…¥æ—¶é—´ä¿¡æ¯åï¼Œå°±ä»ä¸€ä¸ªé™æ€çš„æ¨èç³»ç»Ÿå˜æˆäº†ä¸€ä¸ªåŠ¨æ€çš„æ¨èç³»ç»Ÿã€‚æ—¶é—´ä¿¡æ¯å¯¹æ¨èç³»ç»Ÿçš„å½±å“ä¸»è¦è¡¨ç°åœ¨ä»¥ä¸‹ä¸‰æ–¹é¢ï¼š\n- ä¸ªäººå…´è¶£åº¦ä¼šéšæ—¶é—´å‘ç”Ÿå˜åŒ–ï¼›\n- ç‰©å“æµè¡Œåº¦ä¼šéšæ—¶é—´å‘ç”Ÿå˜åŒ–ï¼›\n- ç¤¾ä¼šç¾¤ä½“å…´è¶£åº¦ä¼šéšæ—¶é—´å‘ç”Ÿå˜åŒ–ã€‚\n> é‚£ä¹ˆä¸ªäººå…´è¶£ï¼Œç‰©å“æµè¡Œåº¦ï¼Œç¤¾ä¼šç¾¤ä½“å…´è¶£åº¦æ˜¯å¦‚ä½•éšæ—¶é—´å˜åŒ–å‘¢ï¼Ÿ\n\n## æ¨èç³»ç»Ÿçš„å®æ—¶æ€§\nç”¨æˆ·çš„å…´è¶£æ˜¯ä¸æ–­å‘ç”Ÿå˜åŒ–çš„ï¼Œå…¶å˜åŒ–ä½“ç°åœ¨ç”¨æˆ·ä¸æ–­å¢åŠ çš„è¡Œä¸ºä¸­ã€‚ä¾‹å¦‚ç”µå•†ç½‘ç«™ä¸­çš„ç‚¹å‡»ã€åŠ è´­ã€åˆ†äº«ã€æ”¶è—ç­‰ï¼Œæˆ–è€…æ–°é—»ç½‘ç«™ä¸­çš„ç‚¹å‡»ã€è¯„è®ºã€åœç•™æ—¶é•¿ç­‰ã€‚ ä¸€ä¸ªå®æ—¶çš„æ¨èç³»ç»Ÿåº”å®æ—¶å“åº”ç”¨æˆ·çš„æ–°è¡Œä¸ºï¼Œè®©æ¨èç»“æœä¸æ–­å‘ç”Ÿå˜åŒ–ï¼Œä»è€Œæ»¡è¶³ç”¨æˆ·å®æ—¶å…´è¶£éœ€æ±‚ã€‚\n\nç°åœ¨å‡ ä¹æ‰€æœ‰çš„ç”µå•†ç½‘ç«™ä¸­éƒ½å¼•å…¥äº†å®æ—¶æ¨èï¼Œè€Œä¸”å“åº”æ—¶é—´åœ¨â€œç§’â€ä¹‹å†…ã€‚ä¾‹å¦‚å½“å½“ï¼Œäº¬ä¸œï¼Œæ·˜å®ç­‰ç”µå•†ï¼Œå†…å®¹ï¼Œå¨±ä¹å¹³å°ã€‚\n> é‚£ä¹ˆä»–ä»¬æ˜¯å¦‚ä½•åšåˆ°å®æ—¶æ¨èå‘¢ï¼Ÿå®æ—¶æ¨èçš„å…·ä½“è¡¨ç°æ˜¯ä»€ä¹ˆï¼Ÿ\n\n## ååŒè¿‡æ»¤ä¸­çš„å®æ—¶æ¨è\n### 1.UserCFä¸­çš„æ—¶é—´ç‰¹å¾\nä½¿ç”¨UserCFä¸ºç”¨æˆ·æ¨èç‰©å“æ—¶ï¼Œå…ˆæ‰¾åˆ°ä¸ç›®æ ‡ç”¨æˆ·å…´è¶£ç›¸è¿‘çš„ç”¨æˆ·é›†åˆï¼Œç„¶åæ ¹æ®è¿™äº›ç”¨æˆ·çš„è´­ä¹°è¡Œä¸ºä¸ºç”¨æˆ·è¿›è¡Œç‰©å“æ¨èï¼Œæ•…è¯¥ç®—æ³•çš„å…³é”®æ˜¯â€œæ‰¾åˆ°ç›¸ä¼¼ç”¨æˆ·é›†åˆâ€ï¼ˆå³è®¡ç®—ç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼‰ã€‚ä¸¤ä¸ªç”¨æˆ·äº§ç”Ÿè¿‡è¡Œä¸ºçš„ç‰©å“é›†åˆäº¤é›†è¶Šå¤§ï¼Œåˆ™ä¸¤ä¸ªç”¨æˆ·è¶Šç›¸ä¼¼ã€‚ç”¨æˆ·ç›¸ä¼¼åº¦è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190711090120314.png\" width=200px></center>\n \n å¼ä¸­ï¼ŒN(x)è¡¨ç¤ºç”¨æˆ·xäº§ç”Ÿè¿‡è¡Œä¸ºçš„ç‰©å“é›†åˆï¼Œåˆ†å­è¡¨ç¤ºçš„æ˜¯ç”¨æˆ·uå’Œç”¨æˆ·væœ‰äº¤é›†çš„ç‰©å“çš„ä¸ªæ•°ï¼Œåˆ†æ¯è¡¨ç¤ºçš„æ˜¯ç”¨æˆ·uå’Œç”¨æˆ·väº§ç”Ÿè¡Œä¸ºçš„å¹¶é›†ç‰©å“çš„ä¸ªæ•°ã€‚\nä½†æ˜¯ç”±äºçƒ­é—¨ç‰©å“è¢«å¾ˆå¤šç”¨æˆ·æœ‰è¿‡è¡Œä¸ºï¼Œä½†ç›¸å¯¹äºçƒ­é—¨å…±æœ‰ç‰©å“è€Œè¨€ï¼Œå†·é—¨ç‰©å“æ›´èƒ½è¯´æ˜ä¸¤ä¸ªç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼æ€§ï¼Œæ‰€ä»¥åœ¨è®¡ç®—ä¸¤ä¸ªç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼åº¦æ—¶ï¼Œå¯¹çƒ­é—¨ç‰©å“åŠ ä¸€ä¸ªæƒ©ç½šé¡¹ï¼Œæ‰€ä»¥è¿™é‡Œçš„ç”¨æˆ·ç›¸ä¼¼åº¦è®¡ç®—å¼å¯ä»¥ä¿®æ”¹ä¸ºï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/20190711090134644.png\" width=200px></center>\n\nå¼ï¼ˆ7.2ï¼‰ä¸­ï¼ŒN(i)è¡¨ç¤ºå¯¹ç‰©å“iäº§ç”Ÿè¿‡è¡Œä¸ºçš„æ‰€æœ‰ç”¨æˆ·çš„ä¸ªæ•°ã€‚\nä½†ç”±äºæœ€è¿‘çš„è¡Œä¸ºæœ€èƒ½è¡¨è¾¾ç”¨æˆ·å½“å‰çš„å…´è¶£ï¼Œæ‰€ä»¥åœ¨è®¡ç®—ä¸¤ä¸ªç”¨æˆ·ç›¸ä¼¼åº¦æ—¶è¦å¢åŠ æ—¶é—´è¡°å‡å‡½æ•°ï¼Œå¯å¾—åˆ°ä»¥ä¸‹å…¬å¼ï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/20190711090151739.png\" width=250px></center>\n\nå¼ä¸­ï¼Œf(|tui-tvi|)ä¸ºæ—¶é—´è¡°å‡å‡½æ•°ï¼Œå…¶å½¢å¼ä¸ºï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190711090206776.png\" width=250px></center>\n\nå¼ä¸­ï¼Œä¸ºæ—¶é—´è¡°å‡å› å­ï¼Œtuiè¡¨ç¤ºç”¨æˆ·uå¯¹ç‰©å“iäº§ç”Ÿè¡Œä¸ºçš„æ—¶é—´ï¼Œtviè¡¨ç¤ºç”¨æˆ·vå¯¹ç‰©å“iäº§ç”Ÿè¡Œä¸ºçš„æ—¶é—´ã€‚\nç”¨æˆ·å½“å‰çš„è¯„åˆ†å—ç›¸ä¼¼ç”¨æˆ·é›†åˆæœ€è¿‘è¯„åˆ†çš„å½±å“æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥åœ¨è®¡ç®—ç”¨æˆ·å¯¹ç‰©å“çš„è¯„åˆ†æ—¶è¿˜è¦åŠ ä¸Šæ—¶é—´è¡°å‡å‡½æ•°f(|t0-tvi|)ï¼Œæ‰€ä»¥æœ€ç»ˆå¾—åˆ°çš„ç”¨æˆ·uå¯¹ç‰©å“içš„åå¥½ç¨‹åº¦ä¸ºï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190711090228501.png\" width=300px></center>\n\nå…¶ä¸­f(|t0-tvi|)çš„è¡¨è¾¾å¼å¦‚ä¸‹ï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190711090242554.png\" width=300px></center>\n\nå¼ä¸­ï¼Œt0è¡¨ç¤ºå½“å‰æ—¶é—´ï¼Œtviè¡¨ç¤ºç”¨æˆ·vå¯¹ç‰©å“iäº§ç”Ÿè¡Œä¸ºçš„æ—¶é—´ã€‚\n> é‚£ä¹ˆItemCFä¸­çš„æ—¶é—´ç‰¹å¾å¦‚ä½•ç†è§£å‘¢ï¼Ÿæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ä»£ç æ¥å®ç°CFä¸­çš„æ—¶é—´è¡°å‡å‘¢ï¼Ÿ\n\n# åŸºäºåœ°åŸŸå’Œçƒ­åº¦ç‰¹å¾çš„æ¨è\né™¤äº†æ—¶é—´ï¼Œåœ°åŸŸç‰¹å¾åœ¨æ¨èç³»ç»Ÿä¸­ä¹Ÿååˆ†é‡è¦ï¼Œä¸åŒåœ°åŒºçš„ç”¨æˆ·å–œæ¬¢çš„äº‹ç‰©ä¸ä¸€æ ·ï¼Œç”¨æˆ·åˆ°äº†ä¸åŒçš„åœ°æ–¹å–œæ¬¢çš„äº‹ç‰©ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚ä¾‹å¦‚å—æ–¹äººå–œæ¬¢åƒç±³ï¼ŒåŒ—æ–¹äººå–œæ¬¢åƒé¢ï¼›åˆå¦‚ï¼Œä¸€ä¸ªå›½å†…çš„äººå»éŸ©å›½å¯èƒ½æ˜¯ä¸ºäº†è´­ç‰©å’Œæ—…æ¸¸ç­‰ã€‚\nè€Œå¦å¤–ä¸€ç§ç»å¸¸å’Œåœ°åŸŸä¸€åŒå‡ºç°çš„æ˜¯çƒ­åº¦ç‰¹å¾ï¼Œæœ€å¸¸è§çš„å¦‚æ’è¡Œæ¦œï¼Œå°±æ˜¯åŸºäºåœ°åŸŸå’Œç»Ÿè®¡çš„ä¸€ç§æ’åºã€‚\n> ä¸ºä»€ä¹ˆè¦æŠŠæ—¶é—´å’Œåœ°åŸŸç‰¹å¾æ”¾åœ¨ä¸€èµ·è®¨è®ºå‘¢ï¼Ÿ\n\næ˜å°¼è‹è¾¾å¤§å­¦çš„ç ”ç©¶äººå‘˜æå‡ºè¿‡ä¸€ä¸ªç§°ä¸ºLARSï¼ˆLocation Aware Recommender Systemï¼Œä½ç½®æ„ŸçŸ¥æ¨èç³»ç»Ÿï¼‰çš„æ¨èç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿé¦–å…ˆå°†ç‰©å“åˆ†ä¸ºä¸¤ç±»ï¼š\n- æœ‰ç©ºé—´å±æ€§ï¼ˆå¦‚é¤å…ã€å•†åº—ã€æ™¯ç‚¹ç­‰ï¼‰ç‰©å“ï¼›\n- æ— ç©ºé—´å±æ€§ï¼ˆå¦‚å›¾ä¹¦ã€ç”µå½±ã€éŸ³ä¹ï¼‰ç‰©å“ã€‚\nåŒæ—¶ï¼Œä¹Ÿå°†ç”¨æˆ·åˆ†ä¸ºä¸¤ç±»ï¼š\n- æœ‰ç©ºé—´å±æ€§ï¼ˆå¦‚ç”¨æˆ·åŒ…å«ç›¸åº”çš„ç©ºé—´å±æ€§ä¿¡æ¯ï¼‰ç”¨æˆ·ã€‚\n- æ— ç©ºé—´å±æ€§ï¼ˆå¦‚ç”¨æˆ·æ²¡æœ‰ç›¸åº”çš„ç©ºé—´å±æ€§ä¿¡æ¯ï¼‰ç”¨æˆ·ã€‚\n\nåŸºäºåœ°åŸŸå’Œçƒ­åº¦çš„æ¨èç®—æ³•çš„åŸºæœ¬åŸç†æ˜¯ï¼šæŒ‰ç…§åœ°åŸŸå¯¹äº‹ç‰©è¿›è¡Œåˆ’åˆ†ï¼Œç„¶åæ ¹æ®çƒ­åº¦å¯¹äº‹ç‰©è¿›è¡Œæ’åºï¼Œè¿›è€Œæ¨èç»™ç”¨æˆ·ã€‚ä¸‹é¢ä»¥æ–°é—»ä¸ºä¾‹è¯´æ˜çƒ­åº¦ç®—æ³•çš„åŸºæœ¬åŸç†ã€‚\n\nåœ¨ä¸€åˆ™æ–°é—»å½•å…¥æ•°æ®åº“åï¼Œåˆå§‹åŒ–ä¸€ä¸ªçƒ­åº¦åˆ†ï¼ˆS0ï¼‰ï¼Œæ­¤æ—¶è¯¥æ–°é—»å°±è¿›å…¥äº†æ–°é—»æ¨èçš„å€™é€‰æ± ã€‚\n- éšç€æ–°é—»ä¸æ–­è¢«ç”¨æˆ·ç‚¹å‡»ï¼ˆclickï¼‰ã€è½¬å‘ï¼ˆshareï¼‰ã€å…³æ³¨ï¼ˆfollowï¼‰ã€è¯„è®ºï¼ˆcommentï¼‰ã€ç‚¹èµï¼ˆupï¼‰ç­‰ï¼Œå¯¹åº”çš„å’Œç”¨æˆ·äº¤äº’ç»´åº¦çš„çƒ­åº¦ï¼ˆS1ï¼‰ä¸æ–­å¢åŠ ã€‚\n-  å¦å¤–ï¼Œæ–°é—»è¦æ±‚å…·æœ‰æ—¶æ•ˆæ€§ï¼Œå› æ­¤åœ¨æ–°é—»å‘å¸ƒåï¼Œçƒ­åº¦ï¼ˆS2ï¼‰ä¼šéšç€æ—¶é—´è¡°å‡ã€‚\néšç€æ—¶é—´çš„åç§»ï¼Œæ–°é—»çš„çƒ­åº¦ä¸æ–­å‘ç”Ÿå˜åŒ–ï¼Œå¯¹åº”çš„æ¨èæŠ½é€‰æ± æ’åºä¹Ÿåœ¨ä¸æ–­åœ°å‘ç”Ÿå˜åŒ–ã€‚æœ€ç»ˆæ–°é—»çƒ­åº¦å¯¹åº”çš„è®¡ç®—å…¬å¼ä¸ºï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190711204214130.png\" width=150px></center>\n\nä½†è¿™é‡Œéœ€è¦è€ƒè™‘ä¸‰ä¸ªå› ç´ ï¼š\n- æ–°é—»çš„åˆå§‹çƒ­åº¦åº”è¯¥ä¸ä¸€è‡´\n- ç”¨æˆ·çš„è¡Œä¸ºè§„åˆ™åº”è¯¥å‘ç”Ÿå˜åŒ–\n- çƒ­åº¦éšæ—¶é—´è¡°å‡çš„è¶‹åŠ¿éçº¿æ€§\n\n# å…¶ä»–ä¸Šä¸‹æ–‡ç‰¹å¾ä¿¡æ¯\nä¸Šè¿°ä»‹ç»äº†æ—¶é—´ã€åœ°åŸŸå’Œçƒ­åº¦ä¿¡æ¯åœ¨æ¨èç³»ç»Ÿä¸­çš„åº”ç”¨ã€‚ä½†åœ¨å®é™…çš„åº”ç”¨ç¯å¢ƒä¸­ï¼Œä¸Šä¸‹æ–‡ä¿¡æ¯æ›´åŠ ä¸°å¯Œï¼ˆå¦‚ç”¨æˆ·ä½¿ç”¨çš„å®¢æˆ·ç«¯ã€ç”¨æˆ·çš„æ€§åˆ«ã€å¤©æ°”ã€ç”¨æˆ·è°ƒç”¨æ¥å£çš„æ¬¡æ•°ã€æ¨èå•†å“çš„ä½ç½®ç­‰ï¼‰ï¼Œè¿™äº›ä¿¡æ¯åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå½±å“ç”¨æˆ·æµè§ˆç‰©å“æ—¶çš„å¿ƒæƒ…å’Œå…´è¶£ã€‚\n\nåœ¨å®é™…çš„å»ºæ¨¡åº”ç”¨è¿‡ç¨‹ä¸­ï¼Œå¦‚æœèƒ½å¤Ÿæ­£ç¡®åœ°ä½¿ç”¨è¿™äº›ä¿¡æ¯ï¼Œå¯æé«˜æ¨èç³»ç»Ÿçš„æ•ˆç‡ã€‚\n\n> æ–‡ä¸­çš„ç›¸å…³ç–‘é—®å’Œæ›´è¯¦ç»†çš„ä»‹ç»éƒ½å¯ä»¥åœ¨ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ä¸€ä¹¦ä¸­æ‰¾åˆ°ç­”æ¡ˆã€‚\n\n-----\n\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n\n\n---\n<font color=red>æ³¨ï¼šã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹æ˜¯å°ç¼–è¿‘æœŸè¦ä¸Šçš„ä¸€æœ¬å›¾ä¹¦ï¼Œé¢„è®¡æœ¬æœˆï¼ˆ7æœˆæœ«ï¼‰å¯åœ¨äº¬ä¸œï¼Œå½“å½“ä¸Šçº¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è¿›è¡Œå…³æ³¨ï¼</font>\n<center><img src=\"https://img-blog.csdnimg.cn/20190708234949217.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=50% /></center>\n","tags":["æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹5ã€åŸºäºæ ‡ç­¾çš„æ¨èç®—æ³•ä»‹ç»å’Œæ¡ˆä¾‹å®æˆ˜å¼€å‘","url":"/2019/07/10/RecSys/æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜/ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹5ã€åŸºäºæ ‡ç­¾çš„æ¨èç®—æ³•ä»‹ç»å’Œæ¡ˆä¾‹å®æˆ˜å¼€å‘/","content":"\n> æ ‡ç­¾ç³»ç»Ÿçš„ä¼ ç»Ÿç”¨æ³•æ˜¯ï¼Œåœ¨ä¸€äº›ç½‘ç«™ä¸­ï¼Œç”¨æˆ·ä¼šä¸ºè‡ªå·±æ„Ÿå…´è¶£çš„å¯¹è±¡æ‰“ä¸Šä¸€äº›æ ‡ç­¾ï¼Œå¦‚è±†ç“£ã€ç½‘æ˜“äº‘éŸ³ä¹ã€Last.fmç­‰ã€‚è¿™äº›ç¤¾ä¼šåŒ–æ ‡ç­¾å³èµ„æºçš„åˆ†ç±»å·¥å…·ï¼Œä¹Ÿæ˜¯ç”¨æˆ·ä¸ªäººåå¥½çš„åæ˜ ï¼Œå› æ­¤ç¤¾ä¼šåŒ–æ ‡ç­¾ä¸ºæ¨èç³»ç»Ÿè·å¾—ç”¨æˆ·åå¥½æä¾›äº†ä¸€ä¸ªæ–°çš„æ•°æ®æ¥æºã€‚ä¹‹æ‰€ä»¥è¯´â€œä¼ ç»Ÿâ€ï¼Œæ˜¯å› ä¸ºè¿™äº›æ ‡ç­¾æ˜¯ç”¨æˆ·ä¸»è§‚æ„æ„¿çš„è¡¨è¾¾ï¼Œæ˜¯ä¸»åŠ¨è¡Œä¸ºã€‚ä½†æ˜¯ï¼Œæœ‰äº›ç”µå•†ç½‘ç«™ä¹Ÿä¼šå¯¹ç”¨æˆ·æˆ–å•†å“è¿›è¡Œä¸€äº›å®¢è§‚çš„æ‰“æ ‡ï¼Œå¦‚å¯¹ä¸€ä¸ªç»å¸¸ç½‘è´­æ•°ç äº§å“çš„ç”¨æˆ·æ‰“ä¸Šä¸€ä¸ªâ€œæ•°ç è¾¾äººâ€çš„æ ‡ç­¾ï¼Œä»¥ä¾¿åç»§ç»™è¯¥ç”¨æˆ·æ¨èæ•°ç ç±»å•†å“ã€‚\n\n<!--More-->\n\n---\n\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/95403294\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\nä¸ªäººç½‘ç«™ï¼šhttp://thinkgamer.github.io\n\n---\n\n# æ ‡ç­¾ç³»ç»Ÿçš„åº”ç”¨\næ¨èç³»ç»Ÿçš„ç›®çš„æ˜¯è”ç³»ç”¨æˆ·å’Œç‰©å“ï¼Œè¿™ç§è”ç³»éœ€è¦ä¸åŒçš„â€œåª’ä»‹â€ã€‚ä¾‹å¦‚ï¼š\n- ç›¸ä¼¼ç”¨æˆ·ï¼ˆç»™ç”¨æˆ·æ¨èç›¸ä¼¼ç”¨æˆ·å–œæ¬¢çš„ç‰©å“ï¼‰ï¼Œåª’ä»‹æ˜¯ç”¨æˆ·ã€‚\n- ç›¸ä¼¼ç‰©å“ï¼ˆç»™ç”¨æˆ·æ¨èä»–å–œæ¬¢ç‰©å“çš„ç›¸ä¼¼ç‰©å“ï¼‰ï¼Œåª’ä»‹æ˜¯ç‰©å“ã€‚\n- éšå«çš„ç‰¹å¾ï¼ˆæ ¹æ®ç”¨æˆ·çš„å†å²è¡Œä¸ºæ„é€ ç‰¹å¾ï¼Œè¿›è€Œé¢„æµ‹å¯¹æ–°ç‰©å“çš„åå¥½ç¨‹åº¦ï¼‰ï¼Œåª’ä»‹æ˜¯è¡Œä¸ºç‰¹å¾ã€‚\n\næœ¬ç« å°†ä»‹ç»ä¸€ç§æ–°çš„è”ç³»åª’ä»‹â€”â€”æ ‡ç­¾ã€‚å·¥ä¸šç•Œä¸­çš„ä¸»æµæ ‡ç­¾ç³»ç»ŸåŒ…å«ï¼š\n- Last.fm\n- Delicious\n- è±†ç“£\n- ç½‘æ˜“äº‘éŸ³ä¹\n\n# æ•°æ®æ ‡æ³¨ä¸å…³é”®è¯æå–\nå…³é”®è¯æ˜¯æŒ‡èƒ½å¤Ÿåæ˜ æ–‡æœ¬è¯­æ–™ä¸»é¢˜çš„è¯è¯­æˆ–çŸ­è¯­ã€‚åœ¨ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œè¯è¯­å’ŒçŸ­è¯­å…·æœ‰ä¸åŒçš„æ„ä¹‰ã€‚ä¾‹å¦‚ï¼š\n- ä»ç”µå•†ç½‘ç«™å•†å“æ ‡é¢˜ä¸­æå–æ ‡ç­¾æ—¶ï¼Œè¯è¯­æ‰€ä¼ è¾¾çš„æ„ä¹‰å°±æ¯”è¾ƒçªå‡ºã€‚\n- ä»æ–°é—»ç±»ç½‘ç«™ä¸­ç”Ÿæˆæ–°é—»æ‘˜è¦æ—¶ï¼ŒçŸ­è¯­æ‰€ä¼ è¾¾çš„æ„ä¹‰å°±æ¯”è¾ƒçªå‡ºã€‚\n\n## æ•°æ®æ ‡æ³¨\næ•°æ®æ ‡æ³¨å³åˆ©ç”¨äººå·¥æˆ–AIï¼ˆäººå·¥æ™ºèƒ½ï¼‰æŠ€æœ¯å¯¹æ•°æ®ï¼ˆæ–‡æœ¬ã€å›¾åƒã€ç”¨æˆ·æˆ–ç‰©å“ï¼‰è¿›è¡Œæ ‡æ³¨ã€‚\næ ‡æ³¨æœ‰è®¸å¤šç±»å‹ï¼Œå¦‚:\n- åˆ†ç±»æ ‡æ³¨ï¼šå³æ‰“æ ‡ç­¾ï¼Œå¸¸ç”¨åœ¨å›¾åƒã€æ–‡æœ¬ä¸­ã€‚ä¸€èˆ¬æ˜¯æŒ‡ï¼Œä»æ—¢å®šçš„æ ‡ç­¾ä¸­é€‰æ‹©æ•°æ®å¯¹åº”çš„æ ‡ç­¾ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ä¸€ä¸ªå°é—­çš„é›†åˆã€‚\n- æ¡†æ¡†æ ‡æ³¨ï¼šå¸¸ç”¨åœ¨å›¾åƒè¯†åˆ«ä¸­ï¼Œå¦‚æœ‰ä¸€å¼ ç¯è·¯ä¸Šçš„è¡Œè½¦ç…§ç‰‡ï¼Œä»ä¸­æ¡†å‡ºæ‰€æœ‰çš„è½¦è¾†ã€‚\n- åŒºåŸŸæ ‡æ³¨ï¼šå¸¸è§äºè‡ªåŠ¨é©¾é©¶ä¸­ã€‚ä¾‹å¦‚ä»ä¸€å¼ å›¾ç‰‡ä¸­æ ‡å‡ºå…¬è·¯å¯¹åº”çš„åŒºåŸŸã€‚\n- å…¶ä»–æ ‡æ³¨ï¼šé™¤äº†ä¸Šè¿°å¸¸è§çš„æ ‡æ³¨ç±»å‹å¤–ï¼Œè¿˜æœ‰è®¸å¤šä¸ªæ€§åŒ–éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œè‡ªåŠ¨æ‘˜è¦ã€ç”¨æˆ·æˆ–å•†å“çš„æ ‡ç­¾ï¼ˆå› ä¸ºå…¶ä¸­æ€»æœ‰ä¸€äº›æœªçŸ¥æ ‡ç­¾ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥çœ‹æˆæ˜¯å¤šåˆ†ç±»ï¼‰ã€‚\n\næ•°æ®æ ‡æ³¨çš„ä¸€èˆ¬æ­¥éª¤ä¸ºï¼š\nï¼ˆ1ï¼‰ç¡®å®šæ ‡æ³¨æ ‡å‡†ï¼šè®¾ç½®æ ‡æ³¨æ ·ä¾‹å’Œæ¨¡æ¿ï¼ˆå¦‚æ ‡æ³¨é¢œè‰²æ—¶å¯¹åº”çš„æ¯”è‰²å¡ç­‰ï¼‰ã€‚å¯¹äºæ¨¡æ£±ä¸¤å¯çš„æ•°æ®ï¼Œåˆ¶å®šç»Ÿä¸€çš„å¤„ç†æ–¹å¼ã€‚\nï¼ˆ2ï¼‰ç¡®å®šæ ‡æ³¨å½¢å¼ï¼šæ ‡æ³¨å½¢å¼ä¸€èˆ¬ç”±ç®—æ³•äººå‘˜ç¡®å®šã€‚ä¾‹å¦‚ï¼Œåœ¨åƒåœ¾é—®é¢˜è¯†åˆ«ä¸­ï¼Œåƒåœ¾é—®é¢˜æ ‡æ³¨ä¸º1ï¼Œæ­£å¸¸é—®é¢˜æ ‡æ³¨ä¸º0ã€‚\nï¼ˆ3ï¼‰ç¡®å®šæ ‡æ³¨æ–¹æ³•ï¼šå¯ä»¥ä½¿ç”¨äººå·¥æ ‡æ³¨ï¼Œä¹Ÿå¯ä»¥é’ˆå¯¹ä¸åŒçš„æ ‡æ³¨ç±»å‹é‡‡ç”¨ç›¸åº”çš„å·¥å…·è¿›è¡Œæ ‡æ³¨ã€‚\n\n>é‚£ä¹ˆï¼Œæ•°æ®æ ‡æ³¨ä¸æ ‡ç­¾çš„å¯¹åº”å…³ç³»æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n## æ•°æ®æ ‡æ³¨åœ¨æ¨èç³»ç»Ÿä¸­çš„åº”ç”¨\nå…³é”®è¯æå–åœ¨æ¨èç³»ç»Ÿä¸­çš„åº”ç”¨ä¹Ÿååˆ†å¹¿æ³›ï¼Œä¸»è¦ç”¨äºç”¨æˆ·ç‰©å“å¬å›ï¼ˆæ ¹æ®ç”¨æˆ·å¯¹å…³é”®è¯çš„è¡Œä¸ºåå¥½ï¼Œå¬å›ç›¸åº”å…³é”®è¯ä¸‹çš„ç‰©å“ï¼‰å’Œç‰¹å¾å±æ€§æ„é€ ï¼ˆå¯¹ç‰©å“çš„å±æ€§è¿›è¡Œè¡¥å……ï¼‰ã€‚\n> å…·ä½“çš„æ¡ˆä¾‹è¿™é‡Œä¸è¿‡å¤šåšä»‹ç»ã€‚\n## æ¨èç³»ç»Ÿä¸­çš„å…³é”®è¯æå–\nå…³é”®è¯æ˜¯æŒ‡èƒ½å¤Ÿåæ˜ æ–‡æœ¬è¯­æ–™ä¸»é¢˜çš„è¯è¯­æˆ–çŸ­è¯­ã€‚åœ¨ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œè¯è¯­å’ŒçŸ­è¯­å…·æœ‰ä¸åŒçš„æ„ä¹‰ã€‚ä¾‹å¦‚ï¼š\n- ä»ç”µå•†ç½‘ç«™å•†å“æ ‡é¢˜ä¸­æå–æ ‡ç­¾æ—¶ï¼Œè¯è¯­æ‰€ä¼ è¾¾çš„æ„ä¹‰å°±æ¯”è¾ƒçªå‡ºã€‚\n- ä»æ–°é—»ç±»ç½‘ç«™ä¸­ç”Ÿæˆæ–°é—»æ‘˜è¦æ—¶ï¼ŒçŸ­è¯­æ‰€ä¼ è¾¾çš„æ„ä¹‰å°±æ¯”è¾ƒçªå‡ºã€‚\n\nè¿™é‡Œæ‰€ä»‹ç»çš„å…³é”®æå–å’Œæ•°æ®æ ‡æ³¨åŒæ ·éƒ½æ˜¯ä¸€ä¸ªåŠ¨ä½œï¼Œéƒ½æ˜¯ä¸ºäº†å¾—åˆ°ä¸€äº›æ ‡ç­¾æˆ–å±æ€§ç‰¹å¾ã€‚\nå…³é”®è¯æå–ä»æœ€ç»ˆçš„ç»“æœåé¦ˆä¸Šæ¥çœ‹å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š\n- å…³é”®è¯åˆ†é…ï¼šç»™å®šä¸€ä¸ªæŒ‡å®šçš„è¯åº“ï¼Œé€‰å–å’Œæ–‡æœ¬å…³è”åº¦æœ€å¤§çš„å‡ ä¸ªè¯ä½œä¸ºè¯¥æ–‡æœ¬çš„å…³é”®è¯ã€‚\n- å…³é”®è¯æå–ï¼šæ²¡æœ‰æŒ‡å®šçš„è¯åº“ï¼Œä»æ–‡æœ¬ä¸­æŠ½å–ä»£è¡¨æ€§è¯ä½œä¸ºè¯¥æ–‡æœ¬çš„å…³é”®è¯ã€‚\nä¸ç®¡é€šè¿‡å“ªç§æ–¹å¼ç”Ÿæˆï¼Œå…³é”®è¯éƒ½æ˜¯å¯¹çŸ­æ–‡æœ¬æ‰€ä¼ è¾¾å«ä¹‰çš„æŠ½å–æ¦‚è¿°ï¼Œéƒ½ç›´æ¥åæ˜ äº†çŸ­æ–‡æœ¬çš„æ‰€ä¼ è¾¾çš„å±æ€§æˆ–ç‰¹å¾\n\n# æ ‡ç­¾çš„åˆ†ç±»\nåœ¨æ¨èç³»ç»Ÿä¸­ï¼Œä¸ç®¡æ˜¯æ•°æ®æ ‡æ³¨è¿˜æ˜¯å…³é”®è¯æå–ï¼Œå…¶ç›®çš„éƒ½æ˜¯å¾—åˆ°ç”¨æˆ·æˆ–ç‰©å“çš„æ ‡ç­¾ã€‚ä½†æ˜¯åœ¨ä¸åŒåœºæ™¯ä¸‹ï¼Œæ ‡ç­¾çš„å…·ä½“å†…å®¹æ˜¯ä¸å®šçš„ã€‚ä¾‹å¦‚ï¼ŒåŒæ ·æ˜¯åˆ†ç±»æ ‡æ³¨ï¼Œæ–°é—»çš„ç±»åˆ«é‡Œå¯ä»¥æœ‰å†›äº‹ã€ç§‘æŠ€ç­‰ï¼Œä½†éŸ³ä¹çš„ç±»åˆ«é‡Œå°±å¾ˆå°‘ä¼šæ¶‰åŠå†›äº‹æˆ–ç§‘æŠ€äº†ã€‚\nå¯¹äºç¤¾ä¼šåŒ–æ ‡ç­¾åœ¨æ ‡è¯†é¡¹ç›®æ–¹é¢çš„åŠŸèƒ½ï¼ŒGolderå’ŒHubermanå°†å…¶å½’çº³ä¸ºä»¥ä¸‹7ç§ï¼š\n- æ ‡è¯†å¯¹è±¡çš„å†…å®¹ã€‚æ­¤ç±»æ ‡ç­¾ä¸€èˆ¬ä¸ºåè¯ï¼Œå¦‚â€œIBMâ€â€œéŸ³ä¹â€â€œæˆ¿äº§é”€å”®â€ç­‰ã€‚\n- æ ‡è¯†å¯¹è±¡çš„ç±»åˆ«ã€‚ä¾‹å¦‚æ ‡è¯†å¯¹è±¡ä¸ºâ€œæ–‡ç« â€â€œæ—¥å¿—â€â€œä¹¦ç±â€ç­‰ã€‚\n- æ ‡è¯†å¯¹è±¡çš„åˆ›å»ºè€…æˆ–æ‰€æœ‰è€…ã€‚ä¾‹å¦‚åšå®¢æ–‡ç« çš„ä½œè€…ç½²åã€è®ºæ–‡çš„ä½œè€…ç½²åç­‰ã€‚\n\næ ‡è¯†å¯¹è±¡çš„å“è´¨å’Œç‰¹å¾ã€‚ä¾‹å¦‚â€œæœ‰è¶£â€â€œå¹½é»˜â€ç­‰ã€‚\n- ç”¨æˆ·å‚è€ƒç”¨åˆ°çš„æ ‡ç­¾ã€‚ä¾‹å¦‚â€œmyPhotoâ€â€œmyFavoriteâ€ç­‰ã€‚\n- åˆ†ç±»æç‚¼ç”¨çš„æ ‡ç­¾ã€‚ç”¨æ•°å­—åŒ–æ ‡ç­¾å¯¹ç°æœ‰åˆ†ç±»è¿›ä¸€æ­¥ç»†åŒ–ï¼Œå¦‚ä¸€ä¸ªäººæ”¶è—çš„æŠ€æœ¯åšå®¢ï¼ŒæŒ‰ç…§éš¾åº¦ç­‰çº§åˆ†ä¸ºâ€œ1â€â€œ2â€â€œ3â€â€œ4â€ç­‰ã€‚\n- ç”¨äºä»»åŠ¡ç»„ç»‡çš„æ ‡ç­¾ã€‚ä¾‹å¦‚â€œto readâ€â€œIT blogâ€ç­‰ã€‚\nå½“ç„¶ä»¥ä¸Š7ç§ç±»åˆ«æ ‡ç­¾æ˜¯ä¸€ä¸ªé€šç”¨æ¡†æ¶ï¼Œåœ¨æ¯ä¸€ä¸ªå…·ä½“çš„åœºæ™¯ä¸‹ä¼šæœ‰ä¸åŒçš„åˆ’åˆ†ã€‚\n\n# åŸºäºTF-IDFæå–æ ‡é¢˜ä¸­çš„å…³é”®è¯\nTF-IDFï¼ˆTerm Frequencyâ€“Inverse Document Frequencyï¼‰æ˜¯ä¸€ç§ç”¨äºèµ„è®¯æ£€ç´¢ä¸æ–‡æœ¬æŒ–æ˜çš„å¸¸ç”¨åŠ æƒæŠ€æœ¯ã€‚TF-IDFç®—æ³•çš„ä¸»è¦æ€æƒ³æ˜¯ï¼šå¦‚æœæŸä¸ªè¯æˆ–çŸ­è¯­åœ¨ä¸€ç¯‡æ–‡ç« ä¸­å‡ºç°çš„é¢‘ç‡TFé«˜ï¼Œå¹¶ä¸”åœ¨å…¶ä»–æ–‡ç« ä¸­å¾ˆå°‘å‡ºç°ï¼Œåˆ™è®¤ä¸ºæ­¤è¯æˆ–çŸ­è¯­å…·æœ‰å¾ˆå¥½çš„ç±»åˆ«åŒºåˆ†èƒ½åŠ›ï¼Œé€‚åˆç”¨æ¥åˆ†ç±»ã€‚TF-IDFå®é™…æ˜¯TF*IDFã€‚\n> é‚£ä¹ˆTF-IDFçš„å…·ä½“ç®—æ³•åŸç†æ˜¯ä»€ä¹ˆï¼Ÿä»¥åŠæˆ‘ä»¬å¦‚ä½•ä»å•†å“æ ‡é¢˜ä¸­æå–å…³é”®è¯å‘¢ï¼Ÿ\n# åŸºäºæ ‡ç­¾çš„æ¨èç³»ç»Ÿ\næ ‡ç­¾æ˜¯ç”¨æˆ·æè¿°ã€æ•´ç†ã€åˆ†äº«ç½‘ç»œå†…å®¹çš„ä¸€ç§æ–°çš„å½¢å¼ï¼ŒåŒæ—¶ä¹Ÿåæ˜ å‡ºç”¨æˆ·è‡ªèº«çš„å…´è¶£å’Œæ€åº¦ã€‚æ ‡ç­¾ä¸ºåˆ›å»ºç”¨æˆ·å…´è¶£æ¨¡å‹æä¾›äº†ä¸€ç§å…¨æ–°çš„é€”å¾„ã€‚\næœ¬èŠ‚å°†å±•å¼€ä»‹ç»åŸºäºæ ‡ç­¾çš„ç”¨æˆ·å¦‚ä½•è¿›è¡Œå…´è¶£å»ºæ¨¡ã€‚\n## æ ‡ç­¾è¯„åˆ†ç®—æ³•\nç”¨æˆ·å¯¹æ ‡ç­¾çš„è®¤åŒåº¦å¯ä»¥ä½¿ç”¨äºŒå…ƒå…³ç³»è¡¨ç¤ºï¼Œå¦‚â€œå–œæ¬¢â€æˆ–â€œä¸å–œæ¬¢â€ï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨â€œè¿ç»­æ•°å€¼â€è¡¨ç¤ºå–œå¥½ç¨‹åº¦ã€‚\n\näºŒå…ƒè¡¨ç¤ºæ–¹æ³•ç®€å•æ˜äº†ï¼Œä½†ç²¾ç¡®åº¦ä¸å¤Ÿï¼Œåœ¨å¯¹æ ‡ç­¾å–œå¥½ç¨‹åº¦è¿›è¡Œæ’åºæ—¶ï¼Œä¹Ÿæ— æ³•è¿›è¡ŒåŒºåˆ†ã€‚æ‰€ä»¥ï¼Œè¿™é‡Œé€‰ç”¨â€œè¿ç»­æ•°å€¼â€æ¥è¡¨è¾¾ç”¨æˆ·å¯¹æ ‡ç­¾çš„å–œå¥½ç¨‹åº¦ã€‚\n\nä¸ºäº†è®¡ç®—ç”¨æˆ·å¯¹æ ‡ç­¾çš„å–œå¥½ç¨‹åº¦ï¼Œéœ€è¦å°†ç”¨æˆ·å¯¹ç‰©å“çš„è¯„åˆ†ä¼ é€’ç»™è¿™ä¸ªç‰©å“æ‰€æ‹¥æœ‰çš„æ ‡ç­¾ï¼Œä¼ é€’çš„åˆ†å€¼ä¸ºç‰©å“ä¸æ ‡ç­¾çš„ç›¸å…³åº¦ã€‚\n### 1.ç”¨æˆ·å¯¹æ ‡ç­¾çš„ä¾èµ–ç¨‹åº¦\nå¦‚å›¾6-13æ‰€ç¤ºï¼Œç”¨æˆ·uå¯¹è‰ºæœ¯å®¶Açš„è¯„åˆ†ä¸º5æ˜Ÿï¼Œå¯¹è‰ºæœ¯å®¶Bçš„è¯„åˆ†ä¸º3æ˜Ÿï¼Œå¯¹è‰ºæœ¯å®¶Cçš„è¯„åˆ†ä¸º4æ˜Ÿã€‚\nè‰ºæœ¯å®¶Aä¸æ ‡ç­¾1ã€2ã€3çš„ç›¸å…³åº¦åˆ†åˆ«ä¸ºï¼š0.6ï¼Œ0.8ï¼Œ0.4ï¼›\nè‰ºæœ¯å®¶Bä¸æ ‡ç­¾1ã€2ã€3çš„ç›¸å…³åº¦åˆ†åˆ«ä¸ºï¼š0.3ï¼Œ0.6ï¼Œ0.9ï¼›\nè‰ºæœ¯å®¶Cä¸æ ‡ç­¾1ã€2ã€3çš„ç›¸å…³åº¦åˆ†åˆ«ä¸ºï¼š0.5ï¼Œ0.7ï¼Œ0.6ã€‚\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190711081522439.png\" width=70%></center>\n\nå¯¹åº”çš„ç”¨æˆ·ï¼ˆuï¼‰å¯¹æ ‡ç­¾ï¼ˆtï¼‰çš„å–œå¥½ç¨‹åº¦è®¡ç®—å…¬å¼ä¸ºï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/2019071108154257.png\" width=50%></center>\n\nå¼ä¸­ï¼š\n- rate(u,t)è¡¨ç¤ºç”¨æˆ·uå¯¹æ ‡ç­¾tçš„å–œå¥½ç¨‹åº¦ã€‚\n- rate(u,i)è¡¨ç¤ºç”¨æˆ·uå¯¹è‰ºæœ¯å®¶içš„è¯„åˆ†ã€‚\n- rel(i,t)è¡¨ç¤ºè‰ºæœ¯å®¶iä¸æ ‡ç­¾tçš„ç›¸å…³åº¦ã€‚\n\næ ¹æ®å¼ï¼ˆ6.4ï¼‰è®¡ç®—å‡ºç”¨æˆ·uå¯¹æ ‡ç­¾1çš„å–œå¥½ç¨‹åº¦ä¸ºï¼š\nï¼ˆ50.6+30.3+40.5ï¼‰/ï¼ˆ0.6+0.3+0.5ï¼‰=4.21\n\nåŒç†å¯ä»¥è®¡ç®—å‡ºç”¨æˆ·uå¯¹æ ‡ç­¾2çš„å–œå¥½ç¨‹åº¦ä¸º 4.10ï¼Œå¯¹æ ‡ç­¾3çš„å–œå¥½ç¨‹åº¦ä¸º3.74ã€‚\n### 2.ä¼˜åŒ–ç”¨æˆ·å¯¹æ ‡ç­¾çš„å–œå¥½ç¨‹åº¦\n> å¦‚æœä¸€ä¸ªç”¨æˆ·çš„è¯„åˆ†è¡Œä¸ºè¾ƒå°‘ï¼Œå°±ä¼šå¯¼è‡´é¢„æµ‹ç»“æœå­˜åœ¨è¯¯å·®ã€‚é‚£ä¹ˆè¯¥å¦‚ä½•æ”¹è¿›å‘¢ï¼Ÿ\n## æ ‡ç­¾è¯„åˆ†ç®—æ³•æ”¹è¿›\n\nè¿™é‡Œä½¿ç”¨TF-IDFç®—æ³•æ¥è®¡ç®—æ¯ä¸ªæ ‡ç­¾çš„æƒé‡ï¼Œç”¨è¯¥æƒé‡æ¥è¡¨è¾¾ç”¨æˆ·å¯¹æ ‡ç­¾çš„ä¾èµ–ç¨‹åº¦ã€‚\nTF-IDFç®—æ³•åœ¨6.3.1èŠ‚ä¸­è¿›è¡Œäº†ä»‹ç»ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚æ¯ä¸ªç”¨æˆ·æ ‡è®°çš„æ ‡ç­¾å¯¹åº”çš„TFå€¼çš„è®¡ç®—å…¬å¼ä¸ºï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/20190711005210591.png\" width=50%></center>\n\nå¼ä¸­ï¼š\n- n(u,ti)è¡¨ç¤ºç”¨æˆ·uä½¿ç”¨æ ‡ç­¾tiæ ‡è®°çš„æ¬¡æ•°ã€‚\n- åˆ†æ¯éƒ¨åˆ†è¡¨ç¤ºç”¨æˆ·uä½¿ç”¨æ‰€æœ‰æ ‡ç­¾æ ‡è®°çš„æ¬¡æ•°å’Œã€‚\nTF(u,t)è¡¨ç¤ºç”¨æˆ·uä½¿ç”¨æ ‡ç­¾tæ ‡è®°çš„é¢‘ç‡ï¼Œå³ç”¨æˆ·uå¯¹æ ‡ç­¾tçš„ä¾èµ–ç¨‹åº¦ã€‚\n\n## ä¼˜åŒ–ç”¨æˆ·å¯¹æ ‡ç­¾çš„ä¾èµ–ç¨‹åº¦\nåœ¨ç¤¾ä¼šåŒ–æ ‡ç­¾çš„ä½¿ç”¨ç½‘ç«™ä¸­å­˜åœ¨â€œé©¬å¤ªæ•ˆåº”â€ï¼Œå³çƒ­é—¨æ ‡ç­¾ç”±äºè¢«å±•ç¤ºçš„æ¬¡æ•°è¾ƒå¤šè€Œå˜å¾—è¶Šæ¥è¶Šçƒ­é—¨ï¼Œè€Œå†·é—¨æ ‡ç­¾ä¹Ÿä¼šè¶Šæ¥è¶Šå†·é—¨ã€‚å¤§å¤šæ•°ç”¨æˆ·æ ‡æ³¨çš„æ ‡ç­¾éƒ½é›†ä¸­åœ¨ä¸€ä¸ªå¾ˆå°çš„é›†åˆå†…ï¼Œè€Œå¤§é‡é•¿å°¾æ ‡ç­¾åˆ™è¾ƒå°‘æœ‰ç”¨æˆ·ä½¿ç”¨ã€‚\näº‹å®ä¸Šï¼Œè¾ƒå†·é—¨çš„æ ‡ç­¾æ‰èƒ½æ›´å¥½åœ°ä½“ç°ç”¨æˆ·çš„ä¸ªæ€§å’Œç‰¹ç‚¹ã€‚ä¸ºäº†æŠ‘åˆ¶è¿™ç§ç°è±¡ï¼Œæ›´å¥½åœ°ä½“ç°ç”¨æˆ·çš„ä¸ªæ€§åŒ–ï¼Œè¿™é‡Œä½¿ç”¨é€†å‘æ–‡ä»¶é¢‘ç‡ï¼ˆIDFï¼‰æ¥å¯¹é‚£äº›çƒ­é—¨æ ‡ç­¾è¿›è¡Œæ•°å€¼æƒ©ç½šã€‚\n\næ¯ä¸ªç”¨æˆ·æ ‡è®°çš„æ ‡ç­¾å¯¹åº”çš„IDFå€¼çš„è®¡ç®—å…¬å¼ä¸ºï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190711005414747.png\" width=50%></center>\n\n- åˆ†å­è¡¨ç¤ºæ‰€æœ‰ç”¨æˆ·å¯¹æ‰€æœ‰æ ‡ç­¾çš„æ ‡è®°è®¡æ•°å’Œã€‚\n- åˆ†æ¯è¡¨ç¤ºæ‰€æœ‰ç”¨æˆ·å¯¹æ ‡ç­¾tçš„æ ‡è®°è®¡æ•°å’Œã€‚\n- IDF( u, t)è¡¨ç¤ºtçš„çƒ­é—¨ç¨‹åº¦ï¼Œå³ä¸€ä¸ªæ ‡ç­¾è¢«ä¸åŒç”¨æˆ·ä½¿ç”¨çš„æ¦‚ç‡ã€‚\nå¯¹äºä¸€ä¸ªæ ‡ç­¾è€Œè¨€ï¼Œå¦‚æœä½¿ç”¨è¿‡å®ƒçš„ç”¨æˆ·æ•°é‡å¾ˆå°‘ï¼Œä½†æŸä¸€ä¸ªç”¨æˆ·ç»å¸¸ä½¿ç”¨å®ƒï¼Œè¯´æ˜è¿™ä¸ªç”¨æˆ·ä¸è¿™ä¸ªæ ‡ç­¾çš„å…³ç³»å¾ˆç´§å¯†ã€‚\n\n## ç”¨æˆ·å¯¹æ ‡ç­¾çš„å…´è¶£è¯»\nç»¼åˆå¼ï¼ˆ6.6ï¼‰å’Œå¼ï¼ˆ6.7ï¼‰ï¼Œç”¨æˆ·å¯¹æ ‡ç­¾çš„ä¾èµ–åº¦ä¸ºï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/2019071100570952.png\" width=50%></center>\n\nåœ¨6ä¹‹å‰åˆ†æäº†ç”¨æˆ·å¯¹æ ‡ç­¾çš„ä¸»è§‚å–œå¥½ç¨‹åº¦ï¼Œæœ¬èŠ‚åˆ†æäº†ç”¨æˆ·å¯¹æ ‡ç­¾çš„ä¾èµ–ç¨‹åº¦ï¼Œç»¼åˆå¯ä»¥å¾—åˆ°ç”¨æˆ·uå¯¹æ ‡ç­¾çš„å…´è¶£åº¦ä¸ºï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190711005730699.png\" width=50%></center>\n\n## æ ‡ç­¾åŸºå› \næ ‡ç­¾åŸºå› æ˜¯GroupLensç ”ç©¶ç»„çš„ä¸€ä¸ªé¡¹ç›®ã€‚\nåœ¨ç¤¾ä¼šåŒ–æ ‡ç­¾ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªç‰©å“éƒ½å¯ä»¥è¢«çœ‹ä½œä¸å…¶ç›¸å…³çš„æ ‡ç­¾çš„é›†åˆï¼Œrel(i, t)ä»¥ä»0ï¼ˆå®Œå…¨ä¸ç›¸å…³ï¼‰åˆ°1ï¼ˆå®Œå…¨æ­£ç›¸å…³ï¼‰çš„è¿ç»­å€¼è¡¡é‡ä¸€ä¸ªæ ‡ç­¾ä¸ä¸€ä¸ªç‰©å“çš„ç¬¦åˆç¨‹åº¦ã€‚\nä¾‹å¦‚å›¾6-13ä¸­ï¼š\n- rel(è‰ºæœ¯å®¶Aï¼Œæ ‡ç­¾1)=0.6ï¼›\n- rel(è‰ºæœ¯å®¶Aï¼Œæ ‡ç­¾2)=0.8ï¼›\n- rel(è‰ºæœ¯å®¶Aï¼Œæ ‡ç­¾3)=0.4ã€‚\né‡‡ç”¨æ ‡ç­¾åŸºå› å¯ä»¥ä¸ºæ¯ä¸ªè‰ºæœ¯å®¶iè®¡ç®—å‡ºä¸€ä¸ªæ ‡ç­¾å‘é‡rel(i)ï¼Œå…¶å…ƒç´ æ˜¯iä¸Tä¸­æ‰€æœ‰æ ‡ç­¾çš„ç›¸å…³åº¦ã€‚è¿™é‡Œï¼Œrel( i)ç›¸å½“äºä»¥æ ‡ç­¾ä¸ºåŸºå› æç»˜å‡ºäº†ä¸åŒç‰©å“çš„åŸºå› å›¾è°±ã€‚å½¢å¼åŒ–çš„è¡¨è¾¾å¦‚ä¸‹ï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/20190711083629938.png\" width=50%></center>\n\nä¾‹å¦‚ï¼Œå›¾6-13ä¸­ï¼Œè‰ºæœ¯å®¶Açš„æ ‡ç­¾åŸºå› ä¸ºï¼šrel(è‰ºæœ¯å®¶A)=[0.6,0.8,0.4]ã€‚\né€‰ç”¨æ ‡ç­¾åŸºå› æ¥è¡¨ç¤ºæ ‡ç­¾ä¸ç‰©å“çš„å…³ç³»æœ‰ä»¥ä¸‹ä¸‰ä¸ªåŸå› ï¼š\nï¼ˆ1ï¼‰å®ƒæä¾›äº†ä»0åˆ°1çš„è¿ç»­æ•°å€¼ï¼›\nï¼ˆ2ï¼‰å…³ç³»çŸ©é˜µæ˜¯ç¨ å¯†çš„ï¼Œå®ƒå®šä¹‰äº†æ¯ä¸ªæ ‡ç­¾tâˆˆ Tä¸æ¯ä¸ªç‰©å“ iâˆˆ Içš„ç›¸å…³åº¦ï¼›\nï¼ˆ3ï¼‰å®ƒæ˜¯åŸºäºçœŸå®æ•°æ®æ„å»ºçš„ã€‚\n## ç”¨æˆ·å…´è¶£å»ºæ¨¡\næ ¹æ®è®­ç»ƒæ•°æ®ï¼Œå¯ä»¥æ„å»ºæ‰€æœ‰å•†å“çš„æ ‡ç­¾åŸºå› çŸ©é˜µTiå’Œç”¨æˆ·æœ€ç»ˆå¯¹æ ‡ç­¾çš„å…´è¶£åº¦Tuï¼Œåˆ™ç”¨æˆ·å¯¹å•†å“çš„å¯èƒ½å–œå¥½ç¨‹åº¦ä¸ºï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190711083701613.png\" width=50%></center>\n\nå¼ä¸­ï¼š\n- Tuï¼šç”¨æˆ·uå¯¹æ‰€æœ‰æ ‡ç­¾çš„å…´è¶£åº¦çŸ©é˜µï¼ˆ1è¡Œmåˆ—ï¼Œmä¸ºæ ‡ç­¾ä¸ªæ•°ï¼‰ã€‚\n- Ti^Tï¼šæ‰€æœ‰å•†å“çš„æ ‡ç­¾åŸºå› çŸ©é˜µTiçš„è½¬ç½®çŸ©é˜µï¼ˆmè¡Œnåˆ—ï¼Œmä¸ºæ ‡ç­¾ä¸ªæ•°ï¼Œnä¸ºå•†å“ä¸ªæ•°ï¼‰ã€‚\n- T(u,i)ï¼šç”¨æˆ·uå¯¹æ‰€æœ‰å•†å“çš„å–œå¥½ç¨‹åº¦çŸ©é˜µï¼ˆ1è¡Œnåˆ—ï¼Œnä¸ºå•†å“ä¸ªæ•°ï¼‰ã€‚\næœ€ç»ˆä»è®¡ç®—ç»“æœä¸­é€‰å–å‰Kä¸ªæ¨èç»™ç”¨æˆ·ã€‚\n# åŸºäºæ ‡ç­¾æ¨èç®—æ³•å®ç°è‰ºæœ¯å®¶æ¨è\nåˆ©ç”¨æ ‡ç­¾æ¨èç®—æ³•å®ç°ä¸€ä¸ªè‰ºæœ¯å®¶æ¨èç³»ç»Ÿï¼Œå³ï¼Œæ ¹æ®ç”¨æˆ·å·²ç»æ ‡è®°è¿‡çš„æ ‡ç­¾è¿›è¡Œæ ‡ç­¾å…´è¶£å»ºæ¨¡ï¼Œè¿›è€Œä¸ºç”¨æˆ·æ¨èå–œå¥½æ ‡ç­¾ä¸‹æœ€ç›¸å…³çš„è‰ºæœ¯å®¶ã€‚\n\nè¿™é‡Œä½¿ç”¨Last.fmæ•°æ®é›†ä¸­çš„æ•°æ®ä½œä¸ºåŸºç¡€æ•°æ®ï¼Œè¯¥æ•°æ®é›†åœ¨3.3èŠ‚æœ‰ç›¸å…³çš„ä»‹ç»ã€‚è¯¥å®ä¾‹çš„å…·ä½“å®ç°æ€è·¯å¦‚ä¸‹ï¼š\nï¼ˆ1ï¼‰åŠ è½½å¹¶å‡†å¤‡æ•°æ®ï¼›\nï¼ˆ2ï¼‰è®¡ç®—æ¯ä¸ªç”¨æˆ·å¯¹åº”çš„æ ‡ç­¾åŸºå› ï¼›\nï¼ˆ3ï¼‰è®¡ç®—ç”¨æˆ·æœ€ç»ˆå¯¹æ¯ä¸ªæ ‡ç­¾çš„å…´è¶£åº¦ï¼›\nï¼ˆ4ï¼‰è¿›è¡Œè‰ºæœ¯å®¶æ¨èå’Œæ•ˆæœè¯„ä¼°ã€‚\n\n\n\n---\n\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n\n\n---\n<font color=red>æ³¨ï¼šã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹æ˜¯å°ç¼–è¿‘æœŸè¦ä¸Šçš„ä¸€æœ¬å›¾ä¹¦ï¼Œé¢„è®¡æœ¬æœˆï¼ˆ7æœˆæœ«ï¼‰å¯åœ¨äº¬ä¸œï¼Œå½“å½“ä¸Šçº¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è¿›è¡Œå…³æ³¨ï¼</font>\n<center><img src=\"https://img-blog.csdnimg.cn/20190708234949217.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=50% /></center>\n","tags":["æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹4ã€åŸºäºç”¨æˆ·è¡Œä¸ºç‰¹å¾çš„æ¨èç®—æ³•ä»‹ç»å’Œæ¡ˆä¾‹å®æˆ˜å¼€å‘","url":"/2019/07/10/RecSys/æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜/ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹4ã€åŸºäºç”¨æˆ·è¡Œä¸ºç‰¹å¾çš„æ¨èç®—æ³•ä»‹ç»å’Œæ¡ˆä¾‹å®æˆ˜å¼€å‘/","content":"\n> æ¨èç³»ç»Ÿçš„å—ä¼—å¯¹è±¡ä¸ºç”¨æˆ·ï¼Œåªæœ‰æ˜ç™½ç”¨æˆ·çš„æ„å›¾ï¼Œæ‰èƒ½ç»™ç”¨æˆ·æ¨èæ›´å¥½çš„å†…å®¹ã€‚åŸºäºç”¨æˆ·è¡Œä¸ºç‰¹å¾çš„æ¨èï¼Œå…¶å®åœ¨çœŸæ­£çš„â€œä¸ªæ€§åŒ–æ¨èç³»ç»Ÿâ€è¯ç”Ÿä¹‹å‰å°±å·²ç»å­˜åœ¨äº†ã€‚æœ€ç®€å•çš„å°±æ˜¯å„ç§æ’è¡Œæ¦œï¼Œå®ƒä»¬åŸºäºç®€å•çš„ç”¨æˆ·ç»Ÿè®¡ï¼Œåˆå¯¹å…¶ä»–é€‰æ‹©æä¾›ä¸€å®šçš„æŒ‡å¼•ã€‚\n\n<!--More-->\n\n---\n\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/95302470\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\nä¸ªäººç½‘ç«™ï¼šhttp://thinkgamer.github.io\n\n---\n\n# ç”¨æˆ·è¡Œä¸ºåˆ†ç±»\nç”¨æˆ·è¡Œä¸ºåˆ†ä¸ºä¸¤ç§â€”â€”æ˜¾æ€§åé¦ˆè¡Œä¸ºå’Œéšæ€§åé¦ˆè¡Œä¸ºã€‚\n- æ˜¾æ€§åé¦ˆè¡Œä¸º\n> æ˜¾æ€§åé¦ˆè¡Œä¸ºæ˜¯æŒ‡ï¼Œç”¨æˆ·å¾ˆæ˜æ˜¾åœ°è¡¨è¾¾å‡ºè‡ªå·±çš„å–œå¥½ï¼Œå¦‚å¯¹å†…å®¹è¯„åˆ†ã€è¡¨ç¤ºå–œæ¬¢/ä¸å–œæ¬¢ç­‰ã€‚ä¾‹å¦‚ï¼Œè±†ç“£ç”µå½±ä¸­çš„è¯„åˆ†æœºåˆ¶å’ŒYouTubeä¸­çš„â€œç‚¹èµâ€åŠŸèƒ½éƒ½æ˜¯å…¸å‹çš„æ˜¾æ€§åé¦ˆã€‚\n- éšæ€§åé¦ˆè¡Œä¸º\n> éšæ€§åé¦ˆè¡Œä¸ºæ˜¯æŒ‡ï¼Œç”¨æˆ·ä¸æ˜ç¡®è¡¨è¾¾å‡ºè‡ªå·±çš„å–œå¥½ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·åœ¨äº¬ä¸œAPPä¸­çš„å•†å“æµè§ˆæ—¥å¿—ã€åœ¨ç½‘æ˜“äº‘ä¸Šå¬æ­Œçš„æ—¥å¿—ç­‰ï¼Œå®é™…ä¸Šäº¬ä¸œå’Œç½‘æ˜“å·²ç»å¾—åˆ°äº†ä¸€å®šçš„ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œä½†æ²¡æœ‰ä»¥æ˜¾æ€§æ–¹å¼ç›´æ¥åé¦ˆï¼Œè€Œæ˜¯åœ¨å…¶ä»–åœ°æ–¹é—´æ¥åœ°åé¦ˆå‡ºæ¥ã€‚\n\n> <font color=red>ç–‘é—®ï¼šæ˜¾æ€§åé¦ˆè¡Œä¸º å’Œ éšæ€§åé¦ˆè¡Œä¸ºçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n   \n# åŸºäºå†…å®¹çš„æ¨èç®—æ³•\n> åŸºäºå†…å®¹çš„æ¨èç®—æ³•ï¼Œæ ¹æ®ç”¨æˆ·è¿‡å»ä¸€æ®µæ—¶é—´å†…å–œæ¬¢çš„ç‰©å“ï¼Œä»¥åŠç”±æ­¤æ¨ç®—å‡ºæ¥ç”¨æˆ·åå¥½ï¼Œä¸ºç”¨æˆ·æ¨èç›¸ä¼¼ç‰©å“ã€‚å…¶ä¸­çš„â€œå†…å®¹â€æŒ‡çš„ä¾¿æ˜¯ï¼šç”¨æˆ·è¿‡å»ä¸€æ®µæ—¶é—´å†…å–œæ¬¢çš„ç‰©å“ï¼Œä»¥åŠç”±æ­¤æ¨ç®—å‡ºæ¥çš„ç”¨æˆ·åå¥½ã€‚\n\nå›¾5-2æ‰€ç¤ºæ˜¯ä¸€ä¸ªåŸºäºå†…å®¹æ¨èçš„ä¾‹å­ï¼Œç”¨æˆ·Aå’Œç”¨æˆ·Cå–œæ¬¢çˆ±æƒ…ã€æµªæ¼«ç±»å‹çš„ç”µå½±ï¼Œç”¨æˆ·Bå–œæ¬¢ææ€–ã€æƒŠæ‚šçš„ç”µå½±ï¼Œå› æ­¤å°†ç±»å‹ä¸ºçˆ±æƒ…ã€æµªæ¼«ä¸”ç”¨æˆ·Aæ²¡æœ‰è¡Œä¸ºçš„ç”µå½±Cæ¨èç»™ç”¨æˆ·Aã€‚\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190710233722482.png\" width=70% /></center>\n\n## åŸç†åˆ†æ\nåŸºäºå†…å®¹ï¼ˆContent Basedï¼ŒCBï¼‰çš„æ¨èåŸç†éå¸¸ç®€å•ï¼šå‘ç”¨æˆ·æ¨èæ‰€å–œæ¬¢çš„Itemçš„ç›¸ä¼¼Itemã€‚å…¶ä¸­åŒ…å«äº†ä¸‰æ­¥ï¼š\nï¼ˆ1ï¼‰æ„é€ Itemçš„ç‰¹å¾ï¼›\n\t\nåœ¨çœŸå®åº”ç”¨åœºæ™¯ä¸­ï¼Œå¾€å¾€ä¼šç”¨ä¸€äº›å±æ€§æè¿°Itemçš„ç‰¹å¾ï¼Œè¿™äº›å±æ€§é€šå¸¸åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š\n- ç»“æ„åŒ–å±æ€§ï¼šæ„ä¹‰æ¯”è¾ƒæ˜ç¡®ï¼Œå…¶å–å€¼å›ºå®šåœ¨æŸä¸ªèŒƒå›´å†…ã€‚\n- éç»“æ„åŒ–å±æ€§ï¼šç‰¹æ€§æ„ä¹‰ç›¸å¯¹ä¸å¤ªæ˜ç¡®ï¼Œå–å€¼æ²¡æœ‰ä»€ä¹ˆé™åˆ¶ï¼Œä¸å¯ä»¥ç›´æ¥ä½¿ç”¨\n\nï¼ˆ2ï¼‰è®¡ç®—Itemä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼›\n\nåœ¨ç¡®å®šå¥½Itemçš„ç‰¹å¾å’Œç”¨æˆ·çš„åå¥½æ¨¡å‹åï¼Œéœ€è¦è®¡ç®—ä¸¤ä¸ªItemé—´çš„ç›¸ä¼¼åº¦ã€‚æ ¹æ®å…·ä½“åœºæ™¯ï¼Œå¾€å¾€éœ€è¦ä½¿ç”¨ä¸åŒçš„ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•ã€‚\n>  <font color=red>ç–‘é—®ï¼šç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ\n\nï¼ˆ3ï¼‰è¯„åˆ¤ç”¨æˆ·æ˜¯å¦å–œæ¬¢æŸä¸ªItemã€‚\n\nåœ¨æ¨èç®—æ³•ä¸­è¯„åˆ¤ç”¨æˆ·æ˜¯å¦å–œæ¬¢æŸä¸ªItemå°±æ˜¯ï¼šåˆ©ç”¨ç›‘ç£å­¦ä¹ æˆ–éç›‘ç£å­¦ä¹ çš„æ–¹æ³•ï¼Œæ¥è¯„åˆ¤ç”¨æˆ·å–œæ¬¢å“ªäº›Itemï¼Œä¸å–œæ¬¢å“ªäº›Itemï¼Œä»è€Œæ ¹æ®ç”¨æˆ·çš„å–œå¥½ï¼Œä¸ºä»–ç”Ÿæˆä¸€ä¸ªåå¥½æ¨¡å‹ï¼Œè¿›è€Œå¯¹æœªçŸ¥çš„Itemè¿›è¡Œå–œå¥½è¯„åˆ¤ã€‚\n\nåœ¨åŸºäºå†…å®¹çš„æ¨èç®—æ³•ä¸­ï¼Œä½¿ç”¨çš„åˆ™æ˜¯ç›‘ç£å­¦ä¹ ï¼Œåˆ©ç”¨ç”¨æˆ·å¯¹Itemçš„å·²çŸ¥è¯„åˆ†å’ŒItemæ‰€å±çš„ç±»åˆ«ï¼Œå­¦ä¹ å¾—åˆ°ç”¨æˆ·å¯¹æ¯ç§ç±»å‹çš„åå¥½ç¨‹åº¦ï¼Œç„¶åç»“åˆItemçš„ç±»åˆ«ç‰¹å¾è®¡ç®—ç”¨æˆ·å¯¹Itemçš„åå¥½ç¨‹åº¦ã€‚\n\n>  <font color=red>ç–‘é—®ï¼šç›‘ç£å­¦ä¹ å’Œéç›‘ç£å­¦ä¹ çš„åŒºåˆ«ï¼Ÿ\n## å®é™…æ¡ˆä¾‹\nåˆ©ç”¨åŸºäºå†…å®¹çš„æ¨èç®—æ³•ç¼–å†™ä¸€ä¸ªç”µå½±æ¨èç³»ç»Ÿï¼Œå½“ç”¨æˆ·åœ¨æµè§ˆæŸéƒ¨ç”µå½±æ—¶ï¼Œä¸ºå…¶æ¨èæ‰€æµè§ˆç”µå½±çš„ç›¸ä¼¼ç”µå½±ã€‚å…¶å®ç°æ­¥éª¤å¦‚ä¸‹ï¼š\n- æ„å»ºç”µå½±çš„ç‰¹å¾ä¿¡æ¯çŸ©é˜µ\n- æ„å»ºç”¨æˆ·çš„åå¥½ä¿¡æ¯\n- è®¡ç®—ç”¨æˆ·ä¸æ¯éƒ¨ç”µå½±çš„è·ç¦»\n\n> ä»‹äºç¯‡å¹…åŸç†è¿™é‡Œçš„å…·ä½“å®ç°æ­¥éª¤å’Œä»£ç ä¸å†èµ˜è¿°ï¼Œæ¬¢è¿å…³æ³¨ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ä¸€ä¹¦ã€‚\n# åŸºäºè¿‘é‚»çš„æ¨èç®—æ³•\nåŸºäºè¿‘é‚»çš„æ¨èç®—æ³•æ˜¯æ¯”è¾ƒåŸºç¡€çš„æ¨èç®—æ³•ï¼Œåœ¨å­¦æœ¯ç•Œå’Œå·¥ä¸šç•Œåº”ç”¨ååˆ†å¹¿æ³›ã€‚è¿™é‡Œè®¨è®ºçš„åŸºäºè¿‘é‚»çš„æ¨èç®—æ³•æŒ‡çš„æ˜¯ååŒè¿‡æ»¤ï¼ˆCollaborative Filteringï¼‰ç®—æ³•ã€‚\nåŸºäºè¿‘é‚»çš„ååŒè¿‡æ»¤æ¨èç®—æ³•åˆ†ä¸ºï¼š\n- åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤ï¼ˆUser-CF-Basedï¼‰ç®—æ³•\n- åŸºäºç‰©å“çš„ååŒè¿‡æ»¤ï¼ˆItem-CF-Basedï¼‰ç®—æ³•\n\nå…³äºååŒè¿‡æ»¤ï¼Œä¸€ä¸ªæœ€ç»å…¸çš„ä¾‹å­å°±æ˜¯çœ‹ç”µå½±ï¼šæœ‰æ—¶ä¸çŸ¥é“å“ªä¸€éƒ¨ç”µå½±æ˜¯æˆ‘ä»¬å–œæ¬¢çš„æˆ–è¯„åˆ†æ¯”è¾ƒé«˜çš„ï¼Œé€šå¸¸çš„åšæ³•å°±æ˜¯é—®é—®å‘¨å›´çš„æœ‹å‹ï¼Œçœ‹çœ‹æœ€è¿‘æœ‰ä»€ä¹ˆå¥½çš„ç”µå½±æ¨èã€‚åœ¨è¯¢é—®æ—¶ï¼Œéƒ½ä¹ æƒ¯äºé—®ä¸è‡ªå·±å“å‘³å·®ä¸å¤šçš„æœ‹å‹ï¼Œè¿™å°±æ˜¯ååŒè¿‡æ»¤çš„æ ¸å¿ƒæ€æƒ³ã€‚\n## UserCFç®—æ³•\n### åŸç†åˆ†æ\nåŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤é€šè¿‡ç”¨æˆ·çš„å†å²è¡Œä¸ºæ•°æ®å‘ç°ç”¨æˆ·å–œæ¬¢çš„ç‰©å“ï¼Œå¹¶å¯¹è¿™äº›åå¥½è¿›è¡Œåº¦é‡å’Œæ‰“åˆ†ï¼Œç„¶åæ ¹æ®ä¸åŒç”¨æˆ·å¯¹ç›¸åŒç‰©å“çš„è¯„åˆ†æˆ–åå¥½ç¨‹åº¦æ¥è¯„æµ‹ç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼æ€§ï¼Œå¯¹æœ‰ç›¸åŒåå¥½çš„ç”¨æˆ·è¿›è¡Œç‰©å“æ¨èã€‚\n\nç®€å•åœ°è®²ï¼ŒåŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤å°±æ˜¯ç»™ç”¨æˆ·æ¨èâ€œå’Œä»–å…´è¶£ç›¸æŠ•çš„å…¶ä»–ç”¨æˆ·â€å–œæ¬¢çš„ç‰©å“ã€‚\n\nå›¾5-5æ‰€ç¤ºæ˜¯ä¸€ä¸ªåŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤æ¨èçš„ä¾‹å­ï¼Œç”¨æˆ·Aå’Œç”¨æˆ·CåŒæ—¶å–œæ¬¢ç”µå½±Aå’Œç”µå½±Cï¼Œç”¨æˆ·Cè¿˜å–œæ¬¢ç”µå½±Dï¼Œå› æ­¤å°†ç”¨æˆ·Aæ²¡æœ‰è¡¨è¾¾å–œå¥½çš„ç”µå½±Dæ¨èç»™ç”¨æˆ·Aã€‚\n\nåˆå¦‚ï¼Œç°åœ¨æœ‰Aã€Bã€Cã€Då››ä¸ªç”¨æˆ·ï¼Œåˆ†åˆ«å¯¹aã€bã€cã€dã€eäº”ä¸ªç‰©å“è¡¨è¾¾äº†è‡ªå·±å–œå¥½ç¨‹åº¦ï¼ˆé€šè¿‡è¯„åˆ†çš„é«˜ä½æ¥è¡¨ç°è‡ªå·±çš„åå¥½ç¨‹åº¦é«˜ä½ï¼‰ï¼Œç°åœ¨è¦ä¸ºCç”¨æˆ·æ¨èç‰©å“ï¼š\nï¼ˆ1ï¼‰è®¡ç®—å¾—åˆ°Cç”¨æˆ·çš„ç›¸ä¼¼ç”¨æˆ·ï¼›\nï¼ˆ2ï¼‰æ‰¾åˆ°è¿™äº›ç›¸ä¼¼ç”¨æˆ·å–œæ¬¢çš„ä½†Cæ²¡æœ‰è¿›è¡Œè¿‡è¯„åˆ†çš„ç‰©å“å¹¶æ¨èç»™Cã€‚\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190710091525298.png\" width=70% /></center>\n\n### å®é™…æ¡ˆä¾‹\nåˆ©ç”¨UserCFç¼–å†™ä¸€ä¸ªç”µå½±æ¨èç³»ç»Ÿï¼Œæ ¹æ®è¢«æ¨èç”¨æˆ·çš„ç›¸ä¼¼ç”¨æˆ·çš„å–œå¥½ï¼Œä¸ºè¢«æ¨èç”¨æˆ·æ¨èç”µå½±ã€‚\n\n> ä»‹äºç¯‡å¹…åŸç†è¿™é‡Œçš„å…·ä½“å®ç°æ­¥éª¤å’Œä»£ç ä¸å†èµ˜è¿°ï¼Œæ¬¢è¿å…³æ³¨ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ä¸€ä¹¦ã€‚\n \n## ItemCFç®—æ³•\n### åŸç†åˆ†æ\nåŸºäºç‰©å“çš„ååŒè¿‡æ»¤æ¨èåˆ™é€šè¿‡ä¸åŒå¯¹itemçš„è¯„åˆ†æ¥è¯„æµ‹itemä¹‹é—´çš„ç›¸ä¼¼æ€§ï¼Œä»è€ŒåŸºäºitemçš„ç›¸ä¼¼æ€§åšæ¨èã€‚\n\nç®€å•åœ°è®²å°±æ˜¯ï¼Œç»™ç”¨æˆ·æ¨èä»–ä¹‹å‰å–œæ¬¢ç‰©å“çš„ç›¸ä¼¼ç‰©å“ã€‚ \n\nä»åŸç†ä¸Šç†è§£å¯ä»¥å¾—çŸ¥ï¼šåŸºäºitemçš„ååŒè¿‡æ»¤æ¨èå’Œè¢«æ¨èç”¨æˆ·çš„åå¥½æ²¡æœ‰ç›´æ¥å…³ç³»ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·Aä¹°äº†ä¸€æœ¬ä¹¦aï¼Œé‚£ä¹ˆä¼šç»™ç”¨æˆ·Aæ¨èä¸€äº›å’Œä¹¦aç›¸ä¼¼çš„ä¹¦ã€‚è¿™é‡Œè¦è€ƒè™‘çš„æ˜¯å¦‚ä½•è¡¡é‡ä¸¤æœ¬ä¹¦çš„ç›¸ä¼¼åº¦ã€‚\n\nå›¾5-8æ‰€ç¤ºæ˜¯ä¸€ä¸ªåŸºäºç‰©å“çš„ååŒè¿‡æ»¤æ¨èçš„ä¾‹å­ï¼Œç”¨æˆ·Cå–œæ¬¢ç”µå½±Aï¼Œç”µå½±Cå’Œç”µå½±Aç›¸ä¼¼ï¼Œé‚£ä¹ˆä¾¿æŠŠç”¨æˆ·Cæ²¡æœ‰è¡¨è¾¾å–œå¥½çš„ç”µå½±Cæ¨èç»™ç”¨æˆ·Cã€‚\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190710091806909.png\" width=70% ></center>\n\n### å®é™…æ¡ˆä¾‹\nåˆ©ç”¨ItemCFç®—æ³•ç¼–å†™ä¸€ä¸ªæ¨èç³»ç»Ÿï¼Œå½“ç”¨æˆ·è¿›è¡Œç”µå½±æµè§ˆæ—¶ï¼Œå‘ç”¨æˆ·æ¨èå’Œè¯¥éƒ¨ç”µå½±ç›¸ä¼¼çš„ç”µå½±ã€‚\n\n> ä»‹äºç¯‡å¹…åŸç†è¿™é‡Œçš„å…·ä½“å®ç°æ­¥éª¤å’Œä»£ç ä¸å†èµ˜è¿°ï¼Œæ¬¢è¿å…³æ³¨ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ä¸€ä¹¦ã€‚\n# å¯¹æ¯”åˆ†æ\n## UserCFä¸ItemCF\nä»ç”¨é€‚ç”¨åœºæ™¯ã€æ¨èç³»ç»Ÿå¤šæ ·æ€§ã€ç”¨æˆ·ç‰¹ç‚¹å¯¹æ¨èçš„å½±å“ä¸‰æ–¹é¢æ¥åˆ†æä¸‹ä¸¤è€…çš„å¯¹æ¯”ã€‚\n### åœ¨é€‚ç”¨åœºæ™¯ä¸Šçš„æ¯”è¾ƒ\nItemCFç®—æ³•åˆ©ç”¨ç‰©å“é—´çš„ç›¸ä¼¼æ€§æ¥æ¨èï¼Œæ‰€ä»¥å½“ç”¨æˆ·æ•°é‡è¿œè¿œè¶…è¿‡ç‰©å“æ•°é‡æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ItemCFç®—æ³•ã€‚ä¾‹å¦‚ï¼Œè´­ç‰©ç½‘ç«™å’ŒæŠ€æœ¯åšå®¢ç½‘ç«™çš„å•†å“æˆ–æ–‡ç« æ•°æ®ç›¸å¯¹ç¨³å®šï¼Œå› æ­¤è®¡ç®—ç‰©å“ç›¸ä¼¼åº¦æ—¶ä¸ä½†è®¡ç®—é‡å°ï¼Œè€Œä¸”ä¸å¿…é¢‘ç¹è¿›è¡Œæ›´æ–°ã€‚\n\nUserCFç®—æ³•åˆ©ç”¨ç”¨æˆ·é—´çš„ç›¸ä¼¼æ€§æ¥æ¨èï¼Œæ‰€ä»¥å½“ç‰©å“æ•°é‡è¿œè¿œè¶…è¿‡ç”¨æˆ·æ•°é‡æ—¶ï¼Œå¯ä»¥è€ƒè™‘UserCFç®—æ³•ã€‚UserCFç®—æ³•æ›´é€‚åˆæ–°é—»ç±»å’ŒçŸ­è§†é¢‘ç±»ç­‰å¿«æ¶ˆç´ æç½‘ç«™ã€‚ä¾‹å¦‚ï¼Œåœ¨ç¤¾äº¤ç½‘ç«™ä¸­ï¼ŒUserCFæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œè€Œä¸”å¯è§£é‡Šæ€§ä¹Ÿæ›´å¼ºã€‚å› ä¸ºè¿™ç±»ç½‘ç«™çš„å†…å®¹æ›´æ–°æ¯”è¾ƒé¢‘ç¹ï¼Œä¸”ç”¨æˆ·æ›´åŠ æ³¨é‡ç¤¾ä¼šåŒ–çƒ­ç‚¹ã€‚\n\n> <font color=red>ä¸¾ä¾‹ï¼šç•¥ï½\n\n### åœ¨æ¨èç³»ç»Ÿå¤šæ ·æ€§ä¸Šçš„æ¯”è¾ƒ\nå•ç”¨æˆ·çš„å¤šæ ·æ€§æ–¹é¢ï¼šItemCFç®—æ³•ä¸å¦‚UserCFç®—æ³•å¤šæ ·æ€§ä¸°å¯Œã€‚å› ä¸ºï¼ŒItemCFç®—æ³•æ¨èçš„æ˜¯å’Œä¹‹å‰æœ‰è¡Œä¸ºç‰©å“çš„ç›¸ä¼¼ç‰©å“ï¼Œç‰©å“è¦†ç›–é¢æ¯”è¾ƒå°ï¼Œä¸°å¯Œåº¦ä½ã€‚\n\nç³»ç»Ÿçš„å¤šæ ·æ€§æ–¹é¢ï¼šItemCFç®—æ³•çš„å¤šæ ·æ€§è¦è¿œè¿œå¥½äºUserCFç®—æ³•ã€‚å› ä¸ºï¼ŒUserCFç®—æ³•æ›´åŠ æ³¨é‡æ¨èçƒ­é—¨ç‰©å“ã€‚\n\nItemCFç®—æ³•çš„æ¨èæœ‰å¾ˆå¥½çš„æ–°é¢–æ€§ï¼Œå®¹æ˜“å‘ç°å¹¶æ¨èé•¿å°¾é‡Œçš„ç‰©å“ã€‚æ‰€ä»¥å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒItemCFç®—æ³•çš„ç²¾åº¦ç¨å¾®å°äºUserCFç®—æ³•ã€‚å¦‚æœè€ƒè™‘å¤šæ ·æ€§ï¼ŒItemCFç®—æ³•æ¯”UserCFç®—æ³•å¥½å¾ˆå¤šã€‚è€ŒItemCFç®—æ³•åªæ¨èAé¢†åŸŸç»™ç”¨æˆ·ï¼Œè¿™æ ·æœ‰é™çš„æ¨èåˆ—è¡¨ä¸­å°±å¯èƒ½åŒ…å«äº†ä¸€å®šæ•°é‡çš„ä¸çƒ­é—¨çš„é•¿å°¾ç‰©å“ã€‚\n\nç”±äºUserCFç®—æ³•ç»å¸¸æ¨èçƒ­é—¨çš„ç‰©å“ï¼Œæ‰€ä»¥å®ƒåœ¨æ¨èé•¿å°¾é‡Œçš„ç‰©å“æ–¹é¢èƒ½åŠ›ä¸è¶³ã€‚\n### åœ¨ç”¨æˆ·ç‰¹ç‚¹ä¸Šçš„æ¯”è¾ƒ\nï¼ˆ1ï¼‰UserCFç®—æ³•æ¨èçš„åŸåˆ™æ˜¯â€œå‡è®¾ç”¨æˆ·å–œæ¬¢é‚£äº›å’Œä»–æœ‰ç›¸åŒå–œå¥½çš„ç”¨æˆ·å–œæ¬¢çš„ä¸œè¥¿â€ã€‚ä½†æ˜¯ï¼Œå¦‚æœç”¨æˆ·æš‚æ—¶æ‰¾ä¸åˆ°å…´è¶£ç›¸åŒçš„é‚»å±…ï¼Œé‚£ä¹ˆåŸºäºç”¨æˆ·çš„æ¨èæ•ˆæœå°±æ‰“äº†å¤§æ‰“æŠ˜æ‰£äº†ã€‚\nå› æ­¤ï¼Œç”¨æˆ·æ˜¯å¦é€‚åº”UserCFï¼Œä¸â€œä»–æœ‰å¤šå°‘é‚»å±…â€æ˜¯æˆæ­£æ¯”çš„ã€‚\nï¼ˆ2ï¼‰ åŸºäºç‰©å“çš„ååŒè¿‡æ»¤ç®—æ³•çš„å‰ææ˜¯â€œç”¨æˆ·å–œæ¬¢å’Œä»–ä»¥å‰è´­ä¹°è¿‡çš„ç‰©å“ç±»å‹ç›¸åŒçš„ç‰©å“â€ï¼Œå¯ä»¥è®¡ç®—ä¸€ä¸ªç”¨æˆ·å–œæ¬¢çš„ç‰©å“çš„è‡ªç›¸ä¼¼åº¦ã€‚\n- ä¸€ä¸ªç”¨æˆ·å–œæ¬¢ç‰©å“çš„è‡ªç›¸ä¼¼åº¦å¤§ï¼Œå³ç”¨æˆ·å–œæ¬¢çš„ç‰©å“çš„ç›¸å…³åº¦å¤§ï¼Œåˆ™è¯´æ˜ä»–å–œæ¬¢çš„ä¸œè¥¿æ˜¯æ¯”è¾ƒç›¸ä¼¼çš„ã€‚å³ï¼Œè¿™ä¸ªç”¨æˆ·æ¯”è¾ƒç¬¦åˆItemCFç®—æ³•çš„åŸºæœ¬å‡è®¾ï¼Œä»–å¯¹ItemCFç®—æ³•çš„é€‚åº”åº¦æ¯”è¾ƒå¥½ã€‚\n- åä¹‹ï¼Œå¦‚æœè‡ªç›¸ä¼¼åº¦å°ï¼Œå³ç”¨æˆ·å–œæ¬¢ç‰©å“çš„ç›¸å…³åº¦å°ï¼Œå°±è¯´æ˜è¿™ä¸ªç”¨æˆ·çš„å–œå¥½ä¹ æƒ¯å¹¶ä¸æ»¡è¶³ItemCFç®—æ³•çš„åŸºæœ¬å‡è®¾ï¼Œé‚£ä¹ˆç”¨ItemCFç®—æ³•æ‰€åšå‡ºçš„æ¨èå¯¹äºè¿™ç§ç”¨æˆ·æ¥è¯´æ•ˆæœå¯èƒ½ä¸æ˜¯å¾ˆå¥½ã€‚\n## åŸºäºå†…å®¹ä¸åŸºäºè¿‘é‚»\nåŸºäºå†…å®¹ï¼ˆContent-Basedï¼ŒCBï¼‰çš„æ¨èç®—æ³•å’ŒåŸºäºç‰©å“ï¼ˆItem-Basedï¼ŒIBï¼‰çš„ååŒè¿‡æ»¤ç®—æ³•ååˆ†ç›¸ä¼¼ï¼Œå› ä¸ºä¸¤ç§ç®—æ³•éƒ½åœ¨Itemçš„åŸºç¡€ä¸Šè¿›è¡Œç›¸ä¼¼åº¦è®¡ç®—ã€‚\nä½†æ˜¯ä¸¤è€…åŸºäºçš„Itemç‰¹å¾æ˜¯ä¸ä¸€æ ·çš„ï¼š\n- åŸºäºå†…å®¹çš„æ¨èç®—æ³•ä¸­ï¼Œè®¡ç®—ç”¨æˆ·ç›¸ä¼¼åº¦ç”¨çš„æ˜¯Itemæœ¬èº«çš„ç‰¹å¾ã€‚\n- åŸºäºç‰©å“çš„ååŒè¿‡æ»¤ç®—æ³•ä¸­ï¼Œåˆ™ç”¨â€œç”¨æˆ·å¯¹Itemçš„è¡Œä¸ºâ€æ¥æ„é€ Itemçš„ç‰¹å¾ã€‚\n\n> <font color=red>ä¸¾ä¾‹ï¼šç•¥ï½\n\n# åŸºäºéšè¯­ä¹‰æ¨¡å‹çš„æ¨èç®—æ³•\n## åŸç†åˆ†æ\nä»çŸ©é˜µçš„è§’åº¦æ¥ç†è§£ï¼ŒLFMåŸç†çŸ©é˜µè¡¨ç¤ºå›¾å¦‚å›¾5-12æ‰€ç¤ºã€‚\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20190710232811778.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n- RçŸ©é˜µè¡¨ç¤ºç”¨æˆ·å¯¹ç‰©å“çš„åå¥½ä¿¡æ¯ã€‚å…¶ä¸­ï¼ŒR_ijä»£è¡¨User iå¯¹Item jçš„å…´è¶£åº¦ã€‚\n- PçŸ©é˜µè¡¨ç¤ºç”¨æˆ·å¯¹å„ç‰©å“ç±»åˆ«çš„ä¸€ä¸ªåå¥½ä¿¡æ¯ã€‚å…¶ä¸­ï¼ŒP_ijä»£è¡¨User iå¯¹Class jçš„å…´è¶£åº¦ã€‚\n- QçŸ©é˜µè¡¨ç¤ºå„ä¸ªç‰©å“å½’å±åˆ°å„ä¸ªç±»åˆ«çš„ä¿¡æ¯ã€‚å…¶ä¸­ï¼ŒQ_ijä»£è¡¨Item jåœ¨Class iä¸­çš„æƒé‡æˆ–æ¦‚ç‡ã€‚\néšè¯­ä¹‰æ¨¡å‹å°±æ˜¯è¦å°†çŸ©é˜µRåˆ†è§£ä¸ºPå’ŒQçš„ä¹˜ç§¯ï¼Œå³é€šè¿‡çŸ©é˜µä¸­çš„ç‰©å“ç±»åˆ«ï¼ˆClassï¼‰å°†ç”¨æˆ·Userå’Œç‰©å“Itemè”ç³»èµ·æ¥ã€‚å®é™…ä¸Šéœ€è¦æ ¹æ®ç”¨æˆ·å½“å‰çš„ç‰©å“åå¥½ä¿¡æ¯Rè¿›è¡Œè®¡ç®—ï¼Œä»è€Œå¾—åˆ°å¯¹åº”çš„çŸ©é˜µPå’ŒçŸ©é˜µQã€‚\nä»ä¸Šè¿°çŸ©é˜µè½¬æ¢å…³ç³»ä¸­å¯ä»¥å¾—åˆ°éšè¯­ä¹‰æ¨¡å‹è®¡ç®—ç”¨æˆ·å¯¹ç‰©å“å…´è¶£åº¦çš„å…¬å¼ï¼š\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20190710232939793.png)\nå…¶ä¸­å‚æ•°è¯´æ˜å¦‚ä¸‹ã€‚\n- Pu,kï¼šç”¨æˆ·uå…´è¶£å’Œç¬¬kä¸ªéšç±»çš„å…³ç³»ã€‚\n- Qi,kï¼šç¬¬kä¸ªéšç±»å’Œç‰©å“içš„å…³ç³»ã€‚\n- kï¼šéšç±»çš„æ•°é‡ã€‚\n- Rï¼šç”¨æˆ·å¯¹ç‰©å“çš„å…´è¶£åº¦ã€‚\n\n> <font color=red>ç–‘é—®ï¼šLFMè§£å†³çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼ŸLFMçš„æ ·æœ¬é›†é—®é¢˜ï¼ŸLFMçš„æ¨å¯¼ï¼ŸLFMçš„ä¼˜ç¼ºç‚¹ï¼Ÿè¯·æŒç»­å…³æ³¨ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹\n\n## å®é™…æ¡ˆä¾‹\nç¼–å†™ä¸€ä¸ªåŸºäºéšè¯­ä¹‰æ¨¡å‹çš„ç”µå½±æ¨èç³»ç»Ÿã€‚å½“ç”¨æˆ·åœ¨æµè§ˆç”µå½±å¹¶è¡¨è¾¾è‡ªå·±çš„å…´è¶£åï¼Œç³»ç»Ÿå‘ç”¨æˆ·æ¨èç”¨æˆ·å¯èƒ½å–œæ¬¢çš„ç”µå½±ã€‚\nå…¶å®ç°æ€è·¯å¦‚ä¸‹ï¼š\nï¼ˆ1ï¼‰åˆå§‹åŒ–ç”¨æˆ·å¯¹æ¯ä¸ªéšåˆ†ç±»çš„å…´è¶£åº¦çŸ©é˜µPï¼Œä»¥åŠæ¯ä¸ªç‰©å“ä¸æ¯ä¸ªéšåˆ†ç±»çš„åŒ¹é…ç¨‹åº¦çŸ©é˜µQï¼›\nï¼ˆ2ï¼‰æ ¹æ®è®­ç»ƒæ•°æ®é›†æŒ‡å®šæŸå¤±å‡½æ•°ï¼Œè¿­ä»£æ›´æ–°çŸ©é˜µPå’ŒQï¼›\nï¼ˆ3ï¼‰ä½¿ç”¨æµ‹è¯•æœºå¯¹æ¨¡å‹ç»“æœè¿›è¡Œæµ‹è¯•ã€‚\n\n> ç”±äºç¯‡å¹…åŸå› ï¼Œå…·ä½“çš„ä»£ç å®ç°å’Œè¿‡ç¨‹ï¼Œè¿™é‡Œä¸è¿‡å¤šä»‹ç»ï¼Œè¯·å‚è€ƒã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹\n\n-----\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n\n\n---\n<font color=red>æ³¨ï¼šã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹æ˜¯å°ç¼–è¿‘æœŸè¦ä¸Šçš„ä¸€æœ¬å›¾ä¹¦ï¼Œé¢„è®¡æœ¬æœˆï¼ˆ7æœˆæœ«ï¼‰å¯åœ¨äº¬ä¸œï¼Œå½“å½“ä¸Šçº¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è¿›è¡Œå…³æ³¨ï¼</font>\n<center><img src=\"https://img-blog.csdnimg.cn/20190708234949217.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=50% /></center>\n","tags":["æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹3ã€æ¨èç³»ç»Ÿçš„çµé­‚ä¼´ä¾£-æ•°æ®æŒ–æ˜","url":"/2019/07/10/RecSys/æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜/ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹3ã€æ¨èç³»ç»Ÿçš„çµé­‚ä¼´ä¾£-æ•°æ®æŒ–æ˜/","content":"\n> ä¸ªæ€§åŒ–æ¨èæ˜¯æ•°æ®æŒ–æ˜ï¼ˆData Miningï¼‰ä¸­çš„ä¸€ä¸ªç›®çš„æ˜ç¡®çš„åº”ç”¨åœºæ™¯ï¼Œæ‰€ä»¥ï¼Œå¯ä»¥åˆ©ç”¨æ•°æ®æŒ–æ˜æŠ€æœ¯ä¸ºæ¨èç³»ç»Ÿåšä¸€äº›åŸºæœ¬å·¥ä½œï¼Œå¦‚äº†è§£æ•°æ®ã€å¼‚å¸¸å€¼å¤„ç†ã€å¯¹ç”¨æˆ·ç¾¤è¿›è¡Œåˆ†ç±»ã€å¯¹ç‰©å“çš„ä»·æ ¼è¿›è¡Œèšç±»ã€æ„å»ºç”¨æˆ·çš„ä»·æ ¼æ®µåå¥½ç­‰ï¼Œä»è€Œè®©æ¨èç³»ç»Ÿèƒ½å¤Ÿâ€œåƒäººåƒé¢â€ã€‚æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»ä¸€ä¸‹å¸¸è§çš„æ•°æ®æŒ–æ˜ç®—æ³•åº”ç”¨æ¡ˆä¾‹ã€‚\n\n<!--More-->\n\n---\n\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/95162286\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\nä¸ªäººç½‘ç«™ï¼šhttp://thinkgamer.github.io\n\n---\n\n# æ•°æ®é¢„å¤„ç†\næ•°æ®é¢„å¤„ç†ï¼ˆData Preprocessingï¼‰æ˜¯æŒ‡ï¼šåœ¨ä½¿ç”¨æ•°æ®è¿›è¡Œå»ºæ¨¡æˆ–åˆ†æä¹‹å‰ï¼Œå¯¹å…¶è¿›è¡Œä¸€å®šçš„å¤„ç†ã€‚çœŸå®ç¯å¢ƒä¸­äº§ç”Ÿçš„æ•°æ®å¾€å¾€éƒ½æ˜¯ä¸å®Œæ•´ã€ä¸ä¸€è‡´çš„â€œè„æ•°æ®â€ï¼Œæ— æ³•ç›´æ¥ç”¨æ¥å»ºæ¨¡æˆ–è¿›è¡Œæ•°æ®åˆ†æã€‚ä¸ºäº†æé«˜æ•°æ®æŒ–æ˜è´¨é‡ï¼Œéœ€è¦å…ˆå¯¹æ•°æ®è¿›è¡Œä¸€å®šçš„å¤„ç†ã€‚\n\nå¸¸è§çš„æ•°æ®é¢„å¤„ç†åŒ…æ‹¬ï¼šæ ‡å‡†åŒ–ã€ç¦»æ•£åŒ–ã€æŠ½æ ·ã€é™ç»´ã€å»å™ªç­‰ã€‚\n## æ•°æ®æ ‡å‡†åŒ–\næ•°æ®æ ‡å‡†åŒ–ï¼ˆNormalizationï¼‰æ˜¯æŒ‡ï¼šå°†æ•°æ®æŒ‰ç…§ä¸€å®šçš„æ¯”ä¾‹è¿›è¡Œç¼©æ”¾ï¼Œä½¿å…¶è½å…¥ä¸€ä¸ªç‰¹å®šçš„å°åŒºé—´ã€‚å…¶ä¸­ï¼Œæœ€å…¸å‹çš„å°±æ˜¯æ•°æ®çš„å½’ä¸€åŒ–å¤„ç†ï¼Œå³å°†æ•°æ®ç»Ÿä¸€æ˜ å°„åˆ°0ï½1ä¹‹é—´ã€‚\n> æ•°æ®æ ‡å‡†åŒ–çš„å¥½å¤„æœ‰ï¼šåŠ å¿«æ¨¡å‹çš„æ”¶æ•›é€Ÿåº¦ï¼Œæé«˜æ¨¡å‹çš„ç²¾åº¦ã€‚\n\nå¸¸è§çš„æ•°æ®æ ‡å‡†åŒ–æ–¹æ³•åŒ…æ‹¬ï¼š\n- Min-Maxæ ‡å‡†åŒ–\nMin-Maxæ ‡å‡†åŒ–æ˜¯æŒ‡å¯¹åŸå§‹æ•°æ®è¿›è¡Œçº¿æ€§å˜æ¢ï¼Œå°†å€¼æ˜ å°„åˆ°[0,1]ä¹‹é—´ã€‚å…¶è®¡ç®—å…¬å¼ä¸ºï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/20190709083829394.png\" ></center>\nå¼ä¸­ï¼Œxä¸ºåŸå§‹æ•°æ®ä¸­çš„ä¸€ä¸ªæ•°æ®ï¼Œx_minè¡¨ç¤ºåŸå§‹æ•°æ®ä¸­çš„æœ€å°å€¼ï¼Œx_maxè¡¨ç¤ºåŸå§‹æ•°æ®ä¸­çš„æœ€å¤§å€¼ï¼Œx'ä¸ºMin-Maxæ ‡å‡†åŒ–åçš„æ•°æ®ã€‚\n\n- Z-Scoreæ ‡å‡†åŒ–\nZ-Scoreï¼ˆä¹Ÿå«Standard Scoreï¼Œæ ‡å‡†åˆ†æ•°ï¼‰æ ‡å‡†åŒ–æ˜¯æŒ‡ï¼šåŸºäºåŸå§‹æ•°æ®çš„å‡å€¼ï¼ˆmeanï¼‰å’Œæ ‡å‡†å·®ï¼ˆstandard deviationï¼‰æ¥è¿›è¡Œæ•°æ®çš„æ ‡å‡†åŒ–ã€‚Z-Scoreæ ‡å‡†åŒ–çš„è®¡ç®—å…¬å¼ä¸ºï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190709083909697.png\" ></center>\nå¼ä¸­ï¼Œxä¸ºåŸå§‹æ•°æ®ä¸­çš„ä¸€ä¸ªæ•°æ®ï¼ŒÎ¼è¡¨ç¤ºåŸå§‹æ•°æ®çš„å‡å€¼ï¼ŒÏƒè¡¨ç¤ºåŸå§‹æ•°æ®çš„æ ‡å‡†å·®ï¼Œx'ä¸ºZ-Scoreæ ‡å‡†åŒ–åçš„æ•°æ®ã€‚\n\n- å°æ•°å®šæ ‡ï¼ˆDecimal scalingï¼‰æ ‡å‡†åŒ–\nå°æ•°å®šæ ‡æ ‡å‡†åŒ–æ˜¯æŒ‡ï¼šé€šè¿‡ç§»åŠ¨å°æ•°ç‚¹çš„ä½ç½®æ¥è¿›è¡Œæ•°æ®çš„æ ‡å‡†åŒ–ã€‚å°æ•°ç‚¹ç§»åŠ¨çš„ä½æ•°å–å†³äºåŸå§‹æ•°æ®ä¸­çš„æœ€å¤§ç»å¯¹å€¼ã€‚å°æ•°å®šæ ‡æ ‡å‡†åŒ–çš„è®¡ç®—å…¬å¼ä¸ºï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190709084036701.png\" ></center>\n\nä¾‹å¦‚ï¼Œä¸€ç»„æ•°æ®ä¸º[-309, -10, -43,87,344,970]ï¼Œå…¶ä¸­ç»å¯¹å€¼æœ€å¤§çš„æ˜¯970ã€‚ä¸ºä½¿ç”¨å°æ•°å®šæ ‡æ ‡å‡†åŒ–ï¼Œç”¨1000ï¼ˆå³j=3ï¼‰é™¤ä»¥æ¯ä¸ªå€¼ã€‚è¿™æ ·ï¼Œ-309è¢«æ ‡å‡†åŒ–ä¸º-0.309ï¼Œ970è¢«æ ‡å‡†åŒ–ä¸º0.97ã€‚\n- å‡å€¼å½’ä¸€åŒ–æ³•\nå‡å€¼å½’ä¸€åŒ–æ˜¯æŒ‡ï¼šé€šè¿‡åŸå§‹æ•°æ®ä¸­çš„å‡å€¼ã€æœ€å¤§å€¼å’Œæœ€å°å€¼æ¥è¿›è¡Œæ•°æ®çš„æ ‡å‡†åŒ–ã€‚å‡å€¼å½’ä¸€åŒ–æ³•çš„è®¡ç®—å…¬å¼ä¸ºï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190709084107869.png\" ></center>\n\n- å‘é‡å½’ä¸€åŒ–\nå‘é‡å½’ä¸€åŒ–æ˜¯æŒ‡ï¼šé€šè¿‡ç”¨åŸå§‹æ•°æ®ä¸­çš„æ¯ä¸ªå€¼é™¤ä»¥æ‰€æœ‰æ•°æ®ä¹‹å’Œæ¥è¿›è¡Œæ•°æ®çš„æ ‡å‡†åŒ–ã€‚å‘é‡å½’ä¸€åŒ–çš„è®¡ç®—å…¬å¼ä¸ºï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190709084122912.png\" ></center>\n\n- æŒ‡æ•°è½¬æ¢\næŒ‡æ•°è½¬æ¢æ˜¯æŒ‡ï¼šé€šè¿‡å¯¹åŸå§‹æ•°æ®çš„å€¼è¿›è¡Œç›¸åº”çš„æŒ‡æ•°å‡½æ•°å˜æ¢æ¥è¿›è¡Œæ•°æ®çš„æ ‡å‡†åŒ–ã€‚å¸¸è§çš„å‡½æ•°æ–¹æ³•æœ‰lgå‡½æ•°ã€Softmaxå‡½æ•°å’ŒSigmoidå‡½æ•°ã€‚\n\n<font color=red>ç”±äºç¯‡å¹…åŸå› ï¼Œæ•°æ®æ ‡å‡†åŒ–çš„å…·ä½“å®ç°ä¸è´´ä»£ç äº†ï¼Œå¯åœ¨ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ä¸€ä¹¦ä¸­æ‰¾åˆ°æ‰¾åˆ°ï¼</font>\n## æ•°æ®ç¦»æ•£åŒ–\næ•°æ®ç¦»æ•£åŒ–ï¼ˆä¹Ÿå«æ•°æ®åˆ†ç»„ï¼‰æ˜¯æŒ‡å°†è¿ç»­çš„æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œä½¿å…¶å˜ä¸ºä¸€æ®µæ®µç¦»æ•£åŒ–çš„åŒºé—´ã€‚\næ ¹æ®ç¦»æ•£åŒ–è¿‡ç¨‹ä¸­æ˜¯å¦è€ƒè™‘ç±»åˆ«å±æ€§ï¼Œå¯ä»¥å°†ç¦»æ•£åŒ–ç®—æ³•åˆ†ä¸ºæœ‰ç›‘ç£ç®—æ³•å’Œæ— ç›‘ç£ç®—æ³•ä¸¤ç±»ã€‚ç”±äºæœ‰ç›‘ç£ç®—æ³•ï¼ˆå¦‚åŸºäºç†µè¿›è¡Œæ•°æ®çš„ç¦»æ•£åŒ–ï¼‰å……åˆ†åˆ©ç”¨äº†ç±»åˆ«å±æ€§çš„ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨åˆ†ç±»ä¸­èƒ½è·å¾—è¾ƒé«˜çš„æ­£ç¡®ç‡ã€‚\nå¸¸è§çš„æ•°æ®ç¦»æ•£åŒ–æ–¹æ³•æœ‰ä»¥ä¸‹å‡ ç§ï¼š\n- ç­‰å®½åˆ†ç»„\n- ç­‰é¢‘åˆ†ç»„\n- å•å˜é‡åˆ†ç»„\n- åŸºäºä¿¡æ¯ç†µåˆ†ç»„\n\n<font color=red>ç”±äºç¯‡å¹…åŸå› ï¼ŒåŸºäºä¿¡æ¯ç†µçš„æ•°æ®ç¦»æ•£åŒ–å®ä¾‹è¿™é‡Œè´´ä»£ç äº†ï¼Œå¯åœ¨ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ä¸€ä¹¦ä¸­æ‰¾åˆ°!</font>\n## æ•°æ®æŠ½æ ·\næ•°æ®æŠ½æ ·ä¹Ÿå«æ•°æ®é‡‡æ ·ã€‚æ•°æ®æŠ½æ ·æ˜¯é€‰æ‹©æ•°æ®å­é›†å¯¹è±¡çš„ä¸€ç§å¸¸ç”¨æ–¹æ³•ã€‚\n- åœ¨ç»Ÿè®¡å­¦ä¸­ï¼ŒæŠ½æ ·çš„ç›®çš„æ˜¯å®ç°æ•°æ®çš„è°ƒæŸ¥å’Œåˆ†æã€‚\n- åœ¨æ•°æ®æŒ–æ˜ä¸­ï¼ŒæŠ½æ ·çš„ç›®çš„æ˜¯å‹ç¼©æ•°æ®é‡ï¼Œå‡å°æ•°æ®æŒ–æ˜ç®—æ³•çš„èµ„æºå¼€é”€ã€‚\n\nåœ¨æ•°æ®æŒ–æ˜ä¸­ï¼ŒæŠ½æ ·ä¸»è¦æ˜¯ä»æµ·é‡æ•°æ®ä¸­äº§ç”Ÿè®­ç»ƒé›†ï¼ˆTrain Setï¼‰ã€æµ‹è¯•é›†ï¼ˆTest Setï¼‰å’ŒéªŒè¯é›†ï¼ˆValidation Setï¼‰ã€‚è®­ç»ƒé›†ã€æµ‹è¯•é›†å’ŒéªŒè¯é›†ä¸‰è€…çš„åŒºåˆ«å¦‚ä¸‹ï¼š\n- è®­ç»ƒé›†ç”¨æ¥è¿›è¡Œæ¨¡å‹è®­ç»ƒã€‚\n- æµ‹è¯•é›†ç”¨æ¥è¡¡é‡æ¨¡å‹çš„ä¸€äº›ç»Ÿè®¡æŒ‡æ ‡ï¼Œå¦‚å‡†ç¡®ç‡ã€å¬å›ç‡ç­‰ã€‚åœ¨è®­ç»ƒæ¨¡å‹çš„è¿‡ç¨‹ä¸­ä¸å…è®¸ä½¿ç”¨æµ‹è¯•é›†ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ¨¡å‹è¿‡æ‹Ÿåˆã€‚\néªŒè¯é›†ç”¨æ¥éªŒè¯æ¨¡å‹ã€è¾…åŠ©æ„å»ºæ¨¡å‹ã€‚åœ¨ä½¿ç”¨æœºå™¨å­¦ä¹ ç®—æ³•æ—¶ï¼ŒéªŒè¯é›†æ˜¯å¯é€‰çš„ã€‚\n> â€œè¿‡æ‹Ÿåˆâ€è¡¨ç¤ºï¼šæ¨¡å‹å­¦ä¹ ç‰¹å¾è¿‡äºå½»åº•æ—¶ï¼Œå™ªå£°æ•°æ®ä¹Ÿä¼šè¿›å…¥æ¨¡å‹ï¼Œå¯¼è‡´åæœŸæµ‹è¯•æ—¶ä¸èƒ½å¾ˆå¥½åœ°è¯†åˆ«æ•°æ®ï¼Œæ³›åŒ–èƒ½åŠ›å¤ªå·®ã€‚â€œæ¬ æ‹Ÿåˆâ€è¡¨ç¤ºï¼šæ²¡æœ‰å¾ˆå¥½åœ°æ•æ‰åˆ°æ•°æ®ç‰¹å¾ï¼Œä¸èƒ½å¾ˆå¥½åœ°æ‹Ÿåˆæ•°æ®ã€‚\n\nå¸¸è§çš„æ•°æ®æŠ½æ ·æ–¹æ³•åŒ…æ‹¬ï¼š\n- éšæœºæŠ½æ ·\n- åˆ†å±‚æŠ½æ ·\n- ç³»ç»ŸæŠ½æ ·\n- æ¸è¿›æŠ½æ ·\n\n## æ•°æ®é™ç»´\nåœ¨æ„å»ºæœºå™¨å­¦ä¹ æ¨¡å‹æ—¶ï¼Œæœ‰æ—¶ç‰¹å¾æ˜¯æå…¶å¤æ‚çš„ï¼Œå½“ç‰¹å¾çš„ç»´åº¦è¾¾åˆ°å‡ åƒç»´æ—¶ï¼Œæ¨¡å‹è®­ç»ƒå°†ä¼šè€—è´¹å¤§é‡çš„æ—¶é—´ã€‚å¦å¤–ï¼Œå¦‚æœç‰¹å¾è¾ƒå¤šï¼Œè¿˜ä¼šå‡ºç°å¤šé‡å…±çº¿æ€§ã€ç¨€ç–æ€§çš„é—®é¢˜ã€‚\nå› æ­¤ï¼Œéœ€è¦ç®€åŒ–å±æ€§ã€å»å™ªã€å»å†—ä½™ï¼Œä»¥æ±‚å–æ›´å…¸å‹çš„å±æ€§ï¼Œä½†åŒæ—¶åˆå¸Œæœ›ä¸æŸå¤±æ•°æ®æœ¬èº«çš„æ„ä¹‰ï¼Œè¿™æ—¶å°±éœ€è¦å¯¹ç‰¹å¾è¿›è¡Œé™ç»´ã€‚\n\næ•°æ®é™ç»´åˆ†ä¸ºçº¿æ€§é™ç»´å’Œéçº¿æ€§é™ç»´ã€‚\n- çº¿æ€§é™ç»´ï¼šåˆ†ä¸ºä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰ã€çº¿æ€§åˆ¤æ–­åˆ†æï¼ˆLDAï¼‰ã€‚\n- éçº¿æ€§é™ç»´ï¼šåˆ†ä¸ºåŸºäºæ ¸å‡½æ•°çš„KPCAã€KICAã€KDAå’ŒåŸºäºç‰¹å¾å€¼çš„ISOMAPã€LLEã€LEã€LPPã€LTSAã€MVUç­‰ã€‚\n## æ•°æ®æ¸…ç†\nâ€œè„æ•°æ®â€å¯¹ç®—æ³•æ¨¡å‹çš„ç›´æ¥å½±å“æ˜¯ä¸èƒ½è¢«ä½¿ç”¨ï¼Œé—´æ¥å½±å“æ˜¯é™ä½æ¨¡å‹çš„ç²¾åº¦ã€‚è¿™ç§æƒ…å†µä¸‹å°±éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ¸…ç†ï¼ŒåŒ…æ‹¬ï¼ˆä½†ä¸å±€é™äºï¼‰ï¼šä¸åˆæ ¼æ•°æ®ä¿®æ­£ã€ç¼ºå¤±å€¼å¡«å……ã€å™ªå£°å€¼å¤„ç†ã€ç¦»ç¾¤ç‚¹å¤„ç†ã€‚\n\n- ä¸åˆæ ¼æ•°æ®ä¿®æ­£\n- ç¼ºå¤±å€¼å¡«å……\n-  å™ªå£°å€¼å¤„ç†\n- ç¦»ç¾¤ç‚¹å¤„ç†\n## ç›¸ä¼¼åº¦è®¡ç®—\nç›¸ä¼¼åº¦è®¡ç®—åœ¨æ•°æ®æŒ–æ˜å’Œæ¨èç³»ç»Ÿä¸­æœ‰ç€å¹¿æ³›çš„åº”ç”¨åœºæ™¯ã€‚ä¾‹å¦‚ï¼š\n- åœ¨ååŒè¿‡æ»¤ç®—æ³•ä¸­ï¼Œåˆ©ç”¨ç›¸ä¼¼åº¦è®¡ç®—ç”¨æˆ·ä¹‹é—´æˆ–ç‰©å“ä¹‹é—´çš„ç›¸ä¼¼åº¦ã€‚\n- åœ¨åˆ©ç”¨k-meansè¿›è¡Œèšç±»æ—¶ï¼Œåˆ©ç”¨ç›¸ä¼¼åº¦è®¡ç®—å…¬å¼è®¡ç®—ä¸ªä½“åˆ°ç°‡ç±»ä¸­å¿ƒçš„è·ç¦»ï¼Œè¿›è€Œåˆ¤æ–­ä¸ªä½“æ‰€å±çš„ç±»åˆ«ã€‚\n- åˆ©ç”¨KNNè¿›è¡Œåˆ†ç±»æ—¶ï¼Œåˆ©ç”¨ç›¸ä¼¼åº¦è®¡ç®—ä¸ªä½“ä¸å·²çŸ¥ç±»åˆ«ä¹‹é—´çš„ç›¸ä¼¼æ€§ï¼Œä»è€Œåˆ¤æ–­ä¸ªä½“æ‰€å±çš„ç±»åˆ«ç­‰ã€‚\nä¸‹é¢å°†ä¾æ¬¡ä»‹ç»å¸¸è§çš„ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•ã€‚\n- æ¬§å¼è·ç¦»\n- æ›¼å“ˆé¡¿è·ç¦»\n- åˆ‡æ¯”é›ªå¤«è·ç¦»\n- é©¬æ°è·ç¦»\n- å¤¹äº¤ä½™å¼¦è·ç¦»\n- æ°å¡å¾·ç›¸ä¼¼ç³»æ•°ä¸æ°å¡å¾·è·ç¦»\n- ç›¸å…³ç³»æ•°ä¸ç›¸å…³è·ç¦»\n# æ•°æ®åˆ†ç±»\nåˆ†ç±»ç®—æ³•æ˜¯æ•°æ®æŒ–æ˜ä¸­å¸¸ç”¨çš„åŸºæœ¬ç®—æ³•ä¹‹ä¸€ï¼Œå±äºæœ‰ç›‘ç£å­¦ä¹ ç®—æ³•ï¼ˆSupervised Learningï¼‰ã€‚\nåœ¨å®é™…åº”ç”¨åœºæ™¯ä¸­ï¼Œå¾€å¾€åˆ©ç”¨åˆ†ç±»ç®—æ³•å¯¹åŸºç¡€æ•°æ®è¿›è¡Œå¤„ç†ï¼Œæˆ–è€…åšä¸€äº›åŸºç¡€æ¨¡å‹ä¾›æ¨èç³»ç»Ÿä½¿ç”¨ã€‚\n## KNNç®—æ³•\nKNNç®—æ³•çš„åŸç†å’Œå…·ä½“çš„ä»£ç å®ç°ï¼Œè¿™é‡Œä¸è¿‡å¤šä»‹ç»ï¼Œå¯å‚è€ƒã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹\n\nKNNæ˜¯ä¸€ä¸ªåˆ†ç±»ç®—æ³•ï¼Œä½†å¯ä»¥ä½¿ç”¨KNNçš„åŸå§‹ç®—æ³•æ€è·¯è¿›è¡Œæ¨èï¼Œå³ï¼Œä¸ºæ¯ä¸ªå†…å®¹æˆ–ç‰©å“å¯»æ‰¾Kä¸ªä¸å…¶æœ€ç›¸ä¼¼çš„å†…å®¹æˆ–ç‰©å“ï¼Œç„¶åæ¨èç»™ç”¨æˆ·ã€‚\nä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªç®€å•çš„ç”µå•†ç½‘ç«™ä¸­ï¼Œç”¨æˆ·æµè§ˆäº†ä¸€æœ¬å›¾ä¹¦ï¼Œåˆ™æ¨èç³»ç»Ÿä¼šä¾æ®å›¾ä¹¦çš„ä¸€äº›æ€§è´¨ç‰¹å¾ä¸ºç”¨æˆ·æ¨èå‰ Kä¸ªä¸è¯¥å›¾ä¹¦æœ€ç›¸ä¼¼çš„å›¾ä¹¦ã€‚\n\nå¯¹æ€§åˆ«è¿›è¡Œé¢„æµ‹åœ¨ç”µå•†ç½‘ç«™ä¸­ä¹Ÿå¸¸ç”¨åˆ°ã€‚æŸäº›ç”¨æˆ·åœ¨å¡«å†™æ³¨å†Œä¿¡æ¯æ—¶å¹¶æ²¡æœ‰æ³¨æ˜æ€§åˆ«ï¼Œæˆ–è€…å¡«å†™çš„æ•°æ®ä¸æ­£ç¡®ã€‚å¦‚æœåœ¨æ€§åˆ«æœªçŸ¥çš„æƒ…å†µä¸‹è¿›è¡Œå•†å“æ¨èï¼Œåˆ™å®¹æ˜“å°†ç”·æ€§å•†å“æ¨èç»™å¥³æ€§ï¼Œæˆ–è€…å°†å¥³æ€§å•†å“æ¨èç»™ç”·æ€§ã€‚è¿™ç§æƒ…å†µä¸‹å°±éœ€è¦å¯¹ç”¨æˆ·æ€§åˆ«è¿›è¡Œåˆ¤å®šã€‚è¿™æ—¶å€™KNNç®—æ³•å°±å¯ä»¥è¢«æ´¾ä¸Šç”¨åœºäº†ã€‚\n## å†³ç­–æ ‘\nåœ¨ç‚¹å‡»ç‡é¢„ä¼°åœºæ™¯ä¸­æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„GBDT/XGBoostï¼Œå…¶åº•å±‚ä¹Ÿæ˜¯ä¸€æ£µæ£µå†³ç­–æ ‘ã€‚äº†è§£å†³ç­–æ ‘çš„ç®—æ³•å’ŒåŸå› å¯¹æˆ‘ä»¬åç»­å­¦ä¹ GBDTä¹Ÿæ˜¯å¾ˆé‡è¦çš„ã€‚\nå†³ç­–æ ‘ï¼ˆDecision Treeï¼‰æ˜¯æ ¹æ®ä¸€ç³»åˆ—è§„åˆ™å¯¹æ•°æ®è¿›è¡Œåˆ†ç±»çš„è¿‡ç¨‹ã€‚åˆ†ä¸ºå›å½’å†³ç­–æ ‘å’Œåˆ†ç±»å†³ç­–æ ‘ã€‚\n- å›å½’å†³ç­–æ ‘æ˜¯å¯¹è¿ç»­å˜é‡æ„å»ºå†³ç­–æ ‘ã€‚\n- åˆ†ç±»å†³ç­–æ ‘æ˜¯å¯¹ç¦»æ•£å˜é‡æ„å»ºå†³ç­–æ ‘ã€‚\nå…¶ä¸­åˆ†ç±»å†³ç­–æ ‘çš„ä»£è¡¨ä¸ºID3ç®—æ³•ï¼ŒC4.5å’ŒCARTæ—¢å¯æ„å»ºåˆ†ç±»å†³ç­–æ ‘ä¹Ÿå¯ä»¥æ„å»ºå›å½’å†³ç­–æ ‘ã€‚\n\n## æœ´ç´ è´å¶æ–¯ç®—æ³•\nåœ¨ç”µå•†ç½‘ç«™ä¸­ï¼Œå¾€å¾€ä¼šå­˜åœ¨ä¸€äº›å¼‚å¸¸ç”¨æˆ·ï¼ŒåŒ…æ‹¬æ¶æ„åˆ·å•ç”¨æˆ·ã€çˆ¬è™«çˆ¬å–æ•°æ®çš„ç”¨æˆ·ç­‰ã€‚è¿™äº›å¼‚å¸¸ç”¨æˆ·äº§ç”Ÿçš„æ•°æ®ä¿¡æ¯åœ¨æ¨èåœºæ™¯ä¸­å¾€å¾€æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œå³æ‰€è¯´çš„â€œè„æ•°æ®â€ã€‚é‚£ä¹ˆåœ¨å‡†å¤‡æ¨èç®—æ³•ç›¸å…³æ•°æ®æ—¶ï¼Œåº”è¿‡æ»¤æ‰è¿™äº›å¼‚å¸¸ç”¨æˆ·æ‰€äº§ç”Ÿçš„æ•°æ®ã€‚\n\nè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨è´å¶æ–¯ç®—æ³•äº†ï¼Œè´å¶æ–¯ç®—æ³•æ˜¯ä¸€ç±»ç®—æ³•çš„æ€»ç§°ï¼Œè¿™äº›ç®—æ³•å‡ä»¥è´å¶æ–¯å®šç†ä¸ºåŸºç¡€ã€‚\n\nè´å¶æ–¯ç†è®ºæ˜¯ä»¥18ä¸–çºªçš„ä¸€ä½ç¥å­¦å®¶æ‰˜é©¬æ–¯â€¢è´å¶æ–¯ï¼ˆThomas Bayesï¼‰çš„åå­—å‘½åçš„ã€‚é€šå¸¸ï¼Œåœ¨äº‹ä»¶Bå·²ç»å‘ç”Ÿçš„å‰æä¸‹äº‹ä»¶Aå‘ç”Ÿçš„æ¦‚ç‡ï¼Œä¸äº‹ä»¶Aå·²ç»å‘ç”Ÿçš„å‰æä¸‹äº‹ä»¶Bå‘ç”Ÿçš„æ¦‚ç‡æ˜¯ä¸ä¸€æ ·çš„ï¼Œç„¶è€Œè¿™ä¸¤è€…æ˜¯æœ‰å…³ç³»çš„ã€‚è´å¶æ–¯å®šç†å°±æ˜¯é’ˆå¯¹è¿™ç§å…³ç³»æ‰€åšçš„é™ˆè¿°ã€‚\n\nP(A|B)è¡¨ç¤ºåœ¨äº‹ä»¶Bå·²ç»å‘ç”Ÿçš„å‰æä¸‹äº‹ä»¶Aå‘ç”Ÿçš„æ¦‚ç‡ã€‚å…¶åŸºæœ¬æ±‚è§£å…¬å¼ä¸ºï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190709085708314.png\"></center>\n\nè´å¶æ–¯å®šç†ä¾¿æ˜¯åŸºäºæ¡ä»¶æ¦‚ç‡çš„ç­‰å¼å®šç†ï¼Œå…¶è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190709085717276.png\"></center>\n\nç‰¹å¾ç‹¬ç«‹æ€§å‡è®¾æ˜¯æŒ‡ï¼Œå‡è®¾æ¯ä¸ªç‰¹å¾ä¹‹é—´æ˜¯æ²¡æœ‰è”ç³»çš„ï¼Œæœ´ç´ è´å¶æ–¯ç®—æ³•åˆ™æ˜¯å»ºç«‹åœ¨è¿™æ ·çš„åŸºç¡€ä¹‹ä¸Šçš„ã€‚\n\næœ´ç´ è´å¶æ–¯ç®—æ³•æœ‰ä¸‰ç§å¸¸è§æ¨¡å‹ï¼š\n- å¤šé¡¹å¼æ¨¡å‹\n- é«˜æ–¯æ¨¡å‹\n- ä¼¯åŠªåˆ©æ¨¡å‹ã€‚\n# æ•°æ®èšç±»\nèšç±»ç®—æ³•ä¹Ÿæ˜¯æ•°æ®æŒ–æ˜ä¸­å¸¸ç”¨çš„åŸºæœ¬ç®—æ³•ä¹‹ä¸€ï¼Œå±äºæ— ç›‘ç£å­¦ä¹ ç®—æ³•ï¼ˆUnsupervised Learningï¼‰ã€‚åœ¨å®é™…åº”ç”¨åœºæ™¯ä¸­ï¼Œä¼šåˆ©ç”¨èšç±»ç®—æ³•å¯¹åŸºç¡€æ•°æ®è¿›è¡Œå¤„ç†ï¼Œæˆ–è€…åšä¸€äº›åŸºç¡€æ¨¡å‹ä¾›æ¨èç³»ç»Ÿä½¿ç”¨ã€‚\n## K-meansç®—æ³•\nåœ¨ç”µå•†ç½‘ç«™ä¸­ï¼Œå•†å“çš„æ•°ç›®å¾ˆå¤šï¼Œå¯¹åº”çš„å•†å“ä»·æ ¼ä¹Ÿå¾ˆå¤šã€‚ä½†å¯¹äºç”¨æˆ·æ¥è®²ï¼Œå¹¶ä¸æ˜¯å¯¹æ‰€æœ‰ä»·æ ¼çš„å•†å“éƒ½æ„Ÿå…´è¶£ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç»å¸¸ç½‘è´­1000å…ƒå·¦å³æ‰‹æœºçš„ç”¨æˆ·ï¼Œé€šå¸¸æ²¡å¿…è¦å‘ä»–æ¨èä»·æ ¼è¶…è¿‡5000å…ƒçš„æ‰‹æœºã€‚\n\næ‰€ä»¥ï¼Œéœ€è¦å¯¹å•†å“çš„ä»·æ ¼è¿›è¡Œèšç±»ï¼Œè¿›è€Œæ±‚å‡ºç”¨æˆ·æ„Ÿå…´è¶£çš„ä»·æ ¼æ®µï¼Œä»è€Œæé«˜æ¨èç³»ç»Ÿçš„å‡†ç¡®åº¦å’Œå¯ä¿¡èµ–åº¦ã€‚\n\nè¿™æ—¶å€™åŸºäºkMeansç®—æ³•è¿›è¡Œå•†å“ä»·æ ¼èšç±»ç®—æ³•å°±éšä¹‹äº§ç”Ÿäº†ã€‚\n\nkMeansï¼ˆKå‡å€¼èšç±»ç®—æ³•ï¼‰çš„åŸºæœ¬åŸç†æ˜¯ï¼š\nï¼ˆ1ï¼‰éšæœºåˆå§‹åŒ–Kä¸ªåˆå§‹ç°‡ç±»ä¸­å¿ƒï¼Œå¯¹åº”Kä¸ªåˆå§‹ç°‡ç±»ï¼ŒæŒ‰ç…§â€œè·ç¦»æœ€è¿‘â€åŸåˆ™ï¼Œå°†æ¯æ¡æ•°æ®éƒ½åˆ’åˆ†åˆ°æœ€è¿‘çš„ç°‡ç±»ï¼›\nï¼ˆ2ï¼‰ç¬¬ä¸€æ¬¡è¿­ä»£ä¹‹åï¼Œæ›´æ–°å„ä¸ªç°‡ç±»ä¸­å¿ƒï¼Œç„¶åè¿›è¡Œç¬¬äºŒæ¬¡è¿­ä»£ï¼Œä¾æ—§æŒ‰ç…§â€œè·ç¦»æœ€è¿‘â€åŸåˆ™è¿›è¡Œæ•°æ®å½’ç±»ï¼›\nï¼ˆ3ï¼‰ç›´åˆ°ç°‡ç±»ä¸­å¿ƒä¸å†æ”¹å˜ï¼Œæˆ–è€…å‰åå˜åŒ–å°äºç»™å®šçš„è¯¯å·®å€¼ï¼Œæˆ–è€…è¾¾åˆ°è¿­ä»£æ¬¡æ•°ï¼Œæ‰åœæ­¢è¿­ä»£ã€‚\n\nå…·ä½“çš„æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹ï¼š\nï¼ˆ1ï¼‰åœ¨æ•°æ®é›†ä¸­åˆå§‹Kä¸ªç°‡ç±»ä¸­å¿ƒï¼Œå¯¹åº”Kä¸ªåˆå§‹ç°‡ç±»ï¼›\nï¼ˆ2ï¼‰è®¡ç®—ç»™å®šæ•°æ®é›†ä¸­æ¯æ¡æ•°æ®åˆ°Kä¸ªç°‡ç±»ä¸­å¿ƒçš„è·ç¦»ï¼›\nï¼ˆ3ï¼‰æŒ‰ç…§â€œè·ç¦»æœ€è¿‘â€åŸåˆ™ï¼Œå°†æ¯æ¡æ•°æ®éƒ½åˆ’åˆ†åˆ°æœ€è¿‘çš„ç°‡ç±»ä¸­ï¼›\nï¼ˆ4ï¼‰æ›´æ–°æ¯ä¸ªç°‡ç±»çš„ä¸­å¿ƒï¼›\nï¼ˆ5ï¼‰è¿­ä»£æ‰§è¡Œæ­¥éª¤ï¼ˆ2ï¼‰ï½æ­¥éª¤ï¼ˆ4ï¼‰ï¼Œç›´è‡³ç°‡ç±»ä¸­å¿ƒä¸å†æ”¹å˜ï¼Œæˆ–è€…å˜åŒ–å°äºç»™å®šçš„è¯¯å·®åŒºé—´ï¼Œæˆ–è€…è¾¾åˆ°è¿­ä»£æ¬¡æ•°ï¼›\nï¼ˆ6ï¼‰ç»“æŸç®—æ³•ï¼Œè¾“å‡ºæœ€åçš„ç°‡ç±»ä¸­å¿ƒå’Œå¯¹åº”çš„ç°‡ç±»ã€‚\n\n## äºŒåˆ†-Kmeansç®—æ³•\näºŒåˆ†-kMeansç®—æ³•ï¼ˆäºŒåˆ†-Kå‡å€¼èšç±»ç®—æ³•ï¼‰æ˜¯åˆ†å±‚èšç±»ï¼ˆHierarchical Clusteringï¼‰çš„ä¸€ç§ï¼Œæ˜¯åŸºäºkMeansç®—æ³•ï¼ˆK-å‡å€¼èšç±»ç®—æ³•ï¼‰å®ç°çš„ã€‚\n\nåœ¨äºŒåˆ†-kMeansç®—æ³•ä¸­ï¼Œè°ƒç”¨kMeansï¼ˆk =2ï¼‰æŠŠä¸€ä¸ªç°‡ç±»åˆ†æˆä¸¤ä¸ªï¼Œè¿­ä»£æ­¤è¿‡ç¨‹ï¼Œç›´è‡³åˆ†æˆkä¸ªã€‚å…¶å®ç°çš„å…·ä½“æ€è·¯ä¸ºï¼š\nï¼ˆ1ï¼‰åˆå§‹åŒ–ç°‡ç±»è¡¨ï¼Œä½¿ä¹‹åŒ…å«æ‰€æœ‰çš„æ•°æ®ï¼›\nï¼ˆ2ï¼‰å¯¹æ¯ä¸€ä¸ªç°‡ç±»åº”ç”¨kå‡å€¼èšç±»ç®—æ³•ï¼ˆk = 2ï¼‰ï¼›\nï¼ˆ3ï¼‰è®¡ç®—åˆ’åˆ†åçš„è¯¯å·®ï¼Œé€‰æ‹©æ‰€æœ‰è¢«åˆ’åˆ†çš„èšç°‡ä¸­æ€»è¯¯å·®æœ€å°çš„å¹¶ä¿å­˜ï¼›\nï¼ˆ4ï¼‰è¿­ä»£æ­¥éª¤ï¼ˆ2ï¼‰å’Œæ­¥éª¤ï¼ˆ3ï¼‰ï¼Œç°‡ç±»æ•°ç›®è¾¾åˆ°Kååœæ­¢ã€‚\n\nç›¸å¯¹äºkMeansç®—æ³•ï¼ŒäºŒåˆ†-kMeansçš„æ”¹è¿›ç‚¹æœ‰ä»¥ä¸‹ä¸¤ç‚¹ï¼š\n- åŠ é€Ÿäº†kMeansçš„æ‰§è¡Œé€Ÿåº¦ï¼Œå‡å°‘äº†ç›¸ä¼¼åº¦çš„è®¡ç®—æ¬¡æ•°ï¼›\n- èƒ½å¤Ÿå…‹æœâ€œkMeansæ”¶æ•›äºå±€éƒ¨æœ€ä¼˜â€çš„ç¼ºç‚¹ã€‚\n\n# å…³è”åˆ†æ\nå…³è”åˆ†æçš„ç›®çš„æ˜¯ï¼Œæ‰¾åˆ°å…·æœ‰æŸç§ç›¸å…³æ€§çš„ç‰©å“ã€‚è¿™ç§åˆ†æåœ¨æ¨èç³»ç»Ÿä¸­ä¹Ÿæœ‰å¾ˆå¤§çš„ä½œç”¨ï¼Œå¦‚ç»å¸¸å‡ºç°åœ¨ä¸€ä¸ªè´­ç‰©ç¯®ä¸­çš„å•†å“å°±å¯ä»¥ç›¸äº’æ¨èã€‚å…³è”ç®—æ³•æœ€å¸¸è§çš„å°±æ˜¯Aprioriã€‚\n\nè¯¥ç®—æ³•ä¸­æ¶‰åŠçš„ä¸€äº›æ¦‚å¿µè§£é‡Šä¸ºï¼š\n- å…³è”åˆ†æï¼ˆAssociation Analysisï¼‰ï¼šä»å¤§è§„æ¨¡æ•°æ®é›†ä¸­å¯»æ‰¾å•†å“çš„éšå«å…³ç³»ã€‚\n- é¡¹é›†ï¼ˆItem Setï¼‰ï¼šåŒ…å«0ä¸ªæˆ–å¤šä¸ªé¡¹çš„é›†åˆã€‚\n- é¢‘ç¹é¡¹é›†ï¼šé‚£äº›ç»å¸¸ä¸€èµ·å‡ºç°çš„ç‰©å“é›†åˆã€‚\n- æ”¯æŒåº¦è®¡æ•°ï¼ˆSupport Countï¼‰ï¼šä¸€ä¸ªé¡¹é›†å‡ºç°çš„æ¬¡æ•°ï¼ˆå³ï¼Œæ•´ä¸ªäº¤æ˜“æ•°æ®é›†ä¸­åŒ…å«è¯¥é¡¹é›†çš„äº‹ç‰©æ•°ï¼‰ã€‚\n- é¡¹é›†æ”¯æŒåº¦ï¼šä¸€ä¸ªé¡¹é›†å‡ºç°çš„æ¬¡æ•°ä¸æ•°æ®é›†æ‰€æœ‰äº‹ç‰©æ•°çš„ç™¾åˆ†æ¯”ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/2019070909025024.png\"></center>\n\n- é¡¹é›†ç½®ä¿¡åº¦ï¼ˆconfidenceï¼‰ï¼šæ•°æ®é›†ä¸­åŒæ—¶åŒ…å«Aã€Bçš„ç™¾åˆ†æ¯”ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190709090259813.png\"></center>\n\nAprioriç®—æ³•ä½¿ç”¨ä¸€ç§ç§°ä¸ºé€å±‚æœç´¢çš„è¿­ä»£æ–¹æ³•ï¼Œå…¶ä¸­ké¡¹é›†ç”¨äºæ¢ç´¢ï¼ˆk+1ï¼‰é¡¹é›†ï¼ˆå¦‚ä½¿ç”¨é¢‘ç¹1é¡¹é›†æ‰¾åˆ°é¢‘ç¹2é¡¹é›†ï¼‰ï¼Œå…¶å®ç°è¿‡ç¨‹å¦‚ä¸‹ï¼š\n- ï¼ˆ1ï¼‰é€šè¿‡æ‰«ææ•°æ®åº“ï¼Œç´¯è®¡æ¯ä¸ªé¡¹çš„è®¡æ•°ï¼Œå¹¶æ”¶é›†æ»¡è¶³æœ€å°æ”¯æŒåº¦çš„é¡¹ï¼Œæ‰¾å‡ºé¢‘ç¹1é¡¹é›†çš„é›†åˆã€‚è¯¥é›†åˆè®°ä½œL1ï¼›\n- ï¼ˆ2ï¼‰ä½¿ç”¨L1æ‰¾å‡ºé¢‘ç¹2é¡¹é›†çš„é›†åˆL2ï¼Œä½¿ç”¨L2æ‰¾å‡ºL3ï¼›\n- ï¼ˆ3ï¼‰å¦‚æ­¤ä¸‹å»ï¼Œç›´è‡³ä¸èƒ½å†æ‰¾åˆ°é¢‘ç¹ké¡¹é›†ï¼Œæ¯æ‰¾å‡ºä¸€ä¸ªLkéœ€è¦ä¸€æ¬¡å®Œæ•´çš„æ•°æ®åº“æ‰«æã€‚\n\n----\n\næ•°æ®æŒ–æ˜åœ¨æ¨èç³»ç»Ÿä¸­çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼Œæ— è®ºæ˜¯æ•°æ®é¢„å¤„ç†è¿˜æ˜¯åŸºç¡€æ¨¡å‹å¼€å‘ï¼Œä»–éƒ½å‘æŒ¥ç€ä¸¾è¶³è½»é‡çš„ä½œç”¨ï¼Œå› æ­¤åœ¨ç†è§£æ¨èç®—æ³•çš„åŒæ—¶ï¼Œå¯¹æ•°æ®æŒ–æ˜ä¹Ÿè¦è¿›è¡Œä¸€å®šç¨‹åº¦çš„æŒæ¡ã€‚å…³äºæ–‡ä¸­çš„æ›´å¤šè¯¦ç»†å†…å®¹è¯·æŒç»­å…³æ³¨<font color=red>ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹\n\n-----\n\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n\n\n---\n<font color=red>æ³¨ï¼šã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹æ˜¯å°ç¼–è¿‘æœŸè¦ä¸Šçš„ä¸€æœ¬å›¾ä¹¦ï¼Œé¢„è®¡æœ¬æœˆï¼ˆ7æœˆæœ«ï¼‰å¯åœ¨äº¬ä¸œï¼Œå½“å½“ä¸Šçº¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è¿›è¡Œå…³æ³¨ï¼</font>\n<center><img src=\"https://img-blog.csdnimg.cn/20190708234949217.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=50% /></center>\n","tags":["æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹2ã€ä»æ­å»ºä¸€ä¸ªç”µå½±æ¨èç³»ç»Ÿå¼€å§‹å­¦æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜","url":"/2019/07/10/RecSys/æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜/ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹2ã€ä»æ­å»ºä¸€ä¸ªç”µå½±æ¨èç³»ç»Ÿå¼€å§‹å­¦æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜/","content":"\n> æ¨èç³»ç»Ÿåœ¨æˆ‘ä»¬çš„ç”Ÿæ´»ä¸­æ— å¤„ä¸åœ¨ï¼Œæ¯”å¦‚è´­ç‰©ç½‘ç«™ï¼Œè§†é¢‘éŸ³ä¹ç½‘ç«™ï¼Œæ–°é—»ç½‘ç«™ç­‰ï¼Œé‚£ä¹ˆæ¨èç³»ç»Ÿæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä»–æ˜¯åŸºäºä»€ä¹ˆæ–¹å¼å®ç°çš„ï¼Ÿå¯ä»¥åœ¨ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹è¿™æœ¬ä¹¦ä¸­è¿›è¡Œç³»ç»Ÿçš„äº†è§£å’Œå­¦ä¹ ï¼Œæœ¬ç¯‡æ–‡ç« æ˜¯è¯¥ç³»åˆ—æ–‡ç« çš„å¼€ç¯‡ä¹‹ä½œï¼Œå¸¦é¢†å¤§å®¶è®¤è¯†ä¸€ä¸‹åŸºäºæœ€è¿‘ç›¸ä¼¼ç”¨æˆ·çš„æ¨èã€‚ä»¥ä¸‹å†…å®¹æ‘˜è‡ªäºã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹\n\n<!--More-->\n\n---\n\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/93927941\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\nä¸ªäººç½‘ç«™ï¼šhttp://thinkgamer.github.io\n\n---\n\n- å—¨ï¼ŒSusanï¼Œæœ€è¿‘æœ‰ä»€ä¹ˆå¥½çœ‹çš„ç”µå½±å—ï¼Ÿ\n- Thinkgamerï¼Œæˆ‘è§‰å¾—ã€ŠèŠ³åã€‹ä¸é”™ï¼Œæ¨èä½ å¯ä»¥å»çœ‹ä¸‹ã€‚\n\nè¿™æ ·çš„åœºæ™¯ç›¸ä¿¡æˆ‘ä»¬ä¼šç»å¸¸é‡åˆ°ï¼Œå½“æˆ‘ä»¬ä¸çŸ¥é“è¦çœ‹å“ªéƒ¨ç”µå½±æ—¶ï¼Œä¼šå’¨è¯¢ä¸€ä¸‹èº«è¾¹çš„æœ‹å‹ï¼Œä»ä»–ä»¬é‚£é‡Œå¾—åˆ°ä¸€äº›æ„è§ã€‚å½“æˆ‘ä»¬åœ¨å’¨è¯¢åˆ«äººæ—¶ï¼Œå¾€å¾€ä¼šæœ‰è‡ªå·±çš„åˆ¤æ–­ï¼ŒThinkgamerå–œæ¬¢æ–‡è‰ºç‰‡ï¼Œä»–ä¸ä¼šå»å¾æ±‚å–œæ¬¢åŠ¨ç”»ç‰‡çš„Jakeï¼Œä½†æ˜¯ä»–ä¼šå»å’¨è¯¢åŒæ ·å–œæ¬¢æ–‡è‰ºç‰‡çš„Susanã€‚\n\nåŸºäºä¸Šè¾¹çš„æè¿°ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºUserCFçš„ç®—æ³•è¿‡ç¨‹ï¼š\n1. è®¡ç®—ç”¨æˆ·ç›¸ä¼¼åº¦\n2. å¯»æ‰¾ç»™å®šç”¨æˆ·æœ€ç›¸è¿‘çš„Kä¸ªç”¨æˆ·\n3. å°†Kä¸ªç”¨æˆ·å–œæ¬¢çš„ä¸”ç»™å®šç”¨æˆ·æ²¡æœ‰è¡Œä¸ºçš„ç‰©å“æ¨èç»™ç»™å®šç”¨æˆ·\n\nç®€å•çš„è®²å°±æ˜¯ï¼šç»™ç”¨æˆ·æ¨èâ€œå’Œä»–å…´è¶£ç›¸æŠ•çš„å…¶ä»–ç”¨æˆ·â€å–œæ¬¢çš„ç‰©å“ã€‚\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20190627234358613.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\"  width=70% height= /></center>\n\nä¸Šå›¾æ‰€ç¤ºæ˜¯ä¸€ä¸ªåŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤æ¨èçš„ä¾‹å­ï¼Œç”¨æˆ·Aå’Œç”¨æˆ·CåŒæ—¶å–œæ¬¢ç”µå½±Aå’Œç”µå½±Cï¼Œç”¨æˆ·Cè¿˜å–œæ¬¢ç”µå½±Dï¼Œå› æ­¤å°†ç”¨æˆ·Aæ²¡æœ‰è¡¨è¾¾å–œå¥½çš„ç”µå½±Dæ¨èç»™ç”¨æˆ·Aã€‚\n\né’ˆå¯¹ä¸Šè¿°è¿‡ç¨‹ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹æ­¥éª¤ï¼š\n## æ„å»ºç”¨æˆ·ç‰©å“è¯„åˆ†è¡¨\nå‡è®¾ç”¨æˆ·ä¸ç‰©å“æ‰€è¡¨è¾¾çš„å–œå¥½ç¨‹åº¦ï¼ˆå³è¯„åˆ†ï¼‰ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š\n\nç”¨æˆ·|\tç‰©å“a|\tç‰©å“b|\tç‰©å“c\t|ç‰©å“d\t|ç‰©å“e\n---|--|--|--|--|--|--\nA\t|3.0|\t4.0\t|0\t|3.5|\t0\nB\t|4.0|\t0\t|4.5|\t0|\t3.5\nC\t|0|\t3.5\t|0\t|0|\t3\nD|\t0|\t4|\t0\t|3.5|\t3\n\n## ç›¸ä¼¼åº¦è®¡ç®—\nè®¡ç®—ç”¨æˆ·ä¹‹é—´ç›¸ä¼¼åº¦çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œè¿™é‡Œé€‰ç”¨çš„æ˜¯ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œå¦‚ä¸‹ï¼š\n\n<center>\n<img  src=\"https://img-blog.csdnimg.cn/20190707101722627.png\"   />\n</center>\n\né’ˆå¯¹ç”¨æˆ·uå’Œvï¼Œä¸Šè¿°å…¬å¼ä¸­çš„å‚æ•°å¦‚ä¸‹ã€‚\n\n - N(u)ï¼šç”¨æˆ·uæœ‰è¿‡è¯„åˆ†çš„ç‰©å“é›†åˆï¼›\n - N(v)ï¼šç”¨æˆ·væœ‰è¿‡è¯„åˆ†çš„ç‰©å“é›†åˆï¼›\n - Wuvï¼šç”¨æˆ·uå’Œç”¨æˆ·vçš„ä½™å¼¦ç›¸ä¼¼åº¦ã€‚\n\nç»“åˆä¸Šè¡¨ï¼Œå¯ä»¥åˆ†åˆ«æ±‚å¾—ç”¨æˆ·Cå’Œå…¶ä»–ä¸‰ä¸ªç”¨æˆ·çš„ç›¸ä¼¼åº¦ï¼Œè§ä¸‹é¢ä¸‰å…¬å¼ï¼š\n<center>\n<img  src=\"https://img-blog.csdnimg.cn/20190707101854595.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=50% />\n</center>\nä»è®¡ç®—ç»“æœæ¥çœ‹ï¼ŒDç”¨æˆ·ä¸Cç”¨æˆ·ç›¸ä¼¼åº¦æœ€å¤§ã€‚\nä»è¡¨ä¸­ä¹Ÿå¯ä»¥ç›´æ¥çœ‹å‡ºï¼Œç”¨æˆ·Då’ŒCéƒ½åœ¨bå’Œeç‰©å“ä¸Šè¿›è¡Œäº†è¯„åˆ†ï¼Œç”¨æˆ·Aã€Bå’ŒCä¹Ÿéƒ½åœ¨bç‰©å“ä¸Šè¿›è¡Œäº†è¯„åˆ†ã€‚\n\n## è®¡ç®—æ¨èç»“æœ\nç”¨æˆ·Cè¿›è¡Œè¯„åˆ†çš„ç‰©å“æ˜¯bå’Œeï¼Œæ¥ä¸‹æ¥è®¡ç®—ç”¨æˆ·Cå¯¹ç‰©å“aã€cã€dçš„åå¥½ç¨‹åº¦ï¼Œè§ä¸‹é¢ä¸‰å…¬å¼ï¼š\n<center>\n<img src=\"https://img-blog.csdnimg.cn/2019070710202317.png\" width=60% />\n</center>\nä»ä¸Šé¢çš„è®¡ç®—å¯ä»¥å¾—åˆ°ï¼Œåœ¨ç”¨æˆ·Cæ²¡æœ‰è¿›è¡Œè¯„åˆ†çš„ç‰©å“ä¸­å€’åºæ’åˆ—ä¸ºaâ†’câ†’eã€‚è¿™æ ·å°±å¯ä»¥æ ¹æ®éœ€è¦å–å‰ Kä¸ªç‰©å“æ¨èç»™Cç”¨æˆ·ã€‚\n\n<font color=red>å®Œæ•´ä»£ç å¯å‚è€ƒã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹</font>\n\n## ç®—æ³•å¤æ‚åº¦ä¼˜åŒ–\nä½†æ˜¯ä¸Šé¢çš„è®¡ç®—å­˜åœ¨ä¸€ä¸ªé—®é¢˜â€”â€”éœ€è¦è®¡ç®—æ¯ä¸€å¯¹ç”¨æˆ·çš„ç›¸ä¼¼åº¦ã€‚ä»£ç å®ç°å¯¹åº”çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(|U|*|U|)ï¼ŒUä¸ºç”¨æˆ·ä¸ªæ•°ã€‚\n\nåœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¾ˆå¤šç”¨æˆ·ä¹‹é—´å¹¶æ²¡æœ‰äº¤é›†ï¼Œä¹Ÿå°±æ˜¯å¹¶æ²¡æœ‰å¯¹åŒä¸€æ ·ç‰©å“äº§ç”Ÿè¿‡è¡Œä¸ºï¼Œæ‰€ä»¥å¾ˆå¤šæƒ…å†µä¸‹åˆ†å­ä¸º0ï¼Œè¿™æ ·çš„ç¨€ç–æ•°æ®å°±æ²¡æœ‰è®¡ç®—çš„å¿…è¦ã€‚\n\nä¸Šé¢çš„ä»£ç å®ç°å°†æ—¶é—´æµªè´¹åœ¨è®¡ç®—è¿™ç§ç”¨æˆ·ä¹‹é—´çš„ç›¸ä¼¼åº¦ä¸Šï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥è¿›è¡Œä¼˜åŒ–ï¼š\nï¼ˆ1ï¼‰è®¡ç®—å‡ºçš„ç”¨æˆ·å¯¹ï¼ˆuï¼Œvï¼‰ï¼›\nï¼ˆ2ï¼‰å¯¹å…¶é™¤ä»¥åˆ†æ¯å¾—åˆ°uå’Œvçš„ç›¸ä¼¼åº¦ã€‚\n\né’ˆå¯¹ä»¥ä¸Šä¼˜åŒ–æ€è·¯ï¼Œéœ€è¦ä¸¤æ­¥ï¼š\nï¼ˆ1ï¼‰å»ºç«‹ç‰©å“åˆ°ç”¨æˆ·çš„å€’æ’è¡¨Tï¼Œè¡¨ç¤ºè¯¥ç‰©å“è¢«å“ªäº›ç”¨æˆ·äº§ç”Ÿè¿‡è¡Œä¸ºï¼›\nï¼ˆ2ï¼‰æ ¹æ®å€’æŸ¥è¡¨Tï¼Œå»ºç«‹ç”¨æˆ·ç›¸ä¼¼åº¦çŸ©é˜µWï¼š\n\n- åœ¨Tä¸­ï¼Œå¯¹äºæ¯ä¸ªç‰©å“iï¼Œè®¾å…¶å¯¹åº”çš„ç”¨æˆ·ä¸ºjã€kï¼Œ\n- åœ¨Wä¸­ï¼Œæ›´æ–°å¯¹åº”ä½ç½®çš„å…ƒç´ å€¼ï¼ŒW[j][k]=W[j][k]+1ï¼ŒW[k][j]=W[k][j]+1ã€‚\n\nä»¥æ­¤ç±»æ¨ï¼Œè¿™æ ·åœ¨æ‰«æå®Œå€’æŸ¥è¡¨Tä¹‹åï¼Œå°±èƒ½å¾—åˆ°ä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·ç›¸ä¼¼åº¦çŸ©é˜µWäº†ã€‚\nè¿™é‡Œçš„Wå¯¹åº”çš„æ˜¯å‰é¢ä»‹ç»çš„ä½™å¼¦ç›¸ä¼¼åº¦ä¸­çš„åˆ†å­éƒ¨åˆ†ï¼Œç„¶åç”¨Wé™¤ä»¥åˆ†æ¯ï¼Œä¾¿èƒ½æœ€ç»ˆå¾—åˆ°ä¸¤ä¸ªç”¨æˆ·çš„å…´è¶£ç›¸ä¼¼åº¦ã€‚\nä»¥ä¸Šè¡¨ä¸ºä¾‹ï¼Œæ€»å…±æœ‰4ä¸ªç”¨æˆ·ï¼Œé‚£ä¹ˆè¦å»ºä¸€ä¸ª4è¡Œ4åˆ—çš„å€’æ’è¡¨ï¼Œå…·ä½“å»ºç«‹è¿‡ç¨‹å¦‚ä¸‹ï¼š\nï¼ˆ1ï¼‰ç”±ç”¨æˆ·çš„è¯„åˆ†æ•°æ®å¾—åˆ°æ¯ä¸ªç‰©å“è¢«å“ªäº›ç”¨æˆ·è¯„ä»·è¿‡ï¼Œå¦‚å›¾5-6æ‰€ç¤ºã€‚\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20190707144648916.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=70% />\n</center>\n\nï¼ˆ2ï¼‰å»ºç«‹ç”¨æˆ·ç›¸ä¼¼åº¦çŸ©é˜µWï¼Œå¦‚å›¾5-7æ‰€ç¤ºã€‚\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20190707144715866.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=70% />\n</center>\n\nå¾—åˆ°çš„ç›¸ä¼¼åº¦çŸ©é˜µWå¯¹åº”çš„æ˜¯è®¡ç®—ä¸¤ä¸¤ç”¨æˆ·ç›¸ä¼¼åº¦çš„åˆ†å­éƒ¨åˆ†ï¼Œç„¶åé™¤ä»¥åˆ†æ¯å¾—åˆ°çš„ä¾¿æ˜¯ä¸¤ä¸¤ç”¨æˆ·çš„ç›¸ä¼¼åº¦ã€‚\n\nè¿˜æ˜¯ä»¥Cç”¨æˆ·ä¸ºä¾‹ã€‚ä»å›¾5-7å¯çŸ¥ï¼ŒAã€Bç”¨æˆ·ä¸Cç”¨æˆ·ç›¸ä¼¼åº¦è®¡ç®—çš„åˆ†å­éƒ½ä¸º1ï¼ŒDç”¨æˆ·ä¸Cç”¨æˆ·ç›¸ä¼¼åº¦è®¡ç®—çš„åˆ†å­éƒ¨åˆ†ä¸º2ã€‚å…¶ä»–ç”¨æˆ·ä¸Cç”¨æˆ·çš„ç›¸ä¼¼åº¦è®¡ç®—å¦‚ä¸‹ï¼š\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20190707152109180.png\"  width=50% />\n</center>\nå¾—åˆ°ç”¨æˆ·çš„ç›¸ä¼¼åº¦ä¹‹åï¼Œå°±å¯ä»¥è®¡ç®—ç”¨æˆ·å¯¹æœªè¯„åˆ†ç‰©å“çš„å¯èƒ½è¯„åˆ†äº†ã€‚é‡‡ç”¨çš„è®¡ç®—æ–¹å¼ä¾æ—§æ˜¯ï¼š\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20190707152129605.png\"  width=50% />\n</center>\n\nå…¶ä¸­å„å‚æ•°è¯´æ˜å¦‚ä¸‹ã€‚\n- P(u,i)ï¼šç”¨æˆ·uå¯¹ç‰©å“içš„æ„Ÿå…´è¶£ç¨‹åº¦ï¼›\n- S(u,K)ï¼šå’Œç”¨æˆ·uå…´è¶£æœ€æ¥è¿‘çš„Kä¸ªç”¨æˆ·ï¼›\n- N(i)ï¼šå¯¹ç‰©å“iæœ‰è¿‡è¡Œä¸ºçš„ç”¨æˆ·é›†åˆï¼›\n- Wuvï¼šç”¨æˆ·uå’Œç”¨æˆ·vçš„å…´è¶£ç›¸ä¼¼åº¦ï¼›\n- rviï¼šç”¨æˆ·vå¯¹ç‰©å“içš„å…´è¶£ï¼Œå³ç”¨æˆ·å¯¹ç‰©å“çš„è¯„åˆ†ã€‚\nä¾æ®ä¸Šå¼ï¼Œåˆ†åˆ«è®¡ç®—ç”¨æˆ·Cå¯¹ç‰©å“aã€cã€dçš„å¯èƒ½è¯„åˆ†ï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/20190707152205766.png\" width=50% /></center>\nåŒæ ·ï¼Œå¯¹æ¯”ä¼˜åŒ–å‰åçš„è®¡ç®—å¯çŸ¥ï¼Œç»“æœæ˜¯ä¸€è‡´çš„ã€‚\n\n<font color=red>å…·ä½“çš„ä»£ç å®ç°å¯å‚è€ƒï¼šã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ä¸€ä¹¦ã€‚</font>\n\n## æƒ©ç½šçƒ­é—¨ç‰©å“\nå¦‚æœä¸¤ä¸ªç”¨æˆ·éƒ½ä¹°è¿‡ã€Šæ–°åå­—å…¸ã€‹ï¼Œè¿™å¹¶ä¸èƒ½è¯´æ˜ä»–ä»¬å…´è¶£ç›¸åŒï¼Œå› ä¸ºç»å¤§å¤šæ•°ä¸­å›½äººéƒ½ä¹°è¿‡ã€Šæ–°åå­—å…¸ã€‹ã€‚\nä½†å¦‚æœä¸¤ä¸ªç”¨æˆ·éƒ½ä¹°è¿‡ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹ï¼Œé‚£å¯ä»¥è®¤ä¸ºä»–ä»¬çš„å…´è¶£æ¯”è¾ƒç›¸ä¼¼ï¼Œå› ä¸ºåªæœ‰ç ”ç©¶æœºå™¨å­¦ä¹ çš„äººæ‰å¯èƒ½ä¹°è¿™æœ¬ä¹¦ã€‚\nå› æ­¤ï¼ŒJohn S. Breeseåœ¨è®ºæ–‡ä¸­æå‡ºäº†å¼ï¼ˆ5.4ï¼‰ï¼Œæ ¹æ®ç”¨æˆ·è¡Œä¸ºè®¡ç®—ç”¨æˆ·çš„å…´è¶£ç›¸ä¼¼åº¦ï¼š\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190707152309805.png\" width=50% /></center>\n\n- åˆ†å­ä¸­çš„å€’æ•°éƒ¨åˆ†ï¼Œæƒ©ç½šäº†ç”¨æˆ·uå’Œç”¨æˆ·vå…±åŒå…´è¶£åˆ—è¡¨ä¸­çƒ­é—¨ç‰©å“ï¼Œå‡å°äº†çƒ­é—¨ç‰©å“å¯¹ç”¨æˆ·ç›¸ä¼¼åº¦çš„å½±å“ã€‚\n- N(i)æ˜¯å¯¹ç‰©å“iæœ‰è¿‡è¡Œä¸ºçš„ç”¨æˆ·é›†åˆã€‚ç‰©å“iè¶Šçƒ­é—¨ï¼ŒN(i)è¶Šå¤§ã€‚\n\nå¯¹æ­¤ï¼Œä¿®æ”¹ç”¨æˆ·ç›¸ä¼¼åº¦çš„è®¡ç®—æ–¹å¼ï¼Œå…·ä½“çš„ä»£ç å®ç°å¦‚å‡½æ•°userSimilarityBest()æ‰€ç¤ºã€‚\n\n<font color=red>å…·ä½“çš„ä»£ç å®ç°å¯å‚è€ƒï¼šã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ä¸€ä¹¦ã€‚</font>\n\n## æ¡ˆä¾‹å®æˆ˜\nåœ¨äº†è§£å®ŒUserCFçš„ç®—æ³•åŸç†ä¹‹åï¼Œæ¥å¼€å‘ä¸€ä¸ªç”µå½±æ¨èç³»ç»Ÿã€‚è¿™é‡Œæˆ‘ä»¬é€‰ç”¨çš„MovieLensæ•°æ®é›†ï¼Œè¯¥æ•°æ®é›†åœ¨ã€Šå®æˆ˜ã€‹ä¸€ä¹¦ä¸­çš„ç¬¬ä¸‰ç« æœ‰è¯¦ç»†ä»‹ç»ã€‚\n\næ­å»ºä¸€ä¸ªæ¨èç³»ç»Ÿçš„æ­¥éª¤åŒ…æ‹¬ï¼š\n- å‡†å¤‡æ•°æ®\n- é€‰æ‹©ç®—æ³•\n- æ¨¡å‹è®­ç»ƒ\n- æ•ˆæœè¯„ä¼°\n\nè¿™é‡Œä¸è¿‡å¤šè¿›è¡Œä»‹ç»ï¼Œæ¬¢è¿å…³æ³¨å°ç¼–å›¾ä¹¦ã€‚\n\n-----\n\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n\n\n---\n<font color=red>æ³¨ï¼šæ–‡ä¸­å¤šæ¬¡æåˆ°çš„ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹æ˜¯å°ç¼–è¿‘æœŸè¦ä¸Šçš„ä¸€æœ¬å›¾ä¹¦ï¼Œé¢„è®¡æœ¬æœˆï¼ˆ7æœˆæœ«ï¼‰å¯åœ¨äº¬ä¸œï¼Œå½“å½“ä¸Šçº¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è¿›è¡Œå…³æ³¨ï¼</font>\n<center><img src=\"https://img-blog.csdnimg.cn/20190708234949217.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=50% /></center>\n","tags":["æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹1ã€æ¨èç³»ç»Ÿçš„å‰ä¸–ä»Šç”Ÿä¸å¤å¾€ä»Šæ¥","url":"/2019/07/10/RecSys/æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜/ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ç³»åˆ—ä¹‹1ã€æ¨èç³»ç»Ÿçš„å‰ä¸–ä»Šç”Ÿä¸å¤å¾€ä»Šæ¥/","content":"\n> æ¥ä¸‹æ¥å°†ä¼šç”¨10ç¯‡æ–‡ç« ä»‹ç»ä¸‹æ¨èç³»ç»Ÿçš„èµ·æºï¼Œåº”ç”¨ï¼Œç®—æ³•å’Œæ¡ˆä¾‹ï¼Œå¹¶å¸¦é¢†å¤§å®¶ä»0åˆ°1å®ç°å±äºè‡ªå·±çš„æ¨èç³»ç»Ÿã€‚æœ¬ç¯‡æ–‡ç« ä¸ºè¯¥ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€ç¯‡ï¼Œä¸ä¼šæ¶‰åŠå…·ä½“çš„æŠ€æœ¯ï¼Œç”¨ç§‘æ™®çš„å½¢å¼è®©å¤§å®¶å¯¹æ¨èç³»ç»Ÿæœ‰ä¸€ä¸ªæ„Ÿæ€§çš„è®¤è¯†ã€‚\n\n<!--More-->\n\næ¨èç³»ç»Ÿåœ¨æˆ‘ä»¬çš„ç”Ÿæ´»ä¸­åº”ç”¨çš„éå¸¸å¹¿æ³›ï¼Œæ— è®ºæ˜¯ç”Ÿæ´»ï¼Œå¨±ä¹ï¼Œå·¥ä½œéƒ½ä¼šæˆ–å¤šæˆ–å°‘çš„æ¶‰åŠä¸€äº›ï¼Œæ¥ä¸‹æ¥å°†ä¼šæ•´ç†ä¸€ä¸ªç³»åˆ—çš„æ–‡ç« ï¼Œä»‹ç»ä¸€ä¸‹æ¨èç³»ç»Ÿï¼Œå¹¶ä»0åˆ°1çš„å»å®ç°ä¸€ä¸ªæ¨èç³»ç»Ÿï¼Œæœ¬ç¯‡å†…å®¹ä¸»è¦æ¶‰åŠçš„æ˜¯æ¨èç³»ç»Ÿçš„èƒŒæ™¯å‘å±•å’Œå¼€å‘ä¸€ä¸ªè‡ªå·±çš„æ¨èç³»ç»Ÿéœ€è¦æŒæ¡çš„æŠ€èƒ½å’ŒçŸ¥è¯†ã€‚\n\n\n---\n\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/95116871\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\nä¸ªäººç½‘ç«™ï¼šhttp://thinkgamer.github.io\n\n---\n\n\n# å‰ä¸–\nâ€œå•¤é…’â€ä¸â€œå°¿å¸ƒâ€çš„æ•…äº‹å¯¹æ¨èç³»ç»Ÿçš„å­¦ä¹ æœ‰ç€ç§¯æçš„å½±å“ã€‚ä»è¯¥æ•…äº‹å‡ºå‘ï¼Œæˆ‘ä»¬ä¾æ—§èƒ½çœ‹åˆ°ä»20ä¸–çºª90å¹´ä»£åˆ°ç°åœ¨ä¸ªæ€§åŒ–æ¨èç³»ç»Ÿçš„æ¼”è¿›å’Œå‘å±•ã€‚\n\nâ€œå•¤é…’ä¸å°¿å¸ƒâ€çš„æ•…äº‹ç›¸ä¿¡å¾ˆå¤šäººéƒ½çŸ¥é“ã€‚å®ƒè®²è¿°çš„æ˜¯20ä¸–çºª90å¹´ä»£ï¼Œåœ¨ç¾å›½æ²ƒå°”ç›è¶…å¸‚ä¸­ï¼Œç®¡ç†äººå‘˜åˆ†ææ•°æ®æ—¶ï¼Œå‘ç°äº†ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡ï¼šåœ¨æŸäº›ç‰¹å®šçš„æƒ…å†µä¸‹ï¼Œâ€œå•¤é…’â€ä¸â€œå°¿å¸ƒâ€ä¸¤ä»¶çœ‹ä¸Šå»æ¯«æ— å…³ç³»çš„å•†å“å‡ºç°åœ¨äº†åŒä¸€ä¸ªè´­ç‰©ç¯®ä¸­ã€‚è¿™ç§ç‹¬ç‰¹çš„é”€å”®ç°è±¡å¼•èµ·äº†ç®¡ç†äººå‘˜çš„æ³¨æ„ï¼Œç»è¿‡åç»­è°ƒæŸ¥å‘ç°ï¼Œä¸€äº›å¹´è½»çš„çˆ¸çˆ¸å¸¸åˆ°è¶…å¸‚å»è´­ä¹°å©´å„¿å°¿å¸ƒï¼Œæœ‰30ï¼…ï½40ï¼…çš„æ–°çˆ¸çˆ¸ï¼Œä¼šé¡ºä¾¿ä¹°ç‚¹å•¤é…’çŠ’åŠ³è‡ªå·±ã€‚éšåï¼Œæ²ƒå°”ç›å¯¹å•¤é…’å’Œå°¿å¸ƒè¿›è¡Œäº†æ†ç»‘é”€å”®ï¼Œä¸å‡ºæ„æ–™ï¼Œé”€å”®é‡åŒåŒå¢åŠ ã€‚\n\nè¯¥æ¡ˆä¾‹å‡ºè‡ªäºæ¶‚å­æ²›å…ˆç”Ÿçš„ã€Šæ•°æ®ä¹‹å·…ã€‹ä¸€ä¹¦ã€‚åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæ•°æ®å’Œæƒ…èŠ‚è®©è¿™ä¸ªæ•…äº‹ä¸å®¹ç½®ç–‘ï¼Œç„¶è€Œæ®å´ç”˜æ²™å…ˆç”Ÿé€æ¼ï¼Œè¯¥æ¡ˆä¾‹æ˜¯TeraDataå…¬å¸ä¸€ä½ç»ç†ç¼–å‡ºæ¥çš„â€œæ•…äº‹â€ã€‚ç›®çš„æ˜¯è®©æ•°æ®åˆ†æçœ‹èµ·æ¥æ›´æœ‰åŠ›ï¼Œæ›´æœ‰è¶£ã€‚åœ¨å†å²ä¸Šè¯¥æ¡ˆä¾‹å¹¶æ²¡æœ‰å‡ºåœ¨ç¾å›½çš„ä»»ä½•ä¸€ä¸ªæ²ƒå°”ç›è¶…å¸‚ä¸­ã€‚\nè™½ç„¶è¿™ä¸ªâ€œæ•…äº‹â€æ˜¯æœæ’°çš„ï¼Œä½†å…¶ä¸­æ¶‰åŠçš„â€œæ†ç»‘é”€å”®â€å´ä¸å¤±ä¸ºä¸€ç§è´­ç‰©æ¨èã€‚ç‰©å“Aä¸ç‰©å“Bç»å¸¸å‡ºç°åœ¨ä¸€ä¸ªè´­ç‰©ç¯®ä¸­ï¼Œé‚£ä¹ˆå‘è´­ä¹°ç‰©å“Aï¼ˆç‰©å“Bï¼‰çš„äººæ¨èç‰©å“Bï¼ˆç‰©å“Aï¼‰æ˜¯æœ‰æ•°æ®ä¾æ®å’Œç†è®ºåŸºç¡€çš„ã€‚ä¾æ®è¯¥ç†è®ºï¼Œåæ¥è¡ç”Ÿå‡ºäº†å…³è”è§„åˆ™ç®—æ³•ï¼Œå¾ˆå¤šç”µå•†ç±»æˆ–è€…è§†é¢‘ç±»çš„ç½‘ç«™éƒ½ä½¿ç”¨åˆ°è¯¥ç±»ç®—æ³•è¿›è¡Œå•†å“æˆ–è€…è§†é¢‘çš„æ¨èã€‚\n\n# ä»Šç”Ÿ\nåœ¨19ä¸–çºªå’Œ20ä¸–çºªï¼Œæ¨èç³»ç»Ÿåœ¨äº’è”ç½‘è¿™ç‰‡è‚¥æ²ƒçš„åœŸå£¤ä¸­å¾—åˆ°äº†å……åˆ†çš„å‘å±•ï¼Œå¦‚ä»Šå·²ç»åœ¨å„ä¸ªå…¬å¸å¼€å‘ç»“æœã€‚ä»¥ä¸‹åˆ—äº†ä¸€äº›æœ‰ä»£è¡¨æ€§çš„å‘å±•ç‚¹ï¼š\n- Xeroxå…¬å¸åœ¨1992å¹´è®¾è®¡çš„åº”ç”¨ååŒè¿‡æ»¤ç®—æ³•çš„é‚®ä»¶ç³»ç»Ÿâ€”â€”Tapestryã€‚åŒå¹´ï¼ŒGoldbergæå‡ºäº†â€œæ¨èç³»ç»Ÿâ€è¿™ä¸ªæ¦‚å¿µã€‚\n- 1994å¹´ï¼Œæ˜å°¼è‹è¾¾å¤§å­¦çš„GroupLensç ”ç©¶ç»„ä½¿ç”¨åŸºäºä¸»åŠ¨ååŒè¿‡æ»¤çš„æ¨èç®—æ³•ï¼Œå¼€å‘äº†ç¬¬ä¸€ä¸ªè‡ªåŠ¨åŒ–æ¨èç³»ç»Ÿ GroupLensï¼Œå¹¶å°†å…¶åº”ç”¨åœ¨Usenetæ–°é—»ç»„ä¸­ã€‚\n- 1996å¹´ï¼Œå¡å†…åŸºæ¢…éš†å¤§å­¦çš„Dunja Mladenicåœ¨Web Watcherçš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ”¹è¿›ï¼Œæå‡ºäº†ä¸ªæ€§åŒ–æ¨èç³»ç»ŸPersonal Wgb Watcheroã€‚1996å¹´ï¼Œè‘—åçš„ç½‘ç»œå…¬å¸Yahooä¹Ÿæ³¨æ„åˆ°äº†ä¸ªæ€§åŒ–æœåŠ¡çš„å·¨å¤§ä¼˜åŠ¿å’Œæ½œåœ¨å•†æœºï¼Œæ¨å‡ºä¸ªæ€§åŒ–å…¥å£MyYahooã€‚\n- 1997å¹´ï¼ŒResnickå’ŒVariané¦–æ¬¡åœ¨å­¦æœ¯å±Šæ­£å¼æå‡ºæ¨èç³»ç»Ÿçš„å®šä¹‰ã€‚ä»–ä»¬è®¤ä¸ºï¼šæ¨èç³»ç»Ÿå¯ä»¥å¸®åŠ©ç”µå­å•†åŠ¡ç½‘ç«™å‘ç”¨æˆ·æä¾›å•†å“å’Œå»ºè®®ï¼Œä¿ƒæˆç”¨æˆ·çš„äº§å“è´­ä¹°è¡Œä¸ºï¼Œæ¨¡æ‹Ÿé”€å”®äººå‘˜ååŠ©å®¢æˆ·å®Œæˆè´­ä¹°è¿‡ç¨‹ã€‚\n- 1998å¹´ï¼Œäºšé©¬é€Šï¼ˆAmazon.comï¼‰ä¸Šçº¿äº†åŸºäºç‰©å“çš„ååŒè¿‡æ»¤ç®—æ³•ï¼Œå°†æ¨èç³»ç»Ÿçš„è§„æ¨¡æ‰©å¤§è‡³æœåŠ¡åƒä¸‡çº§ç”¨æˆ·å’Œå¤„ç†ç™¾ä¸‡çº§å•†å“ï¼Œå¹¶å¸¦æ¥äº†è‰¯å¥½çš„æ¨èæ•ˆæœã€‚\n- 2003å¹´ï¼Œäºšé©¬é€Šï¼ˆAmazon.comï¼‰çš„Lindenç­‰äººå‘è¡¨è®ºæ–‡ï¼Œå…¬å¸ƒäº†â€œåŸºäºç‰©å“çš„ååŒè¿‡æ»¤ç®—æ³•â€ã€‚\n- 2005å¹´ï¼ŒAdomaviciusç­‰äººå‘è¡¨ç»¼è¿°è®ºæ–‡ï¼Œå°†æ¨èç³»ç»Ÿåˆ†ä¸º3ç±»â€”â€”åŸºäºå†…å®¹çš„æ¨èã€åŸºäºååŒè¿‡æ»¤çš„æ¨èå’Œæ··åˆæ¨èï¼Œå¹¶æå‡ºäº†æœªæ¥å¯èƒ½çš„ä¸»è¦ç ”ç©¶æ–¹å‘ã€‚\n- 2006å¹´10æœˆï¼ŒåŒ—ç¾åœ¨çº¿è§†é¢‘æœåŠ¡æä¾›å•† Netflix å®£å¸ƒäº†ä¸€é¡¹ç«èµ›ï¼Œä»»ä½•äººåªè¦èƒ½å¤Ÿå°†å®ƒç°æœ‰ç”µå½±æ¨èç®—æ³• Cinematch çš„é¢„æµ‹å‡†ç¡®åº¦æé«˜10%ï¼Œå°±èƒ½è·å¾—100ä¸‡ç¾å…ƒçš„å¥–é‡‘ã€‚\n- 2007å¹´ï¼Œç¬¬ä¸€å±ŠACMæ¨èç³»ç»Ÿå¤§ä¼šåœ¨ç¾å›½ä¸¾è¡Œï¼Œåˆ°2017å¹´å·²ç»æ˜¯ç¬¬11å±Šã€‚è¿™æ˜¯æ¨èç³»ç»Ÿé¢†åŸŸçš„é¡¶çº§ä¼šè®®ï¼Œå±•ç¤ºäº†æ¨èç³»ç»Ÿåœ¨ä¸åŒé¢†åŸŸçš„æœ€è¿‘ç ”ç©¶æˆæœã€ç³»ç»Ÿå’Œæ–¹æ³•ã€‚\n- 2016å¹´ï¼ŒYouTubeå‘è¡¨è®ºæ–‡ï¼Œå°†æ·±åº¦ç¥ç»ç½‘ç»œåº”ç”¨æ¨èç³»ç»Ÿä¸­ï¼Œå®ç°äº†ä»â€œå¤§è§„æ¨¡å¯é€‰çš„æ¨èå†…å®¹â€ä¸­æ‰¾åˆ°â€œæœ€æœ‰å¯èƒ½çš„æ¨èç»“æœâ€ã€‚\n- 2018å¹´ï¼Œé˜¿é‡Œå·´å·´æå‡ºè®ºæ–‡ã€ŠåŸºäºæ³¨æ„åŠ›æœºåˆ¶çš„ç”¨æˆ·è¡Œä¸ºå»ºæ¨¡æ¡†æ¶ä»¥åŠåœ¨æ¨èé¢†åŸŸçš„åº”ç”¨ï¼ˆATRankï¼‰ã€‹ï¼Œè¢«AAAIå½•ç”¨ã€‚\n\n# ç”¨é€”\næ¨èç³»ç»Ÿå·²ç»å¹¿æ³›å­˜åœ¨äºæˆ‘ä»¬çš„ç”Ÿæ´»ä¹‹ä¸­ï¼Œå…¶ä¸»è¦åº”ç”¨åœºæ™¯å¦‚ä¸‹ï¼š\n- ç”µå•†ç±»ï¼ˆäº¬ä¸œ/æ·˜å®/æ‹¼å¤šå¤š...ï¼‰\n<center><img src=\"https://img-blog.csdnimg.cn/2019070900060147.png\"  width=70%/></center>\n\n- ç¤¾äº¤ç±»ï¼ˆå¾®åš/å¾®ä¿¡/è±†ç“£...ï¼‰\n<center><img src=\"https://img-blog.csdnimg.cn/20190709000507866.png\"  width=70%/></center>\n\n- éŸ³ä¹ç±»ï¼ˆç½‘æ˜“äº‘éŸ³ä¹/QQéŸ³ä¹/è™¾ç±³...ï¼‰\n<center><img src=\"https://img-blog.csdnimg.cn/20190709000039604.png\"  width=70%/></center>\n\n- è§†é¢‘ç±»ï¼ˆYouTube/çˆ±å¥‡è‰º/è…¾è®¯è§†é¢‘...ï¼‰\n<center><img src=\"https://img-blog.csdnimg.cn/20190709000122366.png\"  width=70%/></center>\n\n- é˜…è¯»ç±»ï¼ˆå¤´æ¡/çŸ¥ä¹/ä¹¦æ——...ï¼‰\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190709000247410.png\"  width=70%/></center>\n\n- æœåŠ¡ç±»ï¼ˆç¾å›¢/é¥¿äº†ä¹ˆ/å£ç¢‘...ï¼‰\n<center><img src=\"https://img-blog.csdnimg.cn/20190709000402258.png\"  width=70%/></center>\n\n# æŠ€æœ¯æ ˆ\nç›®å‰å·¥ä¸šç•Œæ‰€ä½¿ç”¨çš„æ¨èç³»ç»Ÿæ•´ä¸ªæ¡†æ¶æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œå¹¶éä¸€ä¸ªäººæ‰€èƒ½å®Œæˆï¼Œé‚£ä¹ˆä½œä¸ºåˆå­¦è€…ï¼Œæˆ‘ä»¬å¦‚ä½•èƒ½å¤Ÿå……åˆ†ç†è§£æ¨èç®—æ³•çš„çŸ¥è¯†ï¼Œå¦‚ä½•è‡ªå·±æ‰‹åŠ¨å¼€å‘ä¸€ä¸ªæ¨èç³»ç»Ÿå‘¢ï¼Ÿ\n\né¦–å…ˆæ˜¯é€‰å®šå¼€å‘è¯­è¨€ï¼ŒPythonä½œä¸ºä½¿ç”¨æœ€å¹¿æ³›çš„ç¼–ç¨‹è¯­è¨€ï¼Œå½“ä¹‹æ— æ„§ï¼Œè€Œä¸”pyä¹Ÿå·²ç»æˆä¸ºäº†ç®—æ³•å·¥ç¨‹å¸ˆçš„å¿…å¤‡çŸ¥è¯†æŠ€èƒ½ã€‚åŒæ—¶åœ¨å¼€å‘Pythonç‰ˆæœ¬æ¨èç³»ç»Ÿè¿‡ç¨‹ä¸­ï¼Œä¸èƒ½ç¼ºå¤±çš„æ˜¯æ•°æ®ç»“æ„æ€æƒ³ï¼Œä¸èƒ½ç¼ºå¤±çš„æ˜¯å·¥ç¨‹èƒ½åŠ›ï¼\n\né‚£å¦‚ä½•å»å®šä¹‰ä¸€ä¸ªäººå·¥ç¨‹èƒ½åŠ›çš„å¥½åå‘¢ï¼Ÿä¸»è¦ä»ä»¥ä¸‹å‡ æ–¹é¢å»åˆ¤æ–­ï¼š\n- ç¼–ç èƒ½åŠ›\n> å¼ºæ‚çš„ç¼–ç èƒ½åŠ›ï¼Œå¹¶ä¸æ˜¯è¯´åœ¨å¾ˆçŸ­çš„æ—¶é—´å†…å®Œæˆä¸€ä¸ªä¸šåŠ¡å¼€å‘ï¼Œè€Œæ˜¯è¯´åœ¨é«˜æ•ˆå®Œæˆçš„åŒæ—¶èƒ½å¤Ÿè¿½æ±‚ä»£ç çš„è´¨é‡å’Œå¯è¯»æ€§ã€‚åªæœ‰åŒæ—¶å…·å¤‡é«˜æ•ˆã€è´¨é‡å’Œå¯è¯»æ€§ï¼Œæ‰èƒ½è¯´æ˜¯å·¥ç¨‹èƒ½åŠ›å¾ˆå¼ºã€‚\n- è§£å†³é—®é¢˜èƒ½åŠ›\n> å·¥ç¨‹èƒ½åŠ›çš„æ ¸å¿ƒåœ¨äºå‘ç°é—®é¢˜ã€åˆ†æé—®é¢˜å’Œè§£å†³é—®é¢˜ã€‚\nèƒ½å¤Ÿå‘ç°é—®é¢˜ï¼Œè¯´æ˜æ‹¥æœ‰åˆ›æ–°èƒ½åŠ›å’Œè‡ªè§‰æ€§çš„æ€åº¦ã€‚\nè€Œå¯¹äºå·²ç»å‘ç”Ÿçš„é—®é¢˜ï¼Œèƒ½å¤Ÿæ…å¯†åœ°è¿›è¡Œåˆ†æã€å®šä½ï¼Œç»§è€Œå¿«é€Ÿè§£å†³ï¼Œè¿™æ ·æ‰çœŸæ­£åˆ°äº†â€œçŸ¥å…¶ç„¶ï¼ŒçŸ¥å…¶æ‰€ä»¥ç„¶â€çš„å¢ƒç•Œã€‚\n- å¿«é€Ÿå­¦ä¹ èƒ½åŠ›\n> è®¡ç®—æœºè¡Œä¸šä¸­ï¼ŒçŸ¥è¯†çš„è¿­ä»£æ˜¯éå¸¸å¿«çš„ã€‚å°±å¥½æ¯”ï¼Œ2014å¹´å·¦å³Hadoopåˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶æ˜¯ä¸»æµçš„ï¼Œä½†åˆ°2017å¹´ï¼ŒåŸºäºå†…å­˜è®¡ç®—çš„Sparkæ¡†æ¶æˆäº†åˆ†å¸ƒå¼å¤„ç†çš„æ–°å® ã€‚å¦‚æœä¸€ä¸ªä»ä¸šè€…æ²¡æœ‰å¾ˆå¼ºçš„å­¦ä¹ ã€é€‚åº”å’Œçªç ´èƒ½åŠ›ï¼Œæ˜¯ä¸è¡Œçš„ã€‚\nå¥½çš„å­¦ä¹ èƒ½åŠ›å‰ææ˜¯ï¼šæ‹¥æœ‰ä¸€ä¸ªå¥½çš„å­¦ä¹ æŠ€å·§ï¼Œåœ¨å­¦ä¹ ä¹‹åˆå°±æ˜ç™½å­¦ä¹ çš„ç›®çš„æ˜¯ä»€ä¹ˆã€‚ç„¶åå›´ç»•è¯¥ç›®çš„ï¼Œåˆ—å‡ºä¸€ç³»åˆ—çš„é—®é¢˜ï¼Œç„¶ååœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­è¿›è¡Œè§£å†³ï¼ŒåŒæ—¶è¿›è¡Œæ‰‹åŠ¨å®è·µï¼Œæ€»ç»“å’Œç§¯ç´¯ç»éªŒã€‚\n- æ–‡æ¡£æ¢³ç†èƒ½åŠ›\n> å·¥ç¨‹èƒ½åŠ›çš„å¼ºå¼±å¾ˆå¤šæ—¶å€™ä½“ç°åœ¨æ–‡æ¡£ä¸Šã€‚æ˜¯å¦å®Œæˆè¿‡ä¸€ä¸ªé¡¹ç›®ï¼Œå¯¹é¡¹ç›®çš„ç†è§£æ˜¯ä¸ä¸€æ ·çš„ã€‚å¯¹é¡¹ç›®æ˜¯å¦æœ‰æ·±å…¥çš„æ€è€ƒï¼Œå†™å‡ºçš„æ–‡æ¡£æ·±æµ…ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚\nä¸€ä¸ªä¼˜ç§€çš„æ–‡æ¡£ï¼Œé™¤äº†å¯¹è‡ªå·±ï¼Œå¯¹äºå›¢é˜Ÿã€ä»–äººæ¥è¯´ä¹Ÿæ˜¯ååˆ†é‡è¦çš„ã€‚\n- äº§å“è´¨é‡è´£ä»»å¿ƒ\n> å¥½çš„å·¥ç¨‹èƒ½åŠ›è¿˜è¦æ‹¥æœ‰ä¸€ä¸ªè´Ÿè´£ä»»çš„å¿ƒã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œä¸Šçº§äº¤ç»™ä½ ä¸€ä¸ªä»»åŠ¡ï¼Œä½ å¦‚æœæ•·è¡äº†äº‹ï¼Œé‚£ä¹ˆä½ åœ¨è¿™ä¸ªå²—ä½ä¸Šæ˜¯èµ°ä¸è¿œçš„ã€‚\n- æ²Ÿé€šåä½œ\n> åœ¨å®é™…çš„å·¥ä½œç¯å¢ƒä¸­ï¼Œå¾€å¾€æ¯ä¸ªä»»åŠ¡éƒ½éœ€è¦å¤šäººåä½œå®Œæˆã€‚ä¸€ä¸ªä»ä¸šè€…ï¼Œå¦‚æœä¸æ‡‚å¾—æ²Ÿé€šå’Œåä½œï¼Œæ‰€å®Œæˆçš„ä»»åŠ¡å¿…ç„¶æ˜¯ä¸èƒ½æ»¡è¶³éœ€æ±‚çš„ã€‚\n\n-----\n\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n\n\n---\n<font color=red>æ³¨ï¼šä»¥ä¸Šå†…å®¹æ‘˜è‡ªäºã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ï¼Œè¯¥ä¹¦æ˜¯å°ç¼–è¿‘æœŸè¦ä¸Šçš„ä¸€æœ¬å›¾ä¹¦ï¼Œé¢„è®¡æœ¬æœˆï¼ˆ7æœˆæœ«ï¼‰å¯åœ¨äº¬ä¸œï¼Œå½“å½“ä¸Šçº¿ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è¿›è¡Œå…³æ³¨ï¼</font>\n<center><img src=\"https://img-blog.csdnimg.cn/20190708234949217.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=50% /></center>","tags":["æ¨èç³»ç»Ÿå¼€å‘å®æˆ˜"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"Thinkgamer's ç®€å†","url":"/2019/06/21/éšç¼˜/å…³äºæˆ‘/","content":"\n---\n# ä¸ªäººä¿¡æ¯\nI&nbsp;&nbsp;&nbsp;Dï¼š&nbsp;&nbsp;&nbsp;&nbsp;**Thinkgamer**\né‚®ç®±ï¼š&nbsp;&nbsp;&nbsp;&nbsp;**thinkgamer@163.com**\næ¯•ä¸šï¼š&nbsp;&nbsp;&nbsp;&nbsp;**æ²ˆé˜³èˆªç©ºèˆªå¤©å¤§å­¦-è®¡ç®—æœºå­¦é™¢-è½¯ä»¶å·¥ç¨‹**\nå°±èŒï¼š&nbsp;&nbsp;&nbsp;&nbsp;**åŒ—äº¬ | æŸå‚ | ç®—æ³•å·¥ç¨‹å¸ˆ**\n\n<!--More-->\n\n---\n\n# æŠ€æœ¯å›­åœ°ï¼š\n\n- CSDNï¼šhttp://blog.csdn.net/gamer_gyt\n- Githubï¼šhttps://github.com/Thinkgamer\n- çŸ¥ä¹: https://www.zhihu.com/people/thinkgamer/activities\n- å…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\n\n\n\n<img src=\"/assets/img/gongzhonghao.jpg\" width=\"250px\" height=\"250px\">\n\n---\n\n# å·¥ä½œç»å†\n## 2017-12ï½2019-06 | äº¬ä¸œå•†åŸ\n- ä¸ªæ€§åŒ–æ¶ˆæ¯Push\n\n> ç®€ç§°â€œç§è‰â€ã€‚é’ˆå¯¹äº¬ä¸œç”¨æˆ·è¿›è¡Œæ¶ˆæ¯çš„ä¸ªæ€§åŒ–Pushï¼Œå¢å¼ºç”¨æˆ·é»æ€§å’Œäº¤äº’ã€‚\n> è´Ÿè´£ç§è‰æ•´ä¸ªè”åŠ¨æ–¹æ¡ˆï¼Œç»„ç»‡ä¼šè®®è¿›è¡Œè®¨è®ºå’Œéœ€æ±‚ä¸‹å‘ï¼Œèµ„æºå®‰æ’ç­‰ã€‚\n> åŸºäºæœºå™¨å­¦ä¹ çš„ä¸ªæ€§åŒ–æ¶ˆæ¯pushæ¨¡å‹å¼€å‘ï¼Œè®­ç»ƒï¼Œè°ƒä¼˜ï¼Œä¸Šçº¿ç­‰ã€‚\n> æ·±åº¦å­¦ä¹ æ¨¡å‹è°ƒç ”ï¼ŒåŸºäºå…¬å¸å†…éƒ¨å¹³å°ï¼Œä¸Šçº¿åŸºäºtensorflow-servingçš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œæ•ˆæœè¾ƒMLæ¨¡å‹æå‡æ˜¾è‘—ã€‚\n\n- Plusä¼šå‘˜ä¸ªæ€§åŒ–æ¨è\n\n> ç†è§£å†…éƒ¨æ¨èæ¶æ„åŸç†ï¼Œè´Ÿè´£å¼€å‘æ–¹æ¡ˆï¼Œèµ„æºå®‰æ’ã€‚\n> åŸºäºæœºå™¨å­¦ä¹ çš„ä¸ªæ€§åŒ–æ¶ˆæ¯pushæ¨¡å‹å¼€å‘ï¼Œè®­ç»ƒï¼Œè°ƒä¼˜ï¼Œä¸Šçº¿ç­‰ã€‚\n> ç›¸å…³CTRé¢„ä¼°æ¨¡å‹ç ”ç©¶ä¸åœ¨plusä¸šåŠ¡æ•°æ®é›†ä¸Šçš„ç¦»çº¿æµ‹è¯•ã€‚\n\n- å•†å“ä»·æ ¼æ®µæ¨¡å‹\n\n> åŸºäºKMeansæ„å»ºå•†å“ä»·æ ¼æ®µæ¨¡å‹ï¼Œå®ç°äº†åŸºäºMRå’ŒSparkä¸¤ä¸ªç‰ˆæœ¬çš„ä»£ç ã€‚\n\n- å•†å“è´¨é‡åˆ†æ¨¡å‹\n\n> åŸºäºçº¿æ€§æ¨¡å‹æ„å»ºå•†å“è´¨é‡åˆ†æ¨¡å‹ï¼Œç”¨æˆ·æ¨èæ¶æ„ä¸­çš„å¬å›ç²—æ’ã€‚ \n\n- ç‰¹å¾ç›‘æ§æ¨¡å‹\n\n> æ•°æ®å’Œç‰¹å¾å†³å®šäº†æœºå™¨å­¦ä¹ çš„ä¸Šé™,è€Œæ¨¡å‹å’Œç®—æ³•åªæ˜¯é€¼è¿‘è¿™ä¸ªä¸Šé™ã€‚ç‰¹å¾å¯¹äºæ¨¡å‹æ¥è¯´æå…¶é‡è¦ï¼Œå› ä¸ºå¯¹äºç‰¹å¾çš„ç›‘æ§ååˆ†æœ‰å¿…è¦ï¼Œè¯¥æ¨¡å‹æ”¯æŒä½¿ç”¨è€…è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡å’Œç›‘æ§å­—æ®µï¼Œèƒ½å¤Ÿæœ‰æ•ˆçš„å‡å°‘å‡ºç°é—®é¢˜æ—¶çš„æ’æŸ¥æ—¶é—´æé«˜æ•ˆæœï¼Œå¹¶è¿›è¡Œé¢„è­¦ã€‚\n\n- åŸºç¡€æ•°æ®å¼€å‘\n\t- ä¸šåŠ¡å†…ç‰¹å¾å¼€å‘\n\t- å…¨ç«™ç‰¹å¾å¼€å‘\n\t- å¬å›æ•°æ®å¼€å‘\n\n## 2016-10ï½2017-12 | åŒ—äº¬ä¸‡ç»´æ˜Ÿè¾°ç§‘æŠ€æœ‰é™å…¬å¸\n- æ­å»ºåŸºäº Hadoop å’Œ ELK æŠ€æœ¯æ ˆçš„æ—¥å¿—åˆ†æç³»ç»Ÿ\n\n> å‚ä¸è®¾è®¡äº†åŸºäº ELK çš„æ—¥å¿—åˆ†æç³»ç»Ÿï¼Œæå‡ºå¹¶æ­å»ºäº† Hadoop æ•°æ®å¤‡ä»½ç³»ç»Ÿï¼Œç ”ç©¶äº† ELK å‘¨è¾¹çš„\nå¼€æºäº§å“ ï¼Œå­¦ä¹ å¹¶ä½¿ç”¨ rails å®ç° es æ•°æ®çš„å¿«ç…§å¤‡ä»½ã€‚\n\n- å¼‚å¸¸æ£€æµ‹ç®—æ³•ç ”ç©¶ä¸å®ç°\n\n> 1ï¼šæ ¹æ®åˆä½œæ–¹æä¾›çš„ wlan ä¸Šç½‘æ•°æ®ï¼Œå¯¹ç”¨æˆ·è¿›è¡Œè‚–åƒåˆ»ç”»ï¼Œä»è€Œå¯¹åå…¥æ•°æ®è¿›è¡Œå¼‚å¸¸å€¼ä¼°è®¡ã€‚\n\n> 2ï¼šç ”ç©¶åŸºäºæŒ‡æ•°å¹³æ»‘å’Œçº¿æ€§å›å½’çš„å¼‚å¸¸å€¼æ£€æµ‹ï¼Œå¹¶ä½¿ç”¨ python çš„ elasticsearch è¿›è¡Œå®ç°ã€‚\n\n- ä¸­å½©/å¾·å·é“¶è¡Œæ—¥å¿—å®¡è®¡é¡¹ç›®\n\n> åˆ©ç”¨å…¬å¸çš„æ—¥å¿—åˆ†æç³»ç»Ÿå¯¹ä¸­å›½ç¦åˆ©å½©ç¥¨å’Œå¾·å·é“¶è¡Œçš„æ—¥å¿—è¿›è¡Œåˆ†æï¼Œå¹¶å½¢æˆå®‰å…¨äº‹ä»¶ï¼Œæå‡ºç›¸åº”çš„æ•´æ”¹å’Œè§£å†³æ„è§ï¼Œå½¢æˆæœˆåº¦æŠ¥å‘Šã€‚\n\n## 2016-07ï½2016-09 | åŒ—äº¬å¹¿è”è¾¾è½¯ä»¶æœ‰é™å…¬å¸\n> å®ä¹ ä»¥è¯¾é¢˜å½¢å¼ï¼ˆè¯¾é¢˜ä¸ºï¼šåŸºäºè´¨é‡æ•°æ®çš„æ•°æ®åˆ†æå¹³å°æ­å»ºï¼‰å±•å¼€ï¼Œåˆ©ç”¨ Hadoop ç­‰å¼€æºç»„ä»¶æ­å»ºäº† 5 å°åˆ†å¸ƒå¼ç³»ç»Ÿï¼ŒåŒ…å« Hadoopï¼ŒHiveï¼ŒSparkï¼ŒZookeeperï¼ŒSqoop å’Œ Hbaseï¼Œåœ¨è¯¥å¹³å°ä¸Šå®Œæˆäº†è±†ç“£å½±è¯„æ•°æ®åˆ†æ Demo\n\n\n-----\n# æŠ€èƒ½æŒæ¡\n- ç†Ÿç»ƒæŒæ¡åŸºäºæœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ çš„CTRé¢„ä¼°ç®—æ³•ï¼ŒåŒ…æ‹¬GBDT/LR/FM/FFM/FTRL/XGBoost/Wide&Deep/DeepFM/DNN/FNNç­‰ã€‚\n- ç†Ÿæ‚‰æ¨èç³»ç»Ÿçš„æ•°æ®æµå’Œè¿‡æ»¤ï¼Œå¬å›ï¼Œæ’åºï¼Œå±•ç¤ºç­‰æ¶æ„ã€‚\n- ç†Ÿç»ƒæŒæ¡ç›¸å…³æœºå™¨å­¦ä¹ ç®—æ³•å¹¶ç”¨æ¥æ„å»ºåŸºæœ¬æ¨¡å‹ã€‚\n- ç†Ÿç»ƒç”¨æˆ·ç”»åƒ/ç‰©å“ç”»åƒ/ç‰¹å¾å·¥ç¨‹ã€‚\n- ç†Ÿç»ƒSpark/MR/Hive/Pythonå¼€å‘ï¼Œäº†è§£ç›¸å…³å¤§æ•°æ®äº§å“ã€‚\n- äº†è§£çˆ¬è™«/Webåç«¯å¼€å‘ï¼Œæ›¾å¼€å‘å¤šä¸ªåŸºäºDjangoçš„ç½‘ç«™åç«¯ã€‚\n- äº†è§£å¼ºåŒ–å­¦ä¹ /è¿ç§»å­¦ä¹ /NLPã€‚\n- ç†Ÿæ‚‰ELKæŠ€æœ¯æ ˆ/Linux/Dockerã€‚\n\n----\n\n# å¤§å­¦ç»å†\n\n## é¡¹ç›®ç»å†\n- åŸºäº Hadoop å’Œæœºå™¨å­¦ä¹ çš„åšå®¢ç»Ÿè®¡åˆ†æå¹³å°\n\n> é‡‡ç”¨ Django ä½œä¸º Web å¼€å‘åŸºç¡€ï¼ŒPython çˆ¬å–äº† CSDN åšå®¢çš„éƒ¨åˆ†æ•°æ®ï¼Œå­˜å‚¨åˆ° hdfs ä¸Šï¼Œåˆ©ç”¨ MapReduce å¯¹æ•°æ®è¿›è¡Œäº†ç¦»çº¿è®¡ç®—ï¼Œå°†è§£æå¥½çš„å­—æ®µå­˜å‚¨åˆ° Hive ä¸­ï¼Œåˆ©ç”¨ python å¼€å‘å®ç°äº†ååŒè¿‡æ»¤ç®—æ³•å’Œ PangRank ç®—æ³•ã€‚æœ€ç»ˆæ­¤é¡¹ç›®åœ¨è¾½å®çœè®¡ç®—æœºä½œå“å¤§èµ›ä¸­è·å¾—äºŒç­‰å¥–ï¼Œä¸­å›½å¤§å­¦ç”Ÿè®¡ç®—æœºä½œå“å¤§èµ›ä¸­è·å¾—ä¸‰ç­‰å¥–ã€‚\n\n- å›¾ä¹¦æ¨èç³»ç»Ÿ\n\n> python çˆ¬å–äº†è±†ç“£å›¾ä¹¦æ•°æ®ï¼Œå¯¹æ•°æ®è¿›è¡Œæ¸…æ´—ä¹‹åï¼Œä½¿ç”¨åŸºäº Item å’Œ User çš„ååŒè¿‡æ»¤ç®—æ³•å¯¹ç™»å½•ç”¨æˆ·äº§ç”Ÿå›¾ä¹¦æ¨èï¼Œæ­¤é¡¹ç›®ä¸ºå¤§ä¸‰æœŸé—´ä¸ºä¸€ä¸ªç½‘å‹åšçš„æ¯•ä¸šè®¾è®¡ã€‚\n\n## è£èª‰å¥–åŠ±\n\n- å•é¡¹ä¸€ç­‰å¥–å­¦é‡‘  * 2\n- ç»¼åˆäºŒç­‰å¥–å­¦é‡‘  * 2\n- å•é¡¹æ”¯æ´æœåŠ¡æ ‡å…µ\n- ä¼˜ç§€å›¢å¹² * 2\n- è¾½å®çœACMä¼˜ç§€å¿—æ„¿è€…\n- æ ¡ACMä¸‰ç­‰å¥–\n- æ²ˆé˜³èˆªç©ºèˆªå¤©å¤§å­¦è®¡ç®—æœºä½œå“å¤§èµ›äºŒç­‰å¥–ã€ç½‘ç«™ã€‘\n- è¾½å®çœè®¡ç®—æœºä½œå“å¤§èµ›äºŒç­‰å¥–ã€åšå®¢ç»Ÿè®¡åˆ†æç³»ç»Ÿã€‘\n- ä¸­å›½å¤§å­¦ç”Ÿä½œå“å¤§èµ›ä¸‰ç­‰å¥–ã€åšå®¢ç»Ÿè®¡åˆ†æç³»ç»Ÿã€‘\n\n## å·¥ä½œç»å†\n\n- åŠ©ç†è¾…å¯¼å‘˜ | 2014.09-2015.07\n\n> è®¡ç®—æœºå­¦é™¢ 2014 çº§æ–°ç”ŸåŠ©ç†è¾…å¯¼å‘˜ï¼ŒååŠ©è¾…å¯¼å‘˜è¿›è¡Œå¤§ä¸€ç­çº§çš„æ—¥å¸¸ç®¡ç†\n\n- æ´»åŠ¨éƒ¨éƒ¨é•¿ | 2014.09-2015.07\n\n> çˆ±å¿ƒè”åˆä¼šæ´»åŠ¨éƒ¨éƒ¨é•¿ï¼Œè´Ÿè´£ç›¸å…³æ´»åŠ¨çš„å®£ä¼ æ¨å¹¿ä¸æ‰§è¡Œ\n\n- ç­çº§å›¢æ”¯ä¹¦ | 2013.09-2017.06\n\n> ååŠ©è¾…å¯¼å‘˜è¿›è¡Œç­çº§æ—¥å¸¸çš„ç®¡ç†å’Œç›¸å…³å…±é’å›¢å·¥ä½œçš„å¼€å±•\n\n\n-----\n\n# è‡ªæˆ‘è¯„ä»·\n- ä¸æœè¾“ï¼Œçˆ±é’»ç ”ï¼Œå…·æœ‰è‡ªå­¦èƒ½åŠ›å’Œè§£å†³é—®é¢˜èƒ½åŠ›ã€‚\n- å–œæ¬¢çœ‹ä¹¦ï¼Œçœ‹æ–‡ç« ï¼Œæ•´ç†ç¬”è®°ã€‚\n- æ–‡è‰ºCoderã€‚\n\n---\n\n# è”ç³»æˆ‘ï¼š\n\n- <img src=\"/assets/img/myweixin.png\" height=\"300\" width=\"220\" />\n \nPSï¼šåŠ æˆ‘å¾®ä¿¡ï¼Œæ‹‰ä½ è¿›æ•°æ®ä¸ç®—æ³•äº¤æµç¾¤ï¼Œè¿›è¡Œå¤´è„‘é£æš´\n","tags":["éšæ‰‹è®°"],"categories":["éšæ‰‹è®°"]},{"title":"é™†æœˆï¼Œæˆ‘æƒ³è¯´çš„å’Œæˆ‘è¦æ”¹åäº†ï¼","url":"/2019/06/21/éšæ‰‹è®°/é™†æœˆï¼Œæˆ‘æƒ³è¯´çš„å’Œæˆ‘è¦æ”¹åäº†ï¼/","content":"> å½“ä½ çœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ä¸è¦æƒŠè®¶ï¼Œå› ä¸ºæˆ‘å·²ç»ä¸¤ä¸ªæœˆæ²¡æœ‰å‘æŠ€æœ¯æ–‡ç« äº†ï¼çªç„¶åˆæ¥ç€æ›´æ–°äº†ï¼Œä¸è¦å®³æ€•ï¼Œå› ä¸ºè¿™å°±æ˜¯æˆ‘ï¼Œæˆ‘éƒ½ä¸ç¡®å®šæˆ‘ä»€ä¹ˆæ—¶å€™ä¼šå‘å‡ºä¸€ç¯‡æ–‡ç« æ¥ã€‚ é¦–å…ˆè¦æ˜ç¡®çš„æ˜¯è¿™ä¸æ˜¯ä¸€ç¯‡æŠ€æœ¯æ–‡ç« ï¼Œåªæ˜¯è¿™ä¸€æ®µæ—¶é—´å†…æˆ‘çš„ä¸€äº›èƒ¡æ€ä¹±æƒ³å’Œä¸œæ‹¼è¥¿å‡‘ã€‚å…¶ä¸­ä¸å…åŒ…å«äº†è¿‘æ®µæ—¶é—´æˆ‘çš„ç»å†å’Œæ€è€ƒï¼Œä¹Ÿä¼šåŒ…å«ä¸€äº›æ¥ä¸‹æ¥åšäº‹çš„è®¡åˆ’å’Œæ€è€ƒã€‚\n\n<!--More-->\n\n---\n\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\nä¸ªäººç½‘ç«™ï¼šhttp://thinkgamer.github.io\n\n<a href=\"https://mp.weixin.qq.com/s?__biz=MzI2MDU3OTgyOQ==&mid=2247484950&idx=1&sn=0ac8fb054e7fc2f547672dfd27228d80&chksm=ea66ce8cdd11479ab31558baf6c650b3e80515742605b06dc9f1ff81a01a2fc5c73c0b44b7a0&token=1671615317&lang=zh_CN#rd\">ç‚¹å‡»é˜…è¯»åŸæ–‡</a>\n\n---\n# Chapter 1\n\n5æœˆå’Œ6æœˆå¯¹æˆ‘æ¥è®²å…¶å®æŒºéš¾ç†¬çš„ï¼Œäº”ä¸€å›å®¶å¼€å§‹æ‰“ç®—è£…ä¿®æˆ¿å­ï¼Œå›å®¶äº†7å¤©ï¼Œæ¯å¤©éƒ½åœ¨å¥”æ³¢ï¼Œç»ˆäºåœ¨å›äº¬å‰ä¸€å¤©æŠŠç›¸å…³äº‹æƒ…æ•²å®šã€‚å›äº¬ä¹‹åï¼Œæˆ‘çªç„¶èŒç”Ÿäº†ä¸€ä¸ªå¿µå¤´â€”â€”è¾èŒï¼Œæœ€ç»ˆè¿™ä¸ªå¿µå¤´åœ¨æˆ‘å¿ƒé‡Œç”Ÿäº†æ ¹ï¼Œå‘äº†èŠ½ï¼Œé•¿æˆäº†å‚å¤©å¤§æ ‘ã€‚è¿™å…¶ä¸­æœ‰å¾ˆå¤šåŸå› ï¼Œå¹¶ä¸æ˜¯å› ä¸ºæŸä¸€ä»¶äº‹è€Œä¿ƒå°±çš„ï¼Œä¸æ˜¯äº¬ä¸œä¸å¥½ï¼Œä¹Ÿä¸æ˜¯æˆ‘æœ‰å¤šä¹ˆä¼˜ç§€ï¼Œè€Œæ˜¯çºµæ¨ªäº¤é”™çš„å¿ƒç»“æœ€ç»ˆéƒ½æŒ‡å‘äº†é‚£ä¸€ä¸ªæ–¹å‘ã€‚\n\n\nè¿‡äº†ä»Šå¤©ï¼Œæˆ‘è‹¥å†è¸è¿›è¿™åº§å¤§æ¥¼ï¼Œææ€•å°±æ˜¯ä»¥ä¸€ä¸ªâ€œè®¿å®¢â€çš„èº«ä»½è¿›æ¥äº†ï¼Œä¸€åº¦ç§‹å†¬ï¼Œä¸¤ç•ªæ˜¥å¤ï¼Œæ„Ÿæ©äº¬ä¸œå¸¦ç»™æˆ‘çš„æˆé•¿å’Œç»å†ï¼Œè®©æˆ‘è‡ªå·±æœ‰äº†ä¸€ä¸ªè´¨çš„æ”¹å˜ï¼Œä¹Ÿå¾ˆå›¢é˜Ÿå’Œè€å¤§ä»¬çš„å¸®åŠ©ï¼Œé¼“åŠ±ï¼Œè®©æˆ‘èƒ½å¤Ÿåœ¨å·¥ä½œå’Œç”Ÿæ´»ä¸­å¾—å¿ƒåº”æ‰‹ã€‚ä½†å¤©ä¸‹æ²¡æœ‰ä¸æ•£çš„å®´å¸­ï¼Œç›¸é‡æ˜¯ç¼˜ï¼Œå†è§æ˜¯ä»½ï¼Œä¸ç®¡èº«å¤„ä½•æ–¹ï¼Œå¿ƒä¸­çš„é‚£ä»½æƒ…ä¸ä¼šå¿˜ã€‚ä»Šæ—¥æŒ¥æ‰‹ï¼Œå†è§å·²æ˜¯æ±Ÿæ¹–ã€‚ç¥ç¦å½¼æ­¤ï¼Œé€†é£ç¿»ç›˜ï¼Œæ¶…æ§ƒé‡ç”Ÿï¼\n\næˆ‘ä¸ç¡®å®šç°åœ¨çš„æˆ‘æ˜¯ä¸€ä¸ªæ€ä¹ˆæ ·çš„æ°´å¹³ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“æˆ‘æ¥ä¸‹æ¥çš„å·¥ä½œä¼šæ˜¯ä¸€åœºæ€æ ·çš„ç»å†ï¼Œä½†æ˜¯ä¸‡å˜ä¸ç¦»å…¶å®—ï¼Œä¸ç®¡åœ¨å“ªï¼Œåœ¨æ¥ä¸‹æ¥å‡ å¹´å†…ï¼Œæˆ‘è¦åšçš„å°±æ˜¯å¥½å¥½æ²‰æ·€è‡ªå·±ã€‚æ— è®ºæ˜¯ä¸ºäººå¤„äº‹ï¼Œè¿˜æ˜¯å·¥ä½œç”Ÿæ´»ï¼Œéƒ½è¦é™ä¸‹æ¥ï¼Œå¥½å¥½å¸æ”¶ä¸€ä¸‹ï¼æœ‰æ—¶å€™èµ°çš„å¤ªå¿«çœŸçš„ä¸ä¸€å®šæ˜¯å¥½äº‹ã€‚\n\nè½¬çœ¼é—´å·²ç»å…­æœˆäº†ï¼Œå²æœˆçœŸçš„æ˜¯ä¸€åœºæœ‰å»æ— å›çš„æ¸¸æˆï¼Œæƒ³æƒ³æ›¾ç»è‡ªå·±ç«‹çš„é‚£äº›flagï¼Œç°åœ¨çœŸçš„æ˜¯å•ªå•ªæ‰“è„¸äº†ï¼Œä½†æ— è®ºå¦‚ä½•ï¼Œæœ‰æ¢¦å›ºç„¶æ˜¯å¥½çš„ï¼Œå› ä¸ºæœ‰æ¢¦æ‰æœ‰æ–¹å‘ï¼Œæ²¡æœ‰æ¢¦ä½ å°±æ²¡æœ‰æ–¹å‘ã€‚\n\nè¿‡å®Œäº†åœ¨è¿™çš„æœ€åä¸€ä¸ª618ï¼Œå°±è¦å‘Šè¾äº†ï¼ŒåŸè°…åœ¨è¿™ä¸ªæ—¶å€™æˆ‘åšäº†ä¸€ä¸ªâ€œé€ƒå…µâ€ï¼Œä½†æ— é£ä¸èµ·æµªï¼Œç©ºç©´ä¸æ¥é£ï¼ŒçœŸå¿ƒå¸Œæœ›äº¬ä¸œèƒ½å¥½ï¼Œèƒ½å¤Ÿåœ¨æœªæ¥çš„æ—¶ä»£ä¸­ç«™èµ·æ¥ï¼Œåšä¸€äº›èƒ½å¤Ÿæ”¹å˜ä¸–ç•Œçš„äº‹æƒ…ï¼Œæ„¿ä½ ä¸å›ºæ­¥è‡ªå°ï¼Œæ„¿ä½ èƒ½ä»»äººå”¯è´¤ï¼Œæ„¿ä½ èƒ½æ–—å¿—æ˜‚æ‰¬ï¼Œæ„¿ä½ èƒ½è®©å‹‡å£«ä¸æµæµªï¼Œæ„¿ä½ èƒ½è®©æ™ºè€…æŒºè„Šæ¢ã€‚æ„¿æˆ‘ä»¬éƒ½èƒ½è¢«æ—¶å…‰å–„å¾…ï¼Œéƒ½èƒ½æœªæ¥å¯æœŸã€‚\n\n# Chapter 2\n\nè¿™ä¸ªå…¬ä¼—å·æœ€æ—©å«ã€Šç å†œæ•…äº‹å¤šã€‹ï¼Œå› ä¸ºæˆ‘æœ¬æ˜¯ä¸€ä¸ªâ€œç å†œâ€ï¼Œæˆ‘å–œæ¬¢æ—…è¡Œï¼Œå–œæ¬¢æ‘„å½±ï¼Œå–œæ¬¢å†™ä½œï¼Œè¿˜å–œæ¬¢æ•²ä»£ç ï¼Œæˆ‘è§‰å¾—æˆ‘æ›¾ç»çš„ç»å†é¢‡å¤šï¼Œå¦‚æœå›´ç‚‰å°åï¼Œæˆ‘èƒ½æ»”æ»”è¯‰è¯´ã€‚åæ¥ä¸çŸ¥æ€ä¹ˆçš„æˆ‘åˆè§‰å¾—è¿™ä¸ªåå­—å¾ˆLowï¼Œæ²¡æœ‰å®šä½ï¼Œæ²¡æœ‰æ–¹å‘ï¼Œæ›´åƒæ˜¯ä¸€ä¸ªå¤§æ‚çƒ©ï¼Œäºæ˜¯æˆ‘æ€å‰æƒ³åï¼Œèµ·äº†ä¸ªã€Šæ•°æ®ä¸ç®—æ³•è”ç›Ÿã€‹çš„åå­—ï¼Œå…¶å¯“æ„æ˜¯æŠŠå¤§æ•°æ®å’Œç®—æ³•ç»“åˆèµ·æ¥ï¼Œé‡å¡‘ä¸–ç•Œï¼æ„¿æ™¯å¾ˆå¤§ï¼Œä½†å…¶å®æ²¡ä»€ä¹ˆåµç”¨ï¼Œæˆ‘å¤ªæ¸ºå°äº†ï¼Œæ¸ºå°çš„åƒæ˜¯æ²§æµ·ä¸€ç²Ÿï¼Œåƒæ˜¯æµ©ç€šå®‡å®™ä¸­çš„æ—¥æœˆæ˜Ÿè¾°ï¼Œæˆ‘è§‰å¾—æˆ‘é…ä¸ä¸Šè¿™ä¸ªåå­—ã€‚\n\næˆ‘çš„æ–°ä¹¦ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹å³å°†ä¸Šå¸‚ï¼Œè¶ç€è¿™ä¸ªæœºä¼šï¼Œæˆ‘æƒ³æŠŠæˆ‘çš„å…¬ä¼—å·å®šä½åˆ°æ¨èç³»ç»Ÿç›¸å…³çš„ï¼Œä½†æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ¨èï¼Œæœç´¢ï¼Œå¹¿å‘Šå…¶å®éƒ½å·®ä¸å¤ªå¤šï¼Œæ— éå°±æ˜¯CTR/CVRã€‚è‡³äºç”¨ä»€ä¹ˆæŠ€æœ¯å»è§£å†³ï¼Œä¸é¢„ä¼°ï¼Œè¿™éƒ½å¯ä»¥ã€‚æ‰€ä»¥å‘¢ï¼Œæˆ‘æ‰“ç®—ç»™æˆ‘çš„å…¬ä¼—å·é‡æ–°èµ‹äºˆä¸€ä¸ªåå­—ã€Šæœç´¢ä¸æ¨èWikiã€‹ç”Ÿæ•ˆæ—¶é—´2019.06.22ï¼Œç›®å‰å°ç¼–ä»äº‹çš„æ˜¯æ¨èç®—æ³•ç›¸å…³çš„å·¥ä½œï¼Œååºä¹Ÿä¼šæ¶‰åŠæœç´¢/æ–‡æœ¬ç›¸å…³çš„å·¥ä½œï¼Œååºåœ¨æ›´æ–°æ–‡ç« ä¸Šä¹Ÿä¼šæœ‰æ‰€é€‰æå’Œæ³¨é‡æ–‡ç« çš„è¿ç»­æ€§ï¼Œä¹‹å‰æ›´æ–°æ–‡ç« ç®—æ˜¯éšæ„è‡ªç”±çš„æ›´æ–°ï¼Œä½†ä»Šåæˆ‘ä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šçº¦æŸè‡ªå·±ï¼Œå¸Œæœ›æˆ‘çš„è¯»è€…èƒ½å¤Ÿå’Œæˆ‘ä¸€èµ·è¿›æ­¥ï¼Œä¸€èµ·ç”¨æŠ€æœ¯æ”¹å˜ä¸–ç•Œï¼\n\næœ€åæˆ‘æƒ³è¯´çš„æ˜¯ï¼šå…¬å·è¿˜æ˜¯é‚£ä¸ªå…¬å·ï¼Œåªæ˜¯åå­—å˜äº†ï¼Œå°ç¼–è¿˜æ˜¯é‚£ä¸ªå°ç¼–ï¼Œåªæ˜¯è§„åˆ’æ›´æ¸…æ™°äº†ï¼é‚£ä¹ˆä½ è¿˜æ„¿æ„åšæˆ‘çš„è¯»è€…å—ï¼Ÿ\n\næ„¿ä½ é›¨å¤©æœ‰ä¼ï¼Œé»‘å¤©æœ‰ç¯ï¼Œä½™ç”Ÿæœ‰è‰¯äººï¼\n\næ„Ÿæ©ï¼Œç¥ç¦ï¼\n\n----\n\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n","tags":["éšæ‰‹è®°"],"categories":["éšæ‰‹è®°"]},{"title":"Sparkæ’åºç®—æ³•ç³»åˆ—ä¹‹ï¼ˆMLLibã€MLï¼‰LRä½¿ç”¨æ–¹å¼ä»‹ç»","url":"/2019/05/07/RecSys/Sparkä¸æ¨èç³»ç»Ÿ/Sparkæ’åºç®—æ³•ç³»åˆ—ä¹‹ï¼ˆMLLibã€MLï¼‰LRä½¿ç”¨æ–¹å¼ä»‹ç»/","content":"\n>ã€Sparkæ’åºç®—æ³•ç³»åˆ—ã€‘ä¸»è¦ä»‹ç»çš„æ˜¯ç›®å‰æ¨èç³»ç»Ÿæˆ–è€…å¹¿å‘Šç‚¹å‡»æ–¹é¢ç”¨çš„æ¯”è¾ƒå¹¿çš„å‡ ç§ç®—æ³•ï¼Œå’Œä»–ä»¬åœ¨Sparkä¸­çš„åº”ç”¨å®ç°ï¼Œæœ¬ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»LRç®—æ³•ã€‚\n\n<!--More-->\n\næœ¬ç³»åˆ—è¿˜åŒ…æ‹¬ï¼ˆæŒç»­æ›´æ–°ï¼‰ï¼š\n\n- [Sparkæ’åºç®—æ³•ç³»åˆ—ä¹‹GBDTï¼ˆæ¢¯åº¦æå‡å†³ç­–æ ‘ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/86695837)\n- Sparkæ’åºç®—æ³•ç³»åˆ—ä¹‹æ¨¡å‹èåˆï¼ˆGBDT+LRï¼‰\n- Sparkæ’åºç®—æ³•ç³»åˆ—ä¹‹XGBoost\n- Sparkæ’åºç®—æ³•ç³»åˆ—ä¹‹FTRLï¼ˆFollow-the-regularized-Leaderï¼‰\n- Sparkæ’åºç®—æ³•ç³»åˆ—ä¹‹FMä¸FFM\n\n\n\n\n# èƒŒæ™¯\né€»è¾‘å›å½’ï¼ˆLogistic Regressionï¼ŒLRï¼‰æ˜¯è¾ƒæ—©åº”ç”¨åœ¨æ¨èæ’åºä¸Šçš„ï¼Œå…¶å±äºçº¿æ€§æ¨¡å‹ï¼Œæ¨¡å‹ç®€å•ï¼Œå¯ä»¥å¼•å…¥æµ·é‡ç¦»æ•£ç‰¹å¾ï¼Œè¿™æ ·çš„å¥½å¤„å°±æ˜¯æ¨¡å‹å¯ä»¥è€ƒè™‘æ›´åŠ ç»†èŠ‚æˆ–è€…è¯´é’ˆå¯¹å…·ä½“ä¸ªä½“çš„å› ç´ ã€‚å¦‚æœæƒ³è¦å¼•å…¥éçº¿æ€§å› ç´ éœ€è¦åšç‰¹å¾äº¤å‰ï¼Œè¿™æ ·å¾ˆå®¹æ˜“äº§ç”Ÿç™¾äº¿ç‰¹å¾ï¼Œåœ¨å¾ˆæ—©ä¹‹å‰ctrå°±ä¸»è¦é å †äººåŠ›æç‰¹å¾å·¥ç¨‹å·¥ä½œæ¥æŒç»­ä¼˜åŒ–æ•ˆæœã€‚\n\nè™½ç„¶ç›®å‰åœ¨å·¥ä¸šç•ŒLRåº”ç”¨çš„å¹¶ä¸å¤šï¼Œä½†æ˜¯å¯¹äºåˆå­¦è€…,ä¸€äº›ä¸­å°ä¼ä¸šæˆ–è€…åº”ç”¨åœºæ™¯ä¸éœ€è¦è´Ÿè´£æ’åºæ¨¡å‹çš„æ—¶å€™ï¼ŒLRæ‰”ä¸å¤±ä¸ºä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚\n\nå…³äºLRçš„ç®—æ³•åŸç†ï¼Œè¿™é‡Œä¸åšè¿‡å¤šè¯´æ˜ï¼Œå¯å‚è€ƒï¼š\n- [å›å½’åˆ†æä¹‹é€»è¾‘å›å½’-Logistic Regression](https://blog.csdn.net/Gamer_gyt/article/details/80115252)\n- [çº¿æ€§æ¨¡å‹ç¯‡ä¹‹Logistic Regressionæ•°å­¦å…¬å¼æ¨å¯¼](https://mp.weixin.qq.com/s?__biz=MzI2MDU3OTgyOQ==&mid=100001113&idx=1&sn=711c3af661c54aa2757ca41d867cef6a#rd)\n\n\n# LRä»‹ç»\nLRçš„æ•°å­¦è¡¨è¾¾å¼å¯ä»¥ç®€å†™ä¸ºï¼š\n\n$$\nL(w,x,y)=log(1+exp(-yw^Tx))\n$$\nå¯¹äºäºŒåˆ†ç±»æ¨¡å‹ï¼ŒLRæ˜¯ä¸€ä¸ªåˆ†ç±»ç®—æ³•ï¼Œæ¨¡å‹è®¡ç®—å¾—åˆ°é¢„æµ‹å€¼åä¼šé€šè¿‡ä»¥ä¸‹å‡½æ•°è¿›è½¬åŒ–ã€‚\n$$\nf(z) = \\frac{1}{1+e^{-zx}}\n$$\nå¦‚æœL(w,x,y) > 0.5 åˆ™æ˜¯1 å¦åˆ™ä¸º0ã€‚å½“ç„¶åœ¨å®é™…åº”ç”¨è¿‡ç¨‹ä¸­ï¼Œå¹¶ä¸æ˜¯ä¸€å®šå–0.5ä½œä¸ºç•Œé™å€¼ï¼Œè€Œæ˜¯æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè°ƒæ•´ã€‚\n\näºŒè¿›åˆ¶å›å½’å¯ä»¥è½¬åŒ–ä¸ºå¤šåˆ†ç±»å›å½’é—®é¢˜ã€‚å…³äºå¤šåˆ†ç±»ä»‹ç»å’ŒåŸºäºSparkå®ç°å¤šåˆ†ç±»å¯å‚è€ƒ[å¤šåˆ†ç±»å®ç°æ–¹å¼ä»‹ç»å’Œåœ¨Sparkä¸Šå®ç°å¤šåˆ†ç±»é€»è¾‘å›å½’ï¼ˆMultinomial Logistic Regressionï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/86378882)\n\nåœ¨Spark.mllibåŒ…ä¸­æä¾›äº†ä¸¤ç§LRåˆ†ç±»æ¨¡å‹ï¼Œåˆ†åˆ«æ˜¯ï¼š\n- mini-batch gradient descentï¼ˆLogisticRegressionWithLBFGSï¼‰\n- L-BFGSï¼ˆLogisticRegressionWithSGDï¼‰\n\nä½†å®˜æ–¹ç»™å‡ºçš„å»ºè®®æ˜¯ï¼šæ¨èä½¿ç”¨LBFGSï¼Œå› ä¸ºåŸºäºLBFGSçš„LRæ¯”åŸºäºSGDçš„èƒ½æ›´å¿«çš„æ”¶æ•›ã€‚å…¶åŸè¯å¦‚ä¸‹ï¼š\n\n> We implemented two algorithms to solve logistic regression: mini-batch gradient descent and L-BFGS. We recommend L-BFGS over mini-batch gradient descent for faster convergence.\n\nè€Œä¸”LRWithLBFGSä¸ä»…æ”¯æŒäºŒåˆ†ç±»è¿˜æ”¯æŒå¤šåˆ†ç±»ï¼Œä½†LRWithSGDåªæ”¯æŒäºŒåˆ†ç±»ã€‚æ‰€ä»¥åç»­åªä»‹ç»ä¸‹Spark mllibä¸­çš„LogisticRegressionWithLBFGSç›¸å…³æ“ä½œã€‚\n\n# mllibä¸­çš„LRWithLBFGS\n\nè®¾ç½®å˜é‡å’Œåˆ›å»ºsparkå¯¹è±¡\n```\nval file = \"data/sample_libsvm_data.txt\"\nval model_path = \"model/lr/\"\nval model_param = \"numInterations:5,regParam:0.1,updater:SquaredL2Updater,gradient:LogisticGradient\"\n\nval spark = SparkSession.builder()\n\t.master(\"local[5]\")\n    .appName(\"LogisticRegression_Model_Train\")\n\t.getOrCreate()\nLogger.getRootLogger.setLevel(Level.WARN)\n```\n\næ‹†åˆ†æ•°æ®é›†\n```\n// è®°è½½æ•°æ®é›† å¹¶æ‹†åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†\nval data = MLUtils.loadLibSVMFile(spark.sparkContext,file).randomSplit(Array(0.7,0.3))\nval (train, test) = (data(0), data(1))\n```\n\nLRWithLBFGSæ¨¡å‹è®¾ç½®å‚æ•°\n```\n// å®šä¹‰åˆ†ç±»çš„æ•°ç›®ï¼Œé»˜è®¤ä¸º2ï¼Œæ˜¯logisticregressionçš„å‚æ•°\nprivate var numClass: Int = 2\n// å®šä¹‰æ˜¯å¦æ·»åŠ æˆªè·,é»˜è®¤å€¼ä¸ºfalseï¼Œæ˜¯logisticregressionçš„å‚æ•°\nprivate var isAddIntercept: Option[Boolean] = None\n// å®šä¹‰æ˜¯å¦åœ¨è®­ç»ƒæ¨¡å‹å‰è¿›è¡ŒéªŒè¯ï¼Œæ˜¯logisticregressionçš„å‚æ•°\nprivate var isValidateData: Option[Boolean] = None\n\n// å®šä¹‰è¿­ä»£çš„æ¬¡æ•°ï¼Œé»˜è®¤å€¼æ˜¯100ï¼ŒLBFGSçš„å‚æ•°\nprivate var numInterations: Option[Int] = None\n// å®šä¹‰æ­£åˆ™åŒ–ç³»æ•°å€¼ï¼Œé»˜è®¤å€¼æ˜¯0.0ï¼ŒLBFGSçš„å‚æ•°\nprivate var regParam: Option[Double] = None\n// å®šä¹‰æ­£åˆ™åŒ–å‚æ•°ï¼Œæ”¯æŒï¼šL1Updater[L1]ã€SquaredL2Updater[L2]ã€SimpleUpdater[æ²¡æœ‰æ­£åˆ™é¡¹]ï¼ŒLBFGSçš„å‚æ•°\nprivate var updater: Option[String] = None\n// å®šä¹‰è®¡ç®—æ¢¯åº¦çš„æ–¹å¼ï¼Œæ”¯æŒï¼šLogisticGradientã€LeastSquaresGradientã€HingeGradient ï¼ŒLBFGSçš„å‚æ•°\nprivate var gradient: Option[String] = None\n// äººå·¥å®šä¹‰çš„æ”¶æ•›é˜ˆå€¼\nprivate var threshold:Option[Double]=None\n// å®šä¹‰æ¨¡å‹æ”¶æ•›é˜ˆå€¼ï¼Œé»˜è®¤ä¸º 10^-6\nprivate var convergenceTol: Double= 1.0e-6\n```\n\nåˆ›å»ºæ¨¡å‹\n```\ndef createLRModel(model_param: String): LogisticRegressionWithLBFGS={\n\t// è®¾ç½®æ¨¡å‹å‚æ•°\n\tval optimizer = new LROptimizer()\n\toptimizer.parseString(model_param)\n\tprintln(s\"æ¨¡å‹è®­ç»ƒå‚æ•°ä¸ºï¼š${optimizer.toString}\")\n\n\t// åˆ›å»ºæ¨¡å‹å¹¶æŒ‡å®šç›¸å…³å‚æ•°\n\tval LRModel = new LogisticRegressionWithLBFGS()\n\t// è®¾ç½®åˆ†ç±»æ•°ç›®\n\tLRModel.setNumClasses(optimizer.getNumClass)\n\t// è®¾ç½®æ˜¯å¦æ·»åŠ æˆªè·\n\tif(optimizer.getIsAddIntercept.nonEmpty) {LRModel.setIntercept(optimizer.getIsAddIntercept.get)}\n\t// è®¾ç½®æ˜¯å¦è¿›è¡ŒéªŒè¯æ¨¡å‹\n\tif(optimizer.getIsValidateData.nonEmpty){LRModel.setValidateData(optimizer.getIsValidateData.get)}\n\t// è®¾ç½®è¿­ä»£æ¬¡æ•°\n\tif(optimizer.getNumInterations.nonEmpty){LRModel.optimizer.setNumIterations((optimizer.getNumInterations.get))}\n\t// è®¾ç½®æ­£åˆ™é¡¹å‚æ•°\n\tif(optimizer.getRegParam.nonEmpty) { LRModel.optimizer.setRegParam(optimizer.getRegParam.get) }\n\t// è®¾ç½®æ­£åˆ™åŒ–å‚æ•°\n\tif(optimizer.getUpdater.nonEmpty){\n\t\toptimizer.getUpdater match {\n\t\t\tcase Some(\"L1Updater\") => LRModel.optimizer.setUpdater( new L1Updater())\n\t\t\tcase Some(\"SquaredL2Updater\") => LRModel.optimizer.setUpdater(new SquaredL2Updater())\n\t\t\tcase Some(\"SimpleUpdater\") => LRModel.optimizer.setUpdater(new SimpleUpdater())\n\t\t\tcase _ => LRModel.optimizer.setUpdater(new SquaredL2Updater())\n\t\t}\n\t}\n\t// è®¾ç½®æ¢¯åº¦è®¡ç®—æ–¹å¼\n\tif(optimizer.getGradient.nonEmpty){\n\t\toptimizer.getGradient match {\n\t\t\tcase Some(\"LogisticGradient\") => LRModel.optimizer.setGradient(new LogisticGradient())\n\t\t\tcase Some(\"LeastSquaresGradient\") => LRModel.optimizer.setGradient(new LeastSquaresGradient())\n\t\t\tcase Some(\"HingeGradient\") => LRModel.optimizer.setGradient(new HingeGradient())\n\t\t\tcase _ => LRModel.optimizer.setGradient(new LogisticGradient())\n\t\t}\n\t}\n\t// è®¾ç½®æ”¶æ•›é˜ˆå€¼\n\tif(optimizer.getThreshold.nonEmpty){ LRModel.optimizer.setConvergenceTol(optimizer.getThreshold.get)}\n\telse {LRModel.optimizer.setConvergenceTol(optimizer.getConvergenceTol)}\n\n\tLRModel\n}\n```\n\næ¨¡å‹æ•ˆæœè¯„ä¼°\n```\n\tdef evaluteResult(result: RDD[(Double,Double,Double)]) :Unit = {\n\t\t// MSE\n\t\tval testMSE = result.map{ case(real, pre, _) => math.pow((real - pre), 2)}.mean()\n\t\tprintln(s\"Test Mean Squared Error = $testMSE\")\n\t\t// AUC\n\t\tval metrics = new BinaryClassificationMetrics(result.map(x => (x._2,x._1)).sortByKey(ascending = true),numBins = 2)\n\t\tprintln(s\"0-1 label AUC is = ${metrics.areaUnderROC}\")\n\t\tval metrics1 = new BinaryClassificationMetrics(result.map(x => (x._3,x._1)).sortByKey(ascending = true),numBins = 2)\n\t\tprintln(s\"score-label AUC is = ${metrics1.areaUnderROC}\")\n\t\t// é”™è¯¯ç‡\n\t\tval error = result.filter(x => x._1!=x._2).count().toDouble / result.count()\n\t\tprintln(s\"error is = $error\")\n\t\t// å‡†ç¡®ç‡\n\t\tval accuracy = result.filter(x => x._1==x._2).count().toDouble / result.count()\n\t\tprintln(s\"accuracy is = $accuracy\")\n\t}\n```\n\nä¿å­˜æ¨¡å‹\n```\n\tdef saveModel(model: LogisticRegressionModel, model_path: String): Unit = {\n\t\t// ä¿å­˜æ¨¡å‹æ–‡ä»¶ obj\n\t\tval out_obj = new ObjectOutputStream(new FileOutputStream(model_path+\"model.obj\"))\n\t\tout_obj.writeObject(model)\n\n\t\t// ä¿å­˜æ¨¡å‹ä¿¡æ¯\n\t\tval model_info=new BufferedWriter(new FileWriter(model_path+\"model_info.txt\"))\n\t\tmodel_info.write(model.toString())\n\t\tmodel_info.flush()\n\t\tmodel_info.close()\n\n\t\t// ä¿å­˜æ¨¡å‹æƒé‡\n\t\tval model_weights=new BufferedWriter(new FileWriter(model_path+\"model_weights.txt\"))\n\t\tmodel_weights.write(model.weights.toString)\n\t\tmodel_weights.flush()\n\t\tmodel_weights.close()\n\n\t\tprintln(s\"æ¨¡å‹ä¿¡æ¯å†™å…¥æ–‡ä»¶å®Œæˆï¼Œè·¯å¾„ä¸ºï¼š$model_path\")\n\t}\n\n```\nåŠ è½½æ¨¡å‹\n```\n\tdef loadModel(model_path: String): Option[LogisticRegressionModel] = {\n\t\ttry{\n\t\t\tval in = new ObjectInputStream( new FileInputStream(model_path) )\n\t\t\tval model = Option( in.readObject().asInstanceOf[LogisticRegressionModel] )\n\t\t\tin.close()\n\t\t\tprintln(\"Model Load Success\")\n\t\t\tmodel\n\t\t}\n\t\tcatch {\n\t\t\tcase ex: ClassNotFoundException => {\n\t\t\t\tprintln(ex.printStackTrace())\n\t\t\t\tNone\n\t\t\t}\n\t\t\tcase ex: IOException => {\n\t\t\t\tprintln(ex.printStackTrace())\n\t\t\t\tprintln(ex)\n\t\t\t\tNone\n\t\t\t}\n\t\t\tcase _: Throwable => throw new Exception\n\t\t}\n\t}\n\n```\n\nä½¿ç”¨åŠ è½½çš„æ¨¡å‹è¿›è¡Œåˆ†å€¼è®¡ç®—\n```\n\t// åŠ è½½objæ–‡ä»¶è¿›è¡Œé¢„æµ‹\n\tval model_new = loadModel(s\"$model_path/model.obj\")\n\t// ä½¿ç”¨åŠ è½½çš„æ¨¡å‹è¿›è¡Œæ ·ä¾‹é¢„æµ‹\n\tval result_new = test.map(line =>{\n\t\tval pre_label = model_new.get.predict(line.features)\n\t\t// blas.ddot(x.length, x,1,y,1) (å‘é‡xçš„é•¿åº¦ï¼Œå‘é‡xï¼Œå‘é‡xçš„ç´¢å¼•é€’å¢é—´éš”ï¼Œå‘é‡yï¼Œå‘é‡yçš„ç´¢å¼•é€’å¢é—´éš”)\n\t\tval pre_score = blas.ddot(model.numFeatures, line.features.toArray, 1, model.weights.toArray, 1)\n\t\tval score = Math.pow(1+Math.pow(Math.E, -2 * pre_score), -1)\n\t\t(line.label, pre_label,score)\n\t} )\n\tresult_new.take(2).foreach(println)\n```\n\n# mlä¸­çš„äºŒåˆ†ç±»LR\n\nmlåŒ…ä¸­çš„LRæ—¢å¯ä»¥ç”¨æ¥åšäºŒåˆ†ç±»ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥åšå¤šåˆ†ç±»ã€‚\n- äºŒåˆ†ç±»å¯¹åº”ï¼šBinomial logistic regression\n- å¤šåˆ†ç±»å¯¹åº”ï¼šmultinomial logistic regression\n\nå…¶ä¸­äºŒåˆ†ç±»å¯ä»¥é€šè¿‡Binomial logistic regression å’Œ multinomial logistic regressionå®ç°ã€‚\n\nåŸºäºBinomial logistic regressionçš„LRå®ç°ï¼š\n```\ndef BinaryModel(train: Dataset[Row], model_path: String, spark: SparkSession) = {\n\t// åˆ›å»ºæ¨¡å‹\n\tval LRModel = new LogisticRegression()\n\t\t.setMaxIter(20)\n\t\t.setRegParam(0.3)\n\t\t.setElasticNetParam(0.8)\n\t// è®­ç»ƒè¯„ä¼°æ¨¡å‹\n\tval model = LRModel.fit(train)\n\tevalute(model, train, spark)\n}\n\ndef evalute(model: LogisticRegressionModel, train: Dataset[Row], spark: SparkSession):Unit = {\n\t\t// æ‰“å°æ¨¡å‹å‚æ•°\n\t\tprintln(s\"æ¨¡å‹å‚æ•°ä¿¡æ¯å¦‚ä¸‹ï¼š\\n ${model.parent.explainParams()} \\n\")\n\t\tprintln(s\"Coefficientsï¼ˆç³»æ•°ï¼‰: ${model.coefficients}\")\n\t\tprintln(s\"Interceptï¼ˆæˆªè·ï¼‰: ${model.intercept}\")\n\t\t// æŸ¥çœ‹è®­ç»ƒé›†çš„é¢„æµ‹ç»“æœ rawPredictionï¼šrow è®¡ç®—çš„åˆ†å€¼ï¼Œprobabilityï¼šç»è¿‡sigmoidè½¬æ¢åçš„æ¦‚ç‡\n\t\tval result = model.evaluate(train)\n\t\tresult.predictions.show(10)\n\t\t// å°† labelï¼Œ0 å€¼æ¦‚ç‡ï¼Œpredict labelæå–å‡ºæ¥\n\t\tresult.predictions.select(\"label\",\"probability\",\"prediction\").rdd\n\t\t\t.map(row => (row.getDouble(0),row.get(1).asInstanceOf[DenseVector].toArray(0),row.getDouble(2)))\n\t\t\t.take(10).foreach(println)\n\t\t// æ¨¡å‹è¯„ä¼°\n\t\tval trainSummary = model.summary\n\t\tval objectiveHistory = trainSummary.objectiveHistory\n\t\tprintln(\"objectiveHistoryLoss:\")\n\t\tobjectiveHistory.foreach(loss => println(loss))\n\n\t\tval binarySummary = trainSummary.asInstanceOf[BinaryLogisticRegressionSummary]\n\n\t\tval roc = binarySummary.roc\n\t\troc.show()\n\t\tprintln(s\"areaUnderROC: ${binarySummary.areaUnderROC}\")\n\n\t\t// Set the model threshold to maximize F-Measure\n\t\tval fMeasure = binarySummary.fMeasureByThreshold\n\t\tfMeasure.show(10)\n\t\tval maxFMeasure = fMeasure.select(max(\"F-Measure\")).head().getDouble(0)\n\t\timport spark.implicits ._\n\t\tval bestThreshold = fMeasure.where($\"F-Measure\"===maxFMeasure).select(\"threshold\").head().getDouble(0)\n\t\tmodel.setThreshold(bestThreshold)\n\t}\n```\n\nåŸºäºMultimial logistic regressionçš„LRå®ç°ï¼š\n```\ndef BinaryModelWithMulti(train: Dataset[Row], model_path: String, spark: SparkSession) = {\n\t// åˆ›å»ºæ¨¡å‹\n\tval LRModel = new LogisticRegression()\n    \t.setMaxIter(10)\n    \t.setRegParam(0.3)\n    \t.setElasticNetParam(0.8)\n    \t.setFamily(\"multinomial\")\n\t// è®­ç»ƒæ¨¡å‹\n\tval model = LRModel.fit(train)\n\t// æ‰“å°æ¨¡å‹å‚æ•°\n\tprintln(s\"æ¨¡å‹å‚æ•°ä¿¡æ¯å¦‚ä¸‹ï¼š\\n ${model.parent.explainParams()} \\n\")\n\tprintln(s\"Coefficientsï¼ˆç³»æ•°ï¼‰: ${model.coefficientMatrix}\")\n\tprintln(s\"Interceptï¼ˆæˆªè·ï¼‰: ${model.interceptVector}\")\n}\n```\n\n# mlä¸­çš„å¤šåˆ†ç±»LR\n\næŸæ¡æ ·æœ¬å±äºç±»åˆ«kçš„æ¦‚ç‡è®¡ç®—ä¸ºï¼š\n$$\nP(Y=k | X,\\beta_k,\\beta_{0k} ) = \\frac { e^{ \\beta _k \\cdot X + \\beta_{0k} }}\n{ \\sum_{k^j=0}^{K-1} e^{ \\beta _{k^j} \\cdot X + \\beta_{0k^j}} } \n$$\n\nå…¶ä¸­Kè¡¨ç¤ºç±»åˆ«ï¼ŒJè¡¨ç¤ºç‰¹å¾ä¸ªæ•°\n\næƒé‡æœ€å°åŒ–ä½¿ç”¨çš„æ˜¯æœ€å¤§ä¼¼ç„¶å‡½æ•°ï¼Œå…¶æ›´æ–°å…¬å¼å¦‚ä¸‹ï¼š\n$$\n\\underset{ \\beta , \\beta_0 }{min} - [\\sum_{i=1}^{L}w_i \\cdot logP(Y=y_i|X_i)  ] + \\lambda [ \\frac{1}{2}(1-\\alpha )||\\beta||_2^2 + \\alpha ||\\beta||_1]\n$$\n\nä½¿ç”¨çš„æ•°æ®é›†å½¢å¼ä¸ºï¼š\n```\n1 1:-0.222222 2:0.5 3:-0.762712 4:-0.833333\n1 1:-0.555556 2:0.25 3:-0.864407 4:-0.916667\n1 1:-0.722222 2:-0.166667 3:-0.864407 4:-0.833333\n1 1:-0.722222 2:0.166667 3:-0.694915 4:-0.916667\n0 1:0.166667 2:-0.416667 3:0.457627 4:0.5\n1 1:-0.833333 3:-0.864407 4:-0.916667\n2 1:-1.32455e-07 2:-0.166667 3:0.220339 4:0.0833333\n2 1:-1.32455e-07 2:-0.333333 3:0.0169491 4:-4.03573e-08\n```\n\nå¤šåˆ†ç±»LRæ¨¡å‹å®ç°ä¸ºï¼š\n```\ndef MultiModel(file_multi: String, spark: SparkSession, model_path: String): Unit = {\n\tval training = spark.read.format(\"libsvm\").load(file_multi)\n\tval lr = new LogisticRegression()\n\t\t.setMaxIter(10)\n\t\t.setRegParam(0.3)\n\t\t.setElasticNetParam(0.8)\n\n\t// Fit the model\n\tval lrModel = lr.fit(training)\n\n\t// Print the coefficients and intercept for multinomial logistic regression\n\tprintln(s\"Coefficients: \\n${lrModel.coefficientMatrix}\")\n\tprintln(s\"Intercepts: ${lrModel.interceptVector}\")\n}\n```\n\n----------------\n\n# å‚è€ƒèµ„æ–™\n\nhttps://spark.apache.org/docs/2.1.0/mllib-linear-methods.html#classification\n\nhttps://spark.apache.org/docs/2.1.0/ml-classification-regression.html#logistic-regression\n\nhttps://blog.csdn.net/pupilxmk/article/details/80735599\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["Sparkä¸æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸‹ï¼‰ç¯‡","url":"/2019/04/23/æ·±åº¦å­¦ä¹ /å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ/å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸‹ï¼‰ç¯‡/","content":"\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/103231385\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\n\nè¯¥ç³»åˆ—çš„å…¶ä»–æ–‡ç« ï¼š\n\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(1)-å‰é¦ˆç¥ç»ç½‘ç»œ](https://blog.csdn.net/Gamer_gyt/article/details/89459131)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(2)-å·ç§¯ç¥ç»ç½‘ç»œ](https://blog.csdn.net/Gamer_gyt/article/details/100531593)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸Šç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/100600661)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸­ç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/100709422)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸‹ç¯‡)](https://thinkgamer.blog.csdn.net/article/details/100943664)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œ(ä¸Šç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/103231385)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œ(ä¸‹ç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/103437985)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸Šç¯‡ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/103754752)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸‹ç¯‡ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/103754752)\n\n> åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»äº†[ç”Ÿæˆæ¨¡å‹çš„åŸºæœ¬ç»“æ„ã€åŠŸèƒ½å’Œå˜åˆ†è‡ªåŠ¨ç¼–ç å™¨](https://blog.csdn.net/Gamer_gyt/article/details/103754752)ï¼Œåœ¨æœ¬ç¯‡æ–‡ç« ä¸­ä¸»è¦ä»‹ç»ä¸€ä¸‹ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆGenerative Adversaarial Networksï¼ŒGANï¼‰\n# KLæ•£åº¦ã€JSæ•£åº¦ã€Wasserteinè·ç¦»\n## KLæ•£åº¦\nKLæ•£åº¦åˆç§°ç›¸å¯¹ç†µï¼Œä¿¡æ¯æ•£åº¦ï¼Œä¿¡æ¯å¢ç›Šã€‚KLæ•£åº¦æ˜¯ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒPå’ŒQå·®åˆ«çš„éå¯¹ç§°æ€§çš„åº¦é‡ã€‚åœ¨ç»å…¸å¢ƒå†µä¸‹ï¼ŒPè¡¨ç¤ºæ•°æ®çš„çœŸå®åˆ†å¸ƒï¼ŒQè¡¨ç¤ºæ•°æ®çš„ç†è®ºåˆ†å¸ƒï¼Œæ¨¡å‹åˆ†å¸ƒã€‚\n\n$$\nD_{KL}(P \\parallel Q)= \\sum_{i=1}^{n}P_i log(\\frac{P_i}{Q_i})\n$$\n\n## JSæ•£åº¦\nJSæ•£åº¦æ˜¯åº¦é‡ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒçš„ç›¸ä¼¼åº¦ï¼Œæ˜¯åŸºäºKLæ•£åº¦çš„å˜ä½“ï¼Œè§£å†³äº†KLæ•£åº¦éå¯¹ç§°çš„é—®é¢˜ã€‚\n$$\nD_{JS}(P \\parallel Q)=\\frac{1}{2} D_{KL}(P \\parallel \\frac{P+Q}{2}) + \\frac{1}{2} D_{KL}(Q \\parallel \\frac{P+Q}{2})\n$$\nKLæ•£åº¦å’ŒJSæ•£åº¦åº¦é‡çš„æ—¶å€™éƒ½æœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœä¸¤ä¸ªåˆ†å¸ƒP,Qè·ç¦»è¾ƒè¿œï¼Œå®Œå…¨æ²¡æœ‰é‡å çš„æ—¶å€™ï¼ŒKLæ•£åº¦æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œåœ¨å­¦ä¹ çš„æ—¶å€™ï¼Œè¿™å°±æ„å‘³ç€åœ¨è¿™ä¸€ç‚¹çš„æ¢¯åº¦ä¸º0ï¼Œå³æ¢¯åº¦æ¶ˆå¤±äº†ã€‚\n\n## Wassertrinè·ç¦»\nWassersteinè·ç¦»åº¦é‡çš„æ˜¯ä¸¤ä¸ªç®¡ç†åˆ†å¸ƒä¹‹é—´çš„è·ç¦»ã€‚\n$$\nW(P,Q) = \\underset{\\gamma  \\sim \\prod (P, Q) }{inf} E_{(x,y) \\sim \\gamma} \\left [ ||x-y|| \\right ]\n$$\nå…¶ä¸­$\\prod (P, Q)$æ˜¯è¾¹é™…åˆ†å¸ƒä¸º$P$å’Œ$Q$çš„æ‰€æœ‰å¯èƒ½çš„è”åˆåˆ†å¸ƒé›†åˆã€‚\n\n\n# æ˜¾å¼å’Œéšå¼å¯†åº¦æ¨¡å‹\n\nåœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»çš„å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨ï¼Œä¹‹å‰ä»‹ç»çš„æ·±åº¦ä¿¡å¿µç½‘ç»œéƒ½æ˜¯æ˜¾å¼çš„æ„å»ºæ ·æœ¬çš„å¯†åº¦å‡½æ•°$p(x|\\theta)$ï¼Œå¹¶é€šè¿‡æœ€å¤§ä¼¼ç„¶ä¼°è®¡æ¥æ±‚è§£å‚æ•°ï¼Œç§°ä¹‹ä¸º**æ˜¾å¼å¯†åº¦æ¨¡å‹ï¼ˆExplicit Density Modelï¼‰**ã€‚\n\nå¦‚æœåªæ˜¯å¸Œæœ›æœ‰ä¸€ä¸ªæ¨¡å‹èƒ½ç”Ÿæˆç¬¦åˆæ•°æ®åˆ†å¸ƒ$p_r(x)$çš„æ ·æœ¬ï¼Œé‚£ä¹ˆå¯ä»¥ä¸æ˜¾å¼åœ°ä¼°è®¡å‡ºæ•°æ®åˆ†å¸ƒçš„å¯†åº¦å‡½æ•°ã€‚å‡è®¾åœ¨ä½ç»´ç©ºé—´$Z$ä¸­æœ‰ä¸€ä¸ªç®€å•å®¹æ˜“é‡‡æ ·çš„åˆ†å¸ƒ$p(z)$ï¼Œ$p(z)$é€šå¸¸ä¸ºæ ‡å‡†å¤šå…ƒæ­£æ€åˆ†å¸ƒ$N(0,1)$ã€‚æˆ‘ä»¬ä½¿ç”¨ç¥ç»ç½‘ç»œæ„å»ºä¸€ä¸ªæ˜ å°„å‡½æ•°$G: Z \\rightarrow X$ç§°ä¸ºç”Ÿæˆç½‘ç»œã€‚åˆ©ç”¨ç¥ç»ç½‘ç»œå¼ºå¤§çš„æ‹Ÿåˆèƒ½åŠ›ï¼Œä½¿å¾—$G(z)$æœä»æ•°æ®åˆ†å¸ƒ$p_r(x)$ã€‚è¿™ç§æ¨¡å‹å°±ç§°ä¸º**éšå¼å¯†åº¦æ¨¡å‹ï¼ˆImplicit Density Modelï¼‰**ã€‚æ‰€è°“éšå¼æ¨¡å‹å°±æ˜¯æŒ‡å¹¶ä¸æ˜¾ç¤ºåœ°å»ºæ¨¡$p_r(x)$ï¼Œè€Œæ˜¯å»ºæ¨¡ç”Ÿæˆè¿‡ç¨‹ã€‚\n\n# ç½‘ç»œåˆ†è§£ä¸è®­ç»ƒ\n\n## åˆ¤åˆ«ç½‘ç»œ\néšå¼å¯†åº¦æ¨¡å‹çš„ä¸€ä¸ªå…³é”®æ˜¯å¦‚ä½•ç¡®ä¿ç”Ÿæˆç½‘ç»œäº§ç”Ÿçš„æ ·æœ¬ä¸€å®šæ˜¯æœä»çœŸå®çš„æ•°æ®åˆ†å¸ƒã€‚æ—¢ç„¶æˆ‘ä»¬ä¸æ„å»ºæ˜¾å¼å¯†åº¦æ¨¡å‹ï¼Œå°±æ— æ³•é€šè¿‡æœ€å¤§ä¼¼ç„¶ä¼°è®¡ç­‰æ–¹æ³•æ¥è®­ç»ƒã€‚\n\nç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆGenerative Adversarial Networksï¼ŒGANï¼‰æ˜¯é€šè¿‡å¯¹æŠ—è®­ç»ƒçš„æ–¹å¼æ¥ä½¿å¾—ç”Ÿæˆç½‘ç»œäº§ç”Ÿçš„æ ·æœ¬æœä»çœŸå®æ•°æ®åˆ†å¸ƒã€‚åœ¨ç”Ÿæˆå¯¹æŠ—ç½‘ç»œä¸­ï¼Œæœ‰ä¸¤ä¸ªç½‘ç»œè¿›è¡Œå¯¹æŠ—è®­ç»ƒã€‚ä¸€ä¸ªæ˜¯**åˆ¤åˆ«ç½‘ç»œ**ï¼Œç›®æ ‡æ˜¯å°½é‡å‡†ç¡®åœ°åˆ¤æ–­ä¸€ä¸ªæ ·æœ¬æ˜¯æ¥è‡ªäºçœŸå®æ•°æ®è¿˜æ˜¯ç”Ÿæˆç½‘ç»œäº§ç”Ÿçš„ï¼›å¦ä¸€ä¸ªæ˜¯**ç”Ÿæˆç½‘ç»œ**ï¼Œç›®æ ‡æ˜¯å°½é‡ç”Ÿæˆåˆ¤åˆ«ç½‘ç»œæ— æ³•åŒºåˆ†æ¥æºçš„æ ·æœ¬ã€‚è¿™ä¸¤ä¸ªç›®æ ‡ç›¸åçš„ç½‘ç»œä¸æ–­åœ°è¿›è¡Œäº¤æ›¿è®­ç»ƒã€‚å½“æœ€åæ”¶æ•›æ—¶ï¼Œå¦‚æœåˆ¤åˆ«ç½‘ç»œå†ä¹Ÿæ— æ³•åˆ¤æ–­å‡ºä¸€ä¸ªæ ·æœ¬çš„æ¥æºï¼Œé‚£ä¹ˆä¹Ÿå°±ç­‰ä»·äºç”Ÿæˆç½‘ç»œå¯ä»¥ç”Ÿæˆç¬¦åˆçœŸå®æ•°æ®åˆ†å¸ƒçš„æ ·æœ¬ã€‚ç”Ÿæˆå¯¹æŠ—ç½‘ç»œçš„æµç¨‹å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![ç”Ÿæˆå¯¹æŠ—ç½‘ç»œçš„æµç¨‹å›¾](https://img-blog.csdnimg.cn/20191230233737148.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nåˆ¤åˆ«ç½‘ç»œï¼ˆDiscriminator Networkï¼‰$D(x,\\phi)$ çš„ç›®æ ‡æ˜¯åŒºåˆ†å‡ºä¸€ä¸ªæ ·æœ¬$x$æ˜¯æ¥è‡ªäºçœŸå®åˆ†å¸ƒ$p_r(x)$è¿˜æ˜¯æ¥è‡ªäºç”Ÿæˆæ¨¡å‹$p_{\\theta}(x)$ï¼Œå› æ­¤åˆ¤åˆ«ç½‘ç»œå®é™…ä¸Šä¸€ä¸ªä¸¤ç±»åˆ†ç±»å™¨ã€‚ç”¨æ ‡ç­¾$y=1$æ¥è¡¨ç¤ºæ ·æœ¬æ¥è‡ªäºçœŸå®åˆ†å¸ƒï¼Œ$y=0$è¡¨ç¤ºæ ·æœ¬æ¥è‡ªæ¨¡å‹ï¼Œåˆ¤åˆ«ç½‘ç»œçš„$D(x,\\phi)$çš„è¾“å‡ºä¸º$x$å±äºçœŸå®æ•°æ®åˆ†å¸ƒçš„æ¦‚ç‡ï¼Œå³ï¼š\n$$\np(y=1|x)=D(x, \\phi)\n$$\nåˆ™æ ·æœ¬æ¥è‡ªæ¨¡å‹ç”Ÿæˆçš„æ¦‚ç‡ä½$p(y=0|x)=1-D(x, \\phi)$\n\nç»™å®šä¸€ä¸ªæ ·æœ¬$(x,y),y=\\{1,0\\}$è¡¨ç¤ºå…¶æ˜¯æ¥è‡ªäº$p_r(x)$è¿˜æ˜¯$p_{\\theta}(x)$ï¼Œåˆ¤åˆ«ç½‘ç»œçš„ç›®æ ‡å‡½æ•°ä¸ºæœ€å°åŒ–äº¤å‰ç†µï¼Œå³æœ€å¤§åŒ–å¯¹æ•°å‡½æ•°ï¼ˆå…¬å¼1-1ï¼‰ã€‚\n$$\n\\underset{\\phi}{min} = \\left ( E_x[y log \\,\\, p(y=1 | x) + (1-y) log \\,\\, p(y=0|x) ]  \\right )\n\\\\\n= \\underset{\\phi}{max}  \\left (   E_{x\\sim p_r(x)} [log \\,\\, D(x, \\phi)] + E_{z\\sim p(z)}[ log (1-D(G(z,\\theta), \\phi))]   \\right )\n$$\n\nå…¶ä¸­$\\theta, \\phi$åˆ†åˆ«æ˜¯ç”Ÿæˆç½‘ç»œå’Œåˆ¤åˆ«ç½‘ç»œçš„å‚æ•°ã€‚\n## ç”Ÿæˆç½‘ç»œ\n**ç”Ÿæˆç½‘ç»œï¼ˆGenerator Networkï¼‰** çš„ç›®æ ‡åˆšå¥½å’Œåˆ¤åˆ«ç½‘ç»œç›¸åï¼Œå³è®©åˆ¤åˆ«ç½‘ç»œå°†è‡ªå·±ç”Ÿæˆçš„æ ·æœ¬åˆ¤åˆ«ä¸ºçœŸå®æ ·æœ¬ã€‚å…¶ç›®æ ‡å‡½æ•°å¦‚ä¸‹ï¼ˆå…¬å¼1-2ï¼‰ï¼š\n$$\n \\underset{\\theta}{max} \\left (   E_{z\\sim p(z)} [log \\,\\, D(G(z , \\theta), \\phi)]   \\right )\n\\\\\n=  \\underset{\\theta}{min} \\left (   E_{z\\sim p(z)} [log \\,\\, (1-D(G(z , \\theta), \\phi))]   \\right )\n$$\nä¸Šé¢çš„è¿™ä¸¤ä¸ªç›®æ ‡å‡½æ•°æ˜¯ç­‰ä»·çš„ã€‚ä½†æ˜¯åœ¨å®é™…è®­ç»ƒæ—¶ï¼Œä¸€èˆ¬ä½¿ç”¨å‰è€…ï¼Œå› ä¸ºå…¶æ¢¯åº¦æ€§è´¨æ›´å¥½ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå‡½æ•°$log(x), x\\in (0,1)$åœ¨$x$æ¥è¿‘1æ—¶çš„æ¢¯åº¦è¦æ¯”æ¥è¿‘0æ—¶çš„æ¢¯åº¦å°å¾ˆå¤šï¼Œæ¥è¿‘é¥±å’ŒåŒºé—´ã€‚è¿™æ ·ï¼Œå½“åˆ¤åˆ«ç½‘ç»œ$D$ä»¥å¾ˆé«˜çš„æ¦‚ç‡è®¤ä¸ºç”Ÿæˆç½‘ç»œ$G$äº§ç”Ÿçš„æ ·æœ¬æ˜¯â€œå‡â€æ ·æœ¬ï¼Œå³$(1-D(G(z, \\theta), \\phi)) \\rightarrow 1$ã€‚è¿™æ—¶ç›®æ ‡å‡½æ•°å…³äº$\\theta$çš„æ¢¯åº¦åè€Œå¾ˆå°ï¼Œä»è€Œä¸åˆ©äºä¼˜åŒ–ã€‚\n\n## ç½‘ç»œè®­ç»ƒ\nåœ¨ç”Ÿæˆå¯¹æŠ—ç½‘ç»œçš„è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œéœ€è¦å¹³è¡¡ä¸¤ä¸ªç½‘ç»œçš„èƒ½åŠ›ã€‚å¯¹äºåˆ¤åˆ«ç½‘ç»œæ¥è¯´ï¼Œä¸€å¼€å§‹çš„åˆ¤åˆ«èƒ½åŠ›ä¸èƒ½å¤ªå¼ºï¼Œå¦åˆ™éš¾ä»¥æå‡ç”Ÿæˆç½‘ç»œçš„èƒ½åŠ›ã€‚ç„¶åä¹Ÿä¸èƒ½å¤ªå¼±ï¼Œå¦åˆ™é’ˆå¯¹ä»–è®­ç»ƒçš„ç”Ÿäº§ç½‘ç»œä¹Ÿä¸ä¼šå¤ªå¥½ã€‚åœ¨è®­ç»ƒæ—¶éœ€è¦ä½¿ç”¨ä¸€äº›æŠ€å·§ï¼Œä½¿å¾—åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œåˆ¤åˆ«ç½‘ç»œè‡‚ç”Ÿæˆç½‘ç»œçš„èƒ½åŠ›å¼ºä¸€äº›ï¼Œä½†åˆä¸èƒ½å¼ºå¤ªå¤šã€‚\n\nç”Ÿæˆå¯¹æŠ—ç½‘ç»œçš„è®­ç»ƒæµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼Œæ¯æ¬¡è¿­ä»£æ—¶ï¼Œåˆ¤åˆ«ç½‘ç»œæ›´æ–°$K$æ¬¡è€Œç”Ÿæˆç½‘ç»œæ›´æ–°ä¸€æ¬¡ï¼Œå³é¦–å…ˆè¦ä¿è¯åˆ¤åˆ«ç½‘ç»œè¶³å¤Ÿå¼ºæ‰èƒ½å¼€å§‹è®­ç»ƒç”Ÿæˆç½‘ç»œã€‚åœ¨å®è·µä¸­$K$æ˜¯ä¸€ä¸ªè¶…å‚æ•°ï¼Œå…¶å–å€¼ä¸€èˆ¬å–å†³äºå…·ä½“ä»»åŠ¡ã€‚\n\n![ç”Ÿæˆå¯¹æŠ—ç½‘ç»œçš„è®­ç»ƒæµç¨‹](https://img-blog.csdnimg.cn/20191231090237628.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n# DCGAN\n\n## DCGANä»‹ç»\nç”Ÿæˆå¯¹æŠ—ç½‘ç»œæ˜¯æŒ‡ä¸€ç±»é‡‡ç”¨å¯¹æŠ—è®­ç»ƒæ–¹å¼æ¥è¿›è¡Œå­¦ä¹ çš„æ·±åº¦ç”Ÿæˆæ¨¡å‹ï¼Œå…¶åŒ…å«çš„åˆ¤åˆ«ç½‘ç»œå’Œç”Ÿæˆç½‘ç»œéƒ½å¯ä»¥æ ¹æ®ä¸åŒçš„ç”Ÿæˆä»»åŠ¡ä½¿ç”¨ä¸åŒçš„ç½‘ç»œç»“æ„ã€‚\n\nåœ¨æ·±åº¦å·ç§¯ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆDee Convolutional Generative Adversarial Neteorksï¼ŒDCGANï¼‰ä¸­ï¼Œåˆ¤åˆ«ç½‘ç»œæ˜¯ä¸€ä¸ªä¼ ç»Ÿçš„æ·±åº¦å·ç§¯ç½‘ç»œï¼Œä½†ä½¿ç”¨äº†å¸¦æ­¥é•¿çš„å·ç§¯æ¥å®ç°ä¸‹é‡‡æ ·æ“ä½œï¼Œä¸ç”¨æœ€å¤§æ±‡èšï¼ˆpoolingï¼‰æ“ä½œã€‚ç”Ÿæˆç½‘ç»œä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„æ·±åº¦å·ç§¯ç½‘ç»œæ¥å®ç°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä½¿ç”¨å¾®æ­¥å·ç§¯æ¥ç”Ÿæˆ64x63å¤§å°çš„å›¾åƒã€‚\n\n![DCGANä¸­çš„ç”Ÿæˆç½‘ç»œ](https://img-blog.csdnimg.cn/20191231091304687.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nä¸Šå›¾ä¸­ï¼Œç¬¬ä¸€å±‚æ˜¯å…¨è¿æ¥å±‚ï¼Œè¾“å…¥æ˜¯ä»å‡åŒ€åˆ†å¸ƒä¸­éšæœºé‡‡æ ·çš„100ç»´å‘é‡$z$ï¼Œè¾“å‡ºæ˜¯4x4x1024çš„å‘é‡ï¼Œé‡å¡‘ä¸º4x4x1024çš„å¼ é‡ï¼Œç„¶åæ˜¯å››å±‚çš„å¾®æ­¥å·ç§¯ï¼Œæ²¡æœ‰æ±‡èšå±‚ã€‚\n\nDCGANçš„ä¸»è¦ä¼˜ç‚¹æ˜¯é€šè¿‡ä¸€äº›ç»éªŒæ€§çš„ç½‘ç»œç»“æ„è®¾è®¡ä½¿å¾—å¯¹æŠ—è®­ç»ƒæ›´åŠ ç¨³å®šã€‚æ¯”å¦‚ï¼š\n- ï¼ˆ1ï¼‰ä½¿ç”¨ä»£æ­¥é•¿çš„å·ç§¯ï¼ˆåœ¨åˆ¤åˆ«ç½‘ç»œä¸­ï¼‰å’Œå¾®æ­¥å·ç§¯ï¼ˆåœ¨ç”Ÿæˆç½‘ç»œä¸­ï¼‰æ¥ä»£æ›¿æ±‡èšæ“ä½œï¼Œä»¥å…æŸå¤±ä¿¡æ¯\n- ï¼ˆ2ï¼‰ä½¿ç”¨æ‰¹é‡å½’ä¸€åŒ–\n- ï¼ˆ3ï¼‰å»é™¤å·ç§¯å±‚ä¹‹åçš„å…¨è¿æ¥å±‚\n- ï¼ˆ4ï¼‰åœ¨ç”Ÿæˆç½‘ç»œä¸­ï¼Œé™¤äº†æœ€åä¸€å±‚ä½¿ç”¨Tanhæ¿€æ´»å‡½æ•°å¤–ï¼Œå…¶ä½™å±‚éƒ½ä½¿ç”¨ReLUå‡½æ•°\n- ï¼ˆ5ï¼‰åœ¨åˆ¤åˆ«ç½‘ç»œä¸­ï¼Œéƒ½é€‚ç”¨LeakyReLUæ¿€æ´»å‡½æ•°\n\n## æ¨¡å‹åˆ†æ\nå°†åˆ¤åˆ«ç½‘ç»œå’Œç”Ÿæˆç½‘ç»œåˆå¹¶ï¼Œæ•´ä¸ªç”Ÿæˆå¯¹æŠ—ç½‘ç»œå¾—æ•´ä¸ªç›®æ ‡å‡½æ•°çœ‹ä½œæœ€å°æœ€å¤§åŒ–æ¸¸æˆï¼ˆMinimax Gameï¼‰ï¼Œè¡¨è¾¾å¼å¦‚ä¸‹ï¼ˆ1-3ï¼‰ï¼š\n$$\n\\underset{\\theta}{min} \\, \\underset{\\phi}{max}\\left (  E_{x \\sim p_r{(x)}} \\left [  log\\,\\, D(x, \\phi) \\right ] + E_{x \\sim p_{\\theta}(x)} \\left [  log\\,\\,(1- D(x, \\phi)) \\right ]  \\right )\n$$\nå› ä¸ºä¹‹å‰æåˆ°çš„ç”Ÿæˆç½‘ç»œæ¢¯åº¦é—®é¢˜ï¼Œè¿™ä¸ªæœ€å°åŒ–æœ€å¤§åŒ–å½¢å¼çš„ç›®æ ‡å‡½æ•°ä¸€èˆ¬ç”¨æ¥è¿›è¡Œç†è®ºåˆ†æï¼Œå¹¶ä¸æ˜¯å®é™…è®­ç»ƒæ—¶çš„ç›®æ ‡å‡½æ•°ã€‚\n\nå‡è®¾$p_r(x)$å’Œ$p_{\\theta}(x)$å·²çŸ¥ï¼Œåˆ™æœ€ä¼˜å¾—åˆ¤åˆ«å™¨ä¸ºï¼š\n$$\nD^*(x) =  \\frac{p_r(x)}{p_r(x) + p_{\\theta}(x)}\n$$\nå°†æœ€ä¼˜å¾—åˆ¤åˆ«å™¨$D^*(x)$ä»£å…¥å…¬å¼1-3ï¼Œåˆ™ç›®æ ‡å‡½æ•°å˜ä¸ºï¼ˆå…¬å¼1-4ï¼‰ï¼š\n$$\nL(G|D^*) =  E_{x \\sim p_r{(x)}} \\left [  log\\,\\, D^*(x) \\right ] + E_{x \\sim p_r{(\\theta})} \\left [  log\\,\\,(1- D^*(x)) \\right ] \n\\\\\n= 2D_{JS}(p_r||p_{\\theta}) - 2log2\n$$\nå…¶ä¸­$D_{JS}$ä¸ºJSæ•£åº¦ã€‚\n\n\nåœ¨ç”Ÿæˆå¯¹æŠ—ç½‘ç»œä¸­ï¼Œå½“åˆ¤åˆ«ç½‘ç»œä¸ºæœ€ä¼˜æ—¶ï¼Œç”Ÿæˆç½‘ç»œçš„ä¼˜åŒ–ç›®æ ‡æ˜¯æœ€å°åŒ–çœŸå®åˆ†å¸ƒ$p_r$å’Œæ¨¡å‹åˆ†å¸ƒ$p_{\\theta}$ä¹‹é—´å¾—JSæ•£åº¦ã€‚å½“ä¸¤ä¸ªåˆ†å¸ƒç›¸åŒæ—¶ï¼ŒJSæ•£åº¦ä¸º0ï¼Œæœ€ä¼˜ç”Ÿæˆç½‘ç»œ$G^*$å¯¹åº”å¾—æŸå¤±ä¸º$L(G^*|D^*)=-2log2$ã€‚\n\nç„¶è€ŒJSæ•£åº¦çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šå½“ä¸¤ä¸ªåˆ†å¸ƒæ²¡æœ‰é‡å æ—¶ï¼Œä»–ä»¬ä¹‹é—´å¾—JSæ•£åº¦æ’ç­‰äºå¸¸æ•°log2ã€‚å¯¹ç”Ÿæˆç½‘ç»œæ¥è¯´ï¼Œç›®æ ‡å‡½æ•°å…³äºå‚æ•°çš„æ¢¯åº¦ä¸º0ã€‚\n$$\n\\frac{ \\partial L(G|D^*) }{ \\partial \\theta} =0\n$$\nä¸‹å›¾ç»™å‡ºäº†ç”Ÿæˆå¯¹æŠ—ç½‘ç»œä¸­çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜çš„ç¤ºä¾‹ã€‚å½“çœŸå®åˆ†å¸ƒ$p_r$å’Œæ¨¡å‹åˆ†å¸ƒ$p_{\\theta}$æ²¡æœ‰é‡å ï¼Œæœ€ä¼˜çš„åˆ¤æ–­ç½‘å¯¹å¯¹æ‰€æœ‰ç”Ÿæˆæ•°æ®å¾—è¾“å‡ºéƒ½ä¸º0ï¼Œ$D^*(G(z, \\theta))=0, \\forall  z$ã€‚å› æ­¤ç”Ÿæˆç½‘ç»œå¾—æ¢¯åº¦æ¶ˆå¤±ã€‚\n\n![ç”Ÿæˆç½‘ç»œä¸­å¾—æ¢¯åº¦æ¶ˆå¤±é—®é¢˜](https://img-blog.csdnimg.cn/20191231134841397.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nåœ¨å®é™…è®­ç»ƒç”Ÿæˆå¯¹æŠ—ç½‘ç»œæ—¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šå°†åˆ¤åˆ«ç½‘ç»œè®­ç»ƒåˆ°æœ€ä¼˜ï¼Œåªè¿›è¡Œä¸€æ­¥æˆ–å¤šæ­¥æ¢¯åº¦ä¸‹é™ï¼Œä½¿å¾—ç”Ÿæˆç½‘ç»œçš„æ¢¯åº¦ä¾ç„¶å­˜åœ¨ã€‚ç„¶è€Œï¼Œåˆ¤åˆ«ç½‘ç»œä¹Ÿä¸èƒ½å¤ªå·®ï¼Œå¦åˆ™ç”Ÿæˆç½‘ç»œçš„æ¢¯åº¦ä¸ºé”™è¯¯çš„æ¢¯åº¦ã€‚å¦‚ä½•ä½¿å¾—åˆ¤åˆ«ç½‘ç»œåœ¨æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦é”™è¯¯ä¹‹é—´å–å¾—å¹³è¡¡å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹ã€‚\n\n## æ¨¡å‹åå¡Œ\n\nå¦‚æœä½¿ç”¨å…¬å¼1-2ä½œä¸ºç”Ÿæˆç½‘ç»œçš„ç›®æ ‡å‡½æ•°ï¼Œå°†æœ€ä¼˜åˆ¤æ–­ç½‘ç»œ$D^*$ä»£å…¥ï¼Œå¾—åˆ°ï¼š\n$$\nL'(G|D^*) = E_{x \\sim p_{\\theta}(x)} \\left [ log \\, D^*(x) \\right ]\n\\\\\n= E_{x \\sim p_{\\theta}(x)} \\left [ log \\, \\frac {p_r(x)}{p_r(x) + p_{\\theta}(x) } \\cdot  \\frac{p_{\\theta}(x) }{p_{\\theta}(x) } \\right ]\n\\\\\n= - E_{x \\sim p_{\\theta}(x)}\\left [ log \\, \\frac{p_{\\theta}(x)}{p_r(x)} \\right ] + E_{x \\sim p_{\\theta}(x)} \\left [  log \\, \\frac {p_r(x)}{p_r(x) + p_{\\theta}(x) }  \\right ]\n\\\\\n= -D_{KL}(p_{\\theta} || p_r) +  E_{x \\sim p_{\\theta}(x)} \\left [ log (1-D^*(x)) \\right ]\n\\\\ \n = -D_{KL}(p_{\\theta} || p_r) +  2D_{JS}(p_r || p_{\\theta})-2log2 - E_{x \\sim p_r(x)} \\left [ log \\, D^* (x) \\right ]\n$$\n\nå…¶ä¸­åä¸¤é¡¹å’Œç”Ÿæˆç½‘ç»œæ— å…³ï¼Œå› æ­¤ï¼š\n$$\n\\underset{ \\theta }{ max } L'(G | D^*) =\\underset{ \\theta }{ min } D_{KL} (p_{\\theta} || p_r) - 2D_{JS} (p_r || p_{\\theta} )\n$$\nå…¶ä¸­JSæ•£åº¦å’Œ$D_{JS}(p_{\\theta} || p_r) \\in [0, log 2]$ä¸ºæœ‰ç•Œå‡½æ•°ï¼Œå› æ­¤ç”Ÿæˆç½‘ç»œçš„ç›®æ ‡æ˜¯ä¸ºæ›´å¤šçš„å—é€†å‘KLæ•£åº¦$D_{KL}(p_{\\theta} || p_r)$å½±å“ï¼Œä½¿å¾—ç”Ÿæˆç½‘ç»œæ›´å€¾å‘äºç”Ÿæˆä¸€äº›æ›´å®‰å…¨çš„æ ·æœ¬ï¼Œä»è€Œé€ æˆ**æ¨¡å‹åå¡Œï¼ˆModel Collapseï¼‰**é—®é¢˜\n\n## å‰å‘å’Œé€†å‘KLæ•£åº¦\nKLæ•£åº¦æ˜¯ä¸€ç§éå¯¹ç§°çš„æ•£åº¦ï¼Œåœ¨è®¡ç®—çœŸå®åˆ†å¸ƒ$p_r$å’Œæ¨¡å‹åˆ†å¸ƒ$p_{\\theta}$ä¹‹é—´å¾—KLæ•£åº¦æ—¶ï¼ŒæŒ‰ç…§é¡ºåºä¸åŒï¼Œæœ‰ä¸¤ç§KLæ•£åº¦ï¼šå‰å‘KLæ•£åº¦ï¼ˆForward KL divergenceï¼‰$D_{KL}(p_r || p_{\\theta})$ å’Œé€†å‘KLæ•£åº¦ï¼ˆReverse KL divergenceï¼‰$D_{KL}(p_{\\theta} || p_r)$\n\nå‰å‘å’Œé€†å‘KLæ•£åº¦åˆ†åˆ«å®šä¹‰ä¸ºï¼š\n$$\nD_{KL}(p_r || p_{\\theta}) = \\int p_r(x) log\\, \\frac{p_r(x)}{p_{\\theta}(x)}dx\n\\\\\nD_{KL}(p_{\\theta} || p_r) = \\int p_{\\theta}(x) log\\, \\frac{p_{\\theta}(x)}{p_r(x)}dx\n$$\nåœ¨å‰å‘KLæ•£åº¦ä¸­ï¼š\n- ï¼ˆ1ï¼‰å½“$p_r(x) \\rightarrow 0$è€Œ $p_{\\theta}(x)> 0$æ—¶ï¼Œ$p_r(x) log\\, \\frac{p_r(x)}{p_{\\theta}(x)} \\rightarrow  0$ã€‚ä¸ç®¡$p_{\\theta}(x)$å¦‚ä½•å–å€¼ï¼Œéƒ½å¯¹å‰å‘KLæ•£åº¦çš„è®¡ç®—æ²¡æœ‰è´¡çŒ®ã€‚\n- ï¼ˆ2ï¼‰å½“$p_r(x) > 0$è€Œ $p_{\\theta}(x) \\rightarrow 0$æ—¶ï¼Œ$p_r(x) log\\, \\frac{p_r(x)}{p_{\\theta}(x)} \\rightarrow  \\infty$ã€‚å‰å‘KLæ•£åº¦ä¼šå˜å¾—éå¸¸å¤§ã€‚\n\nå› æ­¤ï¼Œå‰å‘KLæ•£åº¦ä¼šé¼“åŠ±æ¨¡å‹åˆ†å¸ƒ$p_{\\theta}(x)$å°½å¯èƒ½çš„è¦†ç›–æ‰€æœ‰çœŸå®åˆ†å¸ƒ$p_r(x)>0$çš„ç‚¹ï¼Œè€Œä¸ç”¨å›é¿$p_r(x)\\approx 0$çš„ç‚¹ã€‚\n\nåœ¨é€†å‘KLæ•£åº¦ä¸­ï¼š\n- ï¼ˆ1ï¼‰å½“$p_r(x) \\rightarrow 0$è€Œ $p_{\\theta}(x)> 0$æ—¶ï¼Œ$p_{\\theta}(x) log\\, \\frac{p_{\\theta}(x)}{p_r(x)} \\rightarrow  \\infty$ã€‚å³å½“$p_{\\theta}(x)$æ¥è¿‘äº0ï¼Œè€Œ$p_{\\theta}(x)$æœ‰ä¸€å®šçš„å¯†åº¦æ—¶ï¼Œé€†å‘KLæ•£åº¦ä¼šå˜å¾—éå¸¸å¤§ã€‚\n- ï¼ˆ2ï¼‰å½“$p_{\\theta}(x) \\rightarrow 0$, ä¸ç®¡ $p_r(x)$å¦‚ä½•å–å€¼ï¼Œ$p_{\\theta}(x) log\\, \\frac{p_{\\theta}(x)}{p_r(x)} \\rightarrow 0$ã€‚\n\nå› æ­¤é€†å‘KLæ•£åº¦ä¼šé¼“åŠ±æ¨¡å‹åˆ†å¸ƒ$p_{\\theta}(x)$å°½å¯èƒ½é¿å¼€æ‰€æœ‰çœŸå®åˆ†å¸ƒ$p_r(x)\\approx 0$çš„ç‚¹ï¼Œè€Œä¸éœ€è¦è€ƒè™‘æ˜¯å¦è¦†ç›–æ‰€æœ‰åˆ†å¸ƒä¸º$p_r(x) > 0$çš„ç‚¹ã€‚\n\nä¸‹å›¾ç»™å‡ºæ•°æ®çœŸå®åˆ†å¸ƒä¸ºä¸€ä¸ªé«˜æ–¯æ··åˆåˆ†å¸ƒï¼Œæ¨¡å‹åˆ†å¸ƒä¸ºä¸€ä¸ªæ—¦é«˜æ–¯åˆ†å¸ƒæ—¶ï¼Œä½¿ç”¨å‰å‘å’Œé€†å‘KLæ•£åº¦æ¥è¿›è¡Œæ¨¡å‹ä¼˜åŒ–çš„ç¤ºä¾‹ï¼Œè“è‰²æ›²çº¿ä¸ºçœŸå®åˆ†å¸ƒ$p_r$çš„ç­‰é«˜çº¿ï¼Œçº¢è‰²æ›²çº¿ä¸ºæ¨¡å‹åˆ†å¸ƒ$p_{\\theta}$çš„ç­‰é«˜çº¿ã€‚\n\n![å‰å‘å’Œé€†å‘KLæ•£åº¦](https://img-blog.csdnimg.cn/2019123114461746.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n## W-GAN\nW-GANæ˜¯ä¸€ç§é€šè¿‡ä½¿ç”¨Wasserteinè·ç¦»æ›¿ä»£JSæ•£åº¦æ¥ä¼˜åŒ–è®­ç»ƒçš„ç”Ÿæˆå¯¹æŠ—ç½‘ç»œã€‚å¯¹äºçœŸå®åˆ†å¸ƒ$p_r$å’Œæ¨¡å‹åˆ†å¸ƒ$p_{\\theta}$ï¼Œä»–ä»¬çš„1st-wasserteinè·ç¦»ä¸ºï¼š\n$$\nW^1(p_r,p_{\\theta}) = \\underset{\\gamma  \\sim \\prod (P_r, P_g) }{inf} E_{(x,y) \\sim \\gamma} \\left [ ||x-y|| \\right ]\n$$\nå…¶ä¸­$\\prod (P_r, P_g)$æ˜¯è¾¹é™…åˆ†å¸ƒä¸º$p_r$å’Œ$p_{\\theta}$çš„æ‰€æœ‰å¯èƒ½çš„è”åˆåˆ†å¸ƒé›†åˆã€‚\n\nå½“ä¸¤ä¸ªåˆ†å¸ƒæ²¡æœ‰é‡å æˆ–è€…é‡å éå¸¸å°‘æ—¶ï¼Œä»–ä»¬ä¹‹é—´çš„KLæ•£åº¦ä¸º$+ \\infty$ï¼ŒJSæ•£åº¦ä¸ºlog2ï¼Œå¹¶ä¸éšç€ä¸¤ä¸ªåˆ†å¸ƒä¹‹é—´çš„è·ç¦»è€Œå˜åŒ–ã€‚è€Œ1st-wasserteinè·ç¦»å¯ä»¥ä¾ç„¶è¡¡é‡ä¸¤ä¸ªæ²¡æœ‰é‡å åˆ†å¸ƒçš„è·ç¦»ã€‚\n\nW-GANçš„ç›®æ ‡å‡½æ•°ä¸ºï¼š\n$$\n\\underset{\\theta}{ max } E_{z \\sim p(z)} \\left [ f(G(z, \\theta), \\phi) \\right ]\n$$\nå› ä¸º$f(x, \\phi)$ä¸ºä¸é¥±å’Œå‡½æ•°ï¼Œæ‰€ä»¥ç”Ÿæˆç½‘ç»œå‚æ•°$\\theta$çš„æ¢¯åº¦ä¸ä¼šæ¶ˆå¤±ï¼Œç†è®ºä¸Šè§£å†³äº†åŸå§‹GANè®­ç»ƒä¸ç¨³å®šçš„é—®é¢˜ã€‚å¹¶ä¸”W-GANä¸­ç”Ÿæˆç½‘ç»œçš„ç›®æ ‡å‡½æ•°ä¸å†æ˜¯ä¸¤ä¸ªåˆ†å¸ƒçš„æ¯”ç‡ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£äº†æ¨¡å‹åå¡Œé—®é¢˜ï¼Œä½¿å¾—ç”Ÿæˆçš„æ ·æœ¬å…·æœ‰å¤šæ ·æ€§ã€‚\n\nä¸‹å›¾ç»™å‡ºäº†W-GANçš„è®­ç»ƒè¿‡ç¨‹ï¼Œå’ŒåŸå§‹GANç›¸æ¯”ï¼ŒW-GANçš„è¯„ä»·ç½‘ç»œæœ€åä¸€å±‚ä¸ä½¿ç”¨sigmoidå‡½æ•°ï¼ŒæŸå¤±å‡½æ•°ä¸å–å¯¹æ•°ã€‚\n\n![W-GANçš„è®­ç»ƒè¿‡ç¨‹](https://img-blog.csdnimg.cn/20191231151625579.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n# æ€»ç»“\næ·±åº¦ç”Ÿæˆæ¨¡å‹æ˜¯ä¸€ç§æœ‰æœºåœ°èåˆç¥ç»ç½‘ç»œå’Œæ¦‚ç‡å›¾æ¨¡å‹çš„ç”Ÿæˆæ¨¡å‹,å°†ç¥ç»ç½‘ç»œä½œä¸ºä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒçš„é€¼è¿‘å™¨,å¯ä»¥æ‹Ÿåˆéå¸¸å¤æ‚çš„æ•°æ®åˆ†å¸ƒã€‚\n\nå˜åˆ†è‡ªç¼–ç å™¨æ˜¯ä¸€ä¸ªæœ‰æ„ä¹‰çš„æ·±åº¦ç”Ÿæˆæ¨¡å‹,å¯ä»¥æœ‰æ•ˆåœ°è§£å†³å«éšå˜é‡çš„æ¦‚ç‡æ¨¡å‹ä¸­åéªŒåˆ†å¸ƒéš¾ä»¥ä¼°è®¡çš„é—®é¢˜ã€‚\n\nç”Ÿæˆå¯¹æŠ—ç½‘ç»œæ˜¯ä¸€ä¸ªå…·æœ‰å¼€åˆ›æ„ä¹‰çš„æ·±åº¦ç”Ÿæˆæ¨¡å‹,çªç ´äº†ä»¥å¾€çš„æ¦‚ç‡æ¨¡å‹å¿…é¡»é€šè¿‡æœ€å¤§ä¼¼ç„¶ä¼°è®¡æ¥å­¦ä¹ å‚æ•°çš„é™åˆ¶ã€‚DC-GANæ˜¯ä¸€ä¸ªç”Ÿæˆå¯¹æŠ—ç½‘ç»œçš„æˆåŠŸå®ç°,å¯ä»¥ç”Ÿæˆååˆ†é€¼çœŸçš„è‡ªç„¶å›¾åƒã€‚å¯¹æŠ—ç”Ÿæˆç½‘ç»œçš„è®­ç»ƒä¸ç¨³å®šé—®é¢˜çš„ä¸€ç§æœ‰æ•ˆè§£å†³æ–¹æ³•æ˜¯W-GAN,é€šè¿‡ç”¨ Wassertein è·ç¦»æ›¿ä»£ JS æ•£åº¦æ¥è¿›è¡Œè®­ç»ƒã€‚\n\nè™½ç„¶æ·±åº¦ç”Ÿæˆæ¨¡å‹å–å¾—å·¨å¤§çš„æˆåŠŸ,ä½†æ˜¯ä½œä¸ºä¸€ç§æ— ç›‘ç£æ¨¡å‹,å…¶ä¸»è¦çš„ç¼ºç‚¹æ˜¯ç¼ºä¹æœ‰æ•ˆçš„å®¢è§‚è¯„ä»·,å› æ­¤ä¸åŒæ¨¡å‹ä¹‹é—´çš„æ¯”è¾ƒå¾ˆéš¾å®¢è§‚è¡¡é‡ã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸Šï¼‰ç¯‡","url":"/2019/04/23/æ·±åº¦å­¦ä¹ /å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ/å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸Šï¼‰ç¯‡/","content":"\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/103231385\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\n\nè¯¥ç³»åˆ—çš„å…¶ä»–æ–‡ç« ï¼š\n\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(1)-å‰é¦ˆç¥ç»ç½‘ç»œ](https://blog.csdn.net/Gamer_gyt/article/details/89459131)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(2)-å·ç§¯ç¥ç»ç½‘ç»œ](https://blog.csdn.net/Gamer_gyt/article/details/100531593)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸Šç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/100600661)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸­ç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/100709422)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸‹ç¯‡)](https://thinkgamer.blog.csdn.net/article/details/100943664)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œ(ä¸Šç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/103231385)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œ(ä¸‹ç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/103437985)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸Šç¯‡ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/103754752)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸‹ç¯‡ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/103754752)\n\næ¦‚ç‡ç”Ÿæˆæ¨¡å‹ç®€ç§°ç”Ÿæˆæ¨¡å‹ï¼ˆGenerative Modelï¼‰ï¼Œæ˜¯æ¦‚ç‡ç»Ÿè®¡å’Œæœºå™¨å­¦ä¹ ä¸­çš„ä¸€ç±»é‡è¦æ¨¡å‹ï¼ŒæŒ‡ä¸€ç³»åˆ—ç”¨äºéšæœºç”Ÿæˆå¯è§‚æµ‹æ•°æ®çš„æ¨¡å‹ã€‚ç”Ÿæˆæ¨¡å‹çš„æ€è·¯æ˜¯æ ¹æ®å¯è§‚æµ‹çš„æ ·æœ¬å­¦ä¹ ä¸€ä¸ªå‚æ•°åŒ–çš„æ¨¡å‹$p_{\\theta}(x)$æ¥è¿‘ä¼¼æœªçŸ¥åˆ†å¸ƒ$p_r(x)$ï¼Œä½¿å¾—ç”Ÿæˆçš„æ ·æœ¬å’ŒçœŸå®çš„æ ·æœ¬å°½å¯èƒ½çš„ç›¸ä¼¼ã€‚\n\næ·±åº¦ç”Ÿæˆæ¨¡å‹å°±æ˜¯åˆ©ç”¨æ·±å±‚ç¥ç»ç½‘ç»œå¯ä»¥è¿‘ä¼¼ä»»æ„å‡½æ•°çš„èƒ½åŠ›æ¥å»ºæ¨¡ä¸€ä¸ªå¤æ‚çš„åˆ†å¸ƒ$p_r(x)$ã€‚å¸¸è§çš„ä¸¤ç§æ·±åº¦ç”Ÿæˆæ¨¡å‹åŒ…æ‹¬**å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨ï¼ˆVariational Autoencoder, VAEï¼‰**å’Œ**ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆGenerative Adversarial Networks, GANï¼‰**ï¼ˆå› ä¸ºä»–ä»¬çš„ç›®æ ‡åŸºæœ¬æ˜¯ä¸€è‡´çš„ï¼‰ã€‚æœ¬ç¯‡å†…å®¹ä¸»è¦ä»‹ç»ç”Ÿæˆæ¨¡å‹çš„åŸºæœ¬åŠŸèƒ½å’Œå˜åˆ†è‡ªåŠ¨ç¼–ç å™¨ã€‚\n\n# ç”Ÿæˆæ¨¡å‹çš„åŸºæœ¬åŠŸèƒ½\nç”Ÿæˆæ¨¡å‹çš„ä¸¤ä¸ªåŸºæœ¬åŠŸèƒ½ä¸ºï¼š\n- å¯†åº¦ä¼°è®¡\n- ç”Ÿæˆæ ·æœ¬\n\n## å¯†åº¦ä¼°è®¡\nç»™å®šä¸€ç»„æ•°æ®$D=\\{x^i\\}, 1 \\leq i \\leq N$ï¼Œå‡è®¾ä»–ä»¬éƒ½æ˜¯ç‹¬ç«‹åœ°ä»ç›¸åŒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°ä¸º$p_r(x)$çš„æœªçŸ¥åˆ†å¸ƒä¸­äº§ç”Ÿçš„ï¼Œå¯†åº¦ä¼°è®¡æ˜¯æ ¹æ®æ•°æ®é›†$D$æ¥ä¼°è®¡å…¶æ¦‚ç‡å¯†åº¦å‡½æ•°$p_{\\theta}(x)$ã€‚\n\nç”Ÿæˆæ¨¡å‹ä¹Ÿå¯ä»¥åº”ç”¨äºç›‘ç£å­¦ä¹ ï¼Œç›‘ç£å­¦ä¹ çš„ç›®æ ‡æ˜¯å»ºæ¨¡è¾“å‡ºæ ‡ç­¾çš„æ¡ä»¶æ¦‚ç‡å¯†åº¦å‡½æ•°$p(y|x)$ã€‚æ ¹æ®è´å¶æ–¯å…¬å¼ï¼š\n$$\np(y|x) = \\frac{p(x|y)}{ \\sum_{y}p(x,y)}\n$$\nå¯ä»¥å°†ç›‘ç£å­¦ä¹ é—®é¢˜è½¬åŒ–ä¸ºè”åˆæ¦‚ç‡å¯†åº¦å‡½æ•°p(x,y)çš„å¯†åº¦ä¼°è®¡é—®é¢˜ã€‚åœ¨ç›‘ç£å­¦ä¹ ä¸­æ¯”è¾ƒå…¸å‹çš„ç”Ÿæˆæ¨¡å‹æœ‰**æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨**ã€**éšé©¬å°”å¯å¤«æ¨¡å‹**\n\nå’Œç”Ÿæˆæ¨¡å‹ç›¸å¯¹åº”çš„å¦ä¸€ç±»ç›‘ç£å­¦ä¹ æ¨¡å‹æ˜¯åˆ¤åˆ«æ¨¡å‹ï¼ˆDiscriminative Modelï¼‰ï¼Œåˆ¤åˆ«å¼æ¨¡å‹ç›´æ¥å»ºæ¨¡æ¡ä»¶æ¦‚ç‡å¯†åº¦å‡½æ•°$p(y|x)$ï¼Œå¹¶ä¸å»ºæ¨¡å…¶è”åˆæ¦‚ç‡å¯†åº¦å‡½æ•°$p(x,y)$ï¼Œå¸¸è§çš„åˆ¤åˆ«æ¨¡å‹æœ‰logistic å›å½’ã€æ”¯æŒå‘é‡æœºã€ç¥ç»ç½‘ç»œç­‰ã€‚ç”±ç”Ÿæˆæ¨¡å‹å¯ä»¥å¾—åˆ°åˆ¤åˆ«æ¨¡å‹ï¼Œä½†ç”±åˆ¤åˆ«æ¨¡å‹å¾—ä¸åˆ°ç”Ÿæˆæ¨¡å‹ã€‚\n\n## ç”Ÿæˆæ ·æœ¬\nç”Ÿæˆæ ·æœ¬å°±æ˜¯ç»™å®šä¸€ä¸ªæ¦‚ç‡å¯†åº¦å‡½æ•°ä¸º$p_{\\theta}(x)$çš„åˆ†å¸ƒï¼Œç”Ÿæˆä¸€äº›æœä»è¿™ä¸ªæ ·æœ¬çš„åˆ†å¸ƒï¼Œä¹Ÿç§°ä¸ºé‡‡æ ·ã€‚\n\nå¯¹äºå¸¦éšå˜é‡çš„ç”Ÿæˆæ¨¡å‹ï¼Œåœ¨å¾—åˆ°$p(z,\\theta)$å’Œ$p(x|z,\\theta)$ä¹‹åï¼Œå°±å¯ä»¥ç”Ÿæˆæ•°æ®$x$ï¼Œå…·ä½“å¯ä»¥åˆ†ä¸ºä¸¤æ­¥æ‰§è¡Œï¼š\n- æ ¹æ®éšå˜é‡çš„å…ˆéªŒåˆ†å¸ƒ$p(z,\\theta)$è¿›è¡Œé‡‡æ ·ï¼Œå¾—åˆ°æ ·æœ¬$z$\n- æ ¹æ®æ¡ä»¶åˆ†å¸ƒ$p(x|z,\\theta)$è¿›è¡Œé‡‡æ ·ï¼Œå¾—åˆ°æ ·æœ¬$x$\n\n# å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨\n\n> ä»¥ä¸‹å†…å®¹æ¥è‡ªäºï¼šhttps://spaces.ac.cn/archives/5253 \n\n## ä»åˆ†å¸ƒå˜æ¢çœ‹VAE\nVAEå’ŒGANçš„ç›®æ ‡éƒ½æ˜¯ï¼šå¸Œæœ›æ„å»ºä¸€ä¸ªä»éšå˜é‡$Z$ç”Ÿæˆç›®æ ‡æ•°æ®$X$çš„æ¨¡å‹ï¼Œä½†æ˜¯å®ç°ä¸Šæœ‰æ‰€ä¸åŒã€‚å®ƒä»¬å‡è®¾$Z$æœä»æŸäº›å¸¸è§çš„æ•°æ®åˆ†å¸ƒï¼ˆæ­£æ€åˆ†å¸ƒï¼Œå‡åŒ€åˆ†å¸ƒç­‰ï¼‰ï¼Œç„¶åå¸Œæœ›è®­ç»ƒå¾—åˆ°ä¸€ä¸ªæ¨¡å‹$X=g(Z)$ï¼Œè¿™ä¸ªæ¨¡å‹èƒ½å¤Ÿå°†åŸæ¥çš„æ¦‚ç‡åˆ†å¸ƒæ˜ å°„åˆ°è®­ç»ƒé›†çš„æ¦‚ç‡åˆ†å¸ƒï¼Œå³ï¼Œä»–ä»¬çš„ç›®çš„éƒ½æ˜¯è¿›è¡Œåˆ†å¸ƒä¹‹é—´çš„å˜æ¢ã€‚\n![åˆ†å¸ƒå˜æ¢](https://img-blog.csdnimg.cn/20191229104302607.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\nç”Ÿæˆæ¨¡å‹çš„éš¾é¢˜å°±æ˜¯åˆ¤æ–­ç”Ÿæˆåˆ†å¸ƒä¸çœŸå®åˆ†å¸ƒçš„ç›¸ä¼¼åº¦ï¼Œå› ä¸ºæˆ‘ä»¬åªçŸ¥é“ä¸¤è€…çš„é‡‡æ ·ç»“æœï¼Œä¸çŸ¥é“å®ƒä»¬çš„åˆ†å¸ƒè¡¨è¾¾å¼ã€‚\n\n\n\n\n## VAEçš„é€šå¸¸ç†è§£\né¦–å…ˆæˆ‘ä»¬æœ‰ä¸€æ‰¹æ ·æœ¬$\\{X_1,X_2,...,X_n\\}$ï¼Œå…¶æ•´ä½“ä½¿ç”¨$X$æè¿°ï¼Œæˆ‘ä»¬æœ¬æƒ³æ ¹æ®$\\{X_1,...,x_n\\}$å¾—åˆ°$X$çš„åˆ†å¸ƒ$P(X)$ï¼Œå¦‚æœèƒ½å¾—åˆ°çš„è¯ï¼Œæˆ‘ä»¬ç›´æ¥æ ¹æ®$P(X)$æ¥é‡‡æ ·ï¼Œå°±å¯ä»¥å¾—åˆ°æ‰€æœ‰å¯èƒ½çš„$X$äº†ã€‚è¿™æ˜¯ä¸€ä¸ªç†æƒ³çš„ç»ˆææ¨¡å‹ï¼Œä½†å¾ˆéš¾å®ç°ï¼Œäºæ˜¯å°†åˆ†å¸ƒæ”¹ä¸ºï¼š\n$$\np(X)=\\sum_{Z}p(X|Z)p(Z)\n$$\nè¿™é‡Œä¸åŒºåˆ†æ±‚å’Œè¿˜æ˜¯æ±‚ç§¯åˆ†ï¼Œæ„æ€å·®ä¸å¤šå°±è¡Œã€‚æ­¤æ—¶$p(X|Z)$å°±æè¿°äº†ä¸€ä¸ªç”±$Z$æ¥ç”Ÿæˆ$X$çš„æ¨¡å‹ï¼Œè€Œæˆ‘ä»¬å‡è®¾$Z$æœä»æ ‡å‡†çš„æ­£æ€åˆ†å¸ƒï¼Œå³ï¼š$p(Z)=N(0,1)$ï¼Œå¦‚æœè¿™ä¸ªç†æƒ³èƒ½å®ç°ï¼Œæˆ‘ä»¬å°±å¯ä»¥å…ˆä»æ ‡å‡†çš„æ­£æ€åˆ†å¸ƒä¸­é‡‡æ ·ä¸€ä¸ª$Z$ï¼Œç„¶åæ ¹æ®$Z$æ¥è®¡ç®—$X$ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆæ£’çš„ç”Ÿæˆæ¨¡å‹ã€‚æ¥ä¸‹æ¥å°±æ˜¯ç»“åˆè‡ªç¼–ç å™¨æ¥å®ç°é‡æ„ï¼Œä¿è¯æœ‰æ•ˆä¿¡æ¯æ²¡æœ‰ä¸¢å¤±ï¼Œå†åŠ ä¸Šä¸€ç³»åˆ—çš„æ¨å¯¼ï¼Œæœ€åæŠŠæ¨¡å‹å®ç°ï¼Œæ¡†æ¶ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n![VAEçš„é€šå¸¸ç†è§£](https://img-blog.csdnimg.cn/20191229161853604.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nä½†æ˜¯ä¸Šå›¾å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼š**æˆ‘ä»¬ä¸æ¸…æ¥šç»è¿‡é‡æ–°é‡‡æ ·ç”Ÿæˆçš„$Z_k$æ˜¯å¦è¿˜å¯¹åº”ç€åŸæ¥çš„$X_k$ï¼Œæ‰€ä»¥ç›´æ¥æœ€å°åŒ–$D(\\hat{X_k},X_k)^2$æ˜¯å¾ˆä¸ç§‘å­¦çš„ã€‚è€Œå®é™…ä¸Šï¼Œä½ çœ‹ä»£ç ï¼Œä¹Ÿä¼šå‘ç°æ ¹æœ¬ä¸æ˜¯è¿™æ ·å®ç°çš„ã€‚**\n\n## VAEåº”è¯¥æ˜¯ä»€ä¹ˆæ ·çš„\n\nå…¶å®åœ¨æ•´ä¸ªVAEæ¨¡å‹ä¸­ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨$p(Z)$ï¼ˆéšå˜é‡ç©ºé—´çš„åˆ†å¸ƒï¼‰æ˜¯æ­£æ€åˆ†å¸ƒçš„å‡è®¾ï¼Œæˆ‘ä»¬ç”¨çš„æ˜¯å‡è®¾$p(X|Z)$ï¼ˆåéªŒåˆ†å¸ƒï¼‰æ˜¯æ­£æ€åˆ†å¸ƒã€‚\n\nå…·ä½“æ¥è¯´ï¼Œç»™å®šä¸€ä¸ªçœŸå®æ ·æœ¬$X_k$ï¼Œæˆ‘ä»¬å‡è®¾å­˜åœ¨ä¸€ä¸ªä¸“å±äº$X_k$çš„åˆ†å¸ƒ$p(Z|X_k)$ï¼ˆå­¦åå«åéªŒåˆ†å¸ƒï¼‰ï¼Œå¹¶è¿›ä¸€æ­¥å‡è®¾è¿™ä¸ªåˆ†å¸ƒæ˜¯ï¼ˆç‹¬ç«‹çš„ã€å¤šå…ƒçš„ï¼‰æ­£æ€åˆ†å¸ƒï¼Œè¿™é‡Œå¼ºè°ƒä¸“å±å› ä¸ºï¼šåé¢è¦è®­ç»ƒä¸€ä¸ªç”Ÿæˆå™¨$X=g(Z)$ï¼Œå¸Œæœ›èƒ½å¤ŸæŠŠä»åˆ†å¸ƒ$p(Z|X_k)$é‡‡æ ·å‡ºæ¥çš„$Z_k$è¿˜åŸä¸º$X_K$ã€‚å¦‚æœå‡è®¾$p(Z)$æ˜¯æ­£æ€åˆ†å¸ƒï¼Œç„¶åä»$p(Z)$ä¸­é‡‡æ ·ä¸€ä¸ª$Z$ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆçŸ¥é“è¿™ä¸ª$Z$æ˜¯å¯¹åº”å“ªä¸ªçœŸå®çš„$X$å‘¢ï¼Ÿ**ç°åœ¨$p(Z|X_k)$ä¸“å±äº$X_k$ï¼Œæˆ‘ä»¬æœ‰ç†ç”±è¯´ä»è¿™ä¸ªåˆ†å¸ƒé‡‡æ ·å‡ºæ¥çš„$Z$åº”è¯¥è¦è¿˜åŸåˆ°$X_k$ä¸­å»ã€‚**\n\näº‹å®ä¸Šï¼Œåœ¨è®ºæ–‡ã€ŠAuto-Encoding Variational Bayesã€‹çš„åº”ç”¨éƒ¨åˆ†ï¼Œä¹Ÿç‰¹åˆ«å¼ºè°ƒäº†è¿™ä¸€ç‚¹ã€‚\n\n---\nIn this case, we can let the\nvariational approximate posterior be a multivariate Gaussian with a diagonal covariance structure:\n$$\n\\log q_{\\phi}(\\boldsymbol{z}|\\boldsymbol{x}^{(i)}) = \\log \\mathcal{N}(\\boldsymbol{z} ;\\boldsymbol{\\mu}^{(i)},\\boldsymbol{\\sigma}^{2(i)}\\boldsymbol{I})\\tag{9}\n$$\nï¼ˆæ³¨ï¼šè¿™é‡Œæ˜¯ç›´æ¥æ‘˜å½•åŸè®ºæ–‡ï¼Œæœ¬æ–‡æ‰€ç”¨çš„ç¬¦å·è·ŸåŸè®ºæ–‡ä¸å°½ä¸€è‡´ï¼Œæœ›è¯»è€…ä¸ä¼šæ··æ·†ã€‚ï¼‰\n\n---\n\nä¸Šé¢ä»‹ç»åˆ°äº†ï¼Œæ¯ä¸€ä¸ª$X_k$éƒ½é…ä¸Šäº†ä¸€ä¸ªä¸“å±çš„æ­£æ€åˆ†å¸ƒï¼Œæ‰æ–¹ä¾¿åç»­çš„ç”Ÿæˆå™¨åšè¿˜åŸï¼Œä½†è¿™æ ·æœ‰å¤šå°‘ä¸ª$X$å°±æœ‰å¤šå°‘ä¸ªæ­£æ€åˆ†å¸ƒäº†ã€‚æˆ‘ä»¬çŸ¥é“æ­£æ€åˆ†å¸ƒåˆ†å¸ƒæœ‰ä¸¤ç»„å‚æ•°$\\mu$å’Œ$\\sigma^2$ï¼Œé‚£æ€ä¹ˆæ‰¾å‡ºä¸“å±$X_k$çš„æ­£æ€åˆ†å¸ƒ$P(Z|X_k)$çš„å‡å€¼å’Œæ–¹å·®å‘¢ï¼Ÿå¹¶æ²¡æœ‰ä»€ä¹ˆç›´æ¥çš„æ€è·¯ï¼Œé‚£ä¹ˆå°±ç”¨ç¥ç»ç½‘ç»œæ¥æ‹Ÿåˆå§ã€‚\n\näºæ˜¯æˆ‘ä»¬å°±å¯ä»¥æ„å»ºä¸¤ä¸ªç¥ç»ç½‘ç»œ$\\mu_k=f_1(X_k), log\\sigma^2 = f_2(X_k)$æ¥è®¡ç®—å‡å€¼å’Œæ–¹å·®äº†ã€‚è¿™é‡Œä¹‹æ‰€ä»¥é€‰æ‹©$log \\sigma^2$æ˜¯å› ä¸º$\\sigma^2$æ€»æ˜¯éè´Ÿçš„ï¼Œéœ€è¦åŠ æ¿€æ´»å‡½æ•°å¤„ç†ï¼Œè€Œæ‹Ÿåˆ$log\\sigma^2$ä¸éœ€è¦åŠ æ¿€æ´»å‡½æ•°å¤„ç†ï¼Œå› ä¸ºå¯æ­£å¯è´Ÿã€‚åˆ°è¿™é‡Œï¼Œèƒ½çŸ¥é“ä¸“å±äº$X_k$çš„å‡å€¼å’Œæ–¹å·®äº†ï¼Œä¹ŸçŸ¥é“ä»–çš„æ­£æ€åˆ†å¸ƒé•¿ä»€ä¹ˆæ ·å­äº†ï¼Œç„¶åä»ä¸€ä¸ªä¸“å±åˆ†å¸ƒä¸­é‡‡æ ·ä¸€ä¸ª$Z_k$å‡ºæ¥ï¼Œç„¶åç»è¿‡ä¸€ä¸ªç”Ÿæˆå™¨å¾—åˆ°$\\hat{X_k}=g(Z_k)$ï¼Œç°åœ¨å¯ä»¥æ”¾å¿ƒçš„æœ€å°åŒ–$D(\\hat{X_k},X_k)^2$ï¼Œå› ä¸º$Z_k$æ˜¯ä»ä¸“å±çš„$X_k$çš„åˆ†å¸ƒä¸­é‡‡æ ·å‡ºæ¥çš„ï¼Œè¿™ä¸ªç”Ÿæˆå™¨è¦æŠŠå¼€å§‹çš„$X_k$è¿˜åŸå›æ¥ï¼Œäºæ˜¯å¯ä»¥ç”»å‡ºVAEçš„ç¤ºæ„å›¾ä¸ºï¼š\n![VAEçš„ç¤ºæ„å›¾](https://img-blog.csdnimg.cn/20191229181437675.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n\n## åˆ†å¸ƒæ ‡å‡†åŒ–\né¦–å…ˆï¼Œæˆ‘ä»¬å¸Œæœ›é‡æ„$X$ï¼Œä¹Ÿå°±æ˜¯æœ€å°åŒ–$D(\\hat{X_k},X_k)^2$ï¼Œä½†è¿™ä¸ªè¿‡ç¨‹å®¹æ˜“æ”¶åˆ°å™ªå£°çš„å½±å“ï¼Œå› ä¸º$Z_k$æ˜¯ç»è¿‡é‡æ–°é‡‡æ ·ç”Ÿæˆçš„ï¼Œä¸æ˜¯ç›´æ¥ç”±encoderç®—å‡ºæ¥çš„ã€‚æ˜¾ç„¶å™ªå£°ä¼šå¢åŠ é‡æ„çš„éš¾åº¦ï¼Œä¸è¿‡å¥½åœ¨è¿™ä¸ªå™ªå£°å¼ºåº¦ï¼ˆä¹Ÿå°±æ˜¯æ–¹å·®ï¼‰é€šè¿‡ä¸€ä¸ªç¥ç»ç½‘ç»œç®—å‡ºæ¥çš„ï¼Œæ‰€ä»¥æœ€ç»ˆæ¨¡å‹ä¸ºäº†é‡æ„çš„æ›´å¥½ï¼Œè‚¯å®šä¼šæƒ³å°½åŠæ³•è®©æ–¹å·®å˜ä¸º0ï¼Œè€Œæ–¹å·®ä¸º0çš„è¯ï¼Œä¹Ÿå°±æ²¡æœ‰éšæœºæ€§äº†ï¼Œæ‰€ä»¥ä¸ç®¡æ€ä¹ˆæ ·é‡‡æ ·éƒ½åªæ˜¯å¾—åˆ°ç¡®å®šçš„ç»“æœï¼ˆä¹Ÿå°±æ˜¯å‡å€¼ï¼‰ï¼Œåªæ‹Ÿåˆä¸€ä¸ªå½“ç„¶æ¯”æ‹Ÿåˆå¤šä¸ªè¦å®¹æ˜“ï¼Œè€Œå‡å€¼æ˜¯é€šè¿‡å¦å¤–ä¸€ä¸ªç¥ç»ç½‘ç»œç®—å‡ºæ¥çš„ã€‚\n\nè¯´ç™½äº†ï¼Œæ¨¡å‹ä¼šæ…¢æ…¢é€€åŒ–æˆæ™®é€šçš„AutoEncoderï¼Œå™ªå£°ä¸å†èµ·ä½œç”¨ã€‚é‚£è¿™æ ·çš„è¯ï¼Œå°±ä¸æ˜¯ç”Ÿæˆæ¨¡å‹ã€‚\n\nå…¶å®VAEè¿˜è®©æ‰€æœ‰çš„$p(Z|x)$éƒ½å‘æ ‡å‡†æ­£æ€åˆ†å¸ƒçœ‹é½ï¼Œè¿™æ ·å°±é˜²æ­¢äº†å™ªå£°ä¸ºé›¶ï¼ŒåŒæ—¶ä¿è¯äº†æ¨¡å‹å…·æœ‰ç”Ÿæˆèƒ½åŠ›ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![å‘æ ‡å‡†æ­£æ€åˆ†å¸ƒçœ‹é½](https://img-blog.csdnimg.cn/20191229184136920.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n\né‚£ä¹ˆå¦‚ä½•è®©æ‰€æœ‰çš„$p(Z|X)$éƒ½å‘$N(0,1)$çœ‹é½å‘¢ï¼ŸåŸè®ºæ–‡ç›´æ¥ç®—äº†ä¸€èˆ¬ï¼ˆå„åˆ†é‡ç‹¬ç«‹çš„ï¼‰æ­£æ€åˆ†å¸ƒä¸æ ‡å‡†æ­£æ€åˆ†å¸ƒçš„KLæ•£åº¦$KL(N(\\mu, \\sigma^2)|| N(0,1))$ä½œä¸ºè¿™ä¸ªé¢å¤–çš„lossï¼Œè®¡ç®—ç»“æœä¸ºï¼š\n$$\n\\mathcal{L}_{\\mu,\\sigma^2}=\\frac{1}{2} \\sum_{i=1}^d \\Big(\\mu_{(i)}^2 + \\sigma_{(i)}^2 - \\log \\sigma_{(i)}^2 - 1\\Big)\\tag{4}\n$$\n\nè¿™é‡Œçš„$d$æŒ‡çš„æ˜¯éšå˜é‡$Z$çš„ç»´åº¦ï¼Œè€Œ$\\mu_i$å’Œ$\\sigma^2_i$åˆ†åˆ«ä»£è¡¨ä¸€èˆ¬æ­£æ€åˆ†å¸ƒçš„å‡å€¼å‘é‡å’Œæ–¹å·®å‘é‡çš„ç¬¬$i$ä¸ªåˆ†é‡ã€‚ç›´æ¥ç”¨è¿™ä¸ªå…¬å¼åšè¡¥å……lossï¼Œå°±ä¸ç”¨è€ƒè™‘å‡å€¼æŸå¤±å’Œæ–¹å·®æŸå¤±çš„ç›¸å¯¹æ¯”ä¾‹é—®é¢˜äº†ã€‚\n\n## VAEçš„æœ¬è´¨\nVAEè™½ç„¶ä¹Ÿæ˜¯AEï¼ˆAutoEncoderï¼‰çš„ä¸€ç§ï¼Œä½†ä»–çš„åšæ³•æ˜¯ç‹¬ç‰¹çš„ï¼Œåœ¨VAEä¸­ï¼Œä»–çš„Encoderæœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªç”¨æ¥è®¡ç®—å‡å€¼ï¼Œä¸€ä¸ªç”¨æ¥è®¡ç®—æ–¹å·®ã€‚\n\nVAEä»è®©æ™®é€šäººæœ›è€Œç”Ÿç•çš„å˜åˆ†å’Œè´å¶æ–¯ç†è®ºå‡ºå‘ï¼Œæœ€åè½åœ°åˆ°ä¸€ä¸ªå…·ä½“çš„æ¨¡å‹ä¸­ï¼Œè™½ç„¶èµ°äº†æ¯”è¾ƒé•¿çš„ä¸€æ®µè·¯ï¼Œä½†æœ€ç»ˆçš„æ¨¡å‹å…¶å®æ˜¯å¾ˆæ¥åœ°æ°”çš„ï¼šä»–æœ¬è´¨ä¸Šå°±æ˜¯åœ¨æˆ‘ä»¬å¸¸è§„çš„è‡ªç¼–ç å™¨çš„åŸºç¡€ä¸Šï¼Œå¯¹encoderçš„ç»“æœåŠ ä¸Šäº†â€œé«˜æ–¯å™ªå£°â€ï¼Œä½¿å¾—ç»“æœdecoderèƒ½å¤Ÿå¯¹å™ªå£°æœ‰é²æ£’æ€§ï¼Œè€Œé‚£ä¸ªé¢å¤–çš„KL lossäº‹å®ä¸Šå°±æ˜¯ç›¸å½“äºencoderçš„ä¸€ä¸ªæ­£åˆ™é¡¹ï¼Œå¸Œæœ›encoderå‡ºæ¥çš„ä¸œè¥¿å‡æœ‰é›¶å‡å€¼ã€‚\n\né‚£å¦å¤–ä¸€ä¸ªencoderçš„ä½œç”¨æ˜¯ç”¨æ¥åŠ¨æ€è°ƒèŠ‚å™ªå£°çš„å¼ºåº¦çš„ï¼Œç›´è§‰ä¸Šæƒ³ï¼Œå½“decoderè¿˜æ²¡æœ‰è®­ç»ƒå¥½çš„æ—¶å€™ï¼ˆé‡æ„è¯¯å·®è¿œå¤§äºKL lossï¼‰ï¼Œå°±ä¼šé€‚å½“é™ä½å™ªå£°ï¼ˆKL losså¢åŠ ï¼‰ï¼Œä½¿å¾—æ‹Ÿåˆèµ·æ¥æ›´åŠ å®¹æ˜“ä¸€äº›ï¼ˆé‡æ„è¯¯å·®å¼€å§‹ä¸‹é™ï¼‰ï¼›åä¹‹ï¼Œå¦‚æœdecoderè®­ç»ƒå¾—è¿˜ä¸é”™æ—¶ï¼ˆé‡æ„è¯¯å·®å°äºKL lossï¼‰ï¼Œè¿™æ—¶å€™å™ªå£°å°±ä¼šå¢åŠ ï¼ˆKL losså‡å°‘ï¼‰ï¼Œä½¿å¾—æ‹Ÿåˆæ›´åŠ å›°éš¾äº†ï¼ˆé‡æ„è¯¯å·®åˆå¼€å§‹å¢åŠ ï¼‰ï¼Œè¿™æ—¶å€™decoderå°±è¦æƒ³åŠæ³•æé«˜ä»–çš„ç”Ÿæˆèƒ½åŠ›äº†ã€‚\n\n![VAEæœ¬è´¨](https://img-blog.csdnimg.cn/20191229191312712.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nè¯´ç™½äº†ï¼Œé‡æ„çš„è¿‡ç¨‹æ˜¯å¸Œæœ›æ²¡å™ªå£°çš„ï¼Œè€ŒKL lossåˆ™å¸Œæœ›æœ‰é«˜æ–¯å™ªå£°çš„ï¼Œä¸¤è€…æ˜¯å¯¹ç«‹çš„ï¼Œæ‰€ä»¥VAEè·ŸGANä¸€æ ·ï¼Œå†…éƒ¨å…¶å®æ—¶åŒ…å«äº†ä¸€ä¸ªå¯¹æŠ—çš„è¿‡ç¨‹ï¼Œåªä¸è¿‡ä»–ä»¬ä¸¤è€…æ˜¯æ··åˆèµ·æ¥ï¼Œå…±åŒè¿›åŒ–çš„ã€‚\n\n## VAEä¸­çš„å˜åˆ†\n\nVAEå«åšâ€œå˜åˆ†è‡ªç¼–ç å™¨â€ï¼Œä»–è·Ÿå˜åˆ†æ³•æœ‰ä»€ä¹ˆè”ç³»ï¼Ÿåœ¨VAEçš„è®ºæ–‡å’Œç›¸å…³è§£è¯»ä¸­ï¼Œå¥½åƒä¹Ÿæ²¡çœ‹åˆ°å˜åˆ†æ³•çš„å­˜åœ¨å‘€ï¼Ÿ\n\nå¦‚æœå¤§å®¶æ‰¿è®¤KLæ•£åº¦çš„è¯ï¼Œé‚£VAEå¥½åƒçœŸçš„è·Ÿå˜åˆ†æ²¡å¤šå¤§å…³ç³»äº†ï½å› ä¸ºç†è®ºä¸Šå¯¹äºKLæ•£åº¦è¦è¯æ˜ï¼š\n> å›ºå®šæ¦‚ç‡åˆ†å¸ƒ$p(x)ï¼ˆæˆ–q(x)ï¼‰$çš„æƒ…å†µä¸‹ï¼Œå¯¹äºä»»æ„çš„æ¦‚ç‡åˆ†å¸ƒ$q(x)ï¼ˆæˆ–p(x)ï¼‰$ï¼Œéƒ½æœ‰$KL(p(x) || q(x)) \\geq 0$ï¼Œè€Œä¸”åªæœ‰å½“$p(x)=q(x)$æ—¶æ‰ç­‰äºé›¶ã€‚\n\nå› ä¸º$KL(p(x) || q(x))$å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ³›å‡½ï¼Œè¦å¯¹æ³›å‡½æ±‚æå€¼å°±è¦ç”¨åˆ°å˜åˆ†æ³•ï¼Œå½“ç„¶ï¼Œè¿™é‡Œçš„å˜åˆ†æ³•åªæ˜¯æ™®é€šå¾®ç§¯åˆ†çš„å¹³è¡Œæ¨å¹¿ï¼Œè¿˜æ²¡æ¶‰åŠåˆ°çœŸæ­£å¤æ‚çš„å˜åˆ†æ³•ã€‚è€ŒVAEçš„å˜åˆ†ä¸‹ç•Œï¼Œæ˜¯ç›´æ¥åŸºäºKLæ•£åº¦å°±å¾—åˆ°çš„ã€‚æ‰€ä»¥ç›´æ¥æ‰¿è®¤äº†KLæ•£åº¦çš„è¯ï¼Œå°±æ²¡å˜åˆ†ä»€ä¹ˆäº‹äº†ã€‚\n\næ‰€æœ‰VAEåå­—ä¸­çš„å˜åˆ†ï¼Œæ˜¯å› ä¸ºä»–çš„æ¨å¯¼è¿‡ç¨‹ç”¨åˆ°äº†KLæ•£åº¦åŠå…¶æ€§è´¨ã€‚\n\n\n> è‡³æ­¤å·²ç»æŠŠå˜åˆ†è‡ªç¼–ç çš„å†…å®¹æ‹çš„å·®ä¸å¤šäº†ï¼Œå†ä¸‹ä¸€ç¯‡å°†ä¼šæ›´æ–°GANï¼\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œï¼ˆä¸‹ï¼‰ç¯‡","url":"/2019/04/23/æ·±åº¦å­¦ä¹ /å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ/å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œï¼ˆä¸‹ï¼‰ç¯‡/","content":"\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/103231385\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\n\nè¯¥ç³»åˆ—çš„å…¶ä»–æ–‡ç« ï¼š\n\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(1)-å‰é¦ˆç¥ç»ç½‘ç»œ](https://blog.csdn.net/Gamer_gyt/article/details/89459131)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(2)-å·ç§¯ç¥ç»ç½‘ç»œ](https://blog.csdn.net/Gamer_gyt/article/details/100531593)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸Šç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/100600661)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸­ç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/100709422)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸‹ç¯‡)](https://thinkgamer.blog.csdn.net/article/details/100943664)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œ(ä¸Šç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/103231385)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œ(ä¸‹ç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/103437985)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸Šç¯‡ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/103754752)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸‹ç¯‡ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/103754752)\n\nåœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»äº†ç»å°”å…¹æ›¼æœºå’Œå—é™ç»å°”å…¹æ›¼æœºï¼ˆ[é˜…è¯»è¯¦æƒ…](https://blog.csdn.net/Gamer_gyt/article/details/103231385)ï¼‰,è¿™ç¯‡æ–‡ç« ä¸­ä»‹ç»ä¸€ä¸‹æ·±åº¦ä¿¡å¿µç½‘ç»œã€‚\n\n### æ·±åº¦ä¿¡å¿µç½‘ç»œä»‹ç»\næ·±åº¦ä¿¡å¿µç½‘ç»œï¼ˆDeep Belief Netword, DBNï¼‰æ˜¯ä¸€ç§æ·±å±‚çš„æ¦‚ç‡æœ‰å‘å›¾æ¨¡å‹ï¼Œå…¶å›¾ç»“æ„æœ‰å¤šå±‚çš„èŠ‚ç‚¹æ„æˆã€‚æ¯å±‚èŠ‚ç‚¹çš„å†…éƒ¨æ²¡æœ‰è¿æ¥ï¼Œç›¸é‚»ä¸¤å±‚çš„èŠ‚ç‚¹ä¹‹é—´ä¸ºå…¨è¿æ¥ã€‚ç½‘ç»œçš„æœ€åº•å±‚ä¸ºå¯è§‚æµ‹çš„å˜é‡ï¼Œå…¶ä»–å±‚èŠ‚ç‚¹éƒ½ä¸ºéšå˜é‡ã€‚æœ€é¡¶éƒ¨çš„ä¸¤å±‚é—´çš„è¿æ¥æ˜¯æ— å‘çš„ï¼Œå…¶ä»–å±‚ä¹‹é—´çš„è¿æ¥æ˜¯æœ‰å‘çš„ã€‚ä¸‹å›¾ç»™å‡ºäº†ä¸€ä¸ªæ·±åº¦ä¿¡å¿µç½‘ç»œçš„ç¤ºä¾‹ã€‚\n\n![4å±‚ç»“æ„çš„æ·±åº¦ä¿¡å¿µç½‘ç»œ](https://img-blog.csdnimg.cn/20191207141248183.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nå¯¹ä¸€ä¸ªæœ‰$L$å±‚éšå˜é‡çš„æ·±åº¦ä¿¡å¿µç½‘ç»œï¼Œä»¤$v=h^{(0)}$è¡¨ç¤ºæœ€åº•å±‚ï¼ˆç¬¬0å±‚ï¼‰ä¸ºå¯è§‚æµ‹å˜é‡ï¼Œ$h^{(1)}, ..., h^{(L)}$è¡¨ç¤ºå…¶ä½™æ¯å±‚çš„å˜é‡ã€‚é¡¶éƒ¨çš„ä¸¤å±‚æ˜¯ä¸€ä¸ªæ— å‘å›¾ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªå—é™ç»å°”å…¹æ›¼æœºï¼Œç”¨æ¥äº§ç”Ÿ$p(h^{(L-1)})$çš„å…ˆéªŒåˆ†å¸ƒã€‚é™¤äº†æœ€é¡¶ä¸Šä¸¤å±‚å¤–ï¼Œæ¯ä¸€å±‚å˜é‡$h^{(l)}$ä¾èµ–äºå…¶ä¸Šé¢ä¸€å±‚$h^{(l+1)}$ï¼Œå³ï¼š\n$$\np(h^{(l)} | h^{(l+1)}, ..., h^{(L)}) = p(h^{(l)} | h^{(l+1)})\n$$\nå…¶ä¸­$l=\\{0,...,L-2\\}$\n\næ·±åº¦ä¿¡å¿µç½‘ç»œä¸­æ‰€æœ‰å˜é‡çš„è”åˆæ¦‚ç‡å¯ä»¥åˆ†è§£ä¸ºï¼š\n$$\np(v,h^{(1)},...,h^{(L)}) = p(v|h^{(1)})( \\prod_{l=1}^{L-2} p(h^{(l)} | h^{(l+1)} ) )p( h^{(L-1)}, h^{(L)})\n\\\\\n= \\prod_{l=0}^{L-1} p(h^{(l)} | h^{(l+1)} ) p(h^{(L-1)},h^{(L)})\n$$\n\nå…¶ä¸­$p(h^{l} | h^{(l+1)})$ä¸ºsigmoidå‹æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒä¸ºï¼š\n$$\np(h^{(l)} | h^{(l+1)}) = \\sigma (a^{(l)}+W^{(l+1)} h^{(l+1)})\n$$\nå…¶ä¸­$\\sigma(.)$ ä¸ºæŒ‰ä½è®¡ç®—çš„logistic sigmoidå‡½æ•°ï¼Œ$a^{(l)}$ä¸ºåç½®å‚æ•°ï¼Œ$W^{(l+1)}$ä¸ºæƒé‡å‚æ•°ã€‚è¿™æ ·ï¼Œæ¯ä¸€ä¸ªå±‚éƒ½å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªSigmoidä¿¡å¿µç½‘ç»œã€‚\n\n### ç”Ÿæˆæ¨¡å‹\nDBNæ˜¯ä¸€ä¸ªç”Ÿæˆæ¨¡å‹ï¼Œå¯ä»¥ç”¨æ¥ç”Ÿæˆç¬¦åˆç‰¹å®šåˆ†å¸ƒçš„æ ·æœ¬ã€‚éšå˜é‡ç”¨æ¥æè¿°åœ¨å¯è§‚æµ‹å˜é‡ä¹‹é—´çš„é«˜é˜¶ç›¸å…³æ€§ã€‚å‡å¦‚è®­ç»ƒæ•°æ®æœä»åˆ†å¸ƒ$p(v)$ï¼Œé€šè¿‡è®­ç»ƒå¾—åˆ°ä¸€ä¸ªæ·±åº¦ä¿¡å¿µç½‘ç»œã€‚\n\nåœ¨ç”Ÿæˆæ ·æœ¬æ—¶ï¼Œé¦–å…ˆåœ¨æœ€é¡¶ä¸¤å±‚è¿›è¡Œè¶³å¤Ÿå¤šæ¬¡çš„å‰å¸ƒæ–¯é‡‡æ ·ï¼Œç”Ÿæˆ$h^{(L-1)}$ï¼Œç„¶åä¾æ¬¡è®¡ç®—ä¸‹ä¸€å±‚éšå˜é‡çš„åˆ†å¸ƒã€‚å› ä¸ºåœ¨ç»™å®šä¸Šä¸€å±‚å˜é‡å–å€¼æ—¶ï¼Œä¸‹ä¸€å±‚çš„å˜é‡æ˜¯æ¡ä»¶ç‹¬ç«‹çš„ï¼Œå› ä¸ºå¯ä»¥ç‹¬ç«‹é‡‡æ ·ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä»ç¬¬$L-1$å±‚å¼€å§‹ï¼Œè‡ªé¡¶å‘ä¸‹è¿›è¡Œé€å±‚é‡‡æ ·ï¼Œæœ€ç»ˆå¾—åˆ°å¯è§‚æµ‹å±‚çš„æ ·æœ¬ã€‚\n\n### å‚æ•°å­¦ä¹ \n\nDBNæœ€ç›´æ¥çš„è®­ç»ƒæ–¹å¼å¯ä»¥é€šè¿‡æœ€å¤§ä¼¼ç„¶æ–¹æ³•ä½¿å¾—å¯è§‚æµ‹å˜é‡çš„è¾¹é™…åˆ†å¸ƒ$p(v)$åœ¨è®­ç»ƒé›†åˆä¸Šçš„ä¼¼ç„¶è¾¾åˆ°æœ€å¤§ã€‚ä½†åœ¨æ·±åº¦ä¿¡å¿µç½‘ç»œä¸­ï¼Œéšå˜é‡$h$ä¹‹é—´çš„å…³ç³»ååˆ†å¤æ‚ï¼Œç”±äºâ€œè´¡çŒ®åº¦åˆ†é…é—®é¢˜â€ï¼Œå¾ˆéš¾ç›´æ¥å­¦ä¹ ã€‚å³ä½¿å¯¹äºç®€å•çš„å•å±‚Sigmoidä¿¡å¿µç½‘ç»œ\n$$\np(v=1 | h) = \\sigma (b + w^Th)\n$$\nåœ¨å·²çŸ¥å¯è§‚å¯Ÿå˜é‡æ—¶ï¼Œå…¶éšå˜é‡çš„è”åˆåéªŒæ¦‚ç‡$p(h|v)$ä¸å†ç›¸äº’ç‹¬ç«‹ï¼Œå› æ­¤å¾ˆéš¾ç²¾ç¡®ä¼°è®¡æ‰€æœ‰éšå˜é‡çš„åéªŒæ¦‚ç‡ã€‚æ—©èµ·æ·±åº¦ä¿¡å¿µç½‘ç»œçš„åéªŒæ¦‚ç‡ä¸€èˆ¬é€šè¿‡è’™ç‰¹å¡æ´›æ–¹æ³•æˆ–å˜åˆ†æ–¹æ³•æ¥è¿‘ä¼¼ä¼°è®¡ï¼Œä½†æ˜¯æ•ˆç‡æ¯”è¾ƒä½ï¼Œè€Œå¯¼è‡´å…¶å‚æ•°å­¦ä¹ æ¯”è¾ƒå›°éš¾ã€‚\n\nä¸ºäº†æœ‰æ•ˆåœ°è®­ç»ƒæ·±åº¦ä¿¡å¿µç½‘ç»œï¼Œæˆ‘ä»¬å°†æ¯ä¸€å±‚çš„Sigmoidä¿¡å¿µç½‘ç»œè½¬æ¢ä¸ºå—é™ç»å°”å…¹æ›¼æœºã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯éšå˜é‡çš„åéªŒæ¦‚ç‡æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä»è€Œå¯ä»¥å¾ˆå®¹æ˜“åœ°è¿›è¡Œé‡‡æ ·ã€‚è¿™æ ·ï¼Œæ·±åº¦ä¿¡å¿µç½‘ç»œå¯ä»¥çœ‹ä½œæ˜¯ç”±å¤šä¸ªå—é™ç»å°”å…¹æ›¼æœºä»ä¸Šåˆ°ä¸‹è¿›è¡Œå †å ï¼Œç¬¬$l$å±‚å—é™ç»å°”å…¹æ›¼æœºçš„éšå±‚ä½œä¸ºç¬¬$l+1$å±‚å—é™ç»å°”å…¹æ›¼æœºå¯è§‚æµ‹å±‚ã€‚è¿›ä¸€æ­¥åœ°ï¼Œæ·±åº¦ä¿¡å¿µç½‘ç»œå¯ä»¥é‡‡ç”¨é€å±‚è®­ç»ƒçš„æ–¹å¼æ¥å¿«é€Ÿè®­ç»ƒï¼Œå³ä»æœ€åº•å±‚å¼€å§‹ï¼Œæ¯æ¬¡åªè®­ç»ƒä¸€å±‚ï¼Œç›´åˆ°æœ€åä¸€å±‚ã€‚\n\næ·±åº¦ä¿¡å¿µç½‘ç»œçš„è®­ç»ƒè¿‡ç¨‹å¯ä»¥åˆ†ä¸ºé¢„è®­ç»ƒå’Œç²¾è°ƒä¸¤ä¸ªé˜¶æ®µã€‚å…ˆé€šè¿‡é€å±‚é¢„è®­ç»ƒå°†æ¨¡å‹çš„å‚æ•°åˆå§‹åŒ–ä¸ºè¾ƒä¼˜çš„å€¼ï¼Œå†é€šè¿‡ä¼ ç»Ÿå­¦ä¹ æ–¹æ³•å¯¹å‚æ•°è¿›è¡Œç²¾è°ƒã€‚\n\n**é€å±‚é¢„è®­ç»ƒ**\nåœ¨é¢„è®­ç»ƒé˜¶æ®µï¼Œé‡‡ç”¨é€å±‚è®­ç»ƒçš„æ–¹å¼ï¼Œå°†æ·±åº¦ä¿¡å¿µç½‘ç»œçš„è®­ç»ƒç®€åŒ–ä¸ºå¤šä¸ªç»å°”å…¹æ›¼æœºçš„è®­ç»ƒã€‚ä¸‹å›¾ç»™å‡ºäº†æ·±åº¦ä¿¡å¿µç½‘ç»œçš„é€å±‚é¢„è®­ç»ƒè¿‡ç¨‹ã€‚\n\n![æ·±åº¦ä¿¡å¿µç½‘ç»œçš„é€å±‚é¢„è®­ç»ƒè¿‡ç¨‹](https://img-blog.csdnimg.cn/20191207155415641.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nå…·ä½“çš„é€å±‚è®­ç»ƒè¿‡ç¨‹ä¸ºè‡ªä¸‹è€Œä¸Šä¾æ¬¡è®­ç»ƒæ¯ä¸€å±‚çš„å—é™ç»å°”å…¹æ›¼æœºã€‚å‡è®¾æˆ‘ä»¬å·²ç»è®­ç»ƒå¥½äº†å‰$l-1$å±‚çš„å—é™ç»å°”å…¹æ›¼æœºï¼Œé‚£ä¹ˆå¯ä»¥è®¡ç®—éšå˜é‡è‡ªä¸‹è€Œä¸Šçš„æ¡ä»¶æ¦‚ç‡\n$$\np(h^{(i)} | h^{(i-1)}) = \\sigma( b^{(i)} + W^{(i) h^{(i-1)}} ), 1 \\leq i \\leq (l-1)\n$$\nå…¶ä¸­$b^{(i)}$ä¸ºç¬¬$i$å±‚å—é™ç»å°”å…¹æ›¼æœºçš„åç½®ï¼Œ$W^{(i)}$ä¸ºè¿æ¥æƒé‡ã€‚è¿™æ ·ï¼Œå¯ä»¥æŒ‰ç…§ $v=h^{(0)} -> h^{(1)} -> ... -> h^{(l-1)}$çš„é¡ºåºç”Ÿæˆä¸€ç»„$h^{(l-1)}$çš„æ ·æœ¬ï¼Œè®°ä¸º$\\hat{H} ^{(l-1)} = {\\hat{h}^{(l,1)}, ..., \\hat{h}^{(l,M)} }$ã€‚ç„¶åå°†$h^{(l-1)}$å’Œ$h^{(l)}$ç»„æˆä¸€ä¸ªå—é™ç»å°”å…¹æ›¼æœºï¼Œç”¨$\\hat{H}^{(l-1)}$ä½œä¸ºè®­ç»ƒé›†å……åˆ†è®­ç»ƒç¬¬$l$å±‚çš„å—é™ç»å°”å…¹æ›¼æœºã€‚\n\nä¸‹å›¾çš„ç®—æ³•æµç¨‹ç»™å‡ºäº†ä¸€ç§æ·±åº¦ä¿¡å¿µç½‘ç»œçš„é€å±‚é¢„è®­ç»ƒæ–¹æ³•ã€‚å¤§é‡çš„å®è·µè¡¨æ˜ï¼Œé€å±‚é¢„è®­ç»ƒå¯ä»¥äº§ç”Ÿéå¸¸å¥½çš„å‚æ•°åˆå§‹å€¼ï¼Œä»è€Œæå¤§çš„é™ä½äº†æ¨¡å‹çš„å­¦ä¹ éš¾åº¦ã€‚\n\n![ç®—æ³•æµç¨‹](https://img-blog.csdnimg.cn/20191207161617779.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n**ç²¾è°ƒ**\n\nç»è¿‡é¢„è®­ç»ƒä¹‹åï¼Œå†ç»“åˆå…·ä½“çš„ä»»åŠ¡ï¼ˆç›‘ç£å­¦ä¹ æˆ–æ— ç›‘ç£å­¦ä¹ ï¼‰ï¼Œé€šè¿‡ä¼ ç»Ÿçš„å…¨å±€å­¦ä¹ ç®—æ³•å¯¹ç½‘ç»œè¿›è¡Œç²¾è°ƒï¼ˆfin-tuningï¼‰ï¼Œä½¿æ¨¡å‹æ”¶æ•›åˆ°æ›´å¥½çš„å±€éƒ¨æœ€ä¼˜ç‚¹ã€‚\n\nä½œä¸ºç”Ÿæˆæ¨¡å‹çš„ç²¾è°ƒï¼Œé™¤äº†é¡¶å±‚çš„å—é™ç»å°”å…¹æ›¼æœºï¼Œå…¶ä»–å±‚ä¹‹é—´çš„æƒé‡è¢«åˆ†æˆå‘ä¸Šçš„è®¤çŸ¥æƒé‡ï¼ˆrecognition weightsï¼‰$W'$å’Œå‘ä¸‹çš„ç”Ÿæˆæƒé‡ï¼ˆgenerative weightsï¼‰$W$ã€‚è®¤çŸ¥æƒé‡ç”¨æ¥è¿›è¡ŒåéªŒæ¦‚ç‡è®¡ç®—ï¼Œè€Œç”Ÿæˆæƒé‡ç”¨æ¥è¿›è¡Œå®šä¹‰æ¨¡å‹ã€‚è®¤çŸ¥æƒé‡çš„åˆå§‹å€¼$W'^{(l)}=W^{(l)T}$ã€‚\n\næ·±åº¦ä¿¡å¿µç½‘ç»œä¸€èˆ¬é‡‡ç”¨contrastive wake-sleepç®—æ³•è¿›è¡Œç²¾è°ƒï¼Œå…¶ç®—æ³•è¿‡ç¨‹æ˜¯ï¼š\n- Wakeé˜¶æ®µï¼šè®¤çŸ¥è¿‡ç¨‹ï¼Œé€šè¿‡å¤–ç•Œè¾“å…¥ï¼ˆå¯è§‚æµ‹å˜é‡ï¼‰å’Œå‘ä¸Šè®¤çŸ¥æƒé‡ï¼Œè®¡ç®—æ¯ä¸€å±‚éšå˜é‡çš„åéªŒæ¦‚ç‡å¹¶é‡‡æ ·ã€‚ç„¶åï¼Œä¿®æ”¹ä¸‹è¡Œçš„ç”Ÿæˆæƒé‡ä½¿å¾—ä¸‹ä¸€å±‚çš„å˜é‡çš„åéªŒæ¦‚ç‡æœ€å¤§ã€‚ä¹Ÿå°±æ˜¯â€œå¦‚æœç°å®è·Ÿæˆ‘æƒ³è±¡çš„ä¸ä¸€æ ·ï¼Œæ”¹å˜æˆ‘çš„æƒé‡ä½¿å¾—æˆ‘æƒ³è±¡çš„ä¸œè¥¿å°±æ˜¯è¿™æ ·çš„â€\n- Sleepé˜¶æ®µï¼šç”Ÿæˆè¿‡ç¨‹ï¼Œé€šè¿‡é¡¶å±‚çš„é‡‡æ ·å’Œå‘ä¸‹çš„ç”Ÿæˆæƒé‡ï¼Œé€å±‚è®¡ç®—æ¯ä¸€å±‚çš„åéªŒæ¦‚ç‡å¹¶é‡‡æ ·ã€‚ç„¶åï¼Œä¿®æ”¹å‘ä¸Šçš„è®¤çŸ¥æƒé‡ä½¿å¾—ä¸Šä¸€å±‚å˜é‡çš„åéªŒæ¦‚ç‡æœ€å¤§ã€‚ä¹Ÿå°±æ˜¯â€œå¦‚æœæ¢¦ä¸­çš„æ™¯è±¡ä¸æ˜¯æˆ‘é—¹ä¸­çš„ç›¸åº”æ¦‚å¿µï¼Œæ”¹å˜æˆ‘çš„è®¤çŸ¥æƒé‡ä½¿å¾—è¿™ç§æ™¯è±¡åœ¨æˆ‘çœ‹æ¥å°±æ˜¯è¿™ä¸ªæ¦‚å¿µâ€\n- äº¤æ›¿è¿›è¡ŒWakeå’ŒSleepè¿‡ç¨‹ï¼Œç›´åˆ°æ”¶æ•›\n\n**ä½œä¸ºæ·±åº¦ç¥ç»ç½‘ç»œçš„ç²¾è°ƒ** æ·±åº¦ä¿¡å¿µç½‘ç»œçš„ä¸€ä¸ªåº”ç”¨æ˜¯ä½œä¸ºæ·±åº¦ç¥ç»ç½‘ç»œçš„é¢„è®­ç»ƒéƒ¨åˆ†ï¼Œæä¾›ç¥ç»ç½‘ç»œçš„åˆå§‹æƒé‡ã€‚\n\nåœ¨æ·±åº¦ä¿¡å¿µç½‘ç»œçš„æœ€é¡¶å±‚å†å¢åŠ ä¸€å±‚è¾“å‡ºå±‚ï¼Œç„¶åå†ä½¿ç”¨åå‘ä¼ æ’­ç®—æ³•å¯¹è¿™äº›æƒé‡è¿›è¡Œè°ƒä¼˜ã€‚ç‰¹åˆ«æ˜¯åœ¨è®­ç»ƒæ•°æ®æ¯”è¾ƒå°‘çš„æ—¶å€™ï¼Œé¢„è®­ç»ƒçš„ä½œç”¨éå¸¸å¤§ã€‚å› ä¸ºä¸æ°å½“çš„åˆå§‹åŒ–æƒé‡ä¼šæ˜¾è‘—å½±å“æœ€ç»ˆæ¨¡å‹çš„æ€§èƒ½ï¼Œè€Œé¢„è®­ç»ƒè·å¾—çš„æƒé‡åœ¨æƒé‡ç©ºé—´ä¸­æ¯”éšæœºæƒé‡æ›´æ¥è¿‘æœ€ä¼˜çš„æƒé‡ï¼Œé¿å…äº†åå‘ä¼ æ’­ç®—æ³•å› éšæœºåˆå§‹åŒ–æƒé‡å‚æ•°è€Œå®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜å’Œè®­ç»ƒæ—¶é—´é•¿çš„ç¼ºç‚¹ã€‚è¿™ä¸ä»…ä»…æå‡äº†æ¨¡å‹çš„æ€§èƒ½ï¼Œä¹ŸåŠ å¿«äº†è°ƒä¼˜é˜¶æ®µçš„æ”¶æ•›é€Ÿåº¦ã€‚\n\nä¸‹å›¾ç»™å‡ºäº†æ·±åº¦ä¿¡å¿µç½‘ç»œä½œä¸ºç”Ÿæˆæ¨¡å‹å’Œåˆ¤æ–­æ¨¡å‹çš„ç²¾è°ƒè¿‡ç¨‹ã€‚\n\n![ç²¾è°ƒè¿‡ç¨‹](https://img-blog.csdnimg.cn/20191207164923957.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n### æ€»ç»“\n\nç»å°”å…¹æ›¼æœºèƒ½å¤Ÿå­¦ä¹ æ•°æ®çš„å†…éƒ¨è¡¨ç¤ºï¼Œå¹¶ä¸”å…¶å‚æ•°å­¦ä¹ çš„æ–¹å¼å’Œèµ«å¸ƒå‹å­¦ä¹ ååˆ†ç±»ä¼¼ã€‚æ²¡æœ‰ä»»ä½•çº¦æŸçš„ç»å°”å…¹æ›¼æœºå› ä¸ºè¿‡äºå¤æ‚ï¼Œéš¾ä»¥åº”ç”¨åœ¨å®é™…é—®é¢˜ä¸Šã€‚é€šè¿‡å¼•å…¥ä¸€å®šçš„çº¦æŸï¼ˆå³å˜ä¸ºäºŒåˆ†å›¾ï¼‰ï¼Œå—é™ç»å°”å…¹æ›¼æœºåœ¨ç‰¹å¾æå–ã€ååŒè¿‡æ»¤ã€åˆ†ç±»ç­‰å¤šä¸ªä»»åŠ¡ä¸Šå–å¾—äº†å¹¿æ³›çš„åº”ç”¨ã€‚\n\nå’Œæ·±åº¦ä¿¡å¿µç½‘ç»œååˆ†ç±»ä¼¼çš„ä¸€ç§æ·±åº¦æ¦‚ç‡æ¨¡å‹æ˜¯æ·±åº¦ç»å°”å…¹æ›¼æœºï¼ˆdeep Boltzmann Machines ï¼ŒDBMï¼‰ã€‚æ·±åº¦ç»å°”å…¹æ›¼æœºæ˜¯ç”±å¤šå±‚çš„å—é™ç»å°”å…¹æ›¼æœºå †å è€Œæˆï¼Œæ˜¯çœŸæ­£çš„æ— å‘å›¾æ¨¡å‹ï¼Œå…¶è”åˆæ¦‚ç‡æ˜¯é€šè¿‡èƒ½é‡å‡½æ•°æ¥å®šä¹‰ã€‚å’Œæ·±åº¦ä¿¡å¿µç½‘ç»œç›¸æ¯”ï¼Œæ·±åº¦ç»å°”å…¹æ›¼æœºçš„å­¦ä¹ å’Œæ¨æ–­è¦æ›´åŠ å›°éš¾ã€‚\n\nå°½ç®¡æ·±åº¦ä¿¡å¿µç½‘ç»œä½œä¸ºä¸€ç§æ·±åº¦å­¦ä¹ æ¨¡å‹å·²ç»å¾ˆå°‘ä½¿ç”¨ï¼Œä½†å…¶åœ¨æ·±åº¦å­¦ä¹ å‘å±•è¿‡ç¨‹ä¸­çš„è´¡çŒ®ååˆ†å·¨å¤§ï¼Œå¹¶ä¸”å…¶ç†è®ºåŸºç¡€ä¸ºæ¦‚ç‡å›¾æ¨¡å‹ï¼Œæœ‰éå¸¸å¥½çš„è§£é‡Šæ€§ï¼Œä¾ç„¶æ˜¯ä¸€ç§å€¼å¾—æ·±å…¥ç ”ç©¶çš„æ¨¡å‹ã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œï¼ˆä¸Šï¼‰ç¯‡","url":"/2019/04/23/æ·±åº¦å­¦ä¹ /å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ/å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œï¼ˆä¸Šï¼‰ç¯‡/","content":"\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/103231385\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\n\nè¯¥ç³»åˆ—çš„å…¶ä»–æ–‡ç« ï¼š\n\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(1)-å‰é¦ˆç¥ç»ç½‘ç»œ](https://blog.csdn.net/Gamer_gyt/article/details/89459131)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(2)-å·ç§¯ç¥ç»ç½‘ç»œ](https://blog.csdn.net/Gamer_gyt/article/details/100531593)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸Šç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/100600661)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸­ç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/100709422)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸‹ç¯‡)](https://thinkgamer.blog.csdn.net/article/details/100943664)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œ(ä¸Šç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/103231385)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œ(ä¸‹ç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/103437985)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸Šç¯‡ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/103754752)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸‹ç¯‡ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/103754752)\n\n\n---\n\n\n### å¼•è¨€\n\nå¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œç³»åˆ—ç¬¬ä¸‰ç¯‡ï¼Œä¸»è¦ä»‹ç»æ·±åº¦ä¿¡å¿µç½‘ç»œã€‚å†…å®¹åˆ†ä¸ºä¸Šä¸‹ä¸¤ç¯‡è¿›è¡Œä»‹ç»ï¼Œæœ¬æ–‡ä¸»è¦æ˜¯æ·±åº¦ä¿¡å¿µç½‘ç»œï¼ˆä¸Šï¼‰ç¯‡ï¼Œä¸»è¦ä»‹ç»ä»¥ä¸‹å†…å®¹ï¼š\n\n- èƒŒæ™¯\n- ç»å°”å…¹æ›¼æœº\n- å—é™ç»å°”å…¹æ›¼æœº\n\n### èƒŒæ™¯\nå¯¹äºä¸€ä¸ªå¤æ‚çš„æ•°æ®åˆ†å¸ƒï¼Œæˆ‘ä»¬å¾€å¾€åªèƒ½è§‚æµ‹åˆ°æœ‰é™çš„å±€éƒ¨ç‰¹å¾ï¼Œå¹¶ä¸”è¿™äº›ç‰¹å¾é€šå¸¸ä¼šåŒ…å«ä¸€å®šçš„å™ªå£°ã€‚å¦‚æœè¦å¯¹è¿™ä¸ªæ•°æ®åˆ†å¸ƒè¿›è¡Œå»ºæ¨¡ï¼Œå°±éœ€è¦æŒ–æ˜å‡ºå¯è§‚æµ‹å˜é‡ä¹‹é—´å¤æ‚çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠå¯è§‚æµ‹å˜é‡èƒŒåéšè—çš„å†…éƒ¨è¡¨ç¤ºã€‚\n\nè€Œæ·±åº¦ä¿¡å¿µç½‘ç»œå¯ä»¥æœ‰æ•ˆçš„å­¦ä¹ å˜é‡ä¹‹é—´å¤æ‚çš„ä¾èµ–å…³ç³»ã€‚æ·±åº¦ä¿¡å¿µç½‘ç»œä¸­åŒ…å«å¾ˆå¤šå±‚çš„éšå˜é‡ï¼Œå¯ä»¥æœ‰æ•ˆçš„å­¦ä¹ æ•°æ®çš„å†…éƒ¨ç‰¹å¾è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ä½œä¸ºä¸€ç§æœ‰æ•ˆçš„éçº¿æ€§é™ç»´æ–¹æ³•ï¼Œè¿™äº›å­¦ä¹ åˆ°çš„å†…éƒ¨ç‰¹å¾è¡¨ç¤ºåŒ…å«äº†æ•°æ®çš„æ›´é«˜çº§çš„ã€æœ‰ä»·å€¼çš„ä¿¡æ¯ï¼Œå› æ­¤ååˆ†æœ‰åŠ©äºåç»­çš„åˆ†ç±»å’Œå›å½’ç­‰ä»»åŠ¡ã€‚\n\nç»å°”å…¹æ›¼æœºæ˜¯ç”Ÿæˆæ¨¡å‹çš„ä¸€ç§åŸºç¡€æ¨¡å‹ï¼Œå’Œæ·±åº¦ä¿¡å¿µç½‘ç»œçš„å…±åŒé—®é¢˜æ˜¯**æ¨æ–­å’Œå­¦ä¹ **ï¼Œå› ä¸ºè¿™ä¸¤ç§æ¨¡å‹éƒ½æ¯”è¾ƒå¤æ‚ï¼Œå¹¶ä¸”éƒ½åŒ…å«éšå˜é‡ï¼Œä»–ä»¬çš„æ¨æ–­å’Œå­¦ä¹ ä¸€èˆ¬é€šè¿‡MCMCæ–¹æ³•æ¥è¿›è¡Œè¿‘ä¼¼ä¼°è®¡ã€‚è¿™ä¸¤ç§æ¨¡å‹å’Œç¥ç»ç½‘ç»œæœ‰å¾ˆå¼ºçš„å¯¹åº”å…³ç³»ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šä¹Ÿç§°ä¸ºéšæœºç¥ç»ç½‘ç»œï¼ˆStochastic Neural Networkï¼ŒSNNï¼‰ã€‚\n\nå› ä¸ºæ·±åº¦ä¿¡å¿µç½‘ç»œæ˜¯æœ‰å¤šå±‚ç»å°”å…¹æ›¼æœºç»„æˆçš„ï¼Œæ‰€ä»¥æœ¬ç¯‡æ–‡ç« æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹**ç»å°”å…¹æ›¼æœº**å’Œ**å—é™ç»å°”å…¹æ›¼æœº**ã€‚\n\n### ç»å°”å…¹æ›¼æœº\n#### ä»‹ç»\nç»å°”å…¹æ›¼æœºï¼ˆBoltzmann Machineï¼‰å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§éšæœºåŠ¨åŠ›ç³»ç»Ÿï¼Œæ¯ä¸ªå˜é‡çš„çŠ¶æ€éƒ½ä»¥ä¸€å®šçš„æ¦‚ç‡å—åˆ°å…¶ä»–å˜é‡çš„å½±å“ã€‚ç»å°”å…¹æ›¼æœºå¯ä»¥ç”¨æ¦‚ç‡æ— å‘å›¾æ¨¡å‹æ¥æè¿°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n![ä¸€ä¸ªæœ‰å…­ä¸ªå˜é‡çš„ç»å°”å…¹æ›¼æœº](https://img-blog.csdnimg.cn/20191122090749423.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nBMçš„ä¸‰ä¸ªæ€§è´¨ï¼š\n\n- äºŒå€¼è¾“å‡ºï¼šæ¯ä¸ªéšæœºå˜é‡å¯ä»¥ç”¨ä¸€ä¸ªäºŒå€¼çš„éšæœºå˜é‡è¡¨ç¤º\n- å…¨è¿æ¥ï¼šæ‰€æœ‰èŠ‚ç‚¹ä¹‹é—´æ˜¯å…¨è¿æ¥çš„\n- æƒé‡å¯¹ç§°ï¼šæ¯ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„ç›¸äº’å½±å“æ˜¯å¯¹ç§°çš„\n\nBMä¸­çš„æ¯ä¸ªå˜é‡$X$çš„è”åˆæ¦‚ç‡ç”±ç»å°”å…¹æ›¼åˆ†å¸ƒå¾—åˆ°ï¼Œå³ï¼š\n$$\np(x) = \\frac{1}{Z} exp(\\frac{-E(x)}{T})\n$$\nå…¶ä¸­$Z$ä¸ºé…åˆ†å‡½æ•°ï¼Œèƒ½é‡å‡½æ•°$E(X)$çš„å®šä¹‰ä¸ºï¼š\n$$\nE(x) \\overset{\\bigtriangleup }{=} E(X=x) = -(   \\sum_{i<j } w_{ij}x_ix_j + \\sum_{i} b_i x_i  ) \n$$\n\nå…¶ä¸­$w_{ij}$æ˜¯ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„è¿æ¥æƒé‡ï¼Œ$x_i \\in \\{0,1\\}$è¡¨ç¤ºçŠ¶æ€ï¼Œ$b_i$æ˜¯å˜é‡$x_i$çš„åç½®ã€‚\n\nç»å°”å…¹æ›¼æœºå¯ä»¥ç”¨æ¥è§£å†³ä¸¤ç±»é—®é¢˜ï¼Œä¸€æ˜¯æœç´¢é—®é¢˜ï¼Œå½“ç»™å®šå˜é‡ä¹‹é—´çš„è¿æ¥æƒé‡ï¼Œéœ€è¦æ‰¾åˆ°ä¸€ç»„äºŒå€¼å˜é‡ï¼Œä½¿å¾—æ•´ä¸ªç½‘ç»œçš„èƒ½é‡æœ€ä½ã€‚å¦ä¸€ç±»æ˜¯å­¦ä¹ é—®é¢˜ï¼Œå½“ç»™å®šä¸€éƒ¨åˆ†å˜é‡çš„è§‚æµ‹å€¼æ—¶ï¼Œè®¡ç®—ä¸€ç»„æœ€ä¼˜çš„æƒé‡ã€‚\n\n#### ç”Ÿæˆæ¨¡å‹\nåœ¨ç»å°”å…¹æ›¼æœºä¸­é…åˆ†å‡½æ•°$Z$é€šå¸¸éš¾ä»¥è®¡ç®—ï¼Œå› æ­¤è”åˆæ¦‚ç‡åˆ†å¸ƒ$p(x)$ä¸€èˆ¬é€šè¿‡MCMCï¼ˆé©¬å°”ç§‘å¤«é“¾è’™ç‰¹å¡ç½—ï¼ŒMarkov Chain Monte Carloï¼‰æ–¹æ³•æ¥è¿‘ä¼¼ï¼Œç”Ÿæˆä¸€ç»„æœä»$p(x)$åˆ†å¸ƒçš„æ ·æœ¬ã€‚è¿™é‡Œä»‹ç»åŸºäºå‰å¸ƒæ–¯é‡‡æ ·çš„æ ·æœ¬ç”Ÿæˆæ–¹æ³•ã€‚\n\n**1. å…¨æ¡ä»¶æ¦‚ç‡**\nå‰å¸ƒæ–¯é‡‡æ ·éœ€è¦è®¡ç®—æ¯ä¸ªå˜é‡$X_i$çš„å…¨æ¡ä»¶æ¦‚ç‡$p(x_i|x_{\\setminus i})$ï¼Œå…¶ä¸­$x_{\\setminus i}$è¡¨ç¤ºé™¤äº†$X_i$å¤–å…¶å®ƒå˜é‡çš„å–å€¼ã€‚\n\nå¯¹äºç»å°”å…¹æ›¼æœºä¸­çš„ä¸€ä¸ªå˜é‡$X_i$ï¼Œå½“ç»™å®šå…¶ä»–å˜é‡$x_{\\setminus i}$æ—¶ï¼Œå…¨æ¡ä»¶æ¦‚ç‡å…¬å¼$p(x_i|x_{\\setminus i})$ä¸ºï¼š\n$$\np(x_i=1|x_{\\setminus i}) = \\sigma( \\frac{ \\sum_{j} w_{ij}x_j +b_i }{T} )\n\\\\\np(x_i=0|x_{\\setminus i}) = 1- p(x_i=1|x_{\\setminus i})\n$$\nå…¶ä¸­$\\sigma(.)$ä¸ºsigmoidå‡½æ•°ã€‚\n\n\n**2. å‰å¸ƒæ–¯é‡‡æ ·**\n\nç»å°”å…¹æ›¼æœºçš„å‰å¸ƒæ–¯é‡‡æ ·è¿‡ç¨‹ä¸ºï¼šéšæœºé€‰æ‹©ä¸€ä¸ªå˜é‡$X_i$ï¼Œç„¶åæ ¹æ®å…¶å…¨æ¡ä»¶æ¦‚ç‡$p(x_i|x_{\\setminus i})$æ¥è®¾ç½®å…¶çŠ¶æ€ï¼Œå³ä»¥$p(x_i=1|x_{\\setminus i})$çš„æ¦‚ç‡å°†å˜é‡$X_i$è®¾ä¸º1ï¼Œå¦åˆ™å…¨ä¸º0ã€‚åœ¨å›ºå®šæ¸©åº¦$T$çš„æƒ…å†µä¸‹ï¼Œåœ¨è¿åŠ¨ä¸å¤Ÿæ—¶é—´ä¹‹åï¼Œç»å°”å…¹æ›¼æœºä¼šè¾¾åˆ°çƒ­å¹³è¡¡ã€‚æ­¤æ—¶ï¼Œä»»ä½•å…¨å±€çŠ¶æ€çš„æ¦‚ç‡æœä»ç»å°”å…¹æ›¼åˆ†å¸ƒ$p(x)$ï¼Œåªä¸ç³»ç»Ÿçš„èƒ½é‡æœ‰å…³ï¼Œä¸åˆå§‹çŠ¶æ€æ— å…³ã€‚\n\nè¦ä½¿å¾—ç»å°”å…¹æ›¼æœºè¾¾åˆ°çƒ­å¹³è¡¡ï¼Œå…¶æ”¶æ•›é€Ÿåº¦å’Œæ¸©åº¦$T$ç›¸å…³ã€‚å½“ç³»ç»Ÿæ¸©åº¦éå¸¸é«˜$T \\rightarrow \\infty$æ—¶ï¼Œ$p(x_i|x_{\\setminus i}) \\rightarrow 0.5$ï¼Œå³æ¯ä¸ªå˜é‡çŠ¶æ€çš„æ”¹å˜ååˆ†å®¹æ˜“ï¼Œæ¯ä¸€ç§ç³»ç»ŸçŠ¶æ€éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä»è€Œå¾ˆå¿«å¯ä»¥è¾¾åˆ°çƒ­å¹³è¡¡ã€‚å½“ç³»ç»Ÿæ¸©åº¦éå¸¸ä½$T \\rightarrow 0$æ—¶ï¼Œå¦‚æœ$\\Delta E_i(x_{ \\setminus i}) > 0$ï¼Œåˆ™$p(x_i|x_{\\setminus i}) \\rightarrow 1$ï¼Œå¦‚æœ$\\Delta E_i(x_{ \\setminus i}) < 0$ï¼Œåˆ™$p(x_i|x_{\\setminus i}) \\rightarrow 0$ï¼Œå³ï¼š\n$$\nx_i = \\left\\{\\begin{matrix}\n1 &  if \\sum_{j}w_{ij}x_j + b_i  \\geq 0\\\\ \n0 & otherwise\n\\end{matrix}\\right.\n$$\n\nå› æ­¤ï¼Œå½“$ \\rightarrow 0$æ—¶ï¼Œéšæœºæ€§æ–¹æ³•å˜æˆäº†ç¡®å®šæ€§æ–¹æ³•ï¼Œè¿™æ—¶ï¼Œç»å°”å…¹æ›¼æœºé€€åŒ–ä¸ºä¸€ä¸ªHopfieldç½‘ç»œã€‚Hopfieldç½‘ç»œæ˜¯ä¸€ç§ç¡®å®šæ€§çš„åŠ¨åŠ›ç³»ç»Ÿï¼Œæ¯æ¬¡çš„çŠ¶æ€æ›´æ–°éƒ½ä¼šä½¿ç³»ç»Ÿçš„èƒ½é‡é™ä½ï¼›è€Œç»å°”å…¹æ›¼æœºæ—¶ä¸€ç§éšæœºæ€§åŠ¨åŠ›ç³»ç»Ÿï¼Œæ¯æ¬¡çš„çŠ¶æ€æ›´æ–°åˆ™ä»¥ä¸€å®šçš„æ¦‚ç‡ä½¿å¾—ç³»ç»Ÿçš„èƒ½åŠ›ä¸Šå‡ã€‚\n\n**3. èƒ½é‡æœ€å°åŒ–ä¸æ¨¡æ‹Ÿé€€ç«**\n\nè¦ä½¿å¾—åŠ¨åŠ›ç³»ç»Ÿè¾¾åˆ°çƒ­å¹³è¡¡ï¼Œæ¸©åº¦$T$çš„é€‰æ‹©ååˆ†å…³é”®ã€‚ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æŠ˜ä¸­æ–¹æ³•æ˜¯è®©ç³»ç»Ÿåˆšå¼€å§‹åœ¨ä¸€ä¸ªæ¯”è¾ƒé«˜çš„æ¸©åº¦ä¸‹è¿è¡Œè¾¾åˆ°çƒ­å¹³è¡¡ï¼Œç„¶åé€æ¸é™ä½ç›´åˆ°ç³»ç»Ÿåœ¨ä¸€ä¸ªæ¯”è¾ƒä½çš„æ¸©åº¦ä¸‹è¾¾åˆ°çƒ­å¹³è¡¡ã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿå¾—åˆ°ä¸€ä¸ªèƒ½é‡å…¨å±€æœ€å°çš„åˆ†å¸ƒã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºæ¨¡æ‹Ÿé€€ç«ï¼ˆSimulated Annealingï¼‰ã€‚\n\næ¨¡æ‹Ÿé€€ç«æ˜¯ä¸€ç§å¯»æ‰¾å…¨å±€æœ€ä¼˜çš„è¿‘ä¼¼æ–¹æ³•ã€‚\n\n\n### å—é™ç»å°”å…¹æ›¼æœº\n#### ä»‹ç»\nå…¨è¿æ¥çš„ç»å°”å…¹æ›¼æœºååˆ†å¤æ‚ï¼Œè™½ç„¶åŸºäºé‡‡æ ·çš„æ–¹æ³•æé«˜äº†å­¦ä¹ æ•ˆç‡ï¼Œä½†åœ¨æƒé‡æ›´æ–°çš„è¿‡ç¨‹ä¸­ä»ååˆ†ä½æ•ˆã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä½¿ç”¨æ¯”è¾ƒå¹¿æ³›çš„ä¸€ç§å¸¦é™åˆ¶çš„ç‰ˆæœ¬ï¼Œå³å—é™ç»å°”å…¹æ›¼æœºï¼ˆRestricted Boltzmann Machineï¼ŒRBMï¼‰æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾ç»“æ„çš„æ— å‘å›¾æ¨¡å‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚\n![ä¸€ä¸ªæœ‰7ä¸ªå˜é‡çš„å—é™ç»å°”å…¹æ›¼æœº](https://img-blog.csdnimg.cn/20191122145237428.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\né¦–å…ˆç»å°”å…¹æ›¼æœºä¸­çš„å˜é‡ä¹Ÿåˆ†ä¸ºéšè—å˜é‡å’Œå¯è§‚æµ‹å˜é‡ã€‚åˆ†åˆ«ç”¨å¯è§‚æµ‹å±‚å’Œéšè—å±‚æ¥è¡¨ç¤ºè¿™ä¸¤ç»„å˜é‡ã€‚åŒä¸€å±‚ä¸­çš„èŠ‚ç‚¹ä¹‹é—´æ²¡æœ‰è¿æ¥ï¼Œè€Œä¸åŒå±‚ä¸€ä¸ªå±‚ä¸­çš„èŠ‚ç‚¹ä¸å¦ä¸€å±‚ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹è¿æ¥ï¼Œè¿™å’Œä¸¤å±‚çš„å…¨è¿æ¥ç¥ç»ç½‘ç»œç»“æ„ç›¸åŒã€‚\n\nä¸€ä¸ªå—é™ç»å°”å…¹æ›¼æœºç”±$m_1$ä¸ªå¯è§‚æµ‹å˜é‡å’Œ$m_2$ä¸ªéšå˜é‡ç»„æˆï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š\n\n- å¯è§‚æµ‹çš„éšæœºå‘é‡$v=[v_1, ..., v_{m_1}]^T$\n- éšè—çš„éšæœºå‘é‡ $h=[h_1, ... , h_{m_2}]^T$\n- æƒé‡çŸ©é˜µ$W \\in R^{m_1 * m_2}$ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ $w_{ij}$ä¸ºå¯è§‚æµ‹å˜é‡$v_i$å’Œéšå˜é‡$h_j$ä¹‹é—´è¾¹çš„æƒé‡\n- åç½®$a \\in R^{m_1}$å’Œ$b \\in R^{m_2}$ï¼Œå…¶ä¸­$a_i$ä¸ºæ¯ä¸ªå¯è§‚æµ‹å˜é‡$v_i$å¾—åç½®ï¼Œ$b_j$ä¸ºæ¯ä¸ªéšå˜é‡$h_j$å¾—åç½®\n\nå—é™ç»å°”å…¹æ›¼æœºå¾—èƒ½é‡å‡½æ•°å®šä¹‰ä¸ºï¼š\n$$\nE(v,h) = - \\sum_{i} a_iv_i - \\sum_{j}b_j h_j - \\sum_{i}\\sum_{j}v_i w_{ij}h_j = -a^Tv -b^Th - v^T W h\n$$\nå—é™ç»å°”å…¹æ›¼æœºå¾—è”åˆæ¦‚ç‡åˆ†å¸ƒä¸º$p(v,h)$å®šä¹‰ä¸ºï¼š\n$$\np(v,h) = \\frac{1}{Z} exp(-E(v,h)) = \\frac{1}{Z} exp(a^Tv)exp(b^Th)exp(v^TWh)\n$$\nå…¶ä¸­$Z=\\sum_{v,h}exp(-E(v,h))$ä¸ºé…åˆ†å‡½æ•°ã€‚\n\n#### ç”Ÿæˆæ¨¡å‹\nå—é™ç»å°”å…¹æ›¼æœºå¾—è”åˆæ¦‚ç‡åˆ†å¸ƒp(v,h)ä¸€èˆ¬ä¹Ÿé€šè¿‡å‰å¸ƒæ–¯é‡‡æ ·çš„æ–¹æ³•æ¥è¿‘ä¼¼ï¼Œç”Ÿæˆä¸€ç»„æœä»$p(v,h)$åˆ†å¸ƒçš„æ ·æœ¬ã€‚\n\n**1. å…¨æ¡ä»¶æ¦‚ç‡**\nå‰å¸ƒæ–¯é‡‡æ ·éœ€è¦è®¡ç®—æ¯ä¸ªå˜é‡$V_i$å’Œ$H_j$çš„å…¨æ¡ä»¶æ¦‚ç‡ã€‚å—é™ç»å°”å…¹æ›¼æœºä¸­çš„åŒå±‚çš„å˜é‡ä¹‹é—´æ²¡æœ‰è¿æ¥ã€‚ä»æ— å‘å›¾çš„æ€§è´¨å¯çŸ¥ï¼Œåœ¨ç»™å®šå¯è§‚æµ‹å˜é‡æ—¶ï¼Œéšå˜é‡ä¹‹é—´ç›¸äº’æ¡ä»¶ç‹¬ç«‹ï¼ŒåŒæ ·åœ¨ç»™å®šéšå˜é‡æ—¶ï¼Œå¯è§‚æµ‹å˜é‡ä¹‹é—´ä¹Ÿç›¸äº’æ¡ä»¶ç‹¬ç«‹ï¼Œå³æœ‰ï¼š\n$$\np(v_i | v_{\\setminus i},h) = p(v_i|h)\n\\\\\np(h_j | v,h_{\\setminus j}) = p(h_j|v)\n$$\nå…¶ä¸­$v_{\\setminus i}$è¡¨ç¤ºé™¤å˜é‡$V_i$å¤–å…¶ä»–å¯è§‚æµ‹å˜é‡å¾—å–å€¼ï¼Œ$h_{\\setminus j}$ä¸ºé™¤å˜é‡$H_j$å¤–å…¶å®ƒéšå˜é‡çš„å–å€¼ã€‚å› æ­¤ï¼Œ$V_i$çš„å…¨æ¡ä»¶æ¦‚ç‡åªéœ€è¦è®¡ç®—$p(v_i|h)$ï¼Œè€Œ$H_j$çš„å…¨æ¡ä»¶æ¦‚ç‡åªéœ€è¦è®¡ç®—$p(h_j|v)$\n\nåœ¨å—é™ç»å°”å…¹æ›¼æœºä¸­ï¼Œæ¯ä¸ªå¯è§‚æµ‹å˜é‡å’Œéšå˜é‡çš„æ¡ä»¶æ¦‚ç‡ä¸ºï¼š\n$$\np(v_i=1|h) = \\sigma (a_i + \\sum_{j}w_{ij} h_j)\n\\\\\np(h_j=1|v) = \\sigma (b_j + \\sum_{i}w_{ij} v_i)\n$$\n\nå…¶ä¸­$\\sigma$ä¸ºsigmoidå‡½æ•°ã€‚\n\n**2. RBMä¸­å¾—å‰å¸ƒæ–¯é‡‡æ ·**\nå—é™ç»å°”å…¹æ›¼æœºå¾—é‡‡æ ·è¿‡ç¨‹å¦‚ä¸‹ï¼š\n\n- ï¼ˆç»™å®šï¼‰æˆ–éšæœºåˆå§‹åŒ–ä¸€ä¸ªå¯è§‚æµ‹çš„å‘é‡$v_0$ï¼Œè®¡ç®—éšå˜é‡å¾—æ¦‚ç‡ï¼Œå¹¶ä»ä¸­é‡‡æ ·ä¸€ä¸ªéšå‘é‡$h_0$\n- åŸºäº$h_0$ï¼Œè®¡ç®—å¯è§‚æµ‹å˜é‡å¾—æ¦‚ç‡ï¼Œå¹¶ä»ä¸­é‡‡æ ·ä¸€ä¸ªä¸ªå¯è§‚æµ‹çš„å‘é‡$v_1$\n- é‡å¤$t$æ¬¡åï¼Œè·å¾—$(v_t, h_t)$\n- å½“$t \\rightarrow \\infty$æ—¶ï¼Œ$(v_t,h_t)$çš„é‡‡æ ·æœä»$p(v,h)$åˆ†å¸ƒ\n\nä¸‹å›¾ä¸ºä¸Šè¿°é‡‡æ ·è¿‡ç¨‹çš„ç¤ºä¾‹ï¼š\n![å—é™ç»å°”å…¹æ›¼æœºå¾—é‡‡æ ·è¿‡ç¨‹](https://img-blog.csdnimg.cn/20191122162803614.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n**3. å¯¹æ¯”æ•£åº¦å­¦ä¹ ç®—æ³•**\n\nç”±äºé¦–å…ˆç»å°”å…¹æ›¼æœºå¾—ç‰¹æ®Šç»“æ„ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ä¸€ç§æ¯”å‰å¸ƒæ–¯é‡‡æ ·æ›´é«˜æ•ˆçš„å­¦ä¹ ç®—æ³•ï¼Œå³å¯¹æ¯”æ•£åº¦ï¼ˆContrastive Divergenceï¼‰ã€‚å¯¹æ¯”æ•£åº¦ç®—æ³•ä»…éœ€kæ­¥å‰å¸ƒæ–¯é‡‡æ ·ã€‚\n\nä¸ºäº†æé«˜æ•ˆç‡ï¼Œå¯¹æ¯”æ•£åº¦ç®—æ³•ç”¨ä¸€ä¸ªè®­ç»ƒæ ·æœ¬ä½œä¸ºå¯è§‚æµ‹å‘é‡çš„åˆå§‹å€¼ï¼Œç„¶åäº¤æ›¿å¯¹å¯è§‚æµ‹å‘é‡å’Œéšè—å‘é‡è¿›è¡Œå‰å¸ƒæ–¯é‡‡ç”¨ï¼Œä¸éœ€è¦ç­‰åˆ°æ”¶æ•›ï¼Œåªéœ€è¦kæ­¥å°±è¡Œäº†ã€‚è¿™å°±æ˜¯CD-kç®—æ³•ï¼Œé€šå¸¸ï¼Œk=1å°±å¯ä»¥å­¦å¾—å¾ˆå¥½ã€‚å¯¹æ¯”æ•£åº¦å¾—æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š\n![å•æ­¥å¯¹æ¯”æ•£åº¦ç®—æ³•](https://img-blog.csdnimg.cn/20191122163920824.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n**4. å—é™ç»å°”å…¹æ›¼æœºå¾—ç±»å‹**\nåœ¨å…·ä½“çš„ä¸åŒä»»åŠ¡ä¸­ï¼Œéœ€è¦å¤„ç†å¾—æ•°æ®ç±»å‹ä¸ä¸€å®šæ˜¯äºŒå€¼å¾—ï¼Œä¹Ÿå¯èƒ½æ—¶è¿ç»­å€¼ï¼Œä¸ºäº†èƒ½å¤Ÿå¤„ç†è¿™äº›æ•°æ®ï¼Œå°±éœ€è¦æ ¹æ®è¾“å…¥æˆ–è¾“å‡ºå¾—æ•°æ®ç±»å‹æ¥è®¾è®¡æ–°çš„èƒ½é‡å‡½æ•°ã€‚ä¸€èˆ¬æ¥è¯´å—é™ç»å°”å…¹æ›¼æœºæœ‰ä»¥ä¸‹ä¸‰ç§ï¼š\n\n- â€œä¼¯åŠªåˆ©-ä¼¯åŠªåˆ©â€å—é™ç»å°”å…¹æ›¼æœºï¼šå³ä¸Šé¢ä»‹ç»å¾—å¯è§‚æµ‹å˜é‡å–éšå˜é‡éƒ½ä¸ºäºŒå€¼ç±»å‹å¾—å—é™ç»å°”å…¹æ›¼æœº\n- â€œé«˜æ–¯-ä¼¯åŠªåˆ©â€å—é™ç»å°”å…¹æ›¼æœºï¼šå‡è®¾å¯è§‚æµ‹å˜é‡ä¸ºé«˜æ–¯åˆ†å¸ƒï¼Œéšå˜é‡ä¸ºä¼¯åŠªåˆ©åˆ†å¸ƒï¼Œå…¶èƒ½é‡å‡½æ•°å®šä¹‰ä¸ºï¼š\n$$\nE(v,h) = \\sum_{i} \\frac{(v_i - \\mu_i)^2}{2 \\sigma_i^2} - \\sum{j} b_jh_j - \\sum_{i}\\sum{j} \\frac{v_i}{\\sigma_i}w_ijh_j\n$$\nå…¶ä¸­æ¯ä¸ªå¯è§‚æµ‹å˜é‡$v_i$æœä»$(\\mu_i, \\sigma_i)$çš„é«˜æ–¯åˆ†å¸ƒã€‚\n- â€œä¼¯åŠªåˆ©-é«˜æ–¯â€å—é™ç»å°”å…¹æ›¼æœºï¼šå‡è®¾å¯è§‚æµ‹å˜é‡ä¸ºä¼¯åŠªåˆ©åˆ†å¸ƒï¼Œéšå˜é‡ä¸ºé«˜æ–¯åˆ†å¸ƒï¼Œå…¶èƒ½é‡å‡½æ•°å®šä¹‰ä¸ºï¼š\n$$\nE(v,h)=\\sum_{i}a_i v_j - \\sum_{j} \\frac{(h_j-u_j)^2}{2\\sigma_j^2} - \\sum_{i}\\sum_{j}v_iw_{ij}\\frac{h_j}{\\sigma_j}\n$$\nå…¶ä¸­æ¯ä¸ªéšå˜é‡$h_j$æœä»$(\\mu_j, \\sigma_j)$çš„é«˜æ–¯åˆ†å¸ƒ\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆä¸­ï¼‰ç¯‡","url":"/2019/04/23/æ·±åº¦å­¦ä¹ /å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ/å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆä¸­ï¼‰ç¯‡/","content":"\n\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/100709422\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\n\n---\n### å¼•è¨€\n\nå¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œç³»åˆ—ç¬¬ä¸‰ç§ï¼Œä¸»è¦ä»‹ç»å¾ªç¯ç¥ç»ç½‘ç»œï¼Œåˆ†ä¸ºä¸Šä¸­ä¸‹ä¸‰ç¯‡è¿›è¡Œä»‹ç»ï¼Œæœ¬æ–‡ä¸»ä¸ºï¼ˆä¸­ï¼‰ç¯‡ï¼Œæ¶‰åŠå†…å®¹å¦‚ä¸‹ï¼š\n\n- å¾ªç¯ç¥ç»ç½‘ç»œä¸­çš„å‚æ•°å­¦ä¹ \n- RNNä¸­çš„é•¿æœŸä¾èµ–é—®é¢˜\n- å¸¸è§çš„å¾ªç¯ç¥ç»ç½‘ç»œç»“æ„\n\nè¯¥ç³»åˆ—çš„å…¶ä»–æ–‡ç« ï¼š\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(1)-å‰é¦ˆç¥ç»ç½‘ç»œ](https://blog.csdn.net/Gamer_gyt/article/details/89459131)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(2)-å·ç§¯ç¥ç»ç½‘ç»œ](https://blog.csdn.net/Gamer_gyt/article/details/100531593)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸Šç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/100600661)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸­ç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/100709422)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸‹ç¯‡)](https://thinkgamer.blog.csdn.net/article/details/100943664)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œ(ä¸Šç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/103231385)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œ(ä¸‹ç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/103437985)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸Šç¯‡ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/103754752)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸‹ç¯‡ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/103754752)\n\n---\n\n### å‚æ•°å­¦ä¹ \n\nå¾ªç¯ç¥ç»ç½‘ç»œçš„å‚æ•°å¯ä»¥é€šè¿‡æ¢¯åº¦ä¸‹é™æ–¹æ³•æ¥å­¦ä¹ ã€‚ç»™å®šä¸€ä¸ªæ ·æœ¬(x,y)ï¼Œå…¶ä¸­$x_{1:T}=(x_1, x_2, ... ,x_T)$ä¸ºé•¿åº¦æ˜¯Tçš„è¾“å…¥åºåˆ—ï¼Œå…¶ä¸­$y_{1:T}=(y_1, y_2, ... ,y_T)$æ˜¯é•¿åº¦ä¸ºTçš„æ ‡ç­¾åºåˆ—ï¼Œåœ¨æ¯ä¸ªæ—¶åˆ»tï¼Œéƒ½æœ‰ä¸€ä¸ªç›‘ç£ä¿¡æ¯$y_t$ï¼Œå®šä¹‰æ—¶åˆ»tçš„æŸå¤±å‡½æ•°ä¸ºï¼ˆå…¬å¼1-1ï¼‰ï¼š\n$$\nL_t = L(y_t, g(h_t))\n$$\nå…¶ä¸­$g(h_t)$ä¸ºç¬¬tæ—¶åˆ»çš„è¾“å‡ºï¼ŒLä¸ºå¯å¾®åˆ†çš„æŸå¤±å‡½æ•°ï¼Œæ¯”å¦‚äº¤å‰ç†µï¼Œæ•´ä¸ªåºåˆ—ä¸Šçš„æŸå¤±å‡½æ•°ä¸ºï¼ˆå…¬å¼1-2ï¼‰ï¼š\n$$\nL = \\sum_{t=1}^{T} L_t\n$$\næ•´ä¸ªåºåˆ—çš„æŸå¤±å‡½æ•°Lå…³äºå‚æ•°Uçš„æ¢¯åº¦ä¸ºï¼ˆå…¬å¼1-3ï¼‰ï¼š\n$$\n\\frac{\\partial L}{\\partial U} = \\sum _{t=1}^{T}\\frac{\\partial L_t}{ \\partial U }\n$$\nå³æ¯ä¸ªæ—¶åˆ»çš„æŸå¤±å‡½æ•°$L_t$å¯¹å‚æ•°Uçš„åå¯¼æ•°ä¹‹å’Œã€‚\n\nåœ¨å¾ªç¯ç¥ç»ç½‘ç»œä¸­ä¸»è¦æœ‰ä¸¤ç§è®¡ç®—æ¢¯åº¦çš„æ–¹å¼ï¼š\n- éšæ—¶é—´åå‘ä¼ æ’­ç®—æ³•ï¼ˆBackpropagation Through Timeï¼ŒBRTTï¼‰\n- å®æ—¶å¾ªç¯å­¦ä¹ ï¼ˆReal-Time Recurrent Learningï¼ŒRTRLï¼‰\n\n#### éšæ—¶é—´åå‘ä¼ æ’­ç®—æ³•\n\nä¸»è¦é€šè¿‡ç±»ä¼¼å‰é¦ˆç¥ç»ç½‘ç»œçš„é”™è¯¯åå‘ä¼ æ’­ç®—æ³•æ¥è¿›è¡Œè®¡ç®—æ¢¯åº¦ã€‚éšæ—¶é—´åå‘ä¼ æ’­ç®—æ³•å°†å¾ªç¯ç¥ç»ç½‘ç»œçœ‹ä½œæ˜¯ä¸€ä¸ªå±•å¼€çš„å¤šå±‚å‰é¦ˆç½‘ç»œï¼Œå…¶ä¸­â€œæ¯ä¸€å±‚â€å¯¹åº”å¾ªç¯ç½‘ç»œä¸­çš„æ¯ä¸ªæ—¶åˆ»ï¼Œè¿™æ ·å¾ªç¯ç¥ç»ç½‘ç»œå°±å¯ä»¥æŒ‰ç…§å‰é¦ˆç¥ç»ç½‘ç»œä¸­çš„åå‘ä¼ æ’­ç®—æ³•æ¥è®¡ç®—æ¢¯åº¦ã€‚ä¸å‰é¦ˆç¥ç»ç½‘ç»œä¸åŒçš„æ˜¯ï¼Œå¾ªç¯ç¥ç»ç½‘ç»œä¸­å„å±‚çš„å‚æ•°æ˜¯å…±äº«çš„ï¼Œå› æ­¤å‚æ•°çš„çœŸå®æ¢¯åº¦æ˜¯å„ä¸ªå±‚çš„å‚æ•°æ¢¯åº¦ä¹‹å’Œã€‚\n\nå…ˆè®¡ç®—å…¬å¼1-3ä¸­ç¬¬tæ—¶åˆ»æŸå¤±å¯¹å‚æ•°Uçš„åå¯¼æ•° $\\frac {\\partial L_t}{\\partial U}$ï¼Œå‚æ•°Uå’Œæ¯ä¸ªæ—¶åˆ»kçš„å‡€è¾“å…¥$z_k = Uh_{k-1} + Wx_{k} + b$æœ‰å…³ï¼Œå› æ­¤ç¬¬tä¸ªæ—¶åˆ»æŸå¤±å‡½æ•°$L_t$å…³äºå‚æ•°$U_ij$çš„æ¢¯åº¦ä¸ºï¼ˆå…¬å¼1-4ï¼‰ï¼š\n$$\n\\frac{\\partial L_t}{ \\partial U_{ij}} = \\sum_{k=1}^{t} tr( ( \\frac{\\partial L_t}{ \\partial z_k} )^T \\frac{\\partial^+ z_k}{ \\partial U_{ij}}    )\n\\\\\n= \\sum_{k=1}^{t}  ( \\frac{\\partial^+ z_k}{ \\partial U_{ij}}    )^T  \\frac{\\partial L_t}{ \\partial z_k} \n$$\n\nå…¶ä¸­$\\frac{\\partial^+ z_k}{ \\partial U_{ij}}$ è¡¨ç¤ºâ€œç›´æ¥â€åå¯¼æ•°ï¼Œå³å…¬å¼$z_k = Uh_{k-1} + Wx_{k} + b$ä¸­ä¿æŒ$h_{k-1}$ä¸å˜ï¼Œå¯¹$U_{ij}$è¿›è¡Œæ±‚åå¯¼æ•°ï¼Œå¾—åˆ°ï¼ˆå…¬å¼1-5ï¼‰ï¼š\n$$\n \\frac{\\partial^+ z_k}{ \\partial U_{ij}}  = \\begin{bmatrix}\n0\\\\ \n... \\\\ \n[h_{k-1}]_j \\\\ \n... \\\\ \n0\n\\end{bmatrix} \\triangleq I_i([h_{k-1}]_j)\n$$\nå…¶ä¸­$[h_{k-1}]_j$ä¸ºç¬¬$k-1$æ—¶åˆ»éšçŠ¶æ€çš„ç¬¬jç»´ï¼Œ$I_i(x)$é™¤äº†ç¬¬jè¡Œå€¼ä¸ºxï¼Œä¹‹å¤–å…¨ä¸º0çš„å‘é‡ã€‚\n\nå®šä¹‰$\\delta _{t,k} = \\frac{\\partial L_t}{ \\partial z_k }$ä¸ºç¬¬tæ—¶åˆ»æŸå¤±å‡½æ•°å¯¹ç¬¬kæ—¶åˆ»éšè—å±‚ç¥ç»å…ƒå‡€è¾“å…¥$z_k$çš„å¯¼æ•°ï¼Œåˆ™ï¼ˆå…¬å¼1-6ï¼‰ï¼š\n$$\n\\delta _{t,k} = \\frac{\\partial L_t}{ \\partial z_k }\n\\\\\n= \\frac{ \\partial h_k }{ \\partial z_k} \\frac{\\partial z_{k+1}}{ \\partial h_k } \\frac{ \\partial L_t }{ \\partial z_{k+1} }\n\\\\\n= diag(f'(z_k))U^T \\delta _{t,k+1}\n$$\n\nå°†ï¼ˆå…¬å¼1-6ï¼‰ å’Œ ï¼ˆå…¬å¼ 1-5ï¼‰ ä»£å…¥ï¼ˆå…¬å¼1-4ï¼‰å¾—åˆ°ï¼ˆå…¬å¼1-7ï¼‰ï¼š\n$$\n\\frac{\\partial L_t}{ \\partial U_{ij} } = \\sum_{k=1}^{ t } [\\delta _{t,k}]_i [h_{k-1}]_j\n$$\nå°†ï¼ˆå…¬å¼1-7ï¼‰å†™æˆçŸ©é˜µå½¢å¼ä¸ºï¼ˆå…¬å¼1-8ï¼‰ï¼š\n$$\n\\frac{\\partial L}{ \\partial U } = \\sum_{k=1}^{ t } \\delta _{t,k} h^T_{k-1}\n$$\nä¸‹å›¾ä¸ºéšæ—¶é—´åå‘ä¼ æ’­ç®—æ³•ç¤ºä¾‹ï¼š\n\n![éšæ—¶é—´åå‘ä¼ æ’­ç®—æ³•ç¤ºä¾‹](https://img-blog.csdnimg.cn/20190910191047315.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nå°†ï¼ˆå…¬å¼1-8ï¼‰ä»£å…¥ï¼ˆå…¬å¼1-3ï¼‰å¾—åˆ°æ•´ä¸ªåºåˆ—çš„æŸå¤±å‡½æ•°$L$å…³äºå‚æ•°$U$çš„æ¢¯åº¦ï¼ˆå…¬å¼1-9ï¼‰:\n$$\n\\frac{\\partial L}{ \\partial U } = \\sum_{t=1}^{ T}\\sum_{k=1}^{ t } \\delta _{t,k} h^T_{k-1}\n$$\n\nåŒç†å¯å¾—åˆ°$L$å…³äºå‚æ•°$W$çš„æ¢¯åº¦ï¼ˆå…¬å¼1-10ï¼‰ï¼š\n$$\n\\frac{\\partial L}{ \\partial W } = \\sum_{t=1}^{ T}\\sum_{k=1}^{ t } \\delta _{t,k} x^T_k\n$$\n\n$L$å…³äºå‚æ•°$b$çš„æ¢¯åº¦ï¼ˆå…¬å¼1-11ï¼‰ï¼š\n$$\n\\frac{\\partial L}{ \\partial b } = \\sum_{t=1}^{ T}\\sum_{k=1}^{ t } \\delta _{t,k}\n$$\n\n> åœ¨ éšæ—¶é—´åå‘ä¼ æ’­ç®—æ³•ä¸­ï¼Œå‚æ•°çš„æ¢¯åº¦éœ€è¦åœ¨ä¸€ä¸ªå®Œæ•´çš„â€œå‘å‰â€è®¡ç®—å’Œâ€œå‘åâ€è®¡ç®—åæ‰èƒ½å¾—åˆ°å¹¶å‚æ•°æ›´æ–°ã€‚\n\n\n#### å®æ—¶å¾ªç¯å­¦ä¹ \nä¸éšæ—¶é—´åå‘ä¼ æ’­ç®—æ³•ä¸åŒçš„æ˜¯ï¼šå®æ—¶å¾ªç¯å­¦ä¹ ï¼ˆReal-Time Recurrent Learningï¼‰æ˜¯é€šè¿‡å‰å‘ä¼ æ’­çš„æ–¹å¼æ¥è®¡ç®—æ¢¯åº¦ã€‚\n\nå‡è®¾RNNä¸­ç¬¬ $t+1$æ—¶åˆ»çš„çŠ¶æ€$h_{t+1}$ä¸ºï¼ˆå…¬å¼1-12ï¼‰ï¼š\n$$\nh_{t+1} = f(z_{t+1}) = f(Uh_k + Wx_{k+1} + b)\n$$\nå…¶å…³äºå‚æ•°$U_{ij$çš„åå¯¼æ•°ä¸ºï¼ˆå…¬å¼1-13ï¼‰ï¼š\n$$\n\\frac{ h_{t+1} }{ \\partial U_{ij} } = \\frac{ \\partial h_{t+1} }{ \\partial z_{t+1} } ( \\frac{ \\partial^+z_{t+1} }{ \\partial  U_{ij}}   + U \\frac{ \\partial h_t}{ \\partial U_{ij} } )\n\\\\\n= diag( f'(z_{t+1}) ) ( I_i ([h_t]_j)+ U \\frac{ \\partial h_t}{ \\partial U_{ij} }  )\n\\\\\n=f'(z_{t+1}) \\odot  ( I_i ([h_t]_j)+ U \\frac{ \\partial h_t}{ \\partial U_{ij} }  )\n$$\nå…¶ä¸­$I_i(x)$ä¸ºé™¤äº†ç¬¬iè¡Œä¹‹å¤–å…ƒç´ å…¨ä¸º0çš„å‘é‡ã€‚\n\nRTRLè‡ªä»ç¬¬ä¸€ä¸ªæ—¶åˆ»å¼€å§‹ï¼Œé™¤äº†è®¡ç®—RNNçš„éšçŠ¶æ€ä¹‹å¤–ï¼Œè¿˜åˆ©ç”¨ï¼ˆå…¬å¼1-13ï¼‰ä¾æ¬¡å‰å‘è®¡ç®—åå¯¼æ•°$\\frac{\\partial h_1}{ \\partial U_{ij}},\\frac{\\partial h_2}{ \\partial U_{ij}},\\frac{\\partial h_3}{ \\partial U_{ij}}...$\n\nè¿™æ ·å‡è®¾ç¬¬tä¸ªæ—¶åˆ»å­˜åœ¨ä¸€ä¸ªç›‘ç£ä¿¡æ¯ï¼Œå…¶æŸå¤±å‡½æ•°ä¸º$L_t$ï¼Œå°±å¯ä»¥åŒæ—¶è®¡ç®—æŸå¤±å‡½æ•°å¯¹$U_{ij}$çš„åå¯¼æ•°ï¼ˆå…¬å¼1-14ï¼‰ï¼š\n$$\n\\frac{\\partial L_t}{ \\partial U_{ij}} =( \\frac{\\partial h_t}{ \\partial U_{ij} } )^T \\frac{\\partial L_t}{ \\partial h_t}\n$$\nè¿™æ ·åœ¨ç¬¬tä¸ªæ—¶åˆ»å°±å¯ä»¥å®æ—¶è®¡ç®—$L_t$å…³äºå‚æ•°Uçš„æ¢¯åº¦ï¼Œå¹¶æ›´æ–°å‚æ•°ã€‚å‚æ•°Wå’Œbçš„æ¢¯åº¦ä¹Ÿå¯ä»¥æŒ‰ç…§ä¸Šè¿°æ–¹æ³•è¿›è¡Œè®¡ç®—ã€‚\n\n> ä¸¤ç§ç®—æ³•æ¯”è¾ƒï¼šRTRLç®—æ³•å’ŒBPTTç®—æ³•éƒ½æ˜¯åŸºäºæ¢¯åº¦æ±‚è§£å‚æ•°ï¼Œåˆ†åˆ«é€šè¿‡å‰å‘æ¨¡å¼å’Œåå‘æ¨¡å¼åº”ç”¨é“¾å¼æ³•åˆ™æ¥è®¡ç®—æ¢¯åº¦ã€‚åœ¨RNNä¸­ä¸€èˆ¬è¾“å‡ºç»´åº¦è¦æ¯”è¾“å…¥ç»´åº¦å°‘ï¼Œå› æ­¤BPTTç®—æ³•çš„è®¡ç®—é‡ä¼šå¾ˆå°ï¼Œä½†è¦ä¿å­˜è®¡ç®—è¿‡ç¨‹ä¸­çš„æ¢¯åº¦å€¼ï¼Œç©ºé—´å¤æ‚åº¦è¾ƒé«˜ã€‚RTRLç®—æ³•ä¸éœ€è¦è¿›è¡Œç©ºé—´å›ä¼ ï¼Œæ¯”è¾ƒé€‚åˆç”¨åœ¨åœ¨çº¿å­¦ä¹ æˆ–æ— é™åºåˆ—çš„ä»»åŠ¡ä¸­ã€‚\n\n### é•¿æœŸä¾èµ–\n\nåœ¨BRTTç®—æ³•ä¸­ï¼Œå°†ï¼ˆå…¬å¼1-6ï¼‰å±•å¼€å¾—åˆ°ï¼ˆå…¬å¼1-15ï¼‰ï¼š\n$$\n\\delta _{t,k}=\\prod_{i=k}^{t-1} ( diag('f(z_i ))U^T  )\\delta _{t,t}\n$$\nå¦‚æœå®šä¹‰$\\gamma \\approx || diag('f(z_i ))U^T   ||$ï¼Œåˆ™ï¼ˆå…¬å¼1-16ï¼‰ï¼š\n$$\n\\delta _{t,k}=\\gamma ^{t-k} \\delta _{t,t}\n$$\nè‹¥$\\gamma >1$ï¼Œå½“$t-k \\rightarrow +\\infty$ï¼Œ$\\gamma ^{t-k} \\rightarrow +\\infty$ï¼Œä¼šé€ æˆç³»ç»Ÿä¸ç¨³å®šï¼Œç§°ä¹‹ä¸ºæ¢¯åº¦çˆ†ç‚¸ï¼ˆGradient Exploding Problemï¼‰ï¼Œåä¹‹ï¼Œè‹¥$\\gamma < 1$ï¼Œå½“$t-k \\rightarrow +\\infty$ï¼Œ$\\gamma ^{t-k} \\rightarrow 0$ï¼Œä¼šå‡ºç°å’Œå‰é¦ˆç¥ç»ç½‘ç»œç±»ä¼¼çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼ˆGradient Vanishing Problemï¼‰ã€‚\n\n> æ³¨æ„ï¼šåœ¨å¾ªç¯ç¥ç»ç½‘ç»œä¸­ï¼Œæ¢¯åº¦æ¶ˆå¤±æŒ‡çš„æ˜¯å¹¶ä¸æ˜¯è¯´$\\frac{ \\partial L_t}{ \\partial U}$çš„æ¢¯åº¦æ¶ˆå¤±äº†ï¼Œè€Œæ˜¯$\\frac{ \\partial L_t}{ \\partial h_k}$çš„æ¢¯åº¦æ¶ˆå¤±ï¼Œå½“$t-k$å¾ˆå¤§æ—¶ï¼Œå³å‚æ•°Uçš„æ›´æ–°ä¸»è¦é æœ€è¿‘çš„å‡ ä¸ªçŠ¶æ€æ¥æ›´æ–°ï¼Œé•¿è·ç¦»çš„çŠ¶æ€å¯¹å‚æ•°Uæ²¡æœ‰å½±å“ã€‚\n\nå½“å¾ªç¯ç¥ç»ç½‘ç»œä¸­ä½¿ç”¨çš„æ¿€æ´»å‡½æ•°æ˜¯Logisticæˆ–è€…tanhçš„æ—¶å€™ï¼Œç”±äºå…¶å¯¼æ•°å°äº1ï¼Œå¹¶ä¸”æƒé‡çŸ©é˜µ$||U||$ä¹Ÿä¸ä¼šå¤ªå¤§ï¼Œå› æ­¤ï¼Œå¦‚æœæ—¶é—´é—´éš”t-kè¿‡å¤§çš„è¯ï¼Œä¹Ÿä¼šå‡ºç°æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚æ‰€ä»¥ä¸€èˆ¬é‡‡ç”¨ ReLUæ¿€æ´»å‡½æ•°ï¼ˆå…³äºæ¿€æ´»å‡½æ•°çš„ä»‹ç»å¯å‚è€ƒï¼š[ç¥ç»ç½‘ç»œä¸­çš„æ¿€æ´»å‡½æ•°ä»‹ç»](https://blog.csdn.net/Gamer_gyt/article/details/89440152)ï¼‰ã€‚\n\nè™½ç„¶ç®€å•å¾ªç¯ç½‘ç»œç†è®ºä¸Šå¯ä»¥å»ºç«‹é•¿æ—¶é—´é—´éš”çš„çŠ¶æ€ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä½†æ˜¯ç”±äºæ¢¯åº¦çˆ†ç‚¸å’Œæ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œå®é™…ä¸Šåªèƒ½å­¦ä¹ åˆ°çŸ­æœŸçš„ä¾èµ–å…³ç³»ï¼Œè¿™æ ·å¦‚æœtæ—¶åˆ»çš„è¾“å‡º$y_t$ä¾èµ–äº$t-k$æ—¶åˆ»çš„è¾“å…¥$x_{t-k}$ï¼Œå½“é—´éš”kæ¯”è¾ƒå¤§æ—¶ï¼Œç®€å•ç¥ç»ç½‘ç»œå¾ˆéš¾å»ºæ¨¡è¿™ç§é•¿è·ç¦»çš„ä¾èµ–å…³ç³»ï¼Œç§°ä¹‹ä¸ºé•¿æœŸä¾èµ–é—®é¢˜ï¼ˆLong-Term Dependences Problemï¼‰ã€‚\n\n\næ”¹è¿›æªæ–½ï¼š\n- é€‰å–åˆé€‚çš„å‚æ•°\n- ä½¿ç”¨éé¥±å’Œçš„æ¿€æ´»å‡½æ•°\n\nå¾ªç¯ç½‘ç»œçš„æ¢¯åº¦çˆ†ç‚¸é—®é¢˜æ¯”è¾ƒå®¹æ˜“è§£å†³ï¼Œä¸€èˆ¬é€šè¿‡æ¢¯åº¦æˆªæ–­å’Œæƒé‡è¡°å‡æ¥é¿å…ã€‚è€Œæ¢¯åº¦æ¶ˆå¤±å¾ˆéš¾è§£å†³ï¼Œé€šå¸¸æ˜¯å¯¹æ¨¡å‹è¿›è¡Œè°ƒä¼˜æ¥è§£å†³ã€‚\n\n### å¸¸è§çš„å¾ªç¯ç¥ç»ç½‘ç»œç»“æ„\n\nä¸»è¦åŒ…å«å››ç§ï¼š\n- Nï¼šN\n- 1ï¼šN\n- Nï¼š1\n- Nï¼šM\n\n#### Næ¯”Nç»“æ„\n\nNç»´è¾“å…¥å¯¹åº”Nç»´è¾“å‡ºï¼Œå¤§è‡´ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n![å¾ªç¯ç¥ç»ç½‘ç»œNæ¯”Nç»“æ„](https://img-blog.csdnimg.cn/20190910211158381.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nå…¶å¸¸å¸¸ç”¨äºå¤„ç†ä»¥ä¸‹é—®é¢˜ï¼š\n- è§†é¢‘ç†è§£ä¸­è·å–è§†é¢‘æ¯ä¸€å¸§æ ‡ç­¾ï¼Œè¾“å…¥ä¸ºè§†é¢‘è§£ç åçš„å›¾åƒï¼Œé€šè¿‡æ­¤ç»“æ„ï¼Œè·å–æ¯ä¸€ å¸§çš„æ ‡ç­¾ä¿¡æ¯ã€‚è¿™ç§åœºæ™¯ä¸€èˆ¬ç”¨ä½œè§†é¢‘ç†è§£çš„åˆæœŸï¼Œå¯¹è§†é¢‘åšåˆæ­¥çš„å¤„ç†åï¼Œ åç»­å¯ä»¥åŸºäºè¿™äº›æ ‡ç­¾ä¿¡æ¯è¿›è¡Œè¯­ä¹‰åˆ†æï¼Œæ„å»ºæ›´ä¸ºå¤æ‚çš„éœ€æ±‚åœºæ™¯ã€‚\n- è‚¡ç¥¨ä»·æ ¼é¢„æµ‹ã€‚åŸºäºå†å²çš„è‚¡ç¥¨ä¿¡æ¯è¾“å…¥ï¼Œé¢„æµ‹ä¸‹ä¸€æ—¶åˆ»æˆ–è€…æœªæ¥çš„è‚¡ç¥¨èµ°åŠ¿ä¿¡æ¯ã€‚\n\n#### 1æ¯”Nç»“æ„\n\nä¸€ç»´è¾“å…¥ï¼ŒNç»´è¾“å‡ºï¼Œå¤§è‡´ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n![å¾ªç¯ç¥ç»ç½‘ç»œ1æ¯”Nç»“æ„](https://img-blog.csdnimg.cn/20190910211546198.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nè¿˜æœ‰ä¸€ç§ç»“æ„æ˜¯åœ¨åŒä¸€ä¿¡æ¯åœ¨ä¸åŒæ—¶åˆ»è¾“å…¥åˆ°ç½‘ç»œä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n![å¾ªç¯ç¥ç»ç½‘ç»œ1æ¯”Nç»“æ„](https://img-blog.csdnimg.cn/20190910211800194.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nå…¶å¸¸å¸¸ç”¨äºå¤„ç†ä»¥ä¸‹é—®é¢˜ï¼š\n- çœ‹å›¾å†™æè¿° : æ ¹æ®è¾“å…¥çš„ ä¸€å¼ å›¾ ç‰‡ï¼Œç”Ÿæˆå¯¹è¿™å¼ å›¾ç‰‡çš„æè¿°ä¿¡æ¯ \n- è‡ªåŠ¨ä½œæ›² : æŒ‰ç…§ç±»åˆ«ç”ŸæˆéŸ³ä¹ \n\n#### Næ¯”1ç»“æ„\n\nNç»´è¾“å…¥ï¼Œä¸€ç»´è¾“å‡ºï¼Œå¤§è‡´ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n![å¾ªç¯ç¥ç»ç½‘ç»œNæ¯”1ç»“æ„](https://img-blog.csdnimg.cn/20190910211426311.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nå…¶å¸¸å¸¸ç”¨äºå¤„ç†ä»¥ä¸‹é—®é¢˜ï¼š\n- è§†é¢‘ç†è§£ä¸­çš„è·å–è§†é¢‘æ¯ä¸ªåœºæ™¯çš„æè¿°ä¿¡æ¯ï¼Œæˆ–è€…è·å–æ•´ä¸ªå½±ç‰‡çš„æ‘˜è¦ä¿¡æ¯ã€‚ \n- è·å–ç”¨æˆ·è¯„ä»·çš„æƒ…æ„Ÿä¿¡æ¯ï¼Œå³æ ¹æ®ç”¨æˆ·çš„ä¸€å¥è¯çš„è¯„è®ºï¼Œæ¥åˆ¤æ–­ç”¨æˆ·çš„å–œå¥½ç­‰æƒ…æ„Ÿä¿¡æ¯ ã€‚\n\n#### Næ¯”Mç»“æ„\n\nNç»´è¾“å…¥ï¼ŒMç»´è¾“å‡ºï¼Œè¿™ç§ç»“æ„åˆè¢«ç§°ä¸ºEncoder-Decoderæ¨¡å‹ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºSeq2Seqæ¨¡å‹ï¼Œè¿™ç§æ¨¡å‹çš„è¾“å…¥å’Œè¾“å‡ºå¯ä»¥ä¸ç›¸ç­‰ï¼Œè¯¥æ¨¡å‹ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šç¼–ç éƒ¨åˆ†å’Œè§£ç éƒ¨åˆ†ï¼Œå¤§è‡´ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n![å¾ªç¯ç¥ç»ç½‘ç»œNæ¯”Mç»“æ„](https://img-blog.csdnimg.cn/20190910212035184.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n cçš„å‰åŠéƒ¨åˆ†å¾ªç¯ç¥ç»ç½‘ç»œä¸ºç¼–ç éƒ¨åˆ†ï¼Œç§°ä¹‹ä¸ºEndcoder, cå¯ä»¥æ˜¯s3çš„ç›´æ¥è¾“å‡ºï¼Œæˆ–è€… æ˜¯å¯¹s3è¾“å‡ºåšä¸€å®šçš„å˜æ¢ï¼Œä¹Ÿå¯ä»¥å¯¹ç¼–ç éƒ¨åˆ†æ‰€æœ‰çš„s1ã€s2ã€s3è¿›è¡Œå˜æ¢å¾—åˆ°ï¼Œè¿™æ ·cä¸­å°±åŒ… å«äº†å¯¹X1ã€ Xzã€ç çš„ç¼–ç ä¿¡æ¯ ã€‚cçš„ååŠéƒ¨åˆ†å¾ªç¯ç¥ç»ç½‘ç»œä¸ºè§£ç éƒ¨åˆ†ï¼Œç§°ä¹‹ä¸ºDecoderã€‚cä½œä¸ºä¹‹å‰çš„çŠ¶æ€ç¼–ç ï¼Œä½œä¸ºåˆå§‹å€¼ï¼Œè¾“å…¥åˆ°Decoderå½“ä¸­ã€‚ Decoderç»è¿‡å¾ªç¯å¤„ç†ï¼Œæœ€ç»ˆå°†ä¿¡æ¯è§£ç è¾“å‡ºã€‚\n \n é™¤äº†ä¸Šè¾¹æ‰€ç¤ºçš„è§£ç ç»“æ„å¤–ï¼Œè¿˜æœ‰ä¸‹å›¾æ‰€ç¤ºçš„ç»“æ„ï¼š\n ![å¾ªç¯ç¥ç»ç½‘ç»œNæ¯”Mç»“æ„](https://img-blog.csdnimg.cn/20190910212711689.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n \n Næ¯”Mçš„å¾ªç¯ç¥ç»ç½‘ç»œç»“æ„æ›´å…·æœ‰æ™®éæ€§ï¼Œç°å®ç¯å¢ƒä¸­æœ‰å¾ˆå¤šåŸºäºè¯¥ç»“æ„è½åœ°çš„åœºæ™¯ï¼Œä»–å¯ä»¥è§£å†³å¦‚ä¸‹é—®é¢˜ï¼š\n - æœºå™¨ç¿»è¯‘ï¼šå°†ä¸åŒè¯­è¨€ä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºä¸ºéè¾“å…¥è¯­è¨€çš„ç±»å‹ï¼Œè¿™ä¹Ÿæ˜¯Encoder-Decoderçš„ç»å…¸ç”¨æ³•\n - æ–‡æœ¬æ‘˜è¦ï¼šè¾“å…¥ä¸€ç¯‡æ–‡ç« ï¼Œè¾“å‡ºè¿™ç¯‡æ–‡ç« çš„æ‘˜è¦ä¿¡æ¯\n - è¯­éŸ³è¯†åˆ«ï¼šè¾“å…¥ä¸€æ®µè¯­éŸ³ï¼Œè¾“å‡ºè¿™æ®µè¯­éŸ³ä¿¡æ¯çš„æ–‡å­—\n \n> è‡³æ­¤ï¼Œå¾ªç¯ç¥ç»ç½‘ç»œï¼ˆä¸­ï¼‰ç¯‡å·²ç»ä»‹ç»å®Œäº†ï¼Œåœ¨ä¸‹ç¯‡ä¸­ä¼šå±•å¼€ä»‹ç»æ›´å¤šçš„å†…å®¹ï¼Œæ¬¢è¿å…³æ³¨ã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆä¸‹ï¼‰ç¯‡","url":"/2019/04/23/æ·±åº¦å­¦ä¹ /å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ/å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆä¸‹ï¼‰ç¯‡/","content":"\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/100943664\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\n\nè¯¥ç³»åˆ—çš„å…¶ä»–æ–‡ç« ï¼š\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(1)-å‰é¦ˆç¥ç»ç½‘ç»œ](https://blog.csdn.net/Gamer_gyt/article/details/89459131)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(2)-å·ç§¯ç¥ç»ç½‘ç»œ](https://blog.csdn.net/Gamer_gyt/article/details/100531593)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸Šç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/100600661)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸­ç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/100709422)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸‹ç¯‡)](https://thinkgamer.blog.csdn.net/article/details/100943664)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œ(ä¸Šç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/103231385)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œ(ä¸‹ç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/103437985)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸Šç¯‡ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/103754752)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸‹ç¯‡ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/103754752)\n\n\n---\n### å¼•è¨€\n\nå¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œç³»åˆ—ç¬¬ä¸‰ç¯‡ï¼Œä¸»è¦ä»‹ç»å¾ªç¯ç¥ç»ç½‘ç»œï¼Œç”±äºå¾ªç¯ç¥ç»ç½‘ç»œåŒ…å«çš„å†…å®¹è¿‡å¤šï¼Œåˆ†ä¸ºä¸Šä¸­ä¸‹ä¸‰ç¯‡è¿›è¡Œä»‹ç»ï¼Œæœ¬æ–‡ä¸»è¦æ˜¯å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆä¸‹ï¼‰ç¯‡ï¼Œä¸»è¦ä»‹ç»ä»¥ä¸‹å†…å®¹ï¼š\n\n- é•¿çŸ­æœŸè®°å¿†ç½‘ç»œï¼ˆLSTMï¼‰\n- é—¨æ§å¾ªç¯å•å…ƒç½‘ç»œï¼ˆGRUï¼‰\n- é€’å½’å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRecNNï¼‰\n- å›¾ç½‘ç»œï¼ˆGNï¼‰\n\n---\n### LSTM\n\n\né•¿çŸ­æœŸè®°å¿†ï¼ˆLong Short-Term Memoryï¼ŒLSTMï¼‰ç½‘ç»œæ˜¯å¾ªç¯ç¥ç»ç½‘ç»œçš„ä¸€ä¸ªå˜ä½“ï¼Œå¯ä»¥æœ‰æ•ˆçš„è§£å†³ç®€å•å¾ªç¯ç¥ç»ç½‘ç»œçš„æ¢¯åº¦çˆ†ç‚¸å’Œæ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚\n\nLSTMçš„æ”¹è¿›åŒ…å«ä¸¤ç‚¹ï¼š\n- æ–°çš„å†…éƒ¨çŠ¶æ€\n- é—¨æœºåˆ¶\n\n#### æ–°çš„å†…éƒ¨çŠ¶æ€\nLSTMç½‘ç»œå¼•å…¥ä¸€ä¸ªæ–°çš„å†…éƒ¨çŠ¶æ€ï¼ˆinternal stateï¼‰$c_t$ä¸“é—¨è¿›è¡Œçº¿æ€§çš„å¾ªç¯ä¼ é€’ï¼ŒåŒæ—¶ï¼ˆéçº¿æ€§ï¼‰è¾“å‡ºä¿¡æ¯ç»™éšè—å±‚çš„å¤–éƒ¨çŠ¶æ€$h_t$ï¼ˆå…¬å¼3-1ï¼‰ã€‚\n$$\nc_t = f_t \\odot c_{t-1} + i_t \\odot \\tilde{c_t}\n\\\\\nh_t = o_t \\odot tanh(c_t)\n$$\nå…¶ä¸­ $f_t$ï¼Œ$i_t$ï¼Œ$o_t$ä¸ºä¸‰ä¸ªé—¨æ¥æ§åˆ¶ä¿¡æ¯ä¼ é€’çš„è·¯å¾„ï¼Œ$\\odot$ä¸ºå‘é‡å…ƒç´ ä¹˜ç§¯ï¼Œ$c_{t-1}$ä¸ºä¸Šä¸€æ—¶åˆ»çš„è®°å¿†å•å…ƒï¼Œ$\\tilde{c_t}$æ˜¯é€šè¿‡éçº¿æ€§å‡½æ•°å¾—åˆ°çš„å€™é€‰çŠ¶æ€ï¼ˆå…¬å¼3-2ï¼‰:\n\n$$\n\\tilde{c_t} = tanh( W_c x_t + U_c h_{t-1} + b_c )\n$$\n\nåœ¨æ¯ä¸ªæ—¶åˆ»tï¼ŒLSTMç½‘ç»œçš„å†…éƒ¨çŠ¶æ€$c_t$è®°å½•äº†åˆ°å½“å‰æ—¶åˆ»ä¸ºæ­¢çš„å†å²ä¿¡æ¯ã€‚\n\n\n#### é—¨æœºåˆ¶\n\nLSTMç½‘ç»œå¼•å…¥é—¨æœºåˆ¶æ¥æ§åˆ¶ä¿¡æ¯çš„ä¼ é€’ï¼Œ $f_tï¼Œi_tï¼Œo_t$åˆ†åˆ«ä¸ºé—å¿˜é—¨ï¼Œè¾“å…¥é—¨ï¼Œè¾“å‡ºé—¨ã€‚ç”µè·¯ä¸­é—¨æ˜¯0æˆ–1ï¼Œè¡¨ç¤ºå…³é—­å’Œå¼€å¯ï¼ŒLSTMç½‘ç»œä¸­çš„é—¨æ˜¯ä¸€ç§è½¯é—¨ï¼Œå–å€¼åœ¨(0,1)ï¼Œè¡¨ç¤ºä»¥ä¸€å®šæ¯”ä¾‹çš„ä¿¡æ¯é€šè¿‡ï¼Œå…¶ä¸‰ä¸ªé—¨çš„ä½œç”¨åˆ†åˆ«ä¸ºï¼š\n- $f_t$ï¼šæ§åˆ¶ä¸Šä¸€ä¸ªæ—¶åˆ»çš„å†…éƒ¨çŠ¶æ€ $c_{t-1}$éœ€è¦é—å¿˜å¤šå°‘ä¿¡æ¯ \n- $i_t$ï¼šæ§åˆ¶å½“å‰æ—¶åˆ»çš„å€™é€‰çŠ¶æ€$\\tilde{c_t}$æœ‰å¤šå°‘ä¿¡æ¯éœ€è¦ä¿å­˜\n- $o_t$ï¼šæ§åˆ¶å½“å‰æ—¶åˆ»çš„çŠ¶æ€$c_t$æœ‰å¤šå°‘ä¿¡æ¯éœ€è¦è¾“å‡ºä¸º$h_t$\n\nä¸‰ä¸ªé—¨çš„è®¡ç®—å¦‚ä¸‹ï¼ˆå…¬å¼3-3ï¼‰ï¼š\n$$\ni_t=\\sigma (W_i x_t+U_i h_{t-1} + b_i)\n\\\\\nf_t=\\sigma (W_f x_t+U_f h_{t-1}+ b_f )\n\\\\\no_t=\\sigma (W_o x_t+U_o h_{t-1}+b_o)\n$$\nå…¶ä¸­$\\sigma$ä¸ºlogsiticå‡½æ•°ï¼Œå…¶è¾“å‡ºåŒºé—´ä¸º(0,1)ï¼Œ$x_t$ä¸ºå½“å‰è¾“å…¥ï¼Œ$h_{t-1}$ä¸ºä¸Šä¸€æ—¶åˆ»çš„å¤–éƒ¨çŠ¶æ€ã€‚ \n\nä¸‹å›¾ï¼ˆå›¾3-1ï¼‰ç»™å‡ºäº†LSTMçš„å¾ªç¯å•å…ƒç»“æ„ï¼Œå…¶è®¡ç®—åˆ†ä¸ºä¸‰ä¸ªè¿‡ç¨‹ï¼š\n1. åˆ©ç”¨å½“å‰æ—¶åˆ»çš„è¾“å…¥$x_t$å’Œä¸Šä¸€æ—¶åˆ»çš„å¤–éƒ¨çŠ¶æ€$h_{t-1}$è®¡ç®—å‡ºä¸‰ä¸ªé—¨å’Œå€™é€‰çŠ¶æ€$\\tilde{c_t}$\n2. ç»“åˆé—å¿˜é—¨$f_t$å’Œè¾“å…¥é—¨$i_t$æ¥æ›´æ–°è®°å¿†å•å…ƒ$c_t$\n3. ç»“åˆè¾“å‡ºé—¨$o_t$å°†å†…éƒ¨çŠ¶æ€ä¿¡æ¯ä¼ é€’ç»™å¤–éƒ¨çŠ¶æ€$h_t$\n\n![LSTMå¾ªç¯å•å…ƒç»“æ„](https://img-blog.csdnimg.cn/20190917210304438.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\né€šè¿‡LSTMå¾ªç¯å•å…ƒï¼Œæ•´ä¸ªç½‘ç»œå¯ä»¥å»ºç«‹é•¿è·ç¦»çš„æ—¶åºä¾èµ–å…³ç³»ï¼Œå…¬å¼3-1ï½3-3å¯ä»¥ç®€å•çš„æè¿°ä¸ºï¼ˆå…¬å¼3-4ï¼‰ï¼š\n$$\n\\begin{bmatrix}\n\\tilde{c_t}\\\\ \no_t\\\\ \ni_t\\\\ \nf_t\n\\end{bmatrix} = \\begin{bmatrix}\ntanh\\\\ \n\\sigma \\\\ \n\\sigma \\\\ \n\\sigma \n\\end{bmatrix} (W\\begin{bmatrix}\nx_t\\\\ \nh_{t-1}\n\\end{bmatrix} + b)\n\\\\\nc_t = f_t \\odot c_{t-1}+ i_t \\odot \\tilde{c_t}\n\\\\\nh_t = o_t  \\odot tanh(c_t)\n$$\nå…¶ä¸­$x_t$ä¸ºå½“å‰æ—¶åˆ»çš„è¾“å…¥ï¼Œ$W$å’Œ$b$ä¸ºç½‘ç»œå‚æ•°ã€‚\n\n> å¾ªç¯ç¥ç»ç½‘ç»œä¸­çš„éšçŠ¶æ€hå­˜å‚¨äº†å†å²ä¿¡æ¯ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§è®°å¿†ï¼ˆMemeoryï¼‰ã€‚åœ¨ç®€å•å¾ªç¯ç½‘ç»œä¸­ï¼ŒéšçŠ¶æ€æ¯ä¸ªæ—¶åˆ»éƒ½ä¼šè¢«é‡å†™ï¼Œå› æ­¤å¯ä»¥çœ‹ä½œä¸€ç§çŸ­æœŸè®°å¿†ï¼ˆShort-term Memeoryï¼‰ã€‚åœ¨ç¥ç»ç½‘ç»œä¸­ï¼Œé•¿æœŸè®°å¿†ï¼ˆLong-term Memoryï¼‰å¯ä»¥çœ‹ä½œæ˜¯ç½‘æ ¼å‚æ•°ï¼Œéšå«äº†ä»è®­ç»ƒæ•°æ®ä¸­å­¦åˆ°çš„ç»éªŒï¼Œå…¶æ›´æ–°å‘¨æœŸè¦è¿œè¿œæ…¢äºçŸ­æœŸè®°å¿†ã€‚è€Œåœ¨LSTMç½‘ç»œä¸­ï¼Œè®°å¿†å•å…ƒcå¯ä»¥åœ¨æŸä¸ªæ—¶åˆ»æ•æ‰åˆ°æŸä¸ªå…³é”®ä¿¡æ¯ï¼Œå¹¶æœ‰èƒ½åŠ›å°†è¯¥ä¿¡æ¯ä¿å­˜ä¸€æ®µæ—¶é—´ï¼Œè®°å¿†å•å…ƒcä¸­ä¿å­˜çš„ä¿¡æ¯è¦è¿œè¿œé•¿äºéšçŠ¶æ€hï¼Œä½†åˆè¿œè¿œçŸ­äºé•¿æœŸè®°å¿†ï¼Œå› æ­¤è¢«æˆä¸ºé•¿çŸ­æœŸè®°å¿†ç½‘ç»œï¼ˆLong Short-term Memoryï¼‰ã€‚\n\n---\n### GRU\n\né—¨æ§å•å…ƒï¼ˆGate Recurrent Unitï¼ŒGRUï¼‰ç½‘ç»œæ˜¯ä¸€ç§æ¯”LSTMæ›´åŠ ç®€å•çš„å¾ªç¯ç¥ç»ç½‘ç»œã€‚åœ¨LSTMä¸­é—å¿˜é—¨å’Œè¾“å…¥é—¨æ˜¯äº’è¡¥å…³ç³»ï¼Œæ¯”è¾ƒå†—ä½™ï¼ŒGRUå°†é—å¿˜é—¨å’Œè¾“å…¥é—¨åˆå¹¶æˆä¸€ä¸ªé—¨ï¼šæ›´æ–°é—¨ã€‚åŒæ—¶GRUä¹Ÿä¸å¼•å…¥é¢å¤–çš„è®°å¿†å•å…ƒï¼Œç›´æ¥åœ¨å½“å‰çš„çŠ¶æ€$h_t$å’Œä¸Šä¸€ä¸ªæ—¶åˆ»çš„çŠ¶æ€$h_{t-1}$ä¹‹é—´å¼•å…¥çº¿æ€§ä¾èµ–å…³ç³»ã€‚\n\nåœ¨GRUç½‘ç»œä¸­ï¼Œå½“å‰æ—¶åˆ»çš„å€™é€‰çŠ¶æ€$\\tilde{h_t}$ä¸ºï¼ˆå…¬å¼3-5ï¼‰ï¼š\n$$\n\\tilde{h_t} = tanh( W_h x_h + U_h(r_t\\odot h_{t-1}) + b_h )\n$$\n> è®¡ç®—$\\tilde{h_t}$æ—¶ï¼Œé€‰ç”¨tanhæ¿€æ´»å‡½æ•°æ˜¯å› ä¸ºå…¶å¯¼æ•°æœ‰æ¯”è¾ƒå¤§çš„å€¼åŸŸï¼Œç¼“è§£æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚\n\nå…¶ä¸­$r_t \\in [0,1]$ ä¸ºé‡ç½®é—¨ï¼ˆreset gateï¼‰ï¼Œç”¨æ¥æ§åˆ¶å€™é€‰çŠ¶æ€$\\tilde {h_t}$çš„è®¡ç®—æ˜¯å¦ä¾èµ–ä¸Šä¸€æ—¶åˆ»çš„çŠ¶æ€$h_{t-1}$ï¼Œå…¬å¼å¦‚ä¸‹ï¼ˆå…¬å¼3-6ï¼‰ï¼š\n$$\nr_t = \\sigma ( W_r x_t  + U_r h_{t-1} + b_r)\n$$\n\nå½“ $r_t$ä¸º0 æ—¶ï¼Œå€™é€‰çŠ¶æ€$\\tilde{h_t}$åªå’Œå½“å‰è¾“å…¥$x_t$æœ‰å…³ï¼Œå’Œå†å²çŠ¶æ€æ— å…³ï¼Œå½“$r_t$ä¸º1æ—¶ï¼Œå€™é€‰çŠ¶æ€$\\tilde{h_t}$å’Œå½“å‰è¾“å…¥$x_t$ï¼Œå†å²çŠ¶æ€$h_{t-1}$éƒ½æœ‰å…³ï¼Œå’Œç®€å•å¾ªç¯ç½‘ç»œä¸€è‡´ã€‚\n\nGRUç½‘ç»œéšçŠ¶æ€$h_t$çš„æ›´æ–°æ–¹å¼ä¸ºï¼ˆå…¬å¼3-7ï¼‰ï¼š\n$$\nh_t = z_t \\odot h_{t-1}+ (1-z_t) \\odot \\tilde {h_t}\n$$\nå…¶ä¸­$z \\in [0,1]$ä¸ºæ›´æ–°é—¨ï¼ˆupdate gateï¼‰ï¼Œç”¨æ¥æ§åˆ¶å½“å‰çŠ¶æ€éœ€è¦ä»å†å²çŠ¶æ€ä¸­ä¿ç•™å¤šå°‘ä¿¡æ¯ï¼ˆä¸ç»è¿‡éçº¿æ€§å˜æ¢ï¼‰ï¼Œä»¥åŠéœ€è¦ä»å€™é€‰çŠ¶æ€ä¸­è·å–å¤šå°‘ä¿¡æ¯ã€‚$z_t$å…¬å¼å¦‚ä¸‹ï¼ˆå…¬å¼3-8ï¼‰ï¼š\n$$\nz_t = \\sigma (W_z x_t + U_z h_{t-1} + b_z)\n$$\n- è‹¥$z_t=0$ï¼Œå½“å‰çŠ¶æ€$h_t$å’Œå†å²çŠ¶æ€$h_{t-1}$ä¹‹é—´ä¸ºéçº¿æ€§å‡½æ•°ã€‚\n- è‹¥$z_t=0ï¼Œr=1$ï¼ŒGRUé€€åŒ–ä¸ºç®€å•å¾ªç¯ç½‘ç»œ\n- è‹¥$z_t=0ï¼Œr=0$ï¼Œå½“å‰çŠ¶æ€$h_t$åªå’Œå½“å‰è¾“å…¥$x_t$æœ‰å…³ï¼Œå’Œå†å²çŠ¶æ€$h_{t-1}$æ— å…³\n- è‹¥$z_t=1$ï¼Œå½“å‰æ—¶åˆ»çŠ¶æ€$h_t=h_{t-1}$ï¼Œå’Œå½“å‰è¾“å…¥$x_t$æ— å…³\n\n\nGRUç½‘ç»œå¾ªç¯å•å…ƒç»“æ„å¦‚ä¸‹ï¼ˆå›¾3-2ï¼‰ï¼š\n\n![GRUç½‘ç»œå¾ªç¯å•å…ƒç»“æ„](https://img-blog.csdnimg.cn/20190917231241261.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n---\n\n### RecNN\n\n> å¦‚æœå°†å¾ªç¯ç¥ç»ç½‘ç»œæŒ‰æ—¶é—´å±•å¼€ï¼Œæ¯ä¸ªæ—¶åˆ»çš„éšçŠ¶æ€$h_t$çœ‹åšæ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¿™äº›èŠ‚ç‚¹æ„æˆä¸€ä¸ªé“¾å¼ç»“æ„ï¼Œè€Œé“¾å¼ç»“æ„æ˜¯ä¸€ç§ç‰¹æ®Šçš„å›¾ç»“æ„ï¼Œå¾ˆå®¹æ˜“å°†è¿™ç§æ¶ˆæ¯ä¼ é€’çš„æ€æƒ³æ‰©å±•åˆ°ä»»æ„çš„å›¾ç»“æ„ä¸Šã€‚\n\né€’å½’ç¥ç»ç½‘ç»œï¼ˆRecursive Neurnal Networkï¼ŒRecNNï¼‰æ˜¯å¾ªç¯ç¥ç»ç½‘ç»œåœ¨æœ‰å‘æ— å¾ªç¯å›¾ä¸Šçš„æ§åˆ¶ï¼Œé€’å½’ç¥ç»ç½‘ç»œä¸€èˆ¬ç»“æ„ä¸ºæ ‘çŠ¶çš„å±‚æ¬¡ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆå›¾3-3ï¼‰ï¼š\n\n![é€’å½’ç¥ç»ç½‘ç»œ](https://img-blog.csdnimg.cn/20190917232047624.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nä»¥ä¸Šå›¾(a)ä¸ºä¾‹ï¼ŒåŒ…å«3ä¸ªéšè—å±‚$h_1,h_2,h_3$ï¼Œå…¶ä¸­$h_1$ç”±ä¸¤ä¸ªè¾“å…¥$x_1,x_2$è®¡ç®—å¾—åˆ°ï¼Œ$h_2$ç”±ä¸¤ä¸ªè¾“å…¥$x_3,x_4$è®¡ç®—å¾—åˆ°ï¼Œ$h_3$ç”±ä¸¤ä¸ªéšè—å±‚$h_1,h_2$è®¡ç®—å¾—åˆ°ã€‚\n\nå¯¹äºä¸€ä¸ªèŠ‚ç‚¹$h_i$ï¼Œå®ƒå¯ä»¥æ¥å—æ¥è‡ªå­èŠ‚ç‚¹é›†åˆ$\\pi_i$ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„æ¶ˆæ¯ï¼Œå¹¶æ›´æ–°è‡ªå·±çš„çŠ¶æ€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼ˆå…¬å¼3-9ï¼‰ï¼š\n$$\nh_i = f(h_{\\pi_i})\n$$\nå…¶ä¸­$h_{\\pi_i}$è¡¨ç¤º$\\pi_i$é›†åˆä¸­æ‰€æœ‰èŠ‚ç‚¹çŠ¶æ€çš„æ‹¼æ¥ï¼Œ$f(.)$æ˜¯ä¸€ä¸ªå’ŒèŠ‚ç‚¹çŠ¶æ€æ— å…³çš„éçº¿æ€§å‡½æ•°ï¼Œå¯ä»¥ä¸ºä¸€ä¸ªå•å±‚çš„å‰é¦ˆç¥ç»ç½‘ç»œï¼Œæ¯”å¦‚å›¾3-3(a)æ‰€è¡¨ç¤ºçš„é€’å½’ç¥ç»ç½‘ç»œå¯ä»¥è¡¨ç¤ºä¸ºï¼ˆå…¬å¼3-10ï¼‰ï¼š\n$$\nh_1 = \\sigma (W \\begin{bmatrix}\nx_1\\\\ \nx_2\n\\end{bmatrix}+ b) \n\\\\\nh_2 = \\sigma (W \\begin{bmatrix}\nx_3\\\\ \nx_4\n\\end{bmatrix}+ b) \n\\\\\nh_3 = \\sigma (W \\begin{bmatrix}\nh_1\\\\ \nh_2\n\\end{bmatrix}+ b) \n$$\nå…¶ä¸­$\\sigma$è¡¨ç¤ºéçº¿æ€§æ¿€æ´»å‡½æ•°ï¼ŒWå’Œbä¸ºå¯å­¦ä¹ çš„å‚æ•°ï¼ŒåŒæ ·è¾“å‡ºå±‚yå¯ä»¥ä¸ºä¸€ä¸ªåˆ†ç±»å™¨ï¼Œæ¯”å¦‚ï¼ˆå…¬å¼3-11ï¼‰ï¼š\n$$\nh_3 = g (W' \\begin{bmatrix}\nh_1\\\\ \nh_2\n\\end{bmatrix}+ b') \n$$\nå…¶ä¸­$g(.)$ä¸ºåˆ†ç±»å™¨ï¼Œ$W'$å’Œ$b'$ä¸ºåˆ†ç±»å™¨çš„å‚æ•°ã€‚å½“é€’å½’ç¥ç»ç½‘ç»œçš„ç»“æ„é€€åŒ–ä¸ºå›¾3-3(b)æ—¶ï¼Œå°±ç­‰ä»·äºç®€å•ç¥ç»å¾ªç¯ç½‘ç»œã€‚\n\né€’å½’ç¥ç»ç½‘ç»œä¸»è¦ç”¨æ¥å»ºæ¨¡è‡ªç„¶è¯­è¨€å¥å­çš„è¯­ä¹‰ï¼Œç»™å®šä¸€ä¸ªå¥å­çš„è¯­æ³•ç»“æ„ï¼Œå¯ä»¥ä½¿ç”¨é€’å½’ç¥ç»ç½‘ç»œæ¥æŒ‰ç…§å¥æ³•çš„ç»„åˆå…³ç³»æ¥åˆæˆä¸€ä¸ªå¥å­çš„è¯­ä¹‰ï¼Œå¥å­ä¸­æ¯ä¸ªçŸ­è¯­æˆåˆ†å¯ä»¥åˆ†æˆä¸€äº›å­æˆåˆ†ï¼Œå³æ¯ä¸ªçŸ­è¯­çš„è¯­ä¹‰å¯ä»¥ç”±å®ƒçš„å­æˆåˆ†è¯­ä¹‰ç»„åˆè€Œæ¥ï¼Œè¿›è€Œåˆæˆæ•´å¥çš„è¯­ä¹‰ã€‚\n\nåŒæ ·ä¹Ÿå¯ä»¥ä½¿ç”¨é—¨æœºåˆ¶æ¥æ”¹è¿›é€’å½’ç¥ç»ç½‘ç»œä¸­çš„é•¿è·ç¦»ä¾èµ–é—®é¢˜ï¼Œæ¯”å¦‚æ ‘ç»“æ„çš„é•¿çŸ­æœŸè®°å¿†æ¨¡å‹å°±æ˜¯å°†LSTMçš„æ€æƒ³åº”ç”¨åˆ°æ ‘ç»“æ„çš„ç½‘ç»œä¸­ï¼Œæ¥å®ç°æ›´çµæ´»çš„ç»„åˆå‡½æ•°ã€‚\n\n---\n### GN\nåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¾ˆå¤šæ•°æ®æ˜¯å›¾ç»“æ„çš„ï¼Œæ¯”å¦‚çŸ¥è¯†å›¾è°±ï¼Œç¤¾äº¤ç½‘ç»œï¼Œåˆ†å­ç½‘ç»œç­‰ã€‚è€Œå‰é¦ˆç½‘ç»œå’Œåé¦ˆç½‘ç»œå¾ˆéš¾å¤„ç†å›¾ç»“æ„çš„æ•°æ®ã€‚\n\n**å›¾ç½‘ç»œï¼ˆGraph Networkï¼ŒGNï¼‰**æ˜¯å°†æ¶ˆæ¯ä¼ é€’çš„æ€æƒ³æ‰©å±•åˆ°å›¾ç»“æ„æ•°æ®ä¸Šçš„ç¥ç»ç½‘ç»œã€‚\n\nå¯¹äºä¸€ä¸ªå›¾ç»“æ„$G(V,\\varepsilon )$ï¼Œå…¶ä¸­$V$è¡¨ç¤ºèŠ‚ç‚¹ç»“åˆï¼Œ$\\varepsilon$è¡¨ç¤ºè¾¹é›†åˆã€‚æ¯æ¡è¾¹è¡¨ç¤ºä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼ŒèŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥å¯ä»¥æ˜¯æœ‰å‘çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æ— å‘çš„ã€‚å›¾ä¸­æ¯ä¸ªèŠ‚ç‚¹véƒ½ç”¨ä¸€ç»„ç¥ç»å…ƒæ¥è¡¨ç¤ºå…¶çŠ¶æ€$h^{(v)}$ ï¼Œåˆå§‹çŠ¶æ€å¯ä»¥ä¸ºèŠ‚ç‚¹vçš„è¾“å…¥ç‰¹å¾$x^{(v)}$ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ¥å—ç›¸é‚»èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œæ¥æ›´æ–°è‡ªå·±çš„çŠ¶æ€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼ˆå…¬å¼3-12ï¼‰ï¼š\n$$\nm^{(v)}_t = \\sum_{u \\in N(v)} f( h^{(v)}_{t-1},h^{(u)}_{t-1},e^{(u,v)} )\n\\\\\nh^{(v)}_t = g(h^{(v)}_{t-1},m^{(u)}_t)\n$$\nå…¶ä¸­$N(v)$è¡¨ç¤ºèŠ‚ç‚¹vçš„é‚»å±…èŠ‚ç‚¹ï¼Œ$m^{(v)}_t$ è¡¨ç¤ºåœ¨tæ—¶åˆ»èŠ‚ç‚¹væ¥å—åˆ°çš„ä¿¡æ¯ï¼Œ$e^{(u,v)}$ä¸ºè¾¹(v,u)ä¸Šçš„ç‰¹å¾ã€‚\n\nå…¬å¼3-12æ˜¯ä¸€ç§åŒæ­¥æ›´æ–°æ–¹å¼ï¼Œæ‰€æœ‰ç»“æ„åŒæ—¶æ¥å—ä¿¡æ¯å¹¶æ›´æ–°è‡ªå·±çš„çŠ¶æ€ï¼Œè€Œå¯¹äºæœ‰å‘å›¾æ¥è¯´ï¼Œä½¿ç”¨å¼‚æ­¥çš„æ›´æ–°æ–¹å¼ä¼šæ›´æœ‰æ•ˆç‡ï¼Œæ¯”å¦‚å¾ªç¯ç¥ç»ç½‘ç»œæˆ–è€…é€’å½’ç¥ç»ç½‘ç»œï¼Œåœ¨æ•´ä¸ªå›¾æ›´æ–°Tæ¬¡åï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªè¯»å‡ºå‡½æ•°g(.)æ¥å¾—åˆ°æ•´ä¸ªç½‘ç»œçš„è¡¨ç¤ºã€‚\n\n> è‡³æ­¤ï¼Œå¾ªç¯ç¥ç»ç½‘ç»œï¼ˆä¸Šï¼‰ï¼ˆä¸­ï¼‰ï¼ˆä¸‹ï¼‰ç¯‡å·²ç»ä»‹ç»å®Œæ¯•ã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆä¸Šï¼‰ç¯‡","url":"/2019/04/23/æ·±åº¦å­¦ä¹ /å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ/å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆä¸Šï¼‰ç¯‡/","content":"\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/100600661\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\n\nè¯¥ç³»åˆ—çš„å…¶ä»–æ–‡ç« ï¼š\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(1)-å‰é¦ˆç¥ç»ç½‘ç»œ](https://blog.csdn.net/Gamer_gyt/article/details/89459131)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(2)-å·ç§¯ç¥ç»ç½‘ç»œ](https://blog.csdn.net/Gamer_gyt/article/details/100531593)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸Šç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/100600661)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸­ç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/100709422)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸‹ç¯‡)](https://thinkgamer.blog.csdn.net/article/details/100943664)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œ(ä¸Šç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/103231385)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œ(ä¸‹ç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/103437985)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸Šç¯‡ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/103754752)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸‹ç¯‡ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/103754752)\n\n\n---\n### å¼•è¨€\n\nå¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œç³»åˆ—ç¬¬ä¸‰ç§ï¼Œä¸»è¦ä»‹ç»å¾ªç¯ç¥ç»ç½‘ç»œï¼Œç”±äºå¾ªç¯ç¥ç»ç½‘ç»œåŒ…å«çš„å†…å®¹è¿‡å¤šï¼Œåˆ†ä¸ºä¸Šä¸­ä¸‹ä¸‰ç¯‡è¿›è¡Œä»‹ç»ï¼Œæœ¬æ–‡ä¸»è¦æ˜¯å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆä¸Šï¼‰ç¯‡ï¼Œä¸»è¦ä»‹ç»ä»¥ä¸‹å†…å®¹ï¼š\n- å¾ªç¯ç¥ç»ç½‘ç»œæ¦‚è¿°\n- å¦‚ä½•ç»™ç¥ç»ç½‘ç»œå¢åŠ è®°å¿†èƒ½åŠ›\n    - å»¶æ—¶ç¥ç»ç½‘ç»œ\n    - æœ‰å¤–éƒ¨è¾“å…¥çš„éçº¿æ€§è‡ªå›å½’æ¨¡å‹\n    - å¾ªç¯ç¥ç»ç½‘ç»œ\n- ä¸€èˆ¬çš„å¾ªç¯ç¥ç»ç½‘ç»œ\n    - å•å‘å¾ªç¯ç¥ç»ç½‘ç»œ\n    - åŒå‘å¾ªç¯ç¥ç»ç½‘ç»œ\n    - æ·±åº¦å¾ªç¯ç¥ç»ç½‘ç»œ\n- å¾ªç¯ç¥ç»ç½‘ç»œåº”ç”¨åˆ°æœºå™¨å­¦ä¹ ä»»åŠ¡\n\n\n### æ¦‚è¿°\nåœ¨å‰é¦ˆç¥ç»ç½‘ç»œä¸­ï¼Œä¿¡æ¯åœ¨ç¥ç»å…ƒä¹‹é—´çš„ä¼ é€’æ˜¯å•å‘ï¼Œç½‘ç»œçš„è¾“å‡ºåªä¾èµ–äºå½“å‰çš„è¾“å…¥ï¼Œè¿™æ ·é™åˆ¶è™½ç„¶ä½¿ç½‘ç»œå˜å¾—å®¹æ˜“å­¦ä¹ ï¼Œä½†æ˜¯å´å‡å¼±äº†ç½‘ç»œçš„è¡¨è¾¾èƒ½åŠ›ã€‚åœ¨å¾ˆå¤šç°å®ä»»åŠ¡ä¸­ï¼Œç½‘ç»œçš„è¾“å‡ºä¸ä»…å’Œå½“å‰çš„è¾“å…¥æœ‰å…³ï¼Œä¹Ÿå’Œè¿‡å»ä¸€æ®µæ—¶é—´çš„è¾“å‡ºç›¸å…³ï¼Œæ¯”å¦‚ä¸€ä¸ª**æœ‰é™çŠ¶æ€è‡ªåŠ¨æœº**ä¸ä»…å’Œå½“å‰çš„è¾“å…¥æœ‰å…³ï¼Œä¹Ÿå’Œå½“å‰çš„çŠ¶æ€ï¼ˆä¸Šä¸€æ­¥çš„è¾“å‡ºï¼‰æœ‰å…³ã€‚å¦‚ä¸‹å›¾ï¼ˆå›¾-1ï¼‰\n\n![æœ‰é™çŠ¶æ€è‡ªåŠ¨æœº](https://img-blog.csdnimg.cn/2019090716181761.png)\n\n> æœ‰é™çŠ¶æ€è‡ªåŠ¨æœºç§°ä¸ºFSMï¼ˆfinite state machineï¼‰æˆ–è€…FSAï¼ˆfinite state automatonï¼‰\n\næ­¤å¤–ï¼Œå‰é¦ˆç¥ç»ç½‘ç»œéš¾ä»¥å¤„ç†æ—¶åºæ•°æ®ï¼Œæ¯”å¦‚è§†é¢‘ï¼Œè¯­éŸ³ï¼Œæ–‡æœ¬ç­‰ã€‚å› ä¸ºæ—¶åºæ•°æ®çš„é•¿åº¦æ˜¯ä¸å›ºå®šçš„ï¼Œè€Œå‰é¦ˆç¥ç»ç½‘ç»œè¦æ±‚è¾“å…¥å’Œè¾“å‡ºçš„ç»´åº¦æ˜¯å›ºå®šçš„ã€‚å› æ­¤å½“å¤„ç†è¿™ç§å¤æ‚çš„æ—¶åºæ•°æ®æ—¶ï¼Œå°±éœ€è¦ä¸€ç§è¡¨è¾¾èƒ½åŠ›èƒ½å¼ºçš„æ¨¡å‹ã€‚\n\n\n**å¾ªç¯ç¥ç»ç½‘ç»œ(Recurrent Neural Network,RNN)** æ˜¯ä¸€ç±»å…·æœ‰çŸ­æœŸè®°å¿†èƒ½åŠ›çš„ç¥ç»ç½‘ç»œï¼Œåœ¨å¾ªç¯ç¥ç»ç½‘ç»œä¸­ï¼Œç¥ç»å…ƒä¸ä»…å¯ä»¥æ¥å—å…¶ä»–ç¥ç»å…ƒçš„ä¿¡æ¯ï¼Œè¿˜å¯ä»¥æ¥å—è‡ªèº«çš„ä¿¡æ¯ï¼Œå½¢æˆä¸€ä¸ªç¯è·¯ç»“æ„ã€‚RNNçš„å‚æ•°å­¦ä¹ å¯ä»¥é€šè¿‡éšæ—¶é—´åå‘ä¼ æ’­ç®—æ³•è¿›è¡Œå­¦ä¹ ï¼ˆä¸‹æ–‡ä¼šå…·ä½“ä»‹ç»ï¼‰ï¼Œéšæ—¶é—´åå‘ä¼ æ’­ç®—æ³•æŒ‰ç…§æ—¶é—´çš„é€†åºå°†é”™è¯¯ä¿¡æ¯ä¸€æ­¥æ­¥çš„å‘å‰ä¼ é€’ï¼Œå½“è¾“å…¥åºåˆ—æ—¶é—´è¾ƒé•¿æ—¶ï¼Œä¼šå­˜åœ¨æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸é—®é¢˜ï¼ˆä¹Ÿå«é•¿æœŸä¾èµ–é—®é¢˜ï¼‰ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œäººä»¬å¯¹RNNè¿›è¡Œäº†è®¸å¤šæ”¹è¿›ï¼Œå…¶ä¸­æœ€æœ‰æ•ˆçš„æ˜¯å¼•å…¥é—¨æ§åˆ¶ï¼Œæ¯”å¦‚é•¿çŸ­æœŸè®°å¿†ç½‘ç»œï¼ˆLSTMï¼‰å’Œé—¨æ§å¾ªç¯å•å…ƒç½‘ç»œï¼ˆGRUï¼‰ï¼Œå°†åœ¨ï¼ˆä¸‹ï¼‰ç¯‡è¿›è¡Œä»‹ç»ã€‚\n\n### å¦‚ä½•ç»™ç½‘ç»œå¢åŠ è®°å¿†èƒ½åŠ›\n\nä¸Šè¾¹æåˆ°å‰é¦ˆç¥ç»ç½‘ç»œæ˜¯ä¸€ä¸ªé™æ€ç½‘ç»œï¼Œä¸èƒ½å¤„ç†æ—¶åºæ•°æ®ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹æ³•ç»™ç½‘ç»œå¢åŠ è®°å¿†èƒ½åŠ›ï¼š\n- å»¶æ—¶ç¥ç»ç½‘ç»œ\n- æœ‰å¤–éƒ¨è¾“å…¥çš„éçº¿æ€§è‡ªå›å½’æ¨¡å‹\n- å¾ªç¯ç¥ç»ç½‘ç»œ\n\n#### å»¶æ—¶ç¥ç»ç½‘ç»œ\n\nä¸€ç§ç®€å•çš„åˆ©ç”¨åˆ©ç”¨å†å²ä¿¡æ¯çš„æ–¹æ³•æ˜¯å»ºç«‹ä¸€ä¸ªé¢å¤–çš„å»¶æ—¶å•å…ƒï¼Œç”¨æ¥å­˜å‚¨ç½‘ç»œçš„å†å²ä¿¡æ¯ï¼ˆæ¯”å¦‚è¾“å…¥ï¼Œè¾“å‡ºï¼ŒéšçŠ¶æ€ç­‰ï¼‰ï¼Œè¿™å…¶ä¸­æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„å°±æ˜¯å»¶æ—¶ç¥ç»ç½‘ç»œï¼ˆTDNNï¼ŒTime Delay Neural Networkï¼‰ã€‚\n\nå»¶æ—¶ç¥ç»ç½‘ç»œæ˜¯åœ¨å‰é¦ˆç¥ç»ç½‘ç»œçš„éè¾“å‡ºå±‚éƒ½æ·»åŠ ä¸€ä¸ªå»¶æ—¶å™¨ï¼Œè®°å½•æœ€è¿‘å‡ æ¬¡ç¥ç»å…ƒçš„è¾“å‡ºï¼Œåœ¨ç¬¬tä¸ªæ—¶åˆ»ï¼Œç¬¬ï¼ˆl+1ï¼‰å±‚çš„ç¥ç»å…ƒå’Œç¬¬ï¼ˆlï¼‰å±‚ç¥ç»å…ƒçš„æœ€è¿‘pæ¬¡è¾“å‡ºæœ‰å…³ï¼Œå³ï¼ˆå…¬å¼-1ï¼‰:\n$$\nh_t^{l+1} = f(h_t^l,h_{t-1}^l,....,h_{t-p+1}^l)\n$$\né€šè¿‡å»¶æ—¶å™¨ï¼Œå‰é¦ˆç¥ç»ç½‘ç»œå°±å…·æœ‰äº†çŸ­æœŸè®°å¿†çš„èƒ½åŠ›ã€‚\n\n#### æœ‰å¤–éƒ¨è¾“å…¥çš„éçº¿æ€§è‡ªå›å½’æ¨¡å‹\n**è‡ªå›å½’æ¨¡å‹ï¼ˆAutoregressive Modelï¼‰** æ˜¯ç»Ÿè®¡å­¦ä¸­å¸¸ç”¨ä¸€ç±»æ—¶é—´åºåˆ—æ¨¡å‹ï¼Œç”¨ä¸€ä¸ªå˜é‡ $y_t$ çš„å†å²ä¿¡æ¯æ¥é¢„æµ‹è‡ªå·±ï¼ˆå…¬å¼-2ï¼‰ã€‚\n$$\ny_t = w_0 + \\sum_{i=1}^{p}w_p * y_{t-i} + \\varepsilon_t\n$$\nå…¶ä¸­pä¸ºè¶…å‚æ•°ï¼Œ$w_p$ ä¸ºå‚æ•°ï¼Œ$\\varepsilon_tï½N(0,\\sigma ^2)$ ä¸ºç¬¬tä¸ªæ—¶åˆ»çš„å™ªå£°ï¼Œæ–¹å·®$\\sigma^2$å’Œæ—¶é—´tæ— å…³ã€‚\n\næœ‰å¤–éƒ¨è¾“å…¥çš„éçº¿æ€§è‡ªå›å½’æ¨¡å‹ï¼ˆNonlinear Autoregressive Modelï¼‰æ˜¯è‡ªå›å½’æ¨¡å‹çš„æ‰©å±•ï¼Œåœ¨æ¯ä¸ªæ—¶åˆ»téƒ½æœ‰ä¸€ä¸ªå¤–éƒ¨è¾“å…¥$x_t$ï¼Œäº§å‡ºä¸€ä¸ªè¾“å‡º$y_t$ï¼ŒNARTé€šè¿‡ä¸€ä¸ªå»¶æ—¶å™¨æ¥è®°å½•æœ€è¿‘å‡ æ¬¡çš„å¤–éƒ¨è¾“å…¥å’Œè¾“å‡ºï¼Œç¬¬tä¸ªæ—¶åˆ»çš„è¾“å‡º$y_t$ä¸ºï¼ˆå…¬å¼-3ï¼‰ï¼š\n$$\ny_t = f(x_t, x_{t-1},..,x_{t-p}, y_{t-1},y_{t-2},....,y_{t-q})\n$$\nå…¶ä¸­f(.)ä¸ºéçº¿æ€§å‡½æ•°ï¼Œå¯ä»¥æ˜¯å‰é¦ˆç¥ç»ç½‘ç»œï¼Œpå’Œqä¸ºè¶…å‚æ•°ã€‚\n\n#### å¾ªç¯ç¥ç»ç½‘ç»œ\nç»™å®šä¸€ä¸ªè¾“å…¥åºåˆ—ï¼Œ$x_{1:T}=( x_1, x_2, ... , x_T )$ å¾ªç¯ç¥ç»ç½‘ç»œé€šè¿‡ä»¥ä¸‹å…¬å¼ï¼ˆå…¬å¼-4ï¼‰æ›´æ–°å¸¦åé¦ˆè¾¹çš„éšè—å±‚çš„æ´»æ€§å€¼$h_t$ï¼š\n$$\nh_t = (h_{t-1}, x_t)\n$$\nå¾ªç¯ç¥ç»ç½‘ç»œç¤ºä¾‹å¦‚ä¸‹ï¼ˆå›¾-2ï¼‰ï¼š\n![å¾ªç¯ç¥ç»ç½‘ç»œç¤ºä¾‹](https://img-blog.csdnimg.cn/20190907182513443.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n\n\n### ä¸€èˆ¬çš„å¾ªç¯ç¥ç»ç½‘ç»œ\n\nåœ¨ï¼ˆå›¾-2ï¼‰ä¸­å±•ç¤ºäº†ä¸€ä¸ªç®€å•çš„å¾ªç¯ç¥ç»ç½‘ç»œï¼Œå…¶æ•´ä¸ªç»“æ„åˆ†ä¸º3å±‚ï¼šè¾“å…¥å±‚ï¼Œéšè—å±‚å’Œè¾“å‡ºå±‚ã€‚å…¶ä¸­tæ—¶åˆ»ï¼Œéšè—å±‚çš„çŠ¶æ€$h_t$ä¸ä»…ä¸è¾“å…¥$x_t$æœ‰å…³ï¼Œè¿˜ä¸ä¸Šä¸€ä¸ªæ—¶åˆ»çš„éšè—å±‚çŠ¶æ€$h_{t-1}$æœ‰å…³ã€‚\n\nç”±äºéšè—å±‚å¤šäº†ä¸€ä¸ªè‡ªèº«åˆ°è‡ªèº«çš„è¾“å…¥ï¼Œå› æ­¤è¯¥å±‚è¢«ç§°ä¸ºå¾ªç¯å±‚ï¼Œï¼ˆå›¾-2ï¼‰æ‰€ç¤ºçš„ä¸ºä¸€ä¸ªç®€å•å¾ªç¯ç¥ç»ç½‘ç»œã€‚å¾ªç¯ç¥ç»ç½‘ç»œè¿˜æœ‰å¤šç§ç±»å‹ï¼ŒåŸºäºå¾ªç¯çš„æ–¹å‘åˆ’åˆ†ä¸ºï¼š\n- å•å‘å¾ªç¯ç¥ç»ç½‘ç»œ\n- åŒå‘å¾ªç¯ç¥ç»ç½‘ç»œ\n\nåŸºäºå¾ªç¯çš„æ·±åº¦åˆ†ä¸ºï¼š\n- å¾ªç¯ç¥ç»ç½‘ç»œ\n- æ·±åº¦å¾ªç¯ç¥ç»ç½‘ç»œ\n\n#### å•å‘å¾ªç¯ç¥ç»ç½‘ç»œ\n\nï¼ˆå›¾-2ï¼‰æ‰€ç¤ºå³ä¸ºä¸€ä¸ªå•å‘çš„å¾ªç¯ç¥ç»ç½‘ç»œï¼Œå¯¹å…¶å±•å¼€åçš„æ•ˆæœå›¾å¦‚ä¸‹ï¼ˆå›¾-3ï¼‰ï¼š\n![å•å‘å¾ªç¯ç¥ç»ç½‘ç»œ](https://img-blog.csdnimg.cn/2019090809043298.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nä¸Šå›¾å¯ä»¥ç†è§£ä¸ºç½‘ç»œçš„è¾“å…¥é€šè¿‡æ—¶é—´å¾€åä¼ é€’ï¼Œå½“å‰éšè—å±‚çš„è¾“å‡º$h_t$å–å†³äºå½“å‰å±‚çš„è¾“å…¥$x_t$å’Œä¸Šä¸€å±‚çš„è¾“å‡º$h_{t-1}$ï¼Œå› æ­¤å½“å‰éšè—å±‚çš„è¾“å‡ºä¿¡æ¯åŒ…å«äº†ä¹‹å‰æ—¶åˆ»çš„ä¿¡æ¯ï¼Œè¡¨è¾¾å‡ºå¯¹ä¹‹å‰ä¿¡æ¯çš„è®°å¿†èƒ½åŠ›ã€‚å•å‘å¾ªç¯ç¥ç»ç½‘ç»œè¡¨è¾¾å¦‚ä¸‹ï¼ˆå…¬å¼-5ï¼‰ï¼š\n$$\no_t = g(V*h_t)\n\\\\\nh_t = f(U*x_t + W*h_{t-1})\n$$\nå…¶ä¸­$o_t$ä¸ºè¾“å‡ºå±‚çš„è®¡ç®—å…¬å¼ï¼Œ $h_t$ä¸ºéšè—å±‚çš„è®¡ç®—å…¬å¼ï¼Œg(.) å’Œ f(.)ä¸ºæ¿€æ´»å‡½æ•°ã€‚å€¼å¾—è¯´æ˜çš„æ˜¯åœ¨å¾ªç¯ç¥ç»ç½‘ç»œä¸­Uï¼ŒVï¼ŒWæƒé‡çŸ©é˜µå€¼æ¯æ¬¡å¾ªç¯éƒ½æ˜¯ä¸€ä»½ï¼Œå› æ­¤å¾ªç¯ç¥ç»ç½‘ç»œçš„æ¯æ¬¡å¾ªç¯æ­¥éª¤ä¸­ï¼Œè¿™äº›å‚æ•°éƒ½æ˜¯å…±äº«çš„ï¼Œè¿™ä¹Ÿæ˜¯å¾ª ç¯ç¥ç»ç½‘ç»œ çš„ç»“æ„ç‰¹å¾ä¹‹ä¸€ã€‚\n\n#### åŒå‘å¾ªç¯ç¥ç»ç½‘ç»œ\n\nåœ¨æ—¥å¸¸çš„ä¿¡æ¯æ¨æ–­ä¸­ï¼Œå½“å‰ä¿¡æ¯ä¸ä»…ä»…ä¾èµ–ä¹‹å‰çš„å†…å®¹ï¼Œä¹Ÿæœ‰å¯èƒ½ä¼šä¾èµ–åç»­çš„å†…å®¹ï¼Œæ¯”å¦‚è‹±è¯­çš„å®Œå½¢å¤©ç©ºã€‚è¿™æ—¶å€™å•å‘çš„å¾ªç¯ç¥ç»ç½‘ç»œå°±ä¸èƒ½å¾ˆå¥½çš„å¤„ç†ï¼Œå°±éœ€è¦ ** åŒå‘å¾ªç¯ç¥ç»ç½‘ç»œ(Bi-directional Recurrent Neural Network)** ã€‚\n\nå…¶ä¸»è¦æ€æƒ³æ˜¯è®­ç»ƒä¸€ä¸ªåˆ†åˆ«å‘å‰å’Œåˆ†åˆ«å‘åçš„å¾ªç¯ç¥ç»ç½‘ç»œï¼Œè¡¨ç¤ºå®Œæ•´çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä¸¤ä¸ªå¾ªç¯ ç½‘ç»œå¯¹åº”åŒä¸€ä¸ªè¾“å‡ºå±‚ï¼Œå› æ­¤å¯ä»¥ç†è§£ä¸ºä¸¤ä¸ªå¾ªç¯ç¥ç»ç½‘ç»œçš„å åŠ ï¼Œå¯¹åº”çš„è¾“å‡ºç»“æœæ ¹æ®ä¸¤ä¸ªç¥ç»ç½‘ç»œè¾“å‡ºçŠ¶æ€è®¡ç®—è·å¾—ï¼Œå°†åŒå‘å¾ªç¯ç¥ç»ç½‘ç»œæŒ‰ç…§æ—¶é—´åºåˆ—ç»“æ„å±•å¼€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆå›¾-4ï¼‰ï¼š\n![åŒå‘å¾ªç¯ç¥ç»ç½‘ç»œ](https://img-blog.csdnimg.cn/20190908145624762.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œéšè—å±‚éœ€è¦ä¿ç•™ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†ä¸ºç”±å‰å‘åçš„æ­£å‘ä¼ é€’$h_t$ï¼Œä¸€éƒ¨åˆ†ä¸ºç”±åå‘å‰çš„åå‘ä¼ é€’$h'_t$ï¼Œæœ€æ–°çš„ä¿¡æ¯è¾“å‡º$o_t$ã€‚åŒå‘å¾ªç¯ç¥ç»ç½‘ç»œçš„è¡¨è¾¾å…¬å¼å¦‚ä¸‹ï¼ˆå…¬å¼-6ï¼‰ï¼š\n$$\no_t = g(V*h_t + V'*h'_t)\n\\\\\nh_t = f(U*x_t + W*h_{t-1})\n\\\\\nh'_t = f(U'*x_t + W'*h'_{t-1})\n$$\n\n\n#### æ·±åº¦å¾ªç¯ç¥ç»ç½‘ç»œ\n\nä¸Šè¾¹ä»‹ç»çš„å•å‘è®­ç»ƒç¥ç»ç½‘ç»œå’ŒåŒå‘å¾ªç¯ç¥ç»ç½‘ç»œéƒ½åªæœ‰ä¸€ä¸ªéšè—å±‚ï¼Œä½†æ˜¯åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸ºäº†å¢å¼ºè¡¨è¾¾èƒ½åŠ›ï¼Œå¾€å¾€å¼•å…¥å¤šä¸ªéšè—å±‚ï¼Œå³æ·±åº¦å¾ªç¯ç¥ç»ç½‘ç»œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆå›¾-5ï¼‰ï¼š\n![æ·±åº¦å¾ªç¯ç¥ç»ç½‘ç»œ](https://img-blog.csdnimg.cn/20190908151530509.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nåŒæ ·å¯ä»¥å¾—åˆ°æ·±åº¦å¾ªç¯ç¥ç»ç½‘ç»œçš„è¡¨è¾¾å¼ï¼ˆå…¬å¼-7ï¼‰ï¼š\n$$\no_t = g(V^{(i)}*h^{(i)}_t + V'^{(i)}*h'^{(i)}_t)\n\\\\\nh^{(i)}_t = f(U^{(i)}*h^{(i-1)}_t + W^{(i)}*h_{t-1})\n\\\\\nh'^{(i)}_t = f(U'^{(i)}*h'^{(i-1)}_t + W'^{(i)}*h'_{t+1})\n\\\\\n...\n\\\\\nh^{(1)}_t = f(U^{(1)} * h_t + W^{(1)}*h_{t-1})\n\\\\\nh'^{(1)}_t = f(U'^{(1)} * h_t + W'^{(1)}*h'_{t+1})\n\\\\\n$$\nä»ä¸Šè¿°å…¬å¼å¯ä»¥çœ‹å‡ºï¼Œæœ€ç»ˆçš„è¾“å‡ºä¾èµ–ä¸¤ä¸ªç»´ åº¦çš„è®¡ç®—ï¼Œæ¨ªå‘ä¸Šå†…éƒ¨å‰åä¿¡æ¯çš„ å åŠ ï¼Œå³æŒ‰ç…§æ—¶é—´çš„è®¡ç®—ï¼›çºµå‘ä¸Šæ˜¯æ¯ä¸€æ—¶åˆ»çš„è¾“å…¥ä¿¡æ¯åœ¨ é€å±‚ä¹‹é—´çš„ä¼ é€’ï¼Œå³æŒ‰ç…§ ç©ºé—´ç»“æ„çš„è®¡ç®—ã€‚\n\n\n### å¾ªç¯ç¥ç»ç½‘ç»œåº”ç”¨åˆ°æœºå™¨å­¦ä¹ ä»»åŠ¡\nå¾ªç¯ç¥ç»ç½‘ç»œå¯ä»¥åº”ç”¨åˆ°å¾ˆå¤šä¸åŒç±»å‹çš„æœºå™¨å­¦ä¹ ä»»åŠ¡ï¼Œæ ¹æ®è¿™äº›ä»»åŠ¡çš„ç‰¹ç‚¹ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§æ¨¡å¼ï¼š\n- åºåˆ—åˆ°ç±»åˆ«æ¨¡å¼\n- åŒæ­¥çš„åºåˆ—åˆ°åºåˆ—æ¨¡å¼\n- å¼‚æ­¥çš„åºåˆ—åˆ°åºåˆ—æ¨¡å¼\n\n#### åºåˆ—åˆ°ç±»åˆ«æ¨¡å¼\nä¸»è¦åº”ç”¨åœ¨åºåˆ—æ•°æ®çš„åˆ†ç±»é—®é¢˜ï¼Œå…¶è¾“å…¥ä¸ºåºåˆ—ï¼Œè¾“å‡ºä¸ºç±»åˆ«ã€‚æ¯”å¦‚åœ¨æ–‡æœ¬åˆ†ç±»ä¸­ï¼Œè¾“å…¥ä¸ºå•è¯åºåˆ—ï¼Œè¾“å‡ºä¸ºæ–‡æœ¬çš„ç±»åˆ«ã€‚\n\nå‡è®¾ä¸€ä¸ªæ ·æœ¬ $x_{1:T}=(x_1, x_2, ... , x_T)$ä¸ºä¸€ä¸ªé•¿åº¦ä¸ºTçš„åºåˆ—ï¼Œè¾“å‡ºä¸ºç±»åˆ« $y \\in (1, ..., C)$ï¼Œå¯ä»¥å°†æ ·æœ¬xæŒ‰ä¸åŒçš„æ—¶åˆ»è¾“å…¥åˆ°å¾ªç¯ç¥ç»ç½‘ç»œä¸­ï¼Œå¹¶å¾—åˆ°ä¸åŒæ—¶åˆ»çš„éšå«çŠ¶æ€$h_t$ï¼Œå¯ä»¥å°† $h_t$ çœ‹ä½œæ˜¯æ•´ä¸ªåºåˆ—çš„æœ€ç»ˆè¡¨ç¤ºï¼Œå¹¶è¾“å…¥ç»™åˆ†ç±»å™¨ g(.) è¿›è¡Œåˆ†ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼ˆå…¬å¼-8ï¼‰ï¼š\n$$\n\\hat{y} = g(h_T)\n$$\n\nå…¶ä¸­g(.) ä¸ºç®€å•çš„çº¿æ€§åˆ†ç±»å™¨ï¼ˆæ¯”å¦‚LRï¼‰æˆ–è€…å¤æ‚çš„åˆ†ç±»å™¨ï¼ˆå‰é¦ˆç¥ç»ç½‘ç»œï¼‰ã€‚\n\né™¤äº†å°†æœ€åæ—¶åˆ»çš„çŠ¶æ€ä½œä¸ºåºåˆ—è¡¨ç¤ºä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹æ•´ä¸ªåºåˆ—çš„çŠ¶æ€è¿›è¡Œå¹³å‡ï¼Œå¹¶ç”¨æ•´ä¸ªçŠ¶æ€çš„æœ€ç»ˆå¹³å‡ä½œä¸ºæ•´ä¸ªåºåˆ—çš„è¡¨ç¤ºï¼ˆå…¬å¼-9ï¼‰ï¼š\n$$\n\\hat{y} = g( \\frac{1}{T} \\sum_{t=1}^{T} h_t )\n$$\n\nå…¬å¼-8 å’Œå…¬å¼-9 åˆ†åˆ«å¯¹åº”ä¸‹å›¾ï¼ˆå›¾-6ï¼‰çš„ï¼ˆaï¼‰å’Œï¼ˆbï¼‰:\n![åºåˆ—åˆ°ç±»åˆ«æ¨¡å¼](https://img-blog.csdnimg.cn/20190908154219364.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n#### åŒæ­¥çš„åºåˆ—åˆ°åºåˆ—æ¨¡å¼\nä¸»è¦ç”¨äºåºåˆ—æ ‡æ³¨ï¼ˆSequence Labelingï¼‰ä»»åŠ¡ï¼Œå³æ¯ä¸€æ—¶åˆ»éƒ½æœ‰è¾“å…¥å’Œè¾“å‡ºï¼Œè¾“å…¥åºåˆ—å’Œè¾“å‡ºåºåˆ—çš„é•¿åº¦ç›¸åŒã€‚æ¯”å¦‚è¯æ€§æ ‡æ³¨ï¼ˆPart-of-Speech Taggingï¼‰ä¸­ï¼Œæ¯ä¸€ä¸ªå•è¯éƒ½éœ€è¦æ ‡æ³¨å…¶å¯¹åº”çš„è¯æ€§æ ‡ç­¾ã€‚\n\nå‡è®¾ä¸€ä¸ªæ ·æœ¬ $x_{1:T}=(x_1, x_2, ... , x_T)$ä¸ºä¸€ä¸ªé•¿åº¦ä¸ºTçš„åºåˆ—ï¼Œè¾“å‡ºä¸ºåºåˆ— $y_{1:T}=(y_1, y_2, ... , y_T)$ï¼Œå¯ä»¥å°†æ ·æœ¬xæŒ‰ä¸åŒçš„æ—¶åˆ»è¾“å…¥åˆ°å¾ªç¯ç¥ç»ç½‘ç»œä¸­ï¼Œå¹¶å¾—åˆ°ä¸åŒæ—¶åˆ»çš„éšå«çŠ¶æ€$h_t$ï¼Œæ¯ä¸ªæ—¶åˆ»çš„ $h_t$ ä»£è¡¨äº†å½“å‰æ—¶åˆ»å’Œå†å²çš„ä¿¡æ¯ï¼Œå¹¶è¾“å…¥ç»™åˆ†ç±»å™¨ g(.) è¿›è¡Œåˆ†ç±»ï¼Œå¾—åˆ°å½“å‰çš„æ ‡ç­¾ $\\hat{y}_t$ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼ˆå…¬å¼-8ï¼‰ï¼š\n$$\n\\hat{y} = g(h_T), \\forall_t \\in [1,T]\n$$\n\n![åŒæ­¥çš„åºåˆ—åˆ°åºåˆ—æ¨¡å¼](https://img-blog.csdnimg.cn/20190908154735645.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n\n#### å¼‚æ­¥çš„åºåˆ—åˆ°åºåˆ—æ¨¡å¼\n\nå¼‚æ­¥çš„åºåˆ—åˆ°åºåˆ—æ¨¡å¼ä¹Ÿæˆä¸ºç¼–ç å™¨-è§£ç å™¨ï¼Œè¾“å…¥åºåˆ—å’Œè¾“å‡ºåºåˆ—ä¸éœ€è¦æœ‰ä¸¥æ ¼çš„å¯¹åº”å…³ç³»ï¼Œä¹Ÿä¸éœ€è¦ä¿æŒç›¸åŒçš„é•¿åº¦ï¼Œæ¯”å¦‚åœ¨æœºå™¨ç¿»è¯‘ä¸­ï¼Œè¾“å…¥ä¸ºæºè¯­éŸ³çš„å•è¯åºåˆ—ï¼Œè¾“å‡ºä¸ºç›®æ ‡è¯­è¨€çš„å•è¯åºåˆ—ã€‚\n\nå‡è®¾è¾“å…¥ä¸ºä¸€ä¸ªé•¿åº¦ä¸ºTçš„åºåˆ— $x_{1:T}=(x_1, x_2, ... , x_T)$ï¼Œè¾“å‡ºä¸ºé•¿åº¦ä¸ºMçš„åºåˆ—$y_{1:M}=(x_1, x_2, ... , x_M)$ï¼Œç»å¸¸é€šè¿‡å…ˆç¼–ç åè§£ç çš„å½¢å¼å®ç°ã€‚\n\nå…ˆå°†æ ·æœ¬xæŒ‰ä¸åŒæ—¶åˆ»è¾“å…¥åˆ°ä¸€ä¸ªå¾ªç¯ç¥ç»ç½‘ç»œï¼ˆç¼–ç å™¨ï¼‰ä¸­ï¼Œå¹¶å¾—åˆ°å…¶ç¼–ç $h_T$ï¼Œç„¶åå†ä½¿ç”¨å¦å¤–ä¸€ä¸ªå¾ªç¯ç¥ç»ç½‘ç»œï¼ˆè§£ç å™¨ï¼‰ä¸­ï¼Œå¾—åˆ°è¾“å‡ºåºåˆ—$\\hat {y}_{1:M}$ã€‚ä¸ºäº†å»ºç«‹è¾“å‡ºåºåˆ—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œåœ¨è§£ç å™¨ä¸­é€šå¸¸ä½¿ç”¨éçº¿æ€§çš„è‡ªå›å½’æ¨¡å‹ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼ˆå…¬å¼-9ï¼‰ï¼š\n$$\nh_t = f_1(h_{t-1},x_t), \\forall_t \\in [1,T]\n\\\\\nh_{T+t} = f_2(h_{T+t-1},x_t), \\forall_t \\in [1,M]\n\\\\\n\\hat{y} _t = g(h_{T+t}), \\forall_t \\in [1,M]\n$$\nå…¶ä¸­ $f_1(.)$ï¼Œ$f_2(.)$åˆ†åˆ«ä¸ºç”¨ä½œç¼–ç å™¨å’Œè§£ç å™¨çš„å¾ªç¯ç¥ç»ç½‘ç»œï¼Œg(.)ä¸ºåˆ†ç±»å™¨ï¼Œ$\\hat{y}_t$ ä¸ºè¾“å‡ºé¢„æµ‹$\\hat{y}_t$çš„è¡¨ç¤ºã€‚\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20190908160323234.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n> è‡³æ­¤ï¼Œå¾ªç¯ç¥ç»ç½‘ç»œï¼ˆä¸Šï¼‰ç¯‡å·²ç»ä»‹ç»å®Œäº†ï¼Œåœ¨ï¼ˆä¸­ï¼‰ç¯‡å’Œä¸‹ç¯‡ä¸­ä¼šå±•å¼€ä»‹ç»æ›´å¤šçš„å†…å®¹ï¼Œæ¬¢è¿å…³æ³¨ã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(2)-å·ç§¯ç¥ç»ç½‘ç»œ","url":"/2019/04/23/æ·±åº¦å­¦ä¹ /å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ/å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(2)-å·ç§¯ç¥ç»ç½‘ç»œ/","content":"è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/100600661\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\n\nè¯¥ç³»åˆ—çš„å…¶ä»–æ–‡ç« ï¼š\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(1)-å‰é¦ˆç¥ç»ç½‘ç»œ](https://blog.csdn.net/Gamer_gyt/article/details/89459131)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(2)-å·ç§¯ç¥ç»ç½‘ç»œ](https://blog.csdn.net/Gamer_gyt/article/details/100531593)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸Šç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/100600661)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸­ç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/100709422)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸‹ç¯‡)](https://thinkgamer.blog.csdn.net/article/details/100943664)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œ(ä¸Šç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/103231385)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œ(ä¸‹ç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/103437985)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸Šç¯‡ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/103754752)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸‹ç¯‡ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/103754752)\n\n\n---\n\n> å·ç§¯ç¥ç»ç½‘ç»œï¼ˆConvolutional Neural Networkï¼‰æ˜¯ä¸€ç§å…·æœ‰å±€éƒ¨è¿æ¥ï¼Œæƒé‡å…±äº«ç­‰ç‰¹æ€§çš„æ·±å±‚å‰é¦ˆç¥ç»ç½‘ç»œã€‚ä¸€èˆ¬æ˜¯ç”±å·ç§¯å±‚ï¼Œæ±‡èšå±‚ï¼Œå…¨è¿æ¥å±‚äº¤å‰å †å è€Œæˆï¼Œä½¿ç”¨åå‘ä¼ æ’­ç®—æ³•è¿›è¡Œè®­ç»ƒã€‚å…¶æœ‰ä¸‰ä¸ªç»“æ„ä¸Šçš„ç‰¹å¾ï¼šå±€éƒ¨è¿æ¥ï¼Œæƒé‡å…±äº«ä»¥åŠæ±‡èšã€‚è¿™äº›ç‰¹å¾ä½¿å¾—å·ç§¯ç¥ç»ç½‘ç»œå…·æœ‰ä¸€å®šç¨‹åº¦ä¸Šçš„å¹³ç§»ï¼Œç¼©æ”¾å’Œæ—‹è½¬ä¸å˜æ€§ã€‚è¾ƒå‰é¦ˆç¥ç»ç½‘ç»œè€Œè¨€ï¼Œå…¶å‚æ•°æ›´å°‘ã€‚\n\nå·ç§¯ç¥ç»ç½‘ç»œç›®å‰ä¸»è¦åº”ç”¨åœ¨å›¾åƒå’Œè§†é¢‘åˆ†æçš„å„ç§ä»»åŠ¡ä¸Šï¼Œæ¯”å¦‚å›¾åƒåˆ†ç±»ï¼Œäººè„¸è¯†åˆ«ï¼Œç‰©ä½“è¯†åˆ«ï¼Œå›¾åƒåˆ†å‰²ç­‰ï¼Œå…¶å‡†ç¡®ç‡ä¹Ÿè¿œè¿œè¶…è¿‡äº†å…¶ä»–çš„äººå·¥ç¥ç»ç½‘ç»œã€‚è¿‘å¹´æ¥ï¼Œå·ç§¯ç¥ç»ç½‘ç»œä¹Ÿåº”ç”¨åˆ°è‡ªç„¶è¯­è¨€å¤„ç†å’Œæ¨èç³»ç»Ÿç­‰é¢†åŸŸã€‚\n\n# å·ç§¯çš„æ¦‚å¿µ\nå·ç§¯ï¼ˆConvolutionï¼‰ä¹Ÿå«æ‘ºç§¯ï¼Œæ˜¯åˆ†ææ•°å­¦ä¸­ä¸€ç§é‡è¦çš„è¿ç®—ã€‚åœ¨ä¿¡å·å¤„ç†æˆ–è€…å›¾åƒå¤„ç†ä¸­ï¼Œä¼šç»å¸¸ä½¿ç”¨ä¸€ç»´æˆ–äºŒç»´å·ç§¯ã€‚\n\n## ä¸€ç»´å·ç§¯\nä¸€ç»´å·ç§¯ç»å¸¸ç”¨åœ¨ä¿¡å·å¤„ç†ä¸Šï¼Œç”¨æ¥è®¡ç®—ä¿¡å·çš„ç´¯ç§¯ã€‚å‡è®¾ä¸€ä¸ªä¿¡å·å‘ç”Ÿå™¨æ¯ä¸ªæ—¶åˆ»tå‘ç”Ÿä¸€ä¸ªä¿¡å· $x_t$ï¼Œå…¶ä¿¡å·è¡°å‡ç‡ç»´$w_k$ï¼Œå³åœ¨$k-1$æ—¶åˆ»åï¼Œä¿¡æ¯å˜ä¸ºåŸæ¥çš„$w_k$å€ï¼Œå‡è®¾$w_1 = 1, w_2=1/2,w_3=1/4$é‚£ä¹ˆåœ¨tæ—¶åˆ»æ”¶åˆ°çš„ä¿¡å·$y_t$ä¸ºå½“å‰æ—¶åˆ»äº§ç”Ÿçš„ä¿¡æ¯ä¹‹å‰æ—¶åˆ»äº§ç”Ÿçš„å»¶è¿Ÿä¿¡æ¯çš„å åŠ (å…¬å¼1.1)ã€‚\n$$\ny_t = 1 * x_t + 1/2 * x_{t-1} + 1/4 * x_{t-2}\n\\\\\n=w_1 * x_t + w_2 * x_{t-1} + w_3 * x{t-2}\n\\\\\n= \\sum_{k=1}^{3} w_k * x_{t-k+1}\n$$\næˆ‘ä»¬æŠŠ$w_1, w_2, ....$ç§°ä¸ºæ»¤æ³¢å™¨ï¼ˆFilterï¼‰æˆ–è€…å·ç§¯æ ¸ï¼ˆConvolution Kernelï¼‰ã€‚å‡è®¾æ»¤æ³¢å™¨é•¿åº¦ä¸ºmï¼Œå®ƒå’Œä¸€ä¸ªä¿¡å·åºåˆ—$x_1,x_2,...$çš„å·ç§¯ä¸º(å…¬å¼1.2)ï¼š\n$$\\sum_{k=1}^{m} w_k * x_{t-k+1}$$\nä¿¡å·åºåˆ—xå’Œæ»¤æ³¢å™¨wçš„å·ç§¯å®šä¹‰ä¸º(å…¬å¼1.3)ï¼š\n$$y = w \\otimes  x$$\nä¸€ç»´å·ç§¯ç¤ºä¾‹å¦‚ä¸‹ï¼š\n![ä¸€ç»´å·ç§¯ç¥ç»ç½‘ç»œ](https://img-blog.csdnimg.cn/20190904075135300.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n## äºŒç»´å·ç§¯\nå·ç§¯ä¹Ÿå¸¸ç”¨åœ¨å›¾åƒå¤„ç†ä¸­ï¼Œå› ä¸ºå›¾åƒæ˜¯ä¸€ä¸ªäºŒç»´ç»“æ„ï¼Œéœ€è¦å¯¹ä¸€ç»´å·ç§¯è¿›è¡Œæ‰©å±•ã€‚ç»™å®šä¸€ä¸ªå›¾åƒ$X \\in R^{M*N}$å’Œæ»¤æ³¢å™¨$W \\in R^{m*n}$ï¼Œä¸€èˆ¬$m << M, n <<N$ï¼Œå…¶å·ç§¯ä¸º(å…¬å¼1.4)ï¼š\n$$\ny_{ij}=\\sum_{u=1}^{M}\\sum_{v=1}^{N} w_{uv} * x_{i-u+1,j-v+1}\n$$\näºŒç»´å·ç§¯ç¤ºä¾‹å¦‚ä¸‹ï¼š\n![äºŒç»´å·ç§¯ç¤ºä¾‹](https://img-blog.csdnimg.cn/20190904080806425.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n> æ³¨æ„ï¼šä¸Šå›¾ä¸­çš„å±•ç¤ºçš„å·ç§¯æ ¸ï¼ˆ3*3çŸ©é˜µï¼‰å’ŒäºŒç»´ç»“æ„æ•°æ®ç›¸ä¹˜æ—¶éœ€è¦é€†æ—¶é’ˆæ—‹è½¬180åº¦ï¼å¯¹ç…§ç€å·ç§¯å…¬å¼å¯ä»¥ç†è§£ã€‚\n\n\n## äº’ç›¸å…³\nåœ¨è®¡ç®—å·ç§¯è¿‡ç¨‹ä¸­ï¼Œéœ€è¦è¿›è¡Œå·ç§¯æ ¸ç¿»è½¬ï¼Œåœ¨å…·ä½“å®ç°ä¸Šä¸€èˆ¬ä¼šä»¥äº’ç›¸å…³æ“ä½œæ¥ä»£æ›¿å·ç§¯ï¼Œä»è€Œä¼šå‡å°‘ä¸€äº›ä¸å¿…è¦çš„æ“ä½œæˆ–è€…å¼€é”€ã€‚äº’ç›¸å…³æ˜¯ä¸€ä¸ªè¡¡é‡ä¸¤ä¸ªåºåˆ—ç›¸å…³æ€§çš„å‡½æ•°ï¼Œé€šå¸¸æ˜¯ç”¨æ»‘åŠ¨çª—å£çš„ç‚¹ç§¯è®¡ç®—æ¥å®ç°ã€‚ç»™å®šä¸€ä¸ªå›¾åƒ$X \\in R^{M*N}$å’Œå·ç§¯æ ¸$W \\in R^{m*n}$ï¼Œä»–ä»¬çš„äº’ç›¸å…³ä¸º(å…¬å¼1.5)ï¼š\n$$\ny_{ij}=\\sum_{u=1}^{M}\\sum_{v=1}^{N} w_{uv} * x_{i+u-1,j+v-1}\n$$\nå’Œå…¬å¼1.4ç›¸æ¯”ï¼Œäº’ç›¸å…³å’Œå·ç§¯çš„åŒºåˆ«åœ¨äºæ˜¯å¦å¯¹å·ç§¯æ ¸è¿›è¡Œç¿»è½¬ï¼Œå› æ­¤äº’ç›¸å…³ä¹Ÿç§°ä¸ºä¸ç¿»è½¬å·ç§¯ã€‚\n\nåœ¨ç¥ç»ç½‘ç»œä¸­ä½¿ç”¨å·ç§¯æ˜¯ä¸ºäº†è¿›è¡Œç‰¹å¾æŠ½å–ï¼Œå·ç§¯æ ¸æ˜¯å¦è¿›è¡Œæ ¸ç¿»è½¬ä¸å…¶ç‰¹å¾æŠ½å–èƒ½åŠ›æ— å…³ã€‚ç‰¹åˆ«æ˜¯å½“å·ç§¯æ ¸æ˜¯å¯å­¦ä¹ çš„å‚æ•°æ—¶ï¼Œå·ç§¯å’Œäº’ç›¸å…³æ˜¯ç­‰ä»·çš„ï¼Œå› æ­¤ä¸ºäº†å®ç°æ–¹ä¾¿ï¼Œé€šå¸¸ä½¿ç”¨äº’ç›¸å…³æ¥ä»£æ›¿å·ç§¯ã€‚äº‹å®ä¸Šå¾ˆå¤šæ·±åº¦å­¦ä¹ å·¥å…·ä¸­å·ç§¯æ“ä½œéƒ½æ˜¯ç”¨äº’ç›¸å…³æ¥ä»£æ›¿çš„ã€‚\n\nå…¬å¼1.5å¯ä»¥è¡¨ç¤ºä¸ºï¼š\n\n$$\nY = W \\otimes X \n$$\n\n---\n# å¸¸è§çš„å·ç§¯æ ¸åŠç‰¹å¾\n## å¸¸è§çš„å·ç§¯æ ¸\n1. å¯¹å›¾åƒæ— ä»»ä½•å½±å“çš„å·ç§¯æ ¸\n$$\n\\begin{bmatrix}\n0  & 0 & 0 \\\\ \n0 &  1 & 0 \\\\ \n0 & 0  & 0\n\\end{bmatrix}\n$$\n2. å¯¹å›¾åƒè¿›è¡Œé”åŒ–çš„æ»¤æ³¢å™¨\n$$\n\\begin{bmatrix}\n-1  & -1 & -1 \\\\ \n-1 &  9 & -1 \\\\ \n-1 & -1  & -1\n\\end{bmatrix}\n$$\n3. æµ®é›•æ»¤æ³¢å™¨\n$$\n\\begin{bmatrix}\n-1  & -1 & 0 \\\\ \n-1 &  0 & 1 \\\\ \n0 & 1  & 1\n\\end{bmatrix}\n$$\n4. å‡å€¼æ¨¡ç³Šæ»¤æ³¢å™¨\n$$\n\\begin{bmatrix}\n0  & 0.2 & 0 \\\\ \n0.2 &  0.2 & 0.2 \\\\ \n0 & 0.2  & 0\n\\end{bmatrix}\n$$\n> å‡å€¼æ¨¡ç³Šæ˜¯å¯¹åƒç´ ç‚¹å‘¨å›´çš„åƒç´ è¿›è¡Œå‡å€¼åŒ–å¤„ç†ï¼Œå°†ä¸Šä¸‹å·¦å³åŠå½“å‰åƒç´ ç‚¹åˆ†æ–‡5ä»½ï¼Œç„¶åè¿›è¡Œå¹³å‡ï¼Œæ¯ä»½å 0.2ï¼Œå³å¯¹å½“å‰åƒç´ ç‚¹å‘¨å›´çš„ç‚¹è¿›è¡Œå‡å€¼åŒ–å¤„ç†ã€‚\n\n5. é«˜æ–¯æ¨¡ç³Šæ»¤æ³¢å™¨\n> å‡å€¼æ¨¡ç³Šæ˜¯ä¸€ç§ç®€å•çš„æ¨¡ç³Šå¤„ç†æ–¹å¼ï¼Œä½†æ˜¯ä¼šç°å®æ¨¡ç³Šä¸å¤Ÿå¹³æ»‘ï¼Œè€Œé«˜æ–¯æ¨¡ç³Šå¯ä»¥å¾ˆå¥½çš„å¤„ç†ï¼Œå› æ­¤é«˜æ–¯æ¨¡ç³Šç»å¸¸ç”¨äºå›¾åƒçš„é™å™ªå¤„ç†ä¸Šï¼Œå°¤å…¶æ˜¯åœ¨è¾¹ç¼˜æ£€æµ‹ä¹‹å‰ï¼Œè¿›è¡Œé«˜æ–¯æ¨¡ç³Šï¼Œå¯ä»¥ç§»é™¤ç»†èŠ‚å¸¦æ¥çš„å½±å“ã€‚\n- ä¸€ç»´é«˜æ–¯æ¨¡ç³Š\n$$\nG(x)=\\frac{1}{ \\sqrt{2 \\pi \\sigma ^2}} e^{( -\\frac{x^2}{2\\sigma ^2} )}\n$$\n- äºŒç»´é«˜æ–¯æ¨¡ç³Š\n$$\nG(x)=\\frac{1}{ \\sqrt{2 \\pi \\sigma ^2}} e^{( -\\frac{x^2+y^2}{2\\sigma ^2} )}\n$$\n\n## å·ç§¯æ ¸çš„ç‰¹å¾\n> è¿™é‡Œçš„æ»¤æ³¢å™¨å°±æ˜¯å·ç§¯æ ¸\n\n- å½“æ»¤æ³¢å™¨çŸ©é˜µä¸­çš„å€¼ç›¸åŠ ä¸º0ç”šè‡³æ›´å°æ—¶ï¼Œè¢«æ»¤æ³¢å™¨å¤„ç†ä¹‹åçš„å›¾åƒç›¸å¯¹ä¼šæ¯”åŸå§‹å›¾åƒæš—ï¼Œå€¼è¶Šå°è¶Šæš—\n- å½“æ»¤æ³¢å™¨çŸ©é˜µä¸­çš„å€¼ç›¸åŠ å’Œä¸º1æ—¶ï¼Œè¢«æ»¤æ³¢å™¨å¤„ç†ä¹‹åçš„å›¾åƒä¸åŸå§‹å›¾åƒçš„äº®åº¦ç›¸æ¯”å‡ ä¹ä¸€è‡´\n- å½“æ»¤æ³¢å™¨çŸ©é˜µä¸­çš„å€¼ç›¸åŠ å’Œå¤§äº1æ—¶ï¼Œè¢«æ»¤æ³¢å™¨å¤„ç†ä¹‹åçš„å›¾åƒç›¸å¯¹ä¼šæ¯”åŸå§‹å›¾åƒçš„äº®åº¦æ›´äº®\n\n---\n\n# å·ç§¯çš„å˜ç§\nåœ¨å·ç§¯çš„æ ‡å‡†å®šä¹‰åŸºç¡€ä¸Šï¼Œè¿˜å¯ä»¥å¼•å…¥æ»¤æ³¢å™¨çš„æ»‘åŠ¨æ­¥é•¿å’Œé›¶å¡«å……æ¥å¢åŠ å·ç§¯çš„å¤šæ ·æ€§ï¼Œå¯ä»¥æ›´åŠ çµæ´»çš„æå–ç‰¹å¾ã€‚\n- æ»¤æ³¢å™¨çš„æ­¥é•¿ï¼ˆStrideï¼‰æ˜¯æŒ‡æ»¤æ³¢å™¨åœ¨æ»‘åŠ¨æ—¶çš„æ—¶é—´é—´éš”\n- é›¶å¡«å……ï¼ˆZero Paddingï¼‰æ˜¯åœ¨è¾“å…¥å‘é‡ä¸¤ç«¯è¿›è¡Œè¡¥é›¶\n\nä¸‹å›¾å±•ç¤ºä¸ºæ­¥é•¿ä¸º2å’Œé›¶å¡«å……çš„ç¤ºä¾‹ï¼š\n![æ­¥é•¿ä¸º2å’Œé›¶å¡«å……ç¤ºä¾‹](https://img-blog.csdnimg.cn/20190904081641651.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nå‡è®¾å·ç§¯å±‚çš„è¾“å…¥ç¥ç»å…ƒä¸ªæ•°ä¸ºnï¼Œå·ç§¯å¤§å°ä¸ºmï¼Œæ­¥é•¿ä¸ºsï¼Œè¾“å…¥ç¥ç»å…ƒä¸¤ç«¯å„è¡¥på„é›¶ï¼Œé‚£ä¹ˆè¯¥å·ç§¯å¯¹åº”çš„ç¥ç»å…ƒæ•°é‡ä¸ºï¼š(n+2p-m)/s + 1ã€‚\n\nä¸€èˆ¬çš„å·ç§¯åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼š\n- çª„å·ç§¯ï¼ˆNarrow Convolutionï¼‰ï¼šæ­¥é•¿s=1ï¼Œä¸¤ç«¯ä¸è¡¥é›¶å³p=0ï¼Œå·ç§¯åè¾“å‡ºé•¿åº¦ä¸ºï¼šn-m + 1\n- å®½å·ç§¯ï¼ˆWide Convolutionï¼‰ï¼šæ­¥é•¿s=1ï¼Œä¸¤ç«¯è¡¥é›¶p=m-1ï¼Œå·ç§¯åè¾“å‡ºé•¿åº¦ä¸ºï¼šn+m-1\n- ç­‰å®½å·ç§¯ï¼ˆEqual-Width Convolutionï¼‰ï¼šæ­¥é•¿s = 1,ä¸¤ç«¯è¡¥é›¶p = (m âˆ’1)/2,å·ç§¯åè¾“å‡ºé•¿åº¦ nã€‚\n\n---\n\n# å·ç§¯çš„æ•°å­¦æ€§è´¨\nå·ç§¯æœ‰å¾ˆå¤šæ¯”è¾ƒå¥½çš„æ•°å­¦æ€§è´¨ï¼Œè¿™é‡Œä¸»è¦ä»‹ç»ä¸€äº›äºŒç»´çš„æ•°å­¦æ€§è´¨ï¼ŒåŒæ ·é’ˆå¯¹ä¸€ç»´å·ç§¯ä¹ŸåŒæ ·é€‚ç”¨ã€‚\n## äº¤æ¢æ€§\nå¦‚æœä¸é™åˆ¶ä¸¤ä¸ªå·ç§¯çš„é•¿åº¦ï¼Œå·ç§¯æ˜¯å…·æœ‰äº¤æ¢æ€§çš„ã€‚å³ $x \\otimes  y = y \\otimes  x$ï¼Œå½“è¾“å…¥ä¿¡æ¯å’Œå·ç§¯æ ¸æœ‰å›ºå®šé•¿åº¦æ—¶ï¼Œä»–ä»¬çš„å®½å·ç§¯ä¾ç„¶å…·æœ‰äº¤æ¢æ€§ã€‚å¯¹äºä¸¤ç»´å›¾åƒ$X \\in R^{M*N}$å’Œå·ç§¯æ ¸$W \\in R^{m*n}$ï¼Œå¯¹å›¾åƒXçš„ä¸¤ä¸ªç»´åº¦è¿›è¡Œé›¶å¡«å……ï¼Œä¸¤ç«¯å„è¡¥m-1å’Œn-1ä¸ªé›¶ï¼Œå¾—åˆ°å…¨å¡«å……ï¼ˆFull Paddingï¼‰çš„å›¾åƒ$\\tilde{X} \\in R^{(M+2m-2)(N+2n-2)}$ã€‚å›¾åƒXå’Œå·ç§¯æ ¸Wçš„å®½å·ç§¯ï¼ˆWide Convolutionï¼‰å®šä¹‰ä¸ºï¼š$W \\tilde{\\otimes } X \\triangleq X \\tilde{\\otimes } W$\nï¼Œå…¶ä¸­$\\tilde{\\otimes }$ä¸ºå®½å·ç§¯æ“ä½œã€‚å®½å·ç§¯å…·æœ‰äº¤æ¢æ€§ï¼Œå³ï¼š$W \\tilde{\\otimes } X = X \\tilde{\\otimes } W$\n\n## å¯¼æ•°\nå‡è®¾$Y = W \\otimes X$ï¼Œå…¶ä¸­$X \\in R^{M*N}$ï¼Œ$W \\in R^{m*n}$ï¼Œ$Y \\in R^{(M-m+1)*(N-n+1)}$ï¼Œå‡½æ•°$f(Y) \\in R$ä¸ºä¸€ä¸ªæ ‡é‡å‡½æ•°ï¼Œåˆ™(å…¬å¼1.6)\n$$\n\\frac{\\partial f(Y)}{\\partial w_{uv}} = \\sum_{i=1}^{M-m+1}\\sum_{j=1}^{N-n+1} \\frac{\\partial f(Y)}{\\partial y_{ij}} \\frac{\\partial y_{ij}}{\\partial w_{uv}}\n\\\\\n= \\sum_{i=1}^{M-m+1}\\sum_{j=1}^{N-n+1}  \\frac{\\partial f(Y)}{\\partial y_{ij}}x_{ {i+u-1},{j+v-1}}  \n\\\\\n= \\sum_{i=1}^{M-m+1}\\sum_{j=1}^{N-n+1}  \\frac{\\partial f(Y)}{\\partial y_{ij}}x_{ {u+i-1},{v+j-1}}  \n$$\nä»å…¬å¼1.6å¯ä»¥çœ‹å‡ºï¼Œf(Y)å…³äºWçš„åå¯¼æ•°ä¸ºXå’Œ$\\frac{\\partial f(Y)}{\\partial Y}$çš„å·ç§¯ï¼ˆå…¬å¼1.7ï¼‰\n$$\n\\frac{\\partial f(Y)}{\\partial W} = \\frac{\\partial f(Y)}{ \\partial Y } \\otimes X\n$$\nåŒç†å¾—åˆ°ï¼ˆå…¬å¼1.8ï¼‰ï¼š\n$$\n\\frac{\\partial f(Y)}{\\partial x_{st}} = \\sum_{i=1}^{M-m+1}\\sum_{j=1}^{N-n+1} \\frac{\\partial f(Y)}{\\partial y_{ij}} \\frac{\\partial y_{ij}}{\\partial x_{st}}\n\\\\\n= \\sum_{i=1}^{M-m+1}\\sum_{j=1}^{N-n+1}  \\frac{\\partial f(Y)}{\\partial y_{ij}}w_{ {s-i+1},{t-j+1}}  \n$$\nå…¶ä¸­å½“$(s-i+1) < 1$ï¼Œæˆ–$(s-i+1)>m$ï¼Œæˆ–$(t-j+1) <1$ï¼Œæˆ–$(t-j+1) >n$ï¼Œæˆ–$w_{s-i+1,t-j+1}=0$æ—¶ï¼Œå³ç›¸å½“äºå¯¹Wè¿›è¡Œäº† p=(M-m,N-n)çš„é›¶å¡«å……ã€‚\n\nä»å…¬å¼1.8å¯ä»¥çœ‹å‡ºï¼Œf(Y)å…³äºXçš„åå¯¼æ•°ä¸ºWå’Œ$\\frac{\\partial f(Y)}{ \\partial Y }$ï¼Œå…¬å¼1.8ä¸­çš„å·ç§¯æ˜¯çœŸæ­£çš„å·ç§¯è€Œä¸æ˜¯äº’ç›¸å…³ï¼Œä¸ºäº†ä¸€è‡´æ€§ï¼Œæˆ‘ä»¬ç”¨äº’ç›¸å…³çš„å·ç§¯ï¼Œå³(å…¬å¼1.9)ï¼š\n$$\n\\frac{\\partial f(Y)}{\\partial X} = rot180(\\frac{\\partial f(Y)}{\\partial X}) \\tilde{\\otimes }W=rot180(W) \\tilde{\\otimes }\\frac{\\partial f(Y)}{\\partial X}\n$$\nå…¶ä¸­rot180(.)è¡¨ç¤ºæ—‹è½¬180åº¦ã€‚\n\n----\n\n\n# å·ç§¯ç¥ç»ç½‘ç»œ\nå·ç§¯ç¥ç»ç½‘ç»œä¸€èˆ¬ç”±å·ç§¯å±‚ï¼Œæ±‡èšå±‚å’Œå…¨è¿æ¥å±‚æ„æˆã€‚\n## ç”¨å·ç§¯ä»£æ›¿å…¨è¿æ¥\nåœ¨å…¨è¿æ¥å‰é¦ˆç¥ç»ç½‘ç»œä¸­ï¼Œå¦‚æœç¬¬$l$å±‚æœ‰$n^l$ä¸ªç¥ç»å…ƒï¼Œç¬¬$l-1$å±‚æœ‰$n^{l-1}$ä¸ªç¥ç»å…ƒï¼Œè¿æ¥è¾¹å°±æœ‰$n^l * n^{l-1}$ä¹Ÿå°±æ˜¯æƒé‡å‚æ•°æœ‰è¿™ä¹ˆå¤šä¸ªï¼Œå½“må’Œnéƒ½å¾ˆå¤§æ—¶ï¼Œæƒé‡çŸ©é˜µçš„å‚æ•°ä¼šéå¸¸å¤šï¼Œè®­ç»ƒçš„æ•ˆç‡ä¼šéå¸¸ä½ã€‚\n\nå¦‚æœç”¨å·ç§¯ä»£æ›¿å…¨è¿æ¥ï¼Œç¬¬$l$å±‚çš„å‡€è¾“å…¥$z^l$ä¸$l-1$å±‚æ´»æ€§å€¼$a^{l-1}$å’Œæ»¤æ³¢å™¨$w^l \\in R^m$çš„å·ç§¯ï¼Œå³$z^l = w^l * a^{l-1} + b^l$,å…¶ä¸­æ»¤æ³¢å™¨$w^l$\nä¸ºå¯å­¦ä¹ çš„æƒé‡å‘é‡ï¼Œ$b^l \\in R^{l-1}$ä¸ºå¯å­¦ä¹ çš„åç½®ã€‚\n\næ ¹æ®å·ç§¯çš„å®šä¹‰ï¼Œå·ç§¯å±‚æœ‰ä¸¤ä¸ªå¾ˆé‡è¦çš„æ€§è´¨ï¼š\n- å±€éƒ¨è¿æ¥ï¼šåœ¨å·ç§¯å±‚(å‡è®¾æ˜¯ç¬¬$l$å±‚)ä¸­çš„æ¯ä¸€ä¸ªç¥ç»å…ƒéƒ½åªå’Œä¸‹ä¸€å±‚(ç¬¬$l âˆ’ 1$å±‚)ä¸­æŸä¸ªå±€éƒ¨çª—å£å†…çš„ç¥ç»å…ƒç›¸è¿,æ„æˆä¸€ä¸ªå±€éƒ¨è¿æ¥ç½‘ç»œã€‚\n- å…¨å±€å…±äº«ï¼šä½œä¸ºå‚æ•°çš„æ»¤æ³¢å™¨ $w^l$ï¼Œå¯¹äºç¬¬ $l$å±‚çš„æ‰€æœ‰çš„ç¥ç»å…ƒéƒ½æ˜¯ç›¸åŒçš„ã€‚\n\n## å·ç§¯å±‚\nå·ç§¯å±‚çš„ä½œç”¨æ˜¯æå–ä¸€ä¸ªå±€éƒ¨åŒºåŸŸçš„ç‰¹å¾ï¼Œä¸åŒå¤§å°çš„å·ç§¯ç›¸å½“äºä¸åŒçš„ç‰¹å¾æå–å™¨ã€‚ä¸Šæ–‡ä»‹ç»çš„å·ç§¯å’Œç¥ç»å…ƒéƒ½æ˜¯ä¸€ç»´çš„ï¼Œä½†å·ç§¯ç¥ç»ç½‘ç»œä¸»è¦æ˜¯é’ˆå¯¹å›¾åƒå¤„ç†è€Œè¨€çš„ï¼Œè€Œå›¾åƒé€šå¸¸æ˜¯äºŒç»´çš„ï¼Œä¸ºäº†å……åˆ†åˆ©ç”¨å›¾åƒçš„å±€éƒ¨ç‰¹å¾ï¼Œé€šå¸¸å°†ç¥ç»å…ƒç»„ç»‡ä¸ºä¸‰ç»´ç»“æ„çš„ç¥ç»å±‚ï¼Œå…¶å¤§å° M * å®½åº¦ W * æ·±åº¦ Dï¼Œå³Dä¸ªM*Nçš„ç‰¹å¾æ˜ å°„ç»„æˆã€‚\n\n\nå¯¹äºè¾“å…¥å±‚çš„è€Œè¨€ï¼Œç‰¹å¾æ˜ å°„å°±æ˜¯å›¾åƒæœ¬èº«ï¼Œå¦‚æœæ˜¯ç°è‰²å›¾åƒï¼Œåˆ™æ·±åº¦ä¸º1ï¼Œå¦‚æœä¸ºå½©è‰²å›¾åƒï¼ˆåˆ†åˆ«æ˜¯RGBä¸‰ä¸ªé€šé“çš„é¢œè‰²ç‰¹å¾æ˜ å°„ï¼‰ï¼Œåˆ™æ·±åº¦ä¸º3ã€‚\n\n## æ±‡èšå±‚\næ±‡èšå±‚ï¼ˆPooling Layerï¼‰ä¹Ÿå«å­é‡‡æ ·å±‚ï¼ˆSubsampling Layerï¼‰ï¼Œå…¶ä½œç”¨æ˜¯è¿›è¡Œç‰¹å¾é€‰æ‹©ï¼Œé™ä½ç‰¹å¾æ•°é‡ï¼Œä»è€Œå‡å°‘å‚æ•°æ•°é‡ã€‚\n\nå·ç§¯å±‚è™½ç„¶å¯ä»¥æ˜æ˜¾å‡å°‘ç½‘ç»œä¸­çš„è¿æ¥æ•°é‡ï¼Œä½†æ˜¯ç‰¹å¾æ˜ å°„ä¸­çš„ç¥ç»å…ƒä¸ªæ•°å¹¶æœªæ˜¾è‘—å‡å°‘ã€‚å¦‚æœåè¾¹æ¥ä¸€ä¸ªåˆ†ç±»å™¨çš„è¯ï¼Œåˆ†ç±»å™¨çš„è¾“å…¥ç»´æ•°ä¾ç„¶å¾ˆé«˜ï¼Œå¾ˆå®¹æ˜“å‡ºç°è¿‡æ‹Ÿåˆã€‚å› æ­¤æœ‰äº†æ±‡èšå±‚çš„äº§ç”Ÿï¼Œåœ¨å·ç§¯åè¾¹åŠ ä¸€ä¸ªæ±‡èšå±‚ï¼Œä»è€Œé™ä½ç‰¹å¾ç»´æ•°ï¼Œé¿å…è¿‡æ‹Ÿåˆã€‚\n\nå‡è®¾æ±‡èšå±‚çš„è¾“å…¥ç‰¹å¾æ˜ å°„ç»„ä¸º$X \\in R^{M * N * D}$ï¼Œå¯¹äºå…¶ä¸­æ¯ä¸€ä¸ªæ˜ å°„$X^d$ï¼Œå°†å…¶åˆ’åˆ†ä¸ºå¾ˆå¤šåŒºåŸŸ$R^d_{m,n}$ï¼Œ1 <= m <= M'ï¼Œ1<= n <= N'ï¼Œè¿™äº›åŒºåŸŸå¯ä»¥é‡å ï¼Œä¹Ÿå¯ä»¥ä¸é‡å ã€‚æ±‡èšï¼ˆPoolingï¼‰æ˜¯æŒ‡å¯¹æ¯ä¸ªåŒºåŸŸè¿›è¡Œä¸‹é‡‡æ ·ï¼ˆDown Samplingï¼‰å¾—åˆ°ä¸€ä¸ªå€¼ï¼Œä½œä¸ºè¿™ä¸ªåŒºåŸŸçš„æ¦‚æ‹¬ã€‚å¸¸è§çš„æ±‡èšæ–¹å¼æœ‰ä¸¤ç§ï¼š\n- æœ€å¤§æ±‡èšï¼ˆMaximum Poolingï¼‰ï¼šä¸€ä¸ªåŒºåŸŸå†…æ‰€æœ‰ç¥ç»å…ƒçš„æœ€å¤§å€¼\n- å¹³å‡æ±‡èšï¼ˆMean Poolingï¼‰ï¼šä¸€ä¸ªåŒºåŸŸå†…æ‰€æœ‰ç¥ç»å…ƒçš„å¹³å‡å€¼\n\nå…¸å‹çš„æ±‡èšå±‚æ˜¯å°†æ¯ä¸ªç‰¹å¾æ˜ å°„åˆ’åˆ†ä¸º2*2å¤§å°çš„ä¸é‡å åŒºåŸŸï¼Œç„¶åä½¿ç”¨æœ€å¤§æ±‡èšçš„æ–¹å¼è¿›è¡Œä¸‹é‡‡æ ·ã€‚æ±‡èšå±‚ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å·ç§¯å±‚ï¼Œå·ç§¯æ ¸å¤§å°ä¸ºm * mï¼Œæ­¥é•¿ä¸ºs * sï¼Œå·ç§¯æ ¸ä¸º maxå‡½æ•°æˆ–è€…meanå‡½æ•°ã€‚è¿‡å¤§çš„é‡‡æ ·åŒºåŸŸä¼šæ€¥å‰§å‡å°‘ç¥ç»å…ƒçš„æ•°é‡ï¼Œä¼šé€ æˆè¿‡å¤šçš„ä¿¡æ¯æŸå¤±ã€‚\n\nä¸‹å›¾æ‰€ç¤ºä¸ºæœ€å¤§æ±‡èšç¤ºä¾‹ï¼š\n![æœ€å¤§æ±‡èšå®ä¾‹](https://img-blog.csdnimg.cn/20190905133224389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n## å…¨è¿æ¥å±‚\nåœ¨å…¨è¿æ¥å±‚ä¸­ï¼Œå°†æœ€åä¸€å±‚çš„å·ç§¯è¾“å‡ºå±•å¼€ï¼Œå¹¶å°†å½“å‰å±‚çš„æ¯ä¸ªèŠ‚ç‚¹ä¸ä¸‹ä¸€å±‚çš„å¦ä¸€ä¸ªèŠ‚ç‚¹è¿æ¥èµ·æ¥ã€‚å…¨è¿æ¥å±‚åªæ˜¯äººå·¥ç¥ç»ç½‘ç»œçš„å¦ä¸€ç§è¯´æ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå…¨è¿æ¥å±‚ä¸­çš„æ“ä½œä¸ä¸€èˆ¬ç¥ç»ç½‘ç»œä¸­çš„æ“ä½œå®Œå…¨ç›¸åŒã€‚\n\n![image](https://img-blog.csdnimg.cn/20190904171044639.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nå¯¹äºoutput layerä¸­çš„çš„æ¯ä¸ªç¥ç»å…ƒï¼Œå…¶è¡¨è¾¾å¼å¯ä»¥è®°åšä¸º(å…¬å¼1.10)ï¼š\n$$\ny = \\sigma (\\sum_{i=1}^{m} w_i ^T x_i + b)\n$$\nå¦‚æœoutptuæœ‰å¤šä¸ªç¥ç»å…ƒï¼Œæœ€ç»ˆå¯ä»¥é€šè¿‡softmaxè¿›è¡Œæœ€ç»ˆç±»åˆ«çš„åˆ¤æ–­ã€‚\n\n---\n\n# å…¸å‹çš„å·ç§¯ç½‘ç»œç»“æ„\n\nä¸€ä¸ªå…¸å‹çš„å·ç§¯ç½‘ç»œæ˜¯æœ‰å·ç§¯å±‚ï¼Œæ±‡èšå±‚ï¼Œå…¨è¿æ¥å±‚äº¤å‰å †å è€Œæˆã€‚ç›®å‰å¸¸ç”¨çš„å·ç§¯ç¥ç»ç½‘ç»œç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n![å·ç§¯ç¥ç»ç½‘ç»œ](https://img-blog.csdnimg.cn/2019090413573373.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nå·ç§¯å—æ˜¯ç”±Mä¸ªå·ç§¯å±‚bä¸ªæ±‡èšå±‚ï¼ˆMé€šå¸¸åœ¨2ï½ä¹‹é—´ï¼Œbä¸º0æˆ–1ï¼‰ï¼Œä¸€ä¸ªå·ç§¯ç½‘ç»œä¸­å¯ä»¥å †å Nä¸ªè¿ç»­çš„å·ç§¯å—ï¼Œç„¶åå†æ¥ç€Kä¸ªå…¨è¿æ¥å±‚ï¼ˆNçš„å–å€¼ç©ºé—´æ¯”è¾ƒå¤§ï¼Œä¸€èˆ¬æ˜¯1ï½100æˆ–è€…æ›´å¤§ï¼ŒKé€šå¸¸ä¸º0ï½2ï¼‰ã€‚\n\nç›®å‰æ•´ä¸ªç½‘ç»œå€¾å‘äºä½¿ç”¨æ›´å°çš„å·ç§¯æ ¸ï¼ˆæ¯”å¦‚1*1æˆ–è€…3*3ï¼‰ä»¥åŠæ›´æ·±çš„ç»“æ„ï¼ˆæ¯”å¦‚å±‚æ•°å¤§äº50ï¼‰ï¼Œæ­¤å¤–ï¼Œå·ç§¯æ“ä½œçš„çµæ´»æ€§è¶Šæ¥è¶Šå¤§ï¼Œæ±‡èšå±‚çš„ä½œç”¨å˜å¾—è¶Šæ¥è¶Šå°ï¼Œå› æ­¤ç›®å‰æµè¡Œçš„å·ç§¯ç½‘ç»œä¸­ï¼Œæ±‡èšå±‚çš„æ¯”ä¾‹ä¹Ÿåœ¨é€æ¸é™ä½ï¼Œå€¾å‘äºå…¨è¿æ¥ç½‘ç»œã€‚\n\n---\n\n# å‚æ•°å­¦ä¹ \nåœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œå‚æ•°ä¸ºå·ç§¯æ ¸ä¸­çš„æƒé‡å’Œåç½®ï¼Œå’Œå…¨è¿æ¥å‰é¦ˆç¥ç»ç½‘ç»œä¸€æ ·ï¼Œä½¿ç”¨è¯¯å·®åå‘ä¼ æ’­ç®—æ³•æ¥è¿›è¡Œå‚æ•°å­¦ä¹ ã€‚æ¢¯åº¦ä¸»è¦é€šè¿‡æ¯ä¸€å±‚çš„è¯¯å·®é¡¹$\\delta$è¿›è¡Œåå‘ä¼ æ’­ï¼Œå¹¶è¿›ä¸€æ­¥è®¡ç®—æ¯ä¸€å±‚çš„æ¢¯åº¦ã€‚åœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ä¸»è¦æœ‰ä¸¤ç§åŠŸèƒ½ä¸åŒçš„ç½‘ç»œå±‚ï¼šå·ç§¯å±‚å’Œæ±‡èšå±‚ã€‚è€Œå‚æ•°ä¸ºå·ç§¯æ ¸ä¸­æƒé‡å’Œåç½®ï¼Œå› æ­¤åªéœ€è¦è®¡ç®—å·ç§¯å±‚ä¸­å‚æ•°æ¢¯åº¦ã€‚\n\nä¸å¤±ä¸€èˆ¬æ€§ï¼Œå¯¹ç¬¬$l$å±‚å·ç§¯å±‚,ç¬¬$l-1$å±‚çš„è¾“å…¥ç‰¹å¾æ˜ å°„ä¸º$X^{(l-1)} \\in R^{M*N*D}$ï¼Œé€šè¿‡å·ç§¯è®¡ç®—å¾—åˆ°ç¬¬$l$å±‚å‡€è¾“å…¥ä¸º$Z^{(l)}\\in  R^{M'*N'*P}$ï¼Œç¬¬$l$å±‚çš„ç¬¬p(1<= p <= P)ä¸ªç‰¹å¾å‡€è¾“å…¥ä¸º(å…¬å¼1.11)\n$$\nZ^{(l,p)} = \\sum_{d=1}^{D} W^{(l,p,d)} \\otimes X^{(l-1,d)}+ b^{(l,p)}$$\nå…¶ä¸­$W^{(l,p,d)} ,b^{(l,p)}$ä¸ºå·ç§¯æ ¸ä»¥åŠåç½®ã€‚ç¬¬$l$å±‚å…±æœ‰P * D ä¸ªå·ç§¯å’ŒPä¸ªåç½®ï¼Œå¯ä»¥åˆ†åˆ«ä½¿ç”¨é“¾å¼æ³•åˆ™è®¡ç®—å…¶æ¢¯åº¦ã€‚\n\næ ¹æ®å…¬å¼1.7 å’Œ 1.11ï¼ŒæŸå¤±å‡½æ•°å…³äºç¬¬$l$å±‚çš„å·ç§¯æ ¸$W^{(l,p,d)}$çš„åå¯¼æ•°ä¸ºä¸º(å…¬å¼1.12)ï¼š\n$$\n\\frac{\\partial L (Y,\\hat{Y})}{ \\partial W^{(l,p,d)} } = \\frac{\\partial L (Y,\\hat{Y})}{ \\partial Z^{(l,p)} } \\otimes X^{(l-1,d)}=\\delta ^{(l,p)} \\otimes X^{(l-1,d)}\n$$\nå…¶ä¸­ä¸º(å…¬å¼1.13)\n$$\n\\delta ^{(l,p)} = \\frac{\\partial L (Y,\\hat{Y})}{ \\partial Z^{(l,p)} } \n$$\nä¸ºæŸå¤±å‡½æ•°å…³äºç¬¬$l$å±‚çš„ç¬¬pä¸ªç‰¹å¾æ˜ å°„å‡€è¾“å…¥$Z^{(l,p)}$çš„åå¯¼æ•°ã€‚\n\nåŒç†å¯å¾—ï¼ŒæŸå¤±å‡½æ•°å…³äºç¬¬$l$å±‚çš„ç¬¬pä¸ªåç½®$b^{(l,p)}$çš„åå¯¼æ•°ä¸ºä¸º(å…¬å¼1.14)ï¼š\n$$\n\\frac{ \\partial L (Y,\\hat{Y}) }{ \\partial b^{(l,p)} } = \\sum_{i,j} [\\delta ^{(l,p)}]_{i,j}\n$$\nå·ç§¯ç½‘ç»œä¸­ï¼Œæ¯å±‚å‚æ•°çš„æ¢¯åº¦ä¾èµ–å…¶æ‰€åœ¨å±‚çš„è¯¯å·®é¡¹$\\delta ^{(l,p)}$\n\n## è¯¯å·®é¡¹çš„è®¡ç®—\nå·ç§¯å±‚å’Œæ±‡èšå±‚çš„è¯¯å·®é¡¹è®¡ç®—ä¸åŒã€‚\n\n### å·ç§¯å±‚\nå½“$l+1$å±‚ä¸ºå·ç§¯å±‚æ—¶ï¼Œå‡è®¾ç‰¹å¾æ˜ å°„å‡€è¾“å…¥(å…¬å¼1.15)\n$$\nZ^{(l+1,p)} = \\sum_{d=1}^{D} W^{(l+1,p,d)} \\otimes X^{(l,d)} + b^{(l+1,p)}\n$$\n\nå…¶ä¸­$W^{(l+1,p,d)},b^{(l+1,p)}$ä¸ºç¬¬$l$å±‚çš„å·ç§¯æ ¸å’Œåç½®ã€‚ç¬¬$l+1$å±‚å…±æœ‰ P *D ä¸ªå·ç§¯æ ¸å’ŒPä¸ªåç½®ã€‚\n\nç¬¬ $l$å±‚çš„ç¬¬ $d$ä¸ªç‰¹å¾æ˜ å°„çš„è¯¯å·®é¡¹$\\delta ^{(l,d)}$çš„å…·ä½“æ¨å¯¼è¿‡ç¨‹å¦‚ä¸‹(å…¬å¼1.16):\n$$\n\\delta ^{(l,d)} \\triangleq  \\frac{\\partial L (Y,\\hat{Y})}{ \\partial Z^{(l,d)} }\n\\\\\n=\\frac{\\partial X^{(l,d)} } { \\partial Z^{(l,d)}} \\cdot \\frac{\\partial L (Y,\\hat{Y})}{ \\partial X^{(l,d)} }\n \\\\\n= f'_l (Z^{(l,p)})  \\odot \\sum_{p=1}^{P}( rot180(W^{(l+1,p,d)} ) \\tilde{\\otimes  } \\frac{\\partial L(Y,\\hat{Y})}{ \\partial Z^{(+1,p)}})\n\\\\\n=  f'_l (Z^{(l,p)})  \\odot \\sum_{p=1}^{P}(rot180(W^{(l+1,p,d)} ) \\tilde{\\otimes  }\\delta ^{(l+1,p)})\n$$\n\nå…¶ä¸­$\\tilde{\\otimes}$è¡¨ç¤ºå®½å·ç§¯ã€‚\n\n### æ±‡èšå±‚\nå½“ç¬¬$l+1$å±‚ä¸ºæ±‡èšå±‚æ—¶, å› ä¸ºæ±‡èšå±‚æ˜¯ä¸‹é‡‡æ ·æ“ä½œ, $l+1$å±‚çš„æ¯ä¸ªç¥ç»å…ƒçš„è¯¯å·®é¡¹ $\\delta$å¯¹åº”äºç¬¬$l$å±‚çš„ç›¸åº”ç‰¹å¾æ˜ å°„çš„ä¸€ä¸ªåŒºåŸŸã€‚$l$å±‚çš„ç¬¬$p$ä¸ªç‰¹å¾æ˜ å°„ä¸­çš„æ¯ä¸ªç¥ç»å…ƒéƒ½æœ‰ä¸€æ¡è¾¹å’Œ$l+1$å±‚çš„ç¬¬$p$ä¸ªç‰¹å¾æ˜ å°„ä¸­çš„ä¸€ä¸ªç¥ç»å…ƒç›¸è¿ã€‚\n\næ ¹æ®é“¾å¼æ³•åˆ™,ç¬¬$l$å±‚çš„ä¸€ä¸ªç‰¹å¾æ˜ å°„çš„è¯¯å·®é¡¹$\\delta ^{(l,p)}$ï¼Œåªéœ€è¦å°† $l+1$å±‚å¯¹åº”ç‰¹å¾æ˜ å°„çš„è¯¯å·®é¡¹$\\delta ^{(l+1,p)}$è¿›è¡Œä¸Šé‡‡æ ·æ“ä½œ(å’Œç¬¬ $l$å±‚çš„å¤§å°ä¸€æ ·) ,å†å’Œ $l$å±‚ç‰¹å¾æ˜ å°„çš„æ¿€æ´»å€¼åå¯¼æ•°é€å…ƒç´ ç›¸ä¹˜,å°±å¾—åˆ°äº† $\\delta ^{ (l,p)}$\n\nç¬¬ $l$å±‚çš„ç¬¬$p$ä¸ªç‰¹å¾æ˜ å°„çš„è¯¯å·®é¡¹$\\delta ^{(l,p)}$çš„å…·ä½“æ¨å¯¼è¿‡ç¨‹å¦‚ä¸‹(å…¬å¼1.17)ï¼š\n$$\n\\delta ^{(l,p)} \\triangleq  \\frac{\\partial L (Y,\\hat{Y})}{ \\partial Z^{(l,p)} }\n\\\\\n=\\frac{\\partial X^{(l,p)} } { \\partial Z^{(l,p)}} \\cdot \\frac{\\partial Z^{(l+1,p)} } { \\partial X^{(l,p)}} \\cdot \\frac{\\partial L (Y,\\hat{Y})}{ \\partial Z^{(l+1,p)} }\n\\\\ \n= f'_l (Z^{(l,p)})  \\odot up(\\delta ^{(l+1,p)})\n$$\nå…¶ä¸­$f'_l$ä¸ºç¬¬lå±‚ä½¿ç”¨çš„æ¿€æ´»å‡½æ•°å¯¼æ•°ï¼Œupä¸ºä¸Šé‡‡æ ·å‡½æ•°(upsampling)ï¼Œä¸æ±‡èšå±‚ä¸­ä½¿ç”¨çš„ä¸‹é‡‡æ ·å‡½æ•°åˆšå¥½ç›¸åï¼Œå¦‚æœä¸‹é‡‡æ ·æ˜¯æœ€å¤§æ±‡èšï¼ˆmax poolingï¼‰ï¼Œè¯¯å·®é¡¹$\\delta ^{(l+1,p)}$ä¸­æ¯ä¸ªå€¼éƒ½ä¼šä¼ é€’åˆ°ä¸Šä¸€å±‚å¯¹åº”åŒºåŸŸä¸­çš„æœ€å¤§å€¼æ‰€å¯¹åº”çš„ç¥ç»å…ƒï¼Œè¯¥åŒºåŸŸä¸­å…¶ä»–ä½ç½®çš„ç¥ç»å…ƒçš„è¯¯å·®éƒ½è®¾ä¸º0ï¼Œå¦‚æœä¸‹é‡‡æ ·æ˜¯å¹³å‡æ±‡èš(mean pooling) ,è¯¯å·®é¡¹ $\\delta ^{(l+1,p)}$ä¸­æ¯ä¸ªå€¼ä¼šè¢«å¹³å‡åˆ†é…åˆ°ä¸Šä¸€å±‚å¯¹åº”åŒºåŸŸä¸­çš„æ‰€æœ‰ç¥ç»å…ƒä¸Šã€‚\n\n---\n\n# å‡ ç§å…¸å‹çš„å·ç§¯ç¥ç»ç½‘ç»œ\n## LeNet-5\n\nLeNet-5 è™½ç„¶æå‡ºçš„æ—¶é—´æ¯”è¾ƒæ—©ï¼ˆLeCun et al., 1998ï¼‰ï¼Œä½†æ˜¯ä¸€ä¸ªéå¸¸æˆåŠŸçš„å·ç§¯ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œ90å¹´ä»£åœ¨è®¸å¤šé“¶è¡Œè¿›è¡Œä½¿ç”¨ï¼Œç”¨æ¥è¯†åˆ«æ‰‹å†™æ•°å­—ï¼Œå…¶ç½‘ç»œç»“æ„å¦‚ä¸‹ï¼š\n![LeNet-5](https://img-blog.csdnimg.cn/20190904141123853.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n## AlexNet\nAlexNetæ˜¯ç¬¬ä¸€ä¸ªç°ä»£æ·±åº¦å·ç§¯ç½‘ç»œæ¨¡å‹ï¼Œå…¶é¦–æ¬¡ä½¿ç”¨äº†ç°åœ¨æ·±åº¦å·ç§¯ç½‘ç»œçš„ä¸€äº›æŠ€å·§ï¼Œæ¯”å¦‚GPUå¹¶è¡Œè®­ç»ƒï¼Œé‡‡ç”¨ReLUä½œä¸ºéçº¿æ€§æ¿€æ´»å‡½æ•°ï¼Œä½¿ç”¨DropOuté˜²æ­¢è¿‡æ‹Ÿåˆï¼Œä½¿ç”¨æ•°æ®å¢å¼ºæ¥æé«˜æ¨¡å‹å‡†ç¡®ç‡ã€‚AlexNetè·å¾—äº†2012å¹´ImageNetå›¾åƒåˆ†ç±»æ¯”èµ›çš„å† å†›ï¼Œå…¶ç½‘ç»œç»“æ„å¦‚ä¸‹ï¼š\n![AlexNet](https://img-blog.csdnimg.cn/20190904141502612.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n## Inception\nåœ¨å·ç§¯ç½‘ç»œä¸­ï¼Œå¦‚ä½•å®šä¹‰ä¸€ä¸ªå·ç§¯çš„å¤§å°æ˜¯ä¸€ä¸ªååˆ†å…³é”®çš„é—®é¢˜ï¼Œåœ¨Inceptionç½‘ç»œä¸­ï¼Œä¸€ä¸ªå·ç§¯å±‚åŒ…å«å¤šä¸ªä¸åŒå¤§å°çš„å·ç§¯æ“ä½œï¼Œç§°ä¸ºInceptionæ¨¡å—ï¼Œ Inceptionç½‘ç»œæ˜¯ç”±å¤šä¸ªinceptionæ¨¡å—å’Œæ±‡èšå±‚å †å è€Œæˆã€‚\n\nInceptionæ¨¡å—åŒæ—¶ä½¿ç”¨1*1ï¼Œ3*3ï¼Œ5*5ç­‰å¤§å°ä¸åŒçš„å·ç§¯æ ¸ï¼Œå¹¶å°†å¾—åˆ°çš„ç‰¹å¾æ˜ å°„åœ¨æ·±åº¦ä¸Šæ‹¼æ¥ï¼ˆå †å ï¼‰èµ·æ¥ä½œä¸ºè¾“å‡ºç‰¹å¾æ˜ å°„ã€‚ä¸‹å›¾ç»™å‡ºäº†v1ç‰ˆæœ¬çš„inceptionæ¨¡å—ç»“æ„å›¾ï¼Œé‡‡ç”¨äº†4ç»„å¹³è¡Œçš„ç‰¹å¾æŠ½å–æ–¹å¼ï¼Œåˆ†åˆ«ä¸º1*1ï¼Œ3*3ï¼Œ5*5çš„å·ç§¯å’Œ3*3çš„æœ€å¤§æ±‡èšï¼ŒåŒæ—¶ä¸ºäº†æé«˜è®¡ç®—æ•ˆç‡ï¼Œå‡å°‘å‚æ•°æ•°é‡ï¼Œinceptionæ¨¡å—åœ¨è¿›è¡Œ3*3ï¼Œ5*5çš„å·ç§¯ä¹‹å‰ï¼Œ3*3çš„æœ€å¤§æ±‡èšä¹‹åï¼Œè¿›è¡Œä¸€æ¬¡1*1çš„å·ç§¯æ¥å‡å°‘ç‰¹å¾æ˜ å°„çš„æ·±åº¦ã€‚\n![v1ç‰ˆæœ¬çš„inceptionæ¨¡å—](https://img-blog.csdnimg.cn/20190904142716385.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nInceptionç½‘ç»œæœ€æ—©çš„v1ç‰ˆæœ¬å°±æ˜¯éå¸¸è‘—åçš„GoogleNetï¼Œè·å¾—äº†2014å¹´ImageNetå›¾åƒåˆ†ç±»ç«èµ›çš„å† å†›ã€‚å…¶ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š\n![GoogleLeNet](https://img-blog.csdnimg.cn/20190904142927193.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nå½“ç„¶Inceptionç½‘ç»œæœ‰å¤šä¸ªæ”¹è¿›ç‰ˆæœ¬ï¼Œæ¯”å¦‚Inception-v3ç½‘ç»œï¼ŒInception-ResNet v2ç½‘ç»œå’Œæ”¹è¿›ç‰ˆçš„Inception-v4æ¨¡å‹ã€‚\n\n## æ®‹å·®ç½‘ç»œ\næ®‹å·®ç½‘ç»œï¼ˆResidual Networkï¼ŒResNetï¼‰æ˜¯é€šè¿‡ç»™éå…ˆè¡Œçš„å·ç§¯å±‚å¢åŠ ç›´è¿è¾¹çš„æ–¹å¼æ¥æé«˜ä¿¡æ¯çš„ä¼ æ’­æ•ˆç‡ã€‚\n\nå‡è®¾åœ¨ä¸€ä¸ªæ·±åº¦ç½‘ç»œä¸­ï¼Œæˆ‘ä»¬æœŸæœ›ä¸€ä¸ªéçº¿æ€§å•å…ƒ$f(x,\\theta)$å»é€¼è¿‘ä¸€ä¸ªç›®æ ‡å‡½æ•°ä¸ºh(x)ã€‚å¦‚æœå°†ç›®æ ‡å‡½æ•°æ‹†åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šæ’ç­‰å‡½æ•°ï¼ˆIdentityï¼‰å’Œæ®‹å·®å‡½æ•°ï¼ˆReside Functionï¼‰h(x)-xã€‚\n\n$$\nh(x) = \\underset{IdentityFunc}{\\underbrace{x}} +( \\underset{ResidueFunc}{\\underbrace{h(x)-x}})\n$$\n\næ ¹æ®é€šç”¨è¿‘ä¼¼å®šç†ï¼Œä¸€ä¸ªç”±ç¥ç»ç½‘ç»œæ„æˆçš„éçº¿æ€§å•å…ƒæœ‰è¶³å¤Ÿçš„èƒ½åŠ›æ¥è¿‘ä¼¼é€¼è¿‘åŸå§‹ç›®æ ‡å‡½æ•°æˆ–æ®‹å·®å‡½æ•°ï¼Œä½†å®é™…ä¸­åè€…æ›´å®¹æ˜“è¡€è™šã€‚å› æ­¤åŸæ¥çš„ä¼˜åŒ–é—®é¢˜å¯ä»¥è½¬åŒ–ä¸ºï¼šè®©éçº¿æ€§å•å…ƒ$f(x,\\theta)$å»è¿‘ä¼¼æ®‹å·®h(x)-x,å¹¶ç”¨$f(x,\\theta) +x$å»é€¼è¿‘h(x)ã€‚\n\nä¸‹å›¾ç»™å‡ºäº†ä¸€ä¸ªå…¸å‹çš„æ®‹å·®å•å…ƒç¤ºä¾‹ï¼Œæ®‹å·®å•å…ƒç”±å¤šä¸ªçº§è”çš„ï¼ˆç­‰é•¿ï¼‰å·ç§¯å±‚å’Œä¸€ä¸ªè·¨å±‚çš„ç›´è¿è¾¹ç»„æˆï¼Œå†ç»è¿‡ReLUæ¿€æ´»åå¾—åˆ°è¾“å‡ºã€‚æ®‹å·®ç½‘ç»œå°±æ˜¯å°†å¾ˆå¤šä¸ªæ®‹å·®å•å…ƒä¸²è”èµ·æ¥æ„æˆçš„ä¸€ä¸ªéå¸¸æ·±çš„ç½‘ç»œã€‚\n![æ®‹å·®å•å…ƒç¤ºä¾‹](https://img-blog.csdnimg.cn/20190904144622317.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n---\n\n# å…¶ä»–å·ç§¯æ–¹å¼\n## è½¬ç½®å·ç§¯\næˆ‘ä»¬ä¸€èˆ¬é€šè¿‡å·ç§¯æ“ä½œæ¥å®æˆ˜é«˜ç»´ç‰¹å¾åˆ°ä½ç»´ç‰¹å¾çš„è½¬æ¢ï¼Œä½†åœ¨ä¸€äº›ä»»åŠ¡ä¸­éœ€è¦æŠŠä½ç»´ç‰¹å¾æ˜ å°„åˆ°é«˜ç»´ç‰¹å¾ï¼Œå¹¶ä¸”å¸Œæœ›é€šè¿‡å·ç§¯æ“ä½œæ¥å®ç°ã€‚\n\nå·ç§¯æ“ä½œå¯ä»¥é€šè¿‡ä»¿å°„å˜æ¢çš„å½¢å¼ã€‚å‡è®¾ä¸€ä¸ª5ç»´çš„å‘é‡xï¼Œç»è¿‡å¤§å°ä¸º3çš„å·ç§¯æ ¸w=[w1,w2,w2]^Tæ¥è¿›è¡Œå·ç§¯ï¼Œå¾—åˆ°3ç»´å‘é‡zï¼Œå·ç§¯æ“ä½œå¯ä»¥å†™ä¸ºï¼š\n\n![5ç»´å‘é‡xä¸å¤§å°ä¸º3çš„å·ç§¯æ ¸è¿›è¡Œå·ç§¯](https://img-blog.csdnimg.cn/20190904154849239.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nå…¶ä¸­Cæ˜¯ä¸€ä¸ªç¨€ç–çŸ©é˜µï¼Œå…¶éé›¶å…ƒç´ æ¥è‡ªäºå·ç§¯æ ¸wä¸­çš„å…ƒç´ ã€‚å¦‚æœå®ç°3ç»´å‘é‡zåˆ°5ç»´å‘é‡xçš„æ˜ å°„ï¼Œå¯ä»¥é€šè¿‡ä»¿å°„çŸ©é˜µè½¬ç½®æ¥å®ç°ã€‚\n\n![ä»¿å°„çŸ©é˜µè½¬ç½®](https://img-blog.csdnimg.cn/20190904155151517.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nå…¶ä¸­rot180(.)è¡¨ç¤ºæ—‹è½¬180åº¦ã€‚\n\n> æˆ‘ä»¬å°†ä½ç»´ç‰¹å¾æ˜ å°„åˆ°é«˜ç»´ç‰¹å¾çš„å·ç§¯æ“ä½œç§°ä¹‹ä¸ºè½¬ç½®å·ç§¯ï¼ˆTransposed Convolutionï¼‰ï¼Œä¹Ÿå«åè½¬å·ç§¯ï¼ˆDeconvolutionï¼‰ã€‚\n\n## ç©ºæ´å·ç§¯\n\nå¯¹äºä¸€ä¸ªå·ç§¯å±‚ï¼Œå¦‚æœå¸Œæœ›å¢åŠ è¾“å‡ºå•å…ƒçš„æ„Ÿå—é‡ï¼Œä¸€èˆ¬å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼å®ç°ï¼š\n- å¢åŠ å·ç§¯æ ¸çš„å¤§å°\n- å¢åŠ å±‚æ•°\n- åœ¨å·ç§¯ä¹‹å‰è¿›è¡Œæ±‡èšæ“ä½œ\n\nå‰ä¸¤ç§ä¼šå¢åŠ å‚æ•°æ•°é‡ï¼Œæœ€åä¸€ç§ä¼šä¸¢å¤±ä¸€äº›ä¿¡æ¯ã€‚\n\nç©ºæ´å·ç§¯ï¼ˆAtrous Convolutionï¼‰ä¹Ÿæˆä¸ºè†¨èƒ€å·ç§¯ï¼ˆDilated Convolutionï¼‰ï¼Œæ˜¯ä¸€ç§ä¸å¢åŠ å‚æ•°æ•°é‡ï¼ŒåŒæ—¶å¢åŠ è¾“å‡ºå•å…ƒæ„Ÿå—é‡çš„ä¸€ç§æ–¹æ³•ã€‚\n\nç©ºæ´å·ç§¯é€šè¿‡ç»™å·ç§¯æ ¸æ’å…¥â€œç©ºæ´â€æ¥å˜ç›¸çš„å¢åŠ å…¶å¤§å°ï¼Œå¦‚æœåœ¨å·ç§¯æ ¸çš„æ¯ä¸¤ä¸ªå…ƒç´ ä¹‹é—´æ’å…¥d-1ä¸ªç©ºæ´ï¼Œå·ç§¯æ ¸çš„æœ‰æ•ˆå¤§å°ç»´ï¼š\n$m'=m+ (m-1) * (d-1)$\nå…¶ä¸­dç§°ä¸ºè†¨èƒ€ç‡ï¼ˆDilation Rateï¼‰ã€‚å½“d=1æ—¶å·ç§¯æ ¸ç»´æ™®é€šçš„å·ç§¯æ ¸ã€‚\n![ä¸åŒè†¨èƒ€ç‡çš„å·ç§¯æ ¸](https://img-blog.csdnimg.cn/20190904160154440.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(1)-å‰é¦ˆç¥ç»ç½‘ç»œ","url":"/2019/04/23/æ·±åº¦å­¦ä¹ /å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ/å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(1)-å‰é¦ˆç¥ç»ç½‘ç»œ/","content":"\n\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/100943664\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\n\nè¯¥ç³»åˆ—çš„å…¶ä»–æ–‡ç« ï¼š\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(1)-å‰é¦ˆç¥ç»ç½‘ç»œ](https://blog.csdn.net/Gamer_gyt/article/details/89459131)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(2)-å·ç§¯ç¥ç»ç½‘ç»œ](https://blog.csdn.net/Gamer_gyt/article/details/100531593)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸Šç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/100600661)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸­ç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/100709422)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(3)-å¾ªç¯ç¥ç»ç½‘ç»œ(ä¸‹ç¯‡)](https://thinkgamer.blog.csdn.net/article/details/100943664)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œ(ä¸Šç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/103231385)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(4)-æ·±åº¦ä¿¡å¿µç½‘ç»œ(ä¸‹ç¯‡)](https://blog.csdn.net/Gamer_gyt/article/details/103437985)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸Šç¯‡ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/103754752)\n- [å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ(5)-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆä¸‹ç¯‡ï¼‰](https://blog.csdn.net/Gamer_gyt/article/details/103754752)\n\n\n> ç»™å®šä¸€ç»„ç¥ç»å…ƒï¼Œæˆ‘ä»¬å¯ä»¥ä»¥ç¥ç»å…ƒä¸ºèŠ‚ç‚¹æ¥æ„å»ºä¸€ä¸ªç½‘ç»œã€‚ä¸åŒçš„ç¥ç»ç½‘ç»œæ¨¡å‹æœ‰ç€ä¸åŒç½‘ç»œè¿æ¥çš„æ‹“æ‰‘ç»“æ„ã€‚ä¸€ç§æ¯”è¾ƒç›´æ¥çš„æ‹“æ‰‘ç»“æ„æ˜¯å‰é¦ˆç½‘ç»œã€‚å‰é¦ˆç¥ç»ç½‘ç»œï¼ˆFeedforward Neural Networkï¼ŒFNNï¼‰æ˜¯æœ€æ—©å‘æ˜çš„ç®€å•äººå·¥ç¥ç»ç½‘ç»œã€‚\n\n<!--More-->\n\n# ä»‹ç»\nåœ¨å‰é¦ˆç¥ç»ç½‘ç»œä¸­ï¼Œä¸åŒçš„ç¥ç»å…ƒå±äºä¸åŒçš„å±‚ï¼Œæ¯ä¸€å±‚çš„ç¥ç»å…ƒå¯ä»¥æ¥å—åˆ°å‰ä¸€å±‚çš„ç¥ç»å…ƒä¿¡å·ï¼Œå¹¶äº§ç”Ÿä¿¡å·è¾“å‡ºåˆ°ä¸‹ä¸€å±‚ã€‚ç¬¬0å±‚å«åšè¾“å…¥å±‚ï¼Œæœ€åä¸€å±‚å«åšè¾“å‡ºå±‚ï¼Œä¸­é—´çš„å«åšéšè—å±‚ï¼Œæ•´ä¸ªç½‘ç»œä¸­æ— åé¦ˆï¼Œä¿¡å·ä»è¾“å…¥å±‚åˆ°è¾“å‡ºå±‚å•å‘ä¼ æ’­ï¼Œå¯ç”¨ä¸€ä¸ªæœ‰ç”¨æ— ç¯å›¾è¡¨ç¤ºã€‚\n\nå‰é¦ˆç¥ç»ç½‘ç»œä¹Ÿæˆä¸ºå¤šå±‚æ„ŸçŸ¥å™¨ï¼ˆMutlti-Layer Perceptronï¼ŒMLPï¼‰ã€‚ä½†æ˜¯å¤šå±‚æ„ŸçŸ¥å™¨çš„å«æ³•å¹¶ä¸å‡†ç¡®ï¼Œå› ä¸ºå‰é¦ˆç¥ç»ç½‘ç»œå…¶å®æ˜¯ç”±å¤šå±‚Logisticå›å½’æ¨¡å‹ï¼ˆè¿ç»­çš„éçº¿æ€§æ¨¡å‹ï¼‰ç»„æˆï¼Œè€Œä¸æ˜¯æœ‰å¤šå±‚æ„ŸçŸ¥å™¨æ¨¡å‹ï¼ˆéè¿ç»­çš„éçº¿æ€§æ¨¡å‹ï¼‰ç»„æˆã€‚\n\nä¸‹å›¾ä¸ºç®€å•çš„å‰é¦ˆç¥ç»ç½‘ç»œå›¾ï¼š\n\n![å¤šå±‚å‰é¦ˆç¥ç»ç½‘ç»œ](https://img-blog.csdnimg.cn/20190422193716850.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nç¥ç»ç½‘ç»œä¸­æ¶‰åŠçš„å¤šä¸ªæ¦‚å¿µï¼š\n- Lï¼šè¡¨ç¤ºç¥ç»ç½‘ç»œçš„å±‚æ•°\n- m^lï¼šè¡¨ç¤ºç¬¬ l å±‚ç¥ç»å…ƒä¸ªæ•°\n- f_l(.)ï¼šè¡¨ç¤ºç¬¬ l å±‚ç¥ç»å…ƒçš„æ¿€æ´»å‡½æ•°\n- W^lï¼šè¡¨ç¤ºç¬¬ l-1 å±‚åˆ°ç¬¬ l å±‚çš„æƒé‡çŸ©é˜µ\n- b^lï¼šè¡¨ç¤ºç¬¬ l-1 å±‚åˆ°ç¬¬ l å±‚çš„åç½®\n- z^lï¼šè¡¨ç¤ºç¬¬ l å±‚ç¥ç»å…ƒçš„å‡€è¾“å…¥ï¼ˆå‡€æ´»æ€§å€¼ï¼‰\n- a^lï¼šè¡¨ç¤ºç¬¬lå±‚çš„ç¥ç»å…ƒè¾“å‡ºï¼ˆæ´»æ€§å€¼ï¼‰\n\nç¥ç»ç½‘ç»œçš„ä¿¡æ¯ä¼ æ’­å…¬å¼å¦‚ä¸‹ï¼ˆå…¬å¼1-1ï¼‰\n$$\nz^l  = W^l \\cdot a^{l-1} + b^l\n\\\\\na^l = f_l(z^l)\n$$\n\nå…¬å¼1-1ä¹Ÿå¯ä»¥åˆå¹¶å†™ä¸ºï¼ˆå…¬å¼1-2ï¼‰ï¼š\n$$\nz^l = W^l \\cdot f_{l-1}(z^{l-1}) + b^l\n$$\næˆ–è€…ï¼ˆå…¬å¼1-3ï¼‰\n$$\na^l = f_l(W^l \\cdot a^{l-1} + b^l)\n$$\nè¿™æ ·ç¥ç»ç½‘ç»œå¯ä»¥é€šè¿‡é€å±‚çš„ä¿¡æ¯ä¼ é€’ï¼Œå¾—åˆ°ç½‘ç»œæœ€åçš„è¾“å‡ºa^Lã€‚æ•´ä¸ªç½‘ç»œå¯ä»¥çœ‹åšä¸€ä¸ªç¬¦åˆå‡½æ•°\n$$\n\\phi (x; W,b)\n$$\nå°†å‘é‡xä½œä¸ºç¬¬ä¸€å±‚çš„è¾“å…¥a^0ï¼Œå°†ç¬¬ l å±‚çš„è¾“å…¥a^0ï¼Œå°†ç¬¬Lå±‚çš„è¾“å‡ºa^L ä½œä¸ºæ•´ä¸ªå‡½æ•°çš„è¾“å‡ºã€‚\n\n$$\nx = a^0 \\rightarrow z^1 \\rightarrow a^1 \\rightarrow z^2 .... \\rightarrow a^{L-1} \\rightarrow  z^L \\rightarrow  a^L = \\phi (x;W,b)\n$$\n\nå…¶ä¸­W, bè¡¨ç¤ºç½‘ç»œä¸­æ‰€æœ‰å±‚çš„è¿æ¥æƒé‡å’Œåç½®ã€‚\n\n# å‚æ•°å­¦ä¹ \nå¦‚æœé‡‡ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°ï¼Œå¯¹äºæ ·æœ¬(xï¼Œy)ï¼Œå…¶æŸå¤±å‡½æ•°ä¸ºï¼ˆå…¬å¼1-4ï¼‰ï¼š\n$$\nL(y,\\hat{y}) = -y^T log (\\hat{y})\n$$\nå…¶ä¸­ y å±äº{0,1}^Tä¸ºæ ‡ç­¾yå¯¹åº”çš„one-hotå‘é‡ã€‚\n\nç»™å®šè®­ç»ƒé›†D={(x^n,y^n)}, N >= n >=0ï¼Œå°†æ¯ä¸ªæ ·æœ¬x^nè¾“å…¥ç»™å‰é¦ˆç¥ç»ç½‘ç»œï¼Œå¾—åˆ°ç½‘ç»œè¾“å‡ºä¸ºy^nï¼Œå…¶åœ¨æ•°æ®é›†Dä¸Šçš„ç»“æ„åŒ–é£é™©å‡½æ•°ä¸ºï¼ˆå…¬å¼1-5ï¼‰ï¼š\n$$\nR(W,b)=\\frac{1}{N}\\sum_{n=1}^{N} L(y^n,\\hat{y}^n) + \\frac{1}{2}\\lambda \\left \\| W \\right \\|_F^2\n$$\nå…¶ä¸­Wå’Œbåˆ†åˆ«è¡¨ç¤ºç½‘ç»œä¸­æ‰€æœ‰çš„æƒé‡çŸ©é˜µå’Œåç½®å‘é‡ï¼Œ (||W||_F)^2æ˜¯æ­£åˆ™åŒ–é¡¹ï¼Œç”¨æ¥é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œlambdaæ˜¯ä¸ºæ­£æ•°çš„è¶…å‚æ•°ï¼Œlambdaè¶Šå¤§ï¼ŒWè¶Šæ¥è¿‘äº0ã€‚è¿™é‡Œçš„(||W||_F)^2ä¸€èˆ¬ä½¿ç”¨FrobeniusèŒƒæ•°ï¼š\n$$\n\\left \\| W \\right \\|_F^2= \\sum_{l=1}^{L} \\sum_{i=1}^{m^l} \\sum_{j=1}^{m^{l-1}} (W_{ij}^l)^2\n$$\næœ‰äº†å­¦ä¹ å‡†åˆ™å’Œè®­ç»ƒæ ·æœ¬ï¼Œç½‘ç»œå‚æ•°å¯ä»¥é€šè¿‡æ¢¯åº¦ä¸‹é™æ³•æ¥è¿›è¡Œå­¦ä¹ ã€‚åœ¨æ¢¯åº¦ä¸‹é™æ–¹æ³•çš„æ¯æ¬¡è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œç¬¬lå±‚çš„å‚æ•° W^l å’Œ b^l å‚æ•°æ›´æ–°æ–¹å¼ä¸ºï¼ˆå…¬å¼1-6ï¼‰ï¼š\n$$\nW^l \\leftarrow W^l - \\alpha \\frac{\\partial R(W,b)}{\\partial W^l}\n=W^l - \\alpha ( \\frac{1}{N} \\sum_{n=1}^{N}(\\frac{\\partial L(y^n,\\hat{y}^n)}{\\partial W^l}) + \\lambda W^l )\n\\\\\nb^l \\leftarrow b^l - \\alpha \\frac{\\partial R(W,b)}{\\partial b^l}\n=b^l - \\alpha ( \\frac{1}{N} \\sum_{n=1}^{N}(\\frac{\\partial L(y^n,\\hat{y}^n)}{\\partial b^l}) )\n$$\n\nå…¶ä¸­alphaä¸ºå­¦ä¹ å‚æ•°ã€‚\n\næ¢¯åº¦ä¸‹é™æ³•éœ€è¦è®¡ç®—æŸå¤±å‡½æ•°å¯¹å‚æ•°çš„åå¯¼æ•°ï¼Œå¦‚æœé€šè¿‡é“¾å¼æ³•åˆ™é€ä¸€å¯¹æ¯ä¸ªå‚æ•°è¿›è¡Œæ±‚åå¯¼æ•ˆç‡æ¯”è¾ƒä½ã€‚åœ¨ç¥ç»ç½‘ç»œçš„è®­ç»ƒä¸­ç»å¸¸ä½¿ç”¨åå‘ä¼ æ’­ç®—æ³•æ¥é«˜æ•ˆçš„è®¡ç®—æ¢¯åº¦ã€‚\n\n# åå‘ä¼ æ’­ç®—æ³•\n\nåŸºäºè¯¯å·®çš„åå‘ä¼ æ’­ç®—æ³•ï¼ˆbackpropagationï¼ŒBPï¼‰çš„å‰é¦ˆç¥ç»ç½‘ç»œè®­ç»ƒè¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰æ­¥ï¼š\n- å‰é¦ˆè®¡ç®—æ¯ä¸€å±‚çš„å‡€è¾“å…¥z^l  å’Œæ¿€æ´»å€¼ a^lï¼Œç›´åˆ°æœ€åä¸€å±‚\n- åå‘ä¼ æ’­è®¡ç®—æ¯ä¸€å±‚çš„è¯¯å·®é¡¹\n- è®¡ç®—æ¯ä¸€å±‚å‚æ•°çš„åå¯¼æ•°ï¼Œå¹¶æ›´æ–°å‚æ•°\n\nå…¶å…·ä½“è®­ç»ƒè¿‡ç¨‹å¦‚ä¸‹ï¼š\n\n![image](https://img-blog.csdnimg.cn/20190423152427560.png)\n\n# è‡ªåŠ¨æ¢¯åº¦è®¡ç®—\nç¥ç»ç½‘ç»œä¸­çš„å‚æ•°ä¸»è¦æ˜¯é€šè¿‡æ¢¯åº¦ä¸‹é™æ¥è¿›è¡Œä¼˜åŒ–çš„ã€‚å½“ç¡®å®šäº†é£é™©å‡½æ•°åŠç½‘ç»œç»“æ„åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰‹åŠ¨ç”¨é“¾å¼æ³•åˆ™æ¥è®¡ç®—é£é™©å‡½æ•°å¯¹æ¯ä¸ªå‚æ•°çš„æ¢¯åº¦ï¼Œå¹¶ç”¨ä»£ç è¿›è¡Œå®ç°ã€‚\n\nç›®å‰å‡ ä¹æ‰€æœ‰çš„æ·±åº¦å­¦ä¹ æ¡†æ¶éƒ½åŒ…å«äº†è‡ªåŠ¨æ¢¯åº¦è®¡ç®—çš„åŠŸèƒ½ï¼Œåœ¨ä½¿ç”¨æ¡†æ¶è¿›è¡Œç¥ç»ç½‘ç»œå¼€å‘æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦è€ƒè™‘ç½‘ç»œçš„ç»“æ„å¹¶ç”¨ä»£ç å®ç°ï¼Œå…¶æ¢¯åº¦å¯ä»¥è‡ªåŠ¨è¿›è¡Œè®¡ç®—ï¼Œæ— éœ€äººå·¥å¹²é¢„ï¼Œè¿™æ ·å¼€å‘æ•ˆç‡å°±å¤§å¤§æé«˜äº†ã€‚\n\nè‡ªåŠ¨æ¢¯åº¦è®¡ç®—æ–¹æ³•åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼š\n\n## æ•°å€¼å¾®åˆ†\næ•°å€¼å¾®åˆ†ï¼ˆNumerical Differentiationï¼‰æ˜¯ç”¨æ•°å€¼æ–¹æ³•è®¡ç®—å‡½æ•°f(x)çš„å¯¼æ•°ã€‚å‡½æ•°f(x)çš„ç‚¹xçš„å¯¼æ•°å®šä¹‰ä¸ºï¼š\n$$\nf'(x) = \\underset{\\Delta x \\rightarrow 0}{ lim } \\frac{ f(x + \\Delta x) -f(x) }{ \\Delta x }\n$$\nè¦è®¡ç®—f(x)åœ¨ç‚¹xçš„å¯¼æ•°ï¼Œå¯ä»¥å¯¹xåŠ ä¸Šä¸€ä¸ªå¾ˆå°‘çš„éé›¶æ‰°åŠ¨ï¼Œç„¶åé€šè¿‡ä¸Šè¿°å®šä¹‰æ¥ç›´æ¥è®¡ç®—å‡½æ•°f(x)çš„æ¢¯åº¦ã€‚æ•°å€¼å¾®åˆ†æ–¹æ³•éå¸¸å®¹æ˜“å®ç°ï¼Œä½†æ‰¾åˆ°ä¸€ä¸ªåˆé€‚æ‰°åŠ¨éå¸¸éš¾ï¼Œå¦‚æœæ‰°åŠ¨è¿‡å°ä¼šå¼•èµ·æ•°å€¼è®¡ç®—é—®é¢˜ï¼Œæ¯”å¦‚**èˆå…¥è¯¯å·®**ï¼›å¦‚æœæ‰°åŠ¨è¿‡å¤§ï¼Œä¼šå¢åŠ **æˆªæ–­è¯¯å·®**ï¼Œä½¿å¾—å¯¼æ•°è®¡ç®—ä¸å‡†ç¡®ï¼Œå› æ­¤æ•°å€¼å¾®åˆ†çš„å®ç”¨æ€§æ¯”è¾ƒå·®ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¸¸ç”¨ä»¥ä¸‹å…¬å¼æ¥è®¡ç®—æ¢¯åº¦å¯ä»¥å‡å°‘æˆªæ–­è¯¯å·®ã€‚\n$$\nf'(x) = \\underset{\\Delta x \\rightarrow 0}{ lim } \\frac{ f(x + \\Delta x) -f(x -\\Delta x) }{2 \\Delta x }\n$$\n- èˆå…¥è¯¯å·®ï¼šæ˜¯æŒ‡æ•°å€¼è®¡ç®—ä¸­ç”±äºæ•°å­—èˆå…¥é€ æˆçš„è¿‘ä¼¼å€¼å’Œç²¾ç¡®å€¼ä¹‹é—´çš„å·®å¼‚ï¼Œæ¯”å¦‚ç”¨æµ®ç‚¹æ•°æ¥è¡¨ç¤ºå®æ•°ã€‚\n- æˆªæ–­è¯¯å·®ï¼šæ•°å­¦æ¨¡å‹çš„ç†è®ºè§£ä¸æ•°å€¼è®¡ç®—é—®é¢˜çš„ç²¾ç¡®è§£ä¹‹é—´çš„è¯¯å·®\n\n\n## ç¬¦å·å¾®åˆ†\nç¬¦å·å¾®åˆ†ï¼ˆSymbolic Differentiationï¼‰æ˜¯ä¸€ç§åŸºäºç¬¦å·è®¡ç®—çš„è‡ªåŠ¨æ±‚å¯¼æ–¹æ³•ã€‚ç¬¦å·è®¡ç®—ï¼Œä¹Ÿå«ä»£æ•°è®¡ç®—ï¼Œæ˜¯æŒ‡ç”¨è®¡ç®—æœºæ¥å¤„ç†å¸¦æœ‰å˜é‡çš„æ•°å­¦è¡¨è¾¾å¼ã€‚\n\nç¬¦å·è®¡ç®—çš„è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯æ•°å­¦è¡¨è¾¾å¼çš„åŒ–ç®€ã€å› å¼åˆ†è§£ã€å¾®åˆ†ã€ç§¯åˆ†ã€è§£ä»£æ•°æ–¹ç¨‹ã€æ±‚è§£å¸¸å¾®åˆ†æ–¹ç¨‹ç­‰è¿ç®—ã€‚\n\næ¯”å¦‚æ•°å­¦è¡¨è¾¾å¼çš„åŒ–ç®€\n- è¾“å…¥ï¼š3x-x+2x+1\n- è¾“å‡ºï¼š4x+1\n\nç¬¦å·è®¡ç®—ä¸€èˆ¬æ¥è®²æ˜¯å¯¹è¾“å…¥çš„è¡¨è¾¾å¼ï¼Œé€šè¿‡è¿­ä»£æˆ–é€’å½’ä½¿ç”¨ä¸€äº›äº‹å…ˆå®šä¹‰çš„è§„åˆ™è¿›è¡Œè½¬æ¢ã€‚å½“è½¬æ¢ç»“æœä¸èƒ½å†ç»§ç»­ä½¿ç”¨å˜æ¢è§„åˆ™æ—¶ï¼Œä¾¿åœæ­¢è®¡ç®—ã€‚\n\n## è‡ªåŠ¨å¾®åˆ†\nè‡ªåŠ¨å¾®åˆ†ï¼ˆAutomatic Differentiationï¼ŒADï¼‰æ˜¯ä¸€ç§å¯ä»¥å¯¹ä¸€ä¸ªï¼ˆç¨‹åºï¼‰å‡½æ•°è¿›è¡Œè®¡ç®—å¯¼æ•°çš„æ–¹æ³•ã€‚ç¬¦å·å¾®åˆ†çš„å¤„ç†å¯¹è±¡æ˜¯æ•°å­¦è¡¨è¾¾å¼ï¼Œè€Œè‡ªåŠ¨å¾®åˆ†çš„å¤„ç†å¯¹è±¡æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–ä¸€æ®µç¨‹åºã€‚è€Œè‡ªåŠ¨å¾®åˆ†å¯ä»¥ç›´æ¥åœ¨åŸå§‹ç¨‹åºä»£ç è¿›è¡Œå¾®åˆ†ã€‚è‡ªåŠ¨å¾®åˆ†çš„åŸºæœ¬åŸç†æ˜¯æ‰€æœ‰çš„æ•°å€¼è®¡ç®—å¯ä»¥åˆ†è§£ä¸ºä¸€äº›åŸºæœ¬æ“ä½œï¼ŒåŒ…å«+,âˆ’,Ã—, / å’Œä¸€äº›åˆç­‰å‡½æ•°exp, log, sin, cos ç­‰ã€‚\n\nè‡ªåŠ¨å¾®åˆ†ä¹Ÿæ˜¯åˆ©ç”¨é“¾å¼æ³•åˆ™æ¥è‡ªåŠ¨è®¡ç®—ä¸€ä¸ªå¤åˆå‡½æ•°çš„æ¢¯åº¦ã€‚æˆ‘ä»¬ä»¥ä¸€ä¸ªç¥ç»ç½‘ç»œä¸­å¸¸è§çš„å¤åˆå‡½æ•°çš„ä¾‹å­æ¥è¯´æ˜è‡ªåŠ¨å¾®åˆ†çš„è¿‡ç¨‹ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œä»¤å¤åˆå‡½æ•°f(x;w, b) ä¸º\n\n$$\nf(x;w,b)=\\frac{1}{ exp(-(wx+b))+1 }\n$$\nå…¶ä¸­x ä¸ºè¾“å…¥æ ‡é‡ï¼Œwå’Œb åˆ†åˆ«ä¸ºæƒé‡å’Œåç½®å‚æ•°ã€‚\n\nå¤åˆå‡½æ•°f(x;w,b) å¯ä»¥æ‹†è§£ä¸ºï¼š\n\n![image](https://img-blog.csdnimg.cn/20190423161240321.png)\n\nç»§è€Œå°±å¯ä»¥é€šè¿‡é“¾å¼æ±‚å¯¼æ³•åˆ™è¿›è¡Œå¤åˆå‡½æ•°æ±‚å¯¼ã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["å¸¸è§çš„äº”ç§ç¥ç»ç½‘ç»œ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ç¥ç»ç½‘ç»œä¸­çš„æ¿€æ´»å‡½æ•°ä»‹ç»","url":"/2019/04/21/æ·±åº¦å­¦ä¹ /ç¥ç»ç½‘ç»œç¬”è®°/ç¥ç»ç½‘ç»œä¸­çš„æ¿€æ´»å‡½æ•°ä»‹ç»/","content":"\n> äººå·¥ç¥ç»å…ƒï¼ˆArtifical Neuronï¼‰ç®€ç§°ç¥ç»å…ƒï¼ˆNeuronï¼‰ï¼Œæ˜¯æ„æˆç¥ç»ç½‘ç»œçš„åŸºæœ¬å•å…ƒï¼Œå…¶ä¸»è¦æ˜¯æ¨¡æ‹Ÿç”Ÿç‰©ç¥ç»å…ƒçš„ç»“æ„å’Œç‰¹æ€§ï¼Œæ¥å—ä¸€ç»„è¾“å…¥ä¿¡æ¯å¹¶äº§å‡ºè¾“å‡ºã€‚\n\n<!--More-->\n\n# æ¿€æ´»å‡½æ•°ï¼ˆActivation Functionï¼‰\n\næ˜¯ç¥ç»å…ƒä¸­éå¸¸é‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œä¸ºäº†å¢å¼ºç½‘ç»œçš„è¡¨ç¤ºèƒ½åŠ›å’Œå­¦ä¹ èƒ½åŠ›ï¼Œæ¿€æ´»å‡½æ•°éœ€è¦å…·å¤‡ä»¥ä¸‹å‡ ç‚¹æ€§è´¨ï¼š\n- è¿ç»­å¹¶å¯å¯¼çš„éçº¿æ€§å‡½æ•°ï¼Œå¯å¯¼çš„æ¿€æ´»å‡½æ•°å¯ä»¥ç›´æ¥åˆ©ç”¨æ•°å€¼ä¼˜åŒ–çš„æ–¹æ³•æ¥å­¦ä¹ ç½‘ç»œå‚æ•°ã€‚\n- æ¿€æ´»å‡½æ•°åŠå…¶å¯¼å‡½æ•°è¦å°½å¯èƒ½çš„ç®€å•ï¼Œæœ‰åˆ©äºæé«˜ç½‘ç»œè®¡ç®—æ•ˆç‡ã€‚\n- æ¿€æ´»å‡½æ•°çš„å¯¼å‡½æ•°çš„å€¼åŸŸè¦åœ¨ä¸€ä¸ªåˆé€‚çš„åŒºé—´å†…ï¼Œä¸èƒ½å¤ªå¤§ä¹Ÿä¸èƒ½å¤ªå°ï¼Œå¦åˆ™ä¼šå½±å“è®­ç»ƒçš„æ•ˆç‡å’Œæ¸©åº¦æ€§ã€‚\n\n## Sigmoidå‹æ¿€æ´»å‡½æ•°\n\nSå‹æ›²çº¿å‡½æ•°ï¼Œå¸¸è§çš„Sigmoidå‡½æ•°æœ‰Logisticå‡½æ•°å’Œtanhå‡½æ•°ã€‚\n\n> çŸ¥è¯†ç‚¹ï¼šå¯¹äºå‡½æ•°f(x)ï¼Œè‹¥xè¶‹å‘äºè´Ÿæ— ç©·å¤§ï¼Œå…¶å¯¼æ•°f'(x)è¶‹å‘äº0ï¼Œåˆ™ç§°å…¶ä¸ºå·¦é¥±å’Œã€‚è‹¥xè¶‹å‘äºæ­£æ— ç©·å¤§ï¼Œå…¶å¯¼æ•°f'(x)è¶‹å‘äº0ï¼Œåˆ™ç§°å…¶ä¸ºå³é¥±å’Œã€‚åŒæ—¶æ»¡è¶³å·¦å³é¥±å’Œæ—¶ï¼Œç§°ä¸ºä¸¤ç«¯é¥±å’Œã€‚\n\n- Logistic å‡½æ•°\n$$\n\\sigma (x) = \\frac{1} { 1+ exp(-x)}\n$$\n- tanhå‡½æ•°\n    \n$$\ntanh(x) = \\frac{ exp(x)-exp(-x) }{ exp(x) + exp(-x) }\n$$\n\ntanhå‡½æ•°å¯ä»¥çœ‹ä½œæ˜¯æ”¾å¤§å¹¶å¹³ç§»çš„Logisticå‡½æ•°ï¼Œå…¶å€¼åŸŸæ˜¯(-1ï¼Œ1)ã€‚\n$$\ntanh(x) = 2 \\sigma(2x) - 1\n$$\n\ntanhå‡½æ•°çš„è¾“å‡ºæ˜¯é›¶ä¸­å¿ƒåŒ–çš„ï¼ˆZero-Centeredï¼‰ï¼Œè€ŒLogisticå‡½æ•°çš„è¾“å‡ºå€¼æ’å¤§äº0ã€‚éé›¶ä¸­å¿ƒåŒ–çš„è¾“å‡ºä¼šä½¿å¾—æœ€åä¸€å±‚çš„ç¥ç»å…ƒçš„è¾“å…¥å‘ç”Ÿä½ç½®åç§»ï¼ˆBias Shiftï¼‰ï¼Œå¹¶è¿›ä¸€æ­¥ä½¿å¾—æ¢¯åº¦ä¸‹é™çš„æ”¶æ•›é€Ÿåº¦å˜æ…¢ã€‚\n\n![image](https://img-blog.csdnimg.cn/2019042122140374.jpg)\n\n\n## ä¿®æ­£çº¿æ€§å•å…ƒ\nRectified Linear Unitï¼ˆReLUï¼‰ä¹Ÿå«rectifierå‡½æ•°ï¼Œæ˜¯ç›®å‰æ·±å±‚ç¥ç»ç½‘ç»œä¸­ç»å¸¸ä½¿ç”¨çš„æ¿€æ´»å‡½æ•°ã€‚ReLUå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ–œå¡å‡½æ•°ï¼Œå®šä¹‰ä¸ºï¼š\n$$\nReLU(x) = \\begin{cases}\nx & \\text{ if } x \\geq 0 \\\\ \n0 & \\text{ if } x < 0\n\\end{cases}\n= max(0,x)\n$$\n\n---\n\nReLUçš„ä¼˜ç¼ºç‚¹ï¼š\n- ä¼˜ç‚¹\n> é‡‡ç”¨ReLUçš„ç¥ç»å…ƒåªéœ€è¦è¿›è¡ŒåŠ ï¼Œä¹˜ï¼Œå’Œï¼Œæ¯”è¾ƒçš„æ“ä½œï¼Œè®¡ç®—ä¸Šæ›´åŠ é«˜æ•ˆã€‚Sigmoidå‹æ¿€æ´»å‡½æ•°ä¼šå¯¼è‡´ä¸€ä¸ªéç¨€ç–çš„ç¥ç»ç½‘ç»œï¼Œè€ŒReLUå´å…·æœ‰å¾ˆå¥½çš„ç¨€ç–æ€§ï¼Œå¤§çº¦50%çš„ç¥ç»å…ƒä¼šå¤„äºæ¿€æ´»çŠ¶æ€ã€‚\n\n> åœ¨ä¼˜åŒ–æ–¹é¢ï¼Œç”±äºSigmoidå‹å‡½æ•°çš„ä¸¤ç«¯é¥±å’Œï¼ŒReLUå‡½æ•°ä¸ºå·¦é¥±å’Œå‡½æ•°ï¼Œä¸”åœ¨x>0æ—¶å¯¼æ•°ä¸º1ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£äº†ç¥ç»ç½‘ç»œçš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼ŒåŠ é€Ÿæ¢¯åº¦ä¸‹é™çš„æ”¶æ•›é€Ÿåº¦ã€‚\n\n- ç¼ºç‚¹\n> ReLUçš„è¾“å‡ºæ˜¯éé›¶ä¸­å¿ƒåŒ–çš„ï¼Œç»™åä¸€å±‚çš„ç¥ç»ç½‘ç»œå¼•å…¥åç½®åç§»ï¼Œä¼šå½±å“æ¢¯åº¦ä¸‹é™çš„æ•ˆç‡ã€‚æ­¤å¤–ReLUç¥ç»å…ƒåœ¨è®­ç»ƒæ—¶æ¯”è¾ƒå®¹æ˜“æ­»äº¡ã€‚åœ¨è®­ç»ƒæ—¶ï¼Œå¦‚æœå‚æ•°åœ¨ä¸€æ¬¡ä¸æ°å½“çš„æ›´æ–°åï¼Œç¬¬ä¸€ä¸ªéšè—å±‚ä¸­çš„æŸä¸ªReLUç¥ç»å…ƒåœ¨æ‰€æœ‰çš„è®­ç»ƒæ•°æ®ä¸Šéƒ½ä¸èƒ½è¢«æ¿€æ´»ï¼Œé‚£ä¹ˆè¿™ä¸ªç¥ç»å…ƒè‡ªèº«å‚æ•°çš„æ¢¯åº¦æ°¸è¿œéƒ½ä¼šæ˜¯0ï¼Œåœ¨ä»¥åçš„è®­ç»ƒè¿‡ç¨‹ä¸­æ°¸è¿œä¸èƒ½è¢«æ¿€æ´»ã€‚è¿™ç§ç°è±¡ç§°ä¸ºæ­»äº¡ReLUé—®é¢˜ï¼ˆDying ReLU Problemï¼‰ï¼Œå¹¶ä¸”ä¹Ÿæœ‰kennelä¼šå‘ç”Ÿåœ¨å…¶ä»–éšè—å±‚ã€‚\n\n---\nåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œä¸ºäº†é¿å…ä¸Šè¿°æƒ…å†µï¼Œæœ‰é›†ä¸­ReLUçš„å˜ç§ä¹Ÿä¼šè¢«å¹¿æ³›ä½¿ç”¨ã€‚\n\n### å¸¦æ³„æ¼çš„ReLU\nå¸¦æ³„æ¼çš„ReLUåœ¨è¾“å…¥x<0æ—¶ï¼Œä¿æŒä¸€ä¸ªå¾ˆå°çš„æ¢¯åº¦ lambdaã€‚è¿™æ ·å½“ç¥ç»å…ƒéæ¿€æ´»æ—¶ä¹Ÿèƒ½åˆä¸€ä¸ªéé›¶çš„æ¢¯åº¦å¯ä»¥æ›´æ–°å‚æ•°ï¼Œé¿å…æ°¸è¿œä¸èƒ½è¢«æ¿€æ´»ã€‚å¸¦æ³„æ¼çš„ReLUçš„å®šä¹‰å¦‚ä¸‹ï¼š\n$$\nLeakyReLU(x) = \\begin{cases}\nx & \\text{ if } x > 0 \\\\ \n\\gamma x & \\text{ if } x  \\leq 0\n\\end{cases}\n= max(0,x) + \\gamma min(0,x)\n$$\nå…¶ä¸­ gammaæ˜¯ä¸€ä¸ªå¾ˆå°çš„å¸¸æ•°ï¼Œæ¯”å¦‚0.01ã€‚å½“gamma < 1æ—¶ï¼Œå¸¦æ³„æ¼çš„ReLUä¹Ÿå¯ä»¥å†™ä¸ºï¼š\n$$\nLeakyReLU(x) = max(x, \\gamma x)\n$$\nç›¸å½“äºæ˜¯ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„maxoutå•å…ƒã€‚\n\n### å¸¦å‚æ•°çš„ReLU\n\nå¸¦å‚æ•°çš„ReLUå¼•å…¥ä¸€ä¸ªå¯å­¦ä¹ çš„å‚æ•°ï¼Œä¸åŒç¥ç»å…ƒå¯ä»¥æœ‰ä¸åŒçš„å‚æ•°ï¼Œå¯¹äºç¬¬iä¸ªç¥ç»å…ƒï¼Œå…¶PReLUçš„å®šä¹‰ä¸ºï¼š\n\n$$\nPReLU(x) = \\begin{cases}\nx & \\text{ if } x > 0 \\\\ \n\\gamma _ix & \\text{ if } x  \\leq 0\n\\end{cases}\n= max(0,x) + \\gamma_imin(0,x)\n$$\nå…¶ä¸­Î³iä¸ºxâ‰¤0æ—¶å‡½æ•°çš„æ–œç‡ã€‚å› æ­¤ï¼ŒPReLUæ˜¯éé¥±å’Œå‡½æ•°ã€‚å¦‚æœÎ³i =0ï¼Œé‚£ ä¹ˆ PReLU å°±é€€åŒ–ä¸º ReLUã€‚å¦‚æœ Î³i ä¸ºä¸€ä¸ªå¾ˆå°çš„å¸¸æ•°ï¼Œåˆ™ PReLU å¯ä»¥çœ‹ä½œå¸¦ æ³„éœ²çš„ ReLUã€‚PReLU å¯ä»¥å…è®¸ä¸åŒç¥ç»å…ƒå…·æœ‰ä¸åŒçš„å‚æ•°ï¼Œä¹Ÿå¯ä»¥ä¸€ç»„ç¥ç» å…ƒå…±äº«ä¸€ä¸ªå‚æ•°ã€‚\n\n---\n\n### ELU\næŒ‡æ•°çº¿æ€§å•å…ƒï¼ˆExponential Linear Unitï¼‰æ˜¯ä¸€ä¸ªè¿‘ä¼¼çš„é›¶ä¸­å¿ƒåŒ–çš„éçº¿æ€§å‡½æ•°ï¼Œå…¶å®šä¹‰ä¸ºï¼š\n$$\nELU(x) = \\begin{cases}\nx & \\text{ if } x > 0 \\\\ \n\\gamma (exp(x)-1) & \\text{ if } x  \\leq 0\n\\end{cases}\n= max(0,x) + min(0,\\gamma(exp(x)-1))\n$$\nå…¶ä¸­ Î³ â‰¥ 0æ˜¯ä¸€ä¸ªè¶…å‚æ•°ï¼Œå†³å®šx â‰¤ 0æ—¶çš„é¥±å’Œæ›²çº¿ï¼Œå¹¶è°ƒæ•´è¾“å‡ºå‡å€¼åœ¨0é™„\nè¿‘ã€‚\n\n---\n\n#### Softpluså‡½æ•°\nSoftpluså‡½æ•°å¯ä»¥çœ‹ä½œæ˜¯rectifierå‡½æ•°çš„å¹³æ»‘ç‰ˆæœ¬ï¼Œå…¶å®šä¹‰ä¸ºï¼š\n$$\nSoftplus(x) = log(1 + exp(x))\n$$\nSoftpluså‡½æ•°åŠå…¶å¯¼æ•°åˆšå¥½æ˜¯Logisticå‡½æ•°ã€‚Softpluså‡½æ•°è™½ç„¶ä¹Ÿå…·æœ‰å•ä¾§æŠ‘åˆ¶ï¼Œå®½å…´å¥‹è¾¹ç•Œçš„ç‰¹å¾ï¼Œå´æ²¡æœ‰ç¨€ç–æ¿€æ´»æ€§ã€‚\n\nä¸‹å›¾ä¸ºå‡ ç§æ¿€æ´»å‡½æ•°çš„ç¤ºä¾‹ï¼š\n\n![æ¿€æ´»å‡½æ•°å¯¹æ¯”](https://img-blog.csdnimg.cn/20190421213409642.jpg)\n\n## Swishå‡½æ•°\n\nSwishå‡½æ•°æ˜¯ä¸€ç§è‡ªé—¨æ§ï¼ˆself-Gatedï¼‰æ¿€æ´»å‡½æ•°ï¼Œå…¶å®šä¹‰ä¸ºï¼š\n$$\nswish(x) = x \\sigma (\\beta x)\n$$\nå…¶ä¸­ sigma(.)ä¸ºlogisticå‡½æ•°ï¼Œbetaä¸ºå¯å­¦ä¹ çš„å‚æ•°æˆ–ä¸€ä¸ªå›ºå®šè¶…å‚æ•°ã€‚ sigma(.) å±äº (0,1)å¯ä»¥çœ‹åšæ˜¯ä¸€ç§è½¯æ€§çš„é—¨æ§æœºæ„ã€‚å½“sigma(beta x)æ¥è¿‘äº1æ—¶ï¼Œé—¨å¤„äºâ€œå¼€â€çŠ¶æ€ï¼Œæ¿€æ´»å‡½æ•°çš„è¾“å‡ºè¿‘ä¼¼äºxæœ¬èº«ï¼›å½“sigma(beta x)æ¥è¿‘äº0æ—¶ï¼Œé—¨çš„çŠ¶æ€ä¸ºâ€œå…³â€ï¼Œæ¿€æ´»å‡½æ•°çš„è¾“å‡ºè¿‘ä¼¼äº0ã€‚\n\nä¸‹å›¾ä¸ºSwishå‡½æ•°çš„ç¤ºä¾‹ï¼š\n![image](https://img-blog.csdnimg.cn/20190421214743755.jpg)\n\nå½“ beta=0æ—¶ï¼ŒSwishå‡½æ•°å˜æˆçº¿æ€§å‡½æ•° x/2ã€‚ å½“ beta=1æ—¶ï¼ŒSwish å‡½æ•°åœ¨ x>0æ—¶è¿‘ä¼¼çº¿æ€§ï¼Œåœ¨x < 0æ—¶è¿‘ä¼¼é¥±å’Œï¼ŒåŒæ—¶å…·æœ‰ä¸€å®šçš„éå•è°ƒæ€§ã€‚å½“betaè¶‹å‘äºæ­£æ— ç©·å¤§æ—¶ï¼Œ sigma(beta x)è¶‹å‘äºç¦»æ•£çš„0-1å‡½æ•°ï¼ŒSwitchå‡½æ•°è¿‘ä¼¼ä¸ºReLUå‡½æ•°ã€‚\n\nå› æ­¤Swishå‡½æ•°å¯ä»¥çœ‹ä½œæ—¶çº¿æ€§å‡½æ•°å’ŒReLUå‡½æ•°ä¹‹é—´çš„éçº¿æ€§æ’å€¼å‡½æ•°ï¼Œå…¶ç¨‹åº¦ç”±å‚æ•°betaæ§åˆ¶ã€‚\n\n---\n\n### Maxoutå•å…ƒ\nMaxoutå•å…ƒä¹Ÿæ˜¯ä¸€ç§åˆ†æ®µçº¿æ€§å‡½æ•°ã€‚Sigmoidå‹å‡½æ•°ï¼Œ ReLUç­‰æ¿€æ´»å‡½æ•°çš„è¾“å…¥æ˜¯ç¥ç»å…ƒçš„å‡€è¾“å…¥zï¼Œæ˜¯ä¸€ä¸ªæ ‡é‡ã€‚è€Œmaxoutå•å…ƒçš„è¾“å…¥æ˜¯ä¸Šä¸€å±‚ç¥ç»å…ƒçš„å…¨éƒ¨åŸå§‹è¾“å…¥ï¼Œæ˜¯ä¸€ä¸ªå‘é‡x=[x1;x2;...;x_d]ã€‚\n\næ¯ä¸ªmaxoutå•å…ƒæœ‰Kä¸ªæƒé‡å‘é‡w_k å±äº R^d å’Œåç½® b_kï¼ˆ1 <= k <= Kï¼‰ã€‚å¯¹äºè¾“å…¥xï¼Œå¯ä»¥å¾—åˆ°Kä¸ªå‡€è¾“å…¥z_kï¼Œ1 <= k <=Kã€‚\n$$\nz_k = w^T_kx + b_k\n$$\nå…¶ä¸­\n$$\nw_k = [w_{k,1},w_{k,2},...,w_{k,d}]^T\n$$\nä¸ºç¬¬kä¸ªæƒé‡å‘é‡ã€‚\nMaxoutå•å…ƒçš„éçº¿æ€§å‡½æ•°å®šä¹‰ä¸ºï¼š\n$$\nmaxout(x) = \\underset{k\\in [1,K]}{max} (z_k)\n$$\nMaxoutå•å…ƒä¸å•æ˜¯å‡€è¾“å…¥åˆ°è¾“å‡ºä¹‹é—´çš„éçº¿æ€§æ˜ å°„ï¼Œè€Œæ˜¯æ•´ä½“å­¦ä¹ è¾“å…¥åˆ°è¾“å‡ºä¹‹é—´çš„éçº¿æ€§æ˜ å°„å…³ç³»ã€‚Maxoutæ¿€æ´»å‡½æ•°å¯ä»¥çœ‹ä½œä»»æ„å‡¸å‡½æ•°çš„åˆ†æ®µçº¿æ€§è¿‘ä¼¼ï¼Œå¹¶ä¸”åœ¨æœ‰é™çš„ç‚¹ä¸Šæ˜¯ä¸å¯å¾®çš„ã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["ç¥ç»ç½‘ç»œ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"çº¿æ€§æ¨¡å‹ç¯‡ä¹‹SVMæ•°å­¦å…¬å¼æ¨å¯¼","url":"/2019/04/21/æœºå™¨å­¦ä¹ /çº¿æ€§æ¨¡å‹ç¯‡ä¹‹SVMæ•°å­¦å…¬å¼æ¨å¯¼/","content":"\n> æ”¯æŒå‘é‡æœºï¼ˆSupport Vector Machineï¼ŒSVMï¼‰æ˜¯ä¸€ä¸ªç»å…¸ä¸¤ç±»åˆ†ç±»ç®—æ³•ï¼Œå…¶æ‰¾åˆ°çš„åˆ†å‰²è¶…å¹³é¢å…·æœ‰æ›´å¥½çš„é²æ£’æ€§ï¼Œå› æ­¤å¹¿æ³›ä½¿ç”¨åœ¨å¾ˆå¤šä»»åŠ¡ä¸Šï¼Œå¹¶è¡¨ç°å‡ºäº†å¾ˆå¼ºä¼˜åŠ¿ã€‚\n\n<!--More-->\n\n# ä»‹ç»\nç»™å®šä¸€ä¸ªä¸¤åˆ†ç±»æ•°æ®é›†D={(x^n, y^n)}ï¼Œnå±äºNï¼Œå…¶ä¸­y_n å±äº{+1,-1}ï¼Œå¦‚æœä¸¤ç±»æ ·æœ¬æ˜¯çº¿æ€§å¯åˆ†çš„ï¼Œå³å­˜åœ¨ä¸€ä¸ªè¶…å¹³é¢ï¼ˆå…¬å¼-1ï¼‰\n$$\nw^Tx + b =0\n$$\nå°†ä¸¤ç±»æ ·æœ¬åˆ†å¼€ï¼Œé‚£ä¹ˆå¯¹äºæ¯ä¸ªæ ·æœ¬éƒ½æœ‰\n$$\ny^n(w^Tx^n + b) > 0\n$$\n\næ•°æ®é›†Dä¸­çš„æ¯ä¸ªæ ·æœ¬x^n åˆ°åˆ†éš”è¶…å¹³é¢çš„è·ç¦»ä¸ºï¼š\n$$\n\\gamma ^n = \\frac{\\left \\| w^Tx^n +b \\right \\|}{ \\left \\| w \\right \\|} = \\frac{y^n(w^Tx^n + b)}{ \\left \\| w \\right \\| }\n$$\n\næˆ‘ä»¬å®šä¹‰æ•´ä¸ªæ•°æ®é›†Dä¸­æ‰€æœ‰æ ·æœ¬åˆ°åˆ†éš”è¶…å¹³é¢çš„æœ€çŸ­è·ç¦»ä¸ºé—´éš”ï¼ˆMarginï¼‰ï¼ˆå…¬å¼-2ï¼‰\n$$\n\\gamma = \\underset{n}{min} \\gamma ^ n\n$$\nå¦‚æœé—´éš” gammaè¶Šå¤§ï¼Œå…¶åˆ†éš”è¶…å¹³é¢å¯¹ä¸¤ä¸ªæ•°æ®é›†çš„åˆ’åˆ†è¶Šç¨³å®šï¼Œä¸å®¹æ˜“å—å™ªå£°ç­‰å› ç´ å½±å“ï¼Œæ”¯æŒå‘é‡æœºçš„ç›®çš„æ˜¯æ‰¾åˆ°ä¸€ä¸ªè¶…å¹³é¢(w^* , b^ *)ä½¿å¾—gammaæœ€å¤§ï¼Œå³ï¼ˆå…¬å¼-3ï¼‰\n$$\n\\underset{w,b}{max} \\qquad \\gamma \n\\\\\ns.t.  \\qquad  \\frac{y^n (w^Tx^n + b)}{\\left \\| w \\right \\|} \\geq \\gamma,\\forall_n\n$$\nä»¤ \n$$\n\\left \\| w \\right \\| . \\gamma =1\n$$\nåˆ™ï¼ˆå…¬å¼-3ï¼‰ç­‰ä»·äºï¼ˆå…¬å¼-4ï¼‰\n$$\n\\underset{w,b}{max} \\qquad \\frac{1}{ \\left \\| w \\right \\| ^2} \n\\\\\ns.t.  \\qquad  y^n(w^Tx^n + b) \\geq 1, \\forall_n\n$$\næ•°æ®é›†ä¸­æ‰€æœ‰æ»¡è¶³ y^n (w^T x^n +b) =1 çš„æ ·æœ¬ç‚¹ï¼Œéƒ½ç§°ä¸ºæ”¯æŒå‘é‡ï¼ˆsupport vertorï¼‰\n\nå¯¹äºä¸€ä¸ªçº¿æ€§å¯åˆ†æ•°æ®é›†ï¼Œå…¶åˆ†éš”çš„è¶…å¹³é¢æœ‰å¤šä¸ªï¼Œä½†æ˜¯é—´éš”æœ€å¤§çš„è¶…å¹³é¢æ˜¯å”¯ä¸€çš„ã€‚ä¸‹å›¾ç»™å®šäº†æ”¯æŒæœ€å¤§é—´éš”åˆ†éš”è¶…å¹³é¢çš„ç¤ºä¾‹ï¼Œå…¶çº¢è‰²æ ·æœ¬ç‚¹ä¸ºæ”¯æŒå‘é‡ã€‚\n\n<center>\n\n![æ”¯æŒå‘é‡æœºç¤ºä¾‹](https://img-blog.csdnimg.cn/20190417110614374.png)\n\n</center>\n\n# å‚æ•°å­¦ä¹ \n\n**å‡¸å‡½æ•° & å‡¹å‡½æ•°**\nå…³äºå‡¹å‡¸å‡½æ•°çš„å®šä¹‰å’Œæ€§è´¨å¯ä»¥å‚è€ƒä¸‹å›¾ï¼š\n<center>\n\n![image](https://img-blog.csdnimg.cn/20190420165249483.jpg)\n</center>\n\nä¸ºäº†æ‰¾åˆ°æœ€å¤§é—´éš”åˆ†å‰²è¶…å¹³é¢ï¼Œå°†å…¬å¼-4æ”¹å†™ä¸ºå‡¸ä¼˜åŒ–é—®é¢˜ï¼ˆå…¬å¼-5ï¼‰ï¼š\n$$\n\\underset{w,b}{min} \\qquad \\frac{1}{ 2} {\\left \\| w \\right \\| ^2} \n\\\\\ns.t.  \\qquad  1-y^n(w^Tx^n + b) \\leq 0, \\forall n\n$$\nä½¿ç”¨æ‹‰æ ¼æœ—æ—¥ä¹˜æ•°æ³•ï¼Œå…¬å¼-5çš„æ‹‰æ ¼æœ—æ—¥å‡½æ•°ä¸ºï¼ˆå…¬å¼-6ï¼‰ï¼š\n$$\n\\Lambda (w,b,\\lambda )=\\frac{1}{2} \\left \\| w^2 \\right \\| + \\sum_{n-1}^{N} \\lambda _n( 1-y^n(w^Tx^n + b) )\n$$\nå…¶ä¸­\n$$\n\\lambda _1 \\geq 0,...,\\lambda _N \\geq 0\n$$\nä¸ºæ‹‰æ ¼æœ—æ—¥ä¹˜æ•°ã€‚è®¡ç®—å…¬å¼-6å…³äºwå’Œbçš„å¯¼æ•°ï¼Œå¹¶ä»¤å…¶ç­‰äº0å¾—åˆ°ï¼ˆå…¬å¼-7ï¼‰\n$$\nw = \\sum_{n=1}^{ N }\\lambda _n y^nx^n\n$$\nå’Œï¼ˆå…¬å¼-8ï¼‰\n$$\n0 = \\sum_{n=1}^{N} \\lambda _n y^n\n$$\nå°†å…¬å¼-7ä»£å…¥å…¬å¼-6ï¼Œå¹¶åˆ©ç”¨å…¬å¼-8ï¼Œå¾—åˆ°æ‹‰æ ¼æœ—æ—¥å¯¹å¶å‡½æ•°ï¼ˆå…¬å¼-9ï¼‰ï¼š\n$$\n\\Gamma(\\lambda) = -\\frac{1}{2} \\sum_{n=1}^{N}\\sum_{m=1}^{N} \\lambda_n \\lambda_m y^m y^n (x^m)^Tx^n + \\sum_{n=1}^{N}\\lambda_n\n$$\næ”¯æŒå‘é‡æœºçš„ä¸»ä¼˜åŒ–é—®é¢˜ä¸ºå‡¸ä¼˜åŒ–é—®é¢˜ï¼Œæ»¡è¶³å¼ºå¯¹å¶æ€§ï¼Œå³ä¸»ä¼˜åŒ–é—®é¢˜å¯ä»¥é€šè¿‡æœ€å¤§åŒ–å¯¹å¶å‡½æ•°\n$$\nmax_{\\lambda \\geq 0} \\Gamma(\\lambda)\n$$\nå¯¹å¶å‡½æ•° Gamma(lambda)æ˜¯ä¸€ä¸ªå‡¹å‡½æ•°ï¼Œå› æ­¤æœ€å¤§åŒ–å¯¹å¶æ•°æ˜¯ä¸€ä¸ªå‡¸ä¼˜åŒ–é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡å¤šç§å‡¸ä¼˜åŒ–æ–¹æ³•è¿›è¡Œæ±‚è§£ï¼Œå¾—åˆ°æ‹‰æ ¼æœ—æ—¥ä¹˜æ•°çš„æœ€ä¼˜å€¼ lambda^* ã€‚ä½†ç”±äºå…¶çº¦æŸæ¡ä»¶çš„æ•°é‡ä¸ºè®­ç»ƒæ ·æœ¬æ•°é‡ï¼Œä¸€èˆ¬çš„ä¼˜åŒ–æ–¹æ³•ä»£ä»·æ¯”è¾ƒé«˜ï¼Œå› æ­¤åœ¨å®è·µä¸­é€šå¸¸é‡‡æ ·æ¯”è¾ƒé«˜æ•ˆçš„ä¼˜åŒ–æ–¹æ³•ï¼Œæ¯”å¦‚SMO(Sequential Minimal Optimization)ç®—æ³•ç­‰ã€‚\n\næ ¹æ®KKTæ¡ä»¶ä¸­çš„äº’è¡¥æ¾å¼›æ¡ä»¶ï¼Œæœ€ä¼˜è§£æ»¡è¶³(å…¬å¼-10)\n$$\n \\lambda_n ^*(1-y^n(w^{*T}x^n+b^*))=0\n$$\nå¦‚æœæ ·æœ¬x^n ä¸åœ¨çº¦æŸè¾¹ç•Œä¸Šï¼Œ(lambda_n)^*ï¼Œå…¶çº¦æŸå¤±æ•ˆï¼›å¦‚æœæ ·æœ¬x^nåœ¨çº¦æŸè¾¹ç•Œä¸Šï¼Œ(lambda_n)^* >=0ã€‚è¿™äº›åœ¨çº¦æŸè¾¹ç•Œä¸Šçš„æ ·æœ¬ç‚¹ç§°ä¸ºæ”¯æŒå‘é‡ï¼ˆsupport vectorï¼‰ï¼Œå³ç¦»å†³ç­–å¹³é¢è·ç¦»æœ€è¿‘çš„ç‚¹ã€‚\n\nå†è®¡ç®—å‡º lambda^*åï¼Œæ ¹æ®å…¬å¼-7è®¡ç®—å‡ºæœ€ä¼˜æƒé‡w^*ï¼Œæœ€ä¼˜åç½®b^*å¯ä»¥é€šè¿‡ä»»é€‰ä¸€ä¸ªæ”¯æŒå‘é‡(x,y)è®¡ç®—å¾—åˆ°ï¼ˆå…¬å¼-11ï¼‰\n$$\nb^* = \\tilde{y} - w^{*T}\\tilde{x}\n$$\næœ€ä¼˜å‚æ•°çš„æ”¯æŒå‘é‡æœºçš„å†³ç­–å‡½æ•°ä¸ºï¼ˆå…¬å¼-12ï¼‰\n$$\nf(x)=sgn(w^{*T}x+b^*)=sgn(\\sum_{n=1}^{N} \\lambda_n^* y^n(x^n)^Tx + b^* )\n$$\næ”¯æŒå‘é‡æœºçš„å†³ç­–å‡½æ•°åªä¾èµ– lambda_n^*>0çš„æ ·æœ¬ç‚¹ï¼Œå³æ”¯æŒå‘é‡ã€‚\n\næ”¯æŒå‘é‡æœºçš„ç›®æ ‡å‡½æ•°å¯ä»¥é€šè¿‡SMOç­‰ä¼˜åŒ–æ–¹æ³•å¾—åˆ°å…¨å±€æœ€ä¼˜è§£ï¼Œå› æ­¤æ¯”å…¶ä»–åˆ†ç±»å™¨çš„å­¦ä¹ æ•ˆç‡æ›´é«˜ã€‚æ­¤å¤–ï¼Œæ”¯æŒå‘é‡æœºçš„å†³ç­–å‡½æ•°åªä¾èµ–ä¸æ”¯æŒå‘é‡ã€‚ä¸è®­ç»ƒæ ·æœ¬æ€»æ•°æ— å…³ï¼Œåˆ†ç±»é€Ÿåº¦æ¯”è¾ƒå¿«ã€‚\n\n# æ ¸å‡½æ•°\n\næ”¯æŒå‘é‡æœºè¿˜æœ‰ä¸€ä¸ªé‡è¦çš„ä¼˜ç‚¹æ˜¯å¯ä»¥ä½¿ç”¨æ ¸å‡½æ•°(kernal)éšå¼çš„å°†æ ·æœ¬ä»åŸå§‹ç‰¹å¾ç©ºé—´æ˜ å°„åˆ°æ›´é«˜ç»´çš„ç©ºé—´ï¼Œå¹¶è§£å†³åŸå§‹ç‰¹å¾ç©ºé—´ä¸­çš„çº¿æ€§ä¸å¯åˆ†é—®é¢˜ã€‚æ¯”å¦‚åœ¨ä¸€ä¸ªå˜æ¢åçš„ç‰¹å¾ç©ºé—´ä¸­ï¼Œæ”¯æŒå‘é‡æœºçš„å†³ç­–å‡½æ•°ä¸ºï¼ˆå…¬å¼-13ï¼‰\n$$\nf(x)=sgn(w^{*T} \\phi(x)+b^*)=sgn(\\sum_{n=1}^{N} \\lambda_n^* y^n K(x^n,x) + b^* )\n$$\nå…¶ä¸­\n$$\nK(x,z)=\\phi(x)^T \\phi(z) \n$$\nä¸ºæ ¸å‡½æ•°ï¼Œé€šå¸¸ä¸éœ€è¦æ˜¾å¼çš„ç»™å‡ºÏ†(x)çš„å…·ä½“å½¢å¼ï¼Œå¯ä»¥é€šè¿‡æ ¸æŠ€å·§(kernel trick)æ¥æ„é€ ã€‚æ¯”å¦‚ä»¥x,zå±äºR^2ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªæ ¸å‡½æ•°ï¼ˆå…¬å¼-14ï¼‰\n$$\nK(x,z)=(1+x^Tz)^2=\\phi(x)^T\\phi(z)\n$$\næ¥éšå¼çš„è®¡ç®—x,zåœ¨ç‰¹å¾ç©ºé—´Ï†ä¸­çš„å†…ç§¯ï¼Œå…¶ä¸­:\n$$\n\\phi(x)=[1,\\sqrt{2}x_1,\\sqrt{2}x_2,\\sqrt{2}x_1x_2,x_1^2,x_2^2]^T\n$$\n# è½¯é—´éš”\n\nåœ¨æ”¯æŒå‘é‡æœºçš„ä¼˜åŒ–é—®é¢˜ä¸­ï¼Œçº¦æŸæ¡ä»¶æ¯”è¾ƒä¸¥æ ¼ã€‚å¦‚æœè®­ç»ƒé›†ä¸­çš„æ ·æœ¬åœ¨ç‰¹å¾ç©ºé—´ä¸­ä¸æ˜¯çº¿æ€§å¯åˆ†çš„ï¼Œå°±æ— æ³•æ‰¾åˆ°æœ€ä¼˜è§£ã€‚ä¸ºäº†èƒ½å¤Ÿå®¹å¿éƒ¨åˆ†ä¸æ»¡è¶³çº¦æŸçš„æ ·æœ¬ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥æ¾å¼›å˜é‡ï¼Œå°†ä¼˜åŒ–é—®é¢˜å˜ä¸ºï¼ˆå…¬å¼-15ï¼‰ï¼š\n$$\n\\underset{w,b}{min} \\qquad \\frac{1}{ 2} {\\left \\| w \\right \\| ^2} + C \\sum_{n=1}^{N}\\xi _n\n\\\\\ns.t.  \\qquad  1-y^n(w^Tx^n + b) -\\xi _n \\leq 0, \\forall n\n\\\\\n\\xi _n \\geq 0, \\forall n\n$$\nå…¶ä¸­å‚æ•°C>0ç”¨æ¥æ§åˆ¶é—´éš”å’Œæ¾å¼›å˜é‡æƒ©ç½šçš„å¹³è¡¡ï¼Œå¼•å…¥æ¾å¼›å˜é‡çš„é—´éš”ç§°ä¸ºè½¯é—´éš”ï¼ˆsoft marginï¼‰ã€‚å…¬å¼-15ä¹Ÿå¯ä»¥è¡¨ç¤ºä¸ºç»éªŒé£é™©+æ­£åˆ™åŒ–é¡¹çš„å½¢å¼ï¼ˆå…¬å¼-16ï¼‰ã€‚\n$$\n\\underset{w,b}{min} \\qquad \\sum_{n=1}^{N}max(0,1-y^n(w^Tx^n + b)) + \\frac{1}{C}.\\frac{1}{2}\\left \\| w \\right \\|^2\n$$\nå…¶ä¸­\n$$\nmax(0,1-y^n(w^Tx^n + b))\n$$\nç§°ä¸ºhingeæŸå¤±å‡½æ•°ï¼Œ1/Cå¯ä»¥çœ‹ä½œæ˜¯æ­£åˆ™åŒ–ç³»æ•°ã€‚è½¯é—´éš”æ”¯æŒå‘é‡æœºçš„å‚æ•°å­¦ä¹ å’ŒåŸå§‹æ”¯æŒå‘é‡æœºç±»ä¼¼ï¼Œå…¶æœ€ç»ˆå†³ç­–å‡½æ•°ä¹Ÿåªå’Œæ”¯æŒå‘é‡æœ‰å…³ï¼Œå³æ»¡è¶³\n$$\n1-y^n(w^Tx^n + b) - \\xi_n = 0\n$$\nçš„æ ·æœ¬ã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"çº¿æ€§æ¨¡å‹ä¹‹PLAæ•°å­¦å…¬å¼æ¨å¯¼","url":"/2019/04/16/æœºå™¨å­¦ä¹ /çº¿æ€§æ¨¡å‹ä¹‹PLAæ•°å­¦å…¬å¼æ¨å¯¼/","content":"> æœ¬æ–‡ä¸»è¦ä»‹ç»çº¿æ€§æ¨¡å‹ä¹‹PLAæ•°å­¦å…¬å¼æ¨å¯¼ã€‚\n\n<!--More-->\n\n# ä»‹ç»\næ„ŸçŸ¥æœºï¼ˆPerceptronï¼‰æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„çº¿æ€§åˆ†ç±»å™¨ï¼Œç›¸å½“äºæœ€ç®€å•çš„äººå·¥ç¥ç»ç½‘ç»œï¼Œåªæœ‰ä¸€ä¸ªç¥ç»å…ƒã€‚å…¶å…¨ç§°æ˜¯PLAï¼ˆPerceptron Linear Algorithmï¼‰ï¼Œçº¿æ€§æ„ŸçŸ¥æœºç®—æ³•ã€‚\n\næ„ŸçŸ¥æœºæ˜¯å¯¹ç”Ÿç‰©ç¥ç»å…ƒçš„ç®€å•æ•°å­¦æ¨¡å‹ï¼Œæœ‰ä¸ç”Ÿç‰©ç¥ç»å…ƒç›¸å¯¹åº”çš„éƒ¨ä»¶ï¼Œæ¯”å¦‚æƒé‡ï¼ˆçªè§¦ï¼‰ã€åç½®ï¼ˆé˜ˆå€¼ï¼‰åŠæ¿€æ´»å‡½æ•°ï¼ˆç»†èƒä½“ï¼‰ï¼Œè¾“å‡ºå€¼ä¸º +1 æˆ–è€… -1ã€‚\n\n$$\n\\hat{y} = sgn(w^Tx)\n$$\n\nå¯¹äºäºŒåˆ†ç±»é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨æ„ŸçŸ¥æœºç®—æ³•æ¥è§£å†³ã€‚PLAçš„åŸç†æ˜¯é€ç‚¹è§£å†³ï¼Œé¦–å…ˆåœ¨è¶…å¹³é¢ä¸Šéšæ„å–ä¸€æ¡åˆ†ç±»é¢ï¼Œç»Ÿè®¡åˆ†ç±»é”™è¯¯çš„ç‚¹ï¼Œç„¶åéšæœºå¯¹æŸä¸ªé”™è¯¯ç‚¹ä¿®æ­£ï¼Œå³å˜æ¢ç›´çº¿çš„ä½ç½®ï¼Œä½¿è¯¥é”™è¯¯ç‚¹è¢«ä¿®æ­£ï¼Œæ¥ç€å†éšæœºé€‰å–å¦å¤–ä¸€ä¸ªé”™è¯¯ç‚¹è¿›è¡Œä¿®æ­£ï¼Œåˆ†ç±»é¢ä¸æ–­å˜åŒ–ï¼Œç›´åˆ°æ‰€æœ‰ç‚¹éƒ½åˆ†ç±»æ­£ç¡®äº†ï¼Œå°±å¾—åˆ°äº†æœ€ä½³åˆ†ç±»é¢ã€‚\n\nåˆ©ç”¨äºŒç»´å¹³é¢è¿›è¡Œè§£é‡Šï¼Œç¬¬ä¸€ç§æƒ…å†µæ˜¯é”™è¯¯çš„å°†æ­£æ ·æœ¬ï¼ˆy=1ï¼‰åˆ†ç±»ä¸ºè´Ÿæ ·æœ¬ï¼ˆy=-1ï¼‰ã€‚æ­¤æ—¶wx<0ï¼Œå³wä¸xçš„å¤¹è§’å¤§äº90åº¦ï¼Œåˆ†ç±»çº¿Lçš„ä¸¤ä¾§ã€‚ä¿®æ­£çš„æ–¹æ³•æ˜¯è®©å¤¹è§’å˜å°ï¼Œä¿®æ­£wå€¼ï¼Œä½¿äºŒè€…ä½äºç›´çº¿åŒä¾§ã€‚\n\n$$\nw:=w+x=w+yx\n$$\n\nä¿®æ­£è¿‡ç¨‹å¦‚ä¸‹ï¼š\n![ä¿®æ­£è¿‡ç¨‹](https://img-blog.csdnimg.cn/20190415193607475.jpg)\n\nç¬¬äºŒç§æƒ…å†µå°±æ˜¯é”™è¯¯çš„å°†è´Ÿæ ·æœ¬ï¼ˆy=-1ï¼‰åˆ†ç±»ä¸ºæ­£æ ·æœ¬ï¼ˆy=1ï¼‰ã€‚æ­¤æ—¶ï¼Œwx>0ï¼Œå³wä¸xçš„å¤¹è§’å°äº90åº¦ï¼Œåˆ†ç±»çº¿Lçš„åŒä¸€ä¾§ã€‚ä¿®æ­£çš„æ–¹æ³•æ˜¯è®©å¤¹è§’å˜å¤§ï¼Œä¿®æ­£wå€¼ï¼Œä½¿äºŒè€…ä½äºåˆ†ç±»çº¿åŒä¾§ã€‚\n\n$$\nw:=w-x=w+yx\n$$\nä¿®æ­£è¿‡ç¨‹å¦‚ä¸‹ï¼š\n![ä¿®æ­£è¿‡ç¨‹](https://img-blog.csdnimg.cn/20190415193855372.jpg)\n\nç»è¿‡ä¸Šè¾¹ä¸¤ç§æƒ…å†µåˆ†æï¼ŒPLAæ¯æ¬¡æ›´æ–°å‚æ•°wçš„è¡¨è¾¾å¼æ˜¯ä¸€è‡´çš„ï¼ŒæŒæ¡äº†æ¯æ¬¡wçš„ä¼˜åŒ–è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆPLAå°±èƒ½ä¸æ–­åœ°å°†æ‰€æœ‰é”™è¯¯çš„åˆ†ç±»æ ·æœ¬çº æ­£å¹¶åˆ†ç±»æ­£ç¡®ã€‚\n\n# å‚æ•°å­¦ä¹ \nç»™å®šNä¸ªè®­ç»ƒé›†æ ·æœ¬{(x^n, y^n)},n<=Nï¼Œå…¶ä¸­y^n å±äº{+1,-1}ï¼Œæ„ŸçŸ¥æœºè¯•å›¾å­¦ä¹ åˆ°å‚æ•°w*ï¼Œä½¿å¾—å¯¹äºæ¯ä¸ªæ ·æœ¬(x^n,y^n)\næœ‰ï¼š\n\n$$\ny^n w^{*T}x^n>0,\\forall n\\in [1,N]\n$$\næ„ŸçŸ¥æœºç®—æ³•æ˜¯ä¸€ç§é”™è¯¯é©±åŠ¨çš„åœ¨çº¿å­¦ä¹ ç®—æ³•ï¼Œå…ˆåˆå§‹åŒ–ä¸€ä¸ªæƒé‡å‘é‡w<-0ï¼ˆé€šå¸¸æ˜¯å…¨é›¶å‘é‡ï¼‰ï¼Œç„¶åæ¯æ¬¡åˆ†é”™ä¸€ä¸ªæ ·æœ¬ï¼ˆx,yï¼‰æ—¶ï¼Œå°±ç”¨è¿™ä¸ªæ ·æœ¬æ¥æ›´æ–°æƒé‡ã€‚\n\n$$\nw \\leftarrow w + yx\n$$\n\nå…·ä½“çš„æ„ŸçŸ¥æœºç®—æ³•ä¼ªä»£ç å¦‚ä¸‹ï¼ˆ==ç®—æ³•-1==ï¼‰ï¼š\n![æ„ŸçŸ¥æœºç®—æ³•ä¼ªä»£ç ](https://img-blog.csdnimg.cn/20190415202606770.png)\n\næ ¹æ®æ„ŸçŸ¥å™¨çš„å­¦ä¹ ç­–ç•¥ï¼Œå¯ä»¥åæ¨å‡ºæ„ŸçŸ¥å™¨çš„æŸå¤±å‡½æ•°ä¸ºï¼š\n$$\nL (w;x,y)=max(0, -yw^Tx)\n$$\né‡‡ç”¨éšæœºæ¢¯åº¦çš„ä¸‹é™ï¼Œå…¶æ¯æ¬¡æ›´æ–°çš„æ¢¯åº¦ä¸ºï¼š\n$$\n\\frac{\\partial L (w;x,y) }{ \\partial w}=\\begin{cases}\n0 & \\text{ if } y^Tx>0 \\\\ \n-yx & \\text{ if } y^Tx<0 \n\\end{cases}\n$$\nä¸‹å›¾ç»™å‡ºäº†æ„ŸçŸ¥æœºå‚æ•°å­¦ä¹ çš„è¿‡ç¨‹ï¼Œå…¶ä¸­çº¢è‰²å®å¿ƒä¸ºæ­£ä¾‹ï¼Œè“è‰²ç©ºå¿ƒç‚¹ä¸ºè´Ÿä¾‹ã€‚é»‘è‰²ç®­å¤´è¡¨ç¤ºæƒé‡å‘é‡ï¼Œçº¢è‰²è™šçº¿ç®­å¤´è¡¨ç¤ºæƒé‡çš„æ›´æ–°æ–¹å‘ã€‚\n\n![æ„ŸçŸ¥æœºå‚æ•°å­¦ä¹ çš„è¿‡ç¨‹](https://img-blog.csdnimg.cn/20190415203526997.png)\n\n# æ„ŸçŸ¥æœºçš„æ”¶æ•›\nNovikoffè¯æ˜å¯¹äºä¸¤ç±»é—®é¢˜ï¼Œå¦‚æœè®­ç»ƒé›†æ˜¯çº¿æ€§å¯åˆ†çš„ï¼Œé‚£ä¹ˆæ„ŸçŸ¥å™¨\nç®—æ³•å¯ä»¥åœ¨æœ‰é™æ¬¡è¿­ä»£åæ”¶æ•›ã€‚ç„¶è€Œï¼Œå¦‚æœè®­ç»ƒé›†ä¸æ˜¯çº¿æ€§åˆ†éš”çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªç®—æ³•åˆ™ä¸èƒ½ç¡®ä¿ä¼šæ”¶æ•›ã€‚\n\nå½“æ•°æ®é›†æ˜¯ä¸¤ç±»çº¿æ€§å¯åˆ†æ—¶ï¼Œå¯¹äºæ•°æ®é›†D={(x^n,y^n)}ï¼Œnå±äºNï¼Œå…¶ä¸­x^nä¸ºæ ·æœ¬çš„å¢å¹¿ç‰¹å¾å‘é‡ï¼Œy^nå±äº{-1ï¼Œ+1}ï¼Œé‚£ä¹ˆå­˜åœ¨ä¸€ä¸ªæ­£çš„å¸¸æ•°r(r>0)å’Œæƒé‡å‘é‡wï¼Œå¹¶ä¸”||w*||=1ï¼Œå¯¹æ‰€æœ‰néƒ½æ»¡è¶³(w^*)(y^n x^n)>rã€‚\n\nå¯ä»¥è¯æ˜å¦‚ä¸‹å®šç†ï¼ˆå®šç†-1ï¼‰ã€‚\n\n---\n\nç»™å®šä¸€ä¸ªè®­ç»ƒé›†\n$$\nD={(x^n,y^n)},n\\in {1,N}\n$$\nå‡è®¾Ræ˜¯è®­ç»ƒé›†ä¸­æœ€å¤§çš„ç‰¹å¾å‘é‡çš„æ¨¡\n$$\nR=\\underset{n}{max} \\left \\| x^n \\right \\| \n$$\nå¦‚æœè®­ç»ƒé›†Dçº¿æ€§å¯åˆ†ï¼Œæ„ŸçŸ¥æœºå­¦ä¹ ç®—æ³•-1çš„æƒé‡æ›´æ–°æ¬¡æ•°ä¸è¶…è¿‡ R^2/ r^2\n\n---\n\nè¯æ˜ï¼š\næ„ŸçŸ¥æœºç®—æ³•çš„æƒé‡æ›´æ–°æ–¹å¼ä¸ºï¼ˆ==å…¬å¼-1==ï¼‰ï¼š\n$$\nw_k = w_{k-1}+y^kx^k\n$$\nå…¶ä¸­x^k, y^kè¡¨ç¤ºç¬¬kä¸ªé”™è¯¯åˆ†ç±»çš„æ¡ä»¶ã€‚\nå› ä¸ºåˆå§‹æƒé‡ä¸º0ï¼Œåœ¨ç¬¬Kæ¬¡æ›´æ–°æ—¶æ„ŸçŸ¥å™¨çš„æƒé‡å‘é‡ä¸ºï¼ˆ==å…¬å¼-2==ï¼‰ï¼š\n$$\nw_k = =\\sum_{k=1}^{K}y^kx^k\n$$\nåˆ†åˆ«è®¡ç®—||w||^2çš„ä¸Šä¸‹ç•Œï¼š\n\n**è®¡ç®—å…¶ä¸Šç•Œ**ï¼ˆå…¬å¼-2ï¼‰ï¼š\n$$\n\\left \\| w_k^2 \\right \\| \n$$\n$$\n= \\left\\| w_{K_1} + y^K x^K \\right \\|^2\n$$\n$$\n= \\left \\|  w_{K-1} \\right \\| ^2 + \\left \\| y^Kx^K \\right \\| ^2+2y^Kw_{K-1}x^K \n$$\n$$\n\\leqslant \\left \\| w_{K-1} \\right \\|^2 + R^2\n$$\n$$\n\\leqslant\\left \\| w_{K-2} \\right \\|^2+2R^2\n$$\n$$\n\\leqslant KR^2\n$$\n\n**è®¡ç®—å…¶ä¸‹ç•Œ**ï¼ˆå…¬å¼-3ï¼‰ï¼š\n$$\n\\left \\| w_k^2 \\right \\| \n$$\n$$\n=\\left \\| w^* \\right \\|^2 .\\left \\| w_K \\right \\|^2\n$$\n$$\n\\geqslant \\left \\| w^{*T}w_K \\right \\| ^2\n$$\n$$\n=\\left \\| w^{*T}\\sum_{k=1}^{K}(y^Kx^K) \\right \\|^2\n$$\n$$\n=\\left \\| \\sum_{k=1}^{K}w^{*T}(y^Kx^K) \\right \\|^2\n$$\n$$\n\\geq K^2r^2\n$$\n==é™„==ï¼šä¸¤ä¸ªå‘é‡å†…ç§¯çš„å¹³æ–¹ä¸€å®šå°äºç­‰äºè¿™ä¸¤ä¸ªå‘é‡çš„æ¨¡çš„ä¹˜ç§¯ã€‚\n\nç”±å…¬å¼-2å’Œå…¬å¼-3å¾—åˆ°ï¼ˆå…¬å¼-4ï¼‰\n$$\nK^2r^2 \\leq \\left \\| w_K \\right \\|^2\\leq KR^2\n$$\nå–æœ€å·¦å’Œæœ€å³çš„ä¸¤é¡¹ï¼Œè¿›ä¸€æ­¥å¾—åˆ°K^2r^2 <= K^2R^2ï¼Œç„¶åä¸¤è¾¹åŒæ—¶é™¤ä»¥Kï¼Œæœ€ç»ˆå¾—åˆ°ï¼ˆå…¬å¼-5ï¼‰ï¼š\n$$\nK\\leq \\frac{R^2}{r^2}\n$$\nå› æ­¤åœ¨çº¿æ€§å¯åˆ†çš„æƒ…å†µä¸‹ï¼Œç®—æ³•-1ä¼šåœ¨R^2 / r^2æ­¥å†…æ”¶æ•›ã€‚\n\nè™½ç„¶æ„ŸçŸ¥æœºçº¿æ€§æ¨¡å‹åœ¨çº¿æ€§å¯åˆ†çš„æ•°æ®ä¸Šå¯ä»¥ä¿è¯æ”¶æ•›ï¼Œä½†å…¶å­˜åœ¨ä»¥ä¸‹ä¸è¶³ï¼š\n- åœ¨æ•°æ®é›†çº¿æ€§å¯åˆ†æ—¶ï¼Œæ„ŸçŸ¥å™¨è™½ç„¶å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªè¶…å¹³é¢æŠŠä¸¤ç±»æ•°æ®åˆ†å¼€ï¼Œ ä½†å¹¶ä¸èƒ½ä¿è¯èƒ½å…¶æ³›åŒ–èƒ½åŠ›ã€‚\n- æ„ŸçŸ¥å™¨å¯¹æ ·æœ¬é¡ºåºæ¯”è¾ƒæ•æ„Ÿã€‚æ¯æ¬¡è¿­ä»£çš„é¡ºåºä¸ä¸€è‡´æ—¶ï¼Œæ‰¾åˆ°çš„åˆ†å‰²è¶…å¹³ é¢ä¹Ÿå¾€å¾€ä¸ä¸€è‡´ã€‚\n- å¦‚æœè®­ç»ƒé›†ä¸æ˜¯çº¿æ€§å¯åˆ†çš„ï¼Œå°±æ°¸è¿œä¸ä¼šæ”¶æ•›ã€‚\n\n# å‚æ•°å¹³å‡æ„ŸçŸ¥æœº\næ ¹æ®å®šç†3.1ï¼Œå¦‚æœè®­ç»ƒæ•°æ®æ˜¯çº¿æ€§å¯åˆ†çš„ï¼Œé‚£ä¹ˆæ„ŸçŸ¥å™¨å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªåˆ¤åˆ« å‡½æ•°æ¥åˆ†å‰²ä¸åŒç±»çš„æ•°æ®ã€‚å¦‚æœé—´éš” Î³ è¶Šå¤§ï¼Œæ”¶æ•›è¶Šå¿«ã€‚ä½†æ˜¯æ„ŸçŸ¥å™¨å¹¶ä¸èƒ½ä¿ è¯æ‰¾åˆ°çš„åˆ¤åˆ«å‡½æ•°æ˜¯æœ€ä¼˜çš„(æ¯”å¦‚æ³›åŒ–èƒ½åŠ›é«˜)ï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´è¿‡æ‹Ÿåˆã€‚\n\næ„ŸçŸ¥æœºçš„å­¦ä¹ åˆ°çš„æƒé‡å‘é‡å’Œè®­ç»ƒæ ·æœ¬çš„é¡ºåºç›¸å…³ã€‚åœ¨è¿­ä»£æ¬¡åºä¸Šæ’åœ¨å é¢çš„é”™è¯¯æ ·æœ¬ï¼Œæ¯”å‰é¢çš„é”™è¯¯æ ·æœ¬å¯¹æœ€ç»ˆçš„æƒé‡å‘é‡å½±å“æ›´å¤§ã€‚æ¯”å¦‚æœ‰ 1, 000 ä¸ª è®­ç»ƒæ ·æœ¬ï¼Œåœ¨è¿­ä»£ 100 ä¸ªæ ·æœ¬åï¼Œæ„ŸçŸ¥å™¨å·²ç»å­¦ä¹ åˆ°ä¸€ä¸ªå¾ˆå¥½çš„æƒé‡å‘é‡ã€‚åœ¨ æ¥ä¸‹æ¥çš„ 899 ä¸ªæ ·æœ¬ä¸Šéƒ½é¢„æµ‹æ­£ç¡®ï¼Œä¹Ÿæ²¡æœ‰æ›´æ–°æƒé‡å‘é‡ã€‚ä½†æ˜¯åœ¨æœ€åç¬¬ 1, 000 ä¸ªæ ·æœ¬æ—¶é¢„æµ‹é”™è¯¯ï¼Œå¹¶æ›´æ–°äº†æƒé‡ã€‚è¿™æ¬¡æ›´æ–°å¯èƒ½åè€Œä½¿å¾—æƒé‡å‘é‡å˜å·®ã€‚\n\nä¸ºäº†æ”¹å–„è¿™ç§æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨â€œå‚æ•°å¹³å‡â€çš„ç­–ç•¥æé«˜æ„ŸçŸ¥jiçš„é²æ£’æ€§ï¼Œä¹Ÿå«æŠ•ç¥¨æ„ŸçŸ¥æœºã€‚\n\næŠ•ç¥¨æ„ŸçŸ¥æœºè®°å½•ç¬¬kæ¬¡æ›´æ–°å‚æ•°ä¹‹åçš„æƒé‡w_kåœ¨ä¹‹åçš„è®­ç»ƒè¿‡ç¨‹ä¸­æ­£ç¡®åˆ†ç±»æ ·æœ¬çš„æ¬¡æ•°c_kã€‚è¿™æ ·æœ€åçš„åˆ†ç±»å™¨å½¢å¼ä¸ºï¼ˆå…¬å¼-6ï¼‰ï¼š\n$$\n\\hat{y} = sgn(\\sum_{k=1}^{K}c_ksgn(w_k^Tx))\n$$\nå…¶ä¸­sgn(.)ä¸ºç¬¦å·å‡½æ•°ã€‚\n\næŠ•ç¥¨æ„ŸçŸ¥æœºè™½ç„¶æé«˜äº†æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œä½†æ˜¯éœ€è¦ä¿å­˜Kä¸ªæƒé‡å‘é‡ã€‚åœ¨å®é™…çš„æ“ä½œä¸­ä¼šå¸¦æ¥é¢å¤–çš„å¼€é”€ã€‚å› æ­¤ç»å¸¸ä¼šä½¿ç”¨ä¸€ä¸ªç®€åŒ–çš„ç‰ˆæœ¬ï¼Œå³å¹³å‡æ„ŸçŸ¥æœºã€‚å…¶è¡¨è¾¾å¼å¦‚ä¸‹ï¼ˆå…¬å¼-7ï¼‰ï¼š\n$$\n\\hat{y} = sgn(\\sum_{k=1}^{K}c_k (w_k^Tx))\n=sgn( (\\sum_{k=1}^{K}c_k w_k )^Tx )\n=sgn( \\bar{w}^Tx)\n$$\nå…¶ä¸­ \n$$\n\\bar{w}\n$$\nä¸ºå¹³å‡çš„æƒé‡å‘é‡ã€‚\n\nå‡è®¾w_{t,n}æ˜¯åœ¨ç¬¬tè½®æ›´æ–°åˆ°ç¬¬nä¸ªæ ·æœ¬æ—¶çš„æƒé‡å‘é‡å€¼ï¼Œå¹³å‡çš„æƒé‡å‘é‡ä¹Ÿå¯ä»¥è¡¨ç¤ºä¸ºï¼ˆå…¬å¼-8ï¼‰ï¼š\n$$\n\\bar{w} = \\frac{\\sum_{t=1}^{T} \\sum_{n=1}^{N}w_{t,n}}{nT}\n$$\nè¿™ä¸ªæ–¹æ³•å®ç°ç®€å•ï¼Œåªéœ€è¦åœ¨ç®—æ³•-1ä¸­å¢åŠ ä¸€ä¸ªå¹³å‡å‘é‡ï¼Œå¹¶ä¸”åœ¨å¤„ç†æ¯ä¸€ä¸ªæ ·æœ¬åï¼Œè¿›è¡Œæ›´æ–°ï¼ˆå…¬å¼-9ï¼‰ï¼š\n$$\n\\bar{w} = \\bar{w}+ w_{t,n}\n$$\nä½†è¿™ä¸ªæ–¹æ³•éœ€è¦åœ¨å¤„ç†æ¯ä¸€ä¸ªæ ·æœ¬æ—¶éƒ½è¦æ›´æ–°å¹³å‡æƒé‡ï¼Œå› ä¸º\n$$\n \\bar{w} ,w_{t,n}\n$$\néƒ½æ˜¯ç¨ å¯†å‘é‡ï¼Œå› æ­¤æ›´æ–°æ“ä½œæ¯”è¾ƒè´¹æ—¶ã€‚ä¸ºäº†æé«˜è¿­ä»£é€Ÿåº¦ï¼Œæœ‰å¾ˆå¤šæ”¹è¿›çš„åŠæ³•ï¼Œè®©è¿™ä¸ªæ›´æ–°åªéœ€è¦åœ¨é”™è¯¯é¢„æµ‹æ—¶æ‰è¿›è¡Œã€‚ä¸‹å›¾ç»™äº†ä¸€ä¸ªæ”¹è¿›çš„å¹³å‡æ„ŸçŸ¥æœºç®—æ³•çš„è®­ç»ƒè¿‡ç¨‹ï¼ˆç®—æ³•-2ï¼‰ã€‚\n![æ”¹è¿›çš„å¹³å‡æ„ŸçŸ¥æœºç®—æ³•çš„è®­ç»ƒè¿‡ç¨‹](https://img-blog.csdnimg.cn/20190416184043264.png)\n\n# æ‰©å±•åˆ°å¤šåˆ†ç±»\n\nåŸå§‹çš„æ„ŸçŸ¥æœºæ˜¯äºŒåˆ†ç±»æ¨¡å‹ï¼Œä½†ä¹Ÿå¾ˆå®¹æ˜“çš„æ‰©å±•åˆ°å¤šåˆ†ç±»ï¼Œç”šè‡³æ˜¯æ›´ä¸€èˆ¬çš„ç»“æ„åŒ–å­¦ä¹ é—®é¢˜ã€‚\n\nä¹‹å‰ä»‹ç»çš„çº¿æ€§åˆ†ç±»æ¨¡å‹ä¸­ï¼Œåˆ†ç±»å‡½æ•°éƒ½æ˜¯åœ¨è¾“å…¥xçš„ç‰¹å¾ç©ºé—´ä¸Šã€‚ä¸ºäº†ä½¿å¾—æ„ŸçŸ¥æœºå¯ä»¥å¤„ç†æ›´åŠ å¤æ‚çš„è¾“å‡ºï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªæ„å»ºè¾“å…¥è¾“å‡ºè”åˆç©ºé—´ä¸Šçš„ç‰¹å¾å‡½æ•°ï¼Œå°†æ ·æœ¬(x,y)å¯¹æ˜ å°„åˆ°ä¸€ä¸ªç‰¹å¾å‘é‡ç©ºé—´ã€‚\n\nåœ¨è”åˆç‰¹å¾ç©ºé—´ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹ä¸€ä¸ªå¹¿ä¹‰çš„æ„ŸçŸ¥æœºæ¨¡å‹ï¼ˆå…¬å¼-10ï¼‰ï¼š\n$$\n\\hat{y} = \\underset{y\\in Gen(x)}{ arg max} w^T \\phi(x,y)\n$$\nå…¶ä¸­wä¸ºæƒé‡å‘é‡ï¼ŒGen(x)è¡¨ç¤ºè¾“å…¥xæ‰€æœ‰çš„è¾“å‡ºç›®æ ‡é›†åˆã€‚å½“å¤„ç†Cç±»åˆ†ç±»é—®é¢˜æ—¶ï¼ŒGen(x)={1,....,C}\n\nåœ¨Cåˆ†ç±»ä¸­ï¼Œä¸€ç§å¸¸ç”¨çš„ç‰¹å¾å‡½æ•°ï¼ˆå…¬å¼-11ï¼‰\n$$\n\\phi(x,y)\n$$\næ˜¯yå’Œxçš„å†…ç§¯ï¼Œå…¶ä¸­yä¸ºç±»åˆ«çš„one-hotå‘é‡è¡¨ç¤ºï¼ˆå…¬å¼-12ï¼‰ã€‚\n$$\n \\phi(x,y) = vec(yx^T)\\in R^{(d\\times C)}\n$$\nå…¶ä¸­vecæ˜¯å‘é‡åŒ–ç®—å­ã€‚\n\nç»™å®šæ ·æœ¬(x,y)ï¼Œè‹¥\n$$\nx \\in R^d\n$$\nyä¸ºç¬¬cç»´ä¸º1çš„one-hotå‘é‡ï¼Œåˆ™ï¼š\n![yä¸ºç¬¬cç»´ä¸º1çš„one-hotå‘é‡](https://img-blog.csdnimg.cn/20190416190108143.png)\n\nå¹¿ä¹‰æ„ŸçŸ¥å™¨ç®—æ³•çš„è®­ç»ƒè¿‡ç¨‹å¦‚ç®—æ³•-3æ‰€ç¤ºï¼š\n\n![å¹¿ä¹‰æ„ŸçŸ¥å™¨ç®—æ³•çš„è®­ç»ƒè¿‡ç¨‹](https://img-blog.csdnimg.cn/20190416190225604.png)\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"çº¿æ€§æ¨¡å‹ç¯‡ä¹‹softmaxæ•°å­¦å…¬å¼æ¨å¯¼","url":"/2019/04/07/æœºå™¨å­¦ä¹ /çº¿æ€§æ¨¡å‹ç¯‡ä¹‹softmaxæ•°å­¦å…¬å¼æ¨å¯¼/","content":"\n> Softmaxå›å½’ä¹Ÿç§°å¤šé¡¹ï¼ˆmultinomialï¼‰æˆ–è€…å¤šç±»ï¼ˆmulti-classï¼‰çš„Logisticå›å½’ï¼Œæ˜¯Logisticå›å½’åœ¨å¤šç±»åˆ†ç±»é—®é¢˜ä¸Šçš„æ¨å¹¿ã€‚å’Œé€»è¾‘å›å½’ä¸€æ ·å±äºçº¿æ€§æ¨¡å‹ã€‚\n\n<!--More-->\n\n# SoftMaxå›å½’ç®€ä»‹\nå¯¹äºå¤šç±»é—®é¢˜ï¼Œç±»åˆ«æ ‡ç­¾\n\n\n$$\ny \\in {1,2,3,...,C} \n$$\n\nå¯ä»¥ç”¨Cä¸ªå–å€¼ï¼Œç»™å®šä¸€ä¸ªæ ·æœ¬xï¼Œsoftmaxå›å½’é¢„æµ‹çš„æ˜¯å±äºç±»åˆ«cçš„æ¦‚ç‡ä¸º(å…¬å¼-1)ï¼š\n\n$$\np(y=c|x)=softmax(w_c^Tx)=\\frac{exp(w_c^Tx)}{\\sum_{c=1}^{C}exp(w_c^Tx)}\n$$\n\nå…¶ä¸­w_cæ˜¯ç¬¬cç±»çš„æƒé‡å‘é‡ã€‚\n\nsoftmaxå›å½’çš„å†³ç­–å‡½æ•°å¯ä»¥è¡¨ç¤ºä¸º(å…¬å¼-2)ï¼š\n\n$$\n\\hat{y}=  \\underset{c=1}{ \\overset{C}{arg max} } \\ p(y=c|x) =\\underset{c=1}{ \\overset{C}{arg max} } \\ w_c^T x \n$$\n\n---\n\nsoftMaxä¸Logisticå›å½’çš„å…³ç³»ï¼š\n\nå½“ç±»åˆ«ä¸ªC=2æ—¶ï¼ŒsoftMaxå›å½’çš„å†³ç­–å‡½æ•°ä¸º(å…¬å¼-3)ï¼š\n\n\n$$\n\\hat{y} = \\underset{y\\in {0,1}}{ arg max } \\ w_y^Tx=I(w_1^Tx - w_0^Tx >0 )=I((w_1 - w_0)^Tx >0 )\n$$\n\nå…¶ä¸­I(.)æ˜¯æŒ‡ç¤ºå‡½æ•°ï¼Œå¯¹æ¯”äºŒåˆ†ç±»å†³ç­–å‡½æ•°(å…¬å¼-4)\n\n\n$$\ng(f(x,w))=sgn(f(x,w))=\\begin{cases}\n & +1 \\text{ if } f(x,w)>0 \\\\ \n & -1 \\text{ if } f(x,w)<0 \n\\end{cases}\n$$\n\nå…¶ä¸­sgnè¡¨ç¤ºç¬¦å·å‡½æ•°(sign function)ï¼Œå¯ä»¥å‘ç°ä¸¤ç±»åˆ†ç±»ä¸­çš„æƒé‡å‘é‡w=w1-w0\n\n---\n\nå‘é‡è¡¨ç¤ºï¼š\n\nå…¬å¼-1ç”¨å‘é‡å½¢å¼å¯ä»¥å†™ä¸º(å…¬å¼-5)\n\n\n$$\n\\hat{y}=softmax(W^Tx)=\\frac{erp(W^Tx)}{1^Texp(W^Tx)}\n$$\n\nå…¶ä¸­W=[w_1,w_2,...,w_C]æ˜¯ç”±Cä¸ªç±»çš„æƒé‡å‘é‡ç»„æˆçš„çŸ©é˜µï¼Œ1ä¸ºå…¨1çš„å‘é‡ï¼Œ\n\n\n$$\n\\hat{y}\\in  R^C\n$$\n\nä¸ºæ‰€æœ‰ç±»åˆ«çš„é¢„æµ‹æ¡ä»¶æ¦‚ç‡ç»„æˆçš„å‘é‡ï¼Œç¬¬cç»´çš„å€¼æ˜¯ç¬¬cç±»çš„é¢„æµ‹æ¡ä»¶æ¦‚ç‡ã€‚\n\n# å‚æ•°å­¦ä¹ \nç»™å®šNä¸ªè®­ç»ƒæ ·æœ¬{(x^n, y^n)},n<=Nï¼Œsoftmaxå›å½’ä½¿ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°æ¥å­¦ä¹ æœ€ä¼˜çš„å‚æ•°çŸ©é˜µWã€‚\n\nè¿™é‡Œç”¨Cç»´çš„one-hotå‘é‡\n\n\n$$\ny \\in {0,1} ^C\n$$\n\næ¥è¡¨ç¤ºç±»åˆ«æ ‡ç­¾ï¼Œå…¶å‘é‡è¡¨ç¤ºä¸º(å…¬å¼-6)ï¼š\n\n$$\ny = [I(1=c),I(2=c),...,I(C=c)]^T\n$$\nå…¶ä¸­I(.)ä¸ºæŒ‡ç¤ºå‡½æ•°ã€‚\n\né‡‡ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°ï¼Œsoftmaxçš„ç»éªŒé£é™©å‡½æ•°ä¸º(å…¬å¼-7)ï¼š\n\n$$\nR(W)=-\\frac{1}{N}\\sum_{n=1}^{N}\\sum_{c=1}^{C}y_c^nlog\\hat{y}_c^n\nR(W)=-\\frac{1}{N}\\sum_{n=1}^{N} (y^n)^Tlog\\hat{y}^n\n$$\n\nå…¶ä¸­\n\n$$\n\\hat{y}^n = softmax(W^Tx^n)\n$$\n\nä¸ºæ ·æœ¬x^nåœ¨æ¯ä¸ªç±»åˆ«çš„åéªŒæ¦‚ç‡ã€‚\n\n==è¯´æ˜ï¼šå…¬å¼-7ç¬¬ä¸€ä¸ªå¼å˜æ¢åˆ°ç¬¬äºŒä¸ªå¼æ˜¯å› ä¸ºy_cç±»åˆ«ä¸­åªæœ‰ä¸€ä¸ªä¸º1ï¼Œå…¶ä½™ä¸º0ï¼Œæ‰€ä»¥å°†ç¬¬äºŒä¸ªæ±‚å’Œå»é™¤ã€‚==\n\né£é™©å‡½æ•°R(W)å…³äºWçš„æ¢¯åº¦ä¸º(å…¬å¼-8)ï¼š\n\n$$\n\\frac{\\partial R(W)}{\\partial W} = -\\frac{1}{N}\\sum_{n=1}^{N}x^n(y^n-\\hat{y}^n)^T\n$$\n\n==**è¯æ˜ï¼š**==\n\nè®¡ç®—å…¬å¼-8ä¸­çš„æ¢¯åº¦ï¼Œå…³é”®åœ¨äºè®¡ç®—æ¯ä¸ªæ ·æœ¬çš„æŸå¤±å‡½æ•°\n\n$$\nL^n(W)=-(y^n)^Tlog\\hat{y}^n\n$$\n\nå…³äºå‚æ•°Wçš„æ¢¯åº¦ï¼Œå…¶ä¸­éœ€è¦ç”¨åˆ°ä¸¤ä¸ªå¯¼æ•°å…¬å¼ä¸ºï¼š\n- è‹¥y=softmax(z)ï¼Œåˆ™\n\n$$\n\\frac{\\partial y}{\\partial z}=diag(y)-yy^T\n$$\n\n- è‹¥\n\n\n$$\nz=W^Tx=[w_1^Tx,w_2^Tx,...,w_C^Tx]^T\n$$\n\nåˆ™\n\n$$\n\\frac{\\partial y}{\\partial w_c}\n$$\n\nä¸ºç¬¬cåˆ—ä¸ºxï¼Œå…¶ä½™ä¸º0çš„çŸ©é˜µã€‚\n\n$$\n\\frac{\\partial z}{\\partial w_c} = [ \\frac{\\partial w_1^Tx}{\\partial w_c},\\frac{\\partial w_2^Tx}{\\partial w_c},...,\\frac{\\partial w_C^Tx}{\\partial w_c} ]\n=[0,0,..,x,...,0]\n=M_c(x)\n$$\n\næ ¹æ®é“¾å¼æ³•åˆ™ï¼Œ\n\n$$\nL^n(W) = -(y^n)^T log\\hat{y}^n\n$$\n\nå…³äºw_cçš„åå¯¼æ•°ä¸º(å…¬å¼-12)ï¼š\n\n$$\n\\frac{\\partial L^n(W) }{\\partial w_c}\n= -\\frac{ \\partial ((y^n)^T log \\hat{y}^n) }{\\partial w_c}\n$$\n$$\n= -\\frac{\\partial z^n}{ \\partial w_c } \\frac{\\partial \\hat{y}^n}{ \\partial z^n }\\frac{\\partial log \\hat{y}^n}{ \\partial \\hat{y}^n } y^n\n$$\n$$\n=-M_c(x^n)(diag(\\hat{y}^n)-\\hat{y}^n(\\hat{y}^n)^T)(diag(\\hat{y}^n))^{-1} y^n\n$$\n$$\n=-M_c(x^n)(I-\\hat{y}^n1^T)y^n\n$$\n$$\n=-M_c(x^n)(y^n-\\hat{y}^n1^Ty^n)\n$$\n$$\n=-M_c(x^n)(y^n-\\hat{y}^n)\n$$\n$$\n=-x^n[y^n-\\hat{y}^n]_c\n\n$$\nå…¬å¼-12ä¹Ÿå¯ä»¥è¡¨ç¤ºä¸ºéå‘é‡å½¢å¼(å…¬å¼-13)ï¼š\n\n$$\n\\frac{\\partial L^n(W) }{\\partial w_c}= -x^n(I(y^n=c)-\\hat{y}_c^n)\n\n$$\n\nå…¶ä¸­I(.)ä¸ºæŒ‡ç¤ºå‡½æ•°ï¼Œæ ¹æ®å…¬å¼-12å¯ä»¥å¾—åˆ°(å…¬å¼-14)\n\n$$\n\\frac{\\partial L^n(W) }{\\partial W} = -x^n(y^n-\\hat{y}^n)^T\n$$\n\né‡‡ç”¨æ¢¯åº¦ä¸‹é™æ³•ï¼Œsoftmaxå›å½’çš„è®­ç»ƒè¿‡ç¨‹ä¸ºï¼šåˆå§‹åŒ–W_0 <- 0ï¼Œç„¶åé€šè¿‡ä¸‹å¼è¿›è¡Œè¿­ä»£æ›´æ–°ã€‚\n\n$$\nW_{t+1} = W_t + \\alpha (\\frac{1}{N} \\sum_{n=1}^{N}x^n(y^n - \\hat{y}_{W_t} ^ n)^T)\n$$\n\nå…¶ä¸­aæ˜¯å­¦ä¹ ç‡ï¼Œ\n\n$$\n\\hat{y}_{W_t}^n\n$$\næ˜¯å½“å‚æ•°ä¸ºW_tæ—¶ï¼Œsoftmaxå›å½’æ¨¡å‹çš„è¾“å‡ºã€‚\n\n---\n\n**æ³¨æ„ï¼š**\n> softmaxå›å½’ä¸­ä½¿ç”¨çš„Cä¸ªæƒé‡å‘é‡æ˜¯å†—ä½™çš„ï¼Œå³å¯¹æ‰€æœ‰æƒé‡å‘é‡éƒ½å‡å»ä¸€ä¸ªåŒæ ·çš„å‘é‡vï¼Œä¸æ”¹å˜å…¶è¾“å‡ºç»“æœã€‚å› æ­¤ï¼Œsoftmaxå¾€å¾€éœ€è¦æ­£åˆ™åŒ–æ¥çº¦æŸå‚æ•°ã€‚æ­¤å¤–ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æ¥é¿å…è®¡ç®—softmaxå‡½æ•°æ—¶åœ¨æ•°å€¼è®¡ç®—ä¸Šæº¢å‡ºé—®é¢˜ã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"çº¿æ€§æ¨¡å‹ç¯‡ä¹‹Logistic Regressionæ•°å­¦å…¬å¼æ¨å¯¼","url":"/2019/04/02/æœºå™¨å­¦ä¹ /çº¿æ€§æ¨¡å‹ç¯‡ä¹‹Logistic Regressionæ•°å­¦å…¬å¼æ¨å¯¼/","content":"\n> æœ¬æ–‡ä¸»è¦ä»‹ç» çº¿æ€§æ¨¡å‹ç¯‡ä¹‹Logistic Regressionæ•°å­¦å…¬å¼æ¨å¯¼ã€‚\n<!--More-->\n\n# ä¸¤åˆ†ç±»ä¸å¤šåˆ†ç±»\n\n- ä¸¤ç±»åˆ†ç±»ï¼ˆBinary Classificationï¼‰\n  - ç±»åˆ«æ ‡ç­¾yåªæœ‰ä¸¤ç§å–å€¼ï¼Œé€šå¸¸è®¾ä¸º{0ï¼Œ1}\n  - çº¿æ€§åˆ¤åˆ«å‡½æ•°ï¼Œå³å½¢å¦‚ y = w^T*x + b\n  - åˆ†å‰²è¶…å¹³é¢ï¼ˆhyper planeï¼‰,ç”±æ»¡è¶³f(w,x)=0çš„ç‚¹ç»„æˆ\n  - å†³ç­–è¾¹ç•Œï¼ˆDecision boundaryï¼‰ã€å†³ç­–å¹³é¢ï¼ˆDecision surfaceï¼‰ï¼šå³åˆ†åˆ†å‰²è¶…å¹³é¢ï¼Œå†³ç­–è¾¹ç•Œå°†ç‰¹å¾ç©ºé—´ä¸€åˆ†ä¸ºäºŒï¼Œåˆ’åˆ†æˆä¸¤ä¸ªåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸå¯¹åº”ä¸€ä¸ªç±»åˆ«ã€‚\n  - æœ‰å‘è·ç¦»ï¼ˆsigned distanceï¼‰\n- å¤šæ ·åˆ†ç±»ï¼ˆMulti-class Classificationï¼‰\n  - åˆ†ç±»çš„ç±»åˆ«ä¸ªæ•°å¤§äº2ï¼Œå¤šåˆ†ç±»ä¸€èˆ¬éœ€è¦å¤šä¸ªçº¿æ€§åˆ¤åˆ«å‡½æ•°ï¼Œä½†è®¾è®¡è¿™äº›åˆ¤åˆ«å‡½æ•°æœ‰å¾ˆå¤šæ–¹å¼ã€‚egï¼š\n    - ä¸€å¯¹å…¶ä½™ï¼šå±äºå’Œä¸å±äº\n    - ä¸€å¯¹ä¸€\n    - argmaxï¼ˆæ”¹è¿›çš„ä¸€å¯¹å…¶ä½™ï¼‰ï¼šå±äºæ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡ï¼Œæ‰¾æ¦‚ç‡æœ€å¤§å€¼\n  - å‚è€ƒï¼š[å¤šåˆ†ç±»å®ç°æ–¹å¼ä»‹ç»å’Œåœ¨Sparkä¸Šå®ç°å¤šåˆ†ç±»é€»è¾‘å›å½’](https://blog.csdn.net/Gamer_gyt/article/details/86378882)\n\n# Logisticå›å½’\n## LRå›å½’\nLogisticå›å½’ï¼ˆLogistic Regressionï¼ŒLRï¼‰æ˜¯ä¸€ç§å¸¸è§çš„å¤„ç†äºŒåˆ†ç±»çš„çº¿æ€§å›å½’æ¨¡å‹ã€‚\n\nä¸ºäº†è§£å†³è¿ç»­çš„çº¿æ€§å›å½’å‡½æ•°ä¸é€‚åˆåšåˆ†ç±»çš„é—®é¢˜ï¼Œå¼•å…¥å‡½æ•°gï¼šR^d -> (0,1)æ¥é¢„æµ‹ç±»åˆ«æ ‡ç­¾çš„åéªŒæ¦‚ç‡p(y=1 | x)\n\nå…¶ä¸­g(.)é€šå¸¸ç§°ä¸ºæ¿€æ´»å‡½æ•°ï¼ˆactivation functionï¼‰ï¼Œå…¶ä½œç”¨æ˜¯æŠŠçº¿æ€§å‡½æ•°çš„å€¼åŸŸä»å®æ•°åŒºé—´â€œæŒ¤å‹â€åˆ°äº†ï¼ˆ0ï¼Œ1ï¼‰ä¹‹é—´ï¼Œå¯ä»¥ç”¨æ¦‚ç‡è¡¨ç¤ºã€‚åœ¨ç»Ÿè®¡æ–‡çŒ®ä¸­ï¼Œg(.)çš„é€†å‡½æ•°g(.)^-1ä¹Ÿç§°ä¸ºè”ç³»å‡½æ•°ï¼ˆLink Functionï¼‰\n\nåœ¨é€»è¾‘å›å½’ä¸­ä½¿ç”¨Logisticä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Œæ ‡ç­¾y=1çš„åéªŒæ¦‚ç‡ä¸º(å…¬å¼-1)ï¼š\n$$\np(y=1 | x) = \\sigma (w^T x) \n$$\n$$\np(y=1 | x)= \\frac{1}{1+exp(-w^T x)}\n$$\n\næ ‡ç­¾ y=0çš„åéªŒæ¦‚ç‡ä¸º(å…¬å¼-2)ï¼š\n$$\np(y=0 | x) =1-p(y=0 | x)\n$$\n$$\np(y=0 | x)= \\frac{exp(-w^T x)}{1+exp(-w^T x)}\n$$\nå°†å…¬å¼-1è¿›è¡Œç­‰ä»·å˜æ¢ï¼Œå¯å¾—(å…¬å¼-3)ï¼š\n$$\nw^T x = log \\frac{p(y=1 | x)}{1-p(y=1 | x)} \n$$\n$$\nw^T x = log \\frac { p(y=1 | x)}{p(y=0|x)}\n$$\nå…¶ä¸­\n$$\n\\frac { p(y=1 | x)}{p(y=0|x)}\n$$\nä¸ºæ ·æœ¬xæ­£åä¾‹åéªŒæ¦‚ç‡çš„æ¯”ä¾‹ï¼Œç§°ä¸ºå‡ ç‡ï¼ˆoddsï¼‰ï¼Œå‡ ç‡çš„å¯¹æ•°ç§°ä¸ºå¯¹æ•°å‡ ç‡ï¼ˆlog oddsæˆ–è€…logitï¼‰ï¼Œå…¬å¼-3ä¸­ç¬¬ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå·¦è¾¹æ˜¯çº¿æ€§å‡½æ•°ï¼Œlogisticå›å½’å¯ä»¥çœ‹åšæ˜¯é¢„æµ‹å€¼ä¸ºâ€œæ ‡ç­¾çš„å¯¹æ•°å‡ ç‡â€çš„çº¿æ€§å›å½’æ¨¡å‹ï¼Œå› ä¸ºLogisticå›å½’ä¹Ÿç§°ä¸ºå¯¹æ•°å‡ ç‡å›å½’ï¼ˆLogit Regressionï¼‰ã€‚\n\né™„å…¬å¼-1åˆ°å…¬å¼-3çš„æ¨å¯¼ï¼š\n$$\np(y=1 | x)= \\frac{1}{1+exp(-w^T x)} \n$$\n$$\n=> exp(-w^Tx) = \\frac{1-p(y=1 | x)}{p(y=1 | x)} \n$$\n$$\n=> - w^T x = log \\frac{1- p(y=1 | x)}{p(y=1 | x)}\n$$\n$$\n=>  w^T x = log (\\frac{1- p(y=1 | x)}{p(y=1 | x)})^{-1}\n$$\n$$\n=> w^T x = log \\frac{p(y=1 | x)}{1-p(y=1 | x)}\n$$\n$$\n=> w^T x = log \\frac{p(y=1 | x)}{p(y=0 | x)}\n$$\n\n## å‚æ•°å­¦ä¹ \nLRå›å½’é‡‡ç”¨äº¤å‰ç†µä½œä¸ºæŸå¤±å‡½æ•°ï¼Œå¹¶ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ³•å¯¹å‚æ•°è¿›è¡Œä¼˜åŒ–ã€‚ç»™å®šNä¸ªè®­ç»ƒæ ·æœ¬{x_i,y_i}ï¼Œi<=Nï¼Œä½¿ç”¨LRå¯¹æ¯ä¸ªæ ·æœ¬è¿›è¡Œé¢„æµ‹ï¼Œå¹¶ç”¨è¾“å‡ºx_içš„æ ‡ç­¾ä¸º1çš„åéªŒæ¦‚ç‡ï¼Œè®°ä¸ºy'_i(x)  (å…¬å¼-4)\n$$\ny'_i(x) = \\sigma(w^Tx_i),i\\in N\n$$\nç”±äºy_iå±äº{0ï¼Œ1}ï¼Œæ ·æœ¬{x_i,y_i}çš„çœŸå®æ¦‚ç‡å¯ä»¥è¡¨ç¤ºä¸º(å…¬å¼-5)ï¼š\n$$\np_r(y_i =1 | x_i) = y_i\n$$\n$$\np_r(y_i =0 | x_i) = 1- y_i\n$$\nä½¿ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°ï¼Œå…¶é£é™©å‡½æ•°ä¸º(å…¬å¼-6)ï¼š\n$$\nR(w)= - \\frac{1}{N}\\sum_{n=1}^{N} (p_r(y_i =1 | x_i) log(y_i') + p_r(y_i =0 | x_i) log(1-y_i') )\n$$\n$$\n= - \\frac{1}{N}\\sum_{n=1}^{N} ( y_i log(y_i') + (1-y_i') log(1-y_i') )\n$$\né£é™©å‡½æ•°R(w)å…³äºå‚æ•°wçš„å¯¼æ•°ä¸º(å…¬å¼-7)ï¼š\n$$\n\\frac{ \\partial R(w)}{ \\partial w} = - \\frac{1}{N}\\sum_{n=1}^{N}( y_i \\frac{y_i'(1-y_i')}{y_i'}x_i -(1-y_i)\\frac{y_i'(1-y_i')}{1-y_i'}x_i  )\n$$\n$$\n= - \\frac{1}{N}\\sum_{n=1}^{N}( y_i(1-y_i')x_i -(1-y_i)y_i'x_i)\n$$\n$$\n= - \\frac{1}{N}\\sum_{n=1}^{N}x_i(y_i-y_i')\n$$\né‡‡ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ŒLogisticçš„å›å½’è®­ç»ƒè¿‡ç¨‹ä¸ºï¼šåˆå§‹åŒ–w_0 ä¸º0ï¼Œç„¶åé€šè¿‡ä¸‹å¼æ¥æ›´æ–°è¿­ä»£å‚æ•°(å…¬å¼-8)ã€‚\n$$\nw_{t+1} \\leftarrow w_t + \\alpha \\frac{1}{N}\\sum_{n=1}^{N} x_i(y_i-y_{w_t}')\n$$\nå…¶ä¸­aæ˜¯å­¦ä¹ ç‡ï¼Œy_{wt}'æ˜¯å½“å‚æ•°ä¸ºw_t æ—¶ï¼ŒLogisticå›å½’çš„è¾“å‡ºã€‚\n\nä»å…¬å¼-6å¯çŸ¥ï¼Œé£é™©å‡½æ•°R(w)æ˜¯å…³äºå‚æ•°wçš„è¿ç»­å¯å¯¼çš„å‡¸å‡½æ•°ï¼Œå› æ­¤é™¤äº†æ¢¯åº¦ä¸‹é™ç®—æ³•å¤–ï¼ŒLogisticè¿˜å¯ä»¥ä½¿ç”¨é«˜é˜¶çš„ä¼˜åŒ–ç®—æ³•ï¼Œæ¯”å¦‚ç‰›é¡¿æ³•æ¥è¿›è¡Œä¼˜åŒ–ã€‚\n\nè¯´æ˜:\n- ä¸¤ä¸ªæœªçŸ¥æ•°ç›¸ä¹˜æ±‚å¯¼ï¼š\n$$\n(ab)' = a'b + ab'\n$$\n- sigmoidå‡½æ•°æ±‚å¯¼åä¸ºï¼š\n$$\n\\sigma ' = \\sigma (1-\\sigma )x\n$$\n\n---\n## å‚è€ƒ\n- https://zhuanlan.zhihu.com/p/44591359\n- https://blog.csdn.net/wgdzz/article/details/48816307\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"æœºå™¨å­¦ä¹ ç®—æ³•åˆ†ç±»","url":"/2019/03/26/æœºå™¨å­¦ä¹ /æœºå™¨å­¦ä¹ ç®—æ³•åˆ†ç±»/","content":"\n> æœºå™¨å­¦ä¹ ç®—æ³•å¯ä»¥æŒ‰ç…§ä¸åŒçš„æ ‡å‡†è¿›è¡Œåˆ†ç±»ã€‚æ¯”å¦‚æŒ‰å‡½æ•°f(X)çš„ä¸åŒï¼Œæœºå™¨å­¦ä¹ ç®—æ³•å¯ä»¥åˆ†ä¸ºçº¿æ€§æ¨¡å‹å’Œéçº¿æ€§æ¨¡å‹ï¼›æŒ‰ç…§å­¦ä¹ å‡†åˆ™çš„ä¸åŒï¼Œæœºå™¨å­¦ä¹ ç®—æ³•ä¹Ÿå¯ä»¥åˆ†ä¸ºç»Ÿè®¡æ–¹æ³•å’Œéç»Ÿè®¡æ–¹æ³•ã€‚\n> \n> ä½†ä¸€èˆ¬è€Œè¨€ï¼Œä¼šæŒ‰ç…§è®­ç»ƒæ ·æœ¬æä¾›çš„ä¿¡æ¯ä»¥åŠåé¦ˆæ–¹å¼ä¸åŒï¼Œå°†æœºå™¨å­¦ä¹ ç®—æ³•åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼Œä¸‹é¢å°†ä¸€ä¸€ç»†è¯´ã€‚\n\n<!--More-->\n- ç›‘ç£å­¦ä¹ \n- æ— ç›‘ç£å­¦ä¹ \n- å¼ºåŒ–å­¦ä¹ \n\n\n\n# ç›‘ç£å­¦ä¹ \nå¦‚æœæœºå™¨å­¦ä¹ çš„ç›®æ ‡æ˜¯é€šè¿‡å»ºæ¨¡æ ·æœ¬çš„ç‰¹å¾xå’Œæ ‡ç­¾yä¹‹é—´çš„å…³ç³»ï¼š\n$$\ny=f(x,\\theta )\n$$\næˆ–\n$$\np(y|x,\\theta)\n$$\nå¹¶ä¸”è®­ç»ƒé›†ä¸­çš„æ¯ä¸ªæ ·æœ¬éƒ½æœ‰æ ‡ç­¾ï¼Œé‚£ä¹ˆè¿™ç±»å­¦ä¹ ç§°ä¹‹ä¸ºç›‘ç£å­¦ä¹ ï¼ˆSupervised Learningï¼‰ã€‚æ ¹æ®æ ‡ç­¾ç±»å‹çš„ä¸åŒï¼Œç›‘ç£å­¦ä¹ åˆå¯ä»¥åˆ†ä¸ºå›å½’å’Œåˆ†ç±»ä¸¤ç§ã€‚\n## å›å½’ï¼ˆRegressionï¼‰\n\nå›å½’é—®é¢˜ä¸­çš„æ ‡ç­¾yæ˜¯è¿ç»­å€¼ï¼ˆå®æ•°æˆ–è€…è¿ç»­æ•´æ•°ï¼‰\n$$\ny=f(x,\\theta ) \n$$\nçš„è¾“å‡ºä¹Ÿæ˜¯è¿ç»­å€¼ã€‚\n## åˆ†ç±»ï¼ˆClassificationï¼‰\nåˆ†ç±»é—®é¢˜ä¸­çš„æ ‡ç­¾yæ˜¯ç¦»æ•£çš„ç±»åˆ«ï¼Œåœ¨åˆ†ç±»é—®é¢˜ä¸­ï¼Œå­¦ä¹ åˆ°çš„æ¨¡å‹ä¹Ÿæˆä¸ºåˆ†ç±»å™¨ï¼ˆClassifierï¼‰ã€‚åˆ†ç±»é—®é¢˜æ ¹æ®å…¶ç±»åˆ«çš„æ•°é‡åˆå¯ä»¥åˆ†ä¸ºäºŒåˆ†ç±»ï¼ˆBinary Clssificationï¼‰å’Œå¤šåˆ†ç±»ï¼ˆMutil-class Classificationï¼‰ã€‚\n\n## æœºæ„åŒ–å­¦ä¹ ï¼ˆStructured Learningï¼‰\nç»“æ„åŒ–å­¦ä¹ çš„è¾“å‡ºå¯¹è±¡æ˜¯ç»“æ„åŒ–çš„å¯¹è±¡ï¼Œæ¯”å¦‚åºåˆ—ã€æ ‘ã€å›¾ç­‰ï¼Œç”±äºç»“æ„åŒ–å­¦ä¹ çš„è¾“å‡ºç©ºé—´æ¯”è¾ƒå¤§ï¼Œå› æ­¤æˆ‘ä»¬ä¸€èˆ¬å®šä¹‰ä¸€ä¸ªè”åˆç‰¹å¾ç©ºé—´ï¼Œå°†x,yæ˜ å°„ä¸ºè¯¥ç©ºé—´ä¸­çš„è”åˆç‰¹å¾å‘é‡ï¼ˆx,yï¼‰,é¢„æµ‹æ¨¡å‹å¯ä»¥å†™ä¸ºï¼š\n$$\n\\hat{y}=\\underset{y \\in Gen(x)}{arg max f(\\phi (x,y),\\theta )}\n$$\nå…¶ä¸­gen(x)è¡¨ç¤ºxæ‰€æœ‰å¯èƒ½çš„è¾“å‡ºç›®æ ‡é›†åˆã€‚è®¡ç®—arg maxçš„è¿‡ç¨‹ä¹Ÿç§°ä¸ºè§£ç ï¼ˆdecodingï¼‰è¿‡ç¨‹ï¼Œä¸€èˆ¬é€šè¿‡åŠ¨æ€è§„åˆ’çš„æ–¹æ³•æ¥è®¡ç®—ã€‚\n\n# æ— ç›‘ç£å­¦ä¹ \næ— ç›‘ç£å­¦ä¹ ï¼ˆUnsupervised Learningï¼‰æ˜¯æŒ‡ä»ä¸åŒ…å«ç›®æ ‡æ ‡ç­¾çš„è®­ç»ƒæ ·æœ¬ä¸­è‡ªåŠ¨å­¦ä¹ åˆ°ä¸€äº›æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚å…¸å‹çš„æ— ç›‘ç£å­¦ä¹ é—®é¢˜æœ‰èšç±»ã€å¯†åº¦ä¼°è®¡ã€ç‰¹å¾å­¦ä¹ ã€é™ç»´ç­‰ã€‚\n\n# å¼ºåŒ–å­¦ä¹ \nå¼ºåŒ–å­¦ä¹ ï¼ˆReinforcement Learningï¼‰æ˜¯ä¸€ç±»é€šè¿‡äº¤äº’æ¥å­¦ä¹ çš„æœºå™¨å­¦ä¹ ç®—æ³•ã€‚åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œæ™ºèƒ½ä½“æ ¹æ®ç¯å¢ƒçš„çŠ¶æ€ä½œå‡ºä¸€ä¸ªåŠ¨ä½œï¼Œå¹¶å¾—åˆ°å³æ—¶æˆ–å»¶æ—¶çš„å¥–åŠ±ã€‚æ™ºèƒ½ä½“åœ¨å’Œç¯å¢ƒçš„äº¤äº’ä¸­ä¸æ–­å­¦ä¹ å¹¶è°ƒæ•´ç­–ç•¥ï¼Œä»¥å–å¾—æœ€å¤§åŒ–çš„æœŸæœ›æ€»å›æŠ¥ã€‚\n\nä¸‹è¡¨ç»™å‡ºäº†ä¸‰ç§æœºå™¨å­¦ä¹ ç±»å‹\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20190326174240856.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\nç›‘ç£å­¦ä¹ éœ€è¦æ¯ä¸ªæ ·æœ¬éƒ½æœ‰æ ‡ç­¾ï¼Œè€Œæ— ç›‘ç£å­¦ä¹ åˆ™ä¸éœ€è¦æ ‡ç­¾ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œç›‘ç£å­¦ä¹ é€šå¸¸å¤§é‡çš„æœ‰æ ‡ç­¾æ•°æ®é›†ï¼Œè¿™äº›æ•°æ®é›†æ˜¯ä¸€èˆ¬éƒ½éœ€è¦ç”±äººå·¥è¿›è¡Œæ ‡æ³¨ï¼Œæˆæœ¬å¾ˆé«˜ã€‚å› æ­¤ï¼Œä¹Ÿå‡ºç°äº†å¾ˆå¤šå¼±ç›‘ç£å­¦ä¹ ï¼ˆWeak Supervised Learningï¼‰å’ŒåŠç›‘ç£å­¦ä¹ ï¼ˆSemi-Supervised Learningï¼‰çš„æ–¹æ³•ï¼Œå¸Œæœ›ä»å¤§è§„æ¨¡çš„æ— æ ‡æ³¨æ•°æ®ä¸­å……åˆ†æŒ–æ˜æœ‰ç”¨çš„ä¿¡æ¯ï¼Œé™ä½å¯¹æ ‡æ³¨æ ·æœ¬æ•°é‡çš„è¦æ±‚ã€‚å¼ºåŒ–å­¦ä¹ å’Œç›‘ç£å­¦ä¹ çš„ä¸åŒåœ¨äºå¼ºåŒ–å­¦ä¹ ä¸éœ€è¦æ˜¾å¼åœ°ä»¥â€œè¾“å…¥/è¾“å‡ºå¯¹â€çš„æ–¹å¼ç»™å‡ºè®­ç»ƒæ ·æœ¬ï¼Œæ˜¯ä¸€ç§åœ¨çº¿çš„å­¦ä¹ æœºåˆ¶ã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ä»çº¿æ€§å›å½’çœ‹åå·®-æ–¹å·®åˆ†è§£ï¼ˆBias-Variance Decompositionï¼‰","url":"/2019/03/25/æœºå™¨å­¦ä¹ /ä»çº¿æ€§å›å½’çœ‹åå·®-æ–¹å·®åˆ†è§£ï¼ˆBias-Variance Decompositionï¼‰/","content":"> æœ¬æ–‡ä¸»è¦ä»‹ç»ä»çº¿æ€§å›å½’çœ‹åå·®-æ–¹å·®åˆ†è§£ï¼ˆBias-Variance Decompositionï¼‰\n\n<!--More-->\n\n# æ¦‚è¿°\nå¯¹äºæ•°å­—åºåˆ—1ï¼Œ3ï¼Œ5ï¼Œ7ï¼Œï¼Ÿï¼Œæ­£å¸¸æƒ…å†µä¸‹å¤§å®¶è„‘æµ·é‡Œè¹¦å‡ºçš„æ˜¯9ï¼Œä½†æ˜¯217314ä¹Ÿæ˜¯å…¶ä¸€ä¸ªè§£\n9å¯¹åº”çš„æ•°å­¦å…¬å¼ä¸º\n$$\nf(x)=2x-1\n$$\n217314å¯¹åº”çš„æ•°å­¦å…¬å¼ä¸º\n$$\nf(x)=\\frac{18111}{2} x^{4}-90555x^{3}+\\frac{633885}{2}x^{2}-452773x+217331\n$$\n\nPython å®ç°ä¸ºï¼š\n```\n>>> def f(x):\n...     return 18111/2 * pow(x,4) -90555 * pow(x,3) + 633885/2 * pow(x,2) -452773 * x +217331\n... \n>>> f(1)\n1.0\n>>> f(2)\n3.0\n>>> f(3)\n5.0\n>>> f(4)\n7.0\n>>> f(5)\n217341.0\n```\n\nå½“æœºå™¨å­¦ä¹ æ¨¡å‹è¿›è¡Œé¢„æµ‹çš„æ—¶å€™ï¼Œé€šå¸¸éƒ½éœ€è¦æŠŠæ¡ä¸€ä¸ªéå¸¸å¾®å¦™çš„å¹³è¡¡ï¼Œä¸€æ–¹é¢æˆ‘ä»¬å¸Œæœ›æ¨¡å‹èƒ½å¤ŸåŒ¹é…æ›´å¤šçš„è®­ç»ƒæ•°æ®ï¼Œç›¸åº”çš„å¢åŠ å…¶å¤æ‚åº¦ï¼Œå¦åˆ™ä¼šä¸¢å¤±ç›¸å…³ç‰¹å¾çš„è¶‹åŠ¿ï¼ˆå³æ¨¡å‹è¿‡æ‹Ÿåˆï¼‰ï¼›ä½†æ˜¯å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬åˆä¸æƒ³è®©æ¨¡å‹è¿‡åˆ†çš„åŒ¹é…è®­ç»ƒæ•°æ®ï¼Œç›¸åº”çš„èˆå¼ƒéƒ¨åˆ†å¤æ‚çš„ï¼Œå› ä¸ºè¿™æ ·å­˜åœ¨è¿‡åº¦è§£ææ‰€æœ‰å¼‚å¸¸å€¼å’Œä¼ªè§„å¾‹çš„é£é™©ï¼Œå¯¼è‡´æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›å·®ï¼ˆå³æ¨¡å‹æ¬ æ‹Ÿåˆï¼‰ã€‚å› æ­¤åœ¨æ¨¡å‹çš„æ‹Ÿåˆèƒ½åŠ›å’Œå¤æ‚åº¦ä¹‹å‰å–å¾—ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æƒè¡¡ï¼Œå¯¹äºä¸€ä¸ªæ¨¡å‹æ¥è®²ååˆ†é‡è¦ã€‚è€Œåå·®-æ–¹å·®åˆ†è§£ï¼ˆBias-Variance Decompositionï¼‰å°±æ˜¯ç”¨æ¥æŒ‡å¯¼å’Œåˆ†æè¿™ç§æƒ…å†µçš„å·¥å…·ã€‚\n# åå·®å’Œæ–¹å·®å®šä¹‰\n- åå·®ï¼ˆBiasï¼‰ï¼šå³é¢„æµ‹æ•°æ®åç¦»çœŸå®æ•°æ®çš„æƒ…å†µã€‚\n- æ–¹å·®ï¼ˆVarianceï¼‰ï¼šæè¿°çš„æ˜¯éšæœºå˜é‡çš„ç¦»æ•£ç¨‹åº¦ï¼Œå³éšæœºå˜é‡åœ¨å…¶æœŸæœ›å€¼é™„è¿‘çš„æ³¢åŠ¨ç¨‹åº¦ã€‚\n\n# åå·®-æ–¹å·®æ¨å¯¼è¿‡ç¨‹\nä»¥å›å½’é—®é¢˜ä¸ºä¾‹ï¼Œå‡è®¾æ ·æœ¬çš„çœŸå®åˆ†å¸ƒä¸ºp_r(x,y)ï¼Œå¹¶é‡‡ç”¨å¹³æ–¹æŸå¤±å‡½æ•°ï¼Œæ¨¡å‹f(x)çš„æœŸæœ›é”™è¯¯ä¸º(å…¬å¼2.1)ï¼š\n$$\nR(f) = E_{(x,y)\\sim p_r{(x,y)}} \\left [ (y-f(x))^2 \\right ]\n$$\né‚£ä¹ˆæœ€ä¼˜æ¨¡å‹ä¸º(å…¬å¼2.2)ï¼š\n$$\nf^*(x) = E_{y\\sim p_r{(y|x)}} \\left [ y \\right ]\n$$\nå…¶ä¸­p_r(y|x)ä¸ºçœŸå®çš„æ ·æœ¬åˆ†å¸ƒï¼Œf^*(x)ä¸ºä½¿ç”¨å¹³æ–¹æŸå¤±ä½œä¸ºä¼˜åŒ–ç›®æ ‡çš„æœ€ä¼˜æ¨¡å‹ï¼Œå…¶æŸå¤±ä¸º(å…¬å¼2.3)ï¼š\n$$\n\\varepsilon  = E_{(x,y)\\sim p_r{(x,y)}} \\left [ (y-f^*(x))^2 \\right ]\n$$\næŸå¤±\n$$\n\\varepsilon \n$$\né€šå¸¸æ˜¯ç”±äºæ ·æœ¬åˆ†å¸ƒåŠå…¶å™ªå£°å¼•èµ·çš„ï¼Œæ— æ³•é€šè¿‡ä¼˜åŒ–æ¨¡å‹æ¥å‡å°‘ã€‚\næœŸæœ›é”™è¯¯å¯ä»¥åˆ†è§£ä¸º(å…¬å¼2.4)ï¼š\n$$\nR(f)\n$$\n$$\n= E_{(x,y)\\sim p_r{(x,y)}} \\left [ (y- f^*(x) + f^*(x) -f(x))^2 \\right ]\n$$\n$$\n= E_{x\\sim p_r{(x)}}\\left [ (f(x) - f^*(x))^2 \\right ] + \\varepsilon \n$$\nå…¬å¼2.4ä¸­çš„ç¬¬ä¸€é¡¹æ˜¯æœºå™¨å­¦ä¹ å¯ä»¥ä¼˜åŒ–çš„çœŸå®ç›®æ ‡ï¼Œæ˜¯å½“å‰æ¨¡å‹å’Œæœ€ä¼˜æ¨¡å‹ä¹‹é—´çš„å·®è·ã€‚\n\nåœ¨å®é™…è®­ç»ƒä¸€ä¸ªæ¨¡å‹f(x)æ—¶ï¼Œè®­ç»ƒé›†Dæ˜¯ä»çœŸå®åˆ†å¸ƒp_r(x,y)ä¸Šç‹¬ç«‹åŒåˆ†å¸ƒçš„é‡‡æ ·å‡ºæ¥çš„æœ‰é™æ ·æœ¬é›†åˆã€‚ä¸åŒçš„è®­ç»ƒé›†ä¼šå¾—åˆ°ä¸åŒçš„æ¨¡å‹ã€‚ä»¤f_D(x)è¡¨ç¤ºåœ¨è®­ç»ƒé›†Dä¸Šå­¦ä¹ åˆ°çš„æ¨¡å‹ï¼Œä¸€ä¸ªæœºå™¨å­¦ä¹ ç®—æ³•ï¼ˆåŒ…æ‹¬æ¨¡å‹å’Œä¼˜åŒ–ç®—æ³•ï¼‰çš„èƒ½åŠ›å¯ä»¥é€šè¿‡æ¨¡å‹åœ¨ä¸åŒè®­ç»ƒé›†ä¸Šçš„å¹³å‡æ€§èƒ½æ¥ä½“ç°ã€‚\n\nå¯¹äºå•ä¸ªæ ·æœ¬xï¼Œä¸åŒè®­ç»ƒé›†Då¾—åˆ°çš„æ¨¡å‹f_D(x)å’Œæœ€ä¼˜æ¨¡å‹f^*(x)çš„ä¸Šçš„æœŸæœ›å·®è·ä¸ºï¼ˆå…¬å¼2.5ï¼‰ï¼š\n$$\nE_D[( f_D(x)-f^*(x) )^2]\n$$\n$$\n=E_D\\left [  ( f_D(x)  - E_D[f_D(x)] +E_D[f_D(x)]   -f^*(x) )^2   \\right ]\n$$\n$$\n=( E_D[f_D(x)]   -f^*(x) )^2 )  + E_D[(f_D(x)  - E_D[f_D(x)] )^2]\n$$\nå…¬å¼2.5æœ€åä¸€è¡Œä¸­çš„ç¬¬ä¸€é¡¹ä¸ºåå·®(bias)ï¼Œæ˜¯æŒ‡ä¸€ä¸ªæ¨¡å‹åœ¨ä¸åŒè®­ç»ƒé›†ä¸Šçš„å¹³å‡æ€§èƒ½å’Œä¸æœ€ä¼˜æ¨¡å‹çš„å·®å¼‚ï¼Œåå·®å¯ä»¥ç”¨æ¥è¡¡é‡ä¸€ä¸ªæ¨¡å‹çš„æ‹Ÿåˆèƒ½åŠ›ï¼›ç¬¬äºŒé¡¹æ˜¯æ–¹å·®ï¼ˆvarianceï¼‰ï¼Œæ˜¯æŒ‡ä¸€ä¸ªæ¨¡å‹åœ¨ä¸åŒè®­ç»ƒé›†ä¸Šçš„å·®å¼‚ï¼Œå¯ä»¥ç”¨æ¥è¡¡é‡ä¸€ä¸ªæ¨¡å‹æ˜¯å¦å®¹æ˜“è¿‡æ‹Ÿåˆã€‚\n\né›†åˆå…¬å¼2.4å’Œå…¬å¼2.5ï¼ŒæœŸæœ›é”™è¯¯å¯ä»¥åˆ†è§£ä¸º(å…¬å¼2.6)ï¼š\n$$\nR(f)= (bias)^2 + variance +  \\varepsilon \n$$\nå…¶ä¸­\n$$\n(bias)^2 =  E_X[E_D[f_D(x)]   -f^*(x) )^2 ]\n$$\n$$\nvariance = E_X [ E_D[(f_D(x)  - E_D[f_D(x)] )^2] ]\n$$\næœ€å°åŒ–æœŸæœ›é”™è¯¯ç­‰ä»·äºæœ€å°åŒ–åå·®å’Œæ–¹å·®ä¹‹å’Œã€‚\n\n# åå·®å’Œæ–¹å·®åˆ†æ\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20190325231703314.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\nä¸Šå›¾ä¸ºæœºå™¨å­¦ä¹ ä¸­åå·®å’Œæ–¹å·®çš„å››ç§ä¸åŒæƒ…å†µã€‚æ¯ä¸ªå›¾çš„ä¸­å¿ƒç‚¹ä¸ºæœ€ä¼˜æ¨¡å‹f*(x)ï¼Œè“ç‚¹ä¸ºä¸åŒè®­ç»ƒé›†D ä¸Šå¾—åˆ°çš„æ¨¡å‹f_D(x)ã€‚\n- (a)ç»™å‡ºäº†ä¸€ç§ç†æƒ³æƒ…å†µï¼Œæ–¹å·®å’Œåå·®éƒ½æ¯”è¾ƒå°\n- (b)ä¸ºé«˜åå·®ä½æ–¹å·®çš„æƒ…å†µï¼Œè¡¨ç¤ºæ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›å¾ˆå¥½ï¼Œä½†æ‹Ÿåˆèƒ½åŠ›ä¸è¶³\n- (c)ä¸ºä½åå·®é«˜æ–¹å·®çš„æƒ…å†µï¼Œè¡¨ç¤ºæ¨¡å‹çš„æ‹Ÿåˆèƒ½åŠ›å¾ˆå¥½ï¼Œä½†æ³›åŒ–èƒ½åŠ›æ¯”è¾ƒå·®ã€‚å½“è®­ç»ƒæ•°æ®æ¯”è¾ƒå°‘æ—¶ä¼šå¯¼è‡´è¿‡æ‹Ÿåˆ\n- (d)ä¸ºé«˜åå·®é«˜æ–¹å·®çš„æƒ…å†µï¼Œæ˜¯ä¸€ç§æœ€å·®çš„æƒ…å†µ\n\næ–¹å·®ä¸€èˆ¬ä¼šéšç€è®­ç»ƒæ ·æœ¬çš„å¢åŠ è€Œå‡å°‘ã€‚å½“æ ·æœ¬æ¯”è¾ƒå¤šæ—¶ï¼Œæ–¹å·®æ¯”è¾ƒå°‘ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©èƒ½åŠ›å¼ºçš„æ¨¡å‹æ¥å‡å°‘åå·®ã€‚ç„¶è€Œåœ¨å¾ˆå¤šæœºå™¨å­¦ä¹ ä»»åŠ¡ä¸Šï¼Œè®­ç»ƒé›†ä¸Šå¾€å¾€éƒ½æ¯”è¾ƒæœ‰é™ï¼Œæœ€ä¼˜çš„åå·®å’Œæœ€ä¼˜çš„æ–¹å·®å°±æ— æ³•å…¼é¡¾ã€‚\n\néšç€æ¨¡å‹å¤æ‚åº¦çš„å¢åŠ ï¼Œæ¨¡å‹çš„æ‹Ÿåˆèƒ½åŠ›å˜å¼ºï¼Œåå·®å‡å°‘è€Œæ–¹å·®å¢å¤§ï¼Œä»è€Œå¯¼è‡´è¿‡æ‹Ÿåˆã€‚ä»¥ç»“æ„é”™è¯¯æœ€å°åŒ–ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒæ•´æ­£åˆ™åŒ–ç³»æ•°Î»æ¥æ§åˆ¶æ¨¡å‹çš„å¤æ‚åº¦ã€‚å½“Î»å˜å¤§æ—¶ï¼Œæ¨¡å‹å¤æ‚åº¦ä¼šé™ä½ï¼Œå¯ä»¥æœ‰æ•ˆåœ°å‡å°‘æ–¹å·®ï¼Œé¿å…è¿‡æ‹Ÿåˆï¼Œä½†åå·®ä¼šä¸Šå‡ã€‚å½“Î»è¿‡å¤§æ—¶ï¼Œæ€»çš„æœŸæœ›é”™è¯¯åè€Œä¼šä¸Šå‡ã€‚å› æ­¤ï¼Œæ­£åˆ™åŒ–ç³»æ•°Î»éœ€è¦åœ¨åå·®å’Œæ–¹å·®ä¹‹é—´å–å¾—æ¯”è¾ƒå¥½çš„å¹³è¡¡ã€‚ä¸‹å›¾ç»™å‡ºäº†æœºå™¨å­¦ä¹ æ¨¡å‹çš„æœŸæœ›é”™è¯¯ã€åå·®å’Œæ–¹å·®éšå¤æ‚åº¦çš„å˜åŒ–æƒ…å†µã€‚æœ€ä¼˜çš„æ¨¡å‹å¹¶ä¸ä¸€å®šæ˜¯åå·®æ›²çº¿å’Œæ–¹å·®æ›²çº¿çš„äº¤ç‚¹ã€‚\n\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20190325231720819.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\nåå·®å’Œæ–¹å·®åˆ†è§£ç»™æœºå™¨å­¦ä¹ æ¨¡å‹æä¾›äº†ä¸€ç§åˆ†æé€”å¾„ï¼Œä½†åœ¨å®é™…æ“ä½œä¸­éš¾ä»¥ç›´æ¥è¡¡é‡ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå½“ä¸€ä¸ªæ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šçš„é”™è¯¯ç‡æ¯”è¾ƒé«˜æ—¶ï¼Œè¯´æ˜æ¨¡å‹çš„æ‹Ÿåˆèƒ½åŠ›ä¸å¤Ÿï¼Œåå·®æ¯”è¾ƒé«˜ã€‚è¿™ç§æƒ…å†µå¯ä»¥å¢åŠ æ•°æ®ç‰¹å¾ã€æé«˜æ¨¡å‹å¤æ‚åº¦ï¼Œå‡å°‘æ­£åˆ™åŒ–ç³»æ•°ç­‰æ“ä½œæ¥æ”¹è¿›æ¨¡å‹ã€‚å½“æ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šçš„é”™è¯¯ç‡æ¯”è¾ƒä½ï¼Œä½†éªŒè¯é›†ä¸Šçš„é”™è¯¯ç‡æ¯”è¾ƒé«˜æ—¶ï¼Œè¯´æ˜æ¨¡å‹è¿‡æ‹Ÿåˆï¼Œæ–¹å·®æ¯”è¾ƒé«˜ã€‚è¿™ç§æƒ…å†µå¯ä»¥é€šè¿‡é™ä½æ¨¡å‹å¤æ‚åº¦ï¼ŒåŠ å¤§æ­£åˆ™åŒ–ç³»æ•°ï¼Œå¼•å…¥å…ˆéªŒç­‰æ–¹æ³•æ¥ç¼“è§£ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç§æœ‰æ•ˆçš„é™ä½æ–¹å·®çš„æ–¹æ³•ä¸ºé›†æˆæ¨¡å‹ï¼Œå³é€šè¿‡å¤šä¸ªé«˜æ–¹å·®æ¨¡å‹çš„å¹³å‡æ¥é™ä½æ–¹å·®ã€‚ \n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"åŸºäºç¥ç»ç½‘ç»œå®ç°Mnistæ•°æ®é›†çš„å¤šåˆ†ç±»","url":"/2019/03/09/æ·±åº¦å­¦ä¹ /TensorFlow/åŸºäºç¥ç»ç½‘ç»œå®ç°Mnistæ•°æ®é›†çš„å¤šåˆ†ç±»/","content":"\n> åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ä»‹ç»äº†åŸºäºLogistic Regressionå®ç°Mnistæ•°æ®é›†çš„å¤šåˆ†ç±»ï¼Œæœ¬ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»åŸºäºTensorFlowå®ç°Mnistæ•°æ®é›†çš„å¤šåˆ†ç±»ã€‚\n\n<!--More-->\n\nä¸€ä¸ªå…¸å‹çš„ç¥ç»ç½‘ç»œè®­ç»ƒå›¾å¦‚ä¸‹æ‰€ç¤ºï¼š\n![ç¥ç»ç½‘ç»œè®­ç»ƒå›¾](https://img-blog.csdnimg.cn/20190308005540655.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nåªä¸è¿‡åœ¨Mnistæ•°æ®é›†æ˜¯ååˆ†ç±»çš„ï¼Œèµ·è¾“å‡ºç”±y1å’Œy2æ¢æˆy1ï¼Œ....ï¼Œy10ã€‚æœ¬æ–‡å®ç°çš„ç¥ç»ç½‘ç»œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\nè¿™æ˜¯ä½¿ç”¨çš„æ˜¯ä¸¤å±‚çš„ç¥ç»ç½‘ç»œï¼Œç¬¬ä¸€å±‚ç¥ç»å…ƒä¸ªæ•°æ˜¯256ï¼Œç¬¬äºŒå±‚ä¸º128ï¼Œæœ€ç»ˆè¾“å‡ºçš„æ˜¯10ä¸ªç±»åˆ«ã€‚å¯¹åº”çš„ç¥ç»ç½‘ç»œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n<img src=\"https://img-blog.csdnimg.cn/20190309205947261.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n\næ¥ç€æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªMutilClassç±»ï¼Œå¹¶åˆå§‹åŒ–ç›¸å…³å‚æ•°ç”¨æ¥å®ç°åŸºäºç¥ç»ç½‘ç»œçš„å¤šåˆ†ç±»å‡½æ•°ã€‚\n\n```\nimport tensorflow as tf\nfrom tensorflow.examples.tutorials.mnist import input_data\n \nclass MutilClass:\n    def __init__(self):\n        # åŠ è½½æ•°æ®é›†\n        self.Mnsit = input_data.read_data_sets(\"./data/\", one_hot=True)\n \n        # è®¾ç½®ç¥ç»ç½‘ç»œå±‚å‚æ•°\n        self.n_hidden_1 = 256\n        self.n_hidden_2 = 128\n        self.n_input = 784\n        self.n_classes = 10\n \n        self.x = tf.placeholder(dtype=float, shape=[None, self.n_input], name=\"x\")\n        self.y = tf.placeholder(dtype=float, shape=[None, self.n_classes], name=\"y\")\n        # random_normal é«˜æ–¯åˆ†å¸ƒåˆå§‹åŒ–æƒé‡\n        self.weights = {\n            \"w1\": tf.Variable(tf.random_normal([self.n_input, self.n_hidden_1],stddev = 0.1)),\n            \"w2\": tf.Variable(tf.random_normal([self.n_hidden_1, self.n_hidden_2], stddev = 0.1)),\n            \"out\": tf.Variable(tf.random_normal([self.n_hidden_2, self.n_classes], stddev = 0.1))\n        }\n        self.bias = {\n            \"b1\": tf.Variable(tf.random_normal([ self.n_hidden_1 ])),\n            \"b2\": tf.Variable(tf.random_normal([ self.n_hidden_2 ])),\n            \"out\": tf.Variable(tf.random_normal([ self.n_classes ]))\n        }\n \n        print(\"å‚æ•°åˆå§‹åŒ–å®Œæˆï¼\")\n```\n\nç¥ç»ç½‘ç»œé¦–æ¬¡å¾ªç¯ï¼Œæ˜¯æ ¹æ®åˆå§‹åŒ–çš„å‚æ•°å’Œåç½®ï¼Œå‘å‰ä¼ æ’­ï¼Œç»è¿‡ä¸¤å±‚éšå±‚ï¼Œæœ€ç»ˆçš„åˆ°ä¸€ä¸ªå¯¹åº”å„ä¸ªç±»åˆ«çš„æ¦‚ç‡ï¼Œç„¶åå†æ ¹æ®åå‘ä¼ æ’­ï¼Œæœ€å°åŒ–æŸå¤±å‡½æ•°æ±‚è§£å‚æ•°ï¼Œæ‰€ä»¥è¿™é‡Œåˆ›å»ºä¸€ä¸ªå‰å‘ä¼ æ’­å’Œåå‘ä¼ æ’­çš„å‡½æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n```\n    # å®šä¹‰ä¸€ä¸ªMLPï¼Œå‰å‘æ„ŸçŸ¥å™¨\n    def _multilayer_perceptron(self,_X, _weights, _bias):\n        layer_1 = tf.nn.sigmoid(tf.add ( tf.matmul(_X, _weights[\"w1\"]), _bias[\"b1\"] ) )\n        layer_2 = tf.nn.sigmoid(tf.add ( tf.matmul(layer_1, _weights[\"w2\"]), _bias[\"b2\"] ) )\n        return (tf.matmul( layer_2 ,_weights[\"out\"] ) + _bias[\"out\"])\n \n    # å®šä¹‰åå‘ä¼ æ’­\n    def _back_propagation(self):\n        pred = self._multilayer_perceptron(self.x, self.weights, self.bias)\n        # logits æœªå½’ä¸€åŒ–çš„æ¦‚ç‡\n        cost = tf.reduce_mean(tf.nn.softmax_cross_entropy_with_logits(logits=pred, labels=self.y) )\n        optimizer = tf.train.GradientDescentOptimizer( learning_rate= 0.001).minimize(cost)\n        corr = tf.equal(tf.argmax(pred, 1), tf.argmax(self.y, 1) )\n        accr =tf.reduce_mean(tf.cast(corr, dtype=float))\n \n        init = tf.global_variables_initializer()\n        return init, optimizer,cost, accr\n```\n\næ¥ç€å°±æ˜¯è®­ç»ƒç½‘ç»œäº†ï¼ŒæŒ‡å®šçš„è¿­ä»£æ¬¡æ•°ä¸ºï¼š100ï¼Œbatch_sizeï¼š100ï¼Œå…¶å¯¹åº”çš„å‡½æ•°æœªï¼š\n\n```\n    # è®­ç»ƒæ¨¡å‹\n    def _train_model(self, _init, _optimizer, _cost, _accr):\n        epochs = 100\n        batch_size = 100\n        display_steps = 1\n        sess = tf.Session()\n        sess.run(_init)\n \n        for epoch in range(epochs):\n            avg_cost = 0\n            total_batch = int (self.Mnsit.train.num_examples / batch_size)\n            for i in range(total_batch):\n                batch_xs, batch_ys = self.Mnsit.train.next_batch(batch_size)\n                feeds = {self.x: batch_xs, self.y: batch_ys}\n                sess.run(_optimizer, feed_dict=feeds)\n                avg_cost += sess.run(_cost, feed_dict=feeds)\n            avg_cost = avg_cost / total_batch\n \n            if (epoch +1) % display_steps ==0:\n                print(\"Epoch: {} / {}, cost: {}\".format(epoch, epochs, avg_cost))\n                feeds = {self.x: batch_xs, self.y: batch_ys}\n                train_acc = sess.run(_accr, feed_dict=feeds)\n                print(\"Train Accuracy: {}\".format(train_acc))\n \n                feeds = {self.x : self.Mnsit.test.images, self.y: self.Mnsit.test.labels}\n                test_acc = sess.run(_accr, feed_dict= feeds)\n                print(\"Test Accuracy: {}\".format(test_acc))\n                print(\"-\" * 50)\n```\nåˆ›å»ºä¸»å‡½æ•°ï¼Œè¿›è¡Œè¿­ä»£è®­ç»ƒ\n```\nif __name__ == \"__main__\":\n    network = MutilClass()\n    init, optimizer, cost, accr = network._back_propagation()\n    network._train_model(init, optimizer,cost, accr)\n```\n\næœ€åçš„è¿­ä»£ç»“æœä¸ºï¼š\n```\nEpoch: 0 / 100, cost: 2.4407591546665537\nTrain Accuracy: 0.12999999523162842\nTest Accuracy: 0.12960000336170197\n--------------------------------------------------\nEpoch: 1 / 100, cost: 2.290777679356662\nTrain Accuracy: 0.12999999523162842\nTest Accuracy: 0.1469999998807907\n--------------------------------------------------\nEpoch: 2 / 100, cost: 2.2774649468335237\nTrain Accuracy: 0.17000000178813934\nTest Accuracy: 0.21799999475479126\n--------------------------------------------------\n \n.......\n \n--------------------------------------------------\nEpoch: 98 / 100, cost: 0.7186844098567963\nTrain Accuracy: 0.8299999833106995\nTest Accuracy: 0.8371999859809875\n--------------------------------------------------\nEpoch: 99 / 100, cost: 0.7124480505423112\nTrain Accuracy: 0.8100000023841858\nTest Accuracy: 0.8377000093460083\n--------------------------------------------------\n```\n\nä»ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œcostæ˜¯ä¸€ç›´åœ¨å‡å°‘ï¼Œè®­ç»ƒé›†å’Œæµ‹è¯•é›†è¯„ä¼°æ¨¡å‹çš„å‡†ç¡®ç‡ä¹Ÿåœ¨ä¸€ç›´æé«˜ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è°ƒèŠ‚epochï¼Œbatch_sizeæ¥é‡æ–°è®­ç»ƒæ¨¡å‹ã€‚\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["TensorFlow"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€æŠ€æœ¯åˆ†äº«ã€‘æœºå™¨å­¦ä¹ åœ¨å¾®åšä¿¡æ¯æµæ¨èä¸­çš„åº”ç”¨å®è·µ","url":"/2019/03/05/Share/ã€æŠ€æœ¯åˆ†äº«ã€‘æœºå™¨å­¦ä¹ åœ¨å¾®åšä¿¡æ¯æµæ¨èä¸­çš„åº”ç”¨å®è·µ/","content":"\n> æœ¬æ–‡åˆ†ä¸ºå››éƒ¨åˆ†ä»‹ç»æœºå™¨å­¦ä¹ åœ¨å¾®åšä¿¡æ¯æµä¸­çš„åº”ç”¨å®è·µï¼Œåˆ†åˆ«ä¸ºï¼šå¾®åšä¿¡æ¯æµæ¨èåœºæ™¯ä»‹ç»ï¼Œå†…å®¹ç†è§£ä¸ç”¨æˆ·ç”»åƒï¼Œå¤§è§„æ¨¡æ¨èç³»ç»Ÿå®è·µå’Œæ€»ç»“å±•æœ›ã€‚\n\n<!--More-->\n\n# å¾®åšä¿¡æ¯æµæ¨èåœºæ™¯ä»‹ç»\n> å¾®åšçš„feedæµå†…å®¹å½¢æ€å„å¼‚ï¼Œæœ‰è§†é¢‘ï¼Œå›¾ç‰‡ï¼Œæ–‡å­—ï¼Œé•¿æ–‡ï¼Œé—®ç­”ç­‰ï¼Œå…¶ç”¨æˆ·é‡ä¹Ÿå¾ˆå¤§ï¼Œ2018å¹´Q2ç»Ÿè®¡DAUï¼ˆæ—¥æ´»ï¼‰ä¸º1.9äº¿ï¼ŒMAUï¼ˆæœˆæ´»ï¼‰ä¸º4.3äº¿ï¼Œè¿™ä¹ˆåºå¤§çš„ç”¨æˆ·é‡ï¼Œå¦‚ä½•åšå¥½é¦–é¡µfeedæµçš„ä¸ªæ€§åŒ–æ¨èå°±æ˜¾å¾—æ ¼å¤–é‡è¦ã€‚\n\n\n<img src=\"https://img-blog.csdnimg.cn/20190305162718873.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n<img src=\"https://img-blog.csdnimg.cn/20190305162740161.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n\n# å†…å®¹ç†è§£ä¸ç”¨æˆ·ç”»åƒ\n> ç”±äºä¸ªæ€§åŒ–æ¨èæ˜¯ç»™ç”¨æˆ·æ¨èå…¶æ„Ÿå…´è¶£çš„å†…å®¹ï¼Œæ‰€ä»¥å¯¹äºå¾®åšçš„å†…å®¹ç†è§£å’Œç”¨æˆ·ç”»åƒéƒ¨åˆ†å°±æ˜¾å¾—æ ¼å¤–é‡è¦ã€‚å†…å®¹ç†è§£å³é€šè¿‡æ–‡æœ¬å†…å®¹ç†è§£å’Œè§†è§‰ç†è§£æŠ€æœ¯ï¼Œå¯¹å¾®åšå†…å®¹è¿›è¡Œç»†ç²’åº¦è¡¨å¾ï¼Œå³å½¢æˆæ¯ç¯‡å¾®åšå†…å®¹çš„è¡¨å¾å‘é‡ã€‚\n\n<img src=\"https://img-blog.csdnimg.cn/20190305162850198.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n<img src=\"https://img-blog.csdnimg.cn/20190305162905934.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n\n> ç”¨æˆ·ç”»åƒå³åŸºäºç”¨æˆ·çš„å‘åšå†…å®¹ï¼Œè¡Œä¸ºæ•°æ®ï¼Œè‡ªå¡«ä¿¡æ¯ç­‰è¿›è¡Œæ·±åº¦æŒ–æ˜ï¼Œç²¾å‡†åˆ†æåˆ»ç”»ç”¨æˆ·ï¼Œä»è€Œåœ¨è¿›è¡Œå¾®åšå†…å®¹æ¨é€æ—¶èƒ½å¤Ÿå®ç°å…¶ä¸ªæ€§åŒ–ã€‚\n\n<img src=\"https://img-blog.csdnimg.cn/20190305162934416.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n# å¤§è§„æ¨¡æ¨èç³»ç»Ÿå®è·µ\n\n> ç›®å‰æ¨èæ¶æ„çš„å®ç°æ€è·¯éƒ½æ˜¯å…ˆä»æµ·é‡åŸå§‹æ•°æ®ä¸­ï¼Œä¾æ®ç”¨æˆ·ç”»åƒï¼Œå¬å›ç”¨æˆ·åå¥½çš„æ•°æ®ï¼Œåœ¨åˆ©ç”¨æ’åºç®—æ³•å¯¹å…¶è¿›è¡Œæ’åºï¼Œæœ€ç»ˆé€‰æ‹©top Kè¿”å›ç»™ç”¨æˆ·ã€‚å¾®åšæ¨èäº¦æ˜¯å¦‚æ­¤ã€‚å…¶æ•´ä½“çš„æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n> ç‰©æ–™å¬å›ï¼šå³ä»å€™é€‰ç‰©æ–™é›†åˆä¸­ç²—ç­›ç‰©æ–™ï¼Œä½œä¸ºè¿›è¡Œæ¨¡å‹çš„å¾…æ’åºç‰©æ–™ã€‚\n\n<img src=\"https://img-blog.csdnimg.cn/20190305163036955.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n\n<img src=\"https://img-blog.csdnimg.cn/20190305163059488.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n\n<img src=\"https://img-blog.csdnimg.cn/20190305163120489.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n\n> ç®—æ³•æ’åºåˆ™æ˜¯ç»“åˆç›¸å…³ç‰¹å¾å¯¹ç‰©æ–™å¬å›çš„å†…å®¹è¿›è¡Œé¢„ä¼°æ’åºï¼Œå…¶ç‰¹å¾ä¸»è¦åˆ†ä¸ºï¼šç”¨æˆ·ç‰¹å¾ï¼Œå†…å®¹ç‰¹å¾ï¼Œç¯å¢ƒç‰¹å¾ï¼Œç»„åˆç‰¹å¾å’Œä¸Šä¸‹æ–‡ç‰¹å¾ç­‰ã€‚\n\n<img src=\"https://img-blog.csdnimg.cn/20190305163427457.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n<img src=\"https://img-blog.csdnimg.cn/20190305163455977.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n<img src=\"https://img-blog.csdnimg.cn/20190305163515432.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n<img src=\"https://img-blog.csdnimg.cn/20190305163530356.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n<img src=\"https://img-blog.csdnimg.cn/20190305163645420.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n<img src=\"https://img-blog.csdnimg.cn/20190305163705966.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n<img src=\"https://img-blog.csdnimg.cn/20190305163719819.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n<img src=\"https://img-blog.csdnimg.cn/20190305163749462.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n<img src=\"https://img-blog.csdnimg.cn/20190305163805882.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n<img src=\"https://img-blog.csdnimg.cn/20190305163818878.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n<img src=\"https://img-blog.csdnimg.cn/20190305163833250.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n\n# æ€»ç»“ä¸å±•æœ›\n- æ€»ç»“\n\t- ä¸šåŠ¡å’Œæ•°æ®å†³å®šäº†æ¨¡å‹ç®—æ³•çš„åº”ç”¨åœºæ™¯\n\t- æ¨¡å‹ç®—æ³•æ®Šé€”åŒå½’\n\t- å·¥ç¨‹èƒ½åŠ›å’Œç®—æ³•æ¶æ„æ˜¯åŸºæœ¬ä¿éšœ\n\n- å±•æœ›\n\t- é‡‡ç”¨å¤šæ¨¡å‹èåˆï¼Œèƒ½æ›´å¥½çš„å¯¹éç»“æ„åŒ–å†…å®¹è¿›è¡Œè¡¨å¾\n\t- æ›´å¤šçš„èåˆç½‘ç»œç»“æ„é€‚ç”¨äºCTRé¢„ä¼°åœºæ™¯\n\n---\n\nå®Œæ•´å†…å®¹è¯·é˜…è¯»åŸæ–‡ï¼šhttps://blog.csdn.net/Gamer_gyt/article/details/88164127 \n\n------\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>","tags":["æŠ€æœ¯åˆ†äº«"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"TensorFlowå®ç°Mnistæ•°æ®é›†çš„å¤šåˆ†ç±»é€»è¾‘å›å½’æ¨¡å‹","url":"/2019/02/27/æ·±åº¦å­¦ä¹ /TensorFlow/TensorFlowå®ç°Mnistæ•°æ®é›†çš„å¤šåˆ†ç±»é€»è¾‘å›å½’æ¨¡å‹/","content":"\n> å¤šåˆ†ç±»é€»è¾‘å›å½’åŸºäºé€»è¾‘å›å½’ï¼ˆLogistic Regressionï¼ŒLRï¼‰å’ŒsoftMaxå®ç°ï¼Œå…¶åœ¨å¤šåˆ†ç±»åˆ†ç±»ä»»åŠ¡ä¸­åº”ç”¨å¹¿æ³›ï¼Œæœ¬ç¯‡æ–‡ç« åŸºäºtfå®ç°å¤šåˆ†ç±»é€»è¾‘å›å½’ï¼Œä½¿ç”¨çš„æ•°æ®é›†ä¸ºMnistã€‚\n\n<!--More-->\n\nå¤šåˆ†ç±»é€»è¾‘å›å½’çš„åŸºç¡€æ¦‚è¦å’Œåœ¨Sparkä¸Šçš„å®ç°å¯å‚è€ƒï¼š\n\n- å¤šåˆ†ç±»é€»è¾‘å›å½’ï¼ˆMultinomial Logistic Regressionï¼‰\n- å¤šåˆ†ç±»å®ç°æ–¹å¼ä»‹ç»å’Œåœ¨Sparkä¸Šå®ç°å¤šåˆ†ç±»é€»è¾‘å›å½’ï¼ˆMultinomial Logistic Regressionï¼‰\n\n<!--More-->\n\næœ¬ç¯‡æ–‡ç« æ¶‰åŠåˆ°çš„tfç›¸å…³æ¥å£å‡½æ•°åŠé‡Šä¹‰å¦‚ä¸‹ï¼š\n\n## tf.nn.softmax\nSoftmax åœ¨æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ ä¸­æœ‰ç€éå¸¸å¹¿æ³›çš„åº”ç”¨ã€‚å°¤å…¶åœ¨å¤„ç†å¤šåˆ†ç±»ï¼ˆC > 2ï¼‰é—®é¢˜ï¼Œåˆ†ç±»å™¨æœ€åçš„è¾“å‡ºå•å…ƒéœ€è¦Softmax å‡½æ•°è¿›è¡Œæ•°å€¼å¤„ç†ã€‚å…³äºSoftmax å‡½æ•°çš„å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n...\n\n---\n\nå®Œæ•´å†…å®¹è¯·é˜…è¯»åŸæ–‡ï¼šhttps://blog.csdn.net/Gamer_gyt/article/details/87970776 \n\n\n-----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["TensorFlow"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"æ·±åº¦å­¦ä¹ ä¸­çš„epochsã€batch_sizeã€iterationsè¯¦è§£","url":"/2019/02/26/æ·±åº¦å­¦ä¹ /ç¥ç»ç½‘ç»œç¬”è®°/æ·±åº¦å­¦ä¹ ä¸­çš„epochsã€batch_sizeã€iterationsè¯¦è§£/","content":"> æ·±åº¦å­¦ä¹ ä¸­æ¶‰åŠåˆ°å¾ˆå¤šå‚æ•°ï¼Œå¦‚æœå¯¹äºä¸€äº›å‚æ•°ä¸äº†è§£ï¼Œé‚£ä¹ˆå»çœ‹ä»»ä½•ä¸€ä¸ªæ¡†æ¶éƒ½ä¼šæœ‰éš¾åº¦ï¼Œåœ¨TensorFlowä¸­æœ‰ä¸€äº›æ¨¡å‹è®­ç»ƒçš„åŸºæœ¬å‚æ•°ï¼Œè¿™äº›å‚æ•°æ˜¯è®­ç»ƒæ¨¡å‹çš„å‰æï¼Œä¹Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šå½±å“ç€æ¨¡å‹çš„æœ€ç»ˆæ•ˆæœã€‚ä¸‹é¢ä¸»è¦ä»‹ç»å‡ ä¸ªå‚æ•°ã€‚\n\n<!--More-->\n\n- batch_size\n- iterations\n- epochs\n\n# batch_size\n\næ·±åº¦å­¦ä¹ çš„ä¼˜åŒ–ç®—æ³•ï¼Œå…¶å®å°±æ˜¯æ¢¯åº¦ä¸‹é™ï¼Œåœ¨ä¹‹å‰çš„æ–‡ç« ä¸­æˆ‘ä»¬ä¹Ÿä»‹ç»è¿‡æ¢¯åº¦ä¸‹é™ï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†è¯´æ˜ã€‚æ¢¯åº¦ä¸‹é™åˆ†ä¸ºä¸‰ç§ï¼š\n\n- æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ˆBGDï¼ŒBatch gradient descent algorithmï¼‰\n- éšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ˆSGDï¼ŒStochastic gradient descent algorithmï¼‰\n- å°æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ˆMBGDï¼ŒMini-batch gradient descent algorithmï¼‰\n\næ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œæ¯ä¸€æ¬¡è®¡ç®—éƒ½éœ€è¦éå†å…¨éƒ¨æ•°æ®é›†ï¼Œæ›´æ–°æ¢¯åº¦ï¼Œè®¡ç®—å¼€é”€å¤§ï¼ŒèŠ±è´¹æ—¶é—´é•¿ï¼Œä¸æ”¯æŒåœ¨çº¿å­¦ä¹ ã€‚\n\néšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œæ¯æ¬¡éšæœºé€‰å–ä¸€æ¡æ•°æ®ï¼Œæ±‚æ¢¯åº¦æ›´æ–°å‚æ•°ï¼Œè¿™ç§æ–¹æ³•è®¡ç®—é€Ÿåº¦å¿«ï¼Œä½†æ˜¯æ”¶æ•›æ€§èƒ½ä¸å¤ªå¥½ï¼Œå¯èƒ½åœ¨æœ€ä¼˜ç‚¹é™„è¿‘æ™ƒæ¥æ™ƒå»ï¼Œhitä¸åˆ°æœ€ä¼˜ç‚¹ã€‚ä¸¤æ¬¡å‚æ•°çš„æ›´æ–°ä¹Ÿæœ‰å¯èƒ½äº’ç›¸æŠµæ¶ˆæ‰ï¼Œé€ æˆç›®æ ‡å‡½æ•°éœ‡è¡çš„æ¯”è¾ƒå‰§çƒˆã€‚\n\nä¸ºäº†å…‹æœä¸¤ç§æ–¹æ³•çš„ç¼ºç‚¹ï¼Œç°åœ¨ä¸€èˆ¬é‡‡ç”¨çš„æ˜¯ä¸€ç§æŠ˜ä¸­æ‰‹æ®µï¼Œmini-batch gradient decentï¼Œå°æ‰¹çš„æ¢¯åº¦ä¸‹é™ï¼Œè¿™ç§æ–¹æ³•æŠŠæ•°æ®åˆ†ä¸ºè‹¥å¹²ä¸ªæ‰¹ï¼ŒæŒ‰æ‰¹æ¥æ›´æ–°å‚æ•°ï¼Œè¿™æ ·ï¼Œä¸€ä¸ªæ‰¹ä¸­çš„ä¸€ç»„æ•°æ®å…±åŒå†³å®šäº†æœ¬æ¬¡æ¢¯åº¦çš„æ–¹å‘ï¼Œä¸‹é™èµ·æ¥å°±ä¸å®¹æ˜“è·‘åï¼Œå‡å°‘äº†éšæœºæ€§ã€‚å¦ä¸€æ–¹é¢å› ä¸ºæ‰¹çš„æ ·æœ¬æ•°ä¸æ•´ä¸ªæ•°æ®é›†ç›¸æ¯”å°äº†å¾ˆå¤šï¼Œè®¡ç®—é‡ä¹Ÿä¸æ˜¯å¾ˆå¤§ã€‚\n\ntfæ¡†æ¶ä¸­çš„batch_sizeæŒ‡çš„å°±æ˜¯æ›´æ–°æ¢¯åº¦ä¸­ä½¿ç”¨çš„æ ·æœ¬æ•°ã€‚å½“ç„¶è¿™é‡Œå¦‚æœæŠŠbatch_sizeè®¾ç½®ä¸ºæ•°æ®é›†çš„é•¿åº¦ï¼Œå°±æˆäº†æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œbatch_sizeè®¾ç½®ä¸º1å°±æ˜¯éšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•ã€‚\n\n# iterations\nè¿­ä»£æ¬¡æ•°ï¼Œæ¯æ¬¡è¿­ä»£æ›´æ–°ä¸€æ¬¡ç½‘ç»œç»“æ„çš„å‚æ•°ã€‚\n\nè¿­ä»£æ˜¯é‡å¤åé¦ˆçš„åŠ¨ä½œï¼Œç¥ç»ç½‘ç»œä¸­æˆ‘ä»¬å¸Œæœ›é€šè¿‡è¿­ä»£è¿›è¡Œå¤šæ¬¡çš„è®­ç»ƒä»¥åˆ°è¾¾æ‰€éœ€çš„ç›®æ ‡æˆ–ç»“æœã€‚\n\næ¯ä¸€æ¬¡è¿­ä»£å¾—åˆ°çš„ç»“æœéƒ½ä¼šè¢«ä½œä¸ºä¸‹ä¸€æ¬¡è¿­ä»£çš„åˆå§‹å€¼ã€‚\n\nä¸€ä¸ªè¿­ä»£ = ä¸€ä¸ªï¼ˆbatch_sizeï¼‰æ•°æ®æ­£å‘é€šè¿‡ï¼ˆforwardï¼‰+ ä¸€ä¸ªï¼ˆbatch_sizeï¼‰æ•°æ®åå‘ï¼ˆbackwardï¼‰\n\n![ç¥ç»ç½‘ç»œ](https://img-blog.csdnimg.cn/2019022523170956.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\n\nå‰å‘ä¼ æ’­ï¼šæ„å»ºç”±ï¼ˆx1,x2,x3ï¼‰å¾—åˆ°Yï¼ˆhwb(x)ï¼‰çš„è¡¨è¾¾å¼\n \nåå‘ä¼ æ’­ï¼šåŸºäºç»™å®šçš„æŸå¤±å‡½æ•°ï¼Œæ±‚è§£å‚æ•°çš„è¿‡ç¨‹\n\n\n# epochs\nepochsè¢«å®šä¹‰ä¸ºå‰å‘å’Œåå‘ä¼ æ’­ä¸­æ‰€æœ‰æ‰¹æ¬¡çš„å•æ¬¡è®­ç»ƒè¿­ä»£ã€‚è¿™æ„å‘³ç€1ä¸ªå‘¨æœŸæ˜¯æ•´ä¸ªè¾“å…¥æ•°æ®çš„å•æ¬¡å‰å‘å’Œåå‘ä¼ é€’ã€‚\n\nç®€å•è¯´ï¼ŒepochsæŒ‡çš„å°±æ˜¯è®­ç»ƒè¿‡ç¨‹ä¸­æ•°æ®å°†è¢«â€œè½®â€å¤šå°‘æ¬¡\n\nä¾‹å¦‚åœ¨æŸæ¬¡æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ€»çš„æ ·æœ¬æ•°æ˜¯10000ï¼Œbatch_size=100ï¼Œepochs=10ï¼Œå…¶å¯¹åº”çš„ä¼ªä»£ç å¦‚ä¸‹ï¼š\n```\ndata = \nbatch_size = 100\nfor i in range(epochs):\n    for j in range(int(data_length / batch_size - 1)):\n        x_data = data[begin:end, ]\n        y_data = data[begin:end, ]\n        mode.train(x_data, y_data)\n        begin += batch_size\n        end += batch_size\n```\n\nå…¶ä¸­iterations = data_length / batch_size\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["ç¥ç»ç½‘ç»œ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"Sparkæ’åºç®—æ³•ç³»åˆ—ä¹‹ï¼ˆMLLibã€MLï¼‰GBTsä½¿ç”¨æ–¹å¼ä»‹ç»","url":"/2019/01/29/RecSys/Sparkä¸æ¨èç³»ç»Ÿ/Sparkæ’åºç®—æ³•ç³»åˆ—ä¹‹ï¼ˆMLLibã€MLï¼‰GBTsä½¿ç”¨æ–¹å¼ä»‹ç»/","content":">ã€Sparkæ’åºç®—æ³•ç³»åˆ—ã€‘ä¸»è¦ä»‹ç»çš„æ˜¯ç›®å‰æ¨èç³»ç»Ÿæˆ–è€…å¹¿å‘Šç‚¹å‡»æ–¹é¢ç”¨çš„æ¯”è¾ƒå¹¿çš„å‡ ç§ç®—æ³•ï¼Œå’Œä»–ä»¬åœ¨Sparkä¸­çš„åº”ç”¨å®ç°ï¼Œæœ¬ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»GBDTç®—æ³•.\n\n<!--More-->\n# å‰è¨€\næœ¬ç³»åˆ—è¿˜åŒ…æ‹¬ï¼ˆæŒç»­æ›´æ–°ï¼‰ï¼š\n- Sparkæ’åºç®—æ³•ç³»åˆ—ä¹‹LRï¼ˆé€»è¾‘å›å½’ï¼‰\n- Sparkæ’åºç®—æ³•ç³»åˆ—ä¹‹æ¨¡å‹èåˆï¼ˆGBDT+LRï¼‰\n- Sparkæ’åºç®—æ³•ç³»åˆ—ä¹‹XGBoost\n- Sparkæ’åºç®—æ³•ç³»åˆ—ä¹‹FTRLï¼ˆFollow-the-regularized-Leaderï¼‰\n- Sparkæ’åºç®—æ³•ç³»åˆ—ä¹‹FMä¸FFM\n\nåœ¨æœ¬ç¯‡æ–‡ç« ä¸­ä½ å¯ä»¥å­¦åˆ°ï¼š\n- Spark MLLibåŒ…ä¸­çš„GBDTä½¿ç”¨æ–¹å¼\n- æ¨¡å‹çš„é€šè¿‡ä¿å­˜ã€åŠ è½½ã€é¢„æµ‹\n- PipeLine\n- MLåŒ…ä¸­çš„GBDT\n\n\n# æ¦‚è¿°\nLRå› ä¸ºå…¶å®¹æ˜“å¹¶è¡Œæœ€æ—©åº”ç”¨åˆ°æ¨èæ’åºä¸­çš„ï¼Œä½†å­¦ä¹ èƒ½åŠ›æœ‰é™ï¼Œéœ€è¦å¤§é‡çš„ç‰¹å¾å·¥ç¨‹æ¥å¢åŠ æ¨¡å‹çš„å­¦ä¹ èƒ½åŠ›ã€‚ä½†å¤§é‡çš„ç‰¹å¾å·¥ç¨‹è€—æ—¶è€—åŠ›ï¼Œä¸”ä¸ä¸€å®šå¸¦æ¥æ•ˆæœçš„æå‡ï¼Œå› æ­¤åœ¨å¦‚ä½•èƒ½æœ‰æ•ˆçš„å‘ç°ç‰¹å¾ç»„åˆï¼Œæ¥ç¼©çŸ­LRç‰¹å¾å®éªŒå‘¨æœŸçš„èƒŒæ™¯ä¸‹ï¼ŒGBDTè¢«åº”ç”¨äº†èµ·æ¥ã€‚GBDTæ¨¡å‹å…¨ç§°æ˜¯Gradient Boosting Decision Treeï¼Œæ¢¯åº¦æå‡å†³ç­–æ ‘ã€‚æ˜¯å±äºBoosingç®—æ³•ä¸­çš„ä¸€ç§ï¼Œå…³äºBoostingçš„ä»‹ç»å¯ä»¥å‚è€ƒæ–‡ç« é›†æˆå­¦ä¹ ï¼ˆEnsemble Learning)\n\nå…³äºGBDTç®—æ³•ç†è§£å¯å‚è€ƒï¼š\n- Sparkæ’åºç®—æ³•ç³»åˆ—ä¹‹GBTsåŸºç¡€â€”â€”æ¢¯åº¦ä¸Šå‡å’Œæ¢¯åº¦ä¸‹é™\n- æ¢¯åº¦æå‡å†³ç­–æ ‘GBDTï¼ˆGradient Boosting Decision Treeï¼‰\n\nå…¶å®ç›¸ä¿¡å¾ˆå¤šäººå¯¹Spark æœºå™¨å­¦ä¹ åŒ…ï¼ˆmlå’Œmllibï¼‰ä¸­çš„GBDTå‚»å‚»åˆ†ä¸æ¸…æ¥šï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆæ¥æ‹ä¸€æ‹ã€‚Sparkä¸­çš„GBDTè¾ƒGBTsâ€”â€”æ¢¯åº¦æå‡æ ‘ï¼Œå› ä¸ºå…¶æ˜¯åŸºäºå†³ç­–æ ‘ï¼ˆDecision Treeï¼ŒDTï¼‰å®ç°çš„ï¼Œæ‰€ä»¥å«GBDTã€‚Spark ä¸­çš„GBDTç®—æ³•å­˜åœ¨äºmlåŒ…å’ŒmllibåŒ…ä¸­ï¼Œmllibæ˜¯åŸºäºRDDçš„ï¼ŒmlåŒ…åˆ™æ˜¯é’ˆå¯¹DataFrameçš„ï¼ŒmlåŒ…ä¸­çš„GBDTåˆ†ä¸ºåˆ†ç±»å’Œå›å½’ï¼Œåœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ ¹æ®å…·ä½“æƒ…å†µè¿›è¡Œè¡¡é‡å’Œé€‰æ‹©ã€‚ç”±äºåœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨åŸºäºRDDçš„è¾ƒå¤šï¼Œæ‰€ä»¥ä¸‹é¢å°†ç€é‡ä»‹ç»ä¸‹MLLibåŒ…ä¸­çš„GBTsï¼ŒMLåŒ…ä¸­çš„å°†è¿›è¡Œç®€å•è¯´æ˜ã€‚\n\n--------------------- \nå®Œæ•´å†…å®¹è¯·é˜…è¯»åŸæ–‡ï¼šhttps://blog.csdn.net/Gamer_gyt/article/details/86695837\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["Sparkä¸æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€èµ„æºåˆ†äº«ã€‘ä»æ•°ç†ç»Ÿè®¡åˆ°DLã€RLï¼Œè¿˜ä¸å¿«æ¥ï¼","url":"/2019/01/28/Share/ã€èµ„æºåˆ†äº«ã€‘ä»æ•°ç†ç»Ÿè®¡åˆ°DLã€RLï¼Œè¿˜ä¸å¿«æ¥/","content":"\n> ä¹‹å‰åœ¨è‡ªå·±çš„å¹´åº¦æ€»ç»“é‡Œå†™åˆ°ï¼š19å¹´çš„ç›®æ ‡å°±æ˜¯æŠ€æœ¯æ²‰æ·€ä¸çªç ´ã€‚æŠ€æœ¯çªç ´ä¸ä»…åŒ…å«ç°æœ‰æŠ€æœ¯çš„æ€»ç»“å’Œåæ€ï¼Œæ›´æ˜¯å¯¹æœªçŸ¥æŠ€æœ¯çš„æ¢ç´¢å’Œæ±‚çŸ¥ï¼Œå¸Œæœ›19å¹´èƒ½å¤Ÿæ›´ä¸Šä¸€å±‚æ¥¼ã€‚\n\n<!--More-->\n\nè¿™ä¸ªrepoæ˜¯æˆ‘ä¸€ç›´ç»´æŠ¤å’Œæ•´ç†çš„ä¸€ä¸ªæŠ€æœ¯èµ„æ–™åˆ†äº«çš„repoï¼Œæ˜¯æˆ‘åŒ…æ‹¬ç¾¤å‹ä¸€å—æ•´ç†çš„ä¸€ä¸ªå…è´¹æŠ€æœ¯èµ„æ–™åˆ†äº«çš„åº“ï¼Œä¸ä»…åŒ…å«äº†æœºå™¨å­¦ä¹ ï¼Œæ•°æ®æŒ–æ˜ï¼Œæ·±åº¦å­¦ä¹ ï¼Œè¿˜åŒ…å«äº†å¤§æ•°æ®ï¼Œæ•°ç†ç»Ÿè®¡ï¼Œå¼ºåŒ–å­¦ä¹ ç­‰ï¼Œå¸Œæœ›åœ¨æŠ€æœ¯è¿™æ¡è·¯ä¸Šä½ èƒ½è·‘çš„æ›´å¿«ã€‚\n\nrepoï¼šhttps://github.com/Thinkgamer/books\n\nå…ˆæ¥å¼ å›¾ç‰‡é•‡æ¥¼ï¼ï¼ï¼\n<img src=\"https://img-blog.csdnimg.cn/20190128031446639.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dhbWVyX2d5dA==,size_16,color_FFFFFF,t_70\">\n\n# Why\nå»ºç«‹è¯¥Repoçš„ç›®çš„æœ‰ä¸¤ä¸ªï¼š\n\n- æœ¬äººåœ¨å„ä¸ªå¹³å°å…±äº«ä¹¦ç±ï¼Œè¿›è¡Œä¸€ä¸ªç»Ÿä¸€ç®¡ç†\n- åˆ†äº«ç»™å„ä¸ªææŠ€æœ¯çš„æœ‹å‹ï¼ŒçŸ¥è¯†æ— ç§è—ä¹‹è¯´\n\n----\n\n# What\nè¯¥Repoä¼šæ¶‰åŠåŒ…å«ä»¥ä¸‹ç±»åˆ«ä¹¦ç±ï¼š\n\n- æœºå™¨å­¦ä¹ \n- æ•°æ®æŒ–æ˜\n- æ·±åº¦å­¦ä¹ \n- NLP\n- äº‘è®¡ç®—\n- ç»Ÿè®¡å­¦æ¦‚ç‡è®º\n- æ”¶è—çš„è®ºæ–‡\n- æ‚ä¹±æ— ç« \n\n----\n\n# List\næ³¨æ˜ï¼šæ’åæ— å…ˆåé¡ºåº\n\n## æœºå™¨å­¦ä¹ \n- scikit-learn ä¸­è‹±æ–‡\n- æœºå™¨å­¦ä¹ -å‘¨å¿—å\n- æœºå™¨å­¦ä¹ å®æˆ˜\n- æœºå™¨å­¦ä¹ å¯¼è®º\n- é›†ä½“æ™ºæ…§ç¼–ç¨‹ä¸­æ–‡ç‰ˆ\n- [è‹±æ–‡ç‰ˆ]å¶æ–¯æ€ç»´ï¼šç»Ÿè®¡å»ºæ¨¡çš„Pythonå­¦ä¹ æ³•\n\n\n## æ•°æ®æŒ–æ˜\n- pythonæ•°æ®åˆ†æä¸æŒ–æ˜å®æˆ˜\n- åˆ©ç”¨pythonè¿›è¡Œæ•°æ®åˆ†æ\n- é¢å‘ç¨‹åºå‘˜çš„æ•°æ®æŒ–æ˜æŒ‡å—\n- æ•°æ®æŒ–æ˜ï¼šæ¦‚å¿µä¸æŠ€æœ¯ï¼ˆä¸­æ–‡ç¬¬ä¸‰ç‰ˆï¼‰\n- æ•°æ®æŒ–æ˜åº”ç”¨20ä¸ªæ¡ˆä¾‹åˆ†æ\n- æ•°æ®æŒ–æ˜ä¸æ•°æ®åŒ–è¿è¥å®æˆ˜_æ€è·¯_æ–¹æ³•_æŠ€å·§ä¸åº”ç”¨_å®Œæ•´ç‰ˆ\n\n## æ·±åº¦å­¦ä¹ \n- ç¥ç»ç½‘ç»œä¸æœºå™¨å­¦ä¹ ï¼ˆåŠ ï¼‰Simon Haykin\n- TensorFlowå®æˆ˜-é»„æ–‡åš\n- æ·±åº¦å­¦ä¹  ä¸­æ–‡ç‰ˆ\n- ç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹ \n\n## NLP\n- æ¨¡å¼è¯†åˆ«ä¸æœºå™¨å­¦ä¹  ä¸­æ–‡ç‰ˆ\n- NLPæ±‰è¯­è‡ªç„¶è¯­è¨€å¤„ç†åŸç†ä¸å®è·µ\n- PYTHONè‡ªç„¶è¯­è¨€å¤„ç†ä¸­æ–‡ç‰ˆ\n\n## æ¨èç³»ç»Ÿ\n- æ¨èç³»ç»Ÿå®è·µ\n- learning-to-rank.pdf \n- Recommender Systems Handbook.pdf\n- Context-Aware-Recommender-Systems-chapter-7.pdf\n\n## äº‘è®¡ç®—\n- ã€Šå¿«å­¦Scalaã€‹\n- Learning PySpark.pdf\n- SparkMLlibæœºå™¨å­¦ä¹ \n- Sparkå¿«é€Ÿå¤§æ•°æ®åˆ†æ\n- æ•°æ®ç®—æ³•  Hadoop Sparkå¤§æ•°æ®å¤„ç†æŠ€å·§\n\n## ç»Ÿè®¡å­¦ä¸æ¦‚ç‡è®º\n- ã€Šæ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ã€‹æµ™å¤§ç‰ˆï¼ˆç¬¬å››ç‰ˆï¼‰æ•™æ\n- ã€Šæ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ä¹ é¢˜å…¨è§£æŒ‡å—ã€‹.æµ™å¤§ç‰ˆï¼ˆç¬¬å››ç‰ˆï¼‰\n- æ•°ç†ç»Ÿè®¡ä¸æ•°æ®åˆ†æåŸä¹¦ç¬¬3ç‰ˆ\n- åº”ç”¨å•†åŠ¡ç»Ÿè®¡åˆ†æ ç‹æ±‰ç”Ÿ(2008).pdf\n\n## æ”¶è—çš„è®ºæ–‡\n- å¹³æ»‘ç³»æ•°è‡ªé€‚åº”çš„äºŒæ¬¡æŒ‡æ•°å¹³æ»‘æ¨¡å‹åŠå…¶åº”ç”¨\n- The Structure of Collaborative Tagging Systems\n- FM\n- FFM\n- DeepFFM\n- Focal Loss for Dense Object Detection\n- Attentive Group Recommendation.pdf\n- Real-time Personalization using Embeddings for Search.pdf\n\n## æ‚ä¹±æ— ç« \n- é˜¿é‡ŒæŠ€æœ¯ä¹‹ç³-p260\n- æ•°æ®æ•æ„Ÿæ€§æµ‹è¯•\n- æ­£åˆ™è¡¨è¾¾å¼ç»å…¸å®ä¾‹.ï¼ˆç¾ï¼‰é«˜ç“¦ç‰¹æ–¯ï¼Œï¼ˆç¾ï¼‰åˆ©ç»´æ£®\n- é˜¿é‡Œå¹¿å‘Šä¸­çš„æœºå™¨å­¦ä¹ å¹³å°.pdf\n- å¹¿å‘Šæ•°æ®ä¸Šçš„å¤§è§„æ¨¡æœºå™¨å­¦ä¹ .pdf\n- ç»¿ç›Ÿå¤§æ•°æ®å®‰å…¨åˆ†æå¹³å° äº§å“ç™½çš®ä¹¦.pdf\n- Xdef2013-åŸºäºæœºå™¨å­¦ä¹ å’ŒNetFPGAçš„æ™ºèƒ½é«˜é€Ÿå…¥ä¾µé˜²å¾¡ç³»ç»Ÿ.ppt\n- 04-ç¨‹ä½³-æ¨èå¹¿å‘Šæœºå™¨å­¦ä¹ å®è·µ\n- A Gentle Introduction to Gradient Boosting.pdf\n- GBDTç®—æ³•åŸç†ä¸ç³»ç»Ÿè®¾è®¡ç®€ä»‹.pdf\n- [å¾®åš] æœºå™¨å­¦ä¹ åœ¨å¾®åšä¿¡æ¯æµæ¨èåº”ç”¨å®è·µ.pdf\n- [çŸ¥ä¹] é¦–é¡µä¿¡æ¯æµç³»ç»Ÿçš„æ¡†æ¶åŠæœºå™¨å­¦ä¹ æŠ€æœ¯åœ¨æ¨èç­–ç•¥ä¸­çš„åº”ç”¨.pdf\n\n## å¼ºåŒ–å­¦ä¹ \n- å¼ºåŒ–å­¦ä¹ åœ¨é˜¿é‡Œçš„æŠ€æœ¯æ¼”è¿›ä¸ä¸šåŠ¡åˆ›æ–°.pdf\n\n## æŠ€æœ¯é›†é”¦\n- AAAI2018.pdf\n- æ•°å­—ç»æµä¸‹çš„ç®—æ³•åŠ›é‡.pdf\n- 2018ç¾å›¢ç‚¹è¯„ç®—æ³•ç³»åˆ—.pdf\n- Learning To Rankåœ¨ä¸ªæ€§åŒ–ç”µå•†æœç´¢ä¸­çš„åº”ç”¨\n\n---\n\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>","tags":["èµ„æºåˆ†äº«"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"å¤šåˆ†ç±»å®ç°æ–¹å¼ä»‹ç»å’Œåœ¨Sparkä¸Šå®ç°å¤šåˆ†ç±»é€»è¾‘å›å½’","url":"/2019/01/12/æœºå™¨å­¦ä¹ /å¤šåˆ†ç±»å®ç°æ–¹å¼ä»‹ç»å’Œåœ¨Sparkä¸Šå®ç°å¤šåˆ†ç±»é€»è¾‘å›å½’/","content":"> æœ¬æ–‡ä¸»è¦ä»‹ç»å¤šåˆ†ç±»å®ç°æ–¹å¼ä»‹ç»å’Œåœ¨Sparkä¸Šå®ç°å¤šåˆ†ç±»é€»è¾‘å›å½’ã€‚\n\n<!--More-->\n\n# èƒŒæ™¯\nåœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ä»‹ç»äº†å¤šåˆ†ç±»é€»è¾‘å›å½’ç®—æ³•çš„æ•°æ®åŸç†ï¼Œå‚è€ƒæ–‡ç« é“¾æ¥\n\nCSDNæ–‡ç« é“¾æ¥ï¼šhttps://blog.csdn.net/Gamer_gyt/article/details/85209496\nè¯¥ç¯‡æ–‡ç« ä»‹ç»ä¸€ä¸‹Sparkä¸­å¤šåˆ†ç±»ç®—æ³•ï¼Œä¸»è¦åŒ…æ‹¬çš„æŠ€æœ¯ç‚¹å¦‚ä¸‹\n\n- å¤šåˆ†ç±»å®ç°æ–¹å¼\n\t- ä¸€å¯¹ä¸€ ï¼ˆOne V Oneï¼‰\n\t- ä¸€å¯¹å…¶ä½™ï¼ˆOne V Remainingï¼‰\n\t- å¤šå¯¹å¤š ï¼ˆMore V Moreï¼‰\n\n\n- Sparkä¸­çš„å¤šåˆ†ç±»å®ç°\n# å¤šåˆ†ç±»å®ç°æ–¹å¼\n## ä¸€å¯¹ä¸€\nå‡è®¾æŸä¸ªåˆ†ç±»ä¸­æœ‰Nä¸ªç±»åˆ«ï¼Œå°†è¿™Nä¸ªç±»åˆ«ä¸¤ä¸¤é…å¯¹ï¼ˆç»§è€Œè½¬åŒ–ä¸ºäºŒåˆ†ç±»é—®é¢˜ï¼‰ï¼Œè¿™æ ·å¯ä»¥å¾—åˆ° Nï¼ˆN-1ï¼‰/ 2ä¸ªäºŒåˆ†ç±»å™¨ï¼Œè¿™æ ·è®­ç»ƒæ¨¡å‹æ—¶éœ€è¦è®­ç»ƒ Nï¼ˆN-1ï¼‰/ 2ä¸ªæ¨¡å‹ï¼Œé¢„æµ‹æ—¶å°†æ ·æœ¬è¾“é€åˆ°è¿™äº›æ¨¡å‹ä¸­ï¼Œæœ€ç»ˆç»Ÿè®¡å‡ºç°æ¬¡æ•°è¾ƒå¤šçš„ç±»åˆ«ç»“æœä½œä¸ºæœ€ç»ˆç±»åˆ«ã€‚\n\nå‡è®¾ç°åœ¨æœ‰ä¸‰ä¸ªç±»åˆ«ï¼šç±»åˆ«Aï¼Œç±»åˆ«Bï¼Œç±»åˆ«Cï¼Œç±»åˆ«Dã€‚ä¸€å¯¹ä¸€å®ç°å¤šåˆ†ç±»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n<img src=\"https://img-blog.csdnimg.cn/20190112220044121.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dhbWVyX2d5dA==,size_16,color_FFFFFF,t_70\">\n\n--------------------- \nå®Œæ•´å†…å®¹è¯·é˜…è¯»åŸæ–‡ï¼šhttps://blog.csdn.net/Gamer_gyt/article/details/86378882 \n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"Hive Join åˆ†æå’Œä¼˜åŒ–","url":"/2019/01/03/Spark/Hive Join åˆ†æå’Œä¼˜åŒ–/","content":"> Skuå¯¹åº”å“ç‰Œè¿›è¡Œå…³è”ï¼Œå¤§è¡¨å¯¹åº”éå¤§è¡¨ï¼ˆè¿™é‡Œçš„éå¤§è¡¨å¹¶ä¸èƒ½ç”¨å°è¡¨æ¥å®šä¹‰ï¼‰\n\n<!--More-->\nÂ \n# é—®é¢˜åˆ†æ\nè¿›è¡Œè¡¨å·¦å…³è”æ—¶ï¼Œæœ€åä¸€ä¸ªreduceä»»åŠ¡å¡åˆ°99%ï¼Œè¿è¡Œæ—¶é—´å¾ˆé•¿ï¼Œå‘ç”Ÿäº†ä¸¥é‡çš„æ•°æ®å€¾æ–œã€‚\n\nä»€ä¹ˆæ˜¯æ•°æ®å€¾æ–œï¼Ÿæ•°æ®å€¾æ–œä¸»è¦è¡¨ç°åœ¨ï¼Œmap /reduceç¨‹åºæ‰§è¡Œæ—¶ï¼ŒreduceèŠ‚ç‚¹å¤§éƒ¨åˆ†æ‰§è¡Œå®Œæ¯•ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªæˆ–è€…å‡ ä¸ªreduceèŠ‚ç‚¹è¿è¡Œå¾ˆæ…¢ï¼Œå¯¼è‡´æ•´ä¸ªç¨‹åºçš„å¤„ç†æ—¶é—´å¾ˆé•¿ï¼Œè¿™æ˜¯å› ä¸ºæŸä¸€ä¸ªkeyçš„æ¡æ•°æ¯”å…¶ä»–keyå¤šå¾ˆå¤šï¼ˆæœ‰æ—¶æ˜¯ç™¾å€æˆ–è€…åƒå€ä¹‹å¤šï¼‰ï¼Œè¿™æ¡keyæ‰€åœ¨çš„reduceèŠ‚ç‚¹æ‰€å¤„ç†çš„æ•°æ®é‡æ¯”å…¶ä»–èŠ‚ç‚¹å°±å¤§å¾ˆå¤šï¼Œä»è€Œå¯¼è‡´æŸå‡ ä¸ªèŠ‚ç‚¹è¿Ÿè¿Ÿè¿è¡Œä¸å®Œã€‚\n\n\nå®Œæ•´å†…å®¹è¯·é˜…è¯»åŸæ–‡ï¼šhttps://blog.csdn.net/Gamer_gyt/article/details/85690885 \n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["Sparkä¸å¤§æ•°æ®"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"TensorFlow ç‰¹å¾å·¥ç¨‹:feature_column","url":"/2019/01/03/æ·±åº¦å­¦ä¹ /TensorFlow/TensorFlow ç‰¹å¾å·¥ç¨‹: feature_column/","content":"> åœ¨ä½¿ç”¨å¾ˆå¤šæ¨¡å‹çš„æ—¶å€™ï¼Œéƒ½éœ€è¦å¯¹è¾“å…¥çš„æ•°æ®è¿›è¡Œå¿…è¦çš„ç‰¹å¾å·¥ç¨‹å¤„ç†ã€‚æœ€å…¸å‹çš„å°±æ˜¯:one-hotå¤„ç†ï¼Œè¿˜æœ‰hashåˆ†æ¡¶ç­‰å¤„ç†ã€‚ä¸ºäº†æ–¹ä¾¿å¤„ç†è¿™äº›ç‰¹å¾ï¼Œtensorflowæä¾›äº†ä¸€äº›åˆ—çš„ç‰¹å¾å·¥ç¨‹æ–¹æ³•æ¥æ–¹ä¾¿ä½¿ç”¨.\n\n<!--More-->\n\n## å…¬å…±çš„import\n```\nimport tensorflow as tf\nfrom tensorflow.python.estimator.inputs import numpy_io\nimport numpy as np\nimport collections\nfrom tensorflow.python.framework import errors\nfrom tensorflow.python.platform import test\nfrom tensorflow.python.training import coordinator\nfrom tensorflow import feature_column\n\nfrom tensorflow.python.feature_column.feature_column import _LazyBuilder\n```\n\n\n## numeric_column\n```\nnumeric_column(\n    key,\n Â  Â shape=(1,),\n Â  Â default_value=None,\n Â  Â dtype=tf.float32,\n Â  Â normalizer_fn=None\n)\n```\n- keyï¼šç‰¹å¾çš„åå­—ã€‚ä¹Ÿå°±æ˜¯å¯¹åº”çš„åˆ—åç§°\n- shapeï¼šè¯¥keyæ‰€å¯¹åº”çš„ç‰¹å¾çš„shape. é»˜è®¤æ˜¯1ï¼Œä½†æ˜¯æ¯”å¦‚one-hotç±»å‹çš„ï¼Œshapeå°±ä¸æ˜¯1ï¼Œè€Œæ˜¯å®é™…çš„ç»´åº¦ã€‚æ€»ä¹‹ï¼Œè¿™é‡Œæ˜¯keyæ‰€å¯¹åº”çš„ç»´åº¦ï¼Œä¸ä¸€å®šæ˜¯1\n- default_valueï¼šå¦‚æœä¸å­˜åœ¨ä½¿ç”¨çš„é»˜è®¤å€¼\n- normalizer_fnï¼šå¯¹è¯¥ç‰¹å¾ä¸‹çš„æ‰€æœ‰æ•°æ®è¿›è¡Œè½¬æ¢ã€‚å¦‚æœéœ€è¦è¿›è¡Œnormalizeï¼Œé‚£ä¹ˆå°±æ˜¯ä½¿ç”¨normalizeçš„å‡½æ•°.è¿™é‡Œä¸ä»…ä»…å±€é™äºnormalizeï¼Œä¹Ÿå¯ä»¥æ˜¯ä»»ä½•çš„è½¬æ¢æ–¹æ³•ï¼Œæ¯”å¦‚å–å¯¹æ•°ï¼Œå–æŒ‡æ•°ï¼Œè¿™ä»…ä»…æ˜¯ä¸€ç§å˜æ¢æ–¹æ³•\n\nå®Œæ•´å†…å®¹è¯·é˜…è¯»ï¼šhttps://blog.csdn.net/Gamer_gyt/article/details/85689840\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["TensorFlow"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"é›†æˆå­¦ä¹ ï¼ˆEnsemble Learning)","url":"/2019/01/03/æœºå™¨å­¦ä¹ /é›†æˆå­¦ä¹ ï¼ˆEnsemble Learning)/","content":"\n> åœ¨æœºå™¨å­¦ä¹ çš„æœ‰ç›‘ç£å­¦ä¹ ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å­¦ä¹ å‡ºä¸€ä¸ªç¨³å®šçš„ä¸”åœ¨å„ä¸ªæ–¹é¢è¡¨ç°éƒ½è¾ƒå¥½çš„æ¨¡å‹ï¼Œä½†å®é™…æƒ…å†µå¾€å¾€ä¸è¿™ä¹ˆç†æƒ³ï¼Œæœ‰æ—¶æˆ‘ä»¬åªèƒ½å¾—åˆ°å¤šä¸ªæœ‰åå¥½çš„æ¨¡å‹ï¼ˆå¼±ç›‘ç£æ¨¡å‹ï¼Œåœ¨æŸäº›æ–¹é¢è¡¨ç°çš„æ¯”è¾ƒå¥½ï¼‰ã€‚é›†æˆå­¦ä¹ å°±æ˜¯ç»„åˆè¿™é‡Œçš„å¤šä¸ªå¼±ç›‘ç£æ¨¡å‹ä»¥æœŸå¾—åˆ°ä¸€ä¸ªæ›´å¥½æ›´å…¨é¢çš„å¼ºç›‘ç£æ¨¡å‹ï¼Œé›†æˆå­¦ä¹ æ½œåœ¨çš„æ€æƒ³æ˜¯å³ä¾¿æŸä¸€ä¸ªå¼±åˆ†ç±»å™¨å¾—åˆ°äº†é”™è¯¯çš„é¢„æµ‹ï¼Œå…¶ä»–çš„å¼±åˆ†ç±»å™¨ä¹Ÿå¯ä»¥å°†é”™è¯¯çº æ­£å›æ¥ã€‚\n\n<!--More-->\n\né›†æˆå­¦ä¹ åœ¨å„ä¸ªè§„æ¨¡çš„æ•°æ®é›†ä¸Šéƒ½æœ‰å¾ˆå¥½çš„ç­–ç•¥ã€‚\n- æ•°æ®é›†å¤§ï¼šåˆ’åˆ†æˆå¤šä¸ªå°æ•°æ®é›†ï¼Œå­¦ä¹ å¤šä¸ªæ¨¡å‹è¿›è¡Œç»„åˆ\n- æ•°æ®é›†å°ï¼šåˆ©ç”¨Bootstrapæ–¹æ³•è¿›è¡ŒæŠ½æ ·ï¼Œå¾—åˆ°å¤šä¸ªæ•°æ®é›†ï¼Œåˆ†åˆ«è®­ç»ƒå¤šä¸ªæ¨¡å‹å†è¿›è¡Œç»„åˆ\n\nè¿™ç¯‡åšå®¢ä»‹ç»ä¸€ä¸‹é›†æˆå­¦ä¹ çš„å‡ ç±»ï¼šBaggingï¼ŒBoostingä»¥åŠStackingã€‚\n\n# Bagging\nBaggingæ˜¯bootstrap aggregatingçš„ç®€å†™ã€‚å…ˆè¯´ä¸€ä¸‹bootstrapï¼Œbootstrapä¹Ÿç§°ä¸ºè‡ªåŠ©æ³•ï¼Œå®ƒæ˜¯ä¸€ç§æœ‰æ”¾å›çš„æŠ½æ ·æ–¹æ³•ï¼Œç›®çš„ä¸ºäº†å¾—åˆ°ç»Ÿè®¡é‡çš„åˆ†å¸ƒä»¥åŠç½®ä¿¡åŒºé—´ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹\n- é‡‡ç”¨é‡æŠ½æ ·æ–¹æ³•ï¼ˆæœ‰æ”¾å›æŠ½æ ·ï¼‰ä»åŸå§‹æ ·æœ¬ä¸­æŠ½å–ä¸€å®šæ•°é‡çš„æ ·æœ¬\n- æ ¹æ®æŠ½å‡ºçš„æ ·æœ¬è®¡ç®—æƒ³è¦å¾—åˆ°çš„ç»Ÿè®¡é‡T\n- é‡å¤ä¸Šè¿°Næ¬¡ï¼ˆä¸€èˆ¬å¤§äº1000ï¼‰ï¼Œå¾—åˆ°Nä¸ªç»Ÿè®¡é‡T\n- æ ¹æ®è¿™Nä¸ªç»Ÿè®¡é‡ï¼Œå³å¯è®¡ç®—å‡ºç»Ÿè®¡é‡çš„ç½®ä¿¡åŒºé—´\n\nåœ¨Baggingæ–¹æ³•ä¸­ï¼Œåˆ©ç”¨bootstrapæ–¹æ³•ä»æ•´ä½“æ•°æ®é›†ä¸­é‡‡å–æœ‰æ”¾å›æŠ½æ ·å¾—åˆ°Nä¸ªæ•°æ®é›†ï¼Œåœ¨æ¯ä¸ªæ•°æ®é›†ä¸Šå­¦ä¹ å‡ºä¸€ä¸ªæ¨¡å‹ï¼Œæœ€åçš„é¢„æµ‹ç»“æœåˆ©ç”¨Nä¸ªæ¨¡å‹çš„è¾“å‡ºå¾—åˆ°ï¼Œå…·ä½“åœ°ï¼šåˆ†ç±»é—®é¢˜é‡‡ç”¨Nä¸ªæ¨¡å‹é¢„æµ‹æŠ•ç¥¨çš„æ–¹å¼ï¼Œå›å½’é—®é¢˜é‡‡ç”¨Nä¸ªæ¨¡å‹é¢„æµ‹å¹³å‡çš„æ–¹å¼ã€‚\n\nä¾‹å¦‚éšæœºæ£®æ—ï¼ˆRandom Forestï¼‰å°±å±äºBaggingã€‚éšæœºæ£®æ—ç®€å•åœ°æ¥è¯´å°±æ˜¯ç”¨éšæœºçš„æ–¹å¼å»ºç«‹ä¸€ä¸ªæ£®æ—ï¼Œæ£®æ—ç”±å¾ˆå¤šçš„å†³ç­–æ ‘ç»„æˆï¼Œéšæœºæ£®æ—çš„æ¯ä¸€æ£µå†³ç­–æ ‘ä¹‹é—´æ˜¯æ²¡æœ‰å…³è”çš„ã€‚\n\nåœ¨æˆ‘ä»¬å­¦ä¹ æ¯ä¸€æ£µå†³ç­–æ ‘çš„æ—¶å€™å°±éœ€è¦ç”¨åˆ°Bootstrapæ–¹æ³•ã€‚åœ¨éšæœºæ£®æ—ä¸­ï¼Œæœ‰ä¸¤ä¸ªéšæœºé‡‡æ ·çš„è¿‡ç¨‹ï¼šå¯¹è¾“å…¥æ•°æ®çš„è¡Œï¼ˆæ•°æ®çš„æ•°é‡ï¼‰ä¸åˆ—ï¼ˆæ•°æ®çš„ç‰¹å¾ï¼‰éƒ½è¿›è¡Œé‡‡æ ·ã€‚å¯¹äºè¡Œé‡‡æ ·ï¼Œé‡‡ç”¨æœ‰æ”¾å›çš„æ–¹å¼ï¼Œè‹¥æœ‰Nä¸ªæ•°æ®ï¼Œåˆ™é‡‡æ ·å‡ºNä¸ªæ•°æ®ï¼ˆå¯èƒ½æœ‰é‡å¤ï¼‰ï¼Œè¿™æ ·åœ¨è®­ç»ƒçš„æ—¶å€™æ¯ä¸€æ£µæ ‘éƒ½ä¸æ˜¯å…¨éƒ¨çš„æ ·æœ¬ï¼Œç›¸å¯¹è€Œè¨€ä¸å®¹æ˜“å‡ºç°overfittingï¼›æ¥ç€è¿›è¡Œåˆ—é‡‡æ ·ä»Mä¸ªfeatureä¸­é€‰æ‹©å‡ºmä¸ªï¼ˆm<<Mï¼‰ã€‚æœ€è¿‘è¿›è¡Œå†³ç­–æ ‘çš„å­¦ä¹ ã€‚\n\né¢„æµ‹çš„æ—¶å€™ï¼Œéšæœºæ£®æ—ä¸­çš„æ¯ä¸€æ£µæ ‘çš„éƒ½å¯¹è¾“å…¥è¿›è¡Œé¢„æµ‹ï¼Œæœ€åè¿›è¡ŒæŠ•ç¥¨ï¼Œå“ªä¸ªç±»åˆ«å¤šï¼Œè¾“å…¥æ ·æœ¬å°±å±äºå“ªä¸ªç±»åˆ«ã€‚è¿™å°±ç›¸å½“äºå‰é¢è¯´çš„ï¼Œæ¯ä¸€ä¸ªåˆ†ç±»å™¨ï¼ˆæ¯ä¸€æ£µæ ‘ï¼‰éƒ½æ¯”è¾ƒå¼±ï¼Œä½†ç»„åˆåˆ°ä¸€èµ·ï¼ˆæŠ•ç¥¨ï¼‰å°±æ¯”è¾ƒå¼ºäº†ã€‚\n\n# Boosting\næå‡æ–¹æ³•ï¼ˆBoostingï¼‰æ˜¯ä¸€ç§å¯ä»¥ç”¨æ¥å‡å°ç›‘ç£å­¦ä¹ ä¸­åå·®çš„æœºå™¨å­¦ä¹ ç®—æ³•ã€‚ä¸»è¦ä¹Ÿæ˜¯å­¦ä¹ ä¸€ç³»åˆ—å¼±åˆ†ç±»å™¨ï¼Œå¹¶å°†å…¶ç»„åˆä¸ºä¸€ä¸ªå¼ºåˆ†ç±»å™¨ã€‚Boostingä¸­æœ‰ä»£è¡¨æ€§çš„æ˜¯AdaBoostï¼ˆAdaptive boostingï¼‰ç®—æ³•ï¼šåˆšå¼€å§‹è®­ç»ƒæ—¶å¯¹æ¯ä¸€ä¸ªè®­ç»ƒä¾‹èµ‹ç›¸ç­‰çš„æƒé‡ï¼Œç„¶åç”¨è¯¥ç®—æ³•å¯¹è®­ç»ƒé›†è®­ç»ƒtè½®ï¼Œæ¯æ¬¡è®­ç»ƒåï¼Œå¯¹è®­ç»ƒå¤±è´¥çš„è®­ç»ƒä¾‹èµ‹ä»¥è¾ƒå¤§çš„æƒé‡ï¼Œä¹Ÿå°±æ˜¯è®©å­¦ä¹ ç®—æ³•åœ¨æ¯æ¬¡å­¦ä¹ ä»¥åæ›´æ³¨æ„å­¦é”™çš„æ ·æœ¬ï¼Œä»è€Œå¾—åˆ°å¤šä¸ªé¢„æµ‹å‡½æ•°ã€‚å…·ä½“å¯ä»¥å‚è€ƒã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹ã€‚\n\n# Stacking\nStackingæ–¹æ³•æ˜¯æŒ‡è®­ç»ƒä¸€ä¸ªæ¨¡å‹ç”¨äºç»„åˆå…¶ä»–å„ä¸ªæ¨¡å‹ã€‚é¦–å…ˆæˆ‘ä»¬å…ˆè®­ç»ƒå¤šä¸ªä¸åŒçš„æ¨¡å‹ï¼Œç„¶åæŠŠä¹‹å‰è®­ç»ƒçš„å„ä¸ªæ¨¡å‹çš„è¾“å‡ºä¸ºè¾“å…¥æ¥è®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œä»¥å¾—åˆ°ä¸€ä¸ªæœ€ç»ˆçš„è¾“å‡ºã€‚ç†è®ºä¸Šï¼ŒStackingå¯ä»¥è¡¨ç¤ºä¸Šé¢æåˆ°çš„ä¸¤ç§Ensembleæ–¹æ³•ï¼Œåªè¦æˆ‘ä»¬é‡‡ç”¨åˆé€‚çš„æ¨¡å‹ç»„åˆç­–ç•¥å³å¯ã€‚ä½†åœ¨å®é™…ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨logisticå›å½’ä½œä¸ºç»„åˆç­–ç•¥ã€‚\n\nå¦‚ä¸‹å›¾ï¼Œå…ˆåœ¨æ•´ä¸ªè®­ç»ƒæ•°æ®é›†ä¸Šé€šè¿‡bootstrapæŠ½æ ·å¾—åˆ°å„ä¸ªè®­ç»ƒé›†åˆï¼Œå¾—åˆ°ä¸€ç³»åˆ—åˆ†ç±»æ¨¡å‹ï¼Œç§°ä¹‹ä¸ºTier 1åˆ†ç±»å™¨ï¼ˆå¯ä»¥é‡‡ç”¨äº¤å‰éªŒè¯çš„æ–¹å¼å­¦ä¹ ï¼‰ï¼Œç„¶åå°†è¾“å‡ºç”¨äºè®­ç»ƒTier 2 åˆ†ç±»å™¨ã€‚\n\nå®Œæ•´å†…å®¹è¯·é˜…è¯»ï¼š https://blog.csdn.net/Gamer_gyt/article/details/85689424 \n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"åŸºäºTF-IDFç®—æ³•çš„çŸ­æ ‡é¢˜å…³é”®è¯æå–","url":"/2019/01/03/NLP/åŸºäºTF-IDFç®—æ³•çš„çŸ­æ ‡é¢˜å…³é”®è¯æå–/","content":"\n> TF-IDFï¼ˆTerm Frequencyâ€“InverseDocument Frequencyï¼‰æ˜¯ä¸€ç§ç”¨äºèµ„è®¯æ£€ç´¢ä¸æ–‡æœ¬æŒ–æ˜çš„å¸¸ç”¨åŠ æƒæŠ€æœ¯ã€‚TF-IDFçš„ä¸»è¦æ€æƒ³æ˜¯ï¼šå¦‚æœæŸä¸ªè¯æˆ–çŸ­è¯­åœ¨ä¸€ç¯‡æ–‡ç« ä¸­å‡ºç°çš„é¢‘ç‡TFé«˜ï¼Œå¹¶ä¸”åœ¨å…¶ä»–æ–‡ç« ä¸­å¾ˆå°‘å‡ºç°ï¼Œåˆ™è®¤ä¸ºæ­¤è¯æˆ–è€…çŸ­è¯­å…·æœ‰å¾ˆå¥½çš„ç±»åˆ«åŒºåˆ†èƒ½åŠ›ï¼Œé€‚åˆç”¨æ¥åˆ†ç±»ã€‚\n\n<!--More-->\n\nå®Œæ•´å†…å®¹è¯·é˜…è¯»ï¼šhttps://blog.csdn.net/Gamer_gyt/article/details/85690389 \n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["NLP"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€å†…é™„PDFèµ„æ–™ã€‘Pythonå®ç°ä¸‹è½½å›¾ç‰‡å¹¶ç”Ÿäº§PDFæ–‡ä»¶","url":"/2019/01/02/Python/ã€å†…é™„PDFèµ„æ–™ã€‘Pythonå®ç°ä¸‹è½½å›¾ç‰‡å¹¶ç”Ÿäº§PDFæ–‡ä»¶/","content":"\n> èƒŒæ™¯ï¼š2018AIConå¤§ä¼šä¸­çš„ä¸€äº›PPTï¼Œå®˜æ–¹æ²¡æœ‰æä¾›å®Œæ•´çš„PDFæ–‡ä»¶ï¼Œè€Œæ˜¯ä¸€å¼ å¼ å›¾ç‰‡ï¼Œä¸æ–¹ä¾¿ä¸‹è½½å’Œåç»­é˜…è¯»ï¼Œè¿™é‡Œä½¿ç”¨Pythonçˆ¬å–ç›¸å…³æ¼”è®²çš„å›¾ç‰‡ï¼Œå¹¶ç”Ÿäº§PDFæ–‡ä»¶\n\n<!--More--> \n\n# ä¸‹è½½å‡½æ•°\nåˆ›å»ºä¸‹è½½å›¾ç‰‡å‡½æ•°ï¼Œä½¿ç”¨çš„æ˜¯Pythonçš„urllibåº“ï¼Œä»£ç å¦‚ä¸‹\n\n```\n# ä¸‹è½½å›¾ç‰‡\ndef save_img(img_url,file_path=\"./img/\"):\n    if not os.path.exists(file_path):\n        print(\"ä¿å­˜å›¾ç‰‡çš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºè¯¥ç›®å½•\")\n        os.mkdir(file_path)\n    # å›¾ç‰‡åç¼€\n    file_suffix = os.path.splitext(img_url)[1]\n    file_name = str ( int(img_url.split(\"-\")[1].split(\".\")[0]) )\n    # æ‹¼æ¥å›¾ç‰‡åï¼ˆåŒ…å«è·¯å¾„ï¼‰\n    filename = '{}{}{}'.format(file_path,file_name,file_suffix)\n    # urllib\n    urllib.request.urlretrieve(img_url, filename=filename)\n```\n\n# ç”ŸæˆPDFå‡½æ•°\nåˆ›å»ºå›¾ç‰‡ç”ŸæˆPDFæ–‡ä»¶çš„å‡½æ•°ï¼Œä½¿ç”¨çš„æ˜¯Pythonçš„reportlabåº“ï¼Œä»£ç å¦‚ä¸‹\n```\n# ç”Ÿæˆpdf\ndef convert_img_to_pdf(img_path,pdf_path):\n    pages = 0\n    (w, h) = landscape(portrait(A4))\n    can = canvas.Canvas(pdf_path, pagesize=landscape(portrait(A4)))\n    # è·å–img_pathä¸‹æ–‡ä»¶ï¼Œå¹¶è¿›è¡Œæ’åº\n    files = os.listdir(img_path)\n    files.sort(key=lambda x: int(x[:-4]))\n    # éå†æ¯ä¸ªæ–‡ä»¶\n    for f_name in files:\n        # æ‹¼è£…æˆå®Œæ•´çš„fileè·¯å¾„\n        file_path = img_path + os.sep + str(f_name)\n        can.drawImage(file_path, 0, 0, w, h)\n        can.showPage()\n        pages = pages + 1\n    can.save()\n```\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œpagesizeä¸èƒ½ç›´æ¥æŒ‡å®šå€¼portrait(A4)ï¼Œå› ä¸ºä¸€å¼ å›¾ç‰‡ä¼šå®Œæ•´çš„åµŒå¥—åœ¨ä¸€é¡µA4çº¸å¼ ä¸Šï¼Œæå…¶ä¸ç¾è§‚ï¼Œè¿™é‡Œéœ€è¦å°†A4çš„å¤§å°è¿›è¡Œè½¬ç½®ï¼Œpagesize=landscape(portrait(A4))\n\n# å®šä¹‰è¦ç”Ÿæˆçš„PDFç›¸å…³ä¿¡æ¯\n```\n_list = (\n    {\n        \"pdf_name\": \"FFMåŠDeepFFMæ¨¡å‹åœ¨æ¨èç³»ç»Ÿçš„æ¢ç´¢åŠå®è·µ.pdf\",\n        \"img_path\": \"./img_1/\",\n        \"page\": 52,\n        \"id\": \"3670025915\"\n    },{\n        \"pdf_name\": \"çŸ¥ä¹æ¨èç³»ç»Ÿçš„å®è·µåŠé‡æ„ä¹‹è·¯.pdf\",\n        \"img_path\": \"./img_2/\",\n        \"page\": 38,\n        \"id\": \"4291192513\"\n    },{\n        \"pdf_name\": \"æ·±åº¦æ ‘åŒ¹é…â€”â€”ä¸‹ä¸€ä»£æ¨èæŠ€æœ¯çš„æ¢ç´¢å’Œå®è·µ.pdf\",\n        \"img_path\": \"./img_3/\",\n        \"page\": 33,\n        \"id\": \"3621355867\"\n    },{\n        \"pdf_name\": \"åŸºäºçŸ¥è¯†çš„æœç´¢æ¨èæŠ€æœ¯åŠåº”ç”¨.pdf\",\n        \"img_path\": \"./img_4/\",\n        \"page\": 31,\n        \"id\": \"436657700\"\n    },{\n        \"pdf_name\": \"ç“œå­äºŒæ‰‹è½¦ä¸ªæ€§åŒ–æ¨èçš„æŒ‘æˆ˜ä¸åº”å¯¹.pdf\",\n        \"img_path\": \"./img_5/\",\n        \"page\": 40,\n        \"id\": \"1433077746\"\n    },{\n        \"pdf_name\": \"æœºå™¨å­¦ä¹ åœ¨è‹å®æœç´¢å¹³å°ä¸­çš„å®è·µ.pdf\",\n        \"img_path\": \"./img_6/\",\n        \"page\": 55,\n        \"id\": \"1155556309\"\n    }\n)\n```\n\n# ç”ŸæˆPDF\néå†è¦ç”ŸæˆPDFçš„æ¯ä¸ªä¿¡æ¯\n```\nfor one in _list:\n    print(one)\n    for i in range(1,one[\"page\"]+1):\n        img_path = one[\"img_path\"]\n        pdf_path = one[\"pdf_name\"]\n        if i < 10:\n            img_url = \"https://static001.geekbang.org/con/37/pdf/\" + one[\"id\"] + \"/image/page-00\" + str(i) + \".jpg\"\n        else:\n            img_url = \"https://static001.geekbang.org/con/37/pdf/\" + one[\"id\"] + \"/image/page-0\" + str(i) + \".jpg\"\n        print(img_url)\n        # ä¸‹è½½å›¾ç‰‡\n        save_img(img_url,img_path)\n        # åˆæˆpdf\n        convert_img_to_pdf(img_path, pdf_path)\n    print(\"Imageè½¬PDFå®Œæˆï¼\")\n```\n\nPDFæ–‡ä»¶èµ„æ–™è·å–æ–¹å¼ï¼šç™¾åº¦ç½‘ç›˜\n\né“¾æ¥ï¼šhttps://pan.baidu.com/s/1MC_bH2x5jjsP1LvBB5cZCA\n\næå–ç ï¼š58zq\n\n---\n\nåŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/Gamer_gyt/article/details/85637436\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["Python","æŠ€æœ¯åˆ†äº«"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"2018å¹´ç»ˆæ€»ç»“-è¶â€œæœªè€â€ï¼Œå†è®¤çœŸä¸€æ¬¡ï¼Œæˆ‘è§‰å¾—ä½ èƒ½æ›´å¥½ï¼","url":"/2018/12/29/éšæ‰‹è®°/2018å¹´ç»ˆæ€»ç»“-è¶â€œæœªè€â€ï¼Œå†è®¤çœŸä¸€æ¬¡ï¼Œæˆ‘è§‰å¾—ä½ èƒ½æ›´å¥½ï¼/","content":"> æ¯ä¸€å¹´çš„å¹´å°¾ï¼Œæˆ‘éƒ½ä¼šé—®è‡ªå·±ï¼šè¿™ä¸€å¹´ï¼Œæˆ‘æ”¶è·äº†ä»€ä¹ˆï¼Ÿ            ä½ å‘¢ï¼Ÿ\n\n<!--More-->\n\n---\n\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/85333470\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758\nGithubï¼šhttps://github.com/thinkgamer\nå…¬ä¼—å·ï¼šæœç´¢ä¸æ¨èWiki\nä¸ªäººç½‘ç«™ï¼šhttp://thinkgamer.github.io\n\n---\n\n# Chapter 1\n\nè¿™ä¸€å¹´ï¼Œæˆ‘æ”¶è·äº†å¾ˆå¤šä¸œè¥¿ï¼Œä¹Ÿå­¦ä¼šå’Œä½“éªŒåˆ°äº†å¾ˆå¤šï¼Œç”¨æˆ·å…«ä¸ªå­—æ¥æ¦‚æ‹¬å°±æ˜¯ï¼šä¸å¿˜ç²—å¿ƒï¼Œæ–¹å¾—å§‹ç»ˆã€‚\n\n- å°ç™½\n\n4æœˆ29å·é‚£å¤©ï¼Œæˆ‘å‘äº†ä¸ªæœ‹å‹åœˆï¼Œè¯´ä¹°äº†ä¸ªå°ç™½ï¼Œä¸è¯´é’±ã€ä¸è¯´äº‹ï¼Œåªè¯´è¿™æ˜¯æˆ‘äººç”Ÿè·¯ä¸Šçš„å¦å¤–ä¸€ä¸ªå°ä¼™ä¼´ã€‚å¦‚ä»Š7ä¸ªæœˆè¿‡å»äº†ï¼Œå°ç™½ä¹Ÿä»æœ€å¼€å§‹è·‘åˆ°äº†ç°åœ¨çš„8000å…¬é‡Œï¼Œè™½ç„¶åœ¨åŒ—äº¬å—åˆ°é™å·ç­‰æ”¿ç­–çš„å½±å“ï¼Œä½†ä»–è¿˜æ˜¯å‘æŒ¥äº†å¾ˆå¤§çš„ä»·å€¼ã€‚\n\n- éœ²è¥\n\nä¸å¾—ä¸è¯´è¿™æ˜¯æˆ‘2018å¹´ç©è¿‡æœ€åˆºæ¿€çš„æ¸¸æˆï¼Œæ‰¾ä¸€ä¸ªé£å’Œæ—¥ä¸½çš„æ—¥å­ï¼ŒèƒŒä¸Šè¡Œå›Šï¼Œå‰å¾€éœ²è¥åœ£åœ°ï¼Œ18å¹´æ€»å…±å‡ºå»äº†ä¸¤æ¬¡ï¼Œä¸€æ¬¡æ˜¯åŒ—äº¬ç¬¬ä¸€é«˜å³°â€”â€”çµå±±ï¼Œä¸€æ¬¡æ˜¯åŒ—äº¬ç¬¬äºŒé«˜å³°â€”â€”æµ·å¨å±±ã€‚2019ä¼šè¿›è¡Œæ›´å¤šçš„éœ²è¥æ´»åŠ¨ï¼Œç©çš„å°±æ˜¯å¿ƒè·³\n\n- æµ·å¨å±±\n\nç©¿è¿‡äº‘çƒŸé›¾ç»•çš„ç›˜å±±è·¯ï¼Œçœ‹åˆ°äº†é‚£ä¸€ç‰‡ä¸–å¤–ä¸æ¡ƒå›­ã€‚å¯¹äºæµ·å¨å±±å‘å¾€å·²ä¹…ï¼Œç»ˆäºæ‹‰ä¸Šå°ä¼™ä¼´å¼€å§‹äº†äººç”Ÿç¬¬ä¸€æ¬¡éœ²è¥ï¼Œåªèƒ½è¯´çœŸåˆºæ¿€ï¼Œä¸­åˆåˆ°è¾¾æ—¶ä¸‹é›¨ï¼Œä¸Šå±±æ—¶ä¸‹é›¨ï¼Œæ™šä¸Šä¸‹é›¨ï¼Œç¬¬äºŒå¤©æ—©ä¸Šä¸‹é›¨ï¼Œç¬¬ä¸€æ¬¡éœ²è¥ç®€ç›´å°±æ˜¯ä¸å±±ä¸ŠæŒ¨å†»æ·‹é›¨çš„ï¼Œå¥½æ­¹çœ‹åˆ°çš„é£æ™¯ä¸é”™ï¼Œç»å†çš„äº‹æƒ…æ¯”è¾ƒæœ‰è¶£ï¼Œè®°å½•çš„æƒ…èŠ‚æ¯”è¾ƒç¾å¥½ï¼Œè¿™ä¸€åˆ‡ä¾¿æ˜¯å€¼å¾—çš„ã€‚\n\n<center><img src=\"https://img-blog.csdnimg.cn/20181229042241463\"></center>\n\n- çµå±±\n\nå»çµå±±æ—¶è®°å¿†æ¯”è¾ƒæ·±åˆ»çš„æ˜¯ï¼Œè´Ÿé‡20kgï¼Œçˆ¬äº†4ä¸ªå°æ—¶ï¼Œåœ¨æ¥è¿‘å±±é¡¶çš„åœ°æ–¹å®‰è¥æ‰å¯¨ï¼Œç„¶åï¼Œç„¶åé‚£å¤©æ™šä¸Šåˆé‡åˆ°äº†å¤§é›¨ï¼Œå½“æ—¶å¿ƒä¸­ç®€ç›´æ˜¯ä¸€ä¸‡åªè‰æ³¥é©¬åœ¨é©·é©¬å¥”è…¾ï¼Œä¸è¿‡æœ‰è¶£çš„æ˜¯ç¬¬ä¸€æ¬¡åœ¨å®¤å¤–ç…®äº†ä¸ªé¢ï¼Œç„¶ååˆåœ¨é›¨ä¸­æ‹…æƒŠå—æ€•çš„ç¡äº†ä¸€æ™šã€‚ç¬¬äºŒå¤©æ—©ä¸Šï¼Œé›¨è¿‡å¤©æ™´ï¼Œçœ‹åˆ°çš„äº‘ï¼Œå¬åˆ°çš„é£ï¼Œè®©äººè§‰å¾—è¿™æ‰€ç»å†çš„ä¸€åˆ‡éƒ½æ˜¯å€¼å¾—çš„ã€‚\n<center><img src=\"https://img-blog.csdnimg.cn/20181229042241593\"></center>\n\n- æµå·å²›\n\näººç”Ÿçš„ç¬¬ä¸€æ¬¡å‡ºå›½ï¼Œé€‰çš„æ˜¯éŸ©å›½çš„æµå·å²›ï¼Œé€‰æ‹©è¿™ä¸ªåœ°æ–¹çš„åŸå› ä¸»è¦æ˜¯ä¸éœ€è¦åŠç­¾è¯ï¼Œæ–¹ä¾¿ï¼Œç¦»åŒ—äº¬è¿‘ï¼Œé£æœºä¸‰ä¸ªå°æ—¶å°±åˆ°äº†ï¼Œè€Œä¸”æœ€é‡è¦çš„æ˜¯è¿™é‡Œæ˜¯çº¯å¤©ç„¶çš„è‡ªç„¶é£æ™¯ï¼Œæ¯”è¾ƒç¬¦åˆæˆ‘æ¬£èµé£æ™¯çš„è°ƒè°ƒã€‚\n<center><img src=\"https://img-blog.csdnimg.cn/20181229042241728\"></center>\n\nç¬¬ä¸€æ¬¡å‡ºå›½æ•´ä½“éå¸¸é¡ºåˆ©ï¼Œæ— è®ºæ˜¯Airbnbè®¢æˆ¿ï¼Œåˆ°è¾¾ä¹‹åçš„æˆ¿ä¸œçš„æ¬¾å¾…ï¼Œè¿˜æ˜¯åœ¨é‚£çš„æ²Ÿé€šäº¤æµï¼Œéƒ½è®©äººéå¸¸çš„æƒŠå–œå’Œæ„‰å¿«ã€‚æµå·å²›çš„ç”Ÿæ´»çŠ¶æ€å¾ˆç¼“æ…¢ï¼Œè®©äººéå¸¸èˆ’æœï¼Œæœ€é‡è¦çš„è¿˜æ˜¯è‡ªç„¶æ™¯è‰²ä¸é”™ï¼Œæ–‡åŒ–ç”Ÿæ´»ä½“éªŒä¸é”™ï¼Œå¿ƒæƒ…ä¸é”™ã€‚\n\nåœ¨æµå·å²›æœ€è®©æˆ‘æƒŠè®¶çš„ä¸€ä»¶äº‹æƒ…æ˜¯ï¼šåœ¨å‘å±•å¦‚æ­¤è¿…é€Ÿçš„æ—¶ä»£ï¼Œæµ·å¥³çœŸçš„å­˜åœ¨ï¼Œä»–ä»¬æ½œå…¥æµ·åº•ï¼Œå¸¦å›ä¸€äº›æ°´äº§å“ï¼Œç„¶åå‡ºå”®ç»™æµ·å²›ä¸Šçš„é¥­åº—ï¼Œèµšå–ç”Ÿæ´»çš„è´¹ç”¨ã€‚ç”±äºé•¿æœŸæ½œæ°´ï¼Œä»–ä»¬çš„è„¸éƒ¨å·²ç»å‘ç”Ÿäº†å˜å½¢ï¼Œå‡ºäºå°Šé‡ï¼Œæˆ‘æ²¡æœ‰æ‹ç…§ã€‚è€Œä¸”éŸ©å›½è½½å†Œçš„æµ·å¥³è®°å½•äººæ•°æ˜¯åœ¨ä¸æ–­å‡å°‘çš„ï¼ŒéŸ©å›½æµå·å²›çš„æµ·å¥³æ–‡åŒ–è¢«åˆ—å…¥è”åˆå›½æ•™ç§‘æ–‡ç»„ç»‡äººç±»éç‰©è´¨æ–‡åŒ–é—äº§åå½•ã€‚åŒæ—¶æµ·å¥³åœ¨äºŒæˆ˜æœŸé—´ï¼Œçˆ†å‘äº†æŠ—æ—¥ç‹¬ç«‹è¿åŠ¨ï¼Œå¯¹åæ³•è¥¿æ–¯æˆ˜äº‰æœ‰ç€ä¸åŒå¯»å¸¸çš„æ„ä¹‰ã€‚\n\nçœŸçš„æ˜¯æ¯ä¸€ç§æ–‡åŒ–éƒ½å€¼å¾—è¢«å°Šæ•¬ã€‚\n\n- 618\n\nåœ¨äº¬ä¸œç»å†äº†ç¬¬ä¸€ä¸ª618å¤§ä¿ƒï¼Œå½“æ—¶æ˜¯å‡ºäºå¥½å¥‡å‚åŠ çš„ï¼Œå¯èƒ½æ˜¯èŒä¸šçš„ç‰¹æ®Šæ€§ï¼Œæˆ‘ä»¬ç®—æ³•è¿™è¾¹æ„Ÿè§‰æ²¡é‚£ä¹ˆå¿™ï¼Œä¸è¿‡æ•°æ®ç«¯å’ŒæœåŠ¡ç«¯å€’æ˜¯ä¸€ç›´ç»·ç€ç¥ç»ã€‚\n\nåŒæ ·æ˜¯618ï¼Œç¬¬ä¸€æ¬¡è¿‘è·ç¦»çš„æ¥è§¦äº†ä¸€äº›æ˜æ˜Ÿï¼Œæœ‰èƒ¡å¤ï¼Œé‡‘å¿—æ–‡ï¼Œå¼ ä¿¡å“²ï¼Œè‹è¿è¹ï¼Œç¬¬ä¸€æ¬¡ç¦»æ˜æ˜Ÿä»¬é‚£ä¹ˆè¿‘ï¼Œå¤šå¤šå°‘å°‘è¿˜æ˜¯å¾ˆæ¿€åŠ¨çš„ã€‚\n\n- æ‹„æ‹\n\nè¿™ä¸€å¹´ï¼Œä¹Ÿç¬¬ä¸€æ¬¡ç”¨äº†åŒæ‹ï¼Œå› ä¸ºæ‰“ç¯®çƒæŠŠå³è„šå´´ç€äº†ï¼Œæ‹„ç€æ‹æ–ä¸Šäº†ä¸¤å‘¨ç­ï¼Œè¯´å®è¯å¾ˆå°´å°¬å‘€\n\n# Chapter 2\næœ€è¿‘åˆšå¥½ç»„å†…è¿›è¡Œ2018çš„æ€»ç»“æ±‡æŠ¥ï¼Œå°±é¡ºé“æŠŠè‡ªå·±18å¹´çš„å·¥ä½œå’ŒæŠ€æœ¯æˆé•¿éƒ½æ€»ç»“äº†ä¸‹ã€‚\n\n2018å¹´ï¼Œè‡ªå·±åœ¨æŠ€æœ¯ä¸Šä¹Ÿæˆé•¿äº†å¾ˆå¤šï¼Œä¸ç®¡æ˜¯å¯¹äºæ¨èç®—æ³•çš„ç†è§£æŒæ¡ï¼Œè¿˜æ˜¯æ¶æ„çš„è¿ç§»ç†è§£ï¼Œéƒ½å­¦ä¼šäº†å¾ˆå¤šä¸œè¥¿ï¼Œåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­å¯¹äºè‡ªå·±çš„å·¥ç¨‹å¼€å‘èƒ½åŠ›ä¹Ÿæœ‰äº†ä¸€å®šçš„æé«˜ï¼Œç®—æ³•çš„åº”ç”¨å’Œä¸šåŠ¡ç†è§£éƒ½æœ‰å¾ˆæ·±åˆ»çš„è®¤çŸ¥ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸­è¿˜æ˜¯éå¸¸æ„Ÿè°¢ç»„é•¿å¨œå§å¯¹æˆ‘çš„å¸®åŠ©å’ŒæŒ‡å¯¼ï¼Œä»å¨œå§å’Œå…¶ä»–äººçš„èº«ä¸ŠçœŸçš„å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ï¼Œç®—æ³•ç†è®ºçš„æ‰å®ï¼Œæµç¨‹çš„è§„èŒƒå’Œä¼˜ç§€çš„é—®é¢˜è§£å†³èƒ½åŠ›ã€‚\n\n2018å¹´ä¹Ÿå¯¹è‡ªå·±è¿‡å¾€çŸ¥è¯†è¿›è¡Œäº†æ€»ç»“ï¼Œæ•´ä¸ªæ–‡æ¡£å’Œç« èŠ‚ä¼šåœ¨åç»­ç»™å‡ºï¼Œæƒ³è¿›è¡Œé˜…è¯»çš„æœ‹å‹å¯ä»¥æŒç»­å…³æ³¨æœ¬å…¬ä¼—å·ã€‚\n\n# Chapter 3\n\n2019æ˜¯ä¸€ä¸ªæ–°çš„å¼€å§‹ï¼Œå¸Œæœ›è‡ªå·±èƒ½å¤Ÿé‡æ–°çš„å»æ²‰æ·€ä¸€ä¸‹æŠ€æœ¯ï¼ŒåŒæ—¶èµ°æ›´å¤šçš„è·¯ï¼Œçœ‹æ›´å¤šçš„é£æ™¯ï¼Œé˜…æ›´ä¸°å¯Œçš„äººç”Ÿã€‚\n\n- éœ²è¥æŒç»­è¿›è¡Œ\n- è‡ªé©¾ï¼Œæ¢ç´¢æˆ·å¤–\n- ç›¸å…³è®ºæ–‡é˜…è¯»ï¼Œè¦æ±‚è‡³å°‘ä¸€æœˆä¸€ç¯‡\n- æ·±åº¦åœ¨çº¿æ’åºç ”ç©¶å’Œå®è·µ\n- å®æ—¶åœ¨çº¿å­¦ä¹ ç ”ç©¶å’Œå®è·µ\n- æ·±åº¦æ¶æ„æ¢ç´¢å’Œåº”ç”¨\n- è®¤çœŸå­¦ä¹ ï¼Œæ€»ç»“æ–‡ç« ï¼Œç”¨å¿ƒç»è¥å¾®ä¿¡å…¬ä¼—å·\n\n2019ï¼ŒåŠ æ²¹ï¼Œç›¸ä¿¡ä½ å¯ä»¥åœ¨åŒ†åŒ†çš„äººæµä¸­ï¼Œé©»è¶³æ¬£èµé‚£äº¤é”™æ–‘å½±ã€‚\n\n# Chapter 4\näººç”Ÿæ²¡æœ‰ä¸€å¸†é£é¡ºçš„ï¼Œä¹Ÿæ²¡æœ‰é¡ºå¿ƒé¡ºæ„çš„ï¼Œé‚£äº›æ— è°“çš„äº‹ï¼Œæ— è°“çš„äººï¼Œä½ åˆä½•å¿…careå‘¢ï¼Œåšå¥½è‡ªå·±ï¼Œä¸å€¼å¾—äº¤çš„äººä¸å¿…å‡¡äº‹è€¿è€¿äºå¿ƒï¼Œä¸å¿…è¦å«‰å¦’çš„äº‹ï¼Œä¸å¿…äº‹äº‹äº²ä¸ºï¼Œåšå¥½è‡ªå·±ï¼Œå°±å¥½äº†ã€‚\n\nè®¤çœŸå¯¹å¾…ç”Ÿæ´»ä¸­çš„æ¯ä¸€ä»¶å°äº‹ï¼Œä»»ä½•ä¸€ä»¶å°äº‹ï¼Œåªè¦ä½ åšæŒä¸‹å»ï¼Œè¿™ä¾¿æ˜¯å¾ˆå€¼å¾—äººå°Šæ•¬å’Œé’¦ä½©äº†ã€‚\n\n19å¹´ï¼Œä¸€èµ·åŠ æ²¹ï¼\n\n----\n\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n","tags":["å¹´ç»ˆæ€»ç»“"],"categories":["éšæ‰‹è®°"]},{"title":"2019å¹´ç»ˆæ€»ç»“-åŸ‹ä¸‹çš„ç§å­æ˜¯è®²ç»™è‡ªå·±çš„æ•…äº‹","url":"/2018/12/29/éšæ‰‹è®°/2019å¹´ç»ˆæ€»ç»“-åŸ‹ä¸‹çš„ç§å­æ˜¯è®²ç»™è‡ªå·±çš„æ•…äº‹/","content":"\n![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200101231601533.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70)\nçª—å¤–æœ‰æ¼†é»‘çš„å¤œï¼Œå¿ƒä¸­æ˜¯æ˜äº®çš„ç¯ã€‚å…¶å®æ¯ä¸ªäººçš„å†…å¿ƒéƒ½æœ‰ä¸€é¢—å±äºè‡ªå·±çš„ç¯å¡”ï¼Œä¸æ¸¡è¿œæ–¹çš„é‚®è½®ï¼Œä¸å¼•è¿·è·¯çš„çµé­‚ã€‚\n\nä¸çŸ¥ä¸è§‰çš„ï¼Œæ—¶é—´åˆè¿‡äº†ä¸€å¹´ï¼Œå¹´åˆå…´é«˜é‡‡çƒˆç»™è‡ªå·±2019ç«‹flagçš„æƒ…æ™¯è¿˜åœ¨çœ¼å‰æ™ƒç€ï¼Œä¸€ä¸å°å¿ƒè¿™ä¸€å¹´å°±è¦å½»åº•æ²¦ä¸ºè¿‡å¾€äº†ã€‚å›æƒ³è¿‡å»è¿™ä¸€å¹´ï¼Œè®¸å¤šäººåŒ†åŒ†åˆ°æ¥ï¼Œä¹Ÿæœ‰å¾ˆå¤šäººæ‚„æ‚„ç¦»å»ï¼Œæœ‰è¿‡å¥½å‹ç›¸èšçš„ç‹‚æ¬¢ï¼Œä¹Ÿæœ‰æ— æ•°æ§ç€å­¤ç‹¬æ— å¤„å­˜æ”¾çš„å¤œæ™šï¼Œæœ‰è¿‡æ”¶è·çš„æ»¡è¶³ï¼Œä¹Ÿæœ‰åœ¨å´©æºƒè¾¹ç¼˜æŒ£æ‰çš„å¿ƒé…¸ï¼Œæœ‰è¿‡å±±é‡éš”ç»çš„è½»æ¾ï¼Œä¹Ÿæœ‰è¿½é€è·¯ä¸Šç£•å€’çš„ç¾ç»Šã€‚\n\n2019å¹´äºæˆ‘è€Œè¨€ï¼Œå¥½åƒä¹Ÿæ²¡ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„ï¼Œç»å†äº†ä¸€äº›äº‹ï¼Œçœ‹é€äº†ä¸€äº›äººï¼Œæ˜ç™½äº†ä¸€äº›ç†ï¼Œæ‡‚å¾—äº†ä¸€äº›æƒ…ï¼Œåˆ°æœ€åæ‰å‘ç°ï¼ŒåŸæ¥æ‰€æœ‰çš„ä¸€äº›éƒ½åªä¸è¿‡æ˜¯è¿‡å¾€äº‘çƒŸï¼Œæ›¾ç»é‚£ä¸ªæ„æ°”é£å‘çš„å°‘å¹´ï¼Œæ—©å·²è¢«è½äº†å¾ˆè¿œå¾ˆè¿œã€‚\n\nè¿™ä¸€å¹´ï¼Œè¸è¿‡ä»–å›½çš„è·¯ï¼Œèµ°è¿‡å¼‚ä¹¡çš„æ¡¥\nè¿™ä¸€å¹´ï¼Œçˆ¬è¿‡æ¢¦ä¸­çš„å±±ï¼Œæ¶‰è¿‡è¿œæ–¹çš„æ°´\nè¿™ä¸€å¹´ï¼Œæœ‰åœ¨æ˜Ÿç©ºä¸‹æŒ‡ç€æœˆäº®ï¼Œçœ‹å¤©æ–‡å°çš„æ— å£°\nè¿™ä¸€å¹´ï¼Œæœ‰åœ¨è’é‡é‡Œé—ªç€ç¯å…‰ï¼Œå¬è™«é¸£å’Œæµæ°´å£°\nè¿™ä¸€å¹´ï¼Œçœ‹è¿‡è‰åŸçš„æ—¥å‡ºï¼Œä¹Ÿçœ‹è¿‡ç«å±±çš„æ™šéœ\nè¿™ä¸€å¹´ï¼Œçœ‹è¿‡è‰åŸçš„å¤©è·¯ï¼Œä¹Ÿçœ‹è¿‡åå±±çš„å‡¶é™©\nè¿™ä¸€å¹´ï¼Œæ—…é€”ç»†æ— å£°ï¼Œè§†ç•Œå˜å…‰æ˜\n\nè¿™ä¸€å¹´ï¼Œç»å†äº†ä¸‰ä»¶å¤§äº‹å§ï¼Œæ¢å·¥ä½œï¼ˆ[é™†æœˆï¼Œæˆ‘æƒ³è¯´çš„å’Œæˆ‘è¦æ”¹åäº†ï¼](https://mp.weixin.qq.com/s/NvpZiaJ_0StAkkor1Q1aVQ)ã€ç‚¹å‡»é˜…è¯»ã€‘ï¼‰ã€ä¹¦å‡ºç‰ˆï¼ˆ[å®˜å®£ï¼šå¤„å¥³åº§ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ä¸Šå¸‚äº†](https://mp.weixin.qq.com/s/8V-nu1s6jCgIkwE0liFT4Q)ã€ç‚¹å‡»é˜…è¯»ã€‘ï¼Œ[ã€Šæ¨èç³»ç»Ÿå¼€å‘å®æˆ˜ã€‹ä¸Šå¸‚è¿‘ä¸¤ä¸ªæœˆçš„ç¢ç¢å¿µ](https://mp.weixin.qq.com/s/0ZCvn_fXP-CkbLq4KVkLAg)ã€ç‚¹å‡»é˜…è¯»ã€‘ï¼‰ã€è£…ä¿®æˆ¿å­ã€‚\n\nåœ¨è¿™ä¸€å¹´ç»å†çš„æ‰€æœ‰äº‹æƒ…ä¸­ï¼Œæœ‰å‡ ç‚¹ä½“ä¼šå’Œæ„Ÿæ‚Ÿå§ï¼Œåˆ†äº«å‡ºæ¥ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ã€‚\n\n## è¿ˆå‡ºç¬¬ä¸€æ­¥\näº‹æƒ…å†å°ï¼Œä¹Ÿè¦è®¤çœŸå¯¹å¾…ï¼Œäº‹æƒ…å†å¤§ï¼Œä¹Ÿä¸è¦å®³æ€•ï¼Œå‹‡æ•¢çš„è¿ˆå‡ºç¬¬ä¸€æ­¥ï¼Œç„¶åè§æ‹›æ‹†æ‹›å°±å¥½äº†ã€‚å½“åˆå¼€å§‹è£…ä¿®æˆ¿å­ä¹‹å‰ï¼Œæˆ‘ç®€ç›´å°±æ‡µé€¼äº†ï¼Œé¢å¯¹æ¯›èƒšæˆ¿ï¼Œæ— ä»ä¸‹æ‰‹ï¼Œåˆšå¼€å§‹ä»ç½‘ä¸Šå„ç§æœèµ„æ–™ï¼Œæ³¨æ„äº‹é¡¹ç­‰ï¼Œäº”ä¸€è¯·äº†å‡ å¤©å‡ï¼Œå›å®¶æ‰¾äººå¼€å§‹æ•´ï¼Œç°åœ¨å·²ç»éƒ½æå¥½äº†ï¼Œçœ‹èµ·æ¥æ„Ÿè§‰è¿˜ä¸é”™ï¼Œå½“ç„¶æ•´ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿä¼šæœ‰ä¸€äº›å°æ’æ›²ï¼Œä½†æ•´ä½“ä¸Šè¿˜æ˜¯å¾ˆé¡ºåˆ©çš„ã€‚\n\n## è®¤çœŸç”¨å¿ƒ\nå…¶å®ä¸ç®¡æ˜¯å¹³æ—¶åšäº‹ï¼Œè¿˜æ˜¯å·¥ä½œï¼Œä»”ç»†è®¤çœŸä¸€äº›ï¼Œä½ ä¼šé¿å…ä¸€äº›å°é—®é¢˜ã€‚åœ¨å¼€å§‹å·¥ä½œä¹‹å‰ï¼Œå¤šä¸€äº›æ€è€ƒå’Œæ¢³ç†ï¼Œæ•´ä½“å·¥ä½œå°±ä¼šæ›´åŠ é¡ºåˆ©ï¼Œä¹Ÿä¼šé¿å…å¾ˆå¤šé”™è¯¯å’Œå‘ã€‚å½“ç„¶åšäº‹ä¹Ÿä¸€æ ·ï¼Œå‡¡äº‹å¤šæ€è€ƒï¼Œäº‹å‰æ€è€ƒã€äº‹åæ€»ç»“ï¼Œæ€»ä¼šæœ‰ä¸€äº›æ„å‘ä¸åˆ°çš„ç”Ÿæ´»ã€‚\n\n## å¹³å‡¡ä¸ä¼Ÿå¤§\nè¿™ä¸€å¹´ä¹Ÿæ¥è§¦äº†ä¸€äº›äººï¼Œä»–ä»¬éƒ½å¾ˆä¼˜ç§€ï¼Œå¾ˆå‰å®³ï¼Œåœ¨ä»–ä»¬çš„ä¸“ä¸šé¢†åŸŸå½“ç„¶æ˜¯topçº§é€‰æ‰‹ã€‚ä½†æ˜¯æˆ‘å‘ç°ä»–ä»¬éƒ½æœ‰ä¸€ä¸ªç‰¹å¾ï¼šåšæŒåšä¸€ä»¶å¹³å‡¡çš„äº‹ï¼Œåšåˆ°æè‡´ã€‚æ‰€ä»¥ä¸ç®¡ä½ ä»äº‹ä»€ä¹ˆç»†åˆ†é¢†åŸŸï¼Œåšä»€ä¹ˆæ ·çš„å·¥ä½œï¼ŒåšæŒåšå¥½å·¥ä½œå’Œç”Ÿæ´»ä¸­çš„æ¯ä¸€ä»¶å°äº‹ï¼Œä½ ä¹Ÿèƒ½è¿‡åŒ–å¹³å‡¡ä¸ºä¼Ÿå¤§ã€‚\n\n## ä¸å¿˜åˆå¿ƒ\nç›¸ä¿¡ä½ èº«è¾¹æœ‰å¾ˆå¤šåœ¨å„è‡ªé¢†åŸŸåšçš„å¾ˆä¼˜ç§€çš„äººï¼Œä¿æŒæ•¬ç•ä¹‹å¿ƒï¼Œä½†ä¸è¦è¿‡åº¦å»è¿½æ§ã€å´‡æ‹œã€æ¨¡ä»¿ï¼Œä½ è¦æ˜ç™½é‚£äº›è¿‡çš„å¥½çš„äººï¼Œåªä¸è¿‡æ˜¯æ‰¿å—äº†æ›´å¤§çš„å‹åŠ›ï¼Œåªä¸è¿‡æ˜¯åœ¨åšæŒå’Œæ”¾å¼ƒçš„è·¯å£é€‰æ‹©äº†åšæŒã€‚æ‰€ä»¥ï¼Œä¿æŒè‡ªå·±çš„åˆå¿ƒå’Œè§„åˆ’ï¼ŒåšæŒä¸‹å»ï¼ŒæŒ‰ç…§è‡ªå·±çš„è®¡åˆ’èµ°ï¼Œæ´»å‡ºè‡ªå·±çš„è‹±é›„ä¸»ä¹‰ã€‚\n\n\n\nå¤©äº®ä¹‹åï¼Œé‚£ä¸ªä¸å¸¦æœ‰ä¸€ä¸é˜´éœ¾çš„ï¼Œå…¨æ–°çš„2020ä¼šå¦‚çº¦è€Œè‡³ï¼Œæ–°çš„ä¸€å¹´ï¼Œå¸Œæœ›æˆ‘ä»¬èƒ½æ”¾ä¸‹è¿‡å¾€ï¼Œå¸ä¸‹æ‚²ä¼¤ï¼Œé‡æ–°æ•´è£…å‡ºå‘ï¼Œå¸Œæœ›æˆ‘ä»¬éƒ½èƒ½åœ¨ç–²å€¦çš„ç”Ÿæ´»é‡Œæ´»å‡ºè‡ªå·±çš„è‹±é›„ä¸»ä¹‰ã€‚æ–°çš„ä¸€å¹´ï¼Œç¥ä½ å¹³å®‰é¡ºé‚ï¼Œå–œç¬‘å¼€é¢œã€‚\n\n\n----\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<center>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n\n---\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108185024479.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n<img src=\"https://img-blog.csdnimg.cn/20191115142715859.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" />\n</center>","tags":["å¹´ç»ˆæ€»ç»“"],"categories":["éšæ‰‹è®°"]},{"title":"å¤šåˆ†ç±»é€»è¾‘å›å½’ï¼ˆMultinomial Logistic Regressionï¼‰","url":"/2018/12/21/æœºå™¨å­¦ä¹ /å¤šåˆ†ç±»é€»è¾‘å›å½’ï¼ˆMultinomial Logistic Regressionï¼‰/","content":"åˆ†ç±»ä»ç»“æœçš„æ•°é‡ä¸Šå¯ä»¥ç®€å•çš„åˆ’åˆ†ä¸ºï¼š\n- äºŒåˆ†ç±»ï¼ˆBinary Classificationï¼‰\n- å¤šåˆ†ç±»ï¼ˆMultinomialÂ  Classificationï¼‰ã€‚\n\n<!--More-->\n\n# å‰è¨€\n\nå…¶ä¸­äºŒåˆ†ç±»æ˜¯æœ€å¸¸è§ä¸”ä½¿ç”¨æœ€å¤šçš„åˆ†ç±»åœºæ™¯ï¼Œè§£å†³äºŒåˆ†ç±»çš„ç®—æ³•æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š\n- åŸºæœ¬çš„KNNã€è´å¶æ–¯ã€SVM\n- Online Rankingä¸­ç”¨æ¥åšäºŒåˆ†ç±»çš„åŒ…æ‹¬FMã€FFMã€GBDTã€LRã€XGBoostç­‰\n\nå¤šåˆ†ç±»ä¸­æ¯”å¦‚ï¼š\n- æ”¹è¿›ç‰ˆçš„KNNã€æ”¹è¿›ç‰ˆçš„è´å¶æ–¯ã€æ”¹è¿›ç‰ˆçš„SVMç­‰\n- å¤šç±»åˆ«çš„é€»è¾‘å›å½’\nå•°å—¦äº†è¿™ä¹ˆå¤šï¼Œå…¶å®å°±æ˜¯ä¸ºäº†è¯´è¿™ä¸ªå¤šåˆ†ç±»çš„é€»è¾‘å›å½’ã€‚\n\n# ç®€ä»‹\nåœ¨ç»Ÿè®¡å­¦é‡Œï¼Œå¤šç±»åˆ«é€»è¾‘å›å½’æ˜¯ä¸€ä¸ªå°†é€»è¾‘å›å½’ä¸€èˆ¬åŒ–æˆå¤šç±»åˆ«é—®é¢˜å¾—åˆ°çš„åˆ†ç±»æ–¹æ³•ã€‚ç”¨æ›´åŠ ä¸“ä¸šçš„è¯æ¥è¯´ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªç”¨æ¥é¢„æµ‹ä¸€ä¸ªå…·æœ‰ç±»åˆ«åˆ†å¸ƒçš„å› å˜é‡ä¸åŒå¯èƒ½ç»“æœçš„æ¦‚ç‡çš„æ¨¡å‹ã€‚Â \n\nå¦å¤–ï¼Œå¤šç±»åˆ«é€»è¾‘å›å½’ä¹Ÿæœ‰å¾ˆå¤šå…¶å®ƒçš„åå­—ï¼ŒåŒ…æ‹¬polytomous LRï¼Œmulticlass LRï¼Œsoftmax regressionï¼Œmultinomial logitï¼Œmaximum entropy classifierï¼Œconditional maximum entropy modelã€‚Â \n\nåœ¨å¤šç±»åˆ«é€»è¾‘å›å½’ä¸­ï¼Œå› å˜é‡æ˜¯æ ¹æ®ä¸€ç³»åˆ—è‡ªå˜é‡ï¼ˆå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ç‰¹å¾ã€è§‚æµ‹å˜é‡ï¼‰æ¥é¢„æµ‹å¾—åˆ°çš„ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯é€šè¿‡å°†è‡ªå˜é‡å’Œç›¸åº”å‚æ•°è¿›è¡Œçº¿æ€§ç»„åˆä¹‹åï¼Œä½¿ç”¨æŸç§æ¦‚ç‡æ¨¡å‹æ¥è®¡ç®—é¢„æµ‹å› å˜é‡ä¸­å¾—åˆ°æŸä¸ªç»“æœçš„æ¦‚ç‡ï¼Œè€Œè‡ªå˜é‡å¯¹åº”çš„å‚æ•°æ˜¯é€šè¿‡è®­ç»ƒæ•°æ®è®¡ç®—å¾—åˆ°çš„ï¼Œæœ‰æ—¶æˆ‘ä»¬å°†è¿™äº›å‚æ•°æˆä¸ºå›å½’ç³»æ•°ã€‚\n\næ¨¡å‹åˆ†æ\n--------------------- \n\nåŸæ–‡ï¼šhttps://blog.csdn.net/Gamer_gyt/article/details/85209496 \n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ã€è®ºæ–‡ã€‘åŸºäºä¸‰éƒ¨å›¾ç½‘ç»œç»“æ„çš„çŸ¥è¯†æ¨èç®—æ³•","url":"/2018/07/13/è®ºæ–‡/ã€è®ºæ–‡ã€‘åŸºäºä¸‰éƒ¨å›¾ç½‘ç»œç»“æ„çš„çŸ¥è¯†æ¨èç®—æ³•/","content":"\n> è¯¥è®ºæ–‡æ˜¯åŒ—äº¬ä¸€é«˜æ ¡å­¦ç”Ÿçš„è®ºæ–‡ï¼Œå…¶ä¸»è¦æ˜¯åŸºäºç”¨æˆ·-ç‰©å“-æ ‡ç­¾è¿™æ ·çš„ä¸‰éƒ¨å›¾ç½‘ç»œå±•å¼€æè¿°çš„ã€‚ä¸‹é¢ä¸»è¦ä»‹ç»ä¸€äº›å…¶ä¸­æå‡ºçš„å¯ç”¨çš„ç‚¹ï¼Œå…¶ä½™çš„è¯¦ç»†ä»‹ç»å¯å‚è€ƒåŸæ–‡ç« ã€‚\n\n<!--More-->\n\n### èƒŒæ™¯\næ¨èç®—æ³•æ˜¯ä¸ªæ€§åŒ–æ¨èçš„æ ¸å¿ƒï¼Œç°æœ‰çš„æ¨èç®—æ³•ï¼ˆé™¤äº†ç‚¹å‡»ç‡é¢„ä¼°ä¹‹å¤–çš„ï¼‰åŒ…æ‹¬ï¼š\n- åŸºäºå†…å®¹çš„æ¨èç®—æ³•\n- åŸºäºé¡¹ç›®çš„ååŒè¿‡æ»¤ç®—æ³•\n- åŸºäºç”¨æˆ·çš„ååŒè¿‡æ»¤ç®—æ³•\n- åŸºäºæ¨¡å‹çš„ååŒè¿‡æ»¤ç®—æ³•\n- åŸºäºç¤¾ä¼šç½‘ç»œåˆ†ææ–¹æ³•çš„ç®—æ³•\n- åŸºäºç½‘ç»œç»“æ„çš„æ¨èç®—æ³•\n\nåŸºäºç½‘ç»œç»“æ„çš„æ¨èç®—æ³•å¤§éƒ¨åˆ†æ˜¯åŸºäºäºŒéƒ¨å›¾æ¥å¯¹ç”¨æˆ·è¿›è¡Œä¸ªæ€§åŒ–æ¨èï¼Œè¿™ç§æ¨èç®—æ³•ä¸èƒ½æœ‰æ•ˆåœ°è§£å†³ç”¨æˆ·å†·å¯åŠ¨å’Œå†·é—¨ç‰©å“æ¨èçš„é—®é¢˜ï¼Œæœ¬æ–‡é’ˆå¯¹ç°æœ‰ç®—æ³•çš„ä¸è¶³ï¼Œæå‡ºäº†ä¸€ç§åŠ æƒçš„ä¸‰éƒ¨å›¾ç½‘ç»œç»“æ„çš„çŸ¥è¯†æ¨èç®—æ³•ï¼Œåœ¨ä¸‰éƒ¨å›¾ç½‘ç»œæ¨¡å‹çš„åŸºç¡€ä¸Šè®¾è®¡äº†æ–°çš„æ¨èç®—æ³•ã€‚\n\n### ä¸‰éƒ¨å›¾ç½‘ç»œç»“æ„ç®—æ³•\n\né¡¹ç›®-ç”¨æˆ·-æ ‡ç­¾çš„ä¸‰éƒ¨å›¾å¯ä»¥è¡¨ç¤ºä¸ºï¼š{U,I,T}ï¼Œå…¶ä¸­Uè¡¨ç¤ºç”¨æˆ·é›†åˆï¼ŒIè¡¨ç¤ºç‰©å“ç»“åˆï¼ŒTè¡¨ç¤ºæ ‡ç­¾é›†åˆã€‚åœ¨æ­¤ä¸‰éƒ¨å›¾ç»“æ„ä¸­ï¼Œä¸ä»…ç”¨æˆ·ä¸é¡¹ç›®ä»¥åŠ ç”¨æˆ·ä¸æ ‡ç­¾ä¹‹é—´å­˜åœ¨è”ç³»ï¼Œé¡¹ç›®ä¸é¡¹ç›®ã€ç”¨æˆ·ä¸ç”¨æˆ·ä»¥åŠæ ‡ç­¾ ä¸æ ‡ç­¾ä¹‹é—´ä¹Ÿå­˜åœ¨è”ç³»ã€‚\n<center><img src=\"https://img-blog.csdnimg.cn/20190805185607264.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=300px></center>\n\nå¦‚å›¾ 1æ‰€ç¤ºï¼Œä½¿ç”¨ä¸‰éƒ¨å›¾å¯¹é¡¹ç›®â€”ç”¨æˆ·â€”æ ‡ç­¾çš„ä¸‰å…ƒç»„è¿›è¡Œç›¸å…³æ¨¡å‹å»ºç«‹ï¼Œå¯¹ä¸‰éƒ¨å›¾æ¨¡å‹è¿›è¡Œç”¨æˆ·â€”é¡¹ç›®ã€ç”¨æˆ·â€”æ ‡ç­¾ å’Œé¡¹ç›®â€”æ ‡ç­¾çš„äºŒéƒ¨å›¾çš„æ‰©æ•£ã€‚æœ€ç»ˆçš„æ¨èç®—æ³•æ˜¯å»ºç«‹åœ¨ç”¨æˆ·â€”é¡¹ç›®ã€ç”¨æˆ·â€”æ ‡ç­¾å’Œé¡¹ç›®â€”æ ‡ç­¾äºŒéƒ¨å›¾ç½‘ç»œç»“æ„çš„åŸºç¡€ä¸Šã€‚\n\né¡¹ç›®çš„åº¦å’Œæƒé‡å¯¹æ¨èç®—æ³•çš„å½±å“\n#### 1. é¡¹ç›®çš„è¯„åˆ†ç›¸ä¼¼æ€§åŠæ”¹è¿›\nåŸºäºç”¨æˆ·-é¡¹ç›®ç½‘ç»œç»“æ„çš„æ¨èç³»ç»ŸæŠŠç”¨æˆ·å’Œé¡¹ç›®ä»…ä»…çœ‹æˆæŠ½è±¡çš„èŠ‚ç‚¹ï¼Œæ‰€æœ‰ç®—æ³•åˆ©ç”¨çš„ä¿¡æ¯éƒ½éšè—åœ¨ç”¨æˆ·å’Œé¡¹ç›®çš„å…³ç³»ä¹‹ä¸­ã€‚ç”¨æˆ·-ç‰©å“çš„äºŒéƒ¨å›¾æå‡ºäº†ä¸€ç§èµ„æºåˆ†é…çš„ç®—æ³•ã€‚å‡è®¾ j é€‰æ‹©è¿‡çš„æ‰€æœ‰äº§å“éƒ½å…·æœ‰æŸç§å‘ iæ¨èå…¶ä»–äº§å“çš„èƒ½åŠ›ï¼Œè¿™ä¸ª æŠ½è±¡çš„èƒ½åŠ›çœ‹åšæ˜¯ç›¸å…³äº§å“ä¸Šçš„æŸç§å¯åˆ†çš„èµ„æºï¼Œè¡¨ç¤ºäº§å“ j æ„¿æ„åˆ†é…ç»™äº§å“ içš„èµ„æºé…é¢(äº§å“çš„ç›¸ä¼¼æ€§)ã€‚\n\n$$\nsim(i,j) = \\frac{1}{ k_j } \\sum_{l=1}^{m}\\frac{ a_{il} b_{jl} }{k_l}\n$$\n\nå…¶ä¸­ï¼š\n- k_j è¡¨ç¤ºç‰©å“jçš„åº¦ï¼ˆå³è¢«å¤šå°‘ç”¨æˆ·äº§ç”Ÿè¿‡è¡Œä¸ºï¼‰\n- k_l è¡¨ç¤ºç”¨æˆ·lçš„åº¦ï¼ˆå³ç”¨æˆ·uå¯¹å¤šå°‘ä¸ªç‰©å“äº§ç”Ÿè¿‡è¡Œä¸ºï¼‰\n- a_il è¡¨ç¤ºç”¨æˆ· l æ˜¯å¦å¯¹ç‰©å“iäº§ç”Ÿè¿‡è¡Œä¸ºï¼Œäº§ç”Ÿè¿‡è¡Œä¸ºä¸º1ï¼Œæ²¡æœ‰äº§ç”Ÿè¿‡è¡Œä¸ºä¸º0\n\nä¼ ç»Ÿçš„äºŒéƒ¨ç½‘ç»œå›¾ç»“æ„åªæ³¨æ„åˆ°äº†ç”¨æˆ·æ˜¯å¦å¯¹ç‰©å“äº§ç”Ÿè¿‡è¡Œä¸ºï¼Œå¿½ç•¥äº†ç”¨æˆ·å¯¹ç‰©å“çš„è¯„åˆ†ï¼Œå®¹æ˜“é€ æˆä¿¡æ¯çš„æŸå¤±ã€‚æœ¬æ–‡ä¸­ä¿ç•™äº†ç”¨æˆ·å¯¹ç‰©å“çš„è¯„åˆ†ä¿¡æ¯ï¼Œå¯¹ç”¨æˆ·åˆ°ç‰©å“çš„è¾¹å¢åŠ ä¸€ä¸ªæƒé‡wï¼Œwçš„å¤§å°æ ¹æ®ç”¨æˆ·å¯¹ç‰©å“çš„è¯„åˆ†ç¡®å®šã€‚\n\nå‡è®¾ç”¨æˆ·å¯¹ç‰©å“çš„è¯„åˆ†æœ€å¤šä¸º5åˆ†ï¼Œåˆ™w=score/5ï¼Œæ‰€ä»¥wçš„èŒƒå›´æ˜¯[0,1]ï¼Œscoreè¡¨ç¤ºç”¨æˆ·å¯¹ç‰©å“çš„è¯„åˆ†ã€‚åˆ™æ”¹è¿›åçš„ç‰©å“ç›¸ä¼¼åº¦è®¡ç®—å…¬å¼ä¸ºï¼š\n\n$$\nsim'{(i,j)} = \\frac{1}{ d(I_j) } \\sum_{a=1}^{m}\\frac{ w_{ia} w_{ja} }{d(u_a)}\n$$\n\nå…¶ä¸­ï¼š\n\n$$\nd(I_j) = \\sum_{k=1}^{l} w_{kj} \n$$\nè¡¨ç¤ºé¡¹ç›®I_jçš„æ‰€æœ‰æƒé‡ä¹‹å’Œï¼Œå³å¯¹ç‰©å“jæœ‰è¡Œä¸ºçš„ç”¨æˆ·åˆ°ç‰©å“jçš„æƒé‡ä¹‹å’Œã€‚\n\n$$\nd(u_a) = \\sum_{k=1}^{m} w_{ak} \n$$\nè¡¨ç¤ºç”¨æˆ·u_açš„æ‰€æœ‰æƒé‡ä¹‹å’Œï¼Œå³ç”¨æˆ·uå¯¹å…¶ç”¨è¡Œä¸ºç‰©å“çš„ç”¨æˆ·åˆ°ç‰©å“çš„æƒé‡ä¹‹å’Œã€‚\n\n\n#### 2.é¡¹ç›®çš„å±æ€§ç›¸ä¼¼æ€§\n\nåœ¨ç°å®çš„ç”Ÿäº§ç³»ç»Ÿä¸­ï¼Œå½“ç”¨æˆ·è¿›å…¥ä¸€ä¸ªç³»ç»Ÿæ—¶ï¼Œå¯èƒ½ä»æœªå¯¹ç³»ç»Ÿå†…çš„ä»»ä½•ä¸€ä¸ªç‰©å“äº§ç”Ÿè¿‡è¡Œä¸ºï¼Œä¹Ÿå¯èƒ½åªå¯¹å¾ˆå°‘çš„ç‰©å“äº§ç”Ÿäº†è¡Œä¸ºã€‚è¿™æ—¶å€™ç³»ç»Ÿæ— æ³•æ ¹æ®å…¶å†å²ä¿¡æ¯è·å–ç›¸å…³å…´è¶£ã€‚\n\nè¿™ä¸ªæ—¶å€™å¯ä»¥å¯¹ç‰©å“è¿›è¡Œå±æ€§æè¿°å’Œæ ‡ç­¾æè¿°ï¼Œåˆ©ç”¨é¡¹ç›®çš„å±æ€§ç›¸ä¼¼æ€§å’Œåˆ©ç”¨æ ‡ç­¾ç›¸ä¼¼æ€§å‘ç”¨æˆ·æä¾›æ›´å¥½çš„æ¨èæœåŠ¡ã€‚\n\nå‡è®¾ç”¨æˆ·å¯¹ç‰©å“çš„å±æ€§çŸ©é˜µå¦‚ä¸‹ï¼š\n<center><img src=\"https://img-blog.csdnimg.cn/20190805223801681.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=500px></center>\n\nä¸Šè¡¨ä¸­1 è¡¨ç¤ºç‰©å“æ‹¥æœ‰è¯¥å±æ€§ï¼Œ0è¡¨ç¤ºç‰©å“ä¸æ‹¥æœ‰è¯¥å±æ€§ã€‚å‡è®¾ç‰©å“iå’Œjæ‰€æ‹¥æœ‰çš„å±æ€§åˆ†åˆ«è¡¨ç¤ºä¸ºQi å’Œ Qjï¼Œåˆ™é¡¹ç›®iå’Œjçš„å±æ€§ç›¸ä¼¼åº¦è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š\n\n$$\nsim_{at}(i,j) = \\frac{ |Q_i \\bigcap Q_j | }{|Q_i \\bigcup  Q_j |}\n$$\n\nå…¶ä¸­ï¼š\n- Q_i äº¤ Q_j è¡¨ç¤ºç‰©å“iå’Œç‰©å“jçš„å±æ€§äº¤é›†\n- Q_i å¹¶ Q_j è¡¨ç¤ºç‰©å“iå’Œç‰©å“jçš„å±æ€§å¹¶é›†\n\n$$\nsim_a'(i,j) = \\sum_{k=1}^{ m } sim_{ak}(i,j)\n$$\n\nä»ä¸Šå¼ä¸­å¯ä»¥çœ‹å‡ºï¼Œå½“æŸä¸€ä¸ªé¡¹ç›®å±æ€§ç›¸ä¼¼æ€§ä¸æ‰€æœ‰é¡¹ç›®çš„å±æ€§ç›¸ä¼¼åº¦ä¹‹å’Œ sim_aâ€²(iï¼Œj)éå¸¸å¤§æ—¶ï¼Œè¡¨æ˜è¯¥é¡¹ç›®åœ¨æ•´ä¸ªç³»ç»Ÿä¸­æ˜¯éå¸¸æ´»è·ƒçš„ï¼Œæ˜“è¢«é¦–å…ˆå‘å…¶ä»–ç”¨æˆ·å’Œé¡¹ç›®æ¨èã€‚å› æ­¤è¯¥é¡¹ç›®å¯è§†åšåœ¨æ•´ä¸ªæ¨èç³»ç»Ÿä¸­çš„åˆå§‹æ¨èèµ„æºï¼Œç”±æ­¤å¯è§£å†³ç”¨æˆ·å†·å¯åŠ¨é—®é¢˜ã€‚\n\n> å…³äºæ ‡ç­¾ç›¸ä¼¼æ€§ï¼Œå¯ä»¥é˜…è¯»åŸè®ºæ–‡ï¼Œè¿™é‡Œä¸å±•å¼€ä»‹ç»ã€‚\n\n#### 3. é¡¹ç›®çš„ç›¸ä¼¼æ€§å’Œè¯„åˆ†\n\nä»ä¸Šè¾¹çš„1 å’Œ 2ä¸­çš„æè¿°å¯ä»¥çœ‹å‡ºï¼Œé¡¹ç›®çš„ç›¸ä¼¼æ€§è¡¡é‡å¯ä»¥ä»ä¸¤æ–¹é¢å…¥æ‰‹\n- é¡¹ç›® iä¸ jçš„è¯„åˆ†ç›¸ä¼¼æ€§ã€‚è¯„åˆ†è¶Šç›¸ä¼¼ï¼Œè¯´æ˜ç”¨æˆ·å¯¹è¿™ä¸¤ä¸ªé¡¹ç›®çš„å–œå¥½è¶Šç›¸ä¼¼ã€‚è€Œä¸”å¦‚æœåŒæ—¶å¯¹å®ƒä»¬è¯„åˆ†çš„ç”¨æˆ·ä¸ª æ•°è¶Šå¤šï¼Œè¯´æ˜å®ƒä»¬çš„ç›¸ä¼¼æ€§è¶Šé«˜ã€‚\n- é¡¹ç›® iä¸ jçš„å±æ€§ç›¸ä¼¼æ€§ã€‚å¦‚æœé¡¹ç›® iä¸ jçš„å±æ€§å±äº ç›¸åŒçš„ç±»åˆ«ï¼Œé‚£ä¹ˆå®ƒä»¬çš„ç›¸ä¼¼æ€§å°±è¶Šé«˜ã€‚\n\næ‰€ä»¥æœ¬æ–‡é‡Œé‡‡ç”¨çš„æ˜¯é¡¹ç›®çš„è¯„åˆ†ç›¸ä¼¼æ€§å’Œå±æ€§ç›¸ä¼¼æ€§ç»„åˆçš„æ–¹æ³•æ¥è®¡ç®—é¡¹ç›®çš„ç›¸ä¼¼æ€§ã€‚é¡¹ç›®ç›¸ä¼¼æ€§çš„è®¡ç®—å…¬å¼ä¸ºï¼š\n$$\n\\bar S(i,j) = sim'(i,j) + sim_a'(i,j)\n$$\n\nå¦‚æœä¸¤ä¸ªç”¨æˆ·åŒæ—¶å¯¹ä¸€ä¸ªçƒ­é—¨ç‰©å“äº§ç”Ÿäº†è¡Œä¸ºï¼Œå¹¶ä¸èƒ½è¯´æ˜è¿™ä¸¤ä¸ªç”¨æˆ·çš„å…´è¶£ç›¸åŒï¼›ç›¸åå¦‚æœè¿™ä¸¤ä¸ªç”¨æˆ·åŒæ—¶é€‰æ‹©äº†ä¸€ä¸ªå†·é—¨ç‰©å“ï¼Œåˆ™è¿™ä¸¤ä¸ªç”¨æˆ·æ‹¥æœ‰ç›¸ä¼¼çš„ç‹¬ç‰¹å…´è¶£ã€‚ç®—æ³•ä¸­åº”è¯¥è€ƒè™‘é¡¹ç›®çš„åº¦ï¼ˆå³çƒ­é—¨ç¨‹åº¦ï¼‰ï¼Œå¢å¼ºå°åº¦é¡¹ç›®çš„æ¨èèƒ½åŠ›ï¼Œé™ä½å¤§åº¦é¡¹ç›®çš„æ¨èèƒ½åŠ›ï¼Œæé«˜æ¨èçš„å¤šæ ·æ€§ã€‚\n\nå¼•å…¥è°ƒèŠ‚å‡½æ•°f(Ï†)å¯¹ç‰©å“çš„ç›¸ä¼¼åº¦è¿›è¡Œè°ƒèŠ‚ï¼Œè®¡ç®—ç›¸ä¼¼åº¦æ—¶è€ƒè™‘ç‰©å“çš„åº¦å’Œç‰©å“çš„æƒé‡ä¹‹å’Œçš„æ¯”å€¼Ï†ï¼Œå…¶ä¸­Ï†çš„å®šä¹‰ä¸ºï¼š\n$$\n\\varphi =\\frac{k(I_j)}{ d(I_j )}\n$$\n\nå…¶ä¸­ï¼š\n- k(I_j) è¡¨ç¤ºé¡¹ç›®I_jçš„åº¦\n- d(I_j) è¡¨ç¤ºç‰©å“I_jçš„æ‰€æœ‰æƒé‡ä¹‹å’Œ\n\nå½“æ‰€æœ‰ç”¨æˆ·å¯¹I_jæ²¡æœ‰è¡Œä¸ºæ—¶ï¼ŒÏ†å–å¾—æœ€å¤§å€¼ 1/w ï¼Œå½“æ‰€æœ‰ç”¨æˆ·éƒ½å¯¹I_jæœ‰è¡Œä¸ºä¸”è®¤ä¸ºå¾ˆé‡è¦æ—¶ï¼ŒÏ†å–å¾—æœ€å°å€¼ 1ã€‚å³Ï†è¶Šå°ï¼Œç”¨æˆ·é€‰æ‹©è¯¥ç‰©å“çš„æ¦‚ç‡è¶Šå¤§ï¼ŒÏ†è¶Šå¤§ï¼Œç”¨æˆ·ä¸é€‰æ‹©è¯¥ç‰©å“çš„æ¦‚ç‡è¶Šå¤§ï¼Œç®—æ³•ä¸­åº”è¯¥é™ä½è¿™ç§ç‰©å“çš„æ¨èèƒ½åŠ›ã€‚\nf(Ï†)çš„è¡¨è¾¾å¼ä¸ºï¼š\n$$\nf(\\varphi) =\\varepsilon + \\delta ln(\\varphi +e)\n$$\n\nç»è¿‡å¤šæ¬¡å®éªŒæ€»ç»“ï¼Œå½“ Î´=0.5æ—¶ï¼Œå¯ä»¥å‡å°‘ f(Ï†)å¯¹é¡¹ç›®ç›¸ä¼¼åº¦çš„å½±å“ï¼Œæ•ˆæœæœ€ä½³ã€‚åˆ™è®¡ç®—é¡¹ç›®ç›¸ä¼¼åº¦çš„æœ€ç»ˆå…¬å¼ä¸ºï¼š\n$$\n\\bar S(i,j) = sim'(i,j) + sim_a'(i,j) =  \\frac{1}{ d(I_j) } \\sum_{a=1}^{m}\\frac{ w_{ia} w_{ja} }{d^{f(\\varphi )}(u_a)} + \\sum_{k=1}^{ m } sim_{ak}(i,j)\n$$\n\nå…¶ä¸­ï¼š\n- Ï†çš„å–å€¼ä¸ºï¼ˆ1ï¼Œ1/wï¼‰\n- Îµ ä¸º ä¸€ ä¸ª å¯ è°ƒ å‚ æ•° ï¼Œç”¨ äº è°ƒ èŠ‚ æ ‡ ç­¾åº¦å¯¹æ¨èç»“æœçš„å½±å“ï¼ŒÎµ>0è¡¨ç¤ºå¤§åº¦æ ‡ç­¾çš„æ¨èèƒ½åŠ›è¢«å‹åˆ¶ï¼Œ Îµ<0è¡¨ç¤ºå¤§åº¦æ ‡ç­¾çš„æ¨èèƒ½åŠ›å¾—åˆ°æé«˜\n\nè®¡ç®—ç›®æ ‡ç”¨æˆ·uiå¯¹æœªè¯„åˆ†é¡¹ç›®çš„è¯„åˆ† r_iÎ±çš„å…¬å¼ä¸ºï¼š\n$$\nr_{ia} = \\frac{ \\sum_{j=1,j \\neq i}^{n} \\bar S(i,j) * w_{ja} } {\\sum_{j=1,j \\neq i}^{n}  \\bar S(i,j)  }\n$$\n\næ ‡ç­¾çš„åº¦å’Œæƒå€¼å¯¹æ¨èç®—æ³•çš„å½±å“ å‚è€ƒåŸè®ºæ–‡ï¼Œè¿™é‡Œä¸è¿‡å¤šä»‹ç»ï¼Œè®ºæ–‡æ ‡é¢˜ä¸ºï¼šã€ŠåŸºäºä¸‰éƒ¨å›¾ç½‘ç»œç»“æ„çš„çŸ¥è¯†æ¨èç®—æ³• ã€‹\n\n### å®éªŒç»“è®º\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190805223958482.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=400px></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190805223911246.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=400px></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20190805224043927.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=400px></center>\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["è®ºæ–‡"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ç‚¹å‡»ç‡é¢„ä¼°ä¸­çš„FMç®—æ³•å’ŒFFMç®—æ³•","url":"/2018/07/13/RecSys/Sparkä¸æ¨èç³»ç»Ÿ/ç‚¹å‡»ç‡é¢„ä¼°ä¸­çš„FM&FFMç®—æ³•/","content":"\n>ç‰¹å¾å†³å®šäº†æ‰€æœ‰ç®—æ³•æ•ˆæœçš„ä¸Šé™ï¼Œè€Œä¸åŒçš„ç®—æ³•åªæ˜¯ç¦»è¿™ä¸ªä¸Šé™çš„è·ç¦»ä¸åŒè€Œå·²\n\n<!--More-->\n# CTRæ–¹æ³•æ¦‚è§ˆ\n  1.  å¹¿ä¹‰çº¿æ€§æ¨¡å‹+äººå·¥ç‰¹å¾ç»„åˆï¼ˆLR+FeatureEngineeringï¼‰\n  2. éçº¿æ€§æ¨¡å‹ï¼ˆGBDTï¼ŒFMï¼ŒFFMï¼ŒDNNï¼ŒMLRï¼‰\n  3. å¹¿ä¹‰çº¿æ€§æ¨¡å‹+éçº¿æ€§æ¨¡å‹ç»„åˆç‰¹å¾ï¼ˆæ¨¡å‹èåˆï¼Œå¸¸è§çš„æ˜¯LR+GBDTï¼‰\n\nå…¶ä¸­ 2ï¼ˆéçº¿æ€§æ¨¡å‹ï¼‰åˆå¯ä»¥åˆ†ä¸ºï¼š\n      â—‹ çŸ©é˜µåˆ†è§£ç±» ï¼ˆFMï¼ŒFFMï¼‰\n      â—‹ å›å½’ç±»        ï¼ˆGBDTï¼ŒMLRï¼‰\n      â—‹ ç¥ç»ç½‘ç»œç±» ï¼ˆDNNï¼‰\n\n# FMç®—æ³•\n## èƒŒæ™¯\nFMç®—æ³•ï¼ˆFactorization Machineï¼‰ä¸€èˆ¬ç¿»è¯‘ä¸ºâ€œå› å­åˆ†è§£æœºâ€ï¼Œ2010å¹´ï¼Œå®ƒç”±å½“æ—¶è¿˜åœ¨æ—¥æœ¬å¤§é˜ªå¤§å­¦çš„Steffen Rendleæå‡ºã€‚æ­¤ç®—æ³•çš„ä¸»è¦ä½œç”¨æ˜¯å¯ä»¥æŠŠæ‰€æœ‰ç‰¹å¾è¿›è¡Œé«˜é˜¶ç»„åˆï¼Œå‡å°‘äººå·¥å‚ä¸ç‰¹å¾ç»„åˆçš„å·¥ä½œï¼Œå·¥ç¨‹å¸ˆå¯ä»¥å°†ç²¾åŠ›é›†ä¸­åœ¨æ¨¡å‹å‚æ•°è°ƒä¼˜ã€‚FMåªéœ€è¦çº¿æ€§æ—¶é—´å¤æ‚åº¦ï¼Œå¯ä»¥åº”ç”¨äºå¤§è§„æ¨¡æœºå™¨å­¦ä¹ ã€‚ç»è¿‡éƒ¨åˆ†æ•°æ®é›†è¯•éªŒï¼Œæ­¤ç®—æ³•åœ¨ç¨€ç–æ•°æ®é›†åˆä¸Šçš„æ•ˆæœè¦æ˜æ˜¾å¥½äºSVMã€‚\n## è¦è§£å†³çš„é—®é¢˜\nå‡è®¾ä¸€ä¸ªå¹¿å‘Šåˆ†ç±»é—®é¢˜ï¼Œæ ¹æ®ç”¨æˆ·å’Œå¹¿å‘Šä½ç›¸å…³çš„ç‰¹å¾ï¼Œé¢„æµ‹ç”¨æˆ·æ˜¯å¦ç‚¹å‡»äº†å¹¿å‘Šã€‚\n\nClicked?|  Country | Day | Ad_type\n--- | --- | ---| ---\n1 |  USA | 26/11/15 | Movie\n0 | China | 1/7/14 | Game\n1 | China | 19/2/15 | Game\n\n\"Clicked?\"æ˜¯labelï¼ŒCountryã€Dayã€Ad_typeæ˜¯ç‰¹å¾ã€‚ç”±äºä¸‰ç§ç‰¹å¾éƒ½æ˜¯categoricalç±»å‹çš„ï¼Œéœ€è¦ç»è¿‡ç‹¬çƒ­ç¼–ç ï¼ˆOne-Hot Encodingï¼‰è½¬æ¢æˆæ•°å€¼å‹ç‰¹å¾ã€‚\n\nClicked? | Country=USA  |Country=China | Day=26/11/15 | Day=1/7/14 | Day=19/2/15 |Ad_type=Movie | Ad_type=Game\n---| ---| ---|---\n1 |1 |0| 1 |0| 0 |1| 0\n0 |0 |1 |0 |1 |0 |0 |1\n1 |0| 1 |0| 0 |1| 0 |1\n\nç»è¿‡one-hotç¼–ç ä¹‹åï¼Œç‰¹å¾å˜å¾—ç¨€ç–ï¼Œä¸Šè¾¹å®ä¾‹ä¸­æ¯ä¸ªæ ·æœ¬æœ‰7ç»´çš„ç‰¹å¾ï¼Œä½†å¹³å‡ä»…æœ‰3ç»´ä¸ºé0å€¼ï¼Œåœ¨ç”µå•†åœºæ™¯ä¸­é¢„æµ‹skuæ˜¯å¦è¢«ç‚¹å‡»çš„è¿‡ç¨‹ä¸­ï¼Œç‰¹å¾å¾€å¾€è¦æ¯”ä¸Šä¾‹ä¸­å¤šçš„å¤šï¼Œå¯è§æ•°æ®ç¨€ç–æ€§æ˜¯å·¥ä¸šç¯å¢ƒä¸­ä¸å¯é¿å…çš„é—®é¢˜ã€‚å¦å¤–ä¸€ä¸ªé—®é¢˜å°±æ˜¯ç‰¹å¾åœ¨ç»è¿‡one-hotç¼–ç ä¹‹åï¼Œç»´åº¦ä¼šå˜å¾—éå¸¸å¤§ï¼Œæ¯”å¦‚è¯´ä¸‰çº§å“ç±»æœ‰3kä¸ªï¼Œé‚£ä¹ˆskuçš„æ‰€å±ä¸‰çº§å“ç±»ç‰¹å¾ç»è¿‡ç¼–ç ä¹‹åå°±ä¼šå˜æˆ3kç»´ï¼Œç‰¹å¾ç©ºé—´å°±ä¼šå‰§å¢ã€‚\n\nä¾æ—§åˆ†æä¸Šè¾¹çš„ä¾‹å­ï¼Œç‰¹å¾åœ¨ç»è¿‡å…³è”ä¹‹åï¼Œä¸labelä¹‹é—´çš„ç›¸å…³æ€§å°±ä¼šå¢åŠ ã€‚ä¾‹å¦‚â€œUSAâ€ä¸â€œThanksgivingâ€ã€â€œChinaâ€ä¸â€œChinese New Yearâ€è¿™æ ·çš„å…³è”ç‰¹å¾ï¼Œå¯¹ç”¨æˆ·çš„ç‚¹å‡»æœ‰ç€æ­£å‘çš„å½±å“ã€‚æ¢å¥è¯è¯´ï¼Œæ¥è‡ªâ€œChinaâ€çš„ç”¨æˆ·å¾ˆå¯èƒ½ä¼šåœ¨â€œChinese New Yearâ€æœ‰å¤§é‡çš„æµè§ˆã€è´­ä¹°è¡Œä¸ºï¼Œè€Œåœ¨â€œThanksgivingâ€å´ä¸ä¼šæœ‰ç‰¹åˆ«çš„æ¶ˆè´¹è¡Œä¸ºã€‚è¿™ç§å…³è”ç‰¹å¾ä¸labelçš„æ­£å‘ç›¸å…³æ€§åœ¨å®é™…é—®é¢˜ä¸­æ˜¯æ™®éå­˜åœ¨çš„ï¼Œå¦‚â€œåŒ–å¦†å“â€ç±»å•†å“ä¸â€œå¥³â€æ€§ï¼Œâ€œçƒç±»è¿åŠ¨é…ä»¶â€çš„å•†å“ä¸â€œç”·â€æ€§ï¼Œâ€œç”µå½±ç¥¨â€çš„å•†å“ä¸â€œç”µå½±â€å“ç±»åå¥½ç­‰ã€‚å› æ­¤ï¼Œå¼•å…¥ä¸¤ä¸ªç‰¹å¾çš„ç»„åˆæ˜¯éå¸¸æœ‰æ„ä¹‰çš„ã€‚\n\nç»¼ä¸Šï¼ŒFMæ‰€è§£å†³çš„é—®é¢˜æ˜¯\n1)ï¼šç‰¹å¾ç¨€ç–\n2)ï¼šç‰¹å¾ç»„åˆ\n## æ¨¡å‹å½¢å¼\nå¯¹äºç‰¹å¾é›†åˆx=ï¼ˆx1,x2,x3,x4,....,xnï¼‰å’Œæ ‡ç­¾yï¼Œå¸Œæœ›å¾—åˆ°xå’Œyçš„å¯¹åº”å…³ç³»ï¼Œæœ€ç®€å•çš„æ˜¯å»ºç«‹çº¿æ€§å›å½’æ¨¡å‹ï¼Œ\n<img src=\"https://bdn.135editor.com/files/users/360/3608534/201807/fBKAMR8S_7Dba.png\"></img>\n\nä½†æ˜¯ï¼Œä¸€èˆ¬çº¿æ€§æ¨¡å‹æ— æ³•å­¦ä¹ åˆ°é«˜é˜¶ç»„åˆç‰¹å¾ï¼Œæ‰€ä»¥ä¼šå°†ç‰¹å¾è¿›è¡Œé«˜é˜¶ç»„åˆï¼Œè¿™é‡Œä»¥äºŒé˜¶ä¸ºä¾‹(ç†è®ºä¸Šï¼ŒFMå¯ä»¥ç»„åˆä»»æ„é«˜é˜¶ï¼Œä½†æ˜¯ç”±äºè®¡ç®—å¤æ‚åº¦ï¼Œå®é™…ä¸­å¸¸ç”¨äºŒé˜¶ï¼Œåé¢ä¹Ÿä¸»è¦ä»‹ç»äºŒé˜¶ç»„åˆçš„å†…å®¹)ã€‚æ¨¡å‹å½¢å¼ä¸ºï¼Œ\n\n<img src=\"https://bdn.135editor.com/files/users/360/3608534/201807/cOBUyUJj_TmqU.png\"></img>\n\nå…¶ä¸­nä»£è¡¨æ ·æœ¬çš„ç‰¹å¾æ•°é‡ï¼Œx_iæ˜¯ç¬¬iä¸ªç‰¹å¾ï¼Œw_0ï¼Œw_iï¼Œw_ijæ˜¯æ¨¡å‹å‚æ•°\nä»å…¬å¼(2)ä¸­å¯ä»¥çœ‹å‡ºï¼Œç»„åˆç‰¹å¾å‚æ•°ä¸€å…±æœ‰n(n-1)/2ä¸ªï¼Œä»»æ„ä¸¤ä¸ªå‚æ•°ä¹‹é—´éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œåœ¨æ•°æ®ç‰¹åˆ«ç¨€ç–çš„æƒ…å†µä¸‹ï¼ŒäºŒæ¬¡é¡¹å‚æ•°çš„è®­ç»ƒæ˜¯ååˆ†å›°éš¾çš„ï¼ŒåŸå› ä¸ºæ¯ä¸ªwijçš„è®­ç»ƒéƒ½éœ€è¦å¤§é‡çš„éé›¶x_iï¼Œx_jæ ·æœ¬ï¼Œç”±äºæ ·æœ¬ç¨€ç–ï¼Œæ»¡è¶³æ¡ä»¶çš„æ ·æœ¬å¾ˆå°‘ï¼Œå°±ä¼šå¯¼è‡´å‚æ•°w_ijä¸å‡†ç¡®ï¼Œæœ€ç»ˆå°†å½±å“æ¨¡å‹çš„æ€§èƒ½ã€‚\nå¦‚ä½•è§£å†³äºŒæ¬¡é¡¹å‚æ•°çš„è®­ç»ƒï¼Ÿå¯ä»¥åˆ©ç”¨çŸ©é˜µåˆ†è§£çš„æ€è·¯ã€‚\nåœ¨model-basedçš„ååŒè¿‡æ»¤ä¸­ï¼Œä¸€ä¸ªratingçŸ©é˜µå¯ä»¥åˆ†è§£ä¸ºuserçŸ©é˜µå’ŒitemçŸ©é˜µï¼Œæ¯ä¸ªuserå’Œiteméƒ½å¯ä»¥é‡‡ç”¨ä¸€ä¸ªéšå‘é‡è¡¨ç¤ºã€‚æ¯”å¦‚åœ¨ä¸‹å›¾ä¸­çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æŠŠæ¯ä¸ªuserè¡¨ç¤ºæˆä¸€ä¸ªäºŒç»´å‘é‡ï¼ŒåŒæ—¶æŠŠæ¯ä¸ªitemè¡¨ç¤ºæˆä¸€ä¸ªäºŒç»´å‘é‡ï¼Œä¸¤ä¸ªå‘é‡çš„ç‚¹ç§¯å°±æ˜¯çŸ©é˜µä¸­userå¯¹itemçš„æ‰“åˆ†ã€‚\n\n<img src=\"https://bdn.135editor.com/files/users/360/3608534/201807/UhsawK7r_t2gO.png\"></img>\n\næ‰€æœ‰çš„äºŒæ¬¡é¡¹å‚æ•° w_ij å¯ä»¥ç»„æˆä¸€ä¸ªå¯¹ç§°çŸ©é˜µWï¼Œé‚£ä¹ˆè¿™ä¸ªçŸ©é˜µå¯ä»¥åˆ†è§£ä¸ºW=V^T * Vï¼ŒVçš„ç¬¬jåˆ—ä¾¿æ˜¯ç¬¬jç»´ç‰¹å¾çš„éšå‘é‡ï¼Œæ¢å¥è¯è¯´å°±æ˜¯æ¯ä¸ªå‚æ•°w_ij=<v_i,v_j>ï¼Œè¿™é‡Œçš„v_iå’Œv_jæ˜¯åˆ†åˆ«æ˜¯ç¬¬iï¼Œjä¸ªç‰¹å¾çš„éšå‘é‡ï¼Œè¿™å°±æ˜¯FMçš„æ ¸å¿ƒæ€æƒ³ï¼Œå› æ­¤FMçš„æ¨¡å‹æ–¹ç¨‹ä¸ºï¼ˆäºŒé˜¶å½¢å¼ï¼‰\n\n<img src=\"https://bdn.135editor.com/files/users/360/3608534/201807/ta3RTSJ7_P6vQ.png\"></img>\n\nå…¶ä¸­ï¼ŒV_iæ˜¯ç¬¬iç»´ç‰¹å¾çš„éšå‘é‡ï¼Œ<*,*>è¡¨ç¤ºä¸¤ä¸ªå‘é‡å†…ç§¯ï¼Œéšå‘é‡çš„é•¿åº¦kï¼ˆk<<nï¼‰ï¼ŒåŒ…å«kä¸ªæè¿°ç‰¹å¾çš„å› å­ï¼Œè¿™æ ·äºŒæ¬¡é¡¹çš„å‚æ•°ä¾¿ä»n^2 å‡å°‘åˆ°äº†nkï¼Œè¿œå°‘äºå¤šé¡¹å¼æ¨¡å‹çš„å‚æ•°æ•°é‡ã€‚\nå¦å¤–ï¼Œå‚æ•°å› å­åŒ–ä½¿å¾— x_hï¼Œx_içš„å‚æ•°å’Œ x_iï¼Œx_j çš„å‚æ•°ä¸å†æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨æ ·æœ¬ç¨€ç–çš„æƒ…å†µä¸‹ç›¸å¯¹åˆç†åœ°ä¼°è®¡FMçš„äºŒæ¬¡é¡¹å‚æ•°ã€‚å…·ä½“æ¥è¯´ï¼Œx_hï¼Œx_i å’Œ x_iï¼Œx_j çš„ç³»æ•°åˆ†åˆ«ä¸º âŸ¨v_h,v_iâŸ© å’Œ âŸ¨v_i,v_jâŸ©ï¼Œå®ƒä»¬ä¹‹é—´æœ‰å…±åŒé¡¹ viã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰åŒ…å«â€œxiçš„éé›¶ç»„åˆç‰¹å¾â€ï¼ˆå­˜åœ¨æŸä¸ª jâ‰ iï¼Œä½¿å¾— x_i x_jâ‰ 0ï¼‰çš„æ ·æœ¬éƒ½å¯ä»¥ç”¨æ¥å­¦ä¹ éšå‘é‡ v_iï¼Œè¿™å¾ˆå¤§ç¨‹åº¦ä¸Šé¿å…äº†æ•°æ®ç¨€ç–æ€§é€ æˆçš„å½±å“ã€‚è€Œåœ¨å¤šé¡¹å¼æ¨¡å‹ä¸­ï¼Œw_hi å’Œ w_ij æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚\næ˜¾è€Œæ˜“è§ï¼Œå…¬å¼(3)æ˜¯ä¸€ä¸ªé€šç”¨çš„æ‹Ÿåˆæ–¹ç¨‹ï¼Œå¯ä»¥é‡‡ç”¨ä¸åŒçš„æŸå¤±å‡½æ•°ç”¨äºè§£å†³å›å½’ã€äºŒå…ƒåˆ†ç±»ç­‰é—®é¢˜ï¼Œæ¯”å¦‚å¯ä»¥é‡‡ç”¨MSEï¼ˆMean Square Errorï¼‰æŸå¤±å‡½æ•°æ¥æ±‚è§£å›å½’é—®é¢˜ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨Hinge/Cross-EntropyæŸå¤±ï¼ˆé“°é“¾æŸå¤±ï¼Œäº’ç†µæŸå¤±ï¼‰æ¥æ±‚è§£åˆ†ç±»é—®é¢˜ã€‚å½“ç„¶ï¼Œåœ¨è¿›è¡ŒäºŒå…ƒåˆ†ç±»æ—¶ï¼ŒFMçš„è¾“å‡ºéœ€è¦ç»è¿‡sigmoidå˜æ¢ï¼Œè¿™ä¸Logisticå›å½’æ˜¯ä¸€æ ·çš„ã€‚ç›´è§‚ä¸Šçœ‹ï¼ŒFMçš„å¤æ‚åº¦æ˜¯ O(kn^2)ã€‚ä½†æ˜¯ï¼Œé€šè¿‡å…¬å¼(3)çš„ç­‰å¼ï¼ŒFMçš„äºŒæ¬¡é¡¹å¯ä»¥åŒ–ç®€ï¼Œå…¶å¤æ‚åº¦å¯ä»¥ä¼˜åŒ–åˆ° O(kn)ã€‚ç”±æ­¤å¯è§ï¼ŒFMå¯ä»¥åœ¨çº¿æ€§æ—¶é—´å¯¹æ–°æ ·æœ¬ä½œå‡ºé¢„æµ‹ã€‚\n\n<img src=\"https://bdn.135editor.com/files/users/360/3608534/201807/ZvytpfVA_wCpX.png\"></img>\n\nä»(3)â€”>(4)æ¨å¯¼å¦‚ä¸‹ï¼š\n\n<img src=\"https://bdn.135editor.com/files/users/360/3608534/201807/MS5AAkAm_kPrI.png\"></img>\n\nè§£è¯»ç¬¬ï¼ˆ1ï¼‰æ­¥åˆ°ç¬¬ï¼ˆ2ï¼‰æ­¥ï¼Œè¿™é‡Œç”¨Aè¡¨ç¤ºç³»æ•°çŸ©é˜µVçš„ä¸Šä¸‰è§’å…ƒç´ ï¼ŒBè¡¨ç¤ºå¯¹è§’çº¿ä¸Šçš„äº¤å‰é¡¹ç³»æ•°ã€‚ç”±äºç³»æ•°çŸ©é˜µVæ˜¯ä¸€ä¸ªå¯¹ç§°é˜µï¼Œæ‰€ä»¥ä¸‹ä¸‰è§’ä¸ä¸Šä¸‰è§’ç›¸ç­‰ï¼Œæœ‰ä¸‹å¼æˆç«‹ï¼š\n\n<img src=\"https://bdn.135editor.com/files/users/360/3608534/201807/RpSGrOmQ_AfmL.png\"></img>\nå¦‚æœç”¨éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆStochastic Gradient Descentï¼‰æ³•å­¦ä¹ æ¨¡å‹å‚æ•°ã€‚é‚£ä¹ˆï¼Œæ¨¡å‹å„ä¸ªå‚æ•°çš„æ¢¯åº¦å¦‚ä¸‹ï¼š\n\n<img src=\"https://bdn.135editor.com/files/users/360/3608534/201807/T8MAnmvn_apWg.png\"></img>\n\nå…¶ä¸­ï¼Œv_j,f æ˜¯éšå‘é‡ v_j çš„ç¬¬ f ä¸ªå…ƒç´ ã€‚ç”±äº âˆ‘nj=1vj,fxj åªä¸ f æœ‰å…³ï¼Œè€Œä¸ i æ— å…³ï¼Œåœ¨æ¯æ¬¡è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œåªéœ€è®¡ç®—ä¸€æ¬¡æ‰€æœ‰ f çš„ âˆ‘nj=1vj,fxjï¼Œå°±èƒ½å¤Ÿæ–¹ä¾¿åœ°å¾—åˆ°æ‰€æœ‰ v_i,f çš„æ¢¯åº¦ã€‚æ˜¾ç„¶ï¼Œè®¡ç®—æ‰€æœ‰ f çš„ âˆ‘nj=1vj,fxj çš„å¤æ‚åº¦æ˜¯ O(kn)ï¼›å·²çŸ¥ âˆ‘nj=1vj,fxj æ—¶ï¼Œè®¡ç®—æ¯ä¸ªå‚æ•°æ¢¯åº¦çš„å¤æ‚åº¦æ˜¯ O(1)ï¼›å¾—åˆ°æ¢¯åº¦åï¼Œæ›´æ–°æ¯ä¸ªå‚æ•°çš„å¤æ‚åº¦æ˜¯ O(1)ï¼›æ¨¡å‹å‚æ•°ä¸€å…±æœ‰ nk+n+1 ä¸ªã€‚å› æ­¤ï¼ŒFMå‚æ•°è®­ç»ƒçš„å¤æ‚åº¦ä¹Ÿæ˜¯ O(kn)ã€‚ç»¼ä¸Šå¯çŸ¥ï¼ŒFMå¯ä»¥åœ¨çº¿æ€§æ—¶é—´è®­ç»ƒå’Œé¢„æµ‹ï¼Œæ˜¯ä¸€ç§éå¸¸é«˜æ•ˆçš„æ¨¡å‹ã€‚\n## FMæ€»ç»“\n### FMé™ä½äº†äº¤å‰é¡¹å‚æ•°å­¦ä¹ ä¸å……åˆ†çš„å½±å“\none-hotç¼–ç åçš„æ ·æœ¬æ•°æ®éå¸¸ç¨€ç–ï¼Œç»„åˆç‰¹å¾æ›´æ˜¯å¦‚æ­¤ã€‚ä¸ºäº†è§£å†³äº¤å‰é¡¹å‚æ•°å­¦ä¹ ä¸å……åˆ†ã€å¯¼è‡´æ¨¡å‹æœ‰åæˆ–ä¸ç¨³å®šçš„é—®é¢˜ã€‚å€Ÿé‰´çŸ©é˜µåˆ†è§£çš„æ€è·¯ï¼šæ¯ä¸€ç»´ç‰¹å¾ç”¨kç»´çš„éšå‘é‡è¡¨ç¤ºï¼Œäº¤å‰é¡¹çš„å‚æ•°w_ijç”¨å¯¹åº”ç‰¹å¾éšå‘é‡çš„å†…ç§¯è¡¨ç¤ºï¼Œå³âŸ¨v_i,v_jâŸ©ï¼ˆä¹Ÿå¯ä»¥ç†è§£ä¸ºå¹³æ»‘æŠ€æœ¯ï¼‰ã€‚è¿™æ ·å‚æ•°å­¦ä¹ ç”±ä¹‹å‰å­¦ä¹ äº¤å‰é¡¹å‚æ•°w_ijçš„è¿‡ç¨‹ï¼Œè½¬å˜ä¸ºå­¦ä¹ nä¸ªå•ç‰¹å¾å¯¹åº”kç»´éšå‘é‡çš„è¿‡ç¨‹ã€‚\nå¾ˆæ˜æ˜¾ï¼Œå•ç‰¹å¾å‚æ•°ï¼ˆkç»´éšå‘é‡v_iï¼‰çš„å­¦ä¹ è¦æ¯”äº¤å‰é¡¹å‚æ•°w_ijå­¦ä¹ å¾—æ›´å……åˆ†ã€‚ç¤ºä¾‹è¯´æ˜ï¼š\nå‡å¦‚æœ‰10wæ¡è®­ç»ƒæ ·æœ¬ï¼Œå…¶ä¸­å‡ºç°å¥³æ€§ç‰¹å¾çš„æ ·æœ¬æ•°ä¸º3wï¼Œå‡ºç°ç”·æ€§ç‰¹å¾çš„æ ·æœ¬æ•°ä¸º7wï¼Œå‡ºç°æ±½è½¦ç‰¹å¾çš„æ ·æœ¬æ•°ä¸º2000ï¼Œå‡ºç°åŒ–å¦†å“çš„æ ·æœ¬æ•°ä¸º1000ã€‚ç‰¹å¾å…±ç°çš„æ ·æœ¬æ•°å¦‚ä¸‹ï¼š\n\nå…±ç°äº¤å‰ç‰¹å¾ | æ ·æœ¬æ•° |æ³¨\n--- | ---| ---\n<å¥³æ€§ï¼Œæ±½è½¦> | 500| åŒæ—¶å‡ºç°<å¥³æ€§ï¼Œæ±½è½¦>çš„æ ·æœ¬æ•°\n<å¥³æ€§ï¼ŒåŒ–å¦†å“> | 1000| åŒæ—¶å‡ºç°<å¥³æ€§ï¼ŒåŒ–å¦†å“>çš„æ ·æœ¬æ•°\n<ç”·æ€§ï¼Œæ±½è½¦> | 1500 |åŒæ—¶å‡ºç°<ç”·æ€§ï¼Œæ±½è½¦>çš„æ ·æœ¬æ•°\n<ç”·æ€§ï¼ŒåŒ–å¦†å“>| 0 |æ ·æœ¬ä¸­æ— æ­¤ç‰¹å¾ç»„åˆé¡¹\n<å¥³æ€§ï¼Œæ±½è½¦>çš„å«ä¹‰æ˜¯å¥³æ€§çœ‹æ±½è½¦å¹¿å‘Šã€‚å¯ä»¥çœ‹åˆ°ï¼Œå•ç‰¹å¾å¯¹åº”çš„æ ·æœ¬æ•°è¿œå¤§äºç»„åˆç‰¹å¾å¯¹åº”çš„æ ·æœ¬æ•°ã€‚è®­ç»ƒæ—¶ï¼Œå•ç‰¹å¾å‚æ•°ç›¸æ¯”äº¤å‰é¡¹ç‰¹å¾å‚æ•°ä¼šå­¦ä¹ åœ°æ›´å……åˆ†ã€‚\nå› æ­¤ï¼Œå¯ä»¥è¯´FMé™ä½äº†å› æ•°æ®ç¨€ç–ï¼Œå¯¼è‡´äº¤å‰é¡¹å‚æ•°å­¦ä¹ ä¸å……åˆ†çš„å½±å“\n### FMæå‡äº†æ¨¡å‹é¢„ä¼°èƒ½åŠ›\nä¾ç„¶çœ‹ä¸Šé¢çš„ç¤ºä¾‹ï¼Œæ ·æœ¬ä¸­æ²¡æœ‰<ç”·æ€§ï¼ŒåŒ–å¦†å“>äº¤å‰ç‰¹å¾ï¼Œå³æ²¡æœ‰ç”·æ€§çœ‹åŒ–å¦†å“å¹¿å‘Šçš„æ•°æ®ã€‚å¦‚æœç”¨å¤šé¡¹å¼æ¨¡å‹æ¥å»ºæ¨¡ï¼Œå¯¹åº”çš„äº¤å‰é¡¹å‚æ•°W_ç”·æ€§,åŒ–å¦†å“æ˜¯å­¦ä¸å‡ºæ¥çš„ï¼Œå› ä¸ºæ•°æ®ä¸­æ²¡æœ‰å¯¹åº”çš„å…±ç°äº¤å‰ç‰¹å¾ã€‚é‚£ä¹ˆå¤šé¡¹å¼æ¨¡å‹å°±ä¸èƒ½å¯¹å‡ºç°çš„ç”·æ€§çœ‹åŒ–å¦†å“å¹¿å‘Šåœºæ™¯ç»™å‡ºå‡†ç¡®åœ°é¢„ä¼°ã€‚\nFMæ¨¡å‹æ˜¯å¦èƒ½å¾—åˆ°äº¤å‰é¡¹å‚æ•°W_ç”·æ€§,åŒ–å¦†å“å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚ç”±äºFMæ¨¡å‹æ˜¯æŠŠäº¤å‰é¡¹å‚æ•°ç”¨å¯¹åº”çš„ç‰¹å¾éšå‘é‡å†…ç§¯è¡¨ç¤ºï¼Œè¿™é‡Œè¡¨ç¤ºä¸ºW_ç”·æ€§,åŒ–å¦†å“=âŸ¨v_ç”·æ€§,v_åŒ–å¦†å“âŸ©ã€‚\nç”¨ç”·æ€§ç‰¹å¾éšå‘é‡v_ç”·æ€§å’Œv_åŒ–å¦†å“ç‰¹å¾éšå‘é‡våŒ–å¦†å“çš„å†…ç§¯è¡¨ç¤ºäº¤å‰é¡¹å‚æ•° W_ç”·æ€§,åŒ–å¦†å“ã€‚\nç”±äºFMå­¦ä¹ çš„å‚æ•°å°±æ˜¯å•ç‰¹å¾çš„éšå‘é‡ï¼Œé‚£ä¹ˆç”·æ€§çœ‹åŒ–å¦†å“å¹¿å‘Šçš„é¢„ä¼°ç»“æœå¯ä»¥ç”¨âŸ¨v_ç”·æ€§,v_åŒ–å¦†å“âŸ©å¾—åˆ°ã€‚è¿™æ ·ï¼Œå³ä¾¿è®­ç»ƒé›†ä¸­æ²¡æœ‰å‡ºç°ç”·æ€§çœ‹åŒ–å¦†å“å¹¿å‘Šçš„æ ·æœ¬ï¼ŒFMæ¨¡å‹ä»ç„¶å¯ä»¥ç”¨æ¥é¢„ä¼°ï¼Œæå‡äº†é¢„ä¼°èƒ½åŠ›ã€‚\n### FMæå‡äº†å‚æ•°å­¦ä¹ æ•ˆç‡\nè¿™ä¸ªæ˜¾è€Œæ˜“è§ï¼Œå‚æ•°ä¸ªæ•°ç”±(n^2+n+1)å˜ä¸º(nk+n+1)ä¸ªï¼Œæ¨¡å‹è®­ç»ƒå¤æ‚åº¦ä¹Ÿç”±O(mn^2)å˜ä¸ºO(mnk)ã€‚mä¸ºè®­ç»ƒæ ·æœ¬æ•°ã€‚å¯¹äºè®­ç»ƒæ ·æœ¬å’Œç‰¹å¾æ•°è€Œè¨€ï¼Œéƒ½æ˜¯çº¿æ€§å¤æ‚åº¦ã€‚\næ­¤å¤–ï¼Œå°±FMæ¨¡å‹æœ¬èº«è€Œè¨€ï¼Œå®ƒæ˜¯åœ¨å¤šé¡¹å¼æ¨¡å‹åŸºç¡€ä¸Šå¯¹å‚æ•°çš„è®¡ç®—åšäº†è°ƒæ•´ï¼Œå› æ­¤ä¹Ÿæœ‰äººæŠŠFMæ¨¡å‹ç§°ä¸ºå¤šé¡¹å¼çš„å¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼Œä¹Ÿæ˜¯æ°å¦‚å…¶åˆ†çš„ã€‚\nä»äº¤äº’é¡¹çš„è§’åº¦çœ‹ï¼ŒFMä»…ä»…æ˜¯ä¸€ä¸ªå¯ä»¥è¡¨ç¤ºç‰¹å¾ä¹‹é—´äº¤äº’å…³ç³»çš„å‡½æ•°è¡¨æ³•å¼ï¼Œå¯ä»¥æ¨å¹¿åˆ°æ›´é«˜é˜¶å½¢å¼ï¼Œå³å°†å¤šä¸ªäº’å¼‚ç‰¹å¾åˆ†é‡ä¹‹é—´çš„å…³è”ä¿¡æ¯è€ƒè™‘è¿›æ¥ã€‚ä¾‹å¦‚åœ¨å¹¿å‘Šä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå¦‚æœè€ƒè™‘User-Ad-Contextä¸‰ä¸ªç»´åº¦ç‰¹å¾ä¹‹é—´çš„å…³ç³»ï¼Œåœ¨FMæ¨¡å‹ä¸­å¯¹åº”çš„degreeä¸º3ã€‚\n### æ€»ç»“\nFMæœ€å¤§ç‰¹ç‚¹å’Œä¼˜åŠ¿ï¼šFMæ¨¡å‹å¯¹ç¨€ç–æ•°æ®æœ‰æ›´å¥½çš„å­¦ä¹ èƒ½åŠ›ï¼Œé€šè¿‡äº¤äº’é¡¹å¯ä»¥å­¦ä¹ ç‰¹å¾ä¹‹é—´çš„å…³è”å…³ç³»ï¼Œå¹¶ä¸”ä¿è¯äº†å­¦ä¹ æ•ˆç‡å’Œé¢„ä¼°èƒ½åŠ›\n\n# FFMç®—æ³•\n## èƒŒæ™¯\nFFMï¼ˆField-aware Factorization Machineï¼‰æœ€åˆçš„æ¦‚å¿µæ¥è‡ªYu-Chin Juanï¼ˆé˜®æ¯“é’¦ï¼Œæ¯•ä¸šäºä¸­å›½å°æ¹¾å¤§å­¦ï¼Œç°åœ¨ç¾å›½Criteoå·¥ä½œï¼‰ä¸å…¶æ¯”èµ›é˜Ÿå‘˜ï¼Œæ˜¯ä»–ä»¬å€Ÿé‰´äº†æ¥è‡ªMichael Jahrerçš„è®ºæ–‡ä¸­çš„fieldæ¦‚å¿µæå‡ºäº†FMçš„å‡çº§ç‰ˆæ¨¡å‹ã€‚\n## æ¨¡å‹å½¢å¼\né€šè¿‡å¼•å…¥fieldçš„æ¦‚å¿µï¼ŒFFMæŠŠç›¸åŒæ€§è´¨çš„ç‰¹å¾ï¼Œå½’ç»“äºåŒä¸€ä¸ªfieldã€‚è¿˜æ˜¯ä»¥FMä¸­çš„å¹¿å‘Šåˆ†ç±»ä¸ºä¾‹ï¼Œâ€œDay=26/11/15â€ã€â€œDay=1/7/14â€ã€â€œDay=19/2/15â€è¿™ä¸‰ä¸ªç‰¹å¾éƒ½æ˜¯ä»£è¡¨æ—¥æœŸçš„ï¼Œå¯ä»¥æ”¾åˆ°åŒä¸€ä¸ªfieldä¸­ã€‚åŒç†ï¼Œä¸‰çº§å“ç±»æœ‰3kä¸ªï¼Œé‚£ä¹ˆskuçš„æ‰€å±ä¸‰çº§å“ç±»ç‰¹å¾ç»è¿‡ç¼–ç ä¹‹åå°±ä¼šå˜æˆ3kç»´ï¼Œé‚£ä¹ˆè¿™3kç»´å¯ä»¥æ”¾åˆ°ä¸€ä¸ªfieldä¸­ï¼Œç®€å•æ¥è¯´ï¼ŒåŒä¸€ä¸ªcategoricalç‰¹å¾ç»è¿‡One-Hotç¼–ç ç”Ÿæˆçš„æ•°å€¼ç‰¹å¾éƒ½å¯ä»¥æ”¾åˆ°åŒä¸€ä¸ªfieldã€‚\nåœ¨FFMä¸­ï¼Œæ¯ä¸€ç»´ç‰¹å¾x_iï¼Œé’ˆå¯¹å…¶ä»–ç‰¹å¾çš„æ¯ä¸€ç§field f_jï¼Œéƒ½ä¼šå­¦ä¹ åˆ°ä¸€ä¸ªéšå‘é‡V_i,f_ jã€‚å› æ­¤ï¼Œéšå‘é‡ä¸ä»…ä¸ç‰¹å¾æœ‰å…³ï¼Œè¿˜ä¸filedæœ‰å…³ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œâ€œDay=26/11/15â€è¿™ä¸ªç‰¹å¾ä¸â€œCountryâ€ç‰¹å¾å’Œâ€œAd_type\"ç‰¹å¾è¿›è¡Œå…³è”çš„æ—¶å€™ä½¿ç”¨ä¸åŒçš„éšå‘é‡ï¼Œè¿™ä¸â€œCountryâ€å’Œâ€œAd_typeâ€çš„å†…åœ¨å·®å¼‚ç›¸ç¬¦ï¼Œä¹Ÿæ˜¯FFMä¸­â€œfield-awareâ€çš„ç”±æ¥ã€‚\nå‡è®¾æ ·æœ¬çš„ n ä¸ªç‰¹å¾å±äº f ä¸ªfieldï¼Œé‚£ä¹ˆFFMçš„äºŒæ¬¡é¡¹æœ‰ nfä¸ªéšå‘é‡ã€‚è€Œåœ¨FMæ¨¡å‹ä¸­ï¼Œæ¯ä¸€ç»´ç‰¹å¾çš„éšå‘é‡åªæœ‰ä¸€ä¸ªã€‚FMå¯ä»¥çœ‹ä½œFFMçš„ç‰¹ä¾‹ï¼Œæ˜¯æŠŠæ‰€æœ‰ç‰¹å¾éƒ½å½’å±åˆ°ä¸€ä¸ªfieldæ—¶çš„FFMæ¨¡å‹ã€‚æ ¹æ®FFMçš„fieldæ•æ„Ÿç‰¹æ€§ï¼Œå¯ä»¥å¯¼å‡ºå…¶æ¨¡å‹æ–¹ç¨‹ã€‚\n\n<img src=\"https://bdn.135editor.com/files/users/360/3608534/201807/jUKaHRqz_pIvY.png\"></img>\n\nå…¶ä¸­ï¼Œf_ j æ˜¯ç¬¬ j ä¸ªç‰¹å¾æ‰€å±çš„fieldã€‚å¦‚æœéšå‘é‡çš„é•¿åº¦ä¸º kï¼Œé‚£ä¹ˆFFMçš„äºŒæ¬¡å‚æ•°æœ‰ f * kn ä¸ªï¼Œè¿œå¤šäºFMæ¨¡å‹çš„ kn ä¸ªã€‚æ­¤å¤–ï¼Œç”±äºéšå‘é‡ä¸fieldç›¸å…³ï¼ŒFFMäºŒæ¬¡é¡¹å¹¶ä¸èƒ½åŒ–ç®€ï¼Œå…¶é¢„æµ‹å¤æ‚åº¦æ˜¯ O(kn^2)ã€‚\nä¸‹é¢ä»¥ä¸€ä¸ªä¾‹å­ç®€å•è¯´æ˜FFMçš„ç‰¹å¾ç»„åˆæ–¹å¼ã€‚è¾“å…¥è®°å½•å¦‚ä¸‹\nUser Movie Genre Price\nYuChin 3Idiots Comedy, Drama $9.99\nè¿™æ¡è®°å½•å¯ä»¥ç¼–ç æˆ5ä¸ªç‰¹å¾ï¼Œå…¶ä¸­â€œGenre=Comedyâ€å’Œâ€œGenre=Dramaâ€å±äºåŒä¸€ä¸ªfieldï¼Œâ€œPriceâ€æ˜¯æ•°å€¼å‹ï¼Œä¸ç”¨One-Hotç¼–ç è½¬æ¢ã€‚ä¸ºäº†æ–¹ä¾¿è¯´æ˜FFMçš„æ ·æœ¬æ ¼å¼ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰çš„ç‰¹å¾å’Œå¯¹åº”çš„fieldæ˜ å°„æˆæ•´æ•°ç¼–å·ã€‚\n\nField name | Field index | Feature name | Feature index\n--- | ---|---|---\nUser | 1 | User=YuChin |1\nMovie | 2 |  Movie=3Idiots | 2\nGenre | 3 | Genre=Comedy | 3\nPrice | 4 | Genre=Drama | 4\n | |  Price | 5\né‚£ä¹ˆï¼ŒFFMçš„ç»„åˆç‰¹å¾æœ‰10é¡¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\n\n<img src=\"https://bdn.135editor.com/files/users/360/3608534/201807/BW3Vpww7_n3ZY.png\"></img>\n\nå…¶ä¸­ï¼Œçº¢è‰²æ˜¯fieldç¼–å·ï¼Œè“è‰²æ˜¯ç‰¹å¾ç¼–å·ï¼Œç»¿è‰²æ˜¯æ­¤æ ·æœ¬çš„ç‰¹å¾å–å€¼ã€‚äºŒæ¬¡é¡¹çš„ç³»æ•°æ˜¯é€šè¿‡ä¸ç‰¹å¾fieldç›¸å…³çš„éšå‘é‡ç‚¹ç§¯å¾—åˆ°çš„ï¼ŒäºŒæ¬¡é¡¹å…±æœ‰ n(nâˆ’1)/2 ä¸ªã€‚\n## åº”ç”¨åœºæ™¯\nåœ¨DSPçš„åœºæ™¯ä¸­ï¼ŒFFMä¸»è¦ç”¨æ¥é¢„ä¼°ç«™å†…çš„CTRå’ŒCVRï¼Œå³ä¸€ä¸ªç”¨æˆ·å¯¹ä¸€ä¸ªå•†å“çš„æ½œåœ¨ç‚¹å‡»ç‡å’Œç‚¹å‡»åçš„è½¬åŒ–ç‡ã€‚\nCTRå’ŒCVRé¢„ä¼°æ¨¡å‹éƒ½æ˜¯åœ¨çº¿ä¸‹è®­ç»ƒï¼Œç„¶åç”¨äºçº¿ä¸Šé¢„æµ‹ã€‚ä¸¤ä¸ªæ¨¡å‹é‡‡ç”¨çš„ç‰¹å¾å¤§åŒå°å¼‚ï¼Œä¸»è¦æœ‰ä¸‰ç±»ï¼š\n  â— -ç”¨æˆ·ç›¸å…³çš„ç‰¹å¾\nç”¨æˆ·ç›¸å…³çš„ç‰¹å¾åŒ…æ‹¬å¹´é¾„ã€æ€§åˆ«ã€èŒä¸šã€å…´è¶£ã€å“ç±»åå¥½ã€æµè§ˆ/è´­ä¹°å“ç±»ç­‰åŸºæœ¬ä¿¡æ¯ï¼Œä»¥åŠç”¨æˆ·è¿‘æœŸç‚¹å‡»é‡ã€è´­ä¹°é‡ã€æ¶ˆè´¹é¢ç­‰ç»Ÿè®¡ä¿¡æ¯ã€‚\n  â— å•†å“ç›¸å…³çš„ç‰¹å¾\nå•†å“ç›¸å…³çš„ç‰¹å¾åŒ…æ‹¬æ‰€å±å“ç±»ã€é”€é‡ã€ä»·æ ¼ã€è¯„åˆ†ã€å†å²CTR/CVRç­‰ä¿¡æ¯ã€‚\n  â— ç”¨æˆ·-å•†å“åŒ¹é…ç‰¹å¾\nç”¨æˆ·-å•†å“åŒ¹é…ç‰¹å¾ä¸»è¦æœ‰æµè§ˆ/è´­ä¹°å“ç±»åŒ¹é…ã€æµè§ˆ/è´­ä¹°å•†å®¶åŒ¹é…ã€å…´è¶£åå¥½åŒ¹é…ç­‰å‡ ä¸ªç»´åº¦ã€‚\nä¸ºäº†ä½¿ç”¨FFMæ–¹æ³•ï¼Œæ‰€æœ‰çš„ç‰¹å¾å¿…é¡»è½¬æ¢æˆâ€œfield_id:feat_id:valueâ€æ ¼å¼ï¼Œfield_idä»£è¡¨ç‰¹å¾æ‰€å±fieldçš„ç¼–å·ï¼Œfeat_idæ˜¯ç‰¹å¾ç¼–å·ï¼Œvalueæ˜¯ç‰¹å¾çš„å€¼ã€‚æ•°å€¼å‹çš„ç‰¹å¾æ¯”è¾ƒå®¹æ˜“å¤„ç†ï¼Œåªéœ€åˆ†é…å•ç‹¬çš„fieldç¼–å·ï¼Œå¦‚ç”¨æˆ·è¯„è®ºå¾—åˆ†ã€å•†å“çš„å†å²CTR/CVRç­‰ã€‚categoricalç‰¹å¾éœ€è¦ç»è¿‡One-Hotç¼–ç æˆæ•°å€¼å‹ï¼Œç¼–ç äº§ç”Ÿçš„æ‰€æœ‰ç‰¹å¾åŒå±äºä¸€ä¸ªfieldï¼Œè€Œç‰¹å¾çš„å€¼åªèƒ½æ˜¯0æˆ–1ï¼Œå¦‚ç”¨æˆ·çš„æ€§åˆ«ã€å¹´é¾„æ®µï¼Œå•†å“çš„å“ç±»idç­‰ã€‚\né™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ç¬¬ä¸‰ç±»ç‰¹å¾ï¼Œå¦‚ç”¨æˆ·æµè§ˆ/è´­ä¹°å“ç±»ï¼Œæœ‰å¤šä¸ªå“ç±»idä¸”ç”¨ä¸€ä¸ªæ•°å€¼è¡¡é‡ç”¨æˆ·æµè§ˆæˆ–è´­ä¹°æ¯ä¸ªå“ç±»å•†å“çš„æ•°é‡ã€‚è¿™ç±»ç‰¹å¾æŒ‰ç…§categoricalç‰¹å¾å¤„ç†ï¼Œä¸åŒçš„åªæ˜¯ç‰¹å¾çš„å€¼ä¸æ˜¯0æˆ–1ï¼Œè€Œæ˜¯ä»£è¡¨ç”¨æˆ·æµè§ˆæˆ–è´­ä¹°æ•°é‡çš„æ•°å€¼ã€‚æŒ‰å‰è¿°æ–¹æ³•å¾—åˆ°field_idä¹‹åï¼Œå†å¯¹è½¬æ¢åç‰¹å¾é¡ºåºç¼–å·ï¼Œå¾—åˆ°feat_idï¼Œç‰¹å¾çš„å€¼ä¹Ÿå¯ä»¥æŒ‰ç…§ä¹‹å‰çš„æ–¹æ³•è·å¾—ã€‚\nCTRã€CVRé¢„ä¼°æ ·æœ¬çš„ç±»åˆ«æ˜¯æŒ‰ä¸åŒæ–¹å¼è·å–çš„ã€‚CTRé¢„ä¼°çš„æ­£æ ·æœ¬æ˜¯ç«™å†…ç‚¹å‡»çš„ç”¨æˆ·-å•†å“è®°å½•ï¼Œè´Ÿæ ·æœ¬æ˜¯å±•ç°ä½†æœªç‚¹å‡»çš„è®°å½•ï¼›CVRé¢„ä¼°çš„æ­£æ ·æœ¬æ˜¯ç«™å†…æ”¯ä»˜ï¼ˆå‘ç”Ÿè½¬åŒ–ï¼‰çš„ç”¨æˆ·-å•†å“è®°å½•ï¼Œè´Ÿæ ·æœ¬æ˜¯ç‚¹å‡»ä½†æœªæ”¯ä»˜çš„è®°å½•ã€‚æ„å»ºå‡ºæ ·æœ¬æ•°æ®åï¼Œé‡‡ç”¨FFMè®­ç»ƒé¢„ä¼°æ¨¡å‹ï¼Œå¹¶æµ‹è¯•æ¨¡å‹çš„æ€§èƒ½ã€‚\n\n | #(field) |  #(feature) |  AUC  |Logloss\n--- | ---|---|---|---\nç«™å†…CTR |39 |2456 |0.77 |0.38\nç«™å†…CVR |67| 2441 |0.92 |0.13\nç”±äºæ¨¡å‹æ˜¯æŒ‰å¤©è®­ç»ƒçš„ï¼Œæ¯å¤©çš„æ€§èƒ½æŒ‡æ ‡å¯èƒ½ä¼šæœ‰äº›æ³¢åŠ¨ï¼Œä½†å˜åŒ–å¹…åº¦ä¸æ˜¯å¾ˆå¤§ã€‚è¿™ä¸ªè¡¨çš„ç»“æœè¯´æ˜ï¼Œç«™å†…CTR/CVRé¢„ä¼°æ¨¡å‹æ˜¯éå¸¸æœ‰æ•ˆçš„ã€‚\nåœ¨è®­ç»ƒFFMçš„è¿‡ç¨‹ä¸­ï¼Œæœ‰è®¸å¤šå°ç»†èŠ‚å€¼å¾—ç‰¹åˆ«å…³æ³¨ã€‚\nç¬¬ä¸€ï¼Œæ ·æœ¬å½’ä¸€åŒ–ã€‚FFMé»˜è®¤æ˜¯è¿›è¡Œæ ·æœ¬æ•°æ®çš„å½’ä¸€åŒ–ï¼Œå³ pa.norm ä¸ºçœŸï¼›è‹¥æ­¤å‚æ•°è®¾ç½®ä¸ºå‡ï¼Œå¾ˆå®¹æ˜“é€ æˆæ•°æ®infæº¢å‡ºï¼Œè¿›è€Œå¼•èµ·æ¢¯åº¦è®¡ç®—çš„nané”™è¯¯ã€‚å› æ­¤ï¼Œæ ·æœ¬å±‚é¢çš„æ•°æ®æ˜¯æ¨èè¿›è¡Œå½’ä¸€åŒ–çš„ã€‚\nç¬¬äºŒï¼Œç‰¹å¾å½’ä¸€åŒ–ã€‚CTR/CVRæ¨¡å‹é‡‡ç”¨äº†å¤šç§ç±»å‹çš„æºç‰¹å¾ï¼ŒåŒ…æ‹¬æ•°å€¼å‹å’Œcategoricalç±»å‹ç­‰ã€‚ä½†æ˜¯ï¼Œcategoricalç±»ç¼–ç åçš„ç‰¹å¾å–å€¼åªæœ‰0æˆ–1ï¼Œè¾ƒå¤§çš„æ•°å€¼å‹ç‰¹å¾ä¼šé€ æˆæ ·æœ¬å½’ä¸€åŒ–åcategoricalç±»ç”Ÿæˆç‰¹å¾çš„å€¼éå¸¸å°ï¼Œæ²¡æœ‰åŒºåˆ†æ€§ã€‚ä¾‹å¦‚ï¼Œä¸€æ¡ç”¨æˆ·-å•†å“è®°å½•ï¼Œç”¨æˆ·ä¸ºâ€œç”·â€æ€§ï¼Œå•†å“çš„é”€é‡æ˜¯5000ä¸ªï¼ˆå‡è®¾å…¶å®ƒç‰¹å¾çš„å€¼ä¸ºé›¶ï¼‰ï¼Œé‚£ä¹ˆå½’ä¸€åŒ–åç‰¹å¾â€œsex=maleâ€ï¼ˆæ€§åˆ«ä¸ºç”·ï¼‰çš„å€¼ç•¥å°äº0.0002ï¼Œè€Œâ€œvolumeâ€ï¼ˆé”€é‡ï¼‰çš„å€¼è¿‘ä¼¼ä¸º1ã€‚ç‰¹å¾â€œsex=maleâ€åœ¨è¿™ä¸ªæ ·æœ¬ä¸­çš„ä½œç”¨å‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œè¿™æ˜¯ç›¸å½“ä¸åˆç†çš„ã€‚å› æ­¤ï¼Œå°†æºæ•°å€¼å‹ç‰¹å¾çš„å€¼å½’ä¸€åŒ–åˆ° [0,1] æ˜¯éå¸¸å¿…è¦çš„ã€‚\nç¬¬ä¸‰ï¼Œçœç•¥é›¶å€¼ç‰¹å¾ã€‚ä»FFMæ¨¡å‹çš„è¡¨è¾¾å¼(8)å¯ä»¥çœ‹å‡ºï¼Œé›¶å€¼ç‰¹å¾å¯¹æ¨¡å‹å®Œå…¨æ²¡æœ‰è´¡çŒ®ã€‚åŒ…å«é›¶å€¼ç‰¹å¾çš„ä¸€æ¬¡é¡¹å’Œç»„åˆé¡¹å‡ä¸ºé›¶ï¼Œå¯¹äºè®­ç»ƒæ¨¡å‹å‚æ•°æˆ–è€…ç›®æ ‡å€¼é¢„ä¼°æ˜¯æ²¡æœ‰ä½œç”¨çš„ã€‚å› æ­¤ï¼Œå¯ä»¥çœå»é›¶å€¼ç‰¹å¾ï¼Œæé«˜FFMæ¨¡å‹è®­ç»ƒå’Œé¢„æµ‹çš„é€Ÿåº¦ï¼Œè¿™ä¹Ÿæ˜¯ç¨€ç–æ ·æœ¬é‡‡ç”¨FFMçš„æ˜¾è‘—ä¼˜åŠ¿ã€‚\n\n# å‚è€ƒèµ„æ–™\n  1. http://bourneli.github.io/ml/fm/2017/07/02/fm-remove-combine-features-by-yourself.html\n  2. https://tech.meituan.com/deep_understanding_of_ffm_principles_and_practices.html\n  3. http://www.52caml.com/head_first_ml/ml-chapter9-factorization-family/\n  4. https://cloud.tencent.com/developer/article/1104673?fromSource=waitui\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n","tags":["Sparkä¸æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"å›å½’åˆ†æä¹‹é€»è¾‘å›å½’-Logistic Regression","url":"/2018/04/28/æœºå™¨å­¦ä¹ /å›å½’åˆ†æä¹‹é€»è¾‘å›å½’-Logistics Regression/","content":"\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttp://blog.csdn.net/gamer_gyt \nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758 \nGithubï¼šhttps://github.com/thinkgamer\n\n\n> é€»è¾‘å›å½’ä¸çº¿æ€§å›å½’æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯é€šè¿‡è¯¯å·®å‡½æ•°æ±‚è§£å¾—åˆ°æœ€ä¼˜çš„ç³»æ•°ï¼Œåœ¨å½¢å¼ä¸Šåªä¸è¿‡æ˜¯åœ¨çº¿æ€§å›å½’ä¸Šå¥—äº†ä¸€ä¸ªé€»è¾‘å‡½æ•°ã€‚çº¿æ€§å›å½’çš„ç›¸å…³çŸ¥è¯†å¯ä»¥å‚è€ƒä¸Šè¾¹çš„ç»™å‡ºé“¾æ¥æ–‡ç« ï¼Œä¸çº¿æ€§å›å½’ç›¸æ¯”ï¼Œé€»è¾‘å›å½’ï¼ˆLogistic Regressionï¼‰æ›´é€‚ç”¨äºå› å˜é‡ä¸ºäºŒåˆ†å˜é‡çš„æ¨¡å‹ï¼ŒLogistic å›å½’ç³»æ•°å¯ç”¨äºä¼°è®¡æ¨¡å‹ä¸­æ¯ä¸ªè‡ªå˜é‡çš„å‡ ç‡æ¯”ã€‚\n\n<!--More-->\n\n[å›å½’åˆ†æä¹‹ç†è®ºç¯‡](http://blog.csdn.net/gamer_gyt/article/details/78008144)\n[å›å½’åˆ†æä¹‹çº¿æ€§å›å½’ï¼ˆNå…ƒçº¿æ€§å›å½’ï¼‰](http://blog.csdn.net/gamer_gyt/article/details/78135354)\n[å›å½’åˆ†æä¹‹Sklearnå®ç°ç”µåŠ›é¢„æµ‹](http://blog.csdn.net/gamer_gyt/article/details/78467021)\n\n# Sigmoidå‡½æ•°\n## æ•°å­¦è¡¨è¾¾å¼å’Œå›¾å½¢\nè¿™é‡Œé€‰ç”¨Sigmoidå‡½æ•°ï¼ˆæµ·ç»´èµ›å¾·é˜¶è·ƒå‡½æ•°ï¼‰ä½œä¸ºLRçš„æ¨¡å‹å‡½æ•°ï¼Œæ˜¯å› ä¸ºåœ¨äºŒåˆ†ç±»æƒ…å†µä¸‹è¾“å‡ºä¸º0å’Œ1ï¼Œå…¶å‡½æ•°çš„æ•°å­¦è¡¨è¾¾å¼ä¸ºï¼š\n$$\nf(x)=\\frac{1}{1+e^{-x}}\n$$\nå…¶å›¾å½¢ä¸ºï¼š\n\n```\nimport math\nimport matplotlib.pyplot as plt\n\ndef sigmoid(x):\n  return 1 / (1 + math.exp(-x))\n\n# python2 ä¸­rangeç”Ÿæˆçš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œpy3ä¸­ç”Ÿæˆçš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå¯ä»¥ä½¿ç”¨listè¿›è¡Œè½¬æ¢\nX = list(range(-9,10))\nY = list(map(sigmoid,X))\n\n#ç”»å›¾\nplt.plot(X,Y)\nplt.show()\n\n```\n<center>![sigmoid](http://img.blog.csdn.net/20171219192329328?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)</center>\n\nä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°sigmoidå‡½æ•°æ˜¯ä¸€ä¸ªså½¢çš„æ›²çº¿ï¼Œå®ƒçš„å–å€¼åœ¨[0, 1]ä¹‹é—´ï¼Œåœ¨è¿œç¦»0çš„åœ°æ–¹å‡½æ•°çš„å€¼ä¼šå¾ˆå¿«æ¥è¿‘0/1ã€‚\n\n## LRä¸ºä»€ä¹ˆè¦ä½¿ç”¨Sigmoid\né¦–å…ˆSigmoidå‡½æ•°æ»¡è¶³LRæ¨¡å‹çš„éœ€è¦ï¼Œåœ¨è‡ªå˜é‡å°äº0æ—¶ï¼Œå› å˜é‡å°äº0.5ï¼Œè‡ªå˜é‡å¤§äº0æ—¶ï¼Œå› å˜é‡å¤§äº0.5ã€‚\nä»¥ä¸‹ä¸€æ®µå¼•ç”¨ [Logistic Regression æ¨¡å‹ç®€ä»‹](https://tech.meituan.com/intro_to_logistic_regression.html) çš„ä»‹ç»å¯¹é€»è¾‘å›å½’æ˜¯ä¸€ç§æ¦‚ç‡æ¨¡å‹åšäº†é˜è¿°ã€‚\n\n>é€»è¾‘å›å½’æ˜¯ä¸€ç§åˆ¤åˆ«æ¨¡å‹ï¼Œè¡¨ç°ä¸ºç›´æ¥å¯¹æ¡ä»¶æ¦‚ç‡P(y|x)å»ºæ¨¡ï¼Œè€Œä¸å…³å¿ƒèƒŒåçš„æ•°æ®åˆ†å¸ƒP(x,y)ã€‚è€Œé«˜æ–¯è´å¶æ–¯æ¨¡å‹ï¼ˆGaussian Naive Bayesï¼‰æ˜¯ä¸€ç§ç”Ÿæˆæ¨¡å‹ï¼Œå…ˆå¯¹æ•°æ®çš„è”åˆåˆ†å¸ƒå»ºæ¨¡ï¼Œå†é€šè¿‡è´å¶æ–¯å…¬å¼æ¥è®¡ç®—æ ·æœ¬å±äºå„ä¸ªç±»åˆ«çš„åéªŒæ¦‚ç‡ï¼Œå³ï¼š\n$$\np(y|x) = \\frac{P(x|y)P(y)}{\\sum{P(x|y)P(y)}}\n$$\né€šå¸¸å‡è®¾P(x|y)æ˜¯é«˜æ–¯åˆ†å¸ƒï¼ŒP(y)æ˜¯å¤šé¡¹å¼åˆ†å¸ƒï¼Œç›¸åº”çš„å‚æ•°éƒ½å¯ä»¥é€šè¿‡æœ€å¤§ä¼¼ç„¶ä¼°è®¡å¾—åˆ°ã€‚å¦‚æœæˆ‘ä»¬è€ƒè™‘äºŒåˆ†ç±»é—®é¢˜ï¼Œé€šè¿‡ç®€å•çš„å˜åŒ–å¯ä»¥å¾—åˆ°ï¼š\n$$\n\\log\\frac{P(y=1|x)}{P(y=0|x)} = \\log\\frac{P(x|y=1)}{P(x|y=0)} + \\log\\frac{P(y=1)}{P(y=0)}  \\ = -\\frac{(x-\\mu_1)^2}{2\\sigma_1^2} + \\frac{(x-\\mu_0)^2}{2\\sigma_0^2}\\ + \\theta_0\n$$\nå¦‚æœ Ïƒ1=Ïƒ0ï¼ŒäºŒæ¬¡é¡¹ä¼šæŠµæ¶ˆï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªç®€å•çš„çº¿æ€§å…³ç³»ï¼š\n$$\n\\log\\frac{P(y=1|x)}{P(y=0|x)} = \\theta^T x\n$$\nç”±ä¸Šå¼è¿›ä¸€æ­¥å¯ä»¥å¾—åˆ°ï¼š\n$$\nP(y=1|x) = \\frac{e^{\\theta^T x}}{1+e^{\\theta^T x}} = \\frac{1}{1+e^{-\\theta^T x}}\n$$\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ¦‚ç‡å’Œé€»è¾‘å›å½’ä¸­çš„å½¢å¼æ˜¯ä¸€æ ·çš„ã€‚è¿™ç§æƒ…å†µä¸‹GNB å’Œ LR ä¼šå­¦ä¹ åˆ°åŒä¸€ä¸ªæ¨¡å‹ã€‚å®é™…ä¸Šï¼Œåœ¨æ›´ä¸€èˆ¬çš„å‡è®¾ï¼ˆP(x|y)çš„åˆ†å¸ƒå±äºæŒ‡æ•°åˆ†å¸ƒæ—ï¼‰ä¸‹ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥å¾—åˆ°ç±»ä¼¼çš„ç»“è®ºã€‚\n\nè‡³äºé€»è¾‘å›å½’ä¸ºä»€ä¹ˆé‡‡ç”¨Sigmoidå‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Œå› ä¸ºLRæ˜¯åœ¨ä¼¯åŠªåˆ©åˆ†å¸ƒå’Œå¹¿ä¹‰çº¿æ€§æ¨¡å‹çš„å‡è®¾ä¸‹æ¨å¯¼è€Œæ¥çš„ï¼Œä¼¯åŠªåˆ©åˆ†å¸ƒæ˜¯å±äºæŒ‡æ•°åˆ†å¸ƒç°‡çš„ã€‚\n\nå…·ä½“çš„æ¨å¯¼å¯ä»¥å‚è€ƒ [æœºå™¨å­¦ä¹ ç®—æ³•ä¹‹ï¼šæŒ‡æ•°æ—åˆ†å¸ƒä¸å¹¿ä¹‰çº¿æ€§æ¨¡å‹][1] çš„ä»‹ç»\n\n# Logistic Regression åˆ†ç±»å™¨\nå³å†³ç­–å‡½æ•°ã€‚\nä¸€ä¸ªæœºå™¨å­¦ä¹ çš„æ¨¡å‹ï¼Œå®é™…ä¸Šæ˜¯æŠŠå†³ç­–å‡½æ•°é™å®šåœ¨æŸä¸€ç»„æ¡ä»¶ä¸‹ï¼Œè¿™ç»„é™å®šæ¡ä»¶å°±å†³å®šäº†æ¨¡å‹çš„å‡è®¾ç©ºé—´ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›è¿™ç»„é™å®šæ¡ä»¶ç®€å•è€Œåˆç†ã€‚è€Œé€»è¾‘å›å½’æ¨¡å‹æ‰€åšçš„å‡è®¾æ˜¯ï¼š\n$$\nP(y=1|x;\\theta) = g(\\theta^T x) = \\frac{1}{1 + e ^ {-\\theta^T * x}}\n$$\nè¿™é‡Œçš„ g(h)æ˜¯ä¸Šè¾¹æåˆ°çš„ sigmoid å‡½æ•°$\\theta$ è¡¨ç¤ºçš„æ˜¯ä¸€ç»„å‚æ•°ï¼Œ$\\theta^T $è¡¨ç¤ºå‚æ•°çš„è½¬ç½®çŸ©é˜µï¼Œ$\\theta^T x$å…¶å®è¡¨ç¤ºçš„å°±æ˜¯$\\theta_{0}x_{0} + \\theta_{1}x_{1} + \\theta_{2} x_{2}....$ï¼Œç›¸åº”çš„å†³ç­–å‡½æ•°ä¸ºï¼š\n$$\ny^* = 1, \\, \\textrm{if} \\, P(y=1|x) > 0.5\n$$\né€‰æ‹©0.5ä½œä¸ºé˜ˆå€¼æ˜¯ä¸€ä¸ªä¸€èˆ¬çš„åšæ³•ï¼Œå®é™…åº”ç”¨æ—¶ç‰¹å®šçš„æƒ…å†µå¯ä»¥é€‰æ‹©ä¸åŒé˜ˆå€¼ï¼Œå¦‚æœå¯¹æ­£ä¾‹çš„åˆ¤åˆ«å‡†ç¡®æ€§è¦æ±‚é«˜ï¼Œå¯ä»¥é€‰æ‹©é˜ˆå€¼å¤§ä¸€äº›ï¼Œå¯¹æ­£ä¾‹çš„å¬å›è¦æ±‚é«˜ï¼Œåˆ™å¯ä»¥é€‰æ‹©é˜ˆå€¼å°ä¸€äº›ã€‚\n\n# å‚æ•°æ±‚è§£\nç¡®å®šå¥½å†³ç­–å‡½æ•°ä¹‹åå°±æ˜¯æ±‚è§£å‚æ•°äº†ã€‚\n\næ¨¡å‹çš„æ•°å­¦å½¢å¼ç¡®å®šåï¼Œå‰©ä¸‹å°±æ˜¯å¦‚ä½•å»æ±‚è§£æ¨¡å‹ä¸­çš„å‚æ•°ã€‚ç»Ÿè®¡å­¦ä¸­å¸¸ç”¨çš„ä¸€ç§æ–¹æ³•æ˜¯æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼Œå³æ‰¾åˆ°ä¸€ç»„å‚æ•°ï¼Œä½¿å¾—åœ¨è¿™ç»„å‚æ•°ä¸‹ï¼Œæˆ‘ä»¬çš„æ•°æ®çš„ä¼¼ç„¶åº¦ï¼ˆæ¦‚ç‡ï¼‰è¶Šå¤§ã€‚åœ¨é€»è¾‘å›å½’æ¨¡å‹ä¸­ï¼Œä¼¼ç„¶åº¦å¯è¡¨ç¤ºä¸ºï¼š\n$$\nL(\\theta) = P(D|\\theta) = \\prod P(y|x;\\theta) = \\prod g(\\theta^T x) ^ y (1-g(\\theta^T x))^{1-y} \n$$\nå–å¯¹æ•°å¯ä»¥å¾—åˆ°å¯¹æ•°ä¼¼ç„¶åº¦ï¼š\n$$\nl(\\theta) = \\sum {y\\log{g(\\theta^T x)} + (1-y)\\log{(1-g(\\theta^T x))}}\n$$\nå¦ä¸€æ–¹é¢ï¼Œåœ¨æœºå™¨å­¦ä¹ é¢†åŸŸï¼Œæˆ‘ä»¬æ›´ç»å¸¸é‡åˆ°çš„æ˜¯æŸå¤±å‡½æ•°çš„æ¦‚å¿µï¼Œå…¶è¡¡é‡çš„æ˜¯æ¨¡å‹é¢„æµ‹é”™è¯¯çš„ç¨‹åº¦ã€‚å¸¸ç”¨çš„æŸå¤±å‡½æ•°æœ‰0-1æŸå¤±ï¼ŒlogæŸå¤±ï¼ŒhingeæŸå¤±ç­‰ã€‚å…¶ä¸­logæŸå¤±åœ¨å•ä¸ªæ•°æ®ç‚¹ä¸Šçš„å®šä¹‰ä¸º\n$$\n-y\\log{p(y|x)}-(1-y)\\log{1-p(y|x)}\n$$\nå¦‚æœå–æ•´ä¸ªæ•°æ®é›†ä¸Šçš„å¹³å‡logæŸå¤±ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°\n$$\nJ(\\theta) = -\\frac{1}{N} l(\\theta)\n$$\nå³åœ¨é€»è¾‘å›å½’æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬æœ€å¤§åŒ–ä¼¼ç„¶å‡½æ•°å’Œæœ€å°åŒ–logæŸå¤±å‡½æ•°å®é™…ä¸Šæ˜¯ç­‰ä»·çš„ã€‚å¯¹äºè¯¥ä¼˜åŒ–é—®é¢˜ï¼Œå­˜åœ¨å¤šç§æ±‚è§£æ–¹æ³•ï¼Œè¿™é‡Œä»¥æ¢¯åº¦ä¸‹é™çš„ä¸ºä¾‹è¯´æ˜ã€‚æ¢¯åº¦ä¸‹é™(Gradient Descent)åˆå«ä½œæœ€é€Ÿæ¢¯åº¦ä¸‹é™ï¼Œæ˜¯ä¸€ç§è¿­ä»£æ±‚è§£çš„æ–¹æ³•ï¼Œé€šè¿‡åœ¨æ¯ä¸€æ­¥é€‰å–ä½¿ç›®æ ‡å‡½æ•°å˜åŒ–æœ€å¿«çš„ä¸€ä¸ªæ–¹å‘è°ƒæ•´å‚æ•°çš„å€¼æ¥é€¼è¿‘æœ€ä¼˜å€¼ã€‚åŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼š\n\n- é€‰æ‹©ä¸‹é™æ–¹å‘ï¼ˆæ¢¯åº¦æ–¹å‘ï¼Œ$\\nabla {J(\\theta)}$ï¼‰\n- é€‰æ‹©æ­¥é•¿ï¼Œæ›´æ–°å‚æ•° $\\theta^i = \\theta^{i-1} - \\alpha^i \\nabla {J(\\theta^{i-1})}$\n- é‡å¤ä»¥ä¸Šä¸¤æ­¥ç›´åˆ°æ»¡è¶³ç»ˆæ­¢æ¡ä»¶\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][2]\n\nå…¶ä¸­æŸå¤±å‡½æ•°çš„æ¢¯åº¦è®¡ç®—æ–¹æ³•ä¸ºï¼š\n$$\n\\frac{\\partial{J}}{\\partial{\\theta}} = -\\frac{1}{n}\\sum_i (y_i - y_i^*)x_i + \\lambda \\theta\n$$\næ²¿æ¢¯åº¦è´Ÿæ–¹å‘é€‰æ‹©ä¸€ä¸ªè¾ƒå°çš„æ­¥é•¿å¯ä»¥ä¿è¯æŸå¤±å‡½æ•°æ˜¯å‡å°çš„ï¼Œå¦ä¸€æ–¹é¢ï¼Œé€»è¾‘å›å½’çš„æŸå¤±å‡½æ•°æ˜¯å‡¸å‡½æ•°ï¼ˆåŠ å…¥æ­£åˆ™é¡¹åæ˜¯ä¸¥æ ¼å‡¸å‡½æ•°ï¼‰ï¼Œå¯ä»¥ä¿è¯æˆ‘ä»¬æ‰¾åˆ°çš„å±€éƒ¨æœ€ä¼˜å€¼åŒæ—¶æ˜¯å…¨å±€æœ€ä¼˜ã€‚æ­¤å¤–ï¼Œå¸¸ç”¨çš„å‡¸ä¼˜åŒ–çš„æ–¹æ³•éƒ½å¯ä»¥ç”¨äºæ±‚è§£è¯¥é—®é¢˜ã€‚ä¾‹å¦‚å…±è½­æ¢¯åº¦ä¸‹é™ï¼Œç‰›é¡¿æ³•ï¼ŒLBFGSç­‰ã€‚\n\n# åˆ†ç±»è¾¹ç•Œ\nçŸ¥é“å¦‚ä½•æ±‚è§£å‚æ•°åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ¨¡å‹å¾—åˆ°çš„æœ€åç»“æœæ˜¯ä»€ä¹ˆæ ·çš„ã€‚å¾ˆå®¹æ˜“å¯ä»¥ä»sigmoidå‡½æ•°çœ‹å‡ºï¼Œå½“$\\theta^T x > 0$ æ—¶ï¼Œy=1ï¼Œå¦åˆ™ y=0ã€‚$\\theta^T x = 0$ æ˜¯æ¨¡å‹éšå«çš„åˆ†ç±»å¹³é¢ï¼ˆåœ¨é«˜ç»´ç©ºé—´ä¸­ï¼Œæˆ‘ä»¬è¯´æ˜¯è¶…å¹³é¢ï¼‰ã€‚æ‰€ä»¥è¯´é€»è¾‘å›å½’æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªçº¿æ€§æ¨¡å‹ï¼Œä½†æ˜¯ï¼Œè¿™ä¸æ„å‘³ç€åªæœ‰çº¿æ€§å¯åˆ†çš„æ•°æ®èƒ½é€šè¿‡LRæ±‚è§£ï¼Œå®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç‰¹å¾å˜æ¢çš„æ–¹å¼æŠŠä½ç»´ç©ºé—´è½¬æ¢åˆ°é«˜ç»´ç©ºé—´ï¼Œè€Œåœ¨ä½ç»´ç©ºé—´ä¸å¯åˆ†çš„æ•°æ®ï¼Œåˆ°é«˜ç»´ç©ºé—´ä¸­çº¿æ€§å¯åˆ†çš„å‡ ç‡ä¼šé«˜ä¸€äº›ã€‚ä¸‹é¢ä¸¤ä¸ªå›¾çš„å¯¹æ¯”è¯´æ˜äº†çº¿æ€§åˆ†ç±»æ›²çº¿å’Œéçº¿æ€§åˆ†ç±»æ›²çº¿ï¼ˆé€šè¿‡ç‰¹å¾æ˜ å°„ï¼‰ã€‚\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][3]\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][4]\nå·¦å›¾æ˜¯ä¸€ä¸ªçº¿æ€§å¯åˆ†çš„æ•°æ®é›†ï¼Œå³å›¾åœ¨åŸå§‹ç©ºé—´ä¸­çº¿æ€§ä¸å¯åˆ†ï¼Œä½†æ˜¯åœ¨ç‰¹å¾è½¬æ¢ $[x_1, x_2] => [x_1, x_2, x_1^2, x_2^2, x_1x_2]$ åçš„ç©ºé—´æ˜¯çº¿æ€§å¯åˆ†çš„ï¼Œå¯¹åº”çš„åŸå§‹ç©ºé—´ä¸­åˆ†ç±»è¾¹ç•Œä¸ºä¸€æ¡ç±»æ¤­åœ†æ›²çº¿ã€‚\n\n# æ€»ç»“\né€»è¾‘å›å½’çš„æ•°å­¦æ¨¡å‹å’Œæ±‚è§£éƒ½ç›¸å¯¹æ¯”è¾ƒç®€æ´ï¼Œå®ç°ç›¸å¯¹ç®€å•ã€‚é€šè¿‡å¯¹ç‰¹å¾åšç¦»æ•£åŒ–å’Œå…¶ä»–æ˜ å°„ï¼Œé€»è¾‘å›å½’ä¹Ÿå¯ä»¥å¤„ç†éçº¿æ€§é—®é¢˜ï¼Œæ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åˆ†ç±»å™¨ã€‚å› æ­¤åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå½“æˆ‘ä»¬èƒ½å¤Ÿæ‹¿åˆ°è®¸å¤šä½å±‚æ¬¡çš„ç‰¹å¾æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨é€»è¾‘å›å½’æ¥è§£å†³æˆ‘ä»¬çš„é—®é¢˜ã€‚\n\n-----\n# èµ„æ–™å‚è€ƒ\n\nhttp://blog.csdn.net/han_xiaoyang/article/details/49123419\n\nhttps://www.cnblogs.com/sxron/p/5489214.html\n\nhttps://tech.meituan.com/intro_to_logistic_regression.html\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n\n  [1]: https://blog.csdn.net/u011467621/article/details/48197943\n  [2]: https://tech.meituan.com/img/lr_intro/gradient_descent.png\n  [3]: https://tech.meituan.com/img/lr_intro/decision_boundary_1.png\n  [4]: https://tech.meituan.com/img/lr_intro/decision_boundary_2.png","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"TensorFlowçš„MNISTå­¦ä¹ ","url":"/2018/04/22/æ·±åº¦å­¦ä¹ /TensorFlow/TensorFlowçš„MNISTå­¦ä¹ /","content":"\n> MNISTæ˜¯åœ¨æœºå™¨å­¦ä¹ é¢†åŸŸä¸­çš„ä¸€ä¸ªç»å…¸é—®é¢˜ã€‚è¯¥é—®é¢˜è§£å†³çš„æ˜¯æŠŠ28x28åƒç´ çš„ç°åº¦æ‰‹å†™æ•°å­—å›¾ç‰‡è¯†åˆ«ä¸ºç›¸åº”çš„æ•°å­—ï¼Œå…¶ä¸­æ•°å­—çš„èŒƒå›´ä»0åˆ°9.\n\n<!--More-->\n\næ•°æ®é›†\t| ç›®çš„\n--|--\ndata_sets.train|\t55000 ç»„ å›¾ç‰‡å’Œæ ‡ç­¾, ç”¨äºè®­ç»ƒã€‚\ndata_sets.validation|\t5000 ç»„ å›¾ç‰‡å’Œæ ‡ç­¾, ç”¨äºè¿­ä»£éªŒè¯è®­ç»ƒçš„å‡†ç¡®æ€§ã€‚\ndata_sets.test\t|10000 ç»„ å›¾ç‰‡å’Œæ ‡ç­¾, ç”¨äºæœ€ç»ˆæµ‹è¯•è®­ç»ƒçš„å‡†ç¡®æ€§ã€‚\n\n# æ•°æ®é›†ç®€ä»‹\nMNISTæ•°æ®é›†åŠ è½½æœ‰ä¸¤ç§åŠæ³•ï¼Œç¬¬ä¸€æ˜¯ç›´æ¥ä»ç½‘ä¸Šä¸‹è½½ï¼Œç¬¬äºŒæ˜¯ä¸‹è½½åˆ°æœ¬åœ°è¿›è¡Œloadï¼ˆè·Ÿç¬¬ä¸€ç§ç±»ä¼¼ï¼Œåªä¸è¿‡æ˜¯äº‹å…ˆä¸‹è½½å¥½ï¼Œä»æœ¬åœ°è¿›è¡ŒåŠ è½½ï¼‰ã€‚ä»ç½‘ä¸Šä¸‹è½½åˆ°æœ¬åœ°æ–¹å¼å¦‚ä¸‹ï¼š\n\n```\n# åŠ è½½mnistæ•°æ®é›†\nfrom tensorflow.examples.tutorials.mnist import input_data\nprint(\"load finish\")\n\nmnist = input_data.read_data_sets(\"MNIST_data/\",one_hot=True)\nprint(type(mnist))\n```\nè¾“å‡ºä¸ºï¼š\n```\nload finish\nExtracting MNIST_data/train-images-idx3-ubyte.gz\nExtracting MNIST_data/train-labels-idx1-ubyte.gz\nExtracting MNIST_data/t10k-images-idx3-ubyte.gz\nExtracting MNIST_data/t10k-labels-idx1-ubyte.gz\n<class 'tensorflow.contrib.learn.python.learn.datasets.base.Datasets'>\n```\n\n---\n\n```\nprint(\"MNIST è®­ç»ƒé›†æ•°æ®æ¡æ•°ï¼š\" ,mnist.train.num_examples)\nprint(\"MNIST æµ‹è¯•é›†æ•°æ®æ¡æ•°ï¼š\" ,mnist.test.num_examples)\n\ntrain_img = mnist.train.images\ntrain_label = mnist.train.labels\nprint(\"è®­ç»ƒé›†ç±»å‹ï¼š\",type(train_img))\nprint(\"è®­ç»ƒé›†ç»´åº¦ï¼š\",train_img.shape)\n\ntest_img = mnist.test.images\ntest_label = mnist.test.labels\nprint(\"æµ‹è¯•é›†ç±»å‹ï¼š\",type(test_img))\nprint(\"æµ‹è¯•é›†ç»´åº¦ï¼š\",test_img.shape)\n```\nè¾“å‡ºä¸ºï¼š\n```\nMNIST è®­ç»ƒé›†æ•°æ®æ¡æ•°ï¼š 55000\nMNIST æµ‹è¯•é›†æ•°æ®æ¡æ•°ï¼š 10000\nè®­ç»ƒé›†ç±»å‹ï¼š <class 'numpy.ndarray'>\nè®­ç»ƒé›†ç»´åº¦ï¼š (55000, 784)\næµ‹è¯•é›†ç±»å‹ï¼š <class 'numpy.ndarray'>\næµ‹è¯•é›†ç»´åº¦ï¼š (10000, 784)\n```\næ‰“å¼€å½“å‰è¿è¡Œä»£ç çš„ç›®å½•ï¼Œæˆ‘ä»¬ä¼šå‘ç°ä¸€ä¸ªMNIST_dataçš„æ–‡ä»¶å¤¹ï¼Œé‡Œè¾¹åŒ…å«çš„æ–‡ä»¶å¦‚ä¸‹ï¼š\næ–‡ä»¶\t| å†…å®¹\n--|--\ntrain-images-idx3-ubyte.gz |\tè®­ç»ƒé›†å›¾ç‰‡ - 55000 å¼  è®­ç»ƒå›¾ç‰‡, 5000 å¼  éªŒè¯å›¾ç‰‡\ntrain-labels-idx1-ubyte.gz |\tè®­ç»ƒé›†å›¾ç‰‡å¯¹åº”çš„æ•°å­—æ ‡ç­¾\nt10k-images-idx3-ubyte.gz |\tæµ‹è¯•é›†å›¾ç‰‡ - 10000 å¼  å›¾ç‰‡\nt10k-labels-idx1-ubyte.gz |\tæµ‹è¯•é›†å›¾ç‰‡å¯¹åº”çš„æ•°å­—æ ‡ç­¾\n\nä½¿ç”¨next_batchå‡½æ•°åŠ è½½æŒ‡å®šæ¡æ•°çš„æ•°æ®é›†\n```\n# å…³äºnext_batchå‡½æ•°\nbatchSize = 100\nbatch_x,batch_y = mnist.train.next_batch(batch_size=batchSize)\nprint(batch_x.shape)\nprint(batch_y.shape)\n```\nè¾“å‡ºä¸ºï¼š\n```\n(100, 784)\n(100, 10)\n```\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["TensorFlow"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"TensorFlowå®ç°çº¿æ€§å›å½’","url":"/2018/04/22/æ·±åº¦å­¦ä¹ /TensorFlow/TensorFlowå®ç°çº¿æ€§å›å½’/","content":"\n> TensorFlowå†™ç®€å•çš„ä»£ç æ˜¯å¤§è´¢å°ç”¨ï¼Œéœ€è¦å¾ˆç¹ççš„ä»£ç æ–¹èƒ½å®ç°ç®€å•çš„åŠŸèƒ½ï¼Œä½†å¯¹äºå¤æ‚çš„æœºå™¨å­¦ä¹ ç®—æ³•å’Œæ·±åº¦ç¥ç»ç½‘ç»œå´æ˜¯ååˆ†çš„ç®€å•ï¼Œä¸‹è¾¹çœ‹ä¸€ä¸ªtfå®ç°çº¿æ€§å›å½’çš„Demo\n\n<!--More-->\n\n----\né¦–å…ˆå¼•å…¥tfåŒ…çš„ç›¸å…³çš„packageï¼Œå¹¶åˆå§‹åŒ–100ä¸ªç‚¹ã€‚è¿™é‡Œæˆ‘ä»¬å‡å®šçº¿æ€§å›å½’ä¸­çš„wä¸º0.1 bä¸º0.3ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªéšæœºæ•°ä¿è¯åœ¨y=0.1X + 0.3 ä¸Šä¸‹æµ®åŠ¨ã€‚\n```\n# coding: utf-8\n'''\ncreate by: Thinkgamer\ncreate time: 2018/04/22\ndesc: ä½¿ç”¨tensorflowåˆ›å»ºçº¿æ€§å›å½’æ¨¡å‹\n'''\nimport numpy as np\nimport tensorflow as tf\nimport matplotlib.pyplot as plt\n\n# éšæœºç”Ÿæˆ100ä¸ªç‚¹\nnum_points = 100\nvectors_set = list()\nfor i in range(num_points):\n    x1 = np.random.normal(0.00,00.55)\n    y1 = x1* 0.1 + 0.3 + np.random.normal(0.0,0.03)\n    vectors_set.append([x1,y1])\n\n# ç”Ÿæˆä¸€äº›æ ·æœ¬\nx_data = [v[0] for v in vectors_set]\ny_data = [v[1] for v in vectors_set]\n# print(x_data)\n# print(y_data)\nplt.scatter(x_data,y_data,c='r')\nplt.show()\n```\nç”Ÿæˆçš„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](https://img-blog.csdn.net/20180422142414284?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dhbWVyX2d5dA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)\n\nç”¨åˆšæ‰ç”Ÿæˆçš„æ•°æ®è¿›è¡Œçº¿æ€§å›å½’æ‹Ÿåˆ\n\n```\n# æ„é€ çº¿æ€§å›å½’æ¨¡å‹\n\n# ç”Ÿæˆä¸€ç»´çš„WçŸ©é˜µï¼Œå–å€¼æ˜¯[-1,1]ä¹‹é—´çš„éšæœºæ•°\nW = tf.Variable(tf.random_uniform([1],-1,1),name='W')\n# ç”Ÿæˆä¸€ç»´çš„bçŸ©é˜µï¼Œåˆå§‹å€¼ä¸º0\nb = tf.Variable(tf.zeros([1]),name='b')\n# ç»è¿‡è®¡ç®—å¾—å‡ºé¢„ä¼°å€¼y\ny=W*x_data + b\n\n# å®šä¹‰æŸå¤±å‡½æ•°ï¼Œä»¥é¢„ä¼°å€¼yå’Œy_dataä¹‹é—´çš„å‡æ–¹è¯¯å·®ä½œä¸ºæŸå¤±\nloss = tf.reduce_mean(tf.square(y - y_data),name='loss')\n# é‡‡ç”¨åœ°å›¾ä¸‹é™ç®—æ³•æ¥ä¼˜åŒ–å‚æ•°\noptimizer = tf.train.GradientDescentOptimizer(0.5)\n# è®­ç»ƒè¿‡ç¨‹å°±æ˜¯æœ€å°åŒ–è¯¯å·®\ntrain = optimizer.minimize(loss,name='train')\n\nsess = tf.Session()\n\ninit = tf.global_variables_initializer()\nsess.run(init)\n\n# åˆå§‹åŒ–W å’Œ b\nprint(\"åˆå§‹åŒ–å€¼ï¼š  W = \",sess.run(W), \"b= \",sess.run(b))\nfor step in range(20):\n    sess.run(train)\n    # æ‰“å°å‡ºæ¯æ¬¡è®­ç»ƒåçš„wå’Œb\n    print(\"ç¬¬ %s æ­¥ï¼š  W = \" % step,sess.run(W), \"b= \",sess.run(b))\n    \n# å±•ç¤º\nplt.scatter(x_data,y_data,c='r')\nplt.plot(x_data,sess.run(W)*x_data+sess.run(b),c='b')\nplt.show()\n```\nå¯¹åº”çš„è¾“å‡ºç»“æœä¸ºï¼š\n```\nåˆå§‹åŒ–å€¼ï¼š  W =  [-0.300848] b=  [0.]\nç¬¬ 0 æ­¥ï¼š  W =  [-0.17744449] b=  [0.3065566]\nç¬¬ 1 æ­¥ï¼š  W =  [-0.09421768] b=  [0.30550653]\nç¬¬ 2 æ­¥ï¼š  W =  [-0.03631891] b=  [0.3047983]\nç¬¬ 3 æ­¥ï¼š  W =  [0.0039596] b=  [0.3043056]\nç¬¬ 4 æ­¥ï¼š  W =  [0.0319802] b=  [0.3039629]\nç¬¬ 5 æ­¥ï¼š  W =  [0.05147332] b=  [0.30372444]\nç¬¬ 6 æ­¥ï¼š  W =  [0.06503413] b=  [0.30355856]\nç¬¬ 7 æ­¥ï¼š  W =  [0.07446799] b=  [0.30344316]\nç¬¬ 8 æ­¥ï¼š  W =  [0.08103085] b=  [0.30336288]\nç¬¬ 9 æ­¥ï¼š  W =  [0.08559645] b=  [0.30330706]\nç¬¬ 10 æ­¥ï¼š  W =  [0.0887726] b=  [0.3032682]\nç¬¬ 11 æ­¥ï¼š  W =  [0.09098216] b=  [0.30324116]\nç¬¬ 12 æ­¥ï¼š  W =  [0.09251929] b=  [0.30322236]\nç¬¬ 13 æ­¥ï¼š  W =  [0.09358863] b=  [0.30320928]\nç¬¬ 14 æ­¥ï¼š  W =  [0.09433253] b=  [0.3032002]\nç¬¬ 15 æ­¥ï¼š  W =  [0.09485004] b=  [0.30319384]\nç¬¬ 16 æ­¥ï¼š  W =  [0.09521006] b=  [0.30318946]\nç¬¬ 17 æ­¥ï¼š  W =  [0.09546052] b=  [0.3031864]\nç¬¬ 18 æ­¥ï¼š  W =  [0.09563475] b=  [0.30318424]\nç¬¬ 19 æ­¥ï¼š  W =  [0.09575596] b=  [0.30318278]\n```\nç”Ÿæˆçš„å›¾å¦‚ä¸‹ï¼š\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](https://img-blog.csdn.net/20180422142454345?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dhbWVyX2d5dA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["TensorFlow"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"TensorFlowå®‰è£…ã€å˜é‡å­¦ä¹ å’Œå¸¸ç”¨æ“ä½œ","url":"/2018/04/17/æ·±åº¦å­¦ä¹ /TensorFlow/TensorFlowå®‰è£…ã€å˜é‡å­¦ä¹ å’Œå¸¸ç”¨æ“ä½œ/","content":"\n> æœ¬æ–‡ä¸»è¦ä»‹ç»TensorFlowçš„å®‰è£… ï¼Œå˜é‡å­¦ä¹ å’Œä¸€äº›å¸¸ç”¨æ“ä½œã€‚\n\n<!--More-->\n\n# å®‰è£…ã€å…¥é—¨\nç¯å¢ƒè¯´æ˜ï¼š\n\n- deepin 15.4\n- python 3.5.4\n- tensorflow 1.7.0\n\nå®‰è£…ï¼š\n```\npip3 install https://pypi.python.org/packages/dd/ed/9e6c6c16ff50be054277438669542555a166ed9f95a0dcaacff24fd3153a/tensorflow-1.7.0rc1-cp35-cp35m-manylinux1_x86_64.whl#md5=ec44ad9b0d040caef8ca0fac5b822b0d\n```\næµ‹è¯•ï¼š\n```\n>>> import tensorflow as tf\n>>> hello = tf.constant(\"hello , Thinkgamer\")\n>>> with tf.Session() as sess:\n...     print(sess.run(hello))\n...     sess.close()\n... \n2018-03-28 00:50:16.728894: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\nb'hello , Thinkgamer'\n\n```\nä½¿ç”¨ TensorFlow, ä½ å¿…é¡»æ˜ç™½ TensorFlow:\n\n- ä½¿ç”¨å›¾ (graph) æ¥è¡¨ç¤ºè®¡ç®—ä»»åŠ¡.\n- åœ¨è¢«ç§°ä¹‹ä¸º ä¼šè¯ (Session) çš„ä¸Šä¸‹æ–‡ (context) ä¸­æ‰§è¡Œå›¾.\n- ä½¿ç”¨ tensor è¡¨ç¤ºæ•°æ®.\n- é€šè¿‡ å˜é‡ (Variable) ç»´æŠ¤çŠ¶æ€.\n- ä½¿ç”¨ feed å’Œ fetch å¯ä»¥ä¸ºä»»æ„çš„æ“ä½œ(arbitrary operation) èµ‹å€¼æˆ–è€…ä»å…¶ä¸­è·å–æ•°æ®.\n\n**sessionå’ŒInteractiveSessionçš„åŒºåˆ«ï¼š**\n\nsessionï¼šå¯åŠ¨å›¾çš„æ“ä½œï¼Œæœ‰run()ã€close()\nInteractiveSessionï¼šé»˜è®¤ä¼šè¯\n```\n>>> sess = tf.InteractiveSession()\n>>> a = tf.constant(5.0)\n>>> b = tf.constant(6.0)\n>>> c = a * b\n>>> print(c.eval())\n30.0\n>>> sess.close()\n>>>\n>>> sess = tf.Session()\n>>> a = tf.constant(5.0)\n>>> b = tf.constant(6.0)\n>>> c = a * b\n>>> sess.run(c)\n30.0\n>>> sess.close()\n```\n\n# Tensorflowä¹‹å˜é‡\n## tensorçš„ç†è§£\ntensorå³å¼ é‡ï¼Œtfä¸­æ‰€æœ‰çš„æ•°æ®é€šè¿‡æ•°æ®æµè¿›è¡Œä¼ è¾“ï¼Œå¯ä»¥å£°æ˜ä»»ä½•ä¸€ä¸ªå¼ é‡ï¼Œåªæœ‰å½“ä¸€ä¸ªå¼ é‡è¿›è¡Œrunçš„æ—¶å€™ï¼Œè¿™ä¸ªå¼ é‡æ‰€æ¶‰åŠçš„tensorä¾¿ä¼šè§¦å‘ï¼Œè¿™ä¸€ç‚¹å’Œsparkçš„DAGå¾ˆæ˜¯ç›¸ä¼¼ï¼Œåœ¨åŒä¸€æ¡é“¾ä¸Šçš„æŸä¸ªèŠ‚ç‚¹è¿›è¡Œè§¦å‘æ“ä½œæ—¶ï¼Œè¯¥èŠ‚ç‚¹ä¹‹å‰çš„æ‰€æœ‰èŠ‚ç‚¹ä¾¿ä¼šå‚ä¸è®¡ç®—ã€‚\n\nåœ¨tensorflowä¸­ï¼Œå¼ é‡çš„ç»´æ•°è¢«æè¿°ä¸ºâ€œé˜¶â€ï¼Œå¼ é‡æ˜¯ä»¥listçš„å½¢å¼å­˜å‚¨çš„ã€‚listæœ‰å‡ é‡ä¸­æ‹¬å·ï¼Œå¯¹åº”çš„å¼ é‡å°±æ˜¯å‡ é˜¶ã€‚å¦‚t=[ [1,2,3],[4,5,6],[7,8,9] ]ï¼Œtå°±æ˜¯ä¸€ä¸ªäºŒé˜¶å¼ é‡ã€‚\n\næˆ‘ä»¬å¯ä»¥è®¤ä¸ºï¼Œä¸€é˜¶å¼ é‡ï¼Œå¦‚[1,2,3]ï¼Œç›¸å½“äºä¸€ä¸ªå‘é‡ï¼ŒäºŒé˜¶å¼ é‡ï¼Œå¦‚[ [1,2,3],[4,5,6],[7,8,9] ]ï¼Œç›¸å½“äºä¸€ä¸ªçŸ©é˜µã€‚\n\nå¯¹äºt=[ [1,2,3],[4,5,6],[7,8,9] ]æ¥è¯´ï¼Œå®ƒçš„shape==>[3,3]ï¼Œshapeå¯ä»¥ç†è§£æˆï¼šå½“è„±å»æœ€å¤–å±‚çš„ä¸€å¯¹ä¸­æ‹¬å·åï¼Œé‡Œé¢æœ‰3ä¸ªå°listï¼Œç„¶åæ¯ä¸ªå°listé‡Œåˆæœ‰3ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥è¯¥å¼ é‡çš„shape==>[3,3]ã€‚\n\nä¸¾å‡ ä¸ªä¾‹å­ï¼Œå¦‚[ [1,2,3],[4,5,6] ] çš„shape=[2,3](å› ä¸ºå½“è„±å»æœ€å¤–å±‚çš„ä¸€å¯¹ä¸­æ‹¬å·åï¼Œé‡Œé¢æœ‰2ä¸ªå°listï¼Œç„¶åæ¯ä¸ªå°listé‡Œåˆæœ‰3ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥è¯¥å¼ é‡çš„shape==>[2,3]ã€‚ï¼‰\n\nåˆå¦‚ï¼š\n```\n[\n    [ \n        [ [ 2 ], [ 2 ] ] ,\n        [ [ 2 ], [ 2 ] ] , \n        [ [ 2 ], [ 2 ] ] \n    ] , \n    [ \n        [ [ 2 ], [ 2 ] ] , \n        [ [ 2 ], [ 2 ] ] , \n        [ [ 2 ], [ 2 ] ] \n    ] ,\n    [ \n        [ [ 2 ], [ 2 ] ] , \n        [ [ 2 ], [ 2 ] ] , \n        [ [ 2 ], [ 2 ] ]\n    ] ,\n    [ \n        [ [ 2 ], [ 2 ] ] ,\n        [ [ 2 ], [ 2 ] ] ,\n        [ [ 2 ], [ 2 ] ] \n    ] \n]\n```\nçš„shape==>[4,3,2,1] (å› ä¸ºå½“è„±å»æœ€å¤–å±‚çš„ä¸€å¯¹ä¸­æ‹¬å·åï¼Œé‡Œé¢æœ‰4ä¸ªç¬¬äºŒå¤§çš„listï¼Œæ¯ä¸ªç¬¬äºŒå¤§çš„listé‡Œåˆæœ‰3ä¸ªç¬¬ä¸‰å¤§çš„listï¼Œæ¯ä¸ªç¬¬ä¸‰å¤§çš„listé‡Œæœ‰2ä¸ªç¬¬å››å¤§çš„listï¼Œæ¯ä¸ªç¬¬å››å¤§çš„listé‡Œæœ‰1ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥è¯¥å¼ é‡çš„shape==>[4,3,2,1]ã€‚\n\n```\n#coding: utf-8\n\n'''\ncreate by: thinkgamer\ncreate time: 2018/04/16\ndescription: å…³äºtensorflowå˜é‡çš„å­¦ä¹ \n'''\n\nimport tensorflow as tf\n\na = tf.Variable([ [1,2,3],[4,5,6],[7,8,9] ])\nb = tf.Variable([ [1,2,3],[4,5,6] ])\nc = tf.Variable([[ [ [ 2 ], [ 2 ] ] ,[ [ 2 ], [ 2 ] ] , [ [ 2 ], [ 2 ] ] ] ,\n                 [ [ [ 2 ], [ 2 ] ] ,[ [ 2 ], [ 2 ] ] , [ [ 2 ], [ 2 ] ] ] ,\n                 [ [ [ 2 ], [ 2 ] ] ,[ [ 2 ], [ 2 ] ] , [ [ 2 ], [ 2 ] ] ] ,\n                 [ [ [ 2 ], [ 2 ] ] ,[ [ 2 ], [ 2 ] ] , [ [ 2 ], [ 2 ] ] ] ])\ninit_op = tf.global_variables_initializer()\n\nwith tf.Session() as sess:\n    sess.run(init_op)\nprint(\"a shape: \",a.eval)\nprint(\"b shape: \",b.eval)\nprint(\"c shape: \",c.eval)\n```\næ‰“å°å‡ºçš„ç»“æœå¦‚ä¸‹ï¼š\n```\na shape:  <bound method Variable.eval of <tf.Variable 'Variable_19:0' shape=(3, 3) dtype=int32_ref>>\nb shape:  <bound method Variable.eval of <tf.Variable 'Variable_20:0' shape=(2, 3) dtype=int32_ref>>\nc shape:  <bound method Variable.eval of <tf.Variable 'Variable_21:0' shape=(4, 3, 2, 1) dtype=int32_ref>>\n```\n## tfå®ç°ä¹˜æ³•\n```\n# tf å®ç°çŸ©é˜µä¹˜æ³•\nval1 = tf.Variable([[1,2]])\nval2 = tf.Variable([[1],[2]])\nresult1 = tf.matmul(val1,val2)\ninit = tf.global_variables_initializer()\nwith tf.Session() as sess:\n    sess.run(init)\n    print(sess.run(result1))\n    sess.close()\n```\n\n## tfçš„å¸¸ç”¨æ“ä½œ\n```\n# tfçš„å¸¸ç”¨æ“ä½œï¼Œå»ºè®®å˜é‡ä»¥float32ä¸ºä¸»,CPU,GPUå‡æ”¯æŒï¼Œå¦åˆ™å®¹æ˜“å‡ºç°ä¸€äº›é”™è¯¯,float32éœ€è¦ä»tfä¸­å¼•å…¥\nfrom tensorflow import float32\n\n# åˆ›å»ºä¸€ä¸ªshape=ï¼ˆ3,4ï¼‰çš„tensor\nt1 = tf.zeros([3,4],float32)\n\n# åˆ›å»ºä¸€ä¸ªshapeç±»ä¼¼äºtensorçš„tensorï¼Œå€¼åˆ†ä¸ºå…¨ä¸º0æˆ–1\ntensor = tf.Variable([ [1,2,3],[4,5,6],[7,8,9] ])\nt2 = tf.zeros_like(tensor)\nt3 = tf.ones_like(tensor)\n\n# åˆ›å»ºtensorflowæ”¯æŒçš„å¸¸é‡\nt4 = tf.constant([1,2,3,4])\n\n# åˆ›å»ºå¸¸é‡ï¼ŒæŒ‡å®šå€¼å…¨ä¸º-1\nt5 = tf.constant(-1.0,shape=[2,3])\n\n# åˆ›å»ºæ•°ç»„\nt6 = tf.linspace(1.0,6.0,3,name=\"linspace\")\n# start=1, limit=9, delta=3\nt7 = tf.range(1,9,3)\n\ninit = tf.global_variables_initializer()\nwith tf.Session() as sess:\n    sess.run(init)\n    print(\"t1: \",sess.run(t1))\n    print(\"\\ntermsor: \",sess.run(tensor))\n    print(\"\\nt2: \",sess.run(t2))\n    print(\"\\nt3: \",sess.run(t3))\n    print(\"\\nt4: \",sess.run(t4))\n    print(\"\\nt5: \",sess.run(t5))\n    print(\"\\nt6: \",sess.run(t6))\n    print(\"\\nt7: \",sess.run(t7))\nsess.close()\n\n#-----------------------------------------\n# tfåˆ›å»ºç¬¦åˆæŒ‡å®šæ­£æ€åˆ†å¸ƒçš„tensor\nt8 = tf.random_normal([2,3],mean=-1 ,stddev=4)\n\n# tf shuffle\nt9 = tf.constant([[1,2],[3,4],[5,6]])\nt10 = tf.random_shuffle(t9)\n\nsess = tf.Session()\nprint(\"\\nt8:\",sess.run(t8))\nprint(\"\\nt9:\",sess.run(t9))\nprint(\"\\nt10\",sess.run(t10))\n```\næ‰“å°å‡ºçš„å€¼ä¸ºï¼š\n```\nt1:  [[0. 0. 0. 0.]\n [0. 0. 0. 0.]\n [0. 0. 0. 0.]]\n\ntermsor:  [[1 2 3]\n [4 5 6]\n [7 8 9]]\n\nt2:  [[0 0 0]\n [0 0 0]\n [0 0 0]]\n\nt3:  [[1 1 1]\n [1 1 1]\n [1 1 1]]\n\nt4:  [1 2 3 4]\n\nt5:  [[-1. -1. -1.]\n [-1. -1. -1.]]\n\nt6:  [1.  3.5 6. ]\n\nt7:  [1 4 7]\n\nt8:  [[  0.8365586   5.152416   -3.9977255]\n [ -1.7592524 -12.675492   -5.949805 ]]\n\nt9:  [[1 2]\n [3 4]\n [5 6]]\n\nt10:  [[3 4]\n [5 6]\n [1 2]]\nIn [ ]:\n\n```\n\n## tfå®ç°i++\n```\n# tf å®ç°i++\nstate= tf.Variable(1)\nnew_value = tf.add(state,tf.Variable(1))\nupdate = tf.assign(state,new_value)\n\nwith tf.Session() as sess:\n    sess.run(tf.global_variables_initializer())\n    print(sess.run(state))\n    for _ in range(3):\n        sess.run(update)\n        print(sess.run(state))\n```\næ‰“å°ç»“æœä¸ºï¼š\n```\n1\n2\n3\n4\n```\n\n## numpyè½¬tensor\n```\n# numpy è½¬åŒ–ä¸º tensor\nimport numpy as np\nnp1 = np.zeros((3,3))\nta = tf.convert_to_tensor(np1)\nwith tf.Session() as tf:\n    print(sess.run(ta))\n```\n\n# æµ‹è¯•é‡åˆ°çš„é—®é¢˜\n\n## 1ï¼štensorFlowä¸pythonç‰ˆæœ¬ä¸é€‚åº”\nç°è±¡ï¼šNameError: name 'XXX' is not defined\nåŸå› æ˜¯ï¼šå½“å‰tensorflowç‰ˆæœ¬ä¸pythonç‰ˆæœ¬ä¸é€‚åº”ã€‚\nè§£å†³åŠæ³•ï¼šé‡æ–°å®‰è£…tf\n```\npip3 install --upgrade tensorflow\n\n------------\nCollecting tensorflow\n  Downloading tensorflow-1.6.0-cp35-cp35m-manylinux1_x86_64.whl (45.8MB)\n```\n## 2ï¼šå˜é‡æœªåˆå§‹åŒ–\n```\nFailedPreconditionError (see above for traceback): Attempting to use uninitialized value Variable_58\n```\nè§£å†³åŠæ³•ï¼šå°†å˜é‡è¿›è¡Œåˆå§‹åŒ–\n```\ninit = tf.global_variables_initializer()\ntf.Session().run(init)\n```\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["TensorFlow"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"æœºå™¨å­¦ä¹ ä¸­çš„AUCç†è§£","url":"/2018/04/15/æœºå™¨å­¦ä¹ /æœºå™¨å­¦ä¹ ä¸­çš„AUCç†è§£/","content":"> æœ€è¿‘åœ¨åšGBDTæ¨¡å‹ï¼Œé‡Œè¾¹ç”¨åˆ°èƒ¡æ¨¡å‹è¯„ä»·æ–¹æ³•å°±æ˜¯AUCï¼Œåˆšå¥½è¶æ­¤æœºä¼šï¼Œå¥½å¥½å­¦ä¹ ä¸€ä¸‹ã€‚\n\n<!--More-->\n\n# æ··æ·†çŸ©é˜µ(Confusion matrix)\næ··æ·†çŸ©é˜µæ˜¯ç†è§£å¤§å¤šæ•°è¯„ä»·æŒ‡æ ‡çš„åŸºç¡€ï¼Œæ¯«æ— ç–‘é—®ä¹Ÿæ˜¯ç†è§£AUCçš„åŸºç¡€ã€‚ä¸°å¯Œçš„èµ„æ–™ä»‹ç»ç€æ··æ·†çŸ©é˜µçš„æ¦‚å¿µï¼Œä¸‹è¾¹ç”¨ä¸€ä¸ªå®ä¾‹è®²è§£ä»€ä¹ˆæ˜¯æ··æ·†çŸ©é˜µ\n\nå¦‚æœ‰100ä¸ªæ ·æœ¬æ•°æ®ï¼Œè¿™äº›æ•°æ®åˆ†æˆ2ç±»ï¼Œæ¯ç±»50ä¸ªã€‚åˆ†ç±»ç»“æŸåå¾—åˆ°çš„æ··æ·†çŸ©é˜µä¸ºï¼š\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](https://img-blog.csdn.net/20180415002706538?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dhbWVyX2d5dA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)\n\nè¯´æ˜ï¼š\n40ä¸ªä¸º0ç±»åˆ«çš„ï¼Œé¢„æµ‹æ­£ç¡®ï¼Œ60ä¸ªäº‹å®æ˜¯0ç±»åˆ«çš„ç»™é¢„æµ‹ä¸º1ç±»åˆ«çš„\n40ä¸ªä¸º1ç±»åˆ«çš„ï¼Œé¢„æµ‹æ­£ç¡®ï¼Œ60ä¸ªäº‹å®æ˜¯1ç±»åˆ«çš„ç»™é¢„æµ‹ä¸º0ç±»åˆ«çš„\n\nå…¶å¯¹åº”çš„æ··æ·†çŸ©é˜µå¦‚ä¸‹ï¼š\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](https://img-blog.csdn.net/2018041500331853?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dhbWVyX2d5dA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)\n\næ··æ·†çŸ©é˜µåŒ…å«å››éƒ¨åˆ†çš„ä¿¡æ¯ï¼š\n\n- True negative(TN)ï¼Œç§°ä¸ºçœŸé˜´ç‡ï¼Œè¡¨æ˜å®é™…æ˜¯è´Ÿæ ·æœ¬é¢„æµ‹æˆè´Ÿæ ·æœ¬çš„æ ·æœ¬æ•°\n- False positive(FP)ï¼Œç§°ä¸ºå‡é˜³ç‡ï¼Œè¡¨æ˜å®é™…æ˜¯è´Ÿæ ·æœ¬é¢„æµ‹æˆæ­£æ ·æœ¬çš„æ ·æœ¬æ•°\n- False negative(FN)ï¼Œç§°ä¸ºå‡é˜´ç‡ï¼Œè¡¨æ˜å®é™…æ˜¯æ­£æ ·æœ¬é¢„æµ‹æˆè´Ÿæ ·æœ¬çš„æ ·æœ¬æ•°\n- True positive(TP)ï¼Œç§°ä¸ºçœŸé˜³ç‡ï¼Œè¡¨æ˜å®é™…æ˜¯æ­£æ ·æœ¬é¢„æµ‹æˆæ­£æ ·æœ¬çš„æ ·æœ¬æ•°\n\nä»ä¸Šè¾¹çš„å›¾å¯ä»¥åˆ†æå‡ºï¼Œå¯¹è§’çº¿å¸¦Trueçš„ä¸ºåˆ¤æ–­å¯¹äº†ï¼Œæ–œå¯¹è§’çº¿å¸¦Falseçš„ä¸ºåˆ¤æ–­é”™äº†ã€‚\n\nåƒå¸¸è§çš„å‡†ç¡®ç‡ï¼Œç²¾å‡†ç‡ï¼Œå¬å›ç‡ï¼ŒF1-scoreï¼ŒAUCéƒ½æ˜¯å»ºç«‹åœ¨æ··æ·†çŸ©é˜µä¸Šçš„ã€‚\n\nå‡†ç¡®ç‡ï¼ˆAccuracyï¼‰ï¼šåˆ¤æ–­æ­£ç¡®çš„å æ€»çš„æ•°ç›®çš„æ¯”ä¾‹ã€ï¼ˆTN+TPï¼‰/100=(40+40)/100=0.8ã€‘\nç²¾å‡†ç‡ï¼ˆprecisionï¼‰ï¼šåˆ¤æ–­æ­£ç¡®çš„æ­£ç±»å è¿›è¡Œåˆ¤æ–­çš„æ•°ç›®çš„æ¯”ä¾‹ï¼ˆé’ˆå¯¹åˆ¤åˆ«ç»“æœè€Œè¨€çš„ï¼Œè¡¨ç¤ºé¢„æµ‹ä¸ºæ­£çš„æ•°æ®ä¸­æœ‰å¤šå°‘æ˜¯çœŸçš„æ­£ç¡®ï¼‰ã€TP/(TP+FP) = 40/(40+60 )=0.4ã€‘\nå¬å›ç‡ï¼ˆrecallï¼‰: åˆ¤æ–­æ­£ç¡®æ­£ç±»å åº”è¯¥åº”è¯¥åˆ¤æ–­æ­£ç¡®çš„æ­£ç±»çš„æ¯”ä¾‹ï¼ˆé’ˆå¯¹åŸæ ·æœ¬è€Œè¨€ï¼Œè¡¨ç¤ºæ ·æœ¬ä¸­çš„æ­£ä¾‹æœ‰å¤šå°‘è¢«åˆ¤æ–­æ­£ç¡®äº†ï¼‰ã€TP/(TP+FN)=40/(40+60)=0.4ã€‘\nF1-Measureï¼šç²¾ç¡®å€¼å’Œå¬å›ç‡çš„è°ƒå’Œå‡å€¼ã€2*R*R/(P+R)=2*0.4*0.4/(0.4+0.4)=1ã€‘\n\n# AUC & ROC\nAUCæ˜¯ä¸€ä¸ªæ¨¡å‹è¯„ä»·æŒ‡æ ‡ï¼Œåªèƒ½ç”¨äºäºŒåˆ†ç±»æ¨¡å‹çš„è¯„ä»·ï¼Œå¯¹äºäºŒåˆ†ç±»æ¨¡å‹ï¼Œè¿˜æœ‰æŸå¤±å‡½æ•°ï¼ˆloglossï¼‰ï¼Œæ­£ç¡®ç‡ï¼ˆaccuracyï¼‰ï¼Œå‡†ç¡®ç‡ï¼ˆprecisionï¼‰ï¼Œä½†ç›¸æ¯”ä¹‹ä¸‹AUCå’Œloglossè¦æ¯”accuracyå’Œprecisionç”¨çš„å¤šï¼ŒåŸå› æ˜¯å› ä¸ºå¾ˆå¤šçš„æœºå™¨å­¦ä¹ æ¨¡å‹è®¡ç®—ç»“æœéƒ½æ˜¯æ¦‚ç‡çš„å½¢å¼ï¼Œé‚£ä¹ˆå¯¹äºæ¦‚ç‡è€Œè¨€ï¼Œæˆ‘ä»¬å°±éœ€è¦å»è®¾å®šä¸€ä¸ªé˜ˆå€¼æ¥åˆ¤å®šåˆ†ç±»ï¼Œé‚£ä¹ˆè¿™ä¸ªé˜ˆå€¼çš„è®¾å®šå°±ä¼šå¯¹æˆ‘ä»¬çš„æ­£ç¡®ç‡å’Œå‡†ç¡®ç‡é€ æˆä¸€å®šæˆéƒ½çš„å½±å“ã€‚\n\nAUC(Area under Curve)ï¼Œè¡¨é¢ä¸Šæ„æ€æ˜¯æ›²çº¿ä¸‹è¾¹çš„é¢ç§¯ï¼Œè¿™ä¹ˆè¿™æ¡æ›²çº¿æ˜¯ä»€ä¹ˆï¼Ÿâ€”â€”ROCæ›²çº¿ï¼ˆreceiver operating characteristic curveï¼Œæ¥æ”¶è€…æ“ä½œç‰¹å¾æ›²çº¿ï¼‰ã€‚\n\næ¥ä¸‹æ¥åˆ†æä¸‹é¢è¿™å¼ å›¾ï¼ˆå›¾ç‰‡æ¥è‡ªç™¾åº¦ç™¾ç§‘ï¼‰ï¼š\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](https://img-blog.csdn.net/20180415015350726?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dhbWVyX2d5dA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)\n\nXè½´æ˜¯å‡é˜³ç‡ï¼šFP/(FP+TN)\nYè½´æ˜¯çœŸé˜³æ€§ï¼šTP(TP+FN)\nROCæ›²çº¿ç»™å‡ºçš„æ˜¯å½“é˜ˆå€¼(åˆ†ç±»å™¨å¿…é¡»æä¾›æ¯ä¸ªæ ·ä¾‹è¢«åˆ¤ä¸ºé˜³æ€§æˆ–è€…é˜´æ€§çš„å¯ä¿¡ç¨‹åº¦å€¼)å˜åŒ–æ—¶å‡é˜³ç‡å’ŒçœŸé˜³ç‡çš„å˜åŒ–æƒ…å†µï¼Œå·¦ä¸‹è§’çš„ç‚¹æ‰€å¯¹åº”çš„æ˜¯å°†æ‰€æœ‰æ ·ä¾‹åˆ¤ä¸ºåä¾‹çš„æƒ…å†µï¼Œè€Œå³ä¸Šè§’çš„ç‚¹å¯¹åº”çš„åˆ™æ˜¯å°†æ‰€æœ‰æ ·ä¾‹åˆ¤æ–­ä¸ºæ­£ä¾‹çš„æƒ…å†µã€‚\nROCæ›²çº¿ä¸ä½†å¯ä»¥ç”¨äºæ¯”è¾ƒåˆ†ç±»å™¨ï¼Œè¿˜å¯ä»¥åŸºäºæˆæœ¬æ•ˆç›Šåˆ†ææ¥åšå‡ºå†³ç­–ã€‚åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œæœ€ä½³çš„åˆ†ç±»å™¨åº”è¯¥å°½å¯èƒ½åœ°å¤„äºå·¦ä¸Šè§’ï¼Œè¿™å°±æ„å‘³ç€åˆ†ç±»å™¨åœ¨å‡é˜³ç‡å¾ˆä½çš„åŒæ—¶è·å¾—äº†å¾ˆé«˜çš„çœŸé˜³ç‡ã€‚\n\n# AUCè®¡ç®—\nä»¥ä¸‹éƒ¨åˆ†å¼•ç”¨ [ROCæ›²çº¿ä¸AUCè®¡ç®—][1] ä¸­çš„ä¸¾ä¾‹\n\n------------------\nå‡è®¾æœ‰6æ¬¡å±•ç¤ºè®°å½•ï¼Œæœ‰ä¸¤æ¬¡è¢«ç‚¹å‡»äº†ï¼Œå¾—åˆ°ä¸€ä¸ªå±•ç¤ºåºåˆ—ï¼ˆ1:1,2:0,3:1,4:0,5:0,6:0ï¼‰ï¼Œå‰é¢çš„è¡¨ç¤ºåºå·ï¼Œåé¢çš„è¡¨ç¤ºç‚¹å‡»ï¼ˆ1ï¼‰æˆ–æ²¡æœ‰ç‚¹å‡»ï¼ˆ0ï¼‰ã€‚\nç„¶ååœ¨è¿™6æ¬¡å±•ç¤ºçš„æ—¶å€™éƒ½é€šè¿‡modelç®—å‡ºäº†ç‚¹å‡»çš„æ¦‚ç‡åºåˆ—ã€‚\n\nä¸‹é¢çœ‹ä¸‰ç§æƒ…å†µã€‚\n\nä¸€ã€å¦‚æœæ¦‚ç‡çš„åºåˆ—æ˜¯ï¼ˆ1:0.9,2:0.7,3:0.8,4:0.6,5:0.5,6:0.4ï¼‰ã€‚ä¸åŸæ¥çš„åºåˆ—ä¸€èµ·ï¼Œå¾—åˆ°åºåˆ—ï¼ˆä»æ¦‚ç‡ä»é«˜åˆ°ä½æ’ï¼‰\n1 0.9\n1 0.8\n0 0.7\n0 0.6\n0 0.5\n0 0.4\nç»˜åˆ¶çš„æ­¥éª¤æ˜¯ï¼š\n1ï¼‰æŠŠæ¦‚ç‡åºåˆ—ä»é«˜åˆ°ä½æ’åºï¼Œå¾—åˆ°é¡ºåºï¼ˆ1:0.9,3:0.8,2:0.7,4:0.6,5:0.5,6:0.4ï¼‰ï¼›\n2ï¼‰ä»æ¦‚ç‡æœ€å¤§å¼€å§‹å–ä¸€ä¸ªç‚¹ä½œä¸ºæ­£ç±»ï¼Œå–åˆ°ç‚¹1ï¼Œè®¡ç®—å¾—åˆ°TPR=0.5ï¼ŒFPR=0.0ï¼›\n3ï¼‰ä»æ¦‚ç‡æœ€å¤§å¼€å§‹ï¼Œå†å–ä¸€ä¸ªç‚¹ä½œä¸ºæ­£ç±»ï¼Œå–åˆ°ç‚¹3ï¼Œè®¡ç®—å¾—åˆ°TPR=1.0ï¼ŒFPR=0.0ï¼›\n4ï¼‰å†ä»æœ€å¤§å¼€å§‹å–ä¸€ä¸ªç‚¹ä½œä¸ºæ­£ç±»ï¼Œå–åˆ°ç‚¹2ï¼Œè®¡ç®—å¾—åˆ°TPR=1.0ï¼ŒFPR=0.25;\n5ï¼‰ä»¥æ­¤ç±»æ¨ï¼Œå¾—åˆ°6å¯¹TPRå’ŒFPRã€‚\nç„¶åæŠŠè¿™6å¯¹æ•°æ®ç»„æˆ6ä¸ªç‚¹(0,0.5),(0,1.0),(0.25,1),(0.5,1),(0.75,1),(1.0,1.0)ã€‚\nè¿™6ä¸ªç‚¹åœ¨äºŒç»´åæ ‡ç³»ä¸­èƒ½ç»˜å‡ºæ¥ã€‚\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](https://img-blog.csdn.net/20180415024426171?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dhbWVyX2d5dA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)\nçœ‹çœ‹å›¾ä¸­ï¼Œé‚£ä¸ªå°±æ˜¯ROCæ›²çº¿ã€‚\n\näºŒã€å¦‚æœæ¦‚ç‡çš„åºåˆ—æ˜¯ï¼ˆ1:0.9,2:0.8,3:0.7,4:0.6,5:0.5,6:0.4ï¼‰ã€‚ä¸åŸæ¥çš„åºåˆ—ä¸€èµ·ï¼Œå¾—åˆ°åºåˆ—ï¼ˆä»æ¦‚ç‡ä»é«˜åˆ°ä½æ’ï¼‰\n1 0.9\n0 0.8\n1 0.7\n0 0.6\n0 0.5\n0 0.4\nç»˜åˆ¶çš„æ­¥éª¤æ˜¯ï¼š\n6ï¼‰æŠŠæ¦‚ç‡åºåˆ—ä»é«˜åˆ°ä½æ’åºï¼Œå¾—åˆ°é¡ºåºï¼ˆ1:0.9,2:0.8,3:0.7,4:0.6,5:0.5,6:0.4ï¼‰ï¼›\n7ï¼‰ä»æ¦‚ç‡æœ€å¤§å¼€å§‹å–ä¸€ä¸ªç‚¹ä½œä¸ºæ­£ç±»ï¼Œå–åˆ°ç‚¹1ï¼Œè®¡ç®—å¾—åˆ°TPR=0.5ï¼ŒFPR=0.0ï¼›\n8ï¼‰ä»æ¦‚ç‡æœ€å¤§å¼€å§‹ï¼Œå†å–ä¸€ä¸ªç‚¹ä½œä¸ºæ­£ç±»ï¼Œå–åˆ°ç‚¹2ï¼Œè®¡ç®—å¾—åˆ°TPR=0.5ï¼ŒFPR=0.25ï¼›\n9ï¼‰å†ä»æœ€å¤§å¼€å§‹å–ä¸€ä¸ªç‚¹ä½œä¸ºæ­£ç±»ï¼Œå–åˆ°ç‚¹3ï¼Œè®¡ç®—å¾—åˆ°TPR=1.0ï¼ŒFPR=0.25;\n10ï¼‰     ä»¥æ­¤ç±»æ¨ï¼Œå¾—åˆ°6å¯¹TPRå’ŒFPRã€‚\nç„¶åæŠŠè¿™6å¯¹æ•°æ®ç»„æˆ6ä¸ªç‚¹(0,0.5),(0.25,0.5),(0.25,1),(0.5,1),(0.75,1),(1.0,1.0)ã€‚\nè¿™6ä¸ªç‚¹åœ¨äºŒç»´åæ ‡ç³»ä¸­èƒ½ç»˜å‡ºæ¥ã€‚\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](https://img-blog.csdn.net/20180415024524722?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dhbWVyX2d5dA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)\nçœ‹çœ‹å›¾ä¸­ï¼Œé‚£ä¸ªå°±æ˜¯ROCæ›²çº¿ã€‚\n\nä¸‰ã€å¦‚æœæ¦‚ç‡çš„åºåˆ—æ˜¯ï¼ˆ1:0.4,2:0.6,3:0.5,4:0.7,5:0.8,6:0.9ï¼‰ã€‚ä¸åŸæ¥çš„åºåˆ—ä¸€èµ·ï¼Œå¾—åˆ°åºåˆ—ï¼ˆä»æ¦‚ç‡ä»é«˜åˆ°ä½æ’ï¼‰\n0 0.9\n0 0.8\n0 0.7\n0 0.6\n1 0.5\n1 0.4\nç»˜åˆ¶çš„æ­¥éª¤æ˜¯ï¼š\n11ï¼‰æŠŠæ¦‚ç‡åºåˆ—ä»é«˜åˆ°ä½æ’åºï¼Œå¾—åˆ°é¡ºåºï¼ˆ1:0.4,2:0.6,3:0.5,4:0.7,5:0.8,6:0.9ï¼‰ï¼›\n12ï¼‰ä»æ¦‚ç‡æœ€å¤§å¼€å§‹å–ä¸€ä¸ªç‚¹ä½œä¸ºæ­£ç±»ï¼Œå–åˆ°ç‚¹6ï¼Œè®¡ç®—å¾—åˆ°TPR=0.0ï¼ŒFPR=0.25ï¼›\n13ï¼‰ä»æ¦‚ç‡æœ€å¤§å¼€å§‹ï¼Œå†å–ä¸€ä¸ªç‚¹ä½œä¸ºæ­£ç±»ï¼Œå–åˆ°ç‚¹5ï¼Œè®¡ç®—å¾—åˆ°TPR=0.0ï¼ŒFPR=0.5ï¼›\n14ï¼‰å†ä»æœ€å¤§å¼€å§‹å–ä¸€ä¸ªç‚¹ä½œä¸ºæ­£ç±»ï¼Œå–åˆ°ç‚¹4ï¼Œè®¡ç®—å¾—åˆ°TPR=0.0ï¼ŒFPR=0.75;\n15ï¼‰ä»¥æ­¤ç±»æ¨ï¼Œå¾—åˆ°6å¯¹TPRå’ŒFPRã€‚\nç„¶åæŠŠè¿™6å¯¹æ•°æ®ç»„æˆ6ä¸ªç‚¹(0.25,0.0),(0.5,0.0),(0.75,0.0),(1.0,0.0),(1.0,0.5),(1.0,1.0)ã€‚\nè¿™6ä¸ªç‚¹åœ¨äºŒç»´åæ ‡ç³»ä¸­èƒ½ç»˜å‡ºæ¥ã€‚\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](https://img-blog.csdn.net/20180415024654878?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dhbWVyX2d5dA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)\nçœ‹çœ‹å›¾ä¸­ï¼Œé‚£ä¸ªå°±æ˜¯ROCæ›²çº¿\n\næ„ä¹‰ï¼š\nå¦‚ä¸Šå›¾çš„ä¾‹å­ï¼Œæ€»å…±6ä¸ªç‚¹ï¼Œ2ä¸ªæ­£æ ·æœ¬ï¼Œ4ä¸ªè´Ÿæ ·æœ¬ï¼Œå–ä¸€ä¸ªæ­£æ ·æœ¬å’Œä¸€ä¸ªè´Ÿæ ·æœ¬çš„æƒ…å†µæ€»å…±æœ‰8ç§ã€‚\n\nä¸Šé¢çš„ç¬¬ä¸€ç§æƒ…å†µï¼Œä»ä¸Šå¾€ä¸‹å–ï¼Œæ— è®ºæ€ä¹ˆå–ï¼Œæ­£æ ·æœ¬çš„æ¦‚ç‡æ€»åœ¨è´Ÿæ ·æœ¬ä¹‹ä¸Šï¼Œæ‰€ä»¥åˆ†å¯¹çš„æ¦‚ç‡ä¸º1ï¼ŒAUC=1ã€‚å†çœ‹é‚£ä¸ªROCæ›²çº¿ï¼Œå®ƒçš„ç§¯åˆ†æ˜¯ä»€ä¹ˆï¼Ÿä¹Ÿæ˜¯1ï¼ŒROCæ›²çº¿çš„ç§¯åˆ†ä¸AUCç›¸ç­‰ã€‚\n\nä¸Šé¢ç¬¬äºŒç§æƒ…å†µï¼Œå¦‚æœå–åˆ°äº†æ ·æœ¬2å’Œ3ï¼Œé‚£å°±åˆ†é”™äº†ï¼Œå…¶ä»–æƒ…å†µéƒ½åˆ†å¯¹äº†ï¼›æ‰€ä»¥åˆ†å¯¹çš„æ¦‚ç‡æ˜¯0.875ï¼ŒAUC=0.875ã€‚å†çœ‹é‚£ä¸ªROCæ›²çº¿ï¼Œå®ƒçš„ç§¯åˆ†ä¹Ÿæ˜¯0.875ï¼ŒROCæ›²çº¿çš„ç§¯åˆ†ä¸AUCç›¸ç­‰ã€‚\n\nä¸Šé¢çš„ç¬¬ä¸‰ç§æƒ…å†µï¼Œæ— è®ºæ€ä¹ˆå–ï¼Œéƒ½æ˜¯åˆ†é”™çš„ï¼Œæ‰€ä»¥åˆ†å¯¹çš„æ¦‚ç‡æ˜¯0ï¼ŒAUC=0.0ã€‚å†çœ‹ROCæ›²çº¿ï¼Œå®ƒçš„ç§¯åˆ†ä¹Ÿæ˜¯0.0ï¼ŒROCæ›²çº¿çš„ç§¯åˆ†ä¸AUCç›¸ç­‰ã€‚\n\nå¾ˆç‰›å§ï¼Œå…¶å®AUCçš„æ„æ€æ˜¯â€”â€”Area Under roc Curveï¼Œå°±æ˜¯ROCæ›²çº¿çš„ç§¯åˆ†ï¼Œä¹Ÿæ˜¯ROCæ›²çº¿ä¸‹é¢çš„é¢ç§¯ã€‚\n\nç»˜åˆ¶ROCæ›²çº¿çš„æ„ä¹‰å¾ˆæ˜æ˜¾ï¼Œä¸æ–­åœ°æŠŠå¯èƒ½åˆ†é”™çš„æƒ…å†µæ‰£é™¤æ‰ï¼Œä»æ¦‚ç‡æœ€é«˜å¾€ä¸‹å–çš„ç‚¹ï¼Œæ¯æœ‰ä¸€ä¸ªæ˜¯è´Ÿæ ·æœ¬ï¼Œå°±ä¼šå¯¼è‡´åˆ†é”™æ’åœ¨å®ƒä¸‹é¢çš„æ‰€æœ‰æ­£æ ·æœ¬ï¼Œæ‰€ä»¥è¦æŠŠå®ƒä¸‹é¢çš„æ­£æ ·æœ¬æ•°æ‰£é™¤æ‰ï¼ˆ1-TPRï¼Œå‰©ä¸‹çš„æ­£æ ·æœ¬çš„æ¯”ä¾‹ï¼‰ã€‚æ€»çš„ROCæ›²çº¿ç»˜åˆ¶å‡ºæ¥äº†ï¼ŒAUCå°±å®šäº†ï¼Œåˆ†å¯¹çš„æ¦‚ç‡ä¹Ÿèƒ½æ±‚å‡ºæ¥äº†ã€‚\n\n\n  [1]: https://blog.csdn.net/guohecang/article/details/52858019\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"æ¢¯åº¦æå‡å†³ç­–æ ‘-GBDTï¼ˆGradient Boosting Decision Treeï¼‰","url":"/2018/04/12/RecSys/Sparkä¸æ¨èç³»ç»Ÿ/æ¢¯åº¦æå‡å†³ç­–æ ‘-GBDTï¼ˆGradient Boosting Decision Treeï¼‰/","content":"\n> ç ”ç©¶GBDTçš„èƒŒæ™¯æ˜¯ä¸šåŠ¡ä¸­ä½¿ç”¨åˆ°äº†è¯¥æ¨¡å‹ï¼Œç”¨äºåšæ¨èåœºæ™¯ï¼Œå½“ç„¶è¿™é‡Œå°±å¼•å‡ºäº†GBDTçš„ä¸€ä¸ªåº”ç”¨åœºæ™¯-å›å½’ï¼Œä»–çš„å¦å¤–ä¸€ä¸ªåº”ç”¨åœºæ™¯ä¾¿æ˜¯åˆ†ç±»ï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å»å­¦ä¹ å’Œç ”ç©¶GBDTçš„ç›¸å…³çŸ¥è¯†ï¼Œå½“ç„¶æˆ‘ä¹Ÿæ˜¯å­¦ä¹ è€…ï¼Œåªæ˜¯æŠŠæˆ‘ç†è§£åˆ°çš„æ•´ç†å‡ºæ¥ã€‚æœ¬æ–‡å‚è€ƒäº†ç½‘ä¸Šå„è·¯å¤§ç¥çš„ç¬”è®°ï¼Œåœ¨æ­¤æ„Ÿè°¢ï¼\n\n<!--More-->\n# Boosting&Bagging\né›†æˆå­¦ä¹ æ–¹æ³•ä¸æ˜¯å•ç‹¬çš„ä¸€ä¸ªæœºå™¨å­¦ä¹ ç®—æ³•ï¼Œè€Œæ˜¯é€šè¿‡æ„å»ºå¤šä¸ªæœºå™¨å­¦ä¹ ç®—æ³•æ¥è¾¾åˆ°ä¸€ä¸ªå¼ºå­¦ä¹ å™¨ã€‚é›†æˆå­¦ä¹ å¯ä»¥ç”¨æ¥è¿›è¡Œåˆ†ç±»ï¼Œå›å½’ï¼Œç‰¹å¾é€‰å–å’Œå¼‚å¸¸ç‚¹æ£€æµ‹ç­‰ã€‚éšæœºæ£®æ—ç®—æ³•å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„é›†æˆå­¦ä¹ æ–¹æ³•ï¼Œç®€å•çš„è¯´å°±æ˜¯ç”±ä¸€ä¸ªä¸ªå¼±åˆ†ç±»å™¨ï¼ˆå†³ç­–æ ‘ï¼‰æ¥æ„å»ºä¸€ä¸ªå¼ºåˆ†ç±»å™¨ï¼Œä»è€Œè¾¾åˆ°æ¯”è¾ƒå¥½çš„åˆ†ç±»æ•ˆæœã€‚\n\né‚£ä¹ˆå¦‚ä½•å¾—åˆ°å•ä¸ªçš„å­¦ä¹ å™¨ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ–¹æ³•ï¼š\n\n- åŒè´¨ï¼ˆå¯¹äºä¸€ä¸ªå¼ºå­¦ä¹ å™¨è€Œè¨€ï¼Œæ‰€ç”¨çš„å•ä¸ªå¼±å­¦ä¹ å™¨éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ¯”å¦‚è¯´ç”¨çš„éƒ½æ˜¯å†³ç­–æ ‘ï¼Œæˆ–è€…éƒ½æ˜¯ç¥ç»ç½‘ç»œï¼‰\n- å¼‚è´¨ï¼ˆç›¸å¯¹äºåŒè´¨è€Œè¨€ï¼Œå¯¹äºä¸€ä¸ªå¼ºå­¦ä¹ å™¨è€Œè¨€ï¼Œæ‰€ç”¨çš„å•ä¸ªå¼±å­¦ä¹ å™¨ä¸å…¨æ˜¯ä¸€æ ·çš„ï¼Œæ¯”å¦‚è¯´ç”¨çš„å†³ç­–æ ‘å’Œç¥ç»ç½‘ç»œçš„ç»„åˆï¼‰\n\nç›¸å¯¹å¼‚è´¨è€Œè¨€ï¼ŒåŒè´¨å­¦ä¹ æœŸç”¨çš„æœ€ä¸ºå¹¿æ³›ï¼Œæˆ‘ä»¬å¹³æ—¶æ‰€è®¨è®ºçš„é›†æˆå­¦ä¹ æ–¹æ³•æŒ‡çš„å°±æ˜¯åŒè´¨ä¸ªä½“å­¦ä¹ å™¨ï¼ŒåŒè´¨ä¸ªä½“å­¦ä¹ å™¨æŒ‰ç…§ä¸ªä½“å­¦ä¹ å™¨ä¹‹é—´çš„ä¾èµ–å…³ç³»åˆ†ä¸ºä¸²è¡Œï¼ˆæœ‰å¼ºä¾èµ–å…³ç³»ï¼‰å’Œå¹¶è¡Œï¼ˆä¸å­˜åœ¨å…³ç³»æˆ–è€…æœ‰å¾ˆå¼±çš„ä¾èµ–å…³ç³»ï¼‰ï¼Œè€Œåœ¨ä¸²è¡Œå…³ç³»ä¸­æœ‰ä»£è¡¨æ€§çš„å°±æ˜¯boostingç³»åˆ—ç®—æ³•ï¼Œå¹¶è¡Œå…³ç³»ä¸­å…·æœ‰ä»£è¡¨æ€§çš„å°±æ˜¯baggingå’Œéšæœºæ£®æ—ï¼ˆrandom forestï¼‰\n\nBoostingæµç¨‹å›¾\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](https://img-blog.csdn.net/20180410010257504?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dhbWVyX2d5dA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)\n\nBaggingæµç¨‹å›¾ \n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](https://img-blog.csdn.net/20180410010305827?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dhbWVyX2d5dA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)\n\nä¸Šè¾¹ç®€å•çš„ä»‹ç»äº†é›†æˆå­¦ä¹ æ–¹æ³•å’Œboosting&baggingçš„åŒºåˆ«ï¼Œé‚£ä¹ˆå¯¹äºå•ä¸ªå­¦ä¹ å™¨é‡‡ç”¨ä½•ç§ç­–ç•¥æ‰èƒ½å¾—åˆ°ä¸€ä¸ªå¼ºå­¦ä¹ å™¨å‘¢ï¼Ÿ\n\n- å¹³å‡æ³•ï¼ˆåŠ æƒï¼ˆä¸ªä½“å­¦ä¹ å™¨æ€§èƒ½ç›¸å·®è¾ƒå¤§ï¼‰ï¼Œç®€å•ï¼ˆæ€§èƒ½ç›¸è¿‘ï¼‰ï¼‰\n- æŠ•ç¥¨æ³•ï¼ˆç»å¯¹å¤šæ•°ï¼ˆè¶…è¿‡åŠæ•°æ ‡è®°ã€‚å¦åˆ™æ‹’ç»é¢„æµ‹ï¼‰ï¼Œç›¸å¯¹å¤šæ•°ï¼ŒåŠ æƒæŠ•ç¥¨ï¼‰\n- å­¦ä¹ æ³•ï¼ˆé€šè¿‡å¦ä¸€ä¸ªå­¦ä¹ å™¨æ¥è¿›è¡Œç»“åˆï¼ŒStackingç®—æ³•ï¼‰\n\n> Stackingç®—æ³•ï¼š\nåŸºæœ¬æ€æƒ³ï¼šå…ˆä»åˆå§‹æ•°æ®é›†è®­ç»ƒå‡ºåˆçº§å­¦ä¹ å™¨ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªæ–°æ•°æ®é›†ç”¨äºè®­ç»ƒæ¬¡çº§å­¦ä¹ å™¨ã€‚åœ¨è¿™ä¸ªæ–°æ•°æ®é›†ä¸­ï¼Œåˆçº§å­¦ä¹ å™¨çš„è¾“å‡ºè¢«å½“ä½œæ ·ä¾‹è¾“å…¥ç‰¹å¾ï¼Œè€Œå‡ºäº‹æ ·æœ¬çš„æ ‡è®°ä»è¢«å½“ä½œæ ·ä¾‹æ ‡è®°ã€‚\n<br>\næ³¨æ„ç‚¹ï¼šè‹¥ç›´æ¥ç”¨åˆçº§å­¦ä¹ å™¨çš„è®­ç»ƒé›†æ¥äº§ç”Ÿæ¬¡çº§è®­ç»ƒé›†ï¼Œåˆ™è¿‡æ‹Ÿåˆé£é™©ä¼šæ¯”è¾ƒå¤§ï¼›ä¸€èˆ¬ä¼šé€šè¿‡äº¤å‰éªŒè¯ç­‰æ–¹å¼ï¼Œç”¨è®­ç»ƒåˆçº§å­¦ä¹ å™¨æœªä½¿ç”¨çš„æ ·æœ¬æ¥äº§ç”Ÿæ¬¡çº§å­¦ä¹ å™¨çš„è®­ç»ƒæ ·æœ¬ã€‚\n\n--------\n# Gradient Boosting\n\nGradient Boostingæ˜¯ä¸€ç§Boostingçš„æ–¹æ³•ï¼Œå®ƒä¸»è¦çš„æ€æƒ³æ˜¯ï¼Œæ¯ä¸€æ¬¡å»ºç«‹æ¨¡å‹æ˜¯åœ¨ä¹‹å‰å»ºç«‹æ¨¡å‹æŸå¤±å‡½æ•°çš„æ¢¯åº¦ä¸‹é™æ–¹å‘ã€‚æŸå¤±å‡½æ•°æ˜¯è¯„ä»·æ¨¡å‹æ€§èƒ½ï¼ˆä¸€èˆ¬ä¸ºæ‹Ÿåˆç¨‹åº¦+æ­£åˆ™é¡¹ï¼‰ï¼Œè®¤ä¸ºæŸå¤±å‡½æ•°è¶Šå°ï¼Œæ€§èƒ½è¶Šå¥½ã€‚è€Œè®©æŸå¤±å‡½æ•°æŒç»­ä¸‹é™ï¼Œå°±èƒ½ä½¿å¾—æ¨¡å‹ä¸æ–­æ”¹æ€§æå‡æ€§èƒ½ï¼Œå…¶æœ€å¥½çš„æ–¹æ³•å°±æ˜¯ä½¿æŸå¤±å‡½æ•°æ²¿ç€æ¢¯åº¦æ–¹å‘ä¸‹é™ï¼ˆè®²é“ç†æ¢¯åº¦æ–¹å‘ä¸Šä¸‹é™æœ€å¿«ï¼‰ã€‚\n\nGradient Boostæ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œé‡Œé¢å¯ä»¥å¥—å…¥å¾ˆå¤šä¸åŒçš„ç®—æ³•ã€‚\n\n# åˆ†ç±»æ ‘&å›å½’æ ‘&åˆ†ç±»å›å½’æ ‘\n## åˆ†ç±»æ ‘\nä¸‰ç§æ¯”è¾ƒå¸¸è§çš„åˆ†ç±»å†³ç­–æ ‘åˆ†æ”¯åˆ’åˆ†æ–¹å¼åŒ…æ‹¬ï¼šID3, C4.5, CARTã€‚\n> ä»¥C4.5åˆ†ç±»æ ‘ä¸ºä¾‹ï¼ŒC4.5åˆ†ç±»æ ‘åœ¨æ¯æ¬¡åˆ†ææ—¶ï¼Œæ˜¯ç©·ä¸¾æ¯ä¸€ä¸ªfeatureçš„æ¯ä¸€ä¸ªé˜ˆå€¼ï¼Œæ‰¾åˆ°ä½¿å¾—æŒ‰ç…§feature<=é˜ˆå€¼ï¼Œå’Œfeature>é˜ˆå€¼åˆ†æˆçš„ä¸¤ä¸ªåˆ†æçš„ç†µæœ€å¤§çš„é˜ˆå€¼(ç†µæœ€å¤§çš„æ¦‚å¿µå¯ç†è§£æˆå°½å¯èƒ½æ¯ä¸ªåˆ†æçš„ç”·å¥³æ¯”ä¾‹éƒ½è¿œç¦»1:1)ï¼ŒæŒ‰ç…§è¯¥æ ‡å‡†åˆ†æå¾—åˆ°ä¸¤ä¸ªæ–°èŠ‚ç‚¹ï¼Œç”¨åŒæ ·æ–¹æ³•ç»§ç»­åˆ†æç›´åˆ°æ‰€æœ‰äººéƒ½è¢«åˆ†å…¥æ€§åˆ«å”¯ä¸€çš„å¶å­èŠ‚ç‚¹ï¼Œæˆ–è¾¾åˆ°é¢„è®¾çš„ç»ˆæ­¢æ¡ä»¶ï¼Œè‹¥æœ€ç»ˆå¶å­èŠ‚ç‚¹ä¸­çš„æ€§åˆ«ä¸å”¯ä¸€ï¼Œåˆ™ä»¥å¤šæ•°äººçš„æ€§åˆ«ä½œä¸ºè¯¥å¶å­èŠ‚ç‚¹çš„æ€§åˆ«ã€‚\n\næ€»ç»“ï¼šåˆ†ç±»æ ‘ä½¿ç”¨ä¿¡æ¯å¢ç›Šæˆ–å¢ç›Šæ¯”ç‡æ¥åˆ’åˆ†èŠ‚ç‚¹ï¼›æ¯ä¸ªèŠ‚ç‚¹æ ·æœ¬çš„ç±»åˆ«æƒ…å†µæŠ•ç¥¨å†³å®šæµ‹è¯•æ ·æœ¬çš„ç±»åˆ«ã€‚\n\n## å›å½’æ ‘\n> å›å½’æ ‘æ€»ä½“æµç¨‹ä¹Ÿæ˜¯ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºï¼Œå›å½’æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ï¼ˆä¸ä¸€å®šæ˜¯å¶å­èŠ‚ç‚¹ï¼‰éƒ½ä¼šå¾—ä¸€ä¸ªé¢„æµ‹å€¼ï¼Œä»¥å¹´é¾„ä¸ºä¾‹ï¼Œè¯¥é¢„æµ‹å€¼ç­‰äºå±äºè¿™ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰äººå¹´é¾„çš„å¹³å‡å€¼ã€‚åˆ†ææ—¶ç©·ä¸¾æ¯ä¸€ä¸ªfeatureçš„æ¯ä¸ªé˜ˆå€¼æ‰¾æœ€å¥½çš„åˆ†å‰²ç‚¹ï¼Œä½†è¡¡é‡æœ€å¥½çš„æ ‡å‡†ä¸å†æ˜¯æœ€å¤§ç†µï¼Œè€Œæ˜¯æœ€å°åŒ–å‡æ–¹å·®å³(æ¯ä¸ªäººçš„å¹´é¾„-é¢„æµ‹å¹´é¾„)^2 çš„æ€»å’Œ / Nã€‚ä¹Ÿå°±æ˜¯è¢«é¢„æµ‹å‡ºé”™çš„äººæ•°è¶Šå¤šï¼Œé”™çš„è¶Šç¦»è°±ï¼Œå‡æ–¹å·®å°±è¶Šå¤§ï¼Œé€šè¿‡æœ€å°åŒ–å‡æ–¹å·®èƒ½å¤Ÿæ‰¾åˆ°æœ€å¯é çš„åˆ†æä¾æ®ã€‚åˆ†æç›´åˆ°æ¯ä¸ªå¶å­èŠ‚ç‚¹ä¸Šäººçš„å¹´é¾„éƒ½å”¯ä¸€æˆ–è€…è¾¾åˆ°é¢„è®¾çš„ç»ˆæ­¢æ¡ä»¶(å¦‚å¶å­ä¸ªæ•°ä¸Šé™)ï¼Œè‹¥æœ€ç»ˆå¶å­èŠ‚ç‚¹ä¸Šäººçš„å¹´é¾„ä¸å”¯ä¸€ï¼Œåˆ™ä»¥è¯¥èŠ‚ç‚¹ä¸Šæ‰€æœ‰äººçš„å¹³å‡å¹´é¾„åšä¸ºè¯¥å¶å­èŠ‚ç‚¹çš„é¢„æµ‹å¹´é¾„ã€‚\n\næ€»ç»“ï¼šå›å½’æ ‘ä½¿ç”¨æœ€å¤§å‡æ–¹å·®åˆ’åˆ†èŠ‚ç‚¹ï¼›æ¯ä¸ªèŠ‚ç‚¹æ ·æœ¬çš„å‡å€¼ä½œä¸ºæµ‹è¯•æ ·æœ¬çš„å›å½’é¢„æµ‹å€¼ã€‚\n\n## åˆ†ç±»å›å½’æ ‘\n> Classification And Regression Treesï¼Œå³æ—¢èƒ½åšåˆ†ç±»ä»»åŠ¡åˆèƒ½åšå›å½’ä»»åŠ¡ï¼ŒCARTä¹Ÿæ˜¯å†³ç­–æ ‘çš„ä¸€ç§ï¼Œæ˜¯ä¸€ç§äºŒåˆ†å†³ç­–æ ‘ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ç”¨æ¥åšå›å½’ï¼ŒCARTåŒå†³ç­–æ ‘ç±»ä¼¼ï¼Œä¸åŒäº ID3 ä¸ C4.5 ,åˆ†ç±»æ ‘é‡‡ç”¨åŸºå°¼æŒ‡æ•°æ¥é€‰æ‹©æœ€ä¼˜çš„åˆ‡åˆ†ç‰¹å¾ï¼Œè€Œä¸”æ¯æ¬¡éƒ½æ˜¯äºŒåˆ†ã€‚è‡³äºæ€ä¹ˆåˆ©ç”¨åŸºå°¼ç³»æ•°è¿›è¡Œæœ€ä¼˜çš„ç‰¹å¾åˆ‡åˆ†ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« çš„è¯¦ç»†ä»‹ç» [å†³ç­–æ ‘ä¹‹ CART][1]\n\n# æŸå¤±å‡½æ•°\næœºå™¨å­¦ä¹ ä¸­çš„æŸå¤±å‡½æ•°æœ‰å¾ˆå¤šï¼Œå¸¸è§çš„æœ‰\n\n- 0-1æŸå¤±å‡½æ•°ï¼ˆ0-1 loss functionï¼‰\n$$\nL(Y,f(X))=\\left\\{ \\begin{aligned}&1,\\quad Y\\ne f(X)\\\\& 0,\\quad Y=f(X) \\end{aligned} \\right.\n$$\n\n> è¯¥æŸå¤±å‡½æ•°çš„æ„ä¹‰å°±æ˜¯ï¼Œå½“é¢„æµ‹é”™è¯¯æ—¶ï¼ŒæŸå¤±å‡½æ•°å€¼ä¸º1ï¼Œé¢„æµ‹æ­£ç¡®æ—¶ï¼ŒæŸå¤±å‡½æ•°å€¼ä¸º0ã€‚è¯¥æŸå¤±å‡½æ•°ä¸è€ƒè™‘é¢„æµ‹å€¼å’ŒçœŸå®å€¼çš„è¯¯å·®ç¨‹åº¦ï¼Œä¹Ÿå°±æ˜¯åªè¦é¢„æµ‹é”™è¯¯ï¼Œé¢„æµ‹é”™è¯¯å·®ä¸€ç‚¹å’Œå·®å¾ˆå¤šæ˜¯ä¸€æ ·çš„ã€‚\n\n- å¹³æ–¹æŸå¤±å‡½æ•°ï¼ˆquadratic loss functionï¼‰\n$$\nL(Y,f(X))=(Y-f(X))^2\n$$\n> å–é¢„æµ‹å·®è·çš„å¹³æ–¹\n\n- ç»å¯¹å€¼æŸå¤±å‡½æ•°ï¼ˆabsolute loss functionï¼‰\n$$\nL(Y,f(X))=|Y-f(X)|\n$$\n> å–é¢„æµ‹å€¼ä¸çœŸå®å€¼çš„å·®å€¼ç»å¯¹å€¼ï¼Œå·®è·ä¸ä¼šè¢«å¹³æ–¹æ”¾å¤§\n\n- å¯¹æ•°æŸå¤±å‡½æ•°ï¼ˆlogarithmic loss functionï¼‰\n$$\nL(Y,P(Y|X))=-logP(Y|X)\n$$\n> è¯¥æŸå¤±å‡½æ•°ç”¨åˆ°äº†æå¤§ä¼¼ç„¶ä¼°è®¡çš„æ€æƒ³ã€‚P(Y|X)é€šä¿—çš„è§£é‡Šå°±æ˜¯ï¼šåœ¨å½“å‰æ¨¡å‹çš„åŸºç¡€ä¸Šï¼Œå¯¹äºæ ·æœ¬Xï¼Œå…¶é¢„æµ‹å€¼ä¸ºYï¼Œä¹Ÿå°±æ˜¯é¢„æµ‹æ­£ç¡®çš„æ¦‚ç‡ã€‚ç”±äºæ¦‚ç‡ä¹‹é—´çš„åŒæ—¶æ»¡è¶³éœ€è¦ä½¿ç”¨ä¹˜æ³•ï¼Œä¸ºäº†å°†å…¶è½¬åŒ–ä¸ºåŠ æ³•ï¼Œæˆ‘ä»¬å°†å…¶å–å¯¹æ•°ã€‚æœ€åç”±äºæ˜¯æŸå¤±å‡½æ•°ï¼Œæ‰€ä»¥é¢„æµ‹æ­£ç¡®çš„æ¦‚ç‡è¶Šé«˜ï¼Œå…¶æŸå¤±å€¼åº”è¯¥æ˜¯è¶Šå°ï¼Œå› æ­¤å†åŠ ä¸ªè´Ÿå·å–ä¸ªåã€‚\n\n- å…¨å±€æŸå¤±å‡½æ•° \n> ä¸Šé¢çš„æŸå¤±å‡½æ•°ä»…ä»…æ˜¯å¯¹äºä¸€ä¸ªæ ·æœ¬æ¥è¯´çš„ã€‚è€Œæˆ‘ä»¬çš„ä¼˜åŒ–ç›®æ ‡å‡½æ•°åº”å½“æ˜¯ä½¿å…¨å±€æŸå¤±å‡½æ•°æœ€å°ã€‚å› æ­¤ï¼Œå…¨å±€æŸå¤±å‡½æ•°å¾€å¾€æ˜¯æ¯ä¸ªæ ·æœ¬çš„æŸå¤±å‡½æ•°ä¹‹å’Œï¼Œå³ï¼š \n$$\nJ(w,b)=\\frac{1}{m} \\sum_{i=1}^m L(Y,f(X))\n$$\nå¯¹äºå¹³æ–¹æŸå¤±å‡½æ•°ï¼Œä¸ºäº†æ±‚å¯¼æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‰é¢ä¹˜ä¸Šä¸€ä¸ª1/2ï¼Œå’Œå¹³æ–¹é¡¹æ±‚å¯¼åçš„2æŠµæ¶ˆï¼Œå³ï¼š \n$$\nJ(w,b)=\\frac{1}{2m} \\sum_{i=1}^m L(Y,f(X))\n$$\n- é€»è¾‘å›å½’ä¸­çš„æŸå¤±å‡½æ•°\n> åœ¨é€»è¾‘å›å½’ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯å¯¹æ•°æŸå¤±å‡½æ•°ã€‚ç”±äºé€»è¾‘å›å½’æ˜¯æœä»ä¼¯åŠªåˆ©åˆ†å¸ƒ(0-1åˆ†å¸ƒ)çš„ï¼Œå¹¶ä¸”é€»è¾‘å›å½’è¿”å›çš„sigmoidå€¼æ˜¯å¤„äº(0,1)åŒºé—´ï¼Œä¸ä¼šå–åˆ°0,1ä¸¤ä¸ªç«¯ç‚¹ã€‚å› æ­¤æˆ‘ä»¬èƒ½å¤Ÿå°†å…¶æŸå¤±å‡½æ•°å†™æˆä»¥ä¸‹å½¢å¼ï¼š \n$$\nL(\\hat y,y)=-(y\\log{\\hat y}+(1-y)\\log(1-\\hat y))\n$$\n\n# GBDTæ€æƒ³\n> ä»¥ä¸‹éƒ¨åˆ†å­¦ä¹ äº [GBDTç®—æ³•åŸç†æ·±å…¥è§£æ][2] ï¼ŒåŸæ–‡ä½œè€…è®²çš„å¾ˆå¥½ï¼Œç…§æ¬è¿‡æ¥ï¼Œæ¯•ç«Ÿç¬”è€…ä¸æ˜¯æ¨å¯¼æ•°å­¦å…¬å¼çš„æ–™ï¼Œå“ˆå“ˆ\n\nGBDT å¯ä»¥çœ‹æˆæ˜¯ç”±Kæ£µæ ‘ç»„æˆçš„åŠ æ³•æ¨¡å‹ï¼š\n$$\n\\hat{y}_i=\\sum_{k=1}^K f_k(x_i), f_k \\in F \\tag 0\n$$\n\nå…¶ä¸­Fä¸ºæ‰€æœ‰æ ‘ç»„æˆçš„å‡½æ•°ç©ºé—´ï¼Œä»¥å›å½’ä»»åŠ¡ä¸ºä¾‹ï¼Œå›å½’æ ‘å¯ä»¥çœ‹ä½œä¸ºä¸€ä¸ªæŠŠç‰¹å¾å‘é‡æ˜ å°„ä¸ºæŸä¸ªscoreçš„å‡½æ•°ã€‚è¯¥æ¨¡å‹çš„å‚æ•°ä¸ºï¼š$\\Theta=\\{f_1,f_2, \\cdots, f_K \\}$ã€‚äºä¸€èˆ¬çš„æœºå™¨å­¦ä¹ ç®—æ³•ä¸åŒçš„æ˜¯ï¼ŒåŠ æ³•æ¨¡å‹ä¸æ˜¯å­¦ä¹ dç»´ç©ºé—´ä¸­çš„æƒé‡ï¼Œè€Œæ˜¯ç›´æ¥å­¦ä¹ å‡½æ•°ï¼ˆå†³ç­–æ ‘ï¼‰é›†åˆ\n\nä¸Šè¿°åŠ æ³•æ¨¡å‹çš„ç›®æ ‡å‡½æ•°å®šä¹‰ä¸ºï¼š$Obj=\\sum_{i=1}^n l(y_i, \\hat{y}_i) + \\sum_{k=1}^K \\Omega(f_k)$ï¼Œå…¶ä¸­$\\Omega$è¡¨ç¤ºå†³ç­–æ ‘çš„å¤æ‚åº¦ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•å®šä¹‰æ ‘çš„å¤æ‚åº¦å‘¢ï¼Ÿæ¯”å¦‚ï¼Œå¯ä»¥è€ƒè™‘æ ‘çš„èŠ‚ç‚¹æ•°é‡ã€æ ‘çš„æ·±åº¦æˆ–è€…å¶å­èŠ‚ç‚¹æ‰€å¯¹åº”çš„åˆ†æ•°çš„L2èŒƒæ•°ç­‰ç­‰ã€‚\n\nå¦‚ä½•æ¥å­¦ä¹ åŠ æ³•æ¨¡å‹å‘¢ï¼Ÿ\n\nè§£è¿™ä¸€ä¼˜åŒ–é—®é¢˜ï¼Œå¯ä»¥ç”¨å‰å‘åˆ†å¸ƒç®—æ³•ï¼ˆforward stagewise algorithmï¼‰ã€‚å› ä¸ºå­¦ä¹ çš„æ˜¯åŠ æ³•æ¨¡å‹ï¼Œå¦‚æœèƒ½å¤Ÿä»å‰å¾€åï¼Œæ¯ä¸€æ­¥åªå­¦ä¹ ä¸€ä¸ªåŸºå‡½æ•°åŠå…¶ç³»æ•°ï¼ˆç»“æ„ï¼‰ï¼Œé€æ­¥é€¼è¿‘ä¼˜åŒ–ç›®æ ‡å‡½æ•°ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç®€åŒ–å¤æ‚åº¦ã€‚è¿™ä¸€å­¦ä¹ è¿‡ç¨‹ç§°ä¹‹ä¸ºBoostingã€‚å…·ä½“åœ°ï¼Œæˆ‘ä»¬ä»ä¸€ä¸ªå¸¸é‡é¢„æµ‹å¼€å§‹ï¼Œæ¯æ¬¡å­¦ä¹ ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š \n$$\n\\begin{split}\n\\hat{y}_i^0 &= 0 \\\\\n\\hat{y}_i^1 &= f_1(x_i) = \\hat{y}_i^0 + f_1(x_i) \\\\\n\\hat{y}_i^2 &= f_1(x_i) + f_2(x_i) = \\hat{y}_i^1 + f_2(x_i) \\\\\n& \\cdots \\\\\n\\hat{y}_i^t &= \\sum_{k=1}^t f_k(x_i) = \\hat{y}_i^{t-1} + f_t(x_i) \\\\\n\\end{split}\n$$\n\né‚£ä¹ˆï¼Œåœ¨æ¯ä¸€æ­¥å¦‚ä½•å†³å®šå“ªä¸€ä¸ªå‡½æ•°$f$è¢«åŠ å…¥å‘¢ï¼ŸæŒ‡å¯¼åŸåˆ™è¿˜æ˜¯æœ€å°åŒ–ç›®æ ‡å‡½æ•°ã€‚ \nåœ¨ç¬¬$t$æ­¥ï¼Œæ¨¡å‹å¯¹$x_i$çš„é¢„æµ‹ä¸ºï¼š$\\hat{y}_i^t= \\hat{y}_i^{t-1} + f_t(x_i)$ï¼Œå…¶ä¸­$f_t(x_i)$ä¸ºè¿™ä¸€è½®æˆ‘ä»¬è¦å­¦ä¹ çš„å‡½æ•°ï¼ˆå†³ç­–æ ‘ï¼‰ã€‚è¿™ä¸ªæ—¶å€™ç›®æ ‡å‡½æ•°å¯ä»¥å†™ä¸ºï¼š\n$$\n\\begin{split}\nObj^{(t)} &= \\sum_{i=1}^nl(y_i, \\hat{y}_i^t) + \\sum_{i=i}^t \\Omega(f_i) \\\\\n&=  \\sum_{i=1}^n l\\left(y_i, \\hat{y}_i^{t-1} + f_t(x_i) \\right) + \\Omega(f_t) + constant\n\\end{split}\\tag{1}\n$$\nä¸¾ä¾‹è¯´æ˜ï¼Œå‡è®¾æŸå¤±å‡½æ•°ä¸ºå¹³æ–¹æŸå¤±ï¼ˆsquare lossï¼‰ï¼Œåˆ™ç›®æ ‡å‡½æ•°ä¸ºï¼š\n$$\n\\begin{split}\nObj^{(t)} &= \\sum_{i=1}^n \\left(y_i - (\\hat{y}_i^{t-1} + f_t(x_i)) \\right)^2 + \\Omega(f_t) + constant \\\\\n&= \\sum_{i=1}^n \\left[2(\\hat{y}_i^{t-1} - y_i)f_t(x_i) + f_t(x_i)^2 \\right] + \\Omega(f_t) + constant\n\\end{split}\\tag{2}\n$$\n\nå…¶ä¸­ï¼Œ$(\\hat{y}_i^{t-1} - y_i)$ç§°ä¹‹ä¸ºæ®‹å·®ï¼ˆresidualï¼‰ã€‚å› æ­¤ï¼Œä½¿ç”¨å¹³æ–¹æŸå¤±å‡½æ•°æ—¶ï¼ŒGBDTç®—æ³•çš„æ¯ä¸€æ­¥åœ¨ç”Ÿæˆå†³ç­–æ ‘æ—¶åªéœ€è¦æ‹Ÿåˆå‰é¢çš„æ¨¡å‹çš„æ®‹å·®ã€‚\n> æ³°å‹’å…¬å¼ï¼šè®¾$n$æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå¦‚æœå®šä¹‰åœ¨ä¸€ä¸ªåŒ…å«$a$çš„åŒºé—´ä¸Šçš„å‡½æ•°$f$åœ¨ç‚¹$a$å¤„$n+1$æ¬¡å¯å¯¼ï¼Œé‚£ä¹ˆå¯¹äºè¿™ä¸ªåŒºé—´ä¸Šçš„ä»»æ„$x$éƒ½æœ‰ï¼š$\\displaystyle f(x)=\\sum _{n=0}^{N}\\frac{f^{(n)}(a)}{n!}(x-a)^ n+R_ n(x)$ï¼Œå…¶ä¸­çš„å¤šé¡¹å¼ç§°ä¸ºå‡½æ•°åœ¨$a$å¤„çš„æ³°å‹’å±•å¼€å¼ï¼Œ$R_ n(x)$æ˜¯æ³°å‹’å…¬å¼çš„ä½™é¡¹ä¸”æ˜¯$(x-a)^ n$çš„é«˜é˜¶æ— ç©·å°ã€‚\n\næ ¹æ®æ³°å‹’å…¬å¼æŠŠå‡½æ•°$f(x+\\Delta x)$åœ¨ç‚¹$x$å¤„äºŒé˜¶å±•å¼€ï¼Œå¯å¾—åˆ°å¦‚ä¸‹ç­‰å¼ï¼š \n$$\nf(x+\\Delta x) \\approx f(x) + f'(x)\\Delta x + \\frac12 f''(x)\\Delta x^2 \\tag 3\n$$\nç”±ç­‰å¼(1)å¯çŸ¥ï¼Œç›®æ ‡å‡½æ•°æ˜¯å…³äºå˜é‡$\\hat{y}_i^{t-1} + f_t(x_i)$çš„å‡½æ•°ï¼Œè‹¥æŠŠå˜é‡$\\hat{y}_i^{t-1}$çœ‹æˆæ˜¯ç­‰å¼(3)ä¸­çš„$x$ï¼ŒæŠŠå˜é‡$f_t(x_i)$çœ‹æˆæ˜¯ç­‰å¼(3)ä¸­çš„$\\Delta x$ï¼Œåˆ™ç­‰å¼(1)å¯è½¬åŒ–ä¸ºï¼š\n$$\nObj^{(t)} = \\sum_{i=1}^n \\left[ l(y_i, \\hat{y}_i^{t-1}) + g_if_t(x_i) + \\frac12h_if_t^2(x_i) \\right]  + \\Omega(f_t) + constant \\tag 4\n$$\nå…¶ä¸­$g_i$ï¼Œå®šä¹‰ä¸ºæŸå¤±å‡½æ•°çš„ä¸€é˜¶å¯¼æ•°ï¼Œå³$g_i=\\partial_{\\hat{y}^{t-1}}l(y_i,\\hat{y}^{t-1})$ï¼›$h_i$å®šä¹‰ä¸ºæŸå¤±å‡½æ•°çš„äºŒé˜¶å¯¼æ•°ï¼Œå³$h_i=\\partial_{\\hat{y}^{t-1}}^2l(y_i,\\hat{y}^{t-1})$ã€‚ \nå‡è®¾æŸå¤±å‡½æ•°ä¸ºå¹³æ–¹æŸå¤±å‡½æ•°ï¼Œåˆ™$g_i=\\partial_{\\hat{y}^{t-1}}(\\hat{y}^{t-1} - y_i)^2 = 2(\\hat{y}^{t-1} - y_i)$ï¼Œ$h_i=\\partial_{\\hat{y}^{t-1}}^2(\\hat{y}^{t-1} - y_i)^2 = 2$ï¼ŒæŠŠ$g_i$å’Œ$h_i$ä»£å…¥ç­‰å¼(4)å³å¾—ç­‰å¼(2)ã€‚\nç”±äºå‡½æ•°ä¸­çš„å¸¸é‡åœ¨å‡½æ•°æœ€å°åŒ–çš„è¿‡ç¨‹ä¸­ä¸èµ·ä½œç”¨ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä»ç­‰å¼(4)ä¸­ç§»é™¤æ‰å¸¸é‡é¡¹ï¼Œå¾—ï¼š \n$$\nObj^{(t)} \\approx \\sum_{i=1}^n \\left[ g_if_t(x_i) + \\frac12h_if_t^2(x_i) \\right]  + \\Omega(f_t) \\tag 5\n$$\nç”±äºè¦å­¦ä¹ çš„å‡½æ•°ä»…ä»…ä¾èµ–äºç›®æ ‡å‡½æ•°ï¼Œä»ç­‰å¼(5)å¯ä»¥çœ‹å‡ºåªéœ€ä¸ºå­¦ä¹ ä»»åŠ¡å®šä¹‰å¥½æŸå¤±å‡½æ•°ï¼Œå¹¶ä¸ºæ¯ä¸ªè®­ç»ƒæ ·æœ¬è®¡ç®—å‡ºæŸå¤±å‡½æ•°çš„ä¸€é˜¶å¯¼æ•°å’ŒäºŒé˜¶å¯¼æ•°ï¼Œé€šè¿‡åœ¨è®­ç»ƒæ ·æœ¬é›†ä¸Šæœ€å°åŒ–ç­‰å¼(5)å³å¯æ±‚å¾—æ¯æ­¥è¦å­¦ä¹ çš„å‡½æ•°$f(x)$ï¼Œä»è€Œæ ¹æ®åŠ æ³•æ¨¡å‹ç­‰å¼(0)å¯å¾—æœ€ç»ˆè¦å­¦ä¹ çš„æ¨¡å‹ã€‚\n\n# GBDTåœ¨Scikit-learnä¸­çš„è°ƒç”¨\nå…³äºGBDTåœ¨Scikit-learnä¸­çš„å®ç°åŸæ–‡åœ¨ [ç‚¹å‡»æŸ¥çœ‹][3]\nGBDTåœ¨sklearnä¸­å¯¼å…¥çš„åŒ…ä¸ä¸€æ ·ï¼Œåˆ†ç±»æ˜¯  from sklearn.ensemble import GradientBoostingClassifierï¼Œå›å½’æ˜¯ from sklearn.ensemble import GradientBoostingRegressor\n\n## å‚æ•°è¯´æ˜\nGBDTçš„å‚æ•°åˆ†ä¸ºboostingç±»åº“å‚æ•°å’Œå¼±å­¦ä¹ å™¨å‚æ•°ï¼Œå…¶ä¸­æœ‰GBDTçš„å¼±å­¦ä¹ å™¨ä¸ºCARTï¼Œæ‰€ä»¥å¼±å­¦ä¹ å™¨å‚æ•°åŸºæœ¬ä¸ºå†³ç­–æ ‘çš„å‚æ•°ï¼Œå‚è€ƒ[ç‚¹å‡»é˜…è¯»][4]\n###ã€€ç±»åº“å‚æ•°\n\n- lossï¼šæŸå¤±å‡½æ•°ï¼Œå¯¹äºåˆ†ç±»æ¨¡å‹ï¼Œæœ‰å¯¹æ•°ä¼¼ç„¶æŸå¤±å‡½æ•°\"deviance\"å’ŒæŒ‡æ•°æŸå¤±å‡½æ•°\"exponential\"ä¸¤è€…è¾“å…¥é€‰æ‹©ã€‚é»˜è®¤æ˜¯å¯¹æ•°ä¼¼ç„¶æŸå¤±å‡½æ•°\"deviance\"ã€‚åœ¨åŸç†ç¯‡ä¸­å¯¹è¿™äº›åˆ†ç±»æŸå¤±å‡½æ•°æœ‰è¯¦ç»†çš„ä»‹ç»ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ¨èä½¿ç”¨é»˜è®¤çš„\"deviance\"ã€‚å®ƒå¯¹äºŒå…ƒåˆ†ç¦»å’Œå¤šå…ƒåˆ†ç±»å„è‡ªéƒ½æœ‰æ¯”è¾ƒå¥½çš„ä¼˜åŒ–ã€‚è€ŒæŒ‡æ•°æŸå¤±å‡½æ•°ç­‰äºæŠŠæˆ‘ä»¬å¸¦åˆ°äº†Adaboostç®—æ³•ã€‚\n- learning_rateï¼šå³æ¯ä¸ªå¼±å­¦ä¹ å™¨çš„æƒé‡ç¼©å‡ç³»æ•°Î½Î½ï¼Œä¹Ÿç§°ä½œæ­¥é•¿ã€‚\n- n_estimatorsï¼šå°±æ˜¯å¼±å­¦ä¹ å™¨çš„æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œæˆ–è€…è¯´æœ€å¤§çš„å¼±å­¦ä¹ å™¨çš„ä¸ªæ•°ã€‚ä¸€èˆ¬æ¥è¯´n_estimatorså¤ªå°ï¼Œå®¹æ˜“æ¬ æ‹Ÿåˆï¼Œn_estimatorså¤ªå¤§ï¼Œåˆå®¹æ˜“è¿‡æ‹Ÿåˆï¼Œä¸€èˆ¬é€‰æ‹©ä¸€ä¸ªé€‚ä¸­çš„æ•°å€¼ã€‚é»˜è®¤æ˜¯100ã€‚åœ¨å®é™…è°ƒå‚çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸å°†n_estimatorså’Œä¸‹é¢ä»‹ç»çš„å‚æ•°learning_rateä¸€èµ·è€ƒè™‘ã€‚\n- subsampleï¼šå­é‡‡æ ·ï¼Œå–å€¼æ˜¯[0,1]ã€‚æ³¨æ„è¿™é‡Œçš„å­é‡‡æ ·å’Œéšæœºæ£®æ—ä¸ä¸€æ ·ï¼Œéšæœºæ£®æ—ä½¿ç”¨çš„æ˜¯æ”¾å›æŠ½æ ·ï¼Œè€Œè¿™é‡Œæ˜¯ä¸æ”¾å›æŠ½æ ·ã€‚å¦‚æœå–å€¼ä¸º1ï¼Œåˆ™å…¨éƒ¨æ ·æœ¬éƒ½ä½¿ç”¨ï¼Œç­‰äºæ²¡æœ‰ä½¿ç”¨å­é‡‡æ ·ã€‚å¦‚æœå–å€¼å°äº1ï¼Œåˆ™åªæœ‰ä¸€éƒ¨åˆ†æ ·æœ¬ä¼šå»åšGBDTçš„å†³ç­–æ ‘æ‹Ÿåˆã€‚é€‰æ‹©å°äº1çš„æ¯”ä¾‹å¯ä»¥å‡å°‘æ–¹å·®ï¼Œå³é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œä½†æ˜¯ä¼šå¢åŠ æ ·æœ¬æ‹Ÿåˆçš„åå·®ï¼Œå› æ­¤å–å€¼ä¸èƒ½å¤ªä½ã€‚æ¨èåœ¨[0.5, 0.8]ä¹‹é—´ï¼Œé»˜è®¤æ˜¯1.0ï¼Œå³ä¸ä½¿ç”¨å­é‡‡æ ·ã€‚\n- initï¼šå³æˆ‘ä»¬çš„åˆå§‹åŒ–çš„æ—¶å€™çš„å¼±å­¦ä¹ å™¨ï¼Œå¦‚æœä¸è¾“å…¥ï¼Œåˆ™ç”¨è®­ç»ƒé›†æ ·æœ¬æ¥åšæ ·æœ¬é›†çš„åˆå§‹åŒ–åˆ†ç±»å›å½’é¢„æµ‹ã€‚å¦åˆ™ç”¨initå‚æ•°æä¾›çš„å­¦ä¹ å™¨åšåˆå§‹åŒ–åˆ†ç±»å›å½’é¢„æµ‹ã€‚ä¸€èˆ¬ç”¨åœ¨æˆ‘ä»¬å¯¹æ•°æ®æœ‰å…ˆéªŒçŸ¥è¯†ï¼Œæˆ–è€…ä¹‹å‰åšè¿‡ä¸€äº›æ‹Ÿåˆçš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰çš„è¯å°±ä¸ç”¨ç®¡è¿™ä¸ªå‚æ•°äº†ã€‚\n- verboseï¼šé»˜è®¤æ˜¯0ï¼Œä»£è¡¨å¯ç”¨è¯¦ç»†è¾“å‡ºï¼Œè‹¥ä¸º1ï¼Œä»£è¡¨å¶å°”è¾“å‡ºè¿›åº¦ä¿¡æ¯\n- warm_startï¼šé»˜è®¤ä¸ºfalse\n- random_stateï¼šå¦‚æœintï¼Œrandom_stateéšæœºæ•°ç”Ÿæˆå™¨ä½¿ç”¨çš„ç§å­ï¼›å¦‚æœrandomstateå®ä¾‹ï¼Œrandom_stateæ˜¯éšæœºæ•°å‘ç”Ÿå™¨ï¼›å¦‚æœæ²¡æœ‰ï¼Œéšæœºæ•°ç”Ÿæˆå™¨ä½¿ç”¨çš„np.randomçš„randomstateå®ä¾‹ã€‚\n- presortï¼šé»˜è®¤æƒ…å†µä¸‹ä¼šåœ¨å¯†é›†çš„æ•°æ®ä¸Šä½¿ç”¨ï¼Œé»˜è®¤æ˜¯åœ¨ç¨€ç–æ•°æ®æ­£å¸¸æ’åºã€‚è®¾ç½®å¯¹trueçš„ç¨€ç–æ•°æ®å°†ä¼šå¼•èµ·é”™è¯¯ã€‚\n\n\n### å†³ç­–æ ‘å‚æ•°\n- max_depthï¼šå†³ç­–æ ‘æœ€å¤§æ·±åº¦\n- criterionï¼šè¡¡é‡åˆ†è£‚æŒ‡æ ‡çš„åº¦é‡æ–¹æ³•ï¼Œæ”¯æŒçš„æ˜¯å‡æ–¹è¯¯å·®\n- min_samples_splitï¼šå†…éƒ¨èŠ‚ç‚¹å†åˆ’åˆ†æ‰€éœ€æœ€å°æ ·æœ¬æ•°ã€‚è¿™ä¸ªå€¼é™åˆ¶äº†å­æ ‘ç»§ç»­åˆ’åˆ†çš„æ¡ä»¶ï¼Œå¦‚æœæŸèŠ‚ç‚¹çš„æ ·æœ¬æ•°å°‘äºmin_samples_splitï¼Œåˆ™ä¸ä¼šç»§ç»­å†å°è¯•é€‰æ‹©æœ€ä¼˜ç‰¹å¾æ¥è¿›è¡Œåˆ’åˆ†ã€‚ é»˜è®¤æ˜¯2.å¦‚æœæ ·æœ¬é‡ä¸å¤§ï¼Œä¸éœ€è¦ç®¡è¿™ä¸ªå€¼ã€‚å¦‚æœæ ·æœ¬é‡æ•°é‡çº§éå¸¸å¤§ï¼Œåˆ™æ¨èå¢å¤§è¿™ä¸ªå€¼ã€‚\n- min_samples_leafï¼šå¶å­èŠ‚ç‚¹æœ€å°‘æ ·æœ¬æ•°ã€‚è¿™ä¸ªå€¼é™åˆ¶äº†å¶å­èŠ‚ç‚¹æœ€å°‘çš„æ ·æœ¬æ•°ï¼Œå¦‚æœæŸå¶å­èŠ‚ç‚¹æ•°ç›®å°äºæ ·æœ¬æ•°ï¼Œåˆ™ä¼šå’Œå…„å¼ŸèŠ‚ç‚¹ä¸€èµ·è¢«å‰ªæã€‚ é»˜è®¤æ˜¯1,å¯ä»¥è¾“å…¥æœ€å°‘çš„æ ·æœ¬æ•°çš„æ•´æ•°ï¼Œæˆ–è€…æœ€å°‘æ ·æœ¬æ•°å æ ·æœ¬æ€»æ•°çš„ç™¾åˆ†æ¯”ã€‚å¦‚æœæ ·æœ¬é‡ä¸å¤§ï¼Œä¸éœ€è¦ç®¡è¿™ä¸ªå€¼ã€‚å¦‚æœæ ·æœ¬é‡æ•°é‡çº§éå¸¸å¤§ï¼Œåˆ™æ¨èå¢å¤§è¿™ä¸ªå€¼ã€‚\n- min_weight_fraction_leafï¼šå¶å­èŠ‚ç‚¹æœ€å°çš„æ ·æœ¬æƒé‡å’Œã€‚è¿™ä¸ªå€¼é™åˆ¶äº†å¶å­èŠ‚ç‚¹æ‰€æœ‰æ ·æœ¬æƒé‡å’Œçš„æœ€å°å€¼ï¼Œå¦‚æœå°äºè¿™ä¸ªå€¼ï¼Œåˆ™ä¼šå’Œå…„å¼ŸèŠ‚ç‚¹ä¸€èµ·è¢«å‰ªæã€‚ é»˜è®¤æ˜¯0ï¼Œå°±æ˜¯ä¸è€ƒè™‘æƒé‡é—®é¢˜ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬æœ‰è¾ƒå¤šæ ·æœ¬æœ‰ç¼ºå¤±å€¼ï¼Œæˆ–è€…åˆ†ç±»æ ‘æ ·æœ¬çš„åˆ†å¸ƒç±»åˆ«åå·®å¾ˆå¤§ï¼Œå°±ä¼šå¼•å…¥æ ·æœ¬æƒé‡ï¼Œè¿™æ—¶æˆ‘ä»¬å°±è¦æ³¨æ„è¿™ä¸ªå€¼äº†ã€‚\n- max_featuresï¼šåˆ’åˆ†æ—¶è€ƒè™‘çš„æœ€å¤§ç‰¹å¾æ•°ã€‚å¯ä»¥ä½¿ç”¨å¾ˆå¤šç§ç±»å‹çš„å€¼ï¼Œé»˜è®¤æ˜¯\"None\",æ„å‘³ç€åˆ’åˆ†æ—¶è€ƒè™‘æ‰€æœ‰çš„ç‰¹å¾æ•°ï¼›å¦‚æœæ˜¯\"log2\"æ„å‘³ç€åˆ’åˆ†æ—¶æœ€å¤šè€ƒè™‘log2Nlog2Nä¸ªç‰¹å¾ï¼›å¦‚æœæ˜¯\"sqrt\"æˆ–è€…\"auto\"æ„å‘³ç€åˆ’åˆ†æ—¶æœ€å¤šè€ƒè™‘Nâˆ’âˆ’âˆšNä¸ªç‰¹å¾ã€‚å¦‚æœæ˜¯æ•´æ•°ï¼Œä»£è¡¨è€ƒè™‘çš„ç‰¹å¾ç»å¯¹æ•°ã€‚å¦‚æœæ˜¯æµ®ç‚¹æ•°ï¼Œä»£è¡¨è€ƒè™‘ç‰¹å¾ç™¾åˆ†æ¯”ï¼Œå³è€ƒè™‘ï¼ˆç™¾åˆ†æ¯”xNï¼‰å–æ•´åçš„ç‰¹å¾æ•°ã€‚å…¶ä¸­Nä¸ºæ ·æœ¬æ€»ç‰¹å¾æ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæ ·æœ¬ç‰¹å¾æ•°ä¸å¤šï¼Œæ¯”å¦‚å°äº50ï¼Œæˆ‘ä»¬ç”¨é»˜è®¤çš„\"None\"å°±å¯ä»¥äº†ï¼Œå¦‚æœç‰¹å¾æ•°éå¸¸å¤šï¼Œæˆ‘ä»¬å¯ä»¥çµæ´»ä½¿ç”¨åˆšæ‰æè¿°çš„å…¶ä»–å–å€¼æ¥æ§åˆ¶åˆ’åˆ†æ—¶è€ƒè™‘çš„æœ€å¤§ç‰¹å¾æ•°ï¼Œä»¥æ§åˆ¶å†³ç­–æ ‘çš„ç”Ÿæˆæ—¶é—´ã€‚\n- max_leaf_nodesï¼šæœ€å¤§å¶å­èŠ‚ç‚¹æ•°ã€‚é€šè¿‡é™åˆ¶æœ€å¤§å¶å­èŠ‚ç‚¹æ•°ï¼Œå¯ä»¥é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œé»˜è®¤æ˜¯\"Noneâ€ï¼Œå³ä¸é™åˆ¶æœ€å¤§çš„å¶å­èŠ‚ç‚¹æ•°ã€‚å¦‚æœåŠ äº†é™åˆ¶ï¼Œç®—æ³•ä¼šå»ºç«‹åœ¨æœ€å¤§å¶å­èŠ‚ç‚¹æ•°å†…æœ€ä¼˜çš„å†³ç­–æ ‘ã€‚å¦‚æœç‰¹å¾ä¸å¤šï¼Œå¯ä»¥ä¸è€ƒè™‘è¿™ä¸ªå€¼ï¼Œä½†æ˜¯å¦‚æœç‰¹å¾åˆ†æˆå¤šçš„è¯ï¼Œå¯ä»¥åŠ ä»¥é™åˆ¶ï¼Œå…·ä½“çš„å€¼å¯ä»¥é€šè¿‡äº¤å‰éªŒè¯å¾—åˆ°ã€‚\n- min_impurity_splitï¼šèŠ‚ç‚¹åˆ’åˆ†æœ€å°ä¸çº¯åº¦ã€‚è¿™ä¸ªå€¼é™åˆ¶äº†å†³ç­–æ ‘çš„å¢é•¿ï¼Œå¦‚æœæŸèŠ‚ç‚¹çš„ä¸çº¯åº¦(åŸºäºåŸºå°¼ç³»æ•°ï¼Œå‡æ–¹å·®)å°äºè¿™ä¸ªé˜ˆå€¼ï¼Œåˆ™è¯¥èŠ‚ç‚¹ä¸å†ç”Ÿæˆå­èŠ‚ç‚¹ã€‚å³ä¸ºå¶å­èŠ‚ç‚¹ ã€‚ä¸€èˆ¬ä¸æ¨èæ”¹åŠ¨é»˜è®¤å€¼1e-7ã€‚\n- min_impurity_decreaseï¼šé»˜è®¤å€¼ä¸º0ã€‚å¦‚æœåˆ†è£‚\n\n## åˆ†ç±»\n```\n>>> from sklearn.datasets import make_hastie_10_2\n>>> from sklearn.ensemble import GradientBoostingClassifier\n\n>>> X, y = make_hastie_10_2(random_state=0)\n>>> X_train, X_test = X[:2000], X[2000:]\n>>> y_train, y_test = y[:2000], y[2000:]\n\n>>> clf = GradientBoostingClassifier(n_estimators=100, learning_rate=1.0,\n...     max_depth=1, random_state=0).fit(X_train, y_train)\n>>> clf.score(X_test, y_test)                 \n0.913...\n```\n\n## å›å½’\n```\n>>> import numpy as np\n>>> from sklearn.metrics import mean_squared_error\n>>> from sklearn.datasets import make_friedman1\n>>> from sklearn.ensemble import GradientBoostingRegressor\n\n>>> X, y = make_friedman1(n_samples=1200, random_state=0, noise=1.0)\n>>> X_train, X_test = X[:200], X[200:]\n>>> y_train, y_test = y[:200], y[200:]\n>>> est = GradientBoostingRegressor(n_estimators=100, learning_rate=0.1,\n...     max_depth=1, random_state=0, loss='ls').fit(X_train, y_train)\n>>> mean_squared_error(y_test, est.predict(X_test))    \n5.00...\n```\n\n## æ¨¡å‹è¯„ä»·\n```\nfrom sklearn import cross_validation, metrics\nmetrics.accuracy_score(y.values, y_pred) # å‡†ç¡®åº¦\nmetrics.roc_auc_score(y, y_predprob)  # AUCå¤§å°\n```\n\n----\nå‚è€ƒèµ„æ–™ï¼š\n\n-  [é›†æˆå­¦ä¹ åŸç†å°ç»“][5]\n-  [Regression Tree å›å½’æ ‘][6]\n-  [æµ…ææœºå™¨å­¦ä¹ ä¸­å„ç§æŸå¤±å‡½æ•°åŠå…¶å«ä¹‰][7]\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n---\n\n<center>\n    <img src=\"http://img.blog.csdn.net/20180204165223361?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" width=\"35%\" height=\"35%\" />\n    <br>\næ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼ŒåŠ å…¥æ•°æ®ä¸ç®—æ³•äº¤æµå¤§ç¾¤\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n  [1]: https://www.cnblogs.com/ooon/p/5647309.html\n  [2]: https://www.zybuluo.com/yxd/note/611571\n  [3]: http://scikit-learn.org/stable/modules/generated/sklearn.ensemble.GradientBoostingClassifier.html\n  [4]: https://www.cnblogs.com/DjangoBlog/p/6201663.html\n  [5]: https://www.cnblogs.com/pinard/p/6131423.html\n  [6]: https://blog.csdn.net/weixin_40604987/article/details/79296427\n  [7]: https://blog.csdn.net/qq547276542/article/details/77980042","tags":["Sparkä¸æ¨èç³»ç»Ÿ"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"Softmax-Regression","url":"/2018/03/28/æœºå™¨å­¦ä¹ /Softmax-Regression/","content":"> åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»Softmaxå›å½’æ¨¡å‹\n\n<!--More-->\n\n# ç®€ä»‹\nè¯¥æ¨¡å‹æ˜¯logisticå›å½’æ¨¡å‹åœ¨å¤šåˆ†ç±»é—®é¢˜ä¸Šçš„æ¨å¹¿ï¼Œåœ¨å¤šåˆ†ç±»é—®é¢˜ä¸­ï¼Œç±»æ ‡ç­¾ \\textstyle y å¯ä»¥å–ä¸¤ä¸ªä»¥ä¸Šçš„å€¼ã€‚ Softmaxå›å½’æ¨¡å‹å¯¹äºè¯¸å¦‚MNISTæ‰‹å†™æ•°å­—åˆ†ç±»ç­‰é—®é¢˜æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œè¯¥é—®é¢˜çš„ç›®çš„æ˜¯è¾¨è¯†10ä¸ªä¸åŒçš„å•ä¸ªæ•°å­—ã€‚Softmaxå›å½’æ˜¯æœ‰ç›‘ç£çš„ï¼Œä¸è¿‡åé¢ä¹Ÿä¼šä»‹ç»å®ƒä¸æ·±åº¦å­¦ä¹ /æ— ç›‘ç£å­¦ä¹ æ–¹æ³•çš„ç»“åˆã€‚ï¼ˆè¯‘è€…æ³¨ï¼š MNIST æ˜¯ä¸€ä¸ªæ‰‹å†™æ•°å­—è¯†åˆ«åº“ï¼Œç”±NYU çš„Yann LeCun ç­‰äººç»´æŠ¤ã€‚http://yann.lecun.com/exdb/mnist/ ï¼‰\n\nå›æƒ³ä¸€ä¸‹åœ¨ logistic å›å½’ä¸­ï¼Œæˆ‘ä»¬çš„è®­ç»ƒé›†ç”± \\textstyle m ä¸ªå·²æ ‡è®°çš„æ ·æœ¬æ„æˆï¼š$ \\{ (x^{(1)}, y^{(1)}), \\ldots, (x^{(m)}, y^{(m)}) \\} $ ï¼Œå…¶ä¸­è¾“å…¥ç‰¹å¾$ x^{(i)} \\in \\Re^{n+1} $ï¼ˆæˆ‘ä»¬å¯¹ç¬¦å·çš„çº¦å®šå¦‚ä¸‹ï¼šç‰¹å¾å‘é‡\n$ \\textstyle x $ çš„ç»´åº¦ä¸º \\textstyle n+1ï¼Œå…¶ä¸­ \\textstyle x_0 = 1 å¯¹åº”æˆªè·é¡¹ ã€‚ï¼‰ ç”±äº logistic å›å½’æ˜¯é’ˆå¯¹äºŒåˆ†ç±»é—®é¢˜çš„ï¼Œå› æ­¤ç±»æ ‡è®° $ y^{(i)} \\in \\{0,1\\}$ã€‚å‡è®¾å‡½æ•°(hypothesis function) å¦‚ä¸‹ï¼š\n\n\n\n$$\n\\begin{align}\nh_\\theta(x) = \\frac{1}{1+\\exp(-\\theta^Tx)},\n\\end{align}\n$$\n\næˆ‘ä»¬å°†è®­ç»ƒæ¨¡å‹å‚æ•°$ \\textstyle \\theta $ï¼Œä½¿å…¶èƒ½å¤Ÿæœ€å°åŒ–ä»£ä»·å‡½æ•° ï¼š\n$$\n\\begin{align}\nJ(\\theta) = -\\frac{1}{m} \\left[ \\sum_{i=1}^m y^{(i)} \\log h_\\theta(x^{(i)}) + (1-y^{(i)}) \\log (1-h_\\theta(x^{(i)})) \\right]\n\\end{align}\n$$\nåœ¨ softmaxå›å½’ä¸­ï¼Œæˆ‘ä»¬è§£å†³çš„æ˜¯å¤šåˆ†ç±»é—®é¢˜ï¼ˆç›¸å¯¹äº logistic å›å½’è§£å†³çš„äºŒåˆ†ç±»é—®é¢˜ï¼‰ï¼Œç±»æ ‡$ \\textstyle y $å¯ä»¥å–$ \\textstyle k $ ä¸ªä¸åŒçš„å€¼ï¼ˆè€Œä¸æ˜¯ 2 ä¸ªï¼‰ã€‚å› æ­¤ï¼Œå¯¹äºè®­ç»ƒé›†$ \\{ (x^{(1)}, y^{(1)}), \\ldots, (x^{(m)}, y^{(m)}) \\} $ï¼Œæˆ‘ä»¬æœ‰$ y^{(i)} \\in \\{1, 2, \\ldots, k\\} $ã€‚ï¼ˆæ³¨æ„æ­¤å¤„çš„ç±»åˆ«ä¸‹æ ‡ä» 1 å¼€å§‹ï¼Œè€Œä¸æ˜¯ 0ï¼‰ã€‚ä¾‹å¦‚ï¼Œåœ¨ MNIST æ•°å­—è¯†åˆ«ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬æœ‰$ \\textstyle k=10 $ä¸ªä¸åŒçš„ç±»åˆ«ã€‚\n\n\nå¯¹äºç»™å®šçš„æµ‹è¯•è¾“å…¥$ \\textstyle x$ï¼Œæˆ‘ä»¬æƒ³ç”¨å‡è®¾å‡½æ•°é’ˆå¯¹æ¯ä¸€ä¸ªç±»åˆ«jä¼°ç®—å‡ºæ¦‚ç‡å€¼$ \\textstyle p(y=j | x)$ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æƒ³ä¼°è®¡$ \\textstyle x $ çš„æ¯ä¸€ç§åˆ†ç±»ç»“æœå‡ºç°çš„æ¦‚ç‡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„å‡è®¾å‡½æ•°å°†è¦è¾“å‡ºä¸€ä¸ª $ \\textstyle k $ç»´çš„å‘é‡ï¼ˆå‘é‡å…ƒç´ çš„å’Œä¸º1ï¼‰æ¥è¡¨ç¤ºè¿™$ \\textstyle k$ ä¸ªä¼°è®¡çš„æ¦‚ç‡å€¼ã€‚ å…·ä½“åœ°è¯´ï¼Œæˆ‘ä»¬çš„å‡è®¾å‡½æ•°$ \\textstyle h_{\\theta}(x) $ å½¢å¼å¦‚ä¸‹ï¼š\n\n$$\n\\begin{align}\nh_\\theta(x^{(i)}) =\n\\begin{bmatrix}\np(y^{(i)} = 1 | x^{(i)}; \\theta) \\\\\np(y^{(i)} = 2 | x^{(i)}; \\theta) \\\\\n\\vdots \\\\\np(y^{(i)} = k | x^{(i)}; \\theta)\n\\end{bmatrix}\n=\n\\frac{1}{ \\sum_{j=1}^{k}{e^{ \\theta_j^T x^{(i)} }} }\n\\begin{bmatrix}\ne^{ \\theta_1^T x^{(i)} } \\\\\ne^{ \\theta_2^T x^{(i)} } \\\\\n\\vdots \\\\\ne^{ \\theta_k^T x^{(i)} } \\\\\n\\end{bmatrix}\n\\end{align}\n$$\nå…¶ä¸­$ \\theta_1, \\theta_2, \\ldots, \\theta_k \\in \\Re^{n+1}$ æ˜¯æ¨¡å‹çš„å‚æ•°ã€‚è¯·æ³¨æ„$ \\frac{1}{ \\sum_{j=1}^{k}{e^{ \\theta_j^T x^{(i)} }} } $è¿™ä¸€é¡¹å¯¹æ¦‚ç‡åˆ†å¸ƒè¿›è¡Œå½’ä¸€åŒ–ï¼Œä½¿å¾—æ‰€æœ‰æ¦‚ç‡ä¹‹å’Œä¸º 1 ã€‚\n\n\nä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬åŒæ ·ä½¿ç”¨ç¬¦å·$ \\textstyle \\theta$ æ¥è¡¨ç¤ºå…¨éƒ¨çš„æ¨¡å‹å‚æ•°ã€‚åœ¨å®ç°Softmaxå›å½’æ—¶ï¼Œå°†$ \\textstyle \\theta$ ç”¨ä¸€ä¸ª$ \\textstyle k \\times(n+1) $çš„çŸ©é˜µæ¥è¡¨ç¤ºä¼šå¾ˆæ–¹ä¾¿ï¼Œè¯¥çŸ©é˜µæ˜¯å°† $ \\theta_1, \\theta_2, \\ldots, \\theta_k $ æŒ‰è¡Œç½—åˆ—èµ·æ¥å¾—åˆ°çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n$$\n\\theta = \\begin{bmatrix}\n\\mbox{---} \\theta_1^T \\mbox{---} \\\\\n\\mbox{---} \\theta_2^T \\mbox{---} \\\\\n\\vdots \\\\\n\\mbox{---} \\theta_k^T \\mbox{---} \\\\\n\\end{bmatrix}\n$$\n# ä»£ä»·å‡½æ•°\nç°åœ¨æˆ‘ä»¬æ¥ä»‹ç» softmax å›å½’ç®—æ³•çš„ä»£ä»·å‡½æ•°ã€‚åœ¨ä¸‹é¢çš„å…¬å¼ä¸­ï¼Œ$\\textstyle 1\\{\\cdot\\}$ æ˜¯ç¤ºæ€§å‡½æ•°ï¼Œå…¶å–å€¼è§„åˆ™ä¸ºï¼š\n$ \\textstyle 1\\{ å€¼ä¸ºçœŸçš„è¡¨è¾¾å¼ \\textstyle \\}=1 $\n\nï¼Œ$ \\textstyle 1\\{ å€¼ä¸ºå‡çš„è¡¨è¾¾å¼ \\textstyle \\}=0 $ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œè¡¨è¾¾å¼$ \\textstyle 1\\{2+2=4\\} $çš„å€¼ä¸º1 ï¼Œ$ \\textstyle 1\\{1+1=5\\} $çš„å€¼ä¸º 0ã€‚æˆ‘ä»¬çš„ä»£ä»·å‡½æ•°ä¸ºï¼š\n\n$$\n\\begin{align}\nJ(\\theta) = - \\frac{1}{m} \\left[ \\sum_{i=1}^{m} \\sum_{j=1}^{k}  1\\left\\{y^{(i)} = j\\right\\} \\log \\frac{e^{\\theta_j^T x^{(i)}}}{\\sum_{l=1}^k e^{ \\theta_l^T x^{(i)} }}\\right]\n\\end{align}\n$$\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸Šè¿°å…¬å¼æ˜¯logisticå›å½’ä»£ä»·å‡½æ•°çš„æ¨å¹¿ã€‚logisticå›å½’ä»£ä»·å‡½æ•°å¯ä»¥æ”¹ä¸ºï¼š\n\n$$\n\\begin{align}\nJ(\\theta) &= -\\frac{1}{m} \\left[ \\sum_{i=1}^m   (1-y^{(i)}) \\log (1-h_\\theta(x^{(i)})) + y^{(i)} \\log h_\\theta(x^{(i)}) \\right] \\\\\n&= - \\frac{1}{m} \\left[ \\sum_{i=1}^{m} \\sum_{j=0}^{1} 1\\left\\{y^{(i)} = j\\right\\} \\log p(y^{(i)} = j | x^{(i)} ; \\theta) \\right]\n\\end{align}\n$$\nå¯ä»¥çœ‹åˆ°ï¼ŒSoftmaxä»£ä»·å‡½æ•°ä¸logistic ä»£ä»·å‡½æ•°åœ¨å½¢å¼ä¸Šéå¸¸ç±»ä¼¼ï¼Œåªæ˜¯åœ¨SoftmaxæŸå¤±å‡½æ•°ä¸­å¯¹ç±»æ ‡è®°çš„ $\\textstyle k $ä¸ªå¯èƒ½å€¼è¿›è¡Œäº†ç´¯åŠ ã€‚æ³¨æ„åœ¨Softmaxå›å½’ä¸­å°† \\textstyle x åˆ†ç±»ä¸ºç±»åˆ« $\\textstyle j $çš„æ¦‚ç‡ä¸ºï¼š\n\n$$\np(y^{(i)} = j | x^{(i)} ; \\theta) = \\frac{e^{\\theta_j^T x^{(i)}}}{\\sum_{l=1}^k e^{ \\theta_l^T x^{(i)}} }\n.\n$$\nå¯¹äº$ \\textstyle J(\\theta)$ çš„æœ€å°åŒ–é—®é¢˜ï¼Œç›®å‰è¿˜æ²¡æœ‰é—­å¼è§£æ³•ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿­ä»£çš„ä¼˜åŒ–ç®—æ³•ï¼ˆä¾‹å¦‚æ¢¯åº¦ä¸‹é™æ³•ï¼Œæˆ– L-BFGSï¼‰ã€‚ç»è¿‡æ±‚å¯¼ï¼Œæˆ‘ä»¬å¾—åˆ°æ¢¯åº¦å…¬å¼å¦‚ä¸‹ï¼š\n\n$$\n\\begin{align}\n\\nabla_{\\theta_j} J(\\theta) = - \\frac{1}{m} \\sum_{i=1}^{m}{ \\left[ x^{(i)} \\left( 1\\{ y^{(i)} = j\\}  - p(y^{(i)} = j | x^{(i)}; \\theta) \\right) \\right]  }\n\\end{align}\n$$\nè®©æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ç¬¦å· \"$ \\textstyle \\nabla_{\\theta_j}$\" çš„å«ä¹‰ã€‚$\\textstyle \\nabla_{\\theta_j} J(\\theta)$ æœ¬èº«æ˜¯ä¸€ä¸ªå‘é‡ï¼Œå®ƒçš„ç¬¬$ \\textstyle l $ä¸ªå…ƒç´ $ \\textstyle \\frac{\\partial J(\\theta)}{\\partial \\theta_{jl}} $æ˜¯$ \\textstyle J(\\theta)å¯¹\\textstyle \\theta_j $çš„ç¬¬ $\\textstyle l $ä¸ªåˆ†é‡çš„åå¯¼æ•°ã€‚\n\n\næœ‰äº†ä¸Šé¢çš„åå¯¼æ•°å…¬å¼ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†å®ƒä»£å…¥åˆ°æ¢¯åº¦ä¸‹é™æ³•ç­‰ç®—æ³•ä¸­ï¼Œæ¥æœ€å°åŒ–$ \\textstyle J(\\theta)$ã€‚ ä¾‹å¦‚ï¼Œåœ¨æ¢¯åº¦ä¸‹é™æ³•çš„æ ‡å‡†å®ç°ä¸­ï¼Œæ¯ä¸€æ¬¡è¿­ä»£éœ€è¦è¿›è¡Œå¦‚ä¸‹æ›´æ–°: $\\textstyle \\theta_j := \\theta_j - \\alpha \\nabla_{\\theta_j} J(\\theta)(\\textstyle j=1,\\ldots,kï¼‰$ã€‚\n\nå½“å®ç° softmax å›å½’ç®—æ³•æ—¶ï¼Œ æˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ä¸Šè¿°ä»£ä»·å‡½æ•°çš„ä¸€ä¸ªæ”¹è¿›ç‰ˆæœ¬ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯å’Œæƒé‡è¡°å‡(weight decay)ä¸€èµ·ä½¿ç”¨ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥ä»‹ç»ä½¿ç”¨å®ƒçš„åŠ¨æœºå’Œç»†èŠ‚ã€‚\n\n\n# Softmaxå›å½’æ¨¡å‹å‚æ•°åŒ–çš„ç‰¹ç‚¹\nSoftmax å›å½’æœ‰ä¸€ä¸ªä¸å¯»å¸¸çš„ç‰¹ç‚¹ï¼šå®ƒæœ‰ä¸€ä¸ªâ€œå†—ä½™â€çš„å‚æ•°é›†ã€‚ä¸ºäº†ä¾¿äºé˜è¿°è¿™ä¸€ç‰¹ç‚¹ï¼Œå‡è®¾æˆ‘ä»¬ä»å‚æ•°å‘é‡ $\\textstyle \\theta_j $ä¸­å‡å»äº†å‘é‡ $\\textstyle \\psi$ï¼Œè¿™æ—¶ï¼Œæ¯ä¸€ä¸ª$ \\textstyle \\theta_j $éƒ½å˜æˆäº† $\\textstyle \\theta_j - \\psi(\\textstyle j=1, \\ldots, k)$ã€‚æ­¤æ—¶å‡è®¾å‡½æ•°å˜æˆäº†ä»¥ä¸‹çš„å¼å­ï¼š\n\n$$\n\\begin{align}\np(y^{(i)} = j | x^{(i)} ; \\theta)\n&= \\frac{e^{(\\theta_j-\\psi)^T x^{(i)}}}{\\sum_{l=1}^k e^{ (\\theta_l-\\psi)^T x^{(i)}}}  \\\\\n&= \\frac{e^{\\theta_j^T x^{(i)}} e^{-\\psi^Tx^{(i)}}}{\\sum_{l=1}^k e^{\\theta_l^T x^{(i)}} e^{-\\psi^Tx^{(i)}}} \\\\\n&= \\frac{e^{\\theta_j^T x^{(i)}}}{\\sum_{l=1}^k e^{ \\theta_l^T x^{(i)}}}.\n\\end{align}\n$$\næ¢å¥è¯è¯´ï¼Œä»$ \\textstyle \\theta_j $ä¸­å‡å»$ \\textstyle \\psi$ å®Œå…¨ä¸å½±å“å‡è®¾å‡½æ•°çš„é¢„æµ‹ç»“æœï¼è¿™è¡¨æ˜å‰é¢çš„ softmax å›å½’æ¨¡å‹ä¸­å­˜åœ¨å†—ä½™çš„å‚æ•°ã€‚æ›´æ­£å¼ä¸€ç‚¹æ¥è¯´ï¼Œ Softmax æ¨¡å‹è¢«è¿‡åº¦å‚æ•°åŒ–äº†ã€‚å¯¹äºä»»æ„ä¸€ä¸ªç”¨äºæ‹Ÿåˆæ•°æ®çš„å‡è®¾å‡½æ•°ï¼Œå¯ä»¥æ±‚å‡ºå¤šç»„å‚æ•°å€¼ï¼Œè¿™äº›å‚æ•°å¾—åˆ°çš„æ˜¯å®Œå…¨ç›¸åŒçš„å‡è®¾å‡½æ•°$ \\textstyle h_\\theta$ã€‚\n\n\nè¿›ä¸€æ­¥è€Œè¨€ï¼Œå¦‚æœå‚æ•° $\\textstyle (\\theta_1, \\theta_2,\\ldots, \\theta_k) $æ˜¯ä»£ä»·å‡½æ•°$ \\textstyle J(\\theta)$ çš„æå°å€¼ç‚¹ï¼Œé‚£ä¹ˆ $\\textstyle (\\theta_1 - \\psi, \\theta_2 - \\psi,\\ldots,\n\\theta_k - \\psi) $åŒæ ·ä¹Ÿæ˜¯å®ƒçš„æå°å€¼ç‚¹ï¼Œå…¶ä¸­ $\\textstyle \\psi$ å¯ä»¥ä¸ºä»»æ„å‘é‡ã€‚å› æ­¤ä½¿ $\\textstyle J(\\theta)$ æœ€å°åŒ–çš„è§£ä¸æ˜¯å”¯ä¸€çš„ã€‚ï¼ˆæœ‰è¶£çš„æ˜¯ï¼Œç”±äº$ \\textstyle J(\\theta)$ ä»ç„¶æ˜¯ä¸€ä¸ªå‡¸å‡½æ•°ï¼Œå› æ­¤æ¢¯åº¦ä¸‹é™æ—¶ä¸ä¼šé‡åˆ°å±€éƒ¨æœ€ä¼˜è§£çš„é—®é¢˜ã€‚ä½†æ˜¯ Hessian çŸ©é˜µæ˜¯å¥‡å¼‚çš„/ä¸å¯é€†çš„ï¼Œè¿™ä¼šç›´æ¥å¯¼è‡´é‡‡ç”¨ç‰›é¡¿æ³•ä¼˜åŒ–å°±é‡åˆ°æ•°å€¼è®¡ç®—çš„é—®é¢˜ï¼‰\n\n\næ³¨æ„ï¼Œå½“$ \\textstyle \\psi = \\theta_1$ æ—¶ï¼Œæˆ‘ä»¬æ€»æ˜¯å¯ä»¥å°† $\\textstyle \\theta_1$æ›¿æ¢ä¸º$\\textstyle \\theta_1 - \\psi = \\vec{0}$ï¼ˆå³æ›¿æ¢ä¸ºå…¨é›¶å‘é‡ï¼‰ï¼Œå¹¶ä¸”è¿™ç§å˜æ¢ä¸ä¼šå½±å“å‡è®¾å‡½æ•°ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å»æ‰å‚æ•°å‘é‡ $\\textstyle \\theta_1 $ï¼ˆæˆ–è€…å…¶ä»– $\\textstyle \\theta_j $ä¸­çš„ä»»æ„ä¸€ä¸ªï¼‰è€Œä¸å½±å“å‡è®¾å‡½æ•°çš„è¡¨è¾¾èƒ½åŠ›ã€‚å®é™…ä¸Šï¼Œä¸å…¶ä¼˜åŒ–å…¨éƒ¨çš„$ \\textstyle k\\times(n+1) $ä¸ªå‚æ•° $\\textstyle (\\theta_1, \\theta_2,\\ldots, \\theta_k)$ ï¼ˆå…¶ä¸­ $\\textstyle \\theta_j \\in \\Re^{n+1}ï¼‰$ï¼Œæˆ‘ä»¬å¯ä»¥ä»¤$ \\textstyle \\theta_1 =\n\\vec{0}$ï¼Œåªä¼˜åŒ–å‰©ä½™$çš„ \\textstyle (k-1)\\times(n+1)$ ä¸ªå‚æ•°ï¼Œè¿™æ ·ç®—æ³•ä¾ç„¶èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚\n\n\nåœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸ºäº†ä½¿ç®—æ³•å®ç°æ›´ç®€å•æ¸…æ¥šï¼Œå¾€å¾€ä¿ç•™æ‰€æœ‰å‚æ•°$ \\textstyle (\\theta_1, \\theta_2,\\ldots, \\theta_n)$ï¼Œè€Œä¸ä»»æ„åœ°å°†æŸä¸€å‚æ•°è®¾ç½®ä¸º 0ã€‚ä½†æ­¤æ—¶æˆ‘ä»¬éœ€è¦å¯¹ä»£ä»·å‡½æ•°åšä¸€ä¸ªæ”¹åŠ¨ï¼šåŠ å…¥æƒé‡è¡°å‡ã€‚æƒé‡è¡°å‡å¯ä»¥è§£å†³ softmax å›å½’çš„å‚æ•°å†—ä½™æ‰€å¸¦æ¥çš„æ•°å€¼é—®é¢˜ã€‚\n\n\n# æƒé‡è¡°å‡\næˆ‘ä»¬é€šè¿‡æ·»åŠ ä¸€ä¸ªæƒé‡è¡°å‡é¡¹$\\textstyle \\frac{\\lambda}{2} \\sum_{i=1}^k \\sum_{j=0}^{n} \\theta_{ij}^2$ æ¥ä¿®æ”¹ä»£ä»·å‡½æ•°ï¼Œè¿™ä¸ªè¡°å‡é¡¹ä¼šæƒ©ç½šè¿‡å¤§çš„å‚æ•°å€¼ï¼Œç°åœ¨æˆ‘ä»¬çš„ä»£ä»·å‡½æ•°å˜ä¸ºï¼š\n\n$$\n\\begin{align}\nJ(\\theta) = - \\frac{1}{m} \\left[ \\sum_{i=1}^{m} \\sum_{j=1}^{k} 1\\left\\{y^{(i)} = j\\right\\} \\log \\frac{e^{\\theta_j^T x^{(i)}}}{\\sum_{l=1}^k e^{ \\theta_l^T x^{(i)} }}  \\right]\n              + \\frac{\\lambda}{2} \\sum_{i=1}^k \\sum_{j=0}^n \\theta_{ij}^2\n\\end{align}\n$$\næœ‰äº†è¿™ä¸ªæƒé‡è¡°å‡é¡¹ä»¥å ($\\textstyle \\lambda > 0$)ï¼Œä»£ä»·å‡½æ•°å°±å˜æˆäº†ä¸¥æ ¼çš„å‡¸å‡½æ•°ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯å¾—åˆ°å”¯ä¸€çš„è§£äº†ã€‚ æ­¤æ—¶çš„ HessiançŸ©é˜µå˜ä¸ºå¯é€†çŸ©é˜µï¼Œå¹¶ä¸”å› ä¸º$\\textstyle J(\\theta)$æ˜¯å‡¸å‡½æ•°ï¼Œæ¢¯åº¦ä¸‹é™æ³•å’Œ L-BFGS ç­‰ç®—æ³•å¯ä»¥ä¿è¯æ”¶æ•›åˆ°å…¨å±€æœ€ä¼˜è§£ã€‚\n\n\nä¸ºäº†ä½¿ç”¨ä¼˜åŒ–ç®—æ³•ï¼Œæˆ‘ä»¬éœ€è¦æ±‚å¾—è¿™ä¸ªæ–°å‡½æ•°$ \\textstyle J(\\theta)$ çš„å¯¼æ•°ï¼Œå¦‚ä¸‹ï¼š\n$$\n\n\\begin{align}\n\\nabla_{\\theta_j} J(\\theta) = - \\frac{1}{m} \\sum_{i=1}^{m}{ \\left[ x^{(i)} ( 1\\{ y^{(i)} = j\\}  - p(y^{(i)} = j | x^{(i)}; \\theta) ) \\right]  } + \\lambda \\theta_j\n\\end{align}\n\né€šè¿‡æœ€å°åŒ– \\textstyle J(\\theta)ï¼Œæˆ‘ä»¬å°±èƒ½å®ç°ä¸€ä¸ªå¯ç”¨çš„ softmax å›å½’æ¨¡å‹ã€‚\n\n\n# Softmaxå›å½’ä¸Logistic å›å½’çš„å…³ç³»\nå½“ç±»åˆ«æ•°$ \\textstyle k = 2 $æ—¶ï¼Œsoftmax å›å½’é€€åŒ–ä¸º logistic å›å½’ã€‚è¿™è¡¨æ˜ softmax å›å½’æ˜¯ logistic å›å½’çš„ä¸€èˆ¬å½¢å¼ã€‚å…·ä½“åœ°è¯´ï¼Œå½“ $\\textstyle k = 2 $æ—¶ï¼Œsoftmax å›å½’çš„å‡è®¾å‡½æ•°ä¸ºï¼š\n\n$$\n\\begin{align}\nh_\\theta(x) &=\n\\frac{1}{ e^{\\theta_1^Tx}  + e^{ \\theta_2^T x^{(i)} } }\n\\begin{bmatrix}\ne^{ \\theta_1^T x } \\\\\ne^{ \\theta_2^T x }\n\\end{bmatrix}\n\\end{align}\n$$\nåˆ©ç”¨softmaxå›å½’å‚æ•°å†—ä½™çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬ä»¤$ \\textstyle \\psi = \\theta_1$ï¼Œå¹¶ä¸”ä»ä¸¤ä¸ªå‚æ•°å‘é‡ä¸­éƒ½å‡å»å‘é‡$ \\textstyle \\theta_1$ï¼Œå¾—åˆ°:\n\n$$\n\\begin{align}\nh(x) &=\n\\frac{1}{ e^{\\vec{0}^Tx}  + e^{ (\\theta_2-\\theta_1)^T x^{(i)} } }\n\\begin{bmatrix}\ne^{ \\vec{0}^T x } \\\\\ne^{ (\\theta_2-\\theta_1)^T x }\n\\end{bmatrix} \\\\\n&=\n\\begin{bmatrix}\n\\frac{1}{ 1 + e^{ (\\theta_2-\\theta_1)^T x^{(i)} } } \\\\\n\\frac{e^{ (\\theta_2-\\theta_1)^T x }}{ 1 + e^{ (\\theta_2-\\theta_1)^T x^{(i)} } }\n\\end{bmatrix} \\\\\n&=\n\\begin{bmatrix}\n\\frac{1}{ 1  + e^{ (\\theta_2-\\theta_1)^T x^{(i)} } } \\\\\n1 - \\frac{1}{ 1  + e^{ (\\theta_2-\\theta_1)^T x^{(i)} } } \\\\\n\\end{bmatrix}\n\\end{align}\n$$\nå› æ­¤ï¼Œç”¨$ \\textstyle \\theta$'æ¥è¡¨ç¤º$\\textstyle \\theta_2-\\theta_1$ï¼Œæˆ‘ä»¬å°±ä¼šå‘ç° softmax å›å½’å™¨é¢„æµ‹å…¶ä¸­ä¸€ä¸ªç±»åˆ«çš„æ¦‚ç‡ä¸º $\\textstyle \\frac{1}{ 1  + e^{ (\\theta')^T x^{(i)} } }$ï¼Œå¦ä¸€ä¸ªç±»åˆ«æ¦‚ç‡çš„ä¸º$ \\textstyle 1 - \\frac{1}{ 1 + e^{ (\\theta')^T x^{(i)} } }$ï¼Œè¿™ä¸ logisticå›å½’æ˜¯ä¸€è‡´çš„ã€‚\n\n\n# Softmax å›å½’ vs. k ä¸ªäºŒå…ƒåˆ†ç±»å™¨\nå¦‚æœä½ åœ¨å¼€å‘ä¸€ä¸ªéŸ³ä¹åˆ†ç±»çš„åº”ç”¨ï¼Œéœ€è¦å¯¹kç§ç±»å‹çš„éŸ³ä¹è¿›è¡Œè¯†åˆ«ï¼Œé‚£ä¹ˆæ˜¯é€‰æ‹©ä½¿ç”¨ softmax åˆ†ç±»å™¨å‘¢ï¼Œè¿˜æ˜¯ä½¿ç”¨ logistic å›å½’ç®—æ³•å»ºç«‹ k ä¸ªç‹¬ç«‹çš„äºŒå…ƒåˆ†ç±»å™¨å‘¢ï¼Ÿ\n\nè¿™ä¸€é€‰æ‹©å–å†³äºä½ çš„ç±»åˆ«ä¹‹é—´æ˜¯å¦äº’æ–¥ï¼Œä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰å››ä¸ªç±»åˆ«çš„éŸ³ä¹ï¼Œåˆ†åˆ«ä¸ºï¼šå¤å…¸éŸ³ä¹ã€ä¹¡æ‘éŸ³ä¹ã€æ‘‡æ»šä¹å’Œçˆµå£«ä¹ï¼Œé‚£ä¹ˆä½ å¯ä»¥å‡è®¾æ¯ä¸ªè®­ç»ƒæ ·æœ¬åªä¼šè¢«æ‰“ä¸Šä¸€ä¸ªæ ‡ç­¾ï¼ˆå³ï¼šä¸€é¦–æ­Œåªèƒ½å±äºè¿™å››ç§éŸ³ä¹ç±»å‹çš„å…¶ä¸­ä¸€ç§ï¼‰ï¼Œæ­¤æ—¶ä½ åº”è¯¥ä½¿ç”¨ç±»åˆ«æ•° k = 4 çš„softmaxå›å½’ã€‚ï¼ˆå¦‚æœåœ¨ä½ çš„æ•°æ®é›†ä¸­ï¼Œæœ‰çš„æ­Œæ›²ä¸å±äºä»¥ä¸Šå››ç±»çš„å…¶ä¸­ä»»ä½•ä¸€ç±»ï¼Œé‚£ä¹ˆä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªâ€œå…¶ä»–ç±»â€ï¼Œå¹¶å°†ç±»åˆ«æ•° k è®¾ä¸º5ã€‚ï¼‰\n\nå¦‚æœä½ çš„å››ä¸ªç±»åˆ«å¦‚ä¸‹ï¼šäººå£°éŸ³ä¹ã€èˆæ›²ã€å½±è§†åŸå£°ã€æµè¡Œæ­Œæ›²ï¼Œé‚£ä¹ˆè¿™äº›ç±»åˆ«ä¹‹é—´å¹¶ä¸æ˜¯äº’æ–¥çš„ã€‚ä¾‹å¦‚ï¼šä¸€é¦–æ­Œæ›²å¯ä»¥æ¥æºäºå½±è§†åŸå£°ï¼ŒåŒæ—¶ä¹ŸåŒ…å«äººå£° ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨4ä¸ªäºŒåˆ†ç±»çš„ logistic å›å½’åˆ†ç±»å™¨æ›´ä¸ºåˆé€‚ã€‚è¿™æ ·ï¼Œå¯¹äºæ¯ä¸ªæ–°çš„éŸ³ä¹ä½œå“ ï¼Œæˆ‘ä»¬çš„ç®—æ³•å¯ä»¥åˆ†åˆ«åˆ¤æ–­å®ƒæ˜¯å¦å±äºå„ä¸ªç±»åˆ«ã€‚\n\nç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªè®¡ç®—è§†è§‰é¢†åŸŸçš„ä¾‹å­ï¼Œä½ çš„ä»»åŠ¡æ˜¯å°†å›¾åƒåˆ†åˆ°ä¸‰ä¸ªä¸åŒç±»åˆ«ä¸­ã€‚(i) å‡è®¾è¿™ä¸‰ä¸ªç±»åˆ«åˆ†åˆ«æ˜¯ï¼šå®¤å†…åœºæ™¯ã€æˆ·å¤–åŸåŒºåœºæ™¯ã€æˆ·å¤–è’é‡åœºæ™¯ã€‚ä½ ä¼šä½¿ç”¨sofmaxå›å½’è¿˜æ˜¯ 3ä¸ªlogistic å›å½’åˆ†ç±»å™¨å‘¢ï¼Ÿ (ii) ç°åœ¨å‡è®¾è¿™ä¸‰ä¸ªç±»åˆ«åˆ†åˆ«æ˜¯å®¤å†…åœºæ™¯ã€é»‘ç™½å›¾ç‰‡ã€åŒ…å«äººç‰©çš„å›¾ç‰‡ï¼Œä½ åˆä¼šé€‰æ‹© softmax å›å½’è¿˜æ˜¯å¤šä¸ª logistic å›å½’åˆ†ç±»å™¨å‘¢ï¼Ÿ\n\nåœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œä¸‰ä¸ªç±»åˆ«æ˜¯äº’æ–¥çš„ï¼Œå› æ­¤æ›´é€‚äºé€‰æ‹©softmaxå›å½’åˆ†ç±»å™¨ ã€‚è€Œåœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œå»ºç«‹ä¸‰ä¸ªç‹¬ç«‹çš„ logisticå›å½’åˆ†ç±»å™¨æ›´åŠ åˆé€‚ã€‚\n\n\n# ä¸­è‹±æ–‡å¯¹ç…§\n\n- Softmaxå›å½’ Softmax Regression\n- æœ‰ç›‘ç£å­¦ä¹  supervised learning\n- æ— ç›‘ç£å­¦ä¹  unsupervised learning\n- æ·±åº¦å­¦ä¹  deep learning\n- logisticå›å½’ logistic regression\n- æˆªè·é¡¹ intercept term\n- äºŒå…ƒåˆ†ç±» binary classification\n- ç±»å‹æ ‡è®° class labels\n- ä¼°å€¼å‡½æ•°/ä¼°è®¡å€¼ hypothesis\n- ä»£ä»·å‡½æ•° cost function\n- å¤šå…ƒåˆ†ç±» multi-class classification\n- æƒé‡è¡°å‡ weight decay\n\n-------\n\nåŸæ–‡é“¾æ¥ï¼šhttp://ufldl.stanford.edu/wiki/index.php/Softmax%E5%9B%9E%E5%BD%92\nè‹±æ–‡é“¾æ¥ï¼šhttp://ufldl.stanford.edu/wiki/index.php/Softmax_Regression\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"æ¨èç³»ç»Ÿçš„ä¸€äº›æ€è€ƒ","url":"/2018/03/26/RecSys/å†·å¯åŠ¨/æ¨èç³»ç»Ÿçš„ä¸€äº›æ€è€ƒ/","content":"> æ¨èç³»ç»Ÿä¸€ç›´ä»¥æ¥éƒ½æ˜¯ç”µå•†ç½‘ç«™å¿…ä¸å¯å°‘çš„ä¸€é¡¹ï¼Œåœ¨æå‡ç”¨æˆ·è½¬åŒ–ï¼Œå¢åŠ GMVæ–¹é¢å¯è°“åŠŸä¸å¯æ²¡ï¼Œé‚£ä¹ˆä¸€ä¸ªå¥½çš„æ¨èç®—æ³•å¿…ç„¶ä¼šåˆ›é€ æ›´å¤§çš„ä»·å€¼ï¼Œåˆšå¥½æœ€è¿‘å¬äº†ä¸€ä¸ªå…³äºæ¨èç®—æ³•çš„è®²åº§ï¼Œå†™å‡ºæ¥ä¸€äº›æ€è€ƒå§ï¼Œç®—æ˜¯åˆ†äº«ä¸€ä¸‹ã€‚\n<!--More-->\n\n# å­¦æœ¯ç•Œçš„æ¨èç³»ç»Ÿ\n\nå…¶å®åœ¨å¤§å­¦æœŸé—´ä¹Ÿçœ‹è¿‡ä¸€äº›æ¨èçš„ç®—æ³•ï¼Œè¿˜å¸®åˆ«äººå®ç°è¿‡å…³äºæ¨èç³»ç»Ÿçš„æ¯•è®¾ï¼Œä½†ç»ˆç©¶éƒ½æ˜¯åœç•™åœ¨ååŒè¿‡æ»¤çš„å±‚é¢ï¼Œé¡¶å¤šæ˜¯åŠ äº†ä¸€äº›çƒ­é—¨æ¨èæ¥é˜²æ­¢å†·å¯åŠ¨ã€‚ä¸å¾—ä¸è¯´ï¼ŒååŒè¿‡æ»¤æ‰“å¼€äº†æˆ‘å¯¹æ¨èç³»ç»Ÿè®¤çŸ¥çš„å¤§é—¨ï¼Œå½“ç„¶åœ¨çœŸå®ç¯å¢ƒä¸­è¿™æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚\n\nä¼ ç»Ÿçš„æ¨èç³»ç»Ÿæ— éå°±æ˜¯è¯„åˆ†å’Œæ’åºä¸¤ç§æ–¹æ¡ˆï¼Œè¯„åˆ†å³è®¡ç®—å‡ºç”¨æˆ·å¯¹itemçš„å¯èƒ½è¯„åˆ†ï¼Œæ ¹æ®è¯„åˆ†çš„é«˜ä½è¿›è¡Œæ’åºï¼Œæ’åºåˆ™ä¸å…³å¿ƒå…·ä½“çš„è¯„åˆ†æ˜¯å¤šå°‘ï¼Œåªæ˜¯ä¸ºäº†å¾—åˆ°ä¸€ä¸ªé¡ºåºï¼ˆå…¶å®è¿™ä¸€ç‚¹å’Œæ¨èç³»ç»Ÿå³ä¸ºç›¸ä¼¼ï¼‰ã€‚ä¼ ç»Ÿçš„æ¨èç®—æ³•å…¸å‹çš„æœ‰ååŒè¿‡æ»¤å’ŒåŸºäºå†…å®¹çš„è¿‡æ»¤ã€‚å¦‚æœä½ ä¸æ˜ç™½ä»€ä¹ˆæ˜¯ååŒè¿‡æ»¤ç®—æ³•å¯ä»¥å‚è€ƒï¼šhttps://blog.csdn.net/gamer_gyt/article/details/51346159 ,å¦‚æœä½ ä¸çŸ¥é“ååŒè¿‡æ»¤ä¸åŸºäºå†…å®¹çš„è¿‡æ»¤çš„åŒºåˆ«å¯å‚è€ƒï¼šhttps://www.zhihu.com/question/19971859ã€‚\n\nå¤§å­¦æ•°å­¦æœ¯ç•Œå…³äºæ¨èç®—æ³•çš„è®ºæ–‡éƒ½æ˜¯å¯¹ååŒè¿‡æ»¤çš„æ”¹è¿›ï¼Œè€Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªç›¸å¯¹äºåŸå…ˆçš„ç®—æ³•æœ‰å¾ˆå¤§çš„æå‡çš„ç»“æœï¼Œä½†æ˜¯è¿™äº›éƒ½è¿‡äºç†æƒ³åŒ–äº†ï¼ŒçœŸå®çš„ç¯å¢ƒè¿œæ¯”å®éªŒè¦å¤æ‚çš„å¤šï¼Œç½‘ä¸Šæœ€æœ‰åçš„æ¨èç³»ç»Ÿæ•°æ®é›†è«è¿‡äºé‚£ä¸ªç”µå½±è¯„åˆ†æ•°æ®äº†ï¼Œé‡Œè¾¹åªæœ‰ç”¨æˆ·å¯¹ç”µå½±çš„è¯„åˆ†ï¼Œå’Œç”µå½±çš„ä¸€äº›ä¿¡æ¯æ•°æ®ã€‚å»ºç«‹åœ¨è¿™äº›æ•°æ®ä¸Šçš„æ¨èç®—æ³•å…¶å®æœ‰ç‚¹ç†æƒ³åŒ–äº†ï¼Œä»–å¹¶ä¸èƒ½æ¨¡æ‹Ÿå‡ºçœŸå®çš„ç”µå•†ç¯å¢ƒï¼Œæ•°æ®çš„ç¼ºä¹ä¹Ÿæ˜¯å¯¼è‡´ååŒè¿‡æ»¤ç®—æ³•å¤§è¡Œå…¶é“çš„åŸå› ã€‚\n\n# å·¥ä¸šç•Œçš„æ¨èç³»ç»Ÿ\n\nå·¥ä¸šç•Œçš„æ¨èç³»ç»Ÿï¼Œéœ€è¦çš„æ˜¯æ˜ç¡®çš„ä»·å€¼èµ°å‘ï¼Œæ¯”å¦‚è¯´ç”µå•†ç½‘ç«™çš„æ¨èç³»ç»Ÿæ˜¯ä¸ºäº†å¢åŠ äº¤æ˜“æ€»é¢ï¼Œé‚£ä¹ˆåœ¨è¿›è¡Œæ¨èçš„æ—¶å€™æ˜¯ä¸æ˜¯åº”è¯¥é€‚å½“è¿‡æ»¤ä¸€äº›æå…¶å»‰ä»·çš„å•†å“ï¼Œæ˜¯å¦åº”è¯¥æ ¹æ®ç”¨æˆ·å¯¹ä¸åŒä»·æ ¼æ®µçš„éœ€æ±‚è¿›è¡Œä¸åŒä»·æ ¼æ®µå•†å“çš„æ¨é€ï¼›å¦‚æœç”µå•†çš„æ¨èç³»ç»Ÿæ˜¯ä¸ºäº†å¢åŠ ç”¨æˆ·åœç•™æ—¶é—´ï¼Œæäº¤CTRï¼Œé‚£ä¹ˆæ¨èç³»ç»Ÿå°±ä¸åº”è¯¥è€ƒè™‘è¿‡å¤šåˆ«çš„å› ç´ ï¼Œåªæ‰¾åˆ°ç”¨æˆ·æœ€æ„Ÿå…´è¶£çš„å•†å“æˆ–è€…è¯„è®ºç­‰ï¼Œå½“ç„¶å¦‚ä½•æ‰¾åˆ°ç”¨æˆ·æœ€æ„Ÿå…´è¶£çš„ä¹Ÿæ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹ä¸å¯å¦è®¤çš„æ˜¯è¿™äº›å¦‚æœç”¨ä¼ ç»Ÿçš„ååŒè¿‡æ»¤æ¥åšæ˜¯å¾ˆéš¾æ»¡è¶³éœ€æ±‚çš„ã€‚è¿™æ—¶å€™å°±éœ€è¦å¼€å‘å‡ºæ–°çš„æ¨èæ¶æ„ï¼Œæ¥é€‚åº”ä¸åŒçš„éœ€æ±‚ã€‚\n\nç›®å‰å·¥ä¸šç•Œç”¨çš„æœ€å¤šçš„ç®—æ³•è«è¿‡äºGBDTï¼ŒLRï¼ŒDNNç­‰ï¼Œä½†æ‰€æœ‰çš„æ¨èç®—æ³•éƒ½ä¼šé¢ä¸´ä¸€ä¸ªæµ·é‡æ•°æ®çš„æƒ…å†µï¼Œè¿™ä¸ªæ—¶å€™çš„åšæ³•ä¾¿æ˜¯å¯¹æ•°æ®é›†è¿›è¡Œæ•°æ®å¬å›ï¼Œå¾—åˆ°ç”¨æˆ·æ¯”è¾ƒæ„Ÿå…´è¶£çš„ä¸€äº›æ•°æ®ï¼Œç„¶åå†æ ¹æ®æˆ‘ä»¬çš„æ¨èæ¨¡å‹è¿›è¡Œç´ æåå¥½åº¦æ’åºï¼Œè¿‡æ»¤æ‰ç”¨æˆ·å·²ç»è´­ä¹°è¿‡çš„ç±»åˆ«æ•°æ®ï¼Œç»§è€Œæ¨é€ç»™ç”¨æˆ·ã€‚\n\né‚£ä¹ˆå¦‚ä½•è¿›è¡Œæ•°æ®å¬å›å‘¢ï¼Ÿè¿™å°±éœ€è¦ä¸€äº›åŸºç¡€çš„æ¨¡å‹è¿›è¡Œæ•°æ®å‡†å¤‡ï¼Œæ¯”å¦‚è¯´ç”¨æˆ·è‚–åƒï¼Œç”¨æˆ·çš„ä»·æ ¼æ®µåå¥½ï¼Œç”¨æˆ·è´­ä¹°åŠ›æ°´å¹³ç­‰ã€‚æ ¹ç»å·²æœ‰çš„ç”¨æˆ·æ•°æ®å’Œç‰¹å¾è¿›è¡Œæ•°æ®å¬å›ï¼Œé€‚åº¦æ‹‰å–ä¸€äº›æ–°çš„æ•°æ®ï¼Œä¿è¯å¬å›ç»“æœçš„å¤šæ ·æ€§ï¼Œå¾—åˆ°å¬å›æ± æ•°æ®ä¹‹åï¼Œä¾¿æ˜¯å¯¹æ¨¡å‹çš„è®­ç»ƒï¼Œå…¶å®æ¨¡å‹æœ¬èº«éš¾åº¦ä¸å¤§ï¼Œéš¾åº¦å¤§çš„æ˜¯å¦‚ä½•é€‰å–æœ‰æ•ˆçš„ç‰¹å¾æ¥ä½œä¸ºæ¨¡å‹çš„è¾“å…¥æ•°æ®ã€‚ä½ ç»„åˆå¾—åˆ°çš„æœ‰æ•ˆç‰¹å¾è¶Šå¤šï¼Œå¯¹äºæ¨¡å‹çš„è®­ç»ƒç»“æœå°±è¶Šå‡†ç¡®ã€‚\n\n# æ¨èç³»ç»Ÿçš„å¤šæ ·æ€§\nå¦‚ä½•ä¿è¯æ¨èç»“æœçš„å¤šæ ·æ€§å‘¢ï¼Œé¦–å…ˆæˆ‘ä»¬è¦å…ˆè®¤è¯†åˆ°æ¨èçš„å¯èƒ½æ€§ï¼Œæ¯”å¦‚è¯´ç”µå•†ç½‘é¡µé¦–é¡µçš„æ¨èï¼Œå•†å“è¯¦ç»†é¡µé¢çš„æ¨èï¼Œä¸åŒå¹´é¾„ä¸‹çš„æ¨èï¼Œæ¨èçš„ç»“æœå’Œè¢«è¯„ä¼°çš„æŒ‡æ ‡éƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚è¿™ä¸ªæ—¶å€™ä¸èƒ½å•ä¸€å¯¹æ‰€æœ‰æƒ…å†µä¸‹ä½¿ç”¨åŒä¸€ç§ç®—æ³•æˆ–è€…ç‰¹å¾ï¼Œè€Œæ˜¯è¦æ‰¾åˆ°èƒ½å¤ŸåŒºåˆ†å‡ºä¸åŒä½ç½®ï¼Œä¸åŒå¹´é¾„çš„æ¨èç»“æœçš„ç‰¹å¾ï¼Œè¿›è¡Œæ¨¡å‹è®­ç»ƒã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["å†·å¯åŠ¨"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"Scalaè§£æXML","url":"/2018/02/04/Spark/Scalaè§£æXML/","content":"\n> åœ¨ä½¿ç”¨Sparkæ—¶ï¼Œæœ‰æ—¶å€™ä¸»å‡½æ•°å…¥å£å‚æ•°è¿‡å¤šçš„æ—¶å€™ï¼Œä¼šç‰¹åˆ«å¤æ‚ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥å°†ç›¸åº”çš„å‚æ•°å†™åœ¨xmlæ–‡ä»¶ä¸­ï¼Œç„¶ååªè¦å°†xmlæ–‡ä»¶çš„è·¯å¾„ä¼ è¿›å»å³å¯ï¼Œè¿™é‡Œçš„xmlè·¯å¾„å¯ä»¥æ˜¯æœ¬åœ°çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯hdfsä¸Šçš„ã€‚\n\n<!--More-->\nscalaæä¾›äº†ç±»ä¼¼äºXpathçš„è¯­æ³•æ¥è§£æxmlæ–‡ä»¶ï¼Œå…¶ä¸­å¾ˆé‡è¦çš„ä¸¤ä¸ªæ“ä½œç¬¦æ˜¯\"\\\"\nå’Œ \"\\\\\"\n\n- \\ ï¼šæ ¹æ®æœç´¢æ¡ä»¶å¾—åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹\n- \\\\ï¼šæ ¹æ®æ¡ä»¶è·å–æ‰€æœ‰çš„èŠ‚ç‚¹\n\n```\n<configure>\n    <input>\n        <name>app_feature_goods</name>\n        <hdfs>/user/path/to/goods</hdfs>\n    </input>\n    <input>\n        <name>app_feature_user</name>\n        <hdfs>/user/path/to/user</hdfs>\n    </input>\n</configure>\n```\n\n```\nval input = args(0)\nval xml = XML.load(input)\n\n\n// æ‰¾åˆ°æ‰€æœ‰çš„ä¸€çº§èŠ‚ç‚¹ input\nval input_list = xml\\\"input\"\ninput_list.foreach(println)\n\n// éå†æ¯ä¸ªä¸€çº§èŠ‚ç‚¹ï¼Œå¾—åˆ°å…·ä½“çš„å€¼\nfor(one <- input_list){\n    println(one\\\"name\")\n    println((one\\\"name\").text)\n    println(one\\\"hdfs\")\n    println((one\\\"hdfs\").text)\n}\n\n// å¾—åˆ°æ‰€æœ‰çš„name\nval name_list = xml\\\\\"name\"\nname_list.map(one => one.text).foreach(println)\n\n// è·å–æ‰€æœ‰hdfs\nval hdfs_list = xml\\\\\"hdfs\"\nhdfs_list.map(one => one.text).foreach(println)\n\n// è·å–å…·æœ‰classçš„å€¼\nprintln(xml\\\"input\"\\\"name\"\\\\\"@class\")\n\n// æ‰“å°å‡ºå…·æœ‰classå±æ€§çš„nameå€¼å’Œhdfså€¼\nprintln((xml\\\\\"name\").filter(_.attribute(\"class\").exists(_.text.equals(\"test\"))).text)\nprintln((xml\\\\\"hdfs\").filter(_.attribute(\"class\").exists(_.text.equals(\"test\"))).text)\n```\n\næ‰“å°å‡ºçš„ä¿¡æ¯ä¸ºï¼š\n```\n<input>\n        <name>app_feature_goods</name>\n        <hdfs>/user/path/to/goods</hdfs>\n    </input>\n<input>\n        <name>app_feature_user</name>\n        <hdfs>/user/path/to/user</hdfs>\n    </input>\n<input>\n        <name class=\"test\">app_feature_user_test</name>\n        <hdfs class=\"test\">/user/path/to/user_test</hdfs>\n    </input>\n-------------\n<name>app_feature_goods</name>\napp_feature_goods\n<hdfs>/user/path/to/goods</hdfs>\n/user/path/to/goods\n<name>app_feature_user</name>\napp_feature_user\n<hdfs>/user/path/to/user</hdfs>\n/user/path/to/user\n<name class=\"test\">app_feature_user_test</name>\napp_feature_user_test\n<hdfs class=\"test\">/user/path/to/user_test</hdfs>\n/user/path/to/user_test\n-------------\napp_feature_goods\napp_feature_user\napp_feature_user_test\n-------------\n/user/path/to/goods\n/user/path/to/user\n/user/path/to/user_test\n-------------\ntest\n-------------\napp_feature_user_test\n/user/path/to/user_test\n-------------\n\nProcess finished with exit code 0\n\n```\n\nå½“ç„¶è¿˜å­˜åœ¨ä¸€ç§æƒ…å†µå°±æ˜¯XMLæ–‡ä»¶å­˜åœ¨äºhdfsä¹‹ä¸Šï¼Œè¿™æ—¶å€™å°±ä¸èƒ½ç›´æ¥load xmlæ–‡ä»¶é‡Œï¼Œä¸è¿‡å¯ä»¥é€šè¿‡ä¸‹é¢ä¸€ç§æ–¹æ³•è·å¾—\n```\nvar rdd = sc.textFile(xml_path)\nval xml = XML.loadString(rdd.collect().mkString(\"\\n\"))\n```\næ¥ä¸‹æ¥ä¾¿å¯ä»¥é€šè¿‡ä¸Šè¾¹çš„æ–¹æ³•è¿›è¡Œè§£æäº†ã€‚\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["Sparkä¸å¤§æ•°æ®"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"Sparkæ±‚ç»Ÿè®¡é‡çš„ä¸¤ç§æ–¹æ³•","url":"/2018/02/04/Spark/Sparkæ±‚ç»Ÿè®¡é‡çš„ä¸¤ç§æ–¹æ³•/","content":"> Sparkå¯¹äºç»Ÿè®¡é‡ä¸­çš„æœ€å¤§å€¼ï¼Œæœ€å°å€¼ï¼Œå¹³å‡å€¼å’Œæ–¹å·®ï¼ˆå‡å€¼ï¼‰çš„è®¡ç®—éƒ½æä¾›äº†å°è£…ï¼Œè¿™é‡Œå°ç¼–çŸ¥é“ä¸¤ç§è®¡ç®—æ–¹æ³•ï¼Œæ•´ç†ä¸€ä¸‹åˆ†äº«ç»™å¤§å®¶\n\n<!--More-->\n\n# DataFrameå½¢å¼\n## åŠ è½½Jsonæ•°æ®æº\nexample.jsonæ–‡ä»¶æ ¼å¼å¦‚ä¸‹\n```\n{\"name\":\"thinkgamer\",\"age\":23,\"math\":78,\"chinese\":78,\"english\":95}\n{\"name\":\"think\",\"age\":25,\"math\":95,\"chinese\":88,\"english\":93}\n{\"name\":\"gamer\",\"age\":24,\"math\":93,\"chinese\":68,\"english\":88}\n```\n```\n// persist(StorageLevel.MEMORY_AND_DISK) å½“å†…å­˜ä¸å¤Ÿæ—¶cacheåˆ°ç£ç›˜é‡Œ\nval df = spark.read.json(\"/path/to/example.json\").persist(StorageLevel.MEMORY_AND_DISK)\ndf.show()\ndf.describe()\n```\næˆ‘ä»¬ä¾¿å¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„å½¢å¼\n```\n+---+-------+-------+----+----------+\n|age|chinese|english|math|      name|\n+---+-------+-------+----+----------+\n| 23|     78|     95|  78|thinkgamer|\n| 25|     88|     93|  95|     think|\n| 24|     68|     88|  93|     gamer|\n+---+-------+-------+----+----------+\n\n+-------+----+-------+-----------------+-----------------+----------+\n|summary| age|chinese|          english|             math|      name|\n+-------+----+-------+-----------------+-----------------+----------+\n|  count|   3|      3|                3|                3|         3|\n|   mean|24.0|   78.0|             92.0|88.66666666666667|      null|\n| stddev| 1.0|   10.0|3.605551275463989| 9.29157324317757|      null|\n|    min|  23|     68|               88|               78|     gamer|\n|    max|  25|     88|               95|               95|thinkgamer|\n+-------+----+-------+-----------------+-----------------+----------+\n```\nå¦‚æœæ˜¯æƒ³çœ‹æŸåˆ—çš„é€šçŸ¥å€¼çš„è¯ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼\n```\ndf.select(\"age\").describe().show()\n```\n```\n+-------+----+\n|summary| age|\n+-------+----+\n|  count|   3|\n|   mean|24.0|\n| stddev| 1.0|\n|    min|  23|\n|    max|  25|\n+-------+----+\n```\n\n# RDDå½¢å¼\nå‡è®¾åŒæ ·è¿˜æ˜¯ä¸Šè¾¹çš„æ•°æ®ï¼Œåªä¸è¿‡ç°åœ¨å˜æˆæŒ‰\\tåˆ†å‰²çš„æ™®é€šæ–‡æœ¬\n```\nthinkgamer  23  78  78  95\nthink   25  95  88  93\ngamer   24  93  68  88\n```\nè¿™é‡Œå¯ä»¥å°†rddè½¬æ¢æˆdataframeæ´—å½¢å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨rddè®¡ç®—ï¼Œè½¬åŒ–ä¸ºdfçš„æ ·ä¾‹å¦‚ä¸‹\n```\nval new_data = data_txt\n      .map(_.split(\"\\\\s+\"))\n      .map(one => Person(one(0),one(1).toInt,one(2).toDouble,one(3).toDouble,one(4).toDouble))\n      .toDF()\n```\næ¥ä¸‹æ¥å°±æ˜¯è¿›è¡Œå’Œä¸Šè¾¹dfä¸€æ ·çš„æ“ä½œäº†ã€‚\n\né‚£ä¹ˆå¯¹äºrddå½¢å¼çš„æ–‡ä»¶å¦‚ä½•æ“ä½œï¼š\n```\nimport org.apache.spark.mllib.linalg.Vectors\nimport org.apache.spark.mllib.stat.{MultivariateStatisticalSummary, Statistics}\n\nval data_txt = SparkSC.spark.sparkContext.textFile(input_txt).persist(StorageLevel.MEMORY_AND_DISK)\n    val new_data = data_txt\n      .map(_.split(\"\\\\s+\"))\n      .map(one => Vectors.dense(one(1).toInt,one(2).toDouble,one(3).toDouble,one(4).toDouble))\n    val summary: MultivariateStatisticalSummary = Statistics.colStats(new_data)\n    \nprintln(\"Max:\"+summary.max)\nprintln(\"Min:\"+summary.min)\nprintln(\"Count:\"+summary.count)\nprintln(\"Variance:\"+summary.variance)\nprintln(\"Mean:\"+summary.mean)\nprintln(\"NormL1:\"+summary.normL1)\nprintln(\"Norml2:\"+summary.normL2)\n```\nè¾“å‡ºç»“æœä¸ºï¼š\n```\nMax:[25.0,95.0,88.0,95.0]\nMin:[23.0,78.0,68.0,88.0]\nCount:3\nVariance:[1.0,86.33333333333331,100.0,13.0]\nMean:[24.0,88.66666666666667,78.0,92.0]\nNormL1:[72.0,266.0,234.0,276.0]\nNorml2:[41.593268686170845,154.1363033162532,135.83813897429545,159.43023552638942]\n```\nè¿™é‡Œå¯ä»¥å¾—åˆ°ç›¸å…³çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œä¸»è¦åŒºåˆ«åœ¨äºdataframeå¾—åˆ°çš„æ˜¯æ ‡å‡†å·®ï¼Œè€Œä½¿ç”¨mllibå¾—åˆ°çš„ç»Ÿè®¡å€¼ä¸­æ˜¯æ–¹å·®ï¼Œä½†è¿™å¹¶ä¸çŸ›ç›¾ï¼Œä¸¤è€…å¯ä»¥ç›¸äº’è½¬åŒ–å¾—åˆ°ã€‚\n\nå½“ç„¶å¦‚æœè¦æ±‚å››åˆ†ä½æ•°ï¼Œå¯ä»¥è½¬åŒ–æˆdfï¼Œä½¿ç”¨sqlè¯­å¥è¿›è¡ŒæŸ¥è¯¢\n```\nSelect PERCENTILE(col,<0.25,0.75>) from tableName;\n```\n\n\n# è‡ªå·±å®ç°\nä¸‹é¢æ˜¯æˆ‘è‡ªå·±å®ç°çš„ä¸€ä¸ªæ–¹æ³•ï¼Œä¼ å…¥çš„å‚æ•°æ˜¯ä¸€ä¸ªrddï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²\n```\n// è®¡ç®—æœ€å¤§å€¼ï¼Œæœ€å°å€¼ï¼Œå¹³å‡å€¼ï¼Œæ–¹å·®ï¼Œæ ‡å‡†å·®ï¼Œå››åˆ†ä½æ•°\ndef getStat(data: RDD[String]):String= {\n   val sort_data = data\n      .filter(one => Verify.istoDouble(one))\n      .map(_.toDouble)\n      .sortBy(line=>line)\n      .persist(StorageLevel.MEMORY_AND_DISK)  // é»˜è®¤æ˜¯true å‡åºï¼Œfalseä¸ºé™åº\n\n   val data_list = sort_data.collect()\n   val len = data_list.length\n   val min = data_list(0)\n   val max = data_list(len-1)\n   val mean = sort_data.reduce((a,b) => a+b) / len\n   val variance = sort_data.map(one => math.pow(one-mean,2)).reduce((a,b)=>a+b)/len\n   val stdder = math.sqrt(variance)\n   var quant = \"\"\n   if(len<4){\n      val q1 = min\n      val q2 = min\n      val q3 = max\n      quant = q1+\"\\t\"+q2+\"\\t\"+q3\n   }else {\n      val q1 = data_list((len * 0.25).toInt - 1)\n      val q2 = data_list((len * 0.5).toInt - 1)\n      val q3 = data_list((len * 0.75).toInt - 1)\n      quant = q1+\"\\t\"+q2+\"\\t\"+q3\n   }\n   max+\"\\t\"+min+\"\\t\"+mean+\"\\t\"+variance+\"\\t\"+stdder+\"\\t\"+quant\n}\n```\n\n\n\n# æœ¬åœ°ç¢°è§çš„ä¸€ä¸ªé”™è¯¯\n1ï¼šé”™è¯¯1\n```\nscala.Predef$.refArrayOps([Ljava/lang/Object;)Lscala/collection/mutable/Array\n```\n\nåŸå› æ˜¯Sparkä¸­spark-sql_2.11-2.2.1 ï¼Œæ˜¯ç”¨scala 2.11ç‰ˆæœ¬ä¸Šç¼–è¯‘çš„ï¼Œè€Œæˆ‘çš„æœ¬åœ°çš„scalaç‰ˆæœ¬ä¸º2.12.4ï¼Œæ‰€ä»¥å°±é”™äº†ï¼Œå¯ä»¥åœ¨\né‡Œè¾¹æŠŠç›¸åº”çš„scalaç‰ˆæœ¬å°±è¡Œä¿®æ”¹å°±è¡Œäº†\n\n\n2ï¼šé”™è¯¯2\n```\njava.lang.NoSuchMethodError: scala.Product.$init$(Lscala/Product;)V\n```\nåŸå› ä¹Ÿæ˜¯å› ä¸ºæˆ‘ä¸‹è½½å®‰è£…çš„scala2.12ç‰ˆæœ¬ï¼Œæ¢æˆscala2.11ç‰ˆæœ¬å°±å¯ä»¥äº†\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["Sparkä¸å¤§æ•°æ®"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"è®°ä¸€æ¬¡ç™¾Gæ•°æ®çš„èšç±»ç®—æ³•å®æ–½è¿‡ç¨‹","url":"/2018/01/27/Spark/è®°ä¸€æ¬¡ç™¾Gæ•°æ®çš„èšç±»ç®—æ³•å®æ–½è¿‡ç¨‹/","content":"\n> å¦‚é¢˜ï¼Œè®°ä¸€æ¬¡ç™¾Gæ•°æ®çš„èšç±»ç®—æ³•å®æ–½è¿‡ç¨‹ï¼Œç”¨çš„æŠ€æœ¯éƒ½ä¸éš¾ï¼Œsparkå’Œkmeansï¼Œæˆ‘æƒ³ä½ ä¼šè®¤ä¸ºè¿™æ²¡æœ‰ä»€ä¹ˆéš¾åº¦ï¼Œæˆ‘æ¥åˆ°è¿™ä¸ªä»»åŠ¡çš„æ—¶å€™ä¹Ÿè®¤ä¸ºæ²¡æœ‰éš¾åº¦ï¼Œå¯æ˜¯ä¸€å‘¨ä¹‹åæˆ‘å‘ç°æˆ‘é”™äº†ï¼Œæ•°æ®é‡100Gçš„ç¡®ä¸å¤§ï¼Œä½†éš¾åº¦åœ¨äºæˆ‘éœ€è¦å¯¹ kmeans çš„ trainè¿‡ç¨‹æ‰§è¡Œå°†è¿‘3000æ¬¡ï¼Œè€Œä¸”éœ€è¦é«˜æ•ˆçš„å®Œæˆã€‚é‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼Œå¦‚ä½•ä¿è¯é«˜æ•ˆå’Œå‡†ç¡®æ€§ã€‚ï¼ˆå£°æ˜å°ç¼–å¯¹Sparkä¹Ÿä¸æ˜¯è¯´å¾ˆç†Ÿæ‚‰ï¼‰\n\n<!--More-->\n\n# éœ€æ±‚\n\næ•°æ®æ ¼å¼ä¸ºä¸‰åˆ—ï¼Œç¬¬ä¸€åˆ—ä¸ºç±»åˆ«IDï¼Œç¬¬äºŒåˆ—ä¸ºå•†å“IDï¼Œç¬¬ä¸‰åˆ—ä¸ºä»·æ ¼ï¼Œæ•°æ®æ ¼å¼å¦‚ä¸‹\n```\n1000    2000    45.3\n1000    2001    121.3\n1001    2002    4125.3\n1000    2003    225.3\n1001    2004    3415.3\n1000    2005    12245.3   \n...     ...     ....\n```\næ•°æ®æœ‰å¾ˆå¤šæ¡ï¼Œæ•°æ®é‡ä¸ºå°†è¿‘100Gï¼Œå­˜å‚¨åœ¨hdfsä¸Šï¼Œç¬¬ä¸€åˆ—å“ç±»IDä¸å”¯ä¸€ï¼Œæ¯ä¸ªå“ç±»IDä¸‹æœ‰å¤šä¸ªå•†å“IDï¼Œå•†å“IDå”¯ä¸€ï¼Œä»·æ ¼ä¸ºæµ®ç‚¹å‹æ•°æ®\n\nç°åœ¨è¦å¯¹æ¯ä¸ªå“ç±»ä¸‹çš„ä»·æ ¼è¿›è¡Œèšç±»ï¼Œå¾—åˆ°1~7ä¸ªä»·æ ¼levelï¼ˆ7levelçš„ä»·æ ¼è¦æ¯”6levelçš„ä»·æ ¼é«˜ï¼Œä»¥æ­¤ç±»æ¨ï¼‰\n\n# ç¬¬ä¸€æ¬¡å°è¯•\nç¬¬ä¸€æ¬¡å°è¯•å¾ˆå¤©çœŸï¼Œæ€è·¯ä¹Ÿå¾ˆæ­£å¸¸ï¼Œå¦‚ä¸‹ï¼š\n1ï¼šå…¨é‡åŠ è½½æ•°æ®ï¼Œå½¢æˆrdd\n2ï¼šæ•°æ®splitä¹‹åï¼ŒæŒ‰keyè¿›è¡Œgroupby\n3ï¼šé’ˆå¯¹æ¯ä¸ªkeyï¼ˆä¹Ÿå°±æ˜¯ç±»åˆ«IDï¼‰è¿›è¡Œkmeansèšç±»å’Œé¢„æµ‹ï¼Œå¹¶å°†ç»“æœå†™å…¥hdfs\n4ï¼šåŠ è½½æ¯ä¸ªç±»åˆ«çš„ç»“æœï¼Œè¿›è¡Œèšåˆå½¢æˆæœ€ç»ˆç»“æœ\n\né‚£ä¹ˆå¼€å§‹å†™ä»£ç ã€‚papapaå†™äº†ä¸€å †ï¼Œå‘ç°groupByä¹‹åçš„æ•°æ®æ ¼å¼æ˜¯CompactBufferï¼Œè½¬åŒ–æˆspark kmeans trainæ‰€éœ€è¦çš„æ ¼å¼ä¹‹åï¼Œä»£ç å¡ç€ä¸ä¼šåŠ¨ï¼Œä¸æ˜æ‰€ä»¥ï¼ˆæˆ‘ä¼°è®¡æ˜¯æ ¼å¼æ²¡æœ‰è½¬æ­£ç¡®ï¼Œä¸æ˜¯kmeans æ‰€éœ€è¦çš„æ ¼å¼ï¼Œä½†æ˜¯å¦‚æœä¸æ˜¯kmeans éœ€è¦çš„æ ¼å¼ï¼Œåº”è¯¥ä¼šæŠ¥é”™å‘€ï¼‰ï¼Œåæ¥å½“æˆ‘æŠŠä»£ç æ‰“åŒ…ï¼Œæäº¤åˆ°é›†ç¾¤ä¸Šè¿è¡Œæ—¶ï¼Œæç¤ºæˆ‘kmeans trainæ‰€åœ¨çš„å‡½æ•°ä¸­æ²¡æœ‰æŒ‡å®šmaster urlï¼Œå¯æ˜¯æˆ‘æ˜æ˜æŒ‡å®šäº†ï¼Œåæ¥æ‰å‘ç°æ˜¯å› ä¸ºï¼Œæˆ‘åœ¨rddæ“ä½œè¿‡ç¨‹ä¸­èƒ½å¤Ÿï¼ŒåµŒå¥—äº†å‡½æ•°ï¼Œå‡½æ•°ä¸­åˆé‡æ–°ä½¿ç”¨äº†rddï¼Œä¹Ÿå°±æ˜¯è¯´rdd ä¸èƒ½åµŒå¥—rddä½¿ç”¨ï¼Œå…·ä½“å¯å‚è€ƒ [Spark ä¸ºä»€ä¹ˆ ä¸å…è®¸ RDD åµŒå¥—-å¦‚ RDD\\[RDD\\[T\\]\\]](https://www.zhihu.com/question/54439266)ï¼Œè€Œæˆ‘åœ¨æœ¬åœ°æµ‹è¯•æ—¶æŒ‡çš„éƒ½æ˜¯localï¼Œæ²¡æœ‰è¿›è¡ŒæŠ¥é”™ï¼Œè‡³æ­¤è¿™æ¡è·¯è¡Œä¸é€šï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½æŒ‰è¿™æ ·çš„æ€è·¯æ‰§è¡Œ\n\nåœ¨è¯¥æ€è·¯çš„åŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›ï¼š\næ—¢ç„¶rddä¸èƒ½åµŒå¥—rddä½¿ç”¨ï¼Œä½•ä¸å…ˆå¾—åˆ°æ‰€æœ‰çš„ç±»åˆ«idï¼Œç„¶ååœ¨å…¨é‡æ•°æ®æ€»filterå•ä¸ªç±»åˆ«idè¿›è¡Œkmeansæ“ä½œå‘¢ï¼Ÿ\n\nè¯¥ä»£ç ï¼Œæµ‹è¯•ï¼Œä¼ªä»£ç å¦‚ä¸‹ï¼š\n```\nleibieID_list = XXXXX\nleibieID_list.map(one => kmeans(one,path))\n```\n\néœ€è¦æ³¨æ„çš„æ˜¯ leibieID_list.map æ“ä½œå¹¶ä¸æ˜¯åˆ†å¸ƒå¼çš„ï¼Œè€Œæ˜¯for å¾ªç¯ï¼Œè¿™æ ·3000ä¸ªç±»åˆ«idè¿è¡Œå®Œï¼Œæ—¶é—´å¯æƒ³è€ŒçŸ¥ï¼Œæ˜¯æå…¶è€—æ—¶çš„ï¼Œæ‰€ä»¥è¿™æ¡è·¯ä¹Ÿå¤±è´¥äº†ï¼ˆä¸æ˜¯è¯´è¡Œä¸é€šï¼Œæ˜¯å› ä¸ºè€—æ—¶ï¼‰\n\n# ç¬¬äºŒæ¬¡å°è¯•\n\nç»è¿‡ä¸Šè¾¹çš„å°è¯•å‘ç°ä¸è¡Œï¼Œé‚£ä¹ˆæˆ‘æƒ³æ˜¯ä¸æ˜¯å…ˆå…¨é‡è¯»å–æ•°æ®ï¼Œç„¶åæŒ‰ç…§ç±»åˆ«IDï¼Œå°†åŒä¸€ä¸ªç±»åˆ«IDçš„æ•°æ®å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼ˆæˆ–è€…æ–‡ä»¶å¤¹ä¸‹ï¼‰ï¼Œç„¶åå†å¯¹ä¹‹æ“ä½œ\n\nå¼€å§‹å†™classify by ID çš„ä»£ç ï¼Œè¿™é‡Œé‡åˆ°äº†é—®é¢˜æ˜¯å¦‚ä½•è®©åŒä¸€ä¸ªç±»åˆ«IDçš„æ•°æ®å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä¸Šç½‘æŸ¥äº†ä¸€äº›èµ„æ–™ï¼Œå¯ä»¥å‚è€ƒä¹‹å‰æ•´ç†çš„ç¬”è®°\n\n[ Sparkå¤šè·¯å¾„è¾“å‡ºå’ŒäºŒæ¬¡æ’åº](http://blog.csdn.net/gamer_gyt/article/details/79157055)\n\nè¿™é‡Œè¾¹æœ‰å®ç°çš„åŠæ³•ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¯¹å…¨é‡æ•°æ®ï¼ˆ100Gï¼‰è¿›è¡Œshuffleçš„æ—¶å€™ï¼Œç”±äºæ•°æ®é‡ç‰¹åˆ«å¤§ï¼Œä¹Ÿç‰¹åˆ«å ç”¨èµ„æºï¼Œå¾€å¾€ä¼šå‡ºç°ä¸€äº›å†…å­˜ä¸Šçš„é”™è¯¯ã€‚\n\nè¿™é‡Œé‡‡ç”¨çš„ç­–ç•¥æ˜¯å°†å…¨é‡æ•°æ®rddè¿›è¡Œrandom splitï¼Œç„¶åforå¾ªç¯éå†splitä¹‹åçš„rddï¼Œè¿›è¡ŒsaveAsTestFileï¼Œä¿å­˜çš„ç›®å½•è¿™æ ·è®¾è®¡\n```\n/path/split=0/\n/path/split=1/\n/path/split=2/\n/path/split=3/\n    ...  ...\n```\nè¿™æ ·çš„è¯ï¼Œå°±å¯ä»¥é¿å…å¤§é‡æ•°æ® shuffle è€—è´¹èµ„æºçš„é—®é¢˜äº†ï¼Œè€Œä¸”ä¹Ÿä¸å½±å“åç»­æ•°æ®çš„ä½¿ç”¨ï¼ŒåŒæ—¶è¿™ä¸€æ­¥ä¹Ÿä¼šæŠŠç±»åˆ«idæå–å‡ºæ¥ï¼Œä¿å­˜åœ¨hdfsä¸Šï¼Œä¾›ä¸‹ä¸€æ­¥ä½¿ç”¨ã€‚\n\nç»å†äº†ä¸Šä¸€æ­¥çš„æ•°æ®å‡†å¤‡ï¼Œå¼€å§‹step 2çš„å¼€å‘ï¼Œç¬¬äºŒæ­¥çš„æ€è·¯ï¼š\nåŠ è½½ç¬¬ä¸€æ­¥ä¿å­˜çš„ç±»åˆ«id listæ–‡ä»¶ï¼Œåˆ†æˆ5ä»½ï¼Œå¯åŠ¨5ä¸ªsparkä»»åŠ¡è¿›è¡Œtrainï¼Œè‡³æ­¤ï¼Œæ€è·¯æ˜¯æ­£ç¡®çš„ï¼Œä½†å´å¿½ç•¥äº†ä¸€ä¸ªå¾ˆä¸¥æ­£çš„é—®é¢˜ï¼šæ•°æ®å€¾æ–œ\n\nç”±äºæ˜¯éšæœºå¯¹ç±»åˆ« id è¿›è¡Œåˆ†ç»„æ“ä½œï¼Œé‚£ä¹ˆä¸èƒ½ä¿è¯æ²¡ç»„ä¸­æ¯ä¸ªç±»åˆ«idå¯¹åº”çš„æ•°æ®æ¡æ•°çš„å¤§æ¦‚ä¸€è‡´æ€§ï¼Œä¹Ÿå°±æ˜¯å­˜åœ¨æŸä¸ªID æ•°æ®æ¡æ•°åªæœ‰å‡ åæ¡ï¼Œè€Œæœ‰äº›ID æ•°æ®æ¡æ•°åƒä¸‡æ¡ï¼Œè¿™ç§æƒ…å†µä¸‹å°±ä¼šå¯¼è‡´ä»£ç åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæœ‰äº›taskå¾ˆå¿«è¿è¡Œå®Œäº†ï¼Œæœ‰äº›æ‰§è¡Œäº†å¥½ä¹…ä¹Ÿæ²¡å®Œäº‹ã€‚\n\n# ç¬¬ä¸‰æ¬¡å°è¯•\næœ‰äº†ç¬¬äºŒæ¬¡çš„ç»éªŒï¼Œæƒ³æ³•å°±æ˜¯å¦‚ä½•å°†æ•°æ®æ¡æ•°å·®ä¸å¤šçš„åˆ†åˆ°åŒä¸€ç»„é‡Œï¼Œæˆ‘é‡‡ç”¨çš„æ–¹æ³•æ˜¯è¿›è¡Œç»Ÿè®¡ï¼ŒæŒ‰ç…§10çš„Xæ¬¡æ–¹å½¢å¼è¿›è¡Œåˆ†ç»„ï¼Œæ¯”å¦‚è¯´\n```\n1~10    1\n10~100  2\n100~1000    3\n....\n```\nä½†æ˜¯è¿™æ ·ä¹Ÿæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è¿™æ ·å¤§æ¦‚ç¬¦åˆæ­£å¤ªåˆ†å¸ƒï¼Œ4ã€5ã€6è¿™æ ·çš„ç»„é‡Œæ•°æ®æ¡æ•°æ¯”è¾ƒå¤šï¼Œ1ã€2ã€3å’Œ7ã€8ã€9è¿™æ ·çš„æ•°æ®æ¡æ•°å°‘ï¼Œè¿™æ ·å°±ä¼šå› ä¸º4ã€5ã€6ç»„çš„ç¨‹åºè¿è¡Œæ—¶é—´è¾ƒé•¿ï¼Œæ•´ä½“ä»»åŠ¡è¿è¡Œæ—¶é—´ä¹Ÿè¾ƒé•¿ã€‚\n\næ‰€ä»¥è¿™é‡Œé‡‡ç”¨åˆå¹¶å’Œæ‹†åˆ†çš„ç­–ç•¥ï¼Œæ¯”å¦‚è¯´å°†1,2,3åˆå¹¶åˆ°ä¸€ç»„ï¼Œ4ã€5ã€6åˆ†åˆ«æ‹†æˆä¸¤ç»„ï¼Œ7ã€8ã€9åˆæˆä¸€ç»„ï¼Œè¿™æ ·å°±ä¼šä¿è¯æ¯ç»„è¿è¡Œçš„æ—¶é—´æ˜¯å·®ä¸å¤šçš„ã€‚ï¼ˆå®é™…æƒ…å†µä¸­ï¼Œè¦æ ¹æ®æ•°æ®çš„åˆ†å¸ƒè¿›è¡Œåˆç†çš„æ‹†åˆ†å’Œåˆå¹¶ï¼‰\n\n# æ€»ç»“\nè‡³æ­¤ï¼Œé—®é¢˜ç®—æ˜¯æœ€ç»ˆè§£å†³äº†ï¼Œç›¸æ¯”åŸå…ˆçš„MRç‰ˆæœ¬ï¼Œæ—¶é—´ç¼©å‡äº†å°†è¿‘8ä¸ªå°æ—¶ï¼Œåœ¨æ•´ä¸ªä¼˜åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œå…¶å®å¯¹äºç»éªŒè¶³å¤Ÿçš„å¼€å‘è€…æ¥è¯´ï¼Œå¯èƒ½å¾ˆå¿«å°±ä¼šè§£å†³ï¼Œä½†å¯¹äºæˆ‘ä»¬è¿™äº›æ–°æ‰‹ï¼Œå¯èƒ½å°±è¦è€—è´¹äº›æ—¶é—´ï¼Œæ¶¨æ¶¨è®°æ€§äº†ï¼Œåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­å¯¹sparkä¹Ÿç®—æ˜¯æœ‰è¿›ä¸€æ­¥çš„äº†è§£äº†ã€‚\n\nå…¶ä»–çš„ç›¸å…³ç¬”è®°ï¼š\n\n- http://blog.csdn.net/gamer_gyt/article/details/79157055\n\n- http://blog.csdn.net/gamer_gyt/article/details/79135118\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["Sparkä¸å¤§æ•°æ®"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"Sparkå¤šè·¯å¾„è¾“å‡ºå’ŒäºŒæ¬¡æ’åº","url":"/2018/01/25/Spark/Sparkå¤šè·¯å¾„è¾“å‡ºå’ŒäºŒæ¬¡æ’åº/","content":"> åœ¨å®é™…åº”ç”¨åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¯¹äºSparkå¾€å¾€æœ‰å„å¼å„æ ·çš„éœ€æ±‚ï¼Œæ¯”å¦‚è¯´æƒ³MRä¸­çš„äºŒæ¬¡æ’åºï¼ŒTop Nï¼Œå¤šè·¯åŠ²è¾“å‡ºç­‰ã€‚é‚£ä¹ˆè¿™ç¯‡æ–‡ç« æˆ‘ä»¬å°±æ¥çœ‹ä¸‹è¿™å‡ ä¸ªé—®é¢˜ã€‚\n\n<!--More-->\n\n# äºŒæ¬¡æ’åº\nå‡è®¾æˆ‘ä»¬çš„æ•°æ®æ˜¯è¿™æ ·çš„ï¼š\n```\n1   2\n1   3\n1   1\n1   6\n1   4\n2   5\n2   8\n2   3\n```\n\næˆ‘ä»¬æƒ³è¦å®ç°ç¬¬ä¸€åˆ—æŒ‰é™åºæ’åˆ—ï¼Œå½“ç¬¬ä¸€åˆ—ç›¸åŒæ—¶ï¼Œç¬¬äºŒåˆ—æŒ‰é™åºæ’åˆ—\n\n\nå®šä¹‰ä¸€ä¸ªSecondSortKeyç±»ï¼š   \n```\nclass SecondSortKey(val first: Int, val second: Int)\n  extends Ordered[SecondSortKey] with Serializable {\n  override def compare(that: SecondSortKey): Int = {\n    if (this.first - that.first == 0) {\n      this.second - that.second\n    } else {\n      this.first - that.first\n    }\n  }\n}\n```\n\nç„¶åè¿™æ ·å»ä½¿ç”¨\n```\nval lines = sc.textFile(\"test.txt\")\nval pairs = lines.map { x =>\n      (new SecondSortKey(x.split(\"\\\\s+\")(0).toInt,\n        x.split(\"\\\\s+\")(1).toInt), x)\n    }\nval sortedPairs = pairs.sortByKey(false);\nsortedPairs.map(_._2).foreach(println)\n```\n\nå½“ç„¶è¿™é‡Œå¦‚æœæƒ³æŒ‰ç¬¬ä¸€åˆ—å‡åºï¼Œå½“ç¬¬ä¸€åˆ—ç›¸åŒæ—¶ï¼Œç¬¬äºŒåˆ—å‡åºçš„é¡ºåºæ’åˆ—ï¼Œåªéœ€è¦å¯¹SecondSoryKeyåšå¦‚ä¸‹ä¿®æ”¹å³å¯\n```\nclass SecondSortKey(val first: Int, val second: Int)\n  extends Ordered[SecondSortKey] with Serializable {\n  override def compare(that: SecondSortKey): Int = {\n    if (this.first - that.first !== 0) {\n      this.second - that.second\n    } else {\n      this.first - that.first\n    }\n  }\n}\n```\nå½“æ—¶ä½¿ç”¨çš„ä½¿ç”¨å»æ‰\n```\npairs.sortByKey(false)\n```\nä¸­çš„false\n\n# Top N\n\nåŒæ ·è¿˜æ˜¯ä¸Šè¾¹çš„æ•°æ®ï¼Œå‡è®¾æˆ‘ä»¬è¦å¾—åˆ°ç¬¬ä¸€åˆ—ä¸­çš„å‰äº”ä½\n```\nval lines = sc.textFile(\"test.txt\")\nval rdd = lines\n        .map(x => x.split(\"\\\\s+\"))\n        .map(x => (x(0),x(1)))\n        .sortByKey()\nrdd.take(N).foreach(println)\n```\n\n# å¤šè·¯å¾„è¾“å‡º\nè‡ªå·±åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡æœç´¢å‘ç°äº†ä¸¤ç§æ–¹æ³•\n1ï¼šè°ƒç”¨saveAsHadoopFileå‡½æ•°å¹¶è‡ªå®šä¹‰ä¸€ä¸ªOutputFormatç±»\n\nè‡ªå®šä¹‰RDDMultipleTextOutputFormatç±»\n\nRDDMultipleTextOutputFormatç±»ä¸­çš„generateFileNameForKeyValueå‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œkeyå’Œvalueå°±æ˜¯æˆ‘ä»¬RDDçš„Keyå’ŒValueï¼Œè€Œnameå‚æ•°æ˜¯æ¯ä¸ªReduceçš„ç¼–å·ã€‚æœ¬ä¾‹ä¸­æ²¡æœ‰ä½¿ç”¨è¯¥å‚æ•°ï¼Œè€Œæ˜¯ç›´æ¥å°†åŒä¸€ä¸ªKeyçš„æ•°æ®è¾“å‡ºåˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚\n```\nimport org.apache.hadoop.mapred.lib.MultipleTextOutputFormat  \n  \nclass RDDMultipleTextOutputFormat extends MultipleTextOutputFormat[Any, Any] {  \n  override def generateFileNameForKeyValue(key: Any, value: Any, name: String): String =  \n    key.asInstanceOf[String]  \n}  \n```\nè°ƒç”¨\n```\nsc.parallelize(List((\"w\", \"www\"), (\"b\", \"blog\"), (\"c\", \"com\"), (\"w\", \"bt\")))  \n      .map(value => (value._1, value._2 + \"Test\"))  \n      .partitionBy(new HashPartitioner(3))  \n      .saveAsHadoopFile(\"/iteblog\", classOf[String],classOf[String],classOf[RDDMultipleTextOutputFormat])  \n```\nè¿™é‡Œçš„\n```\nnew HashPartitioner(3)\n```\nä¸­çš„3æ˜¯æœ‰keyçš„ç§ç±»å†³å®šçš„ï¼Œå½“ç„¶åœ¨å®é™…åº”ç”¨åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½å¹¶ä¸çŸ¥é“æœ‰å¤šå°‘kï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥é€šè¿‡ä¸€ä¸ªrdd çš„ distinctæ“ä½œæ¥å¾—åˆ°å”¯ä¸€keyçš„æ•°ç›®ã€‚\n\n2ï¼šä½¿ç”¨dataframe\n```\npeople_rdd = sc.parallelize([(1, \"alice\"), (1, \"bob\"), (2,\"charlie\")])\npeople_df = people_rdd.toDF([\"number\", \"name\"])\npeople_df.write.partitionBy(\"number\").format(\"text\").save(path  )\n```\n\nå½“ç„¶è¿™ä¸¤ç§æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªç¼ºé™·ï¼Œå°±æ˜¯å½“æ•°æ®é‡ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œæ•°æ®åœ¨repartitionçš„è¿‡ç¨‹ä¸­ç‰¹åˆ«è€—è´¹èµ„æºï¼Œä¹Ÿä¼šå®¹æ˜“å‡ºç°ä»»åŠ¡failedçš„æƒ…å†µï¼Œå°ç¼–é‡‡ç”¨çš„è§£å†³åŠæ³•æ˜¯ï¼Œé€‚å½“çš„å¯¹åŸrddè¿›è¡Œsplitï¼Œç„¶åéå†æ¯ä¸ªrddï¼Œè¿›è¡Œmultioutputæ“ä½œ\n\nå½¢ä¼¼å¦‚ä¸‹ï¼š\n```\nval rdd = sc.textFile(input)\nvar split_rdd = rdd.randomSplit(Array(1.0,1.0,1.0,1.0))\nfor (one <- Array(1,2,3,4))\n{\n    split_rdd(one)XXXX\n}\n```\n------\nå‚è€ƒï¼š\n\n- [Sparkå­¦ä¹ ç¬”è®°â€”â€”äºŒæ¬¡æ’åºï¼ŒTopNï¼ŒTopNByGroup](https://andone1cc.github.io/2017/03/04/Spark/%E4%BA%8C%E6%AC%A1%E6%8E%92%E5%BA%8Ftopn/)\n- [Sparkå¤šæ–‡ä»¶è¾“å‡º(MultipleOutputFormat)](https://www.iteblog.com/archives/1281.html)\n- [scala - Write to multiple outputs by key Spark - one Spark job](https://code.i-harness.com/en/q/16e22a0)\n- [Write to multiple outputs by key Spark - one Spark job\n](https://stackoverflow.com/questions/23995040/write-to-multiple-outputs-by-key-spark-one-spark-job/26051042#26051042)\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["Sparkä¸å¤§æ•°æ®"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"Sparkæäº¤å‚æ•°è¯´æ˜å’Œå¸¸è§ä¼˜åŒ–","url":"/2018/01/23/Spark/Sparkæäº¤å‚æ•°è¯´æ˜å’Œå¸¸è§ä¼˜åŒ–/","content":"\n\n> æœ€è¿‘åœ¨æä¸€ä¸ªä»·æ ¼åˆ†ç±»æ¨¡å‹ï¼Œè™½è¯´æ˜¯åˆ†ç±»ï¼Œç”¨çš„æ˜¯kmeansç®—æ³•ï¼Œæ±‚å‡ºèšç±»ä¸­å¿ƒï¼Œå¯¹æ¯ä¸ªä»·æ ¼è¿›è¡Œçº§åˆ«å®šçº§ã€‚è™½ç„¶è¯´èµ·æ¥ç®€å•ï¼Œä½†åšèµ·æ¥å´æ˜¯å¹¶æ²¡æœ‰é‚£ä¹ˆå®¹æ˜“ï¼Œä¸åªæ˜¯å› ä¸ºæ•°æ®é‡å¤§ï¼Œåœ¨æ‰§è¡Œä»»åŠ¡æ—¶è¦ä¸æ˜¯æ•ˆç‡é—®é¢˜å°±æ˜¯shuffleæŠ¥é”™ç­‰ã€‚ä½†åœ¨è¿™æ•´ä¸ªè¿‡ç¨‹ä¸­å¯¹scalaç¼–ç¨‹,Spark rdd æœºåˆ¶ï¼Œä»¥åŠæµ·é‡æ•°æ®èƒŒæ™¯ä¸‹å¯¹ç®—æ³•çš„è®¤çŸ¥éƒ½æœ‰å¾ˆå¤§çš„æå‡ï¼Œè¿™ä¸€ç¯‡æ–‡ç« ä¸»è¦æ˜¯æ€»ç»“ä¸€äº›Sparkåœ¨shell ç»ˆç«¯æäº¤jaråŒ…ä»»åŠ¡çš„æ—¶å€™çš„ç›¸å…³çŸ¥è¯†ï¼Œåœ¨åç»­æ–‡ç« ä¼šå…·ä½“æ¶‰åŠåˆ°ç›¸å…³çš„â€å®æˆ˜ç»å†â€œã€‚\n\n<!--More-->\n\n# å¯¹Sparkçš„è®¤è¯†\n\nç”±äºä¹‹å‰æ¥è§¦è¿‡Hadoopï¼Œå¯¹Sparkä¹Ÿæ˜¯äº†è§£ä¸€äº›çš®æ¯›ï¼Œä½†ä¸­é—´éš”äº†å¥½ä¹…æ‰é‡æ–°ä½¿ç”¨sparkï¼ŒæœŸé—´ä¹Ÿäº§ç”Ÿè¿‡ä¸€äº›é”™è¯¯çš„è®¤è¯†ã€‚\n\nä¹‹å‰è§‰å¾—MapReduceè€—è´¹æ—¶é—´ï¼Œå†™ä¸€ä¸ªåŒç­‰æ•ˆæœçš„Sparkç¨‹åºå¾ˆå¿«å°±èƒ½æ‰§è¡Œå®Œï¼Œå¾ˆé•¿ä¸€æ®µæ—¶é—´è‡ªå·±éƒ½æ˜¯åœ¨æœ¬åœ°çš„å•æœºç¯å¢ƒè¿›è¡Œæµ‹è¯•å­¦ä¹ ï¼Œæ‰€ä»¥è¿™ç§é”™è¯¯çš„è®¤çŸ¥å°±ä¼šæ›´åŠ æ·±åˆ»ï¼Œä½†äº‹å®å´å¹¶éå¦‚æ­¤ï¼ŒMRä¹‹æ‰€ä»¥æ…¢æ˜¯å› ä¸ºæ¯ä¸€æ¬¡æ“ä½œæ•°æ®éƒ½å†™åœ¨äº†ç£ç›˜ä¸Šï¼Œå¤§é‡çš„IOé€ æˆäº†æ—¶é—´å’Œèµ„æºçš„æµªè´¹ï¼Œä½†æ˜¯Sparkæ˜¯åŸºäºå†…å­˜çš„è®¡ç®—å¼•æ“ï¼Œç›¸æ¯”MRï¼Œå‡å°‘çš„æ˜¯å¤§é‡çš„IOï¼Œä½†å¹¶ä¸æ˜¯è¯´ç»™ä¸€ä¸ªSparkç¨‹åºè¶³å¤Ÿçš„èµ„æºï¼Œå°±å¯ä»¥ä¸ºæ‰€æ¬²ä¸ºäº†ï¼Œåœ¨æäº¤ä¸€ä¸ªsparkç¨‹åºæ—¶ï¼Œä¸ä»…è¦è€ƒè™‘æ‰€åœ¨èµ„æºé˜Ÿåˆ—çš„æ€»ä½“æƒ…å†µï¼Œè¿˜è¦è€ƒè™‘ä»£ç æœ¬èº«çš„é«˜æ•ˆæ€§ï¼Œè¦å°½é‡é¿å…å¤§é‡çš„shuffleæ“ä½œå’Œactionæ“ä½œï¼Œå°½é‡ä½¿ç”¨åŒä¸€ä¸ªrddã€‚\n\nä¼šç”¨sparkï¼Œä¼šè°ƒapiå’Œèƒ½ç”¨å¥½sparkæ˜¯ä¸¤å›äº‹ï¼Œåœ¨è¿›è¡Œå¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œä¸ä»…è¦äº†è§£è¿è¡ŒåŸç†ï¼Œè¿˜è¦äº†è§£ä¸šåŠ¡ï¼Œå°†åˆé€‚çš„æ–¹æ³•å’Œä¸šåŠ¡åœºæ™¯åˆé€‚çš„ç»“åˆåœ¨ä¸€èµ·ï¼Œæ‰èƒ½å‘æŒ¥æœ€å¤§çš„ä»·å€¼ã€‚\n\n\n# spark-submit\nè¿›å…¥sparkçš„homeç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å¸®åŠ©\n```\nbin/spark-submit --help\n```\nsparkæäº¤ä»»åŠ¡å¸¸è§çš„ä¸¤ç§æ¨¡å¼\n1ï¼šlocal/local[K]\n\n- æœ¬åœ°ä½¿ç”¨ä¸€ä¸ªworkerçº¿ç¨‹è¿è¡Œsparkç¨‹åº\n- æœ¬åœ°ä½¿ç”¨Kä¸ªworkerçº¿ç¨‹è¿è¡Œsparkç¨‹åº\n\næ­¤ç§æ¨¡å¼ä¸‹é€‚åˆå°æ‰¹é‡æ•°æ®åœ¨æœ¬åœ°è°ƒè¯•ä»£ç \n\n2ï¼šyarn-client/yarn-cluster\n\n- yarn-clientï¼šä»¥clientæ–¹å¼è¿æ¥åˆ°YARNé›†ç¾¤ï¼Œé›†ç¾¤çš„å®šä½ç”±ç¯å¢ƒå˜é‡HADOOP_CONF_DIRå®šä¹‰ï¼Œè¯¥æ–¹å¼driveråœ¨clientè¿è¡Œã€‚\n- yarn-clusterï¼šä»¥clusteræ–¹å¼è¿æ¥åˆ°YARNé›†ç¾¤ï¼Œé›†ç¾¤çš„å®šä½ç”±ç¯å¢ƒå˜é‡HADOOP_CONF_DIRå®šä¹‰ï¼Œè¯¥æ–¹å¼driverä¹Ÿåœ¨é›†ç¾¤ä¸­è¿è¡Œã€‚\n\næ³¨æ„ï¼šè‹¥ä½¿ç”¨çš„æ˜¯æœ¬åœ°æ–‡ä»¶éœ€è¦åœ¨fileè·¯å¾„å‰åŠ ï¼šfile://\n\nåœ¨æäº¤ä»»åŠ¡æ—¶çš„å‡ ä¸ªé‡è¦å‚æ•°\n\n- executor-cores â€”â€” æ¯ä¸ªexecutorä½¿ç”¨çš„å†…æ ¸æ•°ï¼Œé»˜è®¤ä¸º1\n- num-executors â€”â€” å¯åŠ¨executorsçš„æ•°é‡ï¼Œé»˜è®¤ä¸º2\n- executor-memory â€”â€” executorå†…å­˜å¤§å°ï¼Œé»˜è®¤1G\n- driver-cores â€”â€” driverä½¿ç”¨å†…æ ¸æ•°ï¼Œé»˜è®¤ä¸º1\n- driver-memory â€”â€” driverå†…å­˜å¤§å°ï¼Œé»˜è®¤512M\n\nä¸‹è¾¹ç»™ä¸€ä¸ªæäº¤ä»»åŠ¡çš„æ ·å¼\n```\nspark-submit \\\n  --master local[5]  \\\n  --driver-cores 2   \\\n  --driver-memory 8g \\\n  --executor-cores 4 \\\n  --num-executors 10 \\\n  --executor-memory 8g \\\n  --class PackageName.ClassName XXXX.jar \\\n  --name \"Spark Job Name\" \\\n  InputPath      \\\n  OutputPath\n  \nå¦‚æœè¿™é‡Œé€šè¿‡--queue æŒ‡å®šäº†é˜Ÿåˆ—ï¼Œé‚£ä¹ˆå¯ä»¥å…å»å†™--master\n  \n```\nä»¥ä¸Šå°±æ˜¯é€šè¿‡spark-submitæ¥æäº¤ä¸€ä¸ªä»»åŠ¡\n\n# å‡ ä¸ªå‚æ•°çš„å¸¸è§„è®¾ç½®\n\n- executor_cores*num_executors\n  è¡¨ç¤ºçš„æ˜¯èƒ½å¤Ÿå¹¶è¡Œæ‰§è¡ŒTaskçš„æ•°ç›®\n  ä¸å®œå¤ªå°æˆ–å¤ªå¤§ï¼ä¸€èˆ¬ä¸è¶…è¿‡æ€»é˜Ÿåˆ— cores çš„ 25%ï¼Œæ¯”å¦‚é˜Ÿåˆ—æ€» cores 400ï¼Œæœ€å¤§ä¸è¦è¶…è¿‡100ï¼Œæœ€å°ä¸å»ºè®®ä½äº 40ï¼Œé™¤éæ—¥å¿—é‡å¾ˆå°ã€‚\n\n- executor_cores \n  ä¸å®œä¸º1ï¼å¦åˆ™ work è¿›ç¨‹ä¸­çº¿ç¨‹æ•°è¿‡å°‘ï¼Œä¸€èˆ¬ 2~4 ä¸ºå®œã€‚\n\n- executor_memory\n  ä¸€èˆ¬ 6~10g ä¸ºå®œï¼Œæœ€å¤§ä¸è¶…è¿‡20Gï¼Œå¦åˆ™ä¼šå¯¼è‡´GCä»£ä»·è¿‡é«˜ï¼Œæˆ–èµ„æºæµªè´¹ä¸¥é‡ã€‚\n\n- driver-memory \n  driver ä¸åšä»»ä½•è®¡ç®—å’Œå­˜å‚¨ï¼Œåªæ˜¯ä¸‹å‘ä»»åŠ¡ä¸yarnèµ„æºç®¡ç†å™¨å’Œtaskäº¤äº’ï¼Œé™¤éä½ æ˜¯ spark-shellï¼Œå¦åˆ™ä¸€èˆ¬ 1-2g\n\n\n---\nå¢åŠ æ¯ä¸ªexecutorçš„å†…å­˜é‡ï¼Œå¢åŠ äº†å†…å­˜é‡ä»¥åï¼Œå¯¹æ€§èƒ½çš„æå‡ï¼Œæœ‰ä¸‰ç‚¹ï¼š\n  \n- 1ã€å¦‚æœéœ€è¦å¯¹RDDè¿›è¡Œcacheï¼Œé‚£ä¹ˆæ›´å¤šçš„å†…å­˜ï¼Œå°±å¯ä»¥ç¼“å­˜æ›´å¤šçš„æ•°æ®ï¼Œå°†æ›´å°‘çš„æ•°æ®å†™å…¥ç£ç›˜ï¼Œ\nç”šè‡³ä¸å†™å…¥ç£ç›˜ã€‚å‡å°‘äº†ç£ç›˜IOã€‚\n- 2ã€å¯¹äºshuffleæ“ä½œï¼Œreduceç«¯ï¼Œä¼šéœ€è¦å†…å­˜æ¥å­˜æ”¾æ‹‰å–çš„æ•°æ®å¹¶è¿›è¡Œèšåˆã€‚å¦‚æœå†…å­˜ä¸å¤Ÿï¼Œä¹Ÿä¼šå†™å…¥ç£ç›˜ã€‚å¦‚æœç»™executoråˆ†é…æ›´å¤šå†…å­˜ä»¥åï¼Œå°±æœ‰æ›´å°‘çš„æ•°æ®ï¼Œéœ€è¦å†™å…¥ç£ç›˜ï¼Œç”šè‡³ä¸éœ€è¦å†™å…¥ç£ç›˜ã€‚å‡å°‘äº†ç£ç›˜IOï¼Œæå‡äº†æ€§èƒ½ã€‚\n- 3ã€å¯¹äºtaskçš„æ‰§è¡Œï¼Œå¯èƒ½ä¼šåˆ›å»ºå¾ˆå¤šå¯¹è±¡ã€‚å¦‚æœå†…å­˜æ¯”è¾ƒå°ï¼Œå¯èƒ½ä¼šé¢‘ç¹å¯¼è‡´JVMå †å†…å­˜æ»¡äº†ï¼Œç„¶åé¢‘ç¹GCï¼Œåƒåœ¾å›æ”¶ï¼Œminor GCå’Œfull GCã€‚ï¼ˆé€Ÿåº¦å¾ˆæ…¢ï¼‰ã€‚å†…å­˜åŠ å¤§ä»¥åï¼Œå¸¦æ¥æ›´å°‘çš„GCï¼Œåƒåœ¾å›æ”¶ï¼Œé¿å…äº†é€Ÿåº¦å˜æ…¢ï¼Œæ€§èƒ½æå‡ã€‚\n \n# å¸¸è§„æ³¨æ„äº‹é¡¹\n\n- é¢„å¤„ç†æ•°æ®ï¼Œä¸¢æ‰ä¸€äº›ä¸å¿…è¦çš„æ•°æ®\n- å¢åŠ Taskçš„æ•°é‡\n- è¿‡æ»¤æ‰ä¸€äº›å®¹æ˜“å¯¼è‡´å‘ç”Ÿå€¾æ–œçš„key\n- é¿å…åˆ›å»ºé‡å¤çš„RDD\n- å°½å¯èƒ½å¤ç”¨ä¸€ä¸ªRDD\n- å¯¹å¤šæ¬¡ä½¿ç”¨çš„RDDè¿›è¡ŒæŒä¹…åŒ–\n- å°½é‡é¿å…ä½¿ç”¨shuffleç®—å­\n- åœ¨è¦ä½¿ç”¨groupByKeyç®—å­çš„æ—¶å€™,å°½é‡ç”¨reduceByKeyæˆ–è€…aggregateByKeyç®—å­æ›¿ä»£.å› ä¸ºè°ƒç”¨groupByKeyæ—¶å€™,æŒ‰ç…§ç›¸åŒçš„keyè¿›è¡Œåˆ†ç»„,å½¢æˆRDD[key,Iterable[value]]çš„å½¢å¼,æ­¤æ—¶æ‰€æœ‰çš„é”®å€¼å¯¹éƒ½å°†è¢«é‡æ–°æ´—ç‰Œ,ç§»åŠ¨,å¯¹ç½‘ç»œæ•°æ®ä¼ è¾“é€ æˆç†è®ºä¸Šçš„æœ€å¤§å½±å“.\n-  ä½¿ç”¨é«˜æ€§èƒ½çš„ç®—å­\n\n\n\n-----\nå‚è€ƒï¼š\n1ï¼šhttp://www.cnblogs.com/haozhengfei/p/e570f24c43fa15f23ebb97929a1b7fe6.html\n2ï¼šhttps://www.jianshu.com/p/4c584a3bac7d\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["Sparkä¸å¤§æ•°æ®"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"2017å¹´ç»ˆæ€»ç»“-ç”¨å¤§æŠŠçš„æ—¶é—´ä»¿å¾¨ï¼Œå´ç”¨å‡ ä¸ªç¬é—´æˆé•¿","url":"/2017/12/31/éšæ‰‹è®°/2017å¹´ç»ˆæ€»ç»“-ç”¨å¤§æŠŠçš„æ—¶é—´ä»¿å¾¨ï¼Œå´ç”¨å‡ ä¸ªç¬é—´æˆé•¿/","content":"\n> äººæ€»è¦åœ¨ç‰¹å®šçš„é˜¶æ®µå»å®Œæˆç‰¹å®šçš„äº‹æƒ…ï¼Œç„¶åè½¬èº«å‘Šè¯‰è‡ªå·±ï¼Œç»§ç»­å¾€å‰ã€‚\n\n<!--More-->\n\n\næç¬”å†™è¿™ç¯‡æ–‡ç« ï¼Œå†…å¿ƒæ˜¯æ¯«æ— æ³¢æ¾œçš„ï¼Œæˆ–è®¸æ˜¯å› ä¸ºæ›¾ç»çš„ç»å†è®©æˆ‘æ„è¯†åˆ°é‚£ä¸€åˆ‡éƒ½æ˜¯ç¼˜çš„åŠ›æ‰€èƒ½åŠã€‚ä»¥ä¸‹çš„å†…å®¹å¯èƒ½æ²¡æœ‰ç« èŠ‚ï¼Œæ²¡æœ‰é¡ºåºï¼Œä½†éƒ½æ˜¯å¿ƒçµèƒ½å¤Ÿè§¦åŠçš„åœ°æ–¹ã€‚\n\n2017å¹´å¯¹æˆ‘ä¸ªäººæ¥è®²æ˜¯æ¯”è¾ƒé‡è¦çš„ä¸€å¹´ï¼Œå¯ä»¥è¯´æ˜¯å®Œæˆäº†è‡ªæˆ‘çš„ä¸€ä¸ªæ”¹å˜å§ï¼Œä½†æ˜¯è„±å£³ä¹‹åï¼Œéœ€è¦çš„æ˜¯æ›´åŠ åŠªåŠ›çš„å®Œå–„è‡ªæˆ‘ï¼Œè¿™æ ·æ‰èƒ½å¤Ÿé¿å…è¢«æ·˜æ±°ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´ï¼Ÿå› ä¸ºè¿™ä¸€å¹´æˆ‘è§‰å¾—å¯¹æˆ‘ä¸ªäººå½±å“æœ€å¤§çš„ä¸¤ä»¶äº‹æ˜¯ï¼šä¹°äº†é¦–å¥—æˆ¿ï¼ˆè™½ç„¶åªæ˜¯ä»˜äº†é¦–ä»˜ï¼‰ï¼›åœ¨å¹´æœ«ä¹‹æ—¶é€‰æ‹©ç¦»å¼€ï¼Œä¾¥å¹¸çš„å…¥èŒäº†äº¬ä¸œã€‚ä¸€ä¸ªæ˜¯ä¸ºâ€œå®¶åº­â€åšäº†å¿…è¦çš„å‡†å¤‡ï¼Œä¸€ä¸ªæ˜¯ä¸ºâ€œäº‹ä¸šâ€åšäº†ç‚¹ç¼€ã€‚è€Œè‡³äºå…¶ä»–çš„å¤§å¤§å°å°çš„äº‹æƒ…ï¼Œåˆ™æ˜¯17å¹´çš„äº”å‘³æ‚ç²®ï¼Œå¹¶ä¸æ˜¯é‚£ä¹ˆé‡è¦ï¼Œä½†å´ä¹Ÿç¼ºä¸€ä¸å¯ã€‚æ„Ÿè°¢17å¹´ï¼Œé‚£äº›æˆ‘è®¤è¯†çš„ï¼Œæˆ–è€…æˆ‘ä¸è®¤è¯†çš„ï¼Œå¸®åŠ©è¿‡æˆ‘çš„ï¼Œæˆ–è€…æˆ‘å¸®åŠ©è¿‡çš„äººã€‚\n\n\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šhttps://thinkgamer.blog.csdn.net/article/details/78940968\nåšä¸»å¾®åšï¼šhttp://weibo.com/234654758 \nGithubï¼šhttps://github.com/thinkgamer\n\n\n# è¿‡å¾€\näººä¸Šäº†å¹´çºªï¼Œæ€»çˆ±å›å¿†ï¼\n\nåˆšå¥½è¿™ä¸¤å¤©ï¼Œâ€œ18å²â€åˆ·çˆ†äº†æœ‹å‹åœˆå’ŒQQç©ºé—´ï¼Œæˆ–è®¸è¿™æ˜¯è¿è…¾è®¯æœ‰æ²¡æœ‰é¢„æ–™åˆ°çš„èµ·æ­»å›ç”Ÿæˆ–è€…è‹Ÿå»¶æ®‹å–˜å§ã€‚è¶æœºç¿»äº†ä¸‹æˆ‘çš„QQç©ºé—´ç›¸å†Œï¼Œçªç„¶å‘ç°äº†ï¼Œè¿™äºŒåå¤šå¹´æ¥ä»¥æ¥ï¼Œæˆ‘ä¹Ÿæ˜¯ç»å†é¢‡ä¸°ã€‚\n\nä»ä¸Šæµ·åˆ°æ±Ÿè‹ï¼Œä»æ²ˆé˜³åˆ°é•¿æ˜¥ï¼Œä»å—äº¬åˆ°å¤©æ´¥ï¼Œæœ€ååˆ°åŒ—äº¬ï¼Œè¿™ä¸€æ¡è·¯ä¸€èµ°ä¾¿æ˜¯4å¹´ã€‚\nä»åˆä¸­åˆ°é«˜ä¸­ï¼Œä»å¤§å­¦åˆ°ç¤¾ä¼šï¼Œè¿™ä¸€æ¡è·¯ä¸€èµ°ä¾¿æ˜¯11å¹´ã€‚\n\nè¿‡å¾€çš„è¿™æ¡è·¯ä¸Šé‡è§äº†å¾ˆå¤šäººï¼Œç¢°è§å¾ˆå¤šäº‹ï¼Œä½†ç»ˆç©¶è¿˜æ˜¯èµ°æ•£äº†ï¼Œçœ‹æ·¡äº†ï¼Œä¸è¿‡åº†å¹¸çš„æ˜¯é‚£äº›ä¸€ç›´è¿˜æœ‰è”ç³»çš„ï¼Œæˆ‘ä»¬è¿˜èƒ½å½¼æ­¤å«å‡ºå§“åçš„äººï¼Œä¸ç®¡æ˜¯18å²ä¹‹å‰ï¼Œè¿˜æ˜¯18å²ä¹‹åï¼Œæˆ‘æƒ³æˆ‘ä»¬æ˜¯å¹¸è¿çš„ï¼Œ\n\nå¹´å°‘çš„æˆ‘ä»¬æ›¾ç»éš¾å…ä¼šåŸ‹ä¸‹ç¾æ¶©çš„ç§å­ï¼Œåœ¨è®°å¿†æ·±å¤„è—ç€ä¸€äº›ä¸å¯å‘Šäººçš„ç§˜å¯†ï¼Œç›´åˆ°æœ‰ä¸€å¤©æˆ‘ä»¬ç›˜è†è€Œåï¼Œä¸‰å·¡é…’è¿‡ï¼Œæ‰é“å‡ºé‚£äº›ç°åœ¨æˆ‘ä»¬è®¤ä¸ºå¯ç¬‘çš„ä¸èƒ½å†å¯ç¬‘çš„ç¾æ¶©ï¼Œä»æ­¤ï¼Œç¨šå«©é’æ˜¥é‡Œçš„å”¯ä¸€ä¸€æœµç•™æ‹ï¼Œä¹Ÿè¯¥å‘Šä¸€æ®µè½ã€‚\n\nä¸€æ¯æ•¬æ˜å¤©ï¼Œä¸€æ¯æ•¬è¿‡å¾€ã€‚çµé­‚ä¸å†æ— å¤„å®‰æ”¾ã€‚\n# é‡è§\näººæœ‰äº†ç›®æ ‡ï¼Œä¾¿çˆ±èƒ¡é—¹ï¼\n\n2017å¹´ï¼Œä¸ç®¡æ˜¯å·¥ä½œï¼Œè¿˜æ˜¯è‡ªæˆ‘å­¦ä¹ éƒ½æ”¶è·äº†æŒºå¤šçŸ¥è¯†ï¼Œæ„Ÿè°¢ä¸‡ç»´æ¥å—äº†æˆ‘è¿™ä¸ªæ¯«æ— å·¥ä½œç»éªŒçš„â€œå­¦ç”Ÿâ€å§ï¼Œåœ¨è¿™é‡Œçš„ç¡®æ”¶è·äº†æŒºå¤šï¼Œè®©æˆ‘æ˜ç™½æ²¡æœ‰ç»“åˆä¸šåŠ¡çš„æŠ€æœ¯ï¼Œåªæ˜¯å‘åˆ«äººå¹å˜˜è€Œæ¯«æ— åˆ›é€ ä»·å€¼çš„åƒåœ¾ï¼Œä¸ç®¡ä½ åœ¨å“ªï¼ŒæŠ€æœ¯éƒ½æ˜¯ä¸ºäº†æ¨åŠ¨ä¸šåŠ¡çš„å¢é•¿ã€‚\n\n2017å¹´ï¼Œè¿˜æ˜¯ä¹ æƒ¯æ€§çš„å†™ä¸€äº›å­¦ä¹ ç¬”è®°ï¼Œåªä¸è¿‡æ˜¯é¢‘ç‡æ˜æ˜¾äº†é™äº†ä¸‹æ¥ï¼Œè¿™åªèƒ½å½’ç»“äºè‡ªå·±å˜å¾—æ‡’æƒ°äº†ï¼Œä»å¼€é€šåšå®¢åˆ°ç°åœ¨ï¼Œæ‰€æœ‰çš„è¡¨å±‚çš„æ”¶è·åªèƒ½é€šè¿‡è¿™äº›æµ…æ˜¾çš„æ•°æ®æ¥è¡¨è¾¾ï¼š\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20190720101149580.png\">\n</center>\nåªæ˜¯æ²¡æœ‰17å¹´å°¾çš„æ—¶å€™è®¿é—®é‡è¾¾åˆ°100Wï¼Œä¸è¿‡ä¸€åˆ‡éšç¼˜å§ã€‚\n\nä¸‹è¾¹è¿™å‡ å¼ å›¾æ˜¯æœ€è¿‘ä¸€ä¸ªæœˆçš„è®¿é—®åˆ†ææƒ…å†µï¼Œä¸ç®¡æ€æ ·ï¼Œä½ å­¦ä¹ äº†ï¼Œä¹Ÿå¸®åŠ©å…¶ä»–äººäº†ï¼Œè¿™å°±æ˜¯æˆé•¿ã€‚\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20190720101344293.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n<img src=\"https://img-blog.csdnimg.cn/20190720101550114.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n<img src=\"https://img-blog.csdnimg.cn/2019072010163376.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n<img src=\"https://img-blog.csdnimg.cn/20190720101658948.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\">\n</center>\n\n2017å¹´ï¼Œå¼€é€šäº†å¾®ä¿¡å…¬ä¼—å·ã€æ•°æ®ä¸ç®—æ³•è”ç›Ÿã€‘ï¼ˆåŸåä¸ºç å†œæ•…äº‹å¤šï¼‰ï¼Œæ²¡æœ‰åˆ»æ„çš„è¿è¥ï¼Œæ²¡æœ‰åˆ»æ„çš„ä¼ æ’­ç§¯ç´¯ç”¨æˆ·ï¼Œä¸€åˆ‡éšç¼˜ã€‚å½“ç„¶å¦‚æœä½ æƒ³åŠ å…¥æˆ‘ä»¬çš„æ•°æ®ä¸ç®—æ³•å­¦ä¹ äº¤æµç¾¤çš„è¯ï¼Œæ¬¢è¿åŠ æˆ‘çš„å¾®ä¿¡ï¼Œæ‹‰ä½ å…¥ç¾¤ï¼Œç¾¤é‡Œæœ‰å¾ˆå¤šå¤§ç‰›ï¼Œä¸å®šæ—¶è¿›è¡Œâ€œæ‰¯æ·¡â€ã€‚æˆ‘ä»¬çš„å®—æ—¨å°±æ˜¯ä»¥æŠ€æœ¯ä¼šå‹ï¼Œåˆ†äº«ä¸è¿›æ­¥ï¼æ„Ÿè°¢2017å¹´å’Œä»¥å¾€é‡è§çš„æ‰€æœ‰å¥½å‹ï¼\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n\n2017å¹´ï¼Œå¾ˆä¾¥å¹¸çš„åŠ å…¥äº†JDè¿™ä¸ªå¤§å®¶åº­ï¼Œæœªæ¥çš„ä¸€åˆ‡éƒ½æ˜¯æœªçŸ¥æ•°ï¼Œä½†ä½ èƒ½åšçš„å°±æ˜¯å‘ä»–äººå­¦ä¹ ï¼Œå›´ç»•ç€å·¥ä½œè¿›è¡Œæ·±åº¦çš„å­¦ä¹ å’Œæˆé•¿ã€‚\n\n\n# æ–°ç”Ÿ\näººè¿‡äº†18ï¼Œè¦åŠªåŠ›å‘èŠ½ï¼\n\nè¿‡å»çš„ä¸€å¹´é‡Œå®šäº†å¤ªå¤šçš„ç›®æ ‡ï¼Œç»“æœå¤§éƒ¨åˆ†éƒ½æ²¡æœ‰å®ç°ï¼Œå“ï¼Œåˆ†æä¸€ä¸‹ï¼Œå¤§éƒ¨é—¨çš„ç›®æ ‡éƒ½æ˜¯ç›²ç›®çš„ï¼Œæ²¡æœ‰å›´ç»•å·¥ä½œçš„ç›®æ ‡ï¼ˆå­¦ä¹ è§„åˆ’å§ç®—æ˜¯ï¼‰ï¼Œå…¶å®å®ç°èµ·æ¥æ˜¯æœ‰éš¾åº¦çš„ï¼Œæ‰€ä»¥æ–°çš„ä¸€å¹´é‡Œè°ƒæ•´è®¡åˆ’ï¼Œé‡æ–°å‡ºå‘ã€‚\n\n2018ä¸ä¼šå®šå¤ªå¤šçš„ç›®æ ‡ï¼Œä¸»è¦æ˜¯æƒ³åœ¨æŠ€æœ¯å’Œä¸šåŠ¡å±‚é¢æå‡ä¸‹è‡ªå·±ï¼Œä¸ç®¡æ˜¯å­¦ä¹ å¤§æ•°æ®è¿˜æ˜¯ç®—æ³•ï¼Œéƒ½ä¼šå›´ç»•åŠŸèƒ½å·¥ä½œå’Œä¸€æ¡ä¸»æ—‹å¾‹è¿›è¡Œå±•å¼€ã€‚\n\næ„Ÿè°¢ä¸€è·¯ä»¥æ¥ï¼Œé‡è§çš„æ‰€æœ‰äººï¼\n\n\n----\n\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n","tags":["å¹´ç»ˆæ€»ç»“"],"categories":["éšæ‰‹è®°"]},{"title":"Hexo-YiliaåŠ å…¥ç›¸å†ŒåŠŸèƒ½","url":"/2017/12/14/éšæ‰‹è®°/Hexo-YiliaåŠ å…¥ç›¸å†ŒåŠŸèƒ½/","content":"å‚è€ƒï¼š[ç‚¹å‡»æŸ¥çœ‹](http://maker997.com/2017/07/01/hexo-Yilia-%E4%B8%BB%E9%A2%98%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%86%8C%E5%8A%9F%E8%83%BD)\n\n<!--More-->\n\nä½†æ˜¯å…¶ä¸­æœ‰ä¸€äº›å°é—®é¢˜ï¼Œè‡ªå·±ä¾¿é‡æ–°æ•´ç†äº†ä¸€ä¸‹ï¼ˆæœ¬æ–‡é€‚ç”¨äºä½¿ç”¨githubå­˜æ”¾ç…§ç‰‡ï¼‰\n\n# ä¸»é¡µæ–°å»ºç›¸å†Œé“¾æ¥\n\nä¸»é¢˜_config.jsonæ–‡ä»¶çš„menu ä¸­åŠ å…¥ ç›¸å†Œå’Œå¯¹åº”çš„é“¾æ¥\n```\nthemes/yilia/_config.json\n\nmenu:\n  ä¸»é¡µ: /\n  ... ...\n  ç›¸å†Œ: /photos\n```\n\n# æ–°å»ºç›®å½•å¹¶æ‹·è´ç›¸åº”æ–‡ä»¶\nä½¿ç”¨çš„æ˜¯litten å¤§ç¥çš„åšå®¢ photosæ–‡ä»¶å¤¹ï¼Œå¯¹åº”çš„è·¯å¾„ä¸ºï¼š\nhttps://github.com/litten/BlogBackup/tree/master/source/photos\n\nè‡ªå·±çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„sourceæ–‡ä»¶å¤¹ä¸‹æ–°å»ºphotosæ–‡ä»¶å¤¹ï¼Œå°†ä¸‹è½½çš„å‡ ä¸ªæ–‡ä»¶æ”¾åœ¨è¯¥æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ–è€…ä¸ç”¨æ–°å»ºï¼Œç›´æ¥å°†ä¸‹è½½çš„photosæ–‡ä»¶å¤¹æ”¾åœ¨sourceç›®å½•ä¸‹ã€‚\n\n# æ–‡ä»¶ä¿®æ”¹\n\n 1. ä¿®æ”¹ ins.js æ–‡ä»¶çš„ render()å‡½æ•°\n è¿™ä¸ªå‡½æ•°æ˜¯ç”¨æ¥æ¸²æŸ“æ•°æ®çš„\nä¿®æ”¹å›¾ç‰‡çš„è·¯å¾„åœ°å€.minSrc å°å›¾çš„è·¯å¾„. src å¤§å›¾çš„è·¯å¾„.ä¿®æ”¹ä¸ºè‡ªå·±çš„å›¾ç‰‡è·¯å¾„(githubçš„è·¯å¾„)\nä¾‹å¦‚æˆ‘çš„ä¸ºï¼š\n```\nvar minSrc = 'https://raw.githubusercontent.com/Thinkgamer/GitBlog/master/min_photos/' + data.link[i] + '.min.jpg';\nvar src = 'https://raw.githubusercontent.com/Thinkgamer/GitBlog/master/photos/' + data.link[i];\n\n```\n# ç”Ÿæˆjson\n1ï¼šä¸‹è½½ç›¸åº”pythonå·¥å…·æ–‡ä»¶\n\n- tools.py\n- ImageProcess.py\n\nä¸‹è½½åœ°å€ï¼šhttps://github.com/Thinkgamer/GitBlog\n\n2ï¼šæ–°å»ºphotoså’Œmin_photosæ–‡ä»¶å¤¹\nåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºï¼Œç”¨æ¥å­˜æ”¾ç…§ç‰‡å’Œå‹ç¼©åçš„ç…§ç‰‡\n```\nmkdir photos\nmkdir min_photos\n```\n3ï¼špyæ–‡ä»¶å’Œæ–‡ä»¶å¤¹éƒ½æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹\n\n4ï¼šç”Ÿæˆjson\næ‰§è¡Œ\n```\npython tools.py\n```\nå¦‚æœæç¤ºï¼š\n```\nTraceback (most recent call last):\n  File \"tools.py\", line 13, in <module>\n    from PIL import Image\nImportError: No module named PIL\n```\nè¯´æ˜ä½ æ²¡æœ‰å®‰è£…pillowï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…å³å¯\n```\npip install pillow\n```\n\nå¦‚æœæŠ¥é”™ï¼š\n```\nValueError: time data 'DSC' does not match format '%Y-%m-%d'\n```\nè¯´æ˜ä½ ç…§ç‰‡çš„å‘½åæ–¹å¼ä¸åˆæ ¼ï¼Œè¿™é‡Œå¿…é¡»å‘½åä¸ºä»¥ä¸‹è¿™æ ·çš„æ ¼å¼ï¼ˆå½“ç„¶æ—¶é—´æ˜¯éšæ„çš„ï¼‰\n```\n2016-10-12_xxx.jpg/png\n```\nokï¼Œè‡³æ­¤ä¼šåœ¨min_photosæ–‡ä»¶å¤¹ä¸‹ç”ŸæˆåŒåçš„æ–‡ä»¶ï¼Œä½†æ˜¯å¤§å°ä¼šå°å¾ˆå¤š\n\n# æœ¬åœ°é¢„è§ˆå’Œéƒ¨ç½²\n## æœ¬åœ°é¢„è§ˆ\né¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ\n```\nhexo s\n```\næµè§ˆå™¨4000ç«¯å£è®¿é—®ï¼ŒæŒ‰ç…§ä¸Šè¾¹çš„æ–¹å¼è¿›è¡Œé…ç½®ï¼Œæ­£å¸¸æƒ…å†µä¸‹ä½ æ˜¯çœ‹ä¸åˆ°å›¾ç‰‡çš„ï¼Œé€šè¿‡è°ƒè¯•å¯ä»¥å‘ç°å›¾ç‰‡çš„urlä¸­åç¼€å˜æˆäº† xxx.jpg.jpgï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å»æ‰ä¸€ä¸ªjpg\n\næ”¹æ­£æ–¹æ³•\nins.js/render å‡½æ•°\n```\nvar minSrc = 'https://raw.githubusercontent.com/Thinkgamer/GitBlog/master/min_photos/' + data.link[i] + '.min.jpg';\n\næ¢æˆ\n\nvar minSrc = 'https://raw.githubusercontent.com/Thinkgamer/GitBlog/master/min_photos/' + data.link[i];\n\næ³¨é‡Šæ‰è¯¥è¡Œï¼š\nsrc += '.jpg'; \n```\n\nåˆ°è¿™é‡Œæ²¡å®Œï¼Œè·¯å¾„éƒ½å¯¹äº†ï¼Œä½†æ˜¯åœ¨æµè§ˆå™¨ä¸­è¿˜æ˜¯ä¸èƒ½çœ‹åˆ°å›¾ç‰‡ï¼Œè°ƒè¯•å‘ç°ï¼Œä¸‹è½½å¤§ç¥çš„photosæ–‡ä»¶å¤¹çš„ins.jsä¸­æœ‰ä¸€è¡Œä»£ç ï¼Œé¥®ç”¨äº†ä¸€å¼ å›¾ç‰‡ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ä½ çš„é¡¹ç›®ä¸­ï¼Œè¿™å¼ å›¾ç‰‡æ˜¯ä¸å­˜åœ¨çš„ï¼Œæ”¹æ­£åŠæ³•å°±æ˜¯åœ¨å¯¹åº”ç›®å½•ä¸‹æ”¾ä¸€å¼ å›¾ç‰‡ï¼Œå¹¶ä¿®æ”¹ç›¸åº”çš„åå­—\n\n```\nsrc=\"/assets/img/empty.png\n```\n\nokï¼Œè‡³æ­¤åˆ·æ–°æµè§ˆå™¨æ˜¯å¯ä»¥çœ‹åˆ°å›¾ç‰‡çš„ï¼Œå¦‚æœè¿˜çœ‹ä¸åˆ°ï¼Œåº”è¯¥å°±æ˜¯æµè§ˆå™¨ç¼“å­˜é—®é¢˜äº†ï¼Œå¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œå¯ä»¥åŠ æˆ‘å¾®ä¿¡è¿›è¡Œæ²Ÿé€šï¼šgyt13342445911\n\n\n----\n\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n","tags":["éšæ‰‹è®°"],"categories":["éšæ‰‹è®°"]},{"title":"æ¢¯åº¦ç®—æ³•ä¹‹æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼Œéšæœºæ¢¯åº¦ä¸‹é™å’Œå°æ‰¹é‡æ¢¯åº¦ä¸‹é™","url":"/2017/12/14/æœºå™¨å­¦ä¹ /æ¢¯åº¦ç®—æ³•ä¹‹æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼Œéšæœºæ¢¯åº¦ä¸‹é™å’Œå°æ‰¹é‡æ¢¯åº¦ä¸‹é™/","content":"\nåœ¨æœºå™¨å­¦ä¹ é¢†åŸŸï¼Œä½“æ¢¯åº¦ä¸‹é™ç®—æ³•åˆ†ä¸ºä¸‰ç§\n\n- æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ˆBGDï¼ŒBatch gradient descent algorithmï¼‰\n- éšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ˆSGDï¼ŒStochastic gradient descent algorithmï¼‰\n- å°æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ˆMBGDï¼ŒMini-batch gradient descent algorithmï¼‰\n<!--More-->\n\n# æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•\nBGDæ˜¯æœ€åŸå§‹çš„æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œæ¯ä¸€æ¬¡è¿­ä»£ä½¿ç”¨å…¨éƒ¨çš„æ ·æœ¬ï¼Œå³æƒé‡çš„è¿­ä»£å…¬å¼ä¸­(å…¬å¼ä¸­ç”¨$\\theta$ä»£æ›¿$\\theta_i$)ï¼Œ\n\n\n$$\n\\jmath (\\theta _0,\\theta _1,...,\\theta _n)=\\sum_{i=0}^{m}( h_\\theta(x_0,x_1,...,x_n)-y_i )^2        \n$$\n$$\n\\theta _i = \\theta _i - \\alpha \\frac{\\partial \\jmath (\\theta _1,\\theta _2,...,\\theta _n)}{\\partial \\theta _i}\n$$\n$$\nå…¬å¼(1)\n$$\n\nè¿™é‡Œçš„mä»£è¡¨æ‰€æœ‰çš„æ ·æœ¬ï¼Œè¡¨ç¤ºä»ç¬¬ä¸€ä¸ªæ ·æœ¬éå†åˆ°æœ€åä¸€ä¸ªæ ·æœ¬ã€‚\n\nç‰¹ç‚¹ï¼š\n\n- èƒ½è¾¾åˆ°å…¨å±€æœ€ä¼˜è§£ï¼Œæ˜“äºå¹¶è¡Œå®ç°\n- å½“æ ·æœ¬æ•°ç›®å¾ˆå¤šæ—¶ï¼Œè®­ç»ƒè¿‡ç¨‹ç¼“æ…¢\n\n# éšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•\nSGDçš„æ€æƒ³æ˜¯æ›´æ–°æ¯ä¸€ä¸ªå‚æ•°æ—¶éƒ½ä½¿ç”¨ä¸€ä¸ªæ ·æœ¬æ¥è¿›è¡Œæ›´æ–°ï¼Œå³å…¬å¼ï¼ˆ1ï¼‰ä¸­mä¸º1ã€‚æ¯æ¬¡æ›´æ–°å‚æ•°éƒ½åªä½¿ç”¨ä¸€ä¸ªæ ·æœ¬ï¼Œè¿›è¡Œå¤šæ¬¡æ›´æ–°ã€‚è¿™æ ·åœ¨æ ·æœ¬é‡å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½åªç”¨åˆ°å…¶ä¸­çš„ä¸€éƒ¨åˆ†æ ·æœ¬å°±èƒ½å¾—åˆ°æœ€ä¼˜è§£äº†ã€‚\nä½†æ˜¯ï¼ŒSGDä¼´éšçš„ä¸€ä¸ªé—®é¢˜æ˜¯å™ªéŸ³è¾ƒBGDè¦å¤šï¼Œä½¿å¾—SGDå¹¶ä¸æ˜¯æ¯æ¬¡è¿­ä»£éƒ½å‘ç€æ•´ä½“æœ€ä¼˜åŒ–æ–¹å‘ã€‚\n\nç‰¹ç‚¹ï¼š\n- è®­ç»ƒé€Ÿåº¦å¿«\n- å‡†ç¡®åº¦ä¸‹é™ï¼Œå¹¶ä¸æ˜¯æœ€ä¼˜è§£ï¼Œä¸æ˜“äºå¹¶è¡Œå®ç°\n\n# å°æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•\nMBGDçš„ç®—æ³•æ€æƒ³å°±æ˜¯åœ¨æ›´æ–°æ¯ä¸€å‚æ•°æ—¶éƒ½ä½¿ç”¨ä¸€éƒ¨åˆ†æ ·æœ¬æ¥è¿›è¡Œæ›´æ–°ï¼Œä¹Ÿå°±æ˜¯å…¬å¼ï¼ˆ1ï¼‰ä¸­çš„mçš„å€¼å¤§äº1å°äºæ‰€æœ‰æ ·æœ¬çš„æ•°é‡ã€‚\n\nç›¸å¯¹äºéšæœºæ¢¯åº¦ä¸‹é™ï¼ŒMini-batchæ¢¯åº¦ä¸‹é™é™ä½äº†æ”¶æ•›æ³¢åŠ¨æ€§ï¼Œå³é™ä½äº†å‚æ•°æ›´æ–°çš„æ–¹å·®ï¼Œä½¿å¾—æ›´æ–°æ›´åŠ ç¨³å®šã€‚ç›¸å¯¹äºæ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼Œå…¶æé«˜äº†æ¯æ¬¡å­¦ä¹ çš„é€Ÿåº¦ã€‚å¹¶ä¸”å…¶ä¸ç”¨æ‹…å¿ƒå†…å­˜ç“¶é¢ˆä»è€Œå¯ä»¥åˆ©ç”¨çŸ©é˜µè¿ç®—è¿›è¡Œé«˜æ•ˆè®¡ç®—ã€‚ä¸€èˆ¬è€Œè¨€æ¯æ¬¡æ›´æ–°éšæœºé€‰æ‹©[50,256]ä¸ªæ ·æœ¬è¿›è¡Œå­¦ä¹ ï¼Œä½†æ˜¯ä¹Ÿè¦æ ¹æ®å…·ä½“é—®é¢˜è€Œé€‰æ‹©ï¼Œå®è·µä¸­å¯ä»¥è¿›è¡Œå¤šæ¬¡è¯•éªŒï¼Œé€‰æ‹©ä¸€ä¸ªæ›´æ–°é€Ÿåº¦ä¸æ›´æ¬¡æ¬¡æ•°éƒ½è¾ƒé€‚åˆçš„æ ·æœ¬æ•°ã€‚mini-batchæ¢¯åº¦ä¸‹é™å¯ä»¥ä¿è¯æ”¶æ•›æ€§ï¼Œå¸¸ç”¨äºç¥ç»ç½‘ç»œä¸­ã€‚\n\n\n# è¡¥å……\nåœ¨æ ·æœ¬é‡è¾ƒå°çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œæ ·æœ¬é‡è¾ƒå¤§çš„æƒ…å†µæˆ–è€…çº¿ä¸Šï¼Œå¯ä»¥ä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•æˆ–è€…å°æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•ã€‚\n\nåœ¨æœºå™¨å­¦ä¹ ä¸­çš„æ— çº¦æŸä¼˜åŒ–ç®—æ³•ï¼Œé™¤äº†æ¢¯åº¦ä¸‹é™ä»¥å¤–ï¼Œè¿˜æœ‰å‰é¢æåˆ°çš„æœ€å°äºŒä¹˜æ³•ï¼Œæ­¤å¤–è¿˜æœ‰ç‰›é¡¿æ³•å’Œæ‹Ÿç‰›é¡¿æ³•ã€‚\n\næ¢¯åº¦ä¸‹é™æ³•å’Œæœ€å°äºŒä¹˜æ³•ç›¸æ¯”ï¼Œæ¢¯åº¦ä¸‹é™æ³•éœ€è¦é€‰æ‹©æ­¥é•¿ï¼Œè€Œæœ€å°äºŒä¹˜æ³•ä¸éœ€è¦ã€‚æ¢¯åº¦ä¸‹é™æ³•æ˜¯è¿­ä»£æ±‚è§£ï¼Œæœ€å°äºŒä¹˜æ³•æ˜¯è®¡ç®—è§£æè§£ã€‚å¦‚æœæ ·æœ¬é‡ä¸ç®—å¾ˆå¤§ï¼Œä¸”å­˜åœ¨è§£æè§£ï¼Œæœ€å°äºŒä¹˜æ³•æ¯”èµ·æ¢¯åº¦ä¸‹é™æ³•è¦æœ‰ä¼˜åŠ¿ï¼Œè®¡ç®—é€Ÿåº¦å¾ˆå¿«ã€‚ä½†æ˜¯å¦‚æœæ ·æœ¬é‡å¾ˆå¤§ï¼Œç”¨æœ€å°äºŒä¹˜æ³•ç”±äºéœ€è¦æ±‚ä¸€ä¸ªè¶…çº§å¤§çš„é€†çŸ©é˜µï¼Œè¿™æ—¶å°±å¾ˆéš¾æˆ–è€…å¾ˆæ…¢æ‰èƒ½æ±‚è§£è§£æè§£äº†ï¼Œä½¿ç”¨è¿­ä»£çš„æ¢¯åº¦ä¸‹é™æ³•æ¯”è¾ƒæœ‰ä¼˜åŠ¿ã€‚\n\næ¢¯åº¦ä¸‹é™æ³•å’Œç‰›é¡¿æ³•/æ‹Ÿç‰›é¡¿æ³•ç›¸æ¯”ï¼Œä¸¤è€…éƒ½æ˜¯è¿­ä»£æ±‚è§£ï¼Œä¸è¿‡æ¢¯åº¦ä¸‹é™æ³•æ˜¯æ¢¯åº¦æ±‚è§£ï¼Œè€Œç‰›é¡¿æ³•/æ‹Ÿç‰›é¡¿æ³•æ˜¯ç”¨äºŒé˜¶çš„æµ·æ£®çŸ©é˜µçš„é€†çŸ©é˜µæˆ–ä¼ªé€†çŸ©é˜µæ±‚è§£ã€‚ç›¸å¯¹è€Œè¨€ï¼Œä½¿ç”¨ç‰›é¡¿æ³•/æ‹Ÿç‰›é¡¿æ³•æ”¶æ•›æ›´å¿«ã€‚ä½†æ˜¯æ¯æ¬¡è¿­ä»£çš„æ—¶é—´æ¯”æ¢¯åº¦ä¸‹é™æ³•é•¿ã€‚\n\n# sklearnä¸­çš„SGD\nsklearnå®˜ç½‘ä¸ŠæŸ¥äº†ä¸€ä¸‹ï¼Œå¹¶æ²¡æœ‰æ‰¾åˆ°BGDå’ŒMBGDçš„ç›¸å…³æ–‡æ¡£ï¼Œåªæ˜¯çœ‹åˆ°å¯SGDçš„ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥ç›´æ¥å»å®˜ç½‘çœ‹è‹±æ–‡æ–‡æ¡£ï¼Œç‚¹å‡»SGDæŸ¥çœ‹ï¼š[SGD](http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.SGDClassifier.html)ï¼Œè¿™ä¹Ÿæœ‰ä¸€ä¸ªä¸­æ–‡çš„ [SGD](http://sklearn.lzjqsdd.com/modules/sgd.html)\n\n```\nIn [1]: from sklearn.linear_model import SGDClassifier\n\nIn [2]: X = [[0., 0.], [1., 1.]]\n\nIn [3]: y = [0, 1]\n\nIn [4]: clf = SGDClassifier(loss=\"hinge\", penalty=\"l2\")\n\nIn [5]: clf.fit(X, y)\nOut[5]: \nSGDClassifier(alpha=0.0001, average=False, class_weight=None, epsilon=0.1,\n       eta0=0.0, fit_intercept=True, l1_ratio=0.15,\n       learning_rate='optimal', loss='hinge', n_iter=5, n_jobs=1,\n       penalty='l2', power_t=0.5, random_state=None, shuffle=True,\n       verbose=0, warm_start=False)\n\nIn [6]:  clf.predict([[2., 2.]])\nOut[6]: array([1])\n\nIn [7]: clf.coef_ \nOut[7]: array([[ 9.91080278,  9.91080278]])\n\nIn [8]: clf.intercept_ \nOut[8]: array([-9.97004991])\n```\nå‚è€ƒï¼š\n\n- https://www.cnblogs.com/pinard/p/5970503.html\n- http://blog.csdn.net/uestc_c2_403/article/details/74910107\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"æ¢¯åº¦ç®—æ³•ä¹‹æ¢¯åº¦ä¸Šå‡å’Œæ¢¯åº¦ä¸‹é™","url":"/2017/12/14/æœºå™¨å­¦ä¹ /æ¢¯åº¦ç®—æ³•ä¹‹æ¢¯åº¦ä¸Šå‡å’Œæ¢¯åº¦ä¸‹é™/","content":"\n> ç¬¬ä¸€æ¬¡çœ‹è§éšæœºæ¢¯åº¦ä¸Šå‡ç®—æ³•æ˜¯çœ‹ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹è¿™æœ¬ä¹¦ï¼Œå½“æ—¶ä¹Ÿæ˜¯ä¸€çŸ¥åŠè§£ï¼Œåªæ˜¯å¤§æ¦‚çŸ¥é“å’Œé«˜ç­‰æ•°å­¦ä¸­çš„å‡½æ•°æ±‚å¯¼æœ‰ä¸€å®šçš„å…³ç³»ã€‚ä¸‹è¾¹æˆ‘ä»¬å°±å¥½å¥½ç ”ç©¶ä¸‹éšæœºæ¢¯åº¦ä¸Šå‡ï¼ˆä¸‹é™ï¼‰å’Œæ¢¯åº¦ä¸Šå‡ï¼ˆä¸‹é™ï¼‰ã€‚\n\n<!--More-->\n\n# é«˜æ•°ä¸­çš„å¯¼æ•°\nè®¾å¯¼æ•° y = f(x) åœ¨ $ x_0 $çš„æŸä¸ªé‚»åŸŸå†…æœ‰å®šä¹‰ï¼Œå½“è‡ªå˜é‡ä» $ x_0 $ å˜æˆ\n$$\nx_{0} + \\Delta x\n$$\nå‡½æ•°y=f(x)çš„å¢é‡\n\n\n$$\n\\Delta y = f(x_0 + \\Delta x) - f(x_0)\n$$\nä¸è‡ªå˜é‡çš„å¢é‡ $ \\Delta x $ ä¹‹æ¯”ï¼š\n\n\n$$\n\\frac{ \\Delta y }{ \\Delta x } = \\frac{ f(x_0 + \\Delta x)-f(x_0) }{ \\Delta x }\n$$\nç§°ä¸ºf(x)çš„å¹³å‡å˜åŒ–ç‡ã€‚\nå¦‚ $ \\Delta x \\rightarrow 0 $ å¹³å‡å˜åŒ–ç‡çš„æé™\n$$\n\\lim_{\\Delta x \\rightarrow 0} \\frac{ \\Delta y }{ \\Delta x } = \\lim_{\\Delta x  \\rightarrow 0} \\frac{ f(x_0 + \\Delta x)-f(x_0) }{ \\Delta x }\n$$\nå­˜åœ¨ï¼Œåˆ™ç§°æé™å€¼ä¸ºf(x)åœ¨$ x_0 $ å¤„çš„å¯¼æ•°ï¼Œå¹¶è¯´f(x)åœ¨$ x_0 $ å¤„å¯å¯¼æˆ–æœ‰å¯¼æ•°ã€‚å½“å¹³å‡å˜åŒ–ç‡æé™ä¸å­˜åœ¨æ—¶ï¼Œå°±è¯´f(x)åœ¨ $ x_0 $ å¤„ä¸å¯å¯¼æˆ–æ²¡æœ‰å¯¼æ•°ã€‚\n\nå…³äºå¯¼æ•°çš„è¯´æ˜\n\n1ï¼‰ç‚¹å¯¼æ•°æ˜¯å› å˜é‡åœ¨$ x_0 $ å¤„çš„å˜åŒ–ç‡ï¼Œå®ƒåæ˜ äº†å› å˜é‡éšè‡ªå˜é‡çš„å˜åŒ–è€Œå˜åŒ–çš„å¿«æ…¢æˆéƒ½\n\n2ï¼‰å¦‚æœå‡½æ•°y = f(x)åœ¨å¼€åŒºé—´ I å†…çš„æ¯ç‚¹éƒ½å¯å¯¼ï¼Œå°±ç§°f(x)åœ¨å¼€åŒºé—´ I å†…å¯å¯¼\n\n3ï¼‰å¯¹äºä»»ä¸€ x å±äº I ï¼Œéƒ½å¯¹åº”ç€å‡½æ•°f(x)çš„ä¸€ä¸ªå¯¼æ•°ï¼Œè¿™ä¸ªå‡½æ•°å«åšåŸæ¥å‡½æ•°f(x)çš„å¯¼å‡½æ•°\n\n4ï¼‰å¯¼å‡½æ•°åœ¨x1 å¤„ ä¸º 0ï¼Œè‹¥ x<1 æ—¶ï¼Œf'(x) > 0 ï¼Œè¿™ f(x) é€’å¢ï¼Œè‹¥f'(x)<0 ï¼Œf(x)é€’å‡\n\n5ï¼‰f'(x0) è¡¨ç¤ºæ›²çº¿y=f(x)åœ¨ç‚¹ ï¼ˆx0,f($x_0$)ï¼‰å¤„çš„åˆ‡çº¿æ–œç‡\n\n\n# åå¯¼æ•°\n\nå‡½æ•°z=f(x,y)åœ¨ç‚¹(x0,y0)çš„æŸä¸€é‚»åŸŸå†…æœ‰å®šä¹‰ï¼Œå½“yå›ºå®šåœ¨y0è€Œxåœ¨ $x_0$ å¤„æœ‰å¢é‡$ \\Delta x $ æ—¶ï¼Œç›¸åº”çš„æœ‰å‡½æ•°å¢é‡\n$$\nf(x_0 + \\Delta x, y_0) - f(x_0,y_0)\n$$\nå¦‚æœ\n$$\n\\lim_{\\Delta x\\rightarrow 0 } \\frac {f(x_0 + \\Delta x, y_0) - f(x_0,y_0)}{\\Delta x}\n$$\nå­˜åœ¨ï¼Œåˆ™ç§°z=f(x,y)åœ¨ç‚¹($x_0$,$y_0$)å¤„å¯¹xçš„åå¯¼æ•°ï¼Œè®°ä¸ºï¼š$ f_x(x_0,y_0) $\n\n\nå¦‚æœå‡½æ•°z=f(x,y)åœ¨åŒºåŸŸDå†…ä»»ä¸€ç‚¹(x,y)å¤„å¯¹xçš„åå¯¼æ•°éƒ½å­˜åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªåå¯¼æ•°å°±æ˜¯x,yçš„å‡½æ•°ï¼Œå®ƒå°±ç§°ä¸ºå‡½æ•°z=f(x,y)å¯¹è‡ªå˜é‡xçš„åå¯¼æ•°ï¼Œè®°åš\n$$\n\\frac{ \\partial z }{ \\partial x } , \\frac{ \\partial f }{ \\partial x } , z_x , f_x(x,y), \n$$\n\nåå¯¼æ•°çš„æ¦‚å¿µå¯ä»¥æ¨å¹¿åˆ°äºŒå…ƒä»¥ä¸Šçš„å‡½æ•°ï¼Œå¦‚ u = f(x,y,z)åœ¨x,y,zå¤„\n$$\nf_x(x,y,z)=\\lim_{\\Delta x \\rightarrow 0} \\frac{f(x + \\Delta x,y,z) -f(x,y,z)}{\\Delta x}\n$$\n$$\nf_y(x,y,z)=\\lim_{\\Delta y \\rightarrow 0} \\frac{f(x,y + \\Delta y,z) -f(x,y,z)}{\\Delta y}\n$$\n$$\nf_z(x,y,z)=\\lim_{\\Delta z \\rightarrow 0} \\frac{f(x,y,z + \\Delta z) -f(x,y,z)}{\\Delta z}\n$$\nå¯ä»¥çœ‹å‡ºå¯¼æ•°ä¸åå¯¼æ•°æœ¬è´¨æ˜¯ä¸€è‡´çš„ï¼Œéƒ½æ˜¯è‡ªå˜é‡è¶‹è¿‘äº0æ—¶ï¼Œå‡½æ•°å€¼çš„å˜åŒ–ä¸è‡ªå˜é‡çš„å˜åŒ–é‡æ¯”å€¼çš„æé™ï¼Œç›´è§‚çš„è¯´ï¼Œåå¯¼æ•°ä¹Ÿå°±æ˜¯å‡½æ•°åœ¨æŸä¸€ç‚¹æ²¿åæ ‡è½´æ­£æ–¹å‘çš„å˜åŒ–ç‡ã€‚\n\nåŒºåˆ«ï¼š\nå¯¼æ•°æŒ‡çš„æ˜¯ä¸€å…ƒå‡½æ•°ä¸­ï¼Œå‡½æ•°y=f(x)æŸä¸€ç‚¹æ²¿xè½´æ­£æ–¹å‘çš„çš„å˜åŒ–ç‡ï¼›\nåå¯¼æ•°æŒ‡çš„æ˜¯å¤šå…ƒå‡½æ•°ä¸­ï¼Œå‡½æ•°y=f(x,y,z)åœ¨æŸä¸€ç‚¹æ²¿æŸä¸€åæ ‡è½´æ­£æ–¹å‘çš„å˜åŒ–ç‡ã€‚\n\nåå¯¼æ•°çš„å‡ ä½•æ„ä¹‰ï¼š\nåå¯¼æ•°$ z = f_x(x_0,y_0)$è¡¨ç¤ºçš„æ˜¯æ›²é¢è¢« $ y=y_0 $ æ‰€æˆªå¾—çš„æ›²çº¿åœ¨ç‚¹Må¤„çš„åˆ‡çº¿$ M_0T_x $å¯¹xè½´çš„æ–œç‡\nåå¯¼æ•°$ z = f_y(x_0,y_0)$è¡¨ç¤ºçš„æ˜¯æ›²é¢è¢« $ x=x_0 $ æ‰€æˆªå¾—çš„æ›²çº¿åœ¨ç‚¹Må¤„çš„åˆ‡çº¿$ M_0T_y $å¯¹yè½´çš„æ–œç‡\n\nä¾‹å­ï¼š\næ±‚ $z = x^2 + 3 xy+y^2 $åœ¨ç‚¹(1,2)å¤„çš„åå¯¼æ•°ã€‚\n$$\n\\frac{ \\partial z}{\\partial x} = 2x +3y\n$$\n$$\n\\frac{ \\partial z}{\\partial y} = 2y +3x\n$$\næ‰€ä»¥:\n$z_x(x=1,y=2) = 8$  \n$z_y(x=1,y=2) = 7$\n\n# æ–¹å‘å¯¼æ•°\n$$\n\\frac{ \\partial }{ \\partial l }  f(x_0,x_1,...,x_n) = \\lim_{\\rho \\rightarrow 0} \\frac{\\Delta y}{ \\Delta x } = \\lim_{\\rho \\rightarrow 0} \\frac{ f(x_0 + \\Delta x_0,...,x_j + \\Delta x_j,...,x_n + \\Delta x_n)-f(x_0,...,x_j,...,x_n)}{ \\rho }\n$$\n$$\n\\rho = \\sqrt{ (\\Delta x_0)^{2} +...+(\\Delta x_j)^{2}+...+(\\Delta x_n)^{2}}\n$$\nå‰è¾¹å¯¼æ•°å’Œåå¯¼æ•°çš„å®šä¹‰ä¸­ï¼Œå‡æ˜¯æ²¿åæ ‡è½´æ­£æ–¹å‘è®¨è®ºå‡½æ•°çš„å˜åŒ–ç‡ã€‚é‚£ä¹ˆå½“è®¨è®ºå‡½æ•°æ²¿ä»»æ„æ–¹å‘çš„å˜åŒ–ç‡æ—¶ï¼Œä¹Ÿå°±å¼•å‡ºäº†æ–¹å‘å¯¼æ•°çš„å®šä¹‰ï¼Œå³ï¼šæŸä¸€ç‚¹åœ¨æŸä¸€è¶‹è¿‘æ–¹å‘ä¸Šçš„å¯¼æ•°å€¼ã€‚\n\né€šä¿—çš„è§£é‡Šæ˜¯ï¼š æˆ‘ä»¬ä¸ä»…è¦çŸ¥é“å‡½æ•°åœ¨åæ ‡è½´æ­£æ–¹å‘ä¸Šçš„å˜åŒ–ç‡ï¼ˆå³åå¯¼æ•°ï¼‰ï¼Œè€Œä¸”è¿˜è¦è®¾æ³•æ±‚å¾—å‡½æ•°åœ¨å…¶ä»–ç‰¹å®šæ–¹å‘ä¸Šçš„å˜åŒ–ç‡ã€‚è€Œæ–¹å‘å¯¼æ•°å°±æ˜¯å‡½æ•°åœ¨å…¶ä»–ç‰¹å®šæ–¹å‘ä¸Šçš„å˜åŒ–ç‡ã€‚ \nã€€\n\n# æ¢¯åº¦\nä¸æ–¹å‘å¯¼æ•°æœ‰ä¸€å®šçš„å…³è”ï¼Œåœ¨å¾®ç§¯åˆ†é‡Œé¢ï¼Œå¯¹å¤šå…ƒå‡½æ•°çš„å‚æ•°æ±‚ $ \\partial  $ åå¯¼æ•°ï¼ŒæŠŠæ±‚å¾—çš„å„ä¸ªå‚æ•°çš„åå¯¼æ•°ä»¥å‘é‡çš„å½¢å¼å†™å‡ºæ¥ï¼Œå°±æ˜¯æ¢¯åº¦ã€‚æ¯”å¦‚å‡½æ•°f(x,y), åˆ†åˆ«å¯¹x,yæ±‚åå¯¼æ•°ï¼Œæ±‚å¾—çš„æ¢¯åº¦å‘é‡å°±æ˜¯ $\n( \\frac{ \\partial f }{ \\partial x },\\frac{ \\partial f }{ \\partial y })^T\n$ ,ç®€ç§°grad f(x,y)æˆ–è€… $â–½f(x,y)$ã€‚å¯¹äºåœ¨ç‚¹$(x_0,y_0)$çš„å…·ä½“æ¢¯åº¦å‘é‡å°±æ˜¯$( \\frac{ \\partial f }{ \\partial x_0 },\\frac{ \\partial f }{ \\partial y_0 })^T$.æˆ–è€…$â–½f(x_0,y_0)$ï¼Œå¦‚æœæ˜¯3ä¸ªå‚æ•°çš„å‘é‡æ¢¯åº¦ï¼Œå°±æ˜¯ $( \\frac{ \\partial f }{ \\partial x },\\frac{ \\partial f }{ \\partial y },\\frac{ \\partial f }{ \\partial z })^T$,ä»¥æ­¤ç±»æ¨ã€‚\n\né‚£ä¹ˆè¿™ä¸ªæ¢¯åº¦å‘é‡æ±‚å‡ºæ¥æœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿä»–çš„æ„ä¹‰ä»å‡ ä½•æ„ä¹‰ä¸Šè®²ï¼Œå°±æ˜¯å‡½æ•°å˜åŒ–å¢åŠ æœ€å¿«çš„åœ°æ–¹ã€‚å…·ä½“æ¥è¯´ï¼Œå¯¹äºå‡½æ•°f(x,y),åœ¨ç‚¹$(x_0,y_0)$ï¼Œæ²¿ç€æ¢¯åº¦å‘é‡çš„æ–¹å‘å°±æ˜¯$( \\frac{ \\partial f }{ \\partial x_0 },\\frac{ \\partial f }{ \\partial y_0 })^T$çš„æ–¹å‘æ˜¯f(x,y)å¢åŠ æœ€å¿«çš„åœ°æ–¹ã€‚æˆ–è€…è¯´ï¼Œæ²¿ç€æ¢¯åº¦å‘é‡çš„æ–¹å‘ï¼Œæ›´åŠ å®¹æ˜“æ‰¾åˆ°å‡½æ•°çš„æœ€å¤§å€¼ã€‚åè¿‡æ¥è¯´ï¼Œæ²¿ç€æ¢¯åº¦å‘é‡ç›¸åçš„æ–¹å‘ï¼Œä¹Ÿå°±æ˜¯ $-( \\frac{ \\partial f }{ \\partial x_0 },\\frac{ \\partial f }{ \\partial y_0 })^T$çš„æ–¹å‘ï¼Œæ¢¯åº¦å‡å°‘æœ€å¿«ï¼Œä¹Ÿå°±æ˜¯æ›´åŠ å®¹æ˜“æ‰¾åˆ°å‡½æ•°çš„æœ€å°å€¼ã€‚\n\nä¾‹å¦‚ï¼š\nå‡½æ•° $f(x,y) = \\frac{1}{x^2+y^2} $ ï¼Œåˆ†åˆ«å¯¹xï¼Œyæ±‚åå¯¼æ•°å¾—ï¼š\n$$\n \\frac{ \\partial f }{ \\partial x}=-\\frac{2x}{ (x^2+y^2)^2}\n$$\n$$\n \\frac{ \\partial f }{ \\partial y}=-\\frac{2y}{ (x^2+y^2)^2}\n$$\næ‰€ä»¥\n$$\ngrad( \\frac{1}{x^2+y^2} ) = (-\\frac{2x}{ (x^2+y^2)^2} ,-\\frac{2y}{ (x^2+y^2)^2})\n$$\nå‡½æ•°åœ¨æŸä¸€ç‚¹çš„æ¢¯åº¦æ˜¯è¿™æ ·ä¸€ä¸ªå‘é‡ï¼Œå®ƒçš„æ–¹å‘ä¸å–å¾—æœ€å¤§æ–¹å‘å¯¼æ•°çš„æ–¹å‘ä¸€è‡´ï¼Œè€Œå®ƒçš„æ¨¡ä¸ºæ–¹å‘å¯¼æ•°çš„æœ€å¤§å€¼ã€‚ \n\n\næ³¨æ„ç‚¹ï¼š\n1ï¼‰æ¢¯åº¦æ˜¯ä¸€ä¸ªå‘é‡\n2ï¼‰æ¢¯åº¦çš„æ–¹å‘æ˜¯æœ€å¤§æ–¹å‘å¯¼æ•°çš„æ–¹å‘\n3ï¼‰æ¢¯åº¦çš„å€¼æ˜¯æœ€å¤§æ–¹å‘å¯¼æ•°çš„å€¼\n\n# æ¢¯åº¦ä¸‹é™ä¸æ¢¯åº¦ä¸Šå‡\nåœ¨æœºå™¨å­¦ä¹ ç®—æ³•ä¸­ï¼Œåœ¨æœ€å°åŒ–æŸå¤±å‡½æ•°æ—¶ï¼Œå¯ä»¥é€šè¿‡æ¢¯åº¦ä¸‹é™æ€æƒ³æ¥æ±‚å¾—æœ€å°åŒ–çš„æŸå¤±å‡½æ•°å’Œå¯¹åº”çš„å‚æ•°å€¼ï¼Œåè¿‡æ¥ï¼Œå¦‚æœè¦æ±‚æœ€å¤§åŒ–çš„æŸå¤±å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡æ¢¯åº¦ä¸Šå‡æ€æƒ³æ¥æ±‚å–ã€‚\n\n\n\n## æ¢¯åº¦ä¸‹é™\n### å…³äºæ¢¯åº¦ä¸‹é™çš„å‡ ä¸ªæ¦‚å¿µ\n1ï¼‰æ­¥é•¿ï¼ˆlearning rateï¼‰ï¼šæ­¥é•¿å†³å®šäº†åœ¨æ¢¯åº¦ä¸‹é™è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€æ­¥æ²¿æ¢¯åº¦è´Ÿæ–¹å‘å‰è¿›çš„é•¿åº¦\n2ï¼‰ç‰¹å¾ï¼ˆfeatureï¼‰ï¼šæŒ‡çš„æ˜¯æ ·æœ¬ä¸­è¾“å…¥éƒ¨é—¨ï¼Œæ¯”å¦‚æ ·æœ¬ï¼ˆx0ï¼Œy0ï¼‰ï¼Œï¼ˆx1ï¼Œy1ï¼‰ï¼Œåˆ™æ ·æœ¬ç‰¹å¾ä¸ºxï¼Œæ ·æœ¬è¾“å‡ºä¸ºy\n3ï¼‰å‡è®¾å‡½æ•°ï¼ˆhypothesis functionï¼‰ï¼šåœ¨ç›‘ç£å­¦ä¹ ä¸­ï¼Œä¸ºäº†æ‹Ÿåˆè¾“å…¥æ ·æœ¬ï¼Œè€Œä½¿ç”¨çš„å‡è®¾å‡½æ•°ï¼Œè®°ä¸º$h_Î¸(x)$ã€‚æ¯”å¦‚å¯¹äºæ ·æœ¬$ï¼ˆx_i,y_iï¼‰(i=1,2,...n)$,å¯ä»¥é‡‡ç”¨æ‹Ÿåˆå‡½æ•°å¦‚ä¸‹ï¼š $h_Î¸(x) = Î¸0+Î¸1_x$ã€‚\n4ï¼‰æŸå¤±å‡½æ•°ï¼ˆloss functionï¼‰ï¼šä¸ºäº†è¯„ä¼°æ¨¡å‹æ‹Ÿåˆçš„å¥½åï¼Œé€šå¸¸ç”¨æŸå¤±å‡½æ•°æ¥åº¦é‡æ‹Ÿåˆçš„ç¨‹åº¦ã€‚æŸå¤±å‡½æ•°æå°åŒ–ï¼Œæ„å‘³ç€æ‹Ÿåˆç¨‹åº¦æœ€å¥½ï¼Œå¯¹åº”çš„æ¨¡å‹å‚æ•°å³ä¸ºæœ€ä¼˜å‚æ•°ã€‚åœ¨çº¿æ€§å›å½’ä¸­ï¼ŒæŸå¤±å‡½æ•°é€šå¸¸ä¸ºæ ·æœ¬è¾“å‡ºå’Œå‡è®¾å‡½æ•°çš„å·®å–å¹³æ–¹ã€‚æ¯”å¦‚å¯¹äºæ ·æœ¬ï¼ˆxi,yiï¼‰(i=1,2,...n),é‡‡ç”¨çº¿æ€§å›å½’ï¼ŒæŸå¤±å‡½æ•°ä¸ºï¼š\n$$\n\\jmath (\\theta _0,\\theta _1)=\\sum_{i=0}^{m}( h_\\theta(x_i)-y_i )^2\n$$\nå…¶ä¸­$x_i$è¡¨ç¤ºæ ·æœ¬ç‰¹å¾xçš„ç¬¬iä¸ªå…ƒç´ ï¼Œ$y_i$è¡¨ç¤ºæ ·æœ¬è¾“å‡ºyçš„ç¬¬iä¸ªå…ƒç´ ï¼Œ$h_\\theta(x_i)$ ä¸ºå‡è®¾å‡½æ•°ã€‚\n\n### æ¢¯åº¦ä¸‹é™çš„ä»£æ•°æ–¹æ³•æè¿°\n\n 1. å…ˆå†³æ¡ä»¶ï¼šç¡®å®šä¼˜åŒ–æ¨¡å‹çš„å‡è®¾å‡½æ•°å’ŒæŸå¤±å‡½æ•°\n    è¿™é‡Œå‡å®šçº¿æ€§å›å½’çš„å‡è®¾å‡½æ•°ä¸º$h_\\theta(x_1,x_2,...x_n)=\\theta_0+\\theta_1x_1+...+\\theta_nx_n$ï¼Œå…¶ä¸­ $\\theta _i(i=0,1,2...n)$ ä¸ºæ¨¡å‹å‚æ•°(å…¬å¼ä¸­ç”¨$\\theta$ä»£æ›¿)ï¼Œ$x_i(i=0,1,2...n)$ä¸ºæ¯ä¸ªæ ·æœ¬çš„nä¸ªç‰¹å¾å€¼ã€‚\n    \n    åˆ™å¯¹åº”é€‰å®šå¾—æŸå¤±å‡½æ•°ä¸ºï¼š\n    $$\n    \\jmath (\\theta _0,\\theta _1,...,,\\theta _n)=\\sum_{i=0}^{m}( h_\\theta(x_0,x_1,...,x_n)-y_i )^2\n    $$\n\n 2. ç®—æ³•ç›¸å…³å‚æ•°çš„åˆå§‹åŒ–\n    ä¸»è¦æ˜¯åˆå§‹åŒ– $ \\theta _0,\\theta _1...,\\theta _n$ï¼Œç®—æ³•ç»ˆæ­¢è·ç¦» $\\varepsilon $ ä»¥åŠæ­¥é•¿ $ \\alpha $ã€‚åœ¨æ²¡æœ‰ä»»ä½•å…ˆéªŒçŸ¥è¯†çš„æ—¶å€™ï¼Œæˆ‘å–œæ¬¢å°†æ‰€æœ‰çš„ $\\theta$ åˆå§‹åŒ–ä¸º0ï¼Œ å°†æ­¥é•¿åˆå§‹åŒ–ä¸º1ã€‚åœ¨è°ƒä¼˜çš„æ—¶å€™å†ä¼˜åŒ–ã€‚\n \n 3. ç®—æ³•è¿‡ç¨‹\n \n - 1)ï¼šç¡®å®šå½“å‰æŸå¤±å‡½æ•°çš„æ¢¯åº¦ï¼Œå¯¹äº$\\theta _i $ï¼Œå…¶æ¢¯åº¦è¡¨è¾¾å¼ä¸ºï¼š\n $$\n\\frac{\\partial }{\\partial \\theta _i}\\jmath (\\theta _1,\\theta _2,...,\\theta _n)\n $$\n \n - 2)ï¼šç”¨æ­¥é•¿ä¹˜ä»¥æŸå¤±å‡½æ•°çš„æ¢¯åº¦ï¼Œå¾—åˆ°å½“å‰ä½ç½®çš„ä¸‹é™è·ç¦»ï¼Œå³\n $$\n \\alpha \\frac{\\partial \\jmath (\\theta _1,\\theta _2,...,\\theta _n)}{\\partial \\theta _i}\n $$\n \n - 3)ï¼šç¡®å®šæ˜¯å¦æ‰€æœ‰çš„$\\theta _i$ ï¼Œæ¢¯åº¦ä¸‹é™çš„è·ç¦»éƒ½å°äº $ \\varepsilon $ï¼Œå¦‚æœå°äº$ \\varepsilon $ï¼Œåˆ™ç®—æ³•åœæ­¢ï¼Œå½“å‰æ‰€æœ‰çš„ $\\theta _i(i=1,2,3,...,n)$ å³ä¸ºæœ€ç»ˆç»“æœã€‚å¦åˆ™æ‰§è¡Œä¸‹ä¸€æ­¥ã€‚\n \n - 4)ï¼šæ›´æ–°æ‰€æœ‰çš„ $\\theta$ï¼Œå¯¹äº$\\theta _i $ï¼Œå…¶æ›´æ–°è¡¨è¾¾å¼å¦‚ä¸‹ã€‚æ›´æ–°å®Œæ¯•åç»§ç»­è½¬å…¥æ­¥éª¤1)ã€‚\n $$\n\\theta _i = \\theta _i - \\alpha \\frac{\\partial \\jmath (\\theta _1,\\theta _2,...,\\theta _n)}{\\partial \\theta _i}\n $$\n \n ### æ¢¯åº¦ä¸‹é™çš„çŸ©é˜µæ–¹å¼æè¿°\n  \n  1. å…ˆå†³æ¡ä»¶ï¼šç¡®å®šä¼˜åŒ–æ¨¡å‹çš„å‡è®¾å‡½æ•°å’ŒæŸå¤±å‡½æ•°\n    è¿™é‡Œå‡å®šçº¿æ€§å›å½’çš„å‡è®¾å‡½æ•°ä¸º$h_\\theta(x_1,x_2,...x_n)=\\theta_0+\\theta_1x_1+...+\\theta_nx_n$ï¼Œå…¶ä¸­ $\\theta _i(i=0,1,2...n)$ ä¸ºæ¨¡å‹å‚æ•°ï¼Œ$x_i(i=0,1,2...n)$ä¸ºæ¯ä¸ªæ ·æœ¬çš„nä¸ªç‰¹å¾å€¼ã€‚\n    å‡è®¾å‡½æ•°å¯¹åº”çš„çŸ©é˜µè¡¨ç¤ºä¸ºï¼š$ h_\\theta (x) = X \\theta $ï¼Œå‡è®¾å‡½æ•° $h_\\theta(x)$ ä¸ºmx1çš„å‘é‡ï¼Œ$\\theta $ ä¸ºnx1çš„å‘é‡ï¼Œé‡Œé¢æœ‰nä¸ªä»£æ•°æ³•çš„æ¨¡å‹å‚æ•°ã€‚Xä¸ºmxnç»´çš„çŸ©é˜µã€‚mä»£è¡¨æ ·æœ¬çš„ä¸ªæ•°ï¼Œnä»£è¡¨æ ·æœ¬çš„ç‰¹å¾æ•°ã€‚\n    åˆ™å¯¹åº”é€‰å®šå¾—æŸå¤±å‡½æ•°ä¸ºï¼š\n    $$\n    \\jmath (\\theta)=(X \\theta âˆ’Y)^T (X \\thetaâˆ’Y)\n    $$\n å…¶ä¸­YYæ˜¯æ ·æœ¬çš„è¾“å‡ºå‘é‡ï¼Œç»´åº¦ä¸ºm*1\n <br>\n 2.ç®—æ³•ç›¸å…³å‚æ•°åˆå§‹åŒ–:  \n  $\\theta$ å‘é‡å¯ä»¥åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼ï¼Œæˆ–è€…è°ƒä¼˜åçš„å€¼ã€‚ç®—æ³•ç»ˆæ­¢è·ç¦» $\\varepsilon $ ï¼Œæ­¥é•¿ $\\alpha$ å’Œ â€œæ¢¯åº¦ä¸‹é™çš„ä»£æ•°æ–¹æ³•â€æè¿°ä¸­ä¸€è‡´ã€‚\n <br>\n 3.ç®—æ³•è¿‡ç¨‹\n  \n - 1)ï¼šç¡®å®šå½“å‰ä½ç½®çš„æŸå¤±å‡½æ•°çš„æ¢¯åº¦ï¼Œå¯¹äº $ \\theta $ å‘é‡,å…¶æ¢¯åº¦è¡¨è¾¾å¼å¦‚ä¸‹ï¼š\n$$\n\\frac{ \\partial }{\\partial \\theta } \\jmath (\\theta)\n$$\n - 2)ï¼šç”¨æ­¥é•¿ä¹˜ä»¥æŸå¤±å‡½æ•°çš„æ¢¯åº¦ï¼Œå¾—åˆ°å½“å‰ä½ç½®ä¸‹é™çš„è·ç¦»ï¼Œå³ $\\alpha \\frac{ \\partial }{\\partial \\theta } \\jmath (\\theta)$ \n - 3)ï¼šç¡®å®š $\\theta$ å‘é‡é‡Œé¢çš„æ¯ä¸ªå€¼,æ¢¯åº¦ä¸‹é™çš„è·ç¦»éƒ½å°äº $\\varepsilon$ï¼Œå¦‚æœå°äº $\\varepsilon$ åˆ™ç®—æ³•ç»ˆæ­¢ï¼Œå½“å‰ $\\theta$ å‘é‡å³ä¸ºæœ€ç»ˆç»“æœã€‚å¦åˆ™è¿›å…¥æ­¥éª¤4)\n - 4)ï¼šæ›´æ–° $\\theta$ å‘é‡ï¼Œå…¶æ›´æ–°è¡¨è¾¾å¼å¦‚ä¸‹ã€‚æ›´æ–°å®Œæ¯•åç»§ç»­è½¬å…¥æ­¥éª¤1)\n $$\n \\theta =\\theta - \\alpha \\frac{ \\partial }{\\partial \\theta } \\jmath (\\theta)\n $$\n \n## æ¢¯åº¦ä¸Šå‡\næ¢¯åº¦ä¸Šå‡å’Œæ¢¯åº¦ä¸‹é™çš„åˆ†ææ–¹å¼æ˜¯ä¸€è‡´çš„ï¼Œåªä¸è¿‡æŠŠ $ \\theta $ çš„æ›´æ–°ä¸­ å‡å·å˜ä¸ºåŠ å·ã€‚\n\n## æ¢¯åº¦ä¸‹é™çš„ç®—æ³•ä¼˜åŒ–\n1. ç®—æ³•çš„æ­¥é•¿é€‰æ‹©ã€‚åœ¨å‰é¢çš„ç®—æ³•æè¿°ä¸­ï¼Œæˆ‘æåˆ°å–æ­¥é•¿ä¸º1ï¼Œä½†æ˜¯å®é™…ä¸Šå–å€¼å–å†³äºæ•°æ®æ ·æœ¬ï¼Œå¯ä»¥å¤šå–ä¸€äº›å€¼ï¼Œä»å¤§åˆ°å°ï¼Œåˆ†åˆ«è¿è¡Œç®—æ³•ï¼Œçœ‹çœ‹è¿­ä»£æ•ˆæœï¼Œå¦‚æœæŸå¤±å‡½æ•°åœ¨å˜å°ï¼Œè¯´æ˜å–å€¼æœ‰æ•ˆï¼Œå¦åˆ™è¦å¢å¤§æ­¥é•¿ã€‚å‰é¢è¯´äº†ã€‚æ­¥é•¿å¤ªå¤§ï¼Œä¼šå¯¼è‡´è¿­ä»£è¿‡å¿«ï¼Œç”šè‡³æœ‰å¯èƒ½é”™è¿‡æœ€ä¼˜è§£ã€‚æ­¥é•¿å¤ªå°ï¼Œè¿­ä»£é€Ÿåº¦å¤ªæ…¢ï¼Œå¾ˆé•¿æ—¶é—´ç®—æ³•éƒ½ä¸èƒ½ç»“æŸã€‚æ‰€ä»¥ç®—æ³•çš„æ­¥é•¿éœ€è¦å¤šæ¬¡è¿è¡Œåæ‰èƒ½å¾—åˆ°ä¸€ä¸ªè¾ƒä¸ºä¼˜çš„å€¼ã€‚\n\n2. ç®—æ³•å‚æ•°çš„åˆå§‹å€¼é€‰æ‹©ã€‚ åˆå§‹å€¼ä¸åŒï¼Œè·å¾—çš„æœ€å°å€¼ä¹Ÿæœ‰å¯èƒ½ä¸åŒï¼Œå› æ­¤æ¢¯åº¦ä¸‹é™æ±‚å¾—çš„åªæ˜¯å±€éƒ¨æœ€å°å€¼ï¼›å½“ç„¶å¦‚æœæŸå¤±å‡½æ•°æ˜¯å‡¸å‡½æ•°åˆ™ä¸€å®šæ˜¯æœ€ä¼˜è§£ã€‚ç”±äºæœ‰å±€éƒ¨æœ€ä¼˜è§£çš„é£é™©ï¼Œéœ€è¦å¤šæ¬¡ç”¨ä¸åŒåˆå§‹å€¼è¿è¡Œç®—æ³•ï¼Œå…³é”®æŸå¤±å‡½æ•°çš„æœ€å°å€¼ï¼Œé€‰æ‹©æŸå¤±å‡½æ•°æœ€å°åŒ–çš„åˆå€¼ã€‚\n\n3.å½’ä¸€åŒ–ã€‚ç”±äºæ ·æœ¬ä¸åŒç‰¹å¾çš„å–å€¼èŒƒå›´ä¸ä¸€æ ·ï¼Œå¯èƒ½å¯¼è‡´è¿­ä»£å¾ˆæ…¢ï¼Œä¸ºäº†å‡å°‘ç‰¹å¾å–å€¼çš„å½±å“ï¼Œå¯ä»¥å¯¹ç‰¹å¾æ•°æ®å½’ä¸€åŒ–ï¼Œä¹Ÿå°±æ˜¯å¯¹äºæ¯ä¸ªç‰¹å¾xï¼Œæ±‚å‡ºå®ƒçš„å‡å€¼ $\\bar{x}$ å’Œæ ‡å‡†å·®std(x)ï¼Œç„¶åè½¬åŒ–ä¸ºï¼š\n$$\n\\frac{x - \\bar{x}}{std(x)}\n$$\nè¿™æ ·ç‰¹å¾çš„æ–°æœŸæœ›ä¸º0ï¼Œæ–°æ–¹å·®ä¸º1ï¼Œè¿­ä»£æ¬¡æ•°å¯ä»¥å¤§å¤§åŠ å¿«ã€‚\n\n----------\n\n\nhttp://blog.csdn.net/walilk/article/details/50978864\n\nhttps://www.zhihu.com/question/24658302\n\nhttps://www.cnblogs.com/pinard/p/5970503.html\n\nhttp://www.doc88.com/p-7844239247737.html\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"å¼‚å¸¸æ£€æµ‹ä¹‹æŒ‡æ•°å¹³æ»‘ï¼ˆåˆ©ç”¨elasticsearchæ¥å®ç°ï¼‰","url":"/2017/11/20/ELK/å¼‚å¸¸æ£€æµ‹ä¹‹æŒ‡æ•°å¹³æ»‘ï¼ˆåˆ©ç”¨elasticsearchæ¥å®ç°ï¼‰/","content":"\n> æŒ‡æ•°å¹³æ»‘æ³•æ˜¯ä¸€ç§ç‰¹æ®Šçš„åŠ æƒå¹³å‡æ³•ï¼ŒåŠ æƒçš„ç‰¹ç‚¹æ˜¯å¯¹ç¦»é¢„æµ‹å€¼è¾ƒè¿‘çš„å†å²æ•°æ®ç»™äºˆè¾ƒå¤§çš„æƒæ•°ï¼Œå¯¹ç¦»é¢„æµ‹æœŸè¾ƒè¿œçš„å†å²æ•°æ®ç»™äºˆè¾ƒå°çš„æƒæ•°ï¼Œæƒæ•°ç”±è¿‘åˆ°è¿œæŒ‰æŒ‡æ•°è§„å¾‹é€’å‡ï¼Œæ‰€ä»¥ï¼Œè¿™ç§é¢„æµ‹æ–¹æ³•è¢«ç§°ä¸ºæŒ‡æ•°å¹³æ»‘æ³•ã€‚å®ƒå¯åˆ†ä¸ºä¸€æ¬¡æŒ‡æ•°å¹³æ»‘æ³•ã€äºŒæ¬¡æŒ‡æ•°å¹³æ»‘æ³•åŠæ›´é«˜æ¬¡æŒ‡æ•°å¹³æ»‘æ³•ã€‚\n\n<!--More-->\n\n# å…³äºæŒ‡æ•°å¹³æ»‘çš„å¾—ç›¸å…³èµ„æ–™ï¼š\n\n- ES APIæ¥å£ï¼š\n> https://github.com/IBBD/IBBD.github.io/blob/master/elk/aggregations-pipeline.md\n<br><br>\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-pipeline-movavg-aggregation.html\n\n- ç†è®ºæ¦‚å¿µ\n> http://blog.sina.com.cn/s/blog_4b9acb5201016nkd.html\n\n\n# ESç§»åŠ¨å¹³å‡èšåˆï¼šMoving Averageçš„å››ç§æ¨¡å‹\n## simple\nå°±æ˜¯ä½¿ç”¨çª—å£å†…çš„å€¼çš„å’Œé™¤äºçª—å£å€¼ï¼Œé€šå¸¸çª—å£å€¼è¶Šå¤§ï¼Œæœ€åçš„ç»“æœè¶Šå¹³æ»‘: (a1 + a2 + ... + an) / n\n```\ncurl -XPOST 'localhost:9200/_search?pretty' -H 'Content-Type: application/json' -d'\n{\n    \"size\": 0,\n    \"aggs\": {\n        \"my_date_histo\":{\n            \"date_histogram\":{\n                \"field\":\"date\",\n                \"interval\":\"1M\"\n            },\n            \"aggs\":{\n                \"the_sum\":{\n                    \"sum\":{ \"field\": \"price\" }\n                },\n                \"the_movavg\":{\n                    \"moving_avg\":{\n                        \"buckets_path\": \"the_sum\",\n                        \"window\" : 30,\n                        \"model\" : \"simple\"\n                    }\n                }\n            }\n        }\n    }\n}\n'\n```\n\n## çº¿æ€§æ¨¡å‹ï¼šLinear\nå¯¹çª—å£å†…çš„å€¼å…ˆåšçº¿æ€§å˜æ¢å¤„ç†ï¼Œå†æ±‚å¹³å‡ï¼š(a1 * 1 + a2 * 2 + ... + an * n) / (1 + 2 + ... + n)\n\n```\ncurl -XPOST 'localhost:9200/_search?pretty' -H 'Content-Type: application/json' -d'\n{\n    \"size\": 0,\n    \"aggs\": {\n        \"my_date_histo\":{\n            \"date_histogram\":{\n                \"field\":\"date\",\n                \"interval\":\"1M\"\n            },\n            \"aggs\":{\n                \"the_sum\":{\n                    \"sum\":{ \"field\": \"price\" }\n                },\n                \"the_movavg\": {\n                    \"moving_avg\":{\n                        \"buckets_path\": \"the_sum\",\n                        \"window\" : 30,\n                        \"model\" : \"linear\"\n                    }\n                }\n            }\n        }\n    }\n}\n'\n```\n\n## æŒ‡æ•°å¹³æ»‘æ¨¡å‹\n### æŒ‡æ•°æ¨¡å‹ï¼šEWMA (Exponentially Weighted)\nå³ï¼š ä¸€æ¬¡æŒ‡æ•°å¹³æ»‘æ¨¡å‹\n\nEWMAæ¨¡å‹é€šå¸¸ä¹Ÿæˆä¸ºå•æŒ‡æ•°æ¨¡å‹ï¼ˆsingle-exponentialï¼‰, å’Œçº¿æ€§æ¨¡å‹çš„æ€è·¯ç±»ä¼¼ï¼Œç¦»å½“å‰ç‚¹è¶Šè¿œçš„ç‚¹ï¼Œé‡è¦æ€§è¶Šä½ï¼Œå…·ä½“åŒ–ä¸ºæ•°å€¼çš„æŒ‡æ•°ä¸‹é™ï¼Œå¯¹åº”çš„å‚æ•°æ˜¯alphaã€‚ alphaå€¼è¶Šå°ï¼Œä¸‹é™è¶Šæ…¢ã€‚ï¼ˆä¼°è®¡æ˜¯ç”¨1 - alphaå»è®¡ç®—çš„ï¼‰é»˜è®¤çš„alpha=0.3\n\nè®¡ç®—æ¨¡å‹ï¼šs2 = Î± * x2 + (1 - Î±) * s1\n\nå…¶ä¸­Î±æ˜¯å¹³æ»‘ç³»æ•°ï¼Œsiæ˜¯ä¹‹å‰iä¸ªæ•°æ®çš„å¹³æ»‘å€¼ï¼ŒÎ±å–å€¼ä¸º[0,1]ï¼Œè¶Šæ¥è¿‘1ï¼Œå¹³æ»‘åçš„å€¼è¶Šæ¥è¿‘å½“å‰æ—¶é—´çš„æ•°æ®å€¼ï¼Œæ•°æ®è¶Šä¸å¹³æ»‘ï¼ŒÎ±è¶Šæ¥è¿‘0ï¼Œå¹³æ»‘åçš„å€¼è¶Šæ¥è¿‘å‰iä¸ªæ•°æ®çš„å¹³æ»‘å€¼ï¼Œæ•°æ®è¶Šå¹³æ»‘ï¼ŒÎ±çš„å€¼é€šå¸¸å¯ä»¥å¤šå°è¯•å‡ æ¬¡ä»¥è¾¾åˆ°æœ€ä½³æ•ˆæœã€‚ ä¸€æ¬¡æŒ‡æ•°å¹³æ»‘ç®—æ³•è¿›è¡Œé¢„æµ‹çš„å…¬å¼ä¸ºï¼šxi+h=siï¼Œå…¶ä¸­iä¸ºå½“å‰æœ€åçš„ä¸€ä¸ªæ•°æ®è®°å½•çš„åæ ‡ï¼Œäº¦å³é¢„æµ‹çš„æ—¶é—´åºåˆ—ä¸ºä¸€æ¡ç›´çº¿ï¼Œä¸èƒ½åæ˜ æ—¶é—´åºåˆ—çš„è¶‹åŠ¿å’Œå­£èŠ‚æ€§ã€‚\n\n```\ncurl -XPOST 'localhost:9200/_search?pretty' -H 'Content-Type: application/json' -d'\n{\n    \"size\": 0,\n    \"aggs\": {\n        \"my_date_histo\":{\n            \"date_histogram\":{\n                \"field\":\"date\",\n                \"interval\":\"1M\"\n            },\n            \"aggs\":{\n                \"the_sum\":{\n                    \"sum\":{ \"field\": \"price\" }\n                },\n                \"the_movavg\": {\n                    \"moving_avg\":{\n                        \"buckets_path\": \"the_sum\",\n                        \"window\" : 30,\n                        \"model\" : \"ewma\",\n                        \"settings\" : {\n                            \"alpha\" : 0.5\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n'\n```\n\n### äºŒæ¬¡æŒ‡æ•°å¹³æ»‘æ¨¡å‹: Holt-Linear\nè®¡ç®—æ¨¡å‹ï¼š\n\ns2 = Î± * x2 + (1 - Î±) * (s1 + t1)\n\nt2 = ÃŸ * (s2 - s1) + (1 - ÃŸ) * t1\n\né»˜è®¤alpha = 0.3 and beta = 0.1\n\näºŒæ¬¡æŒ‡æ•°å¹³æ»‘ä¿ç•™äº†è¶‹åŠ¿çš„ä¿¡æ¯ï¼Œä½¿å¾—é¢„æµ‹çš„æ—¶é—´åºåˆ—å¯ä»¥åŒ…å«ä¹‹å‰æ•°æ®çš„è¶‹åŠ¿ã€‚äºŒæ¬¡æŒ‡æ•°å¹³æ»‘çš„é¢„æµ‹å…¬å¼ä¸º xi+h=si+hti äºŒæ¬¡æŒ‡æ•°å¹³æ»‘çš„é¢„æµ‹ç»“æœæ˜¯ä¸€æ¡æ–œçš„ç›´çº¿ã€‚\n\n```\ncurl -XPOST 'localhost:9200/_search?pretty' -H 'Content-Type: application/json' -d'\n{\n    \"size\": 0,\n    \"aggs\": {\n        \"my_date_histo\":{\n            \"date_histogram\":{\n                \"field\":\"date\",\n                \"interval\":\"1M\"\n            },\n            \"aggs\":{\n                \"the_sum\":{\n                    \"sum\":{ \"field\": \"price\" }\n                },\n                \"the_movavg\": {\n                    \"moving_avg\":{\n                        \"buckets_path\": \"the_sum\",\n                        \"window\" : 30,\n                        \"model\" : \"holt\",\n                        \"settings\" : {\n                            \"alpha\" : 0.5,\n                            \"beta\" : 0.5\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n'\n```\n### ä¸‰æ¬¡æŒ‡æ•°å¹³æ»‘æ¨¡å‹ï¼šHolt-Wintersæ— å­£èŠ‚æ¨¡å‹\nä¸‰æ¬¡æŒ‡æ•°å¹³æ»‘åœ¨äºŒæ¬¡æŒ‡æ•°å¹³æ»‘çš„åŸºç¡€ä¸Šä¿ç•™äº†å­£èŠ‚æ€§çš„ä¿¡æ¯ï¼Œä½¿å¾—å…¶å¯ä»¥é¢„æµ‹å¸¦æœ‰å­£èŠ‚æ€§çš„æ—¶é—´åºåˆ—ã€‚ä¸‰æ¬¡æŒ‡æ•°å¹³æ»‘æ·»åŠ äº†ä¸€ä¸ªæ–°çš„å‚æ•°pæ¥è¡¨ç¤ºå¹³æ»‘åçš„è¶‹åŠ¿ã€‚\n\n1: Additive Holt-Wintersï¼šHolt-WintersåŠ æ³•æ¨¡å‹\n\nä¸‹é¢æ˜¯ç´¯åŠ çš„ä¸‰æ¬¡æŒ‡æ•°å¹³æ»‘\n```\nsi=Î±(xi-pi-k)+(1-Î±)(si-1+ti-1)\nti=ÃŸ(si-si-1)+(1-ÃŸ)ti-1\npi=Î³(xi-si)+(1-Î³)pi-k\n```\nå…¶ä¸­kä¸ºå‘¨æœŸ\n\nç´¯åŠ ä¸‰æ¬¡æŒ‡æ•°å¹³æ»‘çš„é¢„æµ‹å…¬å¼ä¸ºï¼š xi+h=si+hti+pi-k+(h mod k)\n\n```\ncurl -XPOST 'localhost:9200/_search?pretty' -H 'Content-Type: application/json' -d'\n{\n    \"size\": 0,\n    \"aggs\": {\n        \"my_date_histo\":{\n            \"date_histogram\":{\n                \"field\":\"date\",\n                \"interval\":\"1M\"\n            },\n            \"aggs\":{\n                \"the_sum\":{\n                    \"sum\":{ \"field\": \"price\" }\n                },\n                \"the_movavg\": {\n                    \"moving_avg\":{\n                        \"buckets_path\": \"the_sum\",\n                        \"window\" : 30,\n                        \"model\" : \"holt_winters\",\n                        \"settings\" : {\n                            \"type\" : \"add\",\n                            \"alpha\" : 0.5,\n                            \"beta\" : 0.5,\n                            \"gamma\" : 0.5,\n                            \"period\" : 7\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n'\n```\n\n2: Multiplicative Holt-Wintersï¼šHolt-Wintersä¹˜æ³•æ¨¡å‹\n\nä¸‹å¼ä¸ºç´¯ä¹˜çš„ä¸‰æ¬¡æŒ‡æ•°å¹³æ»‘ï¼š\n```\nsi=Î±xi/pi-k+(1-Î±)(si-1+ti-1)\nti=ÃŸ(si-si-1)+(1-ÃŸ)ti-1\npi=Î³xi/si+(1-Î³)pi-k  å…¶ä¸­kä¸ºå‘¨æœŸ\n```\nç´¯ä¹˜ä¸‰æ¬¡æŒ‡æ•°å¹³æ»‘çš„é¢„æµ‹å…¬å¼ä¸ºï¼š xi+h=(si+hti)pi-k+(h mod k)\n\nÎ±ï¼ŒÃŸï¼ŒÎ³çš„å€¼éƒ½ä½äº[0,1]ä¹‹é—´ï¼Œå¯ä»¥å¤šè¯•éªŒå‡ æ¬¡ä»¥è¾¾åˆ°æœ€ä½³æ•ˆæœã€‚\n\ns,t,påˆå§‹å€¼çš„é€‰å–å¯¹äºç®—æ³•æ•´ä½“çš„å½±å“ä¸æ˜¯ç‰¹åˆ«å¤§ï¼Œé€šå¸¸çš„å–å€¼ä¸ºs0=x0,t0=x1-x0,ç´¯åŠ æ—¶p=0,ç´¯ä¹˜æ—¶p=1.\n\n```\ncurl -XPOST 'localhost:9200/_search?pretty' -H 'Content-Type: application/json' -d'\n{\n    \"size\": 0,\n    \"aggs\": {\n        \"my_date_histo\":{\n            \"date_histogram\":{\n                \"field\":\"date\",\n                \"interval\":\"1M\"\n            },\n            \"aggs\":{\n                \"the_sum\":{\n                    \"sum\":{ \"field\": \"price\" }\n                },\n                \"the_movavg\": {\n                    \"moving_avg\":{\n                        \"buckets_path\": \"the_sum\",\n                        \"window\" : 30,\n                        \"model\" : \"holt_winters\",\n                        \"settings\" : {\n                            \"type\" : \"mult\",\n                            \"alpha\" : 0.5,\n                            \"beta\" : 0.5,\n                            \"gamma\" : 0.5,\n                            \"period\" : 7,\n                            \"pad\" : true\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n'\n```\n## é¢„æµ‹æ¨¡å‹ï¼šPrediction\nä½¿ç”¨å½“å‰å€¼å‡å»å‰ä¸€ä¸ªå€¼ï¼Œå…¶å®å°±æ˜¯ç¯æ¯”å¢é•¿\n\n```\ncurl -XPOST 'localhost:9200/_search?pretty' -H 'Content-Type: application/json' -d'\n{\n    \"size\": 0,\n    \"aggs\": {\n        \"my_date_histo\":{\n            \"date_histogram\":{\n                \"field\":\"date\",\n                \"interval\":\"1M\"\n            },\n            \"aggs\":{\n                \"the_sum\":{\n                    \"sum\":{ \"field\": \"price\" }\n                },\n                \"the_movavg\": {\n                    \"moving_avg\":{\n                        \"buckets_path\": \"the_sum\",\n                        \"window\" : 30,\n                        \"model\" : \"simple\",\n                        \"predict\" : 10\n                    }\n                }\n            }\n        }\n    }\n}\n'\n```\n\n## æœ€å°åŒ–ï¼šMinimization\næŸäº›æ¨¡å‹ï¼ˆEWMAï¼ŒHolt-Linearï¼ŒHolt-Wintersï¼‰éœ€è¦é…ç½®ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°ã€‚å‚æ•°é€‰æ‹©å¯èƒ½ä¼šéå¸¸æ£˜æ‰‹ï¼Œæœ‰æ—¶ä¸ç›´è§‚ã€‚æ­¤å¤–ï¼Œè¿™äº›å‚æ•°çš„å°åå·®æœ‰æ—¶ä¼šå¯¹è¾“å‡ºç§»åŠ¨å¹³å‡çº¿äº§ç”Ÿå‰§çƒˆçš„å½±å“ã€‚\n\nå‡ºäºè¿™ä¸ªåŸå› ï¼Œä¸‰ä¸ªâ€œå¯è°ƒâ€æ¨¡å‹å¯ä»¥åœ¨ç®—æ³•ä¸Šæœ€å°åŒ–ã€‚æœ€å°åŒ–æ˜¯ä¸€ä¸ªå‚æ•°è°ƒæ•´çš„è¿‡ç¨‹ï¼Œç›´åˆ°æ¨¡å‹ç”Ÿæˆçš„é¢„æµ‹ä¸è¾“å‡ºæ•°æ®ç´§å¯†åŒ¹é…ä¸ºæ­¢ã€‚æœ€å°åŒ–å¹¶ä¸æ˜¯å®Œå…¨é˜²æŠ¤çš„ï¼Œå¹¶ä¸”å¯èƒ½å®¹æ˜“è¿‡åº¦é…åˆï¼Œä½†æ˜¯å®ƒå¾€å¾€æ¯”æ‰‹åŠ¨è°ƒæ•´æœ‰æ›´å¥½çš„ç»“æœã€‚\n\newmaå’Œholt_linearé»˜è®¤æƒ…å†µä¸‹ç¦ç”¨æœ€å°åŒ–ï¼Œè€Œholt_wintersé»˜è®¤å¯ç”¨æœ€å°åŒ–ã€‚ Holt-Wintersæœ€å°åŒ–æ˜¯æœ€æœ‰ç”¨çš„ï¼Œå› ä¸ºå®ƒæœ‰åŠ©äºæé«˜é¢„æµ‹çš„å‡†ç¡®æ€§ã€‚ EWMAå’ŒHolt-Linearä¸æ˜¯å¾ˆå¥½çš„é¢„æµ‹æŒ‡æ ‡ï¼Œä¸»è¦ç”¨äºå¹³æ»‘æ•°æ®ï¼Œæ‰€ä»¥æœ€å°åŒ–å¯¹äºè¿™äº›æ¨¡å‹æ¥è¯´ä¸å¤ªæœ‰ç”¨ã€‚\n\né€šè¿‡æœ€å°åŒ–å‚æ•°å¯ç”¨/ç¦ç”¨æœ€å°åŒ–ï¼š\"minimize\" : true\n\n# åŸå§‹æ•°æ®\næ•°æ®ä¸ºSSH loginæ•°æ®å…¶ä¸­ IPï¼userå·²å¤„ç†\n```\n{\n    \"_index\": \"logstash-sshlogin-others-success-2017-10\",\n    \"_type\": \"sshlogin\",\n    \"_id\": \"AV-weLF8c2nHCDojUbat\",\n    \"_version\": 2,\n    \"_score\": 1,\n    \"_source\": {\n        \"srcip\": \"222.221.238.162\",\n        \"dstport\": \"\",\n        \"pid\": \"20604\",\n        \"program\": \"sshd\",\n        \"message\": \"dwasw-ibb01:Oct 19 23:38:02 176.231.228.130 sshd[20604]: Accepted publickey for nmuser from 222.221.238.162 port 49484 ssh2\",\n        \"type\": \"zhongcai-sshlogin\",\n        \"ssh_type\": \"ssh_successful_login\",\n        \"forwarded\": \"false\",\n        \"manufacturer\": \"others\",\n        \"IndexTime\": \"2017-10\",\n        \"path\": \"/home/logstash/log/logstash_data/audit10/sshlogin/11.txt\",\n        \"number\": 1,\n        \"hostname\": \"176.231.228.130\",\n        \"protocol\": \"ssh2\",\n        \"@timestamp\": \"2017-10-19T15:38:02.000Z\",\n        \"ssh_method\": \"publickey\",\n        \"_hostname\": \"dwasw-ibb01\",\n        \"@version\": \"1\",\n        \"host\": \"localhost\",\n        \"srcport\": \"49484\",\n        \"dstip\": \"\",\n        \"category\": \"sshlogin\",\n        \"user\": \"nmuser\"\n    }\n}\n```\n\n# åˆ©ç”¨ES APIæ¥å£å»è°ƒç”¨æŸ¥è¯¢æ•°æ®\n\n\"interval\": \"hour\": hourä¸ºå•ä½ï¼Œè¿™é‡Œå¯ä»¥æ˜¯åˆ†é’Ÿï¼Œå°æ—¶ï¼Œå¤©ï¼Œå‘¨ï¼Œæœˆ\n\n\"format\": \"yyyy-MM-dd HH\": èšåˆç»“æœå¾—æ—¥æœŸæ ¼å¼\n\n```\n\"the_sum\": {\n    \"sum\": {\n        \"field\": \"number\"\n    }\n}\n```\nnumberä¸ºè¦èšåˆå¾—å­—æ®µ\n\n```\ncurl -POST  'localhost:9200/logstash-sshlogin-others-success-2017-10/sshlogin/_search?pretty' -H 'Content-Type: application/json' -d'\n{\n  \"size\": 0,\n  \"query\": {\n    \"term\": {\n      \"ssh_type\": \"ssh_successful_login\"\n    }\n  },\n  \"aggs\": {\n    \"hour_sum\": {\n      \"date_histogram\": {\n        \"field\": \"@timestamp\",\n        \"interval\": \"hour\",\n        \"format\": \"yyyy-MM-dd HH\"\n      },\n      \"aggs\": {\n        \"the_sum\": {\n          \"sum\": {\n            \"field\": \"number\"\n          }\n        },\n        \"the_movavg\": {\n          \"moving_avg\": {\n            \"buckets_path\": \"the_sum\",\n            \"window\": 30,\n            \"model\": \"holt\",\n            \"settings\": {\n              \"alpha\": 0.5,\n              \"beta\": 0.7\n            }\n          }\n        }\n      }\n    }\n  }\n}'\n```\nå¾—åˆ°çš„ç»“æœå½¢å¼ä¸ºï¼š\n```\n{\n  \"took\" : 35,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 1,\n    \"successful\" : 1,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 206821,\n    \"max_score\" : 0.0,\n    \"hits\" : [ ]\n  },\n  \"aggregations\" : {\n    \"hour_sum\" : {\n      \"buckets\" : [\n        {\n          \"key_as_string\" : \"2017-09-30 16\",\n          \"key\" : 1506787200000,\n          \"doc_count\" : 227,\n          \"the_sum\" : {\n            \"value\" : 227.0\n          }\n        },\n        {\n          \"key_as_string\" : \"2017-09-30 17\",\n          \"key\" : 1506790800000,\n          \"doc_count\" : 210,\n          \"the_sum\" : {\n            \"value\" : 210.0\n          },\n          \"the_movavg\" : {\n            \"value\" : 113.5\n          }\n        },\n        {\n          \"key_as_string\" : \"2017-09-30 18\",\n          \"key\" : 1506794400000,\n          \"doc_count\" : 365,\n          \"the_sum\" : {\n            \"value\" : 365.0\n          },\n          \"the_movavg\" : {\n            \"value\" : 210.0\n          }\n        },\n    ...\n    }\n}\n```\n\n# å¯¹åº”å¾—pythonä»£ç ï¼ˆæŸ¥è¯¢æ•°æ®åˆ°ç”»å›¾ï¼‰\n```\n# coding: utf-8\nfrom elasticsearch import Elasticsearch\nimport matplotlib.pyplot as plt\nfrom matplotlib.font_manager import FontManager, FontProperties\n\nclass Smooth:\n    def __init__(self,index):\n        self.es = Elasticsearch(['localhost:9200'])\n        self.index = index\n        \n    # å¤„ç†macä¸­æ–‡ç¼–ç é”™è¯¯\n    def getChineseFont(self):\n        return FontProperties(fname='/System/Library/Fonts/PingFang.ttc')\n    \n    # å¯¹indexè¿›è¡Œèšåˆ\n    def agg(self):\n        # \"format\": \"yyyy-MM-dd HH:mm:SS\"\n        dsl = '''\n                {\n                  \"size\": 0,\n                  \"query\": {\n                    \"term\": {\n                      \"ssh_type\": \"ssh_successful_login\"\n                    }\n                  },\n                  \"aggs\": {\n                    \"hour_sum\": {\n                      \"date_histogram\": {\n                        \"field\": \"@timestamp\",\n                        \"interval\": \"day\",\n                        \"format\": \"dd\"\n                      },\n                      \"aggs\": {\n                        \"the_sum\": {\n                          \"sum\": {\n                            \"field\": \"number\"\n                          }\n                        },\n                        \"the_movavg\": {\n                          \"moving_avg\": {\n                            \"buckets_path\": \"the_sum\",\n                            \"window\": 30,\n                            \"model\": \"holt_winters\",\n                            \"settings\": {\n                              \"alpha\": 0.5,\n                              \"beta\": 0.7\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n                '''\n        res = self.es.search(index=self.index, body=dsl)\n        return res['aggregations']['hour_sum']['buckets']\n    \n    # ç”»å›¾\n    def draw(self):\n        x,y_true,y_pred = [],[],[]\n        for one in self.agg():\n            x.append(one['key_as_string'])\n            y_true.append(one['the_sum']['value'])\n            if 'the_movavg' in one.keys():       # å‰å‡ æ¡æ•°æ®æ²¡æœ‰ the_movavg å­—æ®µï¼Œæ•…å°†çœŸå®å€¼èµ‹å€¼ç»™predå€¼\n                y_pred.append(one['the_movavg']['value'])\n            else:\n                y_pred.append(one['the_sum']['value'])\n        \n        x_line = range(len(x))\n        \n        plt.figure(figsize=(10,5))\n        plt.plot(x_line,y_true,color=\"r\")\n        plt.plot(x_line,y_pred,color=\"g\")\n        \n        plt.xlabel(u\"æ¯å•ä½æ—¶é—´\",fontproperties=self.getChineseFont()) #Xè½´æ ‡ç­¾ \n        plt.xticks(range(len(x)), x)\n        plt.ylabel(u\"èšåˆç»“æœ\",fontproperties=self.getChineseFont()) #Yè½´æ ‡ç­¾  \n        plt.title(u\"10æœˆä»½ SSH ä¸»æœºç™»å½•æˆåŠŸèšåˆå›¾\",fontproperties=self.getChineseFont()) # æ ‡é¢˜\n        plt.legend([u\"True value\",u\"Predict value\"])\n        plt.show()\n\nsmooth = Smooth(\"logstash-sshlogin-others-success-2017-10\")\nprint smooth.draw()\n```\nç»“æœå›¾ç¤ºä¸ºï¼š\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20171120171404972?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["ELK"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"Elasticsearch-DSLéƒ¨åˆ†é›†åˆ","url":"/2017/11/14/ELK/Elasticsearch-DSLéƒ¨åˆ†é›†åˆ/","content":"\nELKæ˜¯æ—¥å¿—æ”¶é›†åˆ†æç¥å™¨ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­å°†ä¼šä»‹ç»ä¸€äº›ESçš„å¸¸ç”¨å‘½ä»¤ã€‚\n\nç‚¹å‡»é˜…è¯»ï¼š[ELK Stack ä»å…¥é—¨åˆ°æ”¾å¼ƒ](http://blog.csdn.net/column/details/13079.html)\n<!--More-->\n\n# DSLä¸­é‡åˆ°çš„é”™è¯¯åŠè§£å†³åŠæ³•\n## åˆ†ç‰‡é™åˆ¶é”™è¯¯\n\n```\nTrying to query 2632 shards, which is over the limit of 1000. This limit exists because querying many shards at the same time can make the job of the coordinating node very CPU and/or memory intensive. It is usually a better idea to have a smaller number of larger shards. Update [action.search.shard_count.limit] to a greater value if you really want to query that many shards at the same time.\n```\n\n\nè§£å†³åŠæ³•ï¼š\n```\nä¿®æ”¹è¯¥é™åˆ¶æ•°ç›®\n\ncurl -k -u admin:admin -XPUT 'http://localhost:9200/_cluster/settings' -H 'Content-Type: application/json' -d' \n{\n    \"persistent\" : {\n        \"action.search.shard_count.limit\" : \"5000\"\n    }\n}\n'\n\n-k -u admin:admin è¡¨è¿°å¦‚æœæœ‰æƒé™ä¿æŠ¤çš„è¯å¯ä»¥åŠ ä¸Š\n```\n\n## Fileddate é”™è¯¯\n```\nFielddata is disabled on text fields by default. Set fielddata=true on [make] in order to load fielddata in memory by uninverting the inverted index. Note that this can however use significant memory.\n```\n\nè§£å†³åŠæ³•ï¼š\n```\ncars: ç´¢å¼•å\ntransactionsï¼šç´¢å¼•å¯¹åº”çš„ç±»å‹\ncolorï¼šå­—æ®µ\n\ncurl -XPUT -k -u admin:admin 'localhost:9200/cars/_mapping/transactions?pretty' -H 'Content-Type: application/json' -d'\n{\n  \"properties\": {\n    \"color\": { \n      \"type\":     \"text\",\n      \"fielddata\": true\n    }\n  }\n}\n'\n```\n\n# æŒ‡å®šå…³é”®è¯æŸ¥è¯¢ï¼Œæ’åºå’Œå‡½æ•°ç»Ÿè®¡\n## æŒ‡å®šå…³é”®è¯\n\nfrom ä¸ºé¦–ä¸ªåç§»é‡ï¼Œsizeä¸ºè¿”å›æ•°æ®çš„æ¡æ•°\n```\nhttp://10.10.11.139:9200/logstash-nginx-access-*/nginx-access/_search?pretty\n\n{\n    \"from\":0,size\":1000,\n    \"query\" : {\n        \"term\" : { \n        \t\"major\" : \"55\"\n        }\n    }\n}\n```\n\n## æ·»åŠ æ’åº\n\n(éœ€è¦è¿›è¡Œmappingè®¾ç½®ï¼Œasc ä¸ºå‡åº  descä¸ºé™åº)\n```\n{\n    \"from\":0,\"size\":1000,\n    \"sort\":[\n        {\"offset\":\"desc\"}\n    ],\n    \"query\" : {\n        \"term\" : { \n            \"major\" : \"55\"\n        }\n    }\n}\n```\n\n## mode æ–¹æ³•\nmodeæ–¹æ³•åŒ…æ‹¬ minï¼maxï¼avgï¼sumï¼median\n\nå‡å¦‚ç°åœ¨è¦å¯¹priceå­—æ®µè¿›è¡Œæ’åºï¼Œä½†æ˜¯priceå­—æ®µæœ‰å¤šä¸ªå€¼ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨mode æ–¹æ³•äº†ã€‚\n\n```\n{\n   \"query\" : {\n      \"term\" : { \"product\" : \"chocolate\" }\n   },\n   \"sort\" : [\n      {\"price\" : {\"order\" : \"asc\", \"mode\" : \"avg\"}}\n   ]\n}\n```\n\n# IPèŒƒå›´å’Œç½‘æ®µæŸ¥è¯¢\n## IP range æœç´¢\n\né”™è¯¯ï¼š\n```\nFielddata is disabled on text fields by default. Set fielddata=true on [clientip] in order to load fielddata in memory by uninverting the inverted index. Note that this can however use significant memory.\n```\n\nè§£å†³åŠæ³•ï¼š\n```\ncurl -k -u admin:admin -XPUT '10.10.11.139:9200/logstash-nginx-access-*/_mapping/nginx-access?pretty' -H 'Content-Type: application/json' -d'\n{\n  \"properties\": {\n    \"clientip\": { \n      \"type\":     \"text\",\n      \"fielddata\": true,\n      \"norms\": false\n    }\n  }\n}\n'\n```\n\næŸ¥çœ‹æŸä¸ªç´¢å¼•çš„mapping\n```\ncurl -k -u admin:admin -XGET http://10.10.11.139:9200/logstash-nginx-access-*/_mapping?pretty\n```\n\n(å½“IPä¸ºä¸å¯è§£æä½¿å°±ä¼šå‡ºç°é”™è¯¯)\n```\nhttp://10.10.11.139:9200/logstash-sshlogin-others-success-*/zhongcai/_search?pretty\n{\n    \"size\":100,\n    \"aggs\" : {\n        \"ip_ranges\" : {\n            \"ip_range\" : {\n                \"field\" : \"clientip\",\n                \"ranges\" : [\n                    { \"to\" : \"40.77.167.73\" },\n                    { \"from\" : \"40.77.167.75\" }\n                ]\n            }\n        }\n    }\n}\n```\n\n## ç½‘æ®µæŸ¥è¯¢\n```\nhttp://10.10.11.139:9200/logstash-sshlogin-others-success-*/zhongcai/_search?pretty\n{\n    \"aggs\" : {\n        \"ip_ranges\" : {\n            \"ip_range\" : {\n                \"field\" : \"ip\",\n                \"ranges\" : [\n                    { \"mask\" : \"172.21.202.0/24\" },\n                    { \"mask\" : \"172.21.202.0/24\" }\n                ]\n            }\n        }\n    }\n}\n```\n\n# å…³äºç´¢å¼•çš„æ“ä½œ\n\n## åˆ é™¤æŸä¸ªç´¢å¼•\n-k -u admin:admin ä¸ºç”¨æˆ·åï¼šå¯†ç \n```\ncurl -XDELETE  -k -u admin:admin 'http://localhost:9200/my_index'\n```\n\n\n## æŸ¥çœ‹æŸä¸ªç´¢å¼•çš„Mapping\n```\ncurl -XGET \"http://127.0.0.1:9200/my_index/_mapping?pretty\"\n```\n\n## ç´¢å¼•æ•°æ®è¿ç§»\n\nEsç´¢å¼•reindex(ä»ip_remoteä¸Šè¿ç§»åˆ°æœ¬åœ°)\n```\ncurl -XPOST 'localhost:9200/_reindex?pretty' -H 'Content-Type: application/json' -d'\n{\n  \"source\": {\n    \"remote\": {\n      \"host\": \"http://ip_remote:9200\",\n      \"username\": \"username\",\n      \"password\": \"passwd\"\n    },\n    \"index\": \"old_index\"\n  },\n  \"dest\": {\n    \"index\": \"new_index\"\n  }\n}\n'\n```\n\n## ä¸ºæŸä¸ªç´¢å¼•æ·»åŠ å­—æ®µ\næ·»åŠ numberå­—æ®µï¼š\n### å”¯ä¸€ID\n```\ncurl -POST 'http://127.0.0.1:9200/my_idnex/my_index_type/id/_update?pretty' -H 'Content-Type: application/json' -d'\n{\n   \"doc\" : {\n      \"number\" : 1\n   }\n}\n'\n```\n### æ‰¹é‡æ“ä½œ\n```\ncurl -XPOST 'localhost:9200/logstash-sshlogin-others-success-2017-*/_update_by_query?pretty' -H 'Content-Type: application/json' -d'\n{\n  \"script\": {\n    \"inline\": \"ctx._source.number=1\",\n    \"lang\": \"painless\"\n  },\n  \"query\": {\n    \"match_all\": {\n    }\n  }\n}\n'\n\n```\n\n# æ ¹æ®æŒ‡å®šæ¡ä»¶è¿›è¡Œèšåˆ\næ¯å°æ—¶æˆåŠŸç™»å½•çš„æ¬¡æ•°è¿›è¡Œèšåˆ\n```\ncurl -POST 'http://127.0.0.1:9200/logstash-sshlogin-others-success-2017-*/zhongcai-sshlogin/_search?pretty' -H 'Content-Type: application/json' -d'\n{\n  \"query\": {\n    \"term\": {\n      \"ssh_type\": \"ssh_successful_login\"\n    }\n  },\n  \"aggs\": {\n    \"sums\": {\n      \"date_histogram\": {\n        \"field\": \"@timestamp\",\n        \"interval\": \"hour\",\n        \"format\": \"yyyy-MM-dd HH\"\n      }\n    }\n  }\n}\n'\n```\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["ELK"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"æ•°æ®ç»“æ„ç®—æ³•ä¹‹é“¾è¡¨","url":"/2017/11/13/æ•°æ®ç»“æ„/æ•°æ®ç»“æ„ç®—æ³•ä¹‹é“¾è¡¨/","content":"\n> é“¾è¡¨é¢è¯•æ€»ç»“ï¼Œä½¿ç”¨pythonå®ç°ï¼Œå‚è€ƒï¼šhttps://www.cnblogs.com/lixiaohui-ambition/archive/2012/09/25/2703195.html\n\n<!--More-->\n\n\n```\n#coding:utf-8\n\n# å®šä¹‰é“¾è¡¨\nclass ListNode:\n    def __init__(self):\n        self.data = None\n        self.pnext = None\n\n# é“¾è¡¨æ“ä½œç±»\nclass ListNode_handle:\n    def __init__(self):\n        self.cur_node = None\n    \n    # é“¾è¡¨æ·»åŠ å…ƒç´ \n    def add(self,data):\n        ln = ListNode()\n        ln.data = data\n        \n        ln.pnext = self.cur_node\n        self.cur_node = ln\n        return ln\n    \n    # æ‰“å°é“¾è¡¨\n    def prt(self,ln):\n        while ln:\n            print(ln.data,end=\"  \")\n            ln = ln.pnext\n    # é€†åºè¾“å‡º\n    def _reverse(self,ln):\n        _list = []\n        while ln:\n            _list.append(ln.data)\n            ln = ln.pnext\n        ln_2 = ListNode()\n        ln_h = ListNode_handle()\n        for i in _list:\n            ln_2 = ln_h.add(i)\n        return ln_2\n    \n    # æ±‚é“¾è¡¨çš„é•¿åº¦\n    def _length(self,ln):\n        _len = 0\n        while ln:\n            _len += 1\n            ln = ln.pnext\n        return _len\n    \n    # æŸ¥æ‰¾æŒ‡å®šä½ç½®çš„èŠ‚ç‚¹\n    def _find_loc(self,ln,loc):\n        _sum = 0\n        while ln and _sum != loc:\n            _sum += 1\n            ln = ln.pnext\n        return ln.data\n    \n    # åˆ¤æ–­æŸä¸ªèŠ‚ç‚¹æ˜¯å¦åœ¨é“¾è¡¨ä¸­\n    def _exist(self,ln,data):\n        flag = False\n        while ln and data != ln.data:\n            ln = ln.pnext\n        return flag\n\n# åˆ›å»ºé“¾è¡¨   \nln = ListNode()\nln_h = ListNode_handle()\na = [1,4,2,5,8,5,7,9]\nfor i in a:\n    ln = ln_h.add(i)\n\nprint(\"æ­£åºè¾“å‡º...\")\nln_h.prt(ln)\n\nprint(\"\\n\\né€†åºè¾“å‡º...\")\nln_2 = ln_h._reverse(ln)\nln_h.prt(ln_2)\n\n# æ±‚é“¾è¡¨lnçš„é•¿åº¦\nlength = ln_h._length(ln)\nprint(\"\\n\\nlnçš„é•¿åº¦ä¸º:\",length)\n\n# æŸ¥æ‰¾é“¾è¡¨lnä¸­çš„å€’æ•°ç¬¬ï¼“ä¸ªèŠ‚ç‚¹\ndata = ln_h._find_loc(ln,ln_h._length(ln)-3)\nprint(\"\\n\\nå€’æ•°ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹ä¸º:\",data)\n\n# è¿”å›æŸä¸ªèŠ‚ç‚¹åœ¨é“¾è¡¨ä¸­çš„ä½ç½®\nloc = ln_h._loc(ln,5)\n\n#ã€€åˆ¤æ–­æŸä¸ªèŠ‚ç‚¹æ˜¯å¦åœ¨é“¾è¡¨ä¸­\nflag = ln_h._exist(ln,5)\nprint(\"\\n\\nï¼•æ˜¯å¦å­˜åœ¨ä¸é“¾è¡¨lnä¸­:\",end=\" \")\nif flag:\n    print(\"Yes\")\nelse:\n    print(\"No\")\n```\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æ•°æ®ç»“æ„"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"æ•°æ®ç»“æ„ç®—æ³•ä¹‹åˆå¹¶ä¸¤ä¸ªæœ‰åºåºåˆ—","url":"/2017/11/13/æ•°æ®ç»“æ„/æ•°æ®ç»“æ„ç®—æ³•ä¹‹åˆå¹¶ä¸¤ä¸ªæœ‰åºåºåˆ—/","content":"\n> æœ‰åºåºåˆ—çš„åˆå¹¶ï¼Œpythonå®ç°ã€‚\n\n<!--More-->\n\n\n```\n#coding:utf-8\n\na = [2,4,6,8,10]\nb = [3,5,7,9,11,13,15]\nc = []\n\ndef merge(a,b):\n    i,j = 0,0\n    while i<=len(a)-1 and j<=len(b)-1:\n        if a[i]<b[j]:\n            c.append(a[i])\n            i+=1\n        else:\n            c.append(b[j])\n            j+=1\n    if i<=len(a)-1:\n        for m in a[i:]:\n            c.append(m)\n    \n    if j<=len(b)-1:\n        for n in b[j:]:\n            c.append(n)\n    print(c)\n\nmerge(a,b)\n```\n\nè¿è¡Œç»“æœä¸ºï¼š\n```\n[2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15]\n```\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æ•°æ®ç»“æ„"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"æ•°æ®ç»“æ„ç®—æ³•ä¹‹æ’åº","url":"/2017/11/13/æ•°æ®ç»“æ„/æ•°æ®ç»“æ„ç®—æ³•ä¹‹æ’åº/","content":"> æ•°æ®ç»“æ„é¢è¯•ä¸­ç»å¸¸ä¼šè¢«é—®åˆ°ç¯‡æ’åºç›¸å…³çš„é—®é¢˜ï¼Œé‚£ä¹ˆè¿™ç¯‡æ–‡ç« ä¼šç ”ç©¶ä¸‹æ€ä¹ˆç”¨pythonæ¥å®ç°æ’åºã€‚\n\n<!--More-->\n\n# å†’æ³¡æ’åº\n```\n#codingï¼šutf-8\n\n# å†’æ³¡æ’åº\ndef maopao():\n    a = [2,1,4,3,9,5,6,8,7]\n    for i in range(len(a)-1):\n        for j in range(len(a)-1-i):\n            if a[j]>a[j+1]:\n                temp = a[j]\n                a[j] = a[j+1]\n                a[j+1] = temp\n    print(a)\nmaopao()\n```\nç»“æœä¸ºï¼š\n```\n[1, 2, 3, 4, 5, 6, 7, 8, 9]\n```\n---\n# å½’å¹¶æ’åº\n```\n# å½’å¹¶æ’åº\ndef merge(a,b):\n    i,j = 0,0\n    c = []\n    while i<=len(a)-1 and j<=len(b)-1:\n        if a[i]<b[j]:\n            c.append(a[i])\n            i+=1\n        else:\n            c.append(b[j])\n            j+=1\n    if i<=len(a)-1:\n        for m in a[i:]:\n            c.append(m)\n    \n    if j<=len(b)-1:\n        for n in b[j:]:\n            c.append(n)\n    return c\n\ndef guibing(a):\n    if len(a)<=1:\n        return a\n    center = int(len(a)/2)\n    left = guibing(a[:center])\n    right = guibing(a[center:])\n    return merge(left,right)\n\nprint(guibing([2,1,4,3,9,5,6,8,7]))\n```\n\nç»“æœä¸ºï¼š\n```\n[1, 2, 3, 4, 5, 6, 7, 8, 9]\n```\n---\n#ã€€å¿«é€Ÿæ’åº \n> å¿«é€Ÿæ’åºPythonå®ç°\n\n\n\n```\n#ã€€å¿«é€Ÿæ’åº    \ndef kpsort(left,right,a):\n    based = a[left]\n    i = left\n    j = right\n    while i < j:\n        # ä»æ•°ç»„å³è¾¹å¼€å§‹éå†\n        while a[j]>=based and i<j:\n            j -= 1\n        a[i] = a[j]\n        while a[i]<=based and i<j:\n            i += 1\n        \n        a[j]= a[i]\n        a[i] = based\n\n    return i\n    \ndef kuaipai(left,right,a):\n    if left<right:\n        p = kpsort(left,right,a)\n        kuaipai(left,p-1,a)\n        kuaipai(p+1,right,a)\n\n    return a\n            \nprint(kuaipai(0,8,a =[2,1,4,3,9,5,6,8,7]))\n```\nç»“æœä¸º\n```\n[1, 2, 3, 4, 5, 6, 7, 8, 9]\n```\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æ•°æ®ç»“æ„"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"æ•°æ®ç»“æ„ç®—æ³•ä¹‹äºŒå‰æ ‘","url":"/2017/11/13/æ•°æ®ç»“æ„/æ•°æ®ç»“æ„ç®—æ³•ä¹‹äºŒå‰æ ‘/","content":"\n> æ•°æ®ç»“æ„é¢è¯•ä¸­ç»å¸¸ä¼šè¢«é—®åˆ°ç¯‡äºŒå‰æ ‘ç›¸å…³çš„é—®é¢˜ï¼Œé‚£ä¹ˆè¿™ç¯‡æ–‡ç« ä¼šç ”ç©¶ä¸‹æ€ä¹ˆç”¨pythonæ¥è¿›è¡ŒäºŒå‰æ ‘çš„æ„å»ºå’Œéå†ã€‚\n\n<!--More-->\n\næ³¨æ„ï¼špy2ä¸­\n```\nprint root.elem,\n```\nåœ¨py3ä¸­è¦æ¢æˆ\n```\nprint (root.elem,end=\"  \")\n```\n\n```\n# coding:utf-8\n\n# å®šä¹‰èŠ‚ç‚¹ç±»\nclass Node:\n    def __init__(self,elem = -1,):\n        self.elem = elem\n        self.left = None\n        self.right = None\n        \n# å®šä¹‰äºŒå‰æ ‘\nclass Tree:\n    def __init__(self):\n        self.root = Node()\n        self.myqu = []\n    \n    # æ·»åŠ èŠ‚ç‚¹\n    def add(self,elem):\n        node = Node(elem)\n        if self.root.elem == -1:         # åˆ¤æ–­å¦‚æœæ˜¯æ ¹èŠ‚ç‚¹\n            self.root  = node\n            self.myqu.append(self.root)\n        else:\n            treenode = self.myqu[0]\n            if treenode.left == None:\n                treenode.left = node\n                self.myqu.append(treenode.left)\n            else:\n                treenode.right = node\n                self.myqu.append(treenode.right)\n                self.myqu.pop(0)\n        \n    # åˆ©ç”¨é€’å½’å®ç°æ ‘çš„å…ˆåºéå†\n    def xianxu(self,root):\n        if root == None:\n            return\n        print root.elem,\n        self.xianxu(root.left)\n        self.xianxu(root.right)\n        \n    # åˆ©ç”¨é€’å½’å®ç°æ ‘çš„ä¸­åºéå†\n    def zhongxu(self,root):\n        if root == None:\n            return \n        self.zhongxu(root.left)\n        print root.elem,\n        self.zhongxu(root.right)\n        \n    # åˆ©ç”¨é€’å½’å®ç°æ ‘çš„ååºéå†\n    def houxu(self,root):\n        if root == None:\n            return \n        self.houxu(root.left)\n        self.houxu(root.right)\n        print root.elem,\n    \n    # åˆ©ç”¨é˜Ÿåˆ—å®ç°å±‚æ¬¡éå†\n    def cengci(self,root):\n        if root == None:\n            return\n        myq = []\n        node = root\n        myq.append(node)\n        while myq:\n            node = myq.pop(0)\n            print node.elem,\n            if node.left != None:\n                myq.append(node.left)\n            if node.right != None:\n                myq.append(node.right)\n    \n    # æ±‚æ ‘çš„å¶å­èŠ‚ç‚¹\n    def getYeJiedian(self,root):\n        if root == None:\n            return 0\n        if root.left == None and root.right == None:\n            return 1\n\n        return self.getYeJiedian(root.left) + self.getYeJiedian(root.right)\n\n    # ç”±å…ˆåºå’Œä¸­åº,è¿˜åŸäºŒå‰æ ‘\n    def preMidToHou(self,pre,mid):\n        if len(pre)==0:\n            return None\n        if len(pre)==1:\n            Node(mid[0])\n        root = Node(pre[0])\n        root_index = mid.index(pre[0])\n        root.left = self.preMidToHou(pre[1:root_index + 1],mid[:root_index])\n        root.right = self.preMidToHou(pre[root_index + 1:],mid[root_index + 1:])\n        return root\n\n    # ç”±ååºå’Œä¸­åº,è¿˜åŸäºŒå‰æ ‘\n    def preMidToHou(self,mid,hou):\n        if len(hou)==0:\n            return None\n        if len(hou)==1:\n            Node(mid[0])\n        root = Node(hou[-1])\n        root_index = mid.index(hou[-1])\n        root.left = self.preMidToHou(mid[:root_index],hou[:root_index])\n        root.right = self.preMidToHou(mid[root_index + 1:],mid[root_index + 1:])\n        return root\n\n# åˆ›å»ºä¸€ä¸ªæ ‘ï¼Œæ·»åŠ èŠ‚ç‚¹\ntree = Tree()\nfor i in range(10):\n    tree.add(i)\n    \nprint(\"äºŒå‰æ ‘çš„å…ˆåºéå†:\")\nprint(tree.xianxu(tree.root))\n\nprint(\"äºŒå‰æ ‘çš„ä¸­åºéå†:\")\nprint(tree.zhongxu(tree.root))\n\nprint(\"äºŒå‰æ ‘çš„ååºéå†:\")\nprint(tree.houxu(tree.root))\n\nprint(\"äºŒå‰æ ‘çš„å±‚æ¬¡éå†\")\nprint(tree.cengci(tree.root))\n\nprint(\"\\näºŒå‰æ ‘çš„å¶å­èŠ‚ç‚¹ä¸º:\")\nprint(tree.getYeJiedian(tree.root))\n\nprint(\"\\nå·²çŸ¥äºŒå‰æ ‘å…ˆåºéå†å’Œä¸­åºéå†ï¼Œæ±‚ååº:\")\nprint(\"å…ˆåº:\")\nprint(tree.xianxu(tree.root))\nprint(\"ä¸­åº:\")\nprint(tree.zhongxu(tree.root))\nprint(\"ååº:\")\nroot = tree.preMidToHou([0,1,3,7,8,4,9,2,5,6],[7,3,8,1,9,4,0,5,2,6])\nprint(tree.houxu(root))\n\nprint(\"\\nå·²çŸ¥äºŒå‰æ ‘ååºéå†å’Œä¸­åºéå†ï¼Œæ±‚å‰åº:\")\nprint(\"ååº:\")\nprint(tree.houxu(tree.root))\nprint(\"ä¸­åº:\")\nprint(tree.zhongxu(tree.root))\nprint(\"å‰åº:\")\nroot = tree.preMidToHou([7,3,8,1,9,4,0,5,2,6],[7,8,3,9,4,1,5,6,2,0])\nprint(tree.xianxu(root))\n```\n\nè¿è¡Œç»“æœä¸ºï¼š\n```\näºŒå‰æ ‘çš„å…ˆåºéå†:\n0 1 3 7 8 4 9 2 5 6 None\n\näºŒå‰æ ‘çš„ä¸­åºéå†:\n7 3 8 1 9 4 0 5 2 6 None\n\näºŒå‰æ ‘çš„ååºéå†:\n7 8 3 9 4 1 5 6 2 0 None\n\näºŒå‰æ ‘çš„å±‚æ¬¡éå†\n0 1 2 3 4 5 6 7 8 9 None\n\näºŒå‰æ ‘çš„å¶å­èŠ‚ç‚¹ä¸º:\n5\n\nå·²çŸ¥äºŒå‰æ ‘å…ˆåºéå†å’Œä¸­åºéå†ï¼Œæ±‚ååº:\nå…ˆåº:\n0  1  3  7  8  4  9  2  5  6  None\nä¸­åº:\n7  3  8  1  9  4  0  5  2  6  None\nååº:\n1  3  7  8  4  9  0  5  2  6  None\n\nå·²çŸ¥äºŒå‰æ ‘ååºéå†å’Œä¸­åºéå†ï¼Œæ±‚å‰åº:\nååº:\n7  8  3  9  4  1  5  6  2  0  None\nä¸­åº:\n7  3  8  1  9  4  0  5  2  6  None\nå‰åº:\n0  1  3  7  8  4  9  6  2  5  None\n```\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æ•°æ®ç»“æ„"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"å›å½’åˆ†æä¹‹Sklearnå®ç°ç”µåŠ›é¢„æµ‹","url":"/2017/11/07/æœºå™¨å­¦ä¹ /å›å½’åˆ†æä¹‹Sklearnå®ç°ç”µåŠ›é¢„æµ‹/","content":"\nå‚è€ƒåŸæ–‡ï¼šhttp://www.cnblogs.com/pinard/p/6016029.html\nè¿™é‡Œè¿›è¡Œäº†æ‰‹åŠ¨å®ç°ï¼Œå¢å¼ºè®°å¿†ã€‚\n<!--More-->\n\n# 1ï¼šæ•°æ®é›†ä»‹ç»\nä½¿ç”¨çš„æ•°æ®æ˜¯UCIå¤§å­¦å…¬å¼€çš„æœºå™¨å­¦ä¹ æ•°æ®\n\næ•°æ®çš„ä»‹ç»åœ¨è¿™ï¼š http://archive.ics.uci.edu/ml/datasets/Combined+Cycle+Power+Plant\n\næ•°æ®çš„ä¸‹è½½åœ°å€åœ¨è¿™ï¼šhttp://archive.ics.uci.edu/ml/machine-learning-databases/00294/\n\né‡Œé¢æ˜¯ä¸€ä¸ªå¾ªç¯å‘ç”µåœºçš„æ•°æ®ï¼Œå…±æœ‰9568ä¸ªæ ·æœ¬æ•°æ®ï¼Œæ¯ä¸ªæ•°æ®æœ‰5åˆ—ï¼Œåˆ†åˆ«æ˜¯:ATï¼ˆæ¸©åº¦ï¼‰, Vï¼ˆå‹åŠ›ï¼‰, APï¼ˆæ¹¿åº¦ï¼‰, RHï¼ˆå‹å¼ºï¼‰, PEï¼ˆè¾“å‡ºç”µåŠ›)ã€‚æˆ‘ä»¬ä¸ç”¨çº ç»“äºæ¯é¡¹å…·ä½“çš„æ„æ€ã€‚\n\n\næˆ‘ä»¬çš„é—®é¢˜æ˜¯å¾—åˆ°ä¸€ä¸ªçº¿æ€§çš„å…³ç³»ï¼Œå¯¹åº”PEæ˜¯æ ·æœ¬è¾“å‡ºï¼Œè€ŒAT/V/AP/RHè¿™4ä¸ªæ˜¯æ ·æœ¬ç‰¹å¾ï¼Œ æœºå™¨å­¦ä¹ çš„ç›®çš„å°±æ˜¯å¾—åˆ°ä¸€ä¸ªçº¿æ€§å›å½’æ¨¡å‹ï¼Œå³:\n\n$$\nPE = \\theta _{0} + \\theta _{0} * AT + \\theta _{0} * V +\\theta _{0} * AP +\\theta _{0}*RH\n$$\n\nè€Œéœ€è¦å­¦ä¹ çš„ï¼Œå°±æ˜¯Î¸0,Î¸1,Î¸2,Î¸3,Î¸4è¿™5ä¸ªå‚æ•°ã€‚\n\n---\n# 2ï¼šå‡†å¤‡æ•°æ®\nä¸‹è½½æºæ•°æ®ä¹‹åï¼Œè§£å‹ä¼šå¾—åˆ°ä¸€ä¸ªxlsxçš„æ–‡ä»¶ï¼Œæ‰“å¼€å¦å­˜ä¸ºcsvæ–‡ä»¶ï¼Œæ•°æ®å·²ç»æ•´ç†å¥½ï¼Œæ²¡æœ‰éæ³•æ•°æ®ï¼Œä½†æ˜¯æ•°æ®å¹¶æ²¡æœ‰è¿›è¡Œå½’ä¸€åŒ–ï¼Œä¸è¿‡è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨sklearnæ¥å¸®æˆ‘å¤„ç†\n\nsklearnçš„å½’ä¸€åŒ–å¤„ç†å‚è€ƒï¼šhttp://blog.csdn.net/gamer_gyt/article/details/77761884\n\n---\n\n# 3ï¼šä½¿ç”¨pandasæ¥è¿›è¡Œæ•°æ®çš„è¯»å–\n\n```\nimport pandas as pd\n# pandas è¯»å–æ•°æ®\ndata = pd.read_csv(\"Folds5x2_pp.csv\")\ndata.head()\n```\nç„¶åä¼šçœ‹åˆ°å¦‚ä¸‹ç»“æœï¼Œè¯´æ˜æ•°æ®è¯»å–æˆåŠŸï¼š\n\n```\n\tAT\tV\tAP\tRH\tPE\n0\t8.34\t40.77\t1010.84\t90.01\t480.48\n1\t23.64\t58.49\t1011.40\t74.20\t445.75\n2\t29.74\t56.90\t1007.15\t41.91\t438.76\n3\t19.07\t49.69\t1007.22\t76.79\t453.09\n4\t11.80\t40.66\t1017.13\t97.20\t464.43\n```\n\n---\n\n# 4ï¼šå‡†å¤‡è¿è¡Œç®—æ³•çš„æ•°æ®\n```\nX = data[[\"AT\",\"V\",\"AP\",\"RH\"]]\nprint X.shape\ny = data[[\"PE\"]]\nprint y.shape\n```\n\n```\n(9568, 4)\n(9568, 1)\n```\n\nè¯´æ˜æœ‰9658æ¡æ•°æ®ï¼Œå…¶ä¸­\"AT\",\"V\",\"AP\",\"RH\" å››åˆ—ä½œä¸ºæ ·æœ¬ç‰¹å¾ï¼Œ\"PE\"åˆ—ä½œä¸ºæ ·æœ¬è¾“å‡ºã€‚\n\n---\n# 5ï¼šåˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†\n\n```\nfrom sklearn.cross_validation import train_test_split\n\n# åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†\nX_train,X_test,y_train,y_test = train_test_split(X,y,random_state=1)\nprint X_train.shape\nprint y_train.shape\nprint X_test.shape\nprint y_test.shape\n```\n```\n(7176, 4)\n(7176, 1)\n(2392, 4)\n(2392, 1)\n```\n75%çš„æ•°æ®è¢«åˆ’åˆ†ä¸ºè®­ç»ƒé›†ï¼Œ25çš„æ•°æ®åˆ’åˆ†ä¸ºæµ‹è¯•é›†ã€‚\n\n---\n# 6ï¼šè¿è¡Œsklearn çº¿æ€§æ¨¡å‹\n```\nfrom sklearn.linear_model import LinearRegression\n\nlinreg = LinearRegression()\nlinreg.fit(X_train,y_train)\n\n# è®­ç»ƒæ¨¡å‹å®Œæ¯•ï¼ŒæŸ¥çœ‹ç»“æœ\nprint linreg.intercept_\nprint linreg.coef_\n```\n\n```\n[ 447.06297099]\n[[-1.97376045 -0.23229086  0.0693515  -0.15806957]]\n```\n\nå³æˆ‘ä»¬å¾—åˆ°çš„æ¨¡å‹ç»“æœä¸ºï¼š\n$$\nPE = 447.06297099 - 1.97376045*AT - 0.23229086*V + 0.0693515*AP -0.15806957*RH\n$$\n\n---\n# 7ï¼šæ¨¡å‹è¯„ä»·\næˆ‘ä»¬éœ€è¦è¯„ä»·æ¨¡å‹çš„å¥½åï¼Œé€šå¸¸å¯¹äºçº¿æ€§å›å½’æ¥è®²ï¼Œæˆ‘ä¹ˆä¸€èˆ¬ä½¿ç”¨å‡æ–¹å·®ï¼ˆMSEï¼ŒMean Squared Errorï¼‰æˆ–è€…å‡æ–¹æ ¹å·®ï¼ˆRMSEï¼ŒRoot Mean Squared Errorï¼‰æ¥è¯„ä»·æ¨¡å‹çš„å¥½å\n\n```\ny_pred = linreg.predict(X_test)\nfrom sklearn import metrics\n\n# ä½¿ç”¨sklearnæ¥è®¡ç®—mseå’ŒRmse\nprint \"MSE:\",metrics.mean_squared_error(y_test, y_pred)\nprint \"RMSE:\",np.sqrt(metrics.mean_squared_error(y_test, y_pred))\n```\n\n```\nMSE: 20.0804012021\nRMSE: 4.48111606657\n```\nå¾—åˆ°äº†MSEæˆ–è€…RMSEï¼Œå¦‚æœæˆ‘ä»¬ç”¨å…¶ä»–æ–¹æ³•å¾—åˆ°äº†ä¸åŒçš„ç³»æ•°ï¼Œéœ€è¦é€‰æ‹©æ¨¡å‹æ—¶ï¼Œå°±ç”¨MSEå°çš„æ—¶å€™å¯¹åº”çš„å‚æ•°ã€‚\n\n---\n# 8ï¼šäº¤å‰éªŒè¯\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡äº¤å‰éªŒè¯æ¥æŒç»­ä¼˜åŒ–æ¨¡å‹ï¼Œä»£ç å¦‚ä¸‹ï¼Œæˆ‘ä»¬é‡‡ç”¨10æŠ˜äº¤å‰éªŒè¯ï¼Œå³cross_val_predictä¸­çš„cvå‚æ•°ä¸º10ï¼š\n\n```\n# äº¤å‰éªŒè¯\nfrom sklearn.model_selection import cross_val_predict\npredicted = cross_val_predict(linreg,X,y,cv=10)\nprint \"MSE:\",metrics.mean_squared_error(y, predicted)\nprint \"RMSE:\",np.sqrt(metrics.mean_squared_error(y, predicted))\n```\n\n```\nMSE: 20.7955974619\nRMSE: 4.56021901469\n```\n\nå¯ä»¥çœ‹å‡ºï¼Œé‡‡ç”¨äº¤å‰éªŒè¯æ¨¡å‹çš„MSEæ¯”ç¬¬6èŠ‚çš„å¤§ï¼Œä¸»è¦åŸå› æ˜¯æˆ‘ä»¬è¿™é‡Œæ˜¯å¯¹æ‰€æœ‰æŠ˜çš„æ ·æœ¬åšæµ‹è¯•é›†å¯¹åº”çš„é¢„æµ‹å€¼çš„MSEï¼Œè€Œç¬¬6èŠ‚ä»…ä»…å¯¹25%çš„æµ‹è¯•é›†åšäº†MSEã€‚ä¸¤è€…çš„å…ˆå†³æ¡ä»¶å¹¶ä¸åŒã€‚\n\n---\n# 9ï¼šç”»å›¾æŸ¥çœ‹ç»“æœ\n```\n# ç”»å›¾æŸ¥çœ‹ç»“æœ\nimport matplotlib.pyplot as plt\nfig, ax = plt.subplots()\nax.scatter(y, predicted)\nax.plot([y.min(), y.max()], [y.min(), y.max()], 'k--', lw=4)\nax.set_xlabel('Measured')\nax.set_ylabel('Predicted')\nplt.show()\n```\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20171107133222238?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"å›å½’åˆ†æä¹‹çº¿æ€§å›å½’ï¼ˆNå…ƒçº¿æ€§å›å½’ï¼‰","url":"/2017/09/29/æœºå™¨å­¦ä¹ /å›å½’åˆ†æä¹‹çº¿æ€§å›å½’ï¼ˆNå…ƒçº¿æ€§å›å½’ï¼‰/","content":"\nåœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬ä»‹ç»äº† [ å›å½’åˆ†æä¹‹ç†è®ºç¯‡][1]ï¼Œåœ¨å…¶ä¸­æˆ‘ä»¬æœ‰èŠåˆ°çº¿æ€§å›å½’å’Œéçº¿æ€§å›å½’ï¼ŒåŒ…æ‹¬å¹¿ä¹‰çº¿æ€§å›å½’ï¼Œè¿™ä¸€ç¯‡æ–‡ç« æˆ‘ä»¬æ¥èŠä¸‹å›å½’åˆ†æä¸­çš„çº¿æ€§å›å½’ã€‚\n\n<!--More-->\n\n# ä¸€å…ƒçº¿æ€§å›å½’\né¢„æµ‹æˆ¿ä»·ï¼š\n\nè¾“å…¥ç¼–å·\t| å¹³æ–¹ç±³\t| ä»·æ ¼\n-|-|-\n1 |\t150 |\t6450\n2\t| 200\t| 7450\n3|\t250\t|8450\n4|\t300\t|9450\n5|\t350\t|11450\n6|\t400\t|15450\n7|\t600|\t18450\n\né’ˆå¯¹ä¸Šè¾¹è¿™ç§ä¸€å…ƒæ•°æ®æ¥è®²ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºçš„ä¸€å…ƒçº¿æ€§å›å½’å‡½æ•°ä¸º\n$$\nH(x) = k*x + b\n$$\nå…¶ä¸­H(x)ä¸ºå¹³æ–¹ç±³ä»·æ ¼è¡¨ï¼Œkæ˜¯ä¸€å…ƒå›å½’ç³»æ•°ï¼Œbä¸ºå¸¸æ•°ã€‚æœ€å°äºŒä¹˜æ³•çš„å…¬å¼ï¼š\n$$\nk =\\frac{ \\sum_{1}^{n} (x_{i} - \\bar{x} )(y_{i} - \\bar{y}) } { \\sum_{1}^{n}(x_{i}-\\bar{x})^{2} }\n$$\nè‡ªå·±ä½¿ç”¨pythonä»£ç å®ç°ä¸ºï¼š\n```\ndef leastsq(x,y):\n    \"\"\"\n    x,yåˆ†åˆ«æ˜¯è¦æ‹Ÿåˆçš„æ•°æ®çš„è‡ªå˜é‡åˆ—è¡¨å’Œå› å˜é‡åˆ—è¡¨\n    \"\"\"\n    meanX = sum(x) * 1.0 / len(x)      # æ±‚xçš„å¹³å‡å€¼\n    meanY = sum(y) * 1.0 / len(y)     # æ±‚yçš„å¹³å‡å€¼\n\n    xSum = 0.0\n    ySum = 0.0\n\n    for i in range(len(x)):\n        xSum += (x[i] - meanX) * (y[i] - meanY)\n        ySum += (x[i] - meanX) ** 2\n\n    k = ySum/xSum\n    b = ySum - k * meanX\n\n    return k,b\n```\n\nä½¿ç”¨pythonçš„scipyåŒ…è¿›è¡Œè®¡ç®—:\n```\nleastsq(func, x0, args=(), Dfun=None, full_output=0, col_deriv=0, ftol=1.49012e-08, xtol=1.49012e-08, gtol=0.0, maxfev=0, epsfcn=None, factor=100, diag=None)\n\nfrom scipy.optimize import leastsq\nimport numpy as np\n\ndef fun(p, x):\n    \"\"\"\n    å®šä¹‰æƒ³è¦æ‹Ÿåˆçš„å‡½æ•°\n    \"\"\"\n    k,b = p    # ä»å‚æ•°pè·å¾—æ‹Ÿåˆçš„å‚æ•°\n    return k*x + b\n\ndef err(p, x, y):\n    return fun(p,x) - y\n\n#å®šä¹‰èµ·å§‹çš„å‚æ•° å³ä» y = 1*x+1 å¼€å§‹ï¼Œå…¶å®è¿™ä¸ªå€¼å¯ä»¥éšä¾¿è®¾ï¼Œåªä¸è¿‡ä¼šå½±å“åˆ°æ‰¾åˆ°æœ€ä¼˜è§£çš„æ—¶é—´\np0 = [1,1]\n\n#å°†listç±»å‹è½¬æ¢ä¸º numpy.ndarray ç±»å‹ï¼Œæœ€åˆæˆ‘ç›´æ¥ä½¿ç”¨\n#list ç±»å‹,ç»“æœ leastsqå‡½æ•°æŠ¥é”™ï¼Œåæ¥åœ¨åˆ«çš„blogä¸Šçœ‹åˆ°äº†ï¼ŒåŸæ¥è¦å°†ç±»å‹è½¬\n#æ¢ä¸ºnumpyçš„ç±»å‹\n\nx1 = np.array([150,200,250,300,350,400,600])\ny1 = np.array([6450,7450,8450,9450,11450,15450,18450])\n\nxishu = leastsq(err, p0, args=(x1,y1))\n\nprint xishu[0]\n\n```\n\nå½“ç„¶pythonçš„leastsqå‡½æ•°ä¸ä»…ä»…å±€é™äºä¸€å…ƒä¸€æ¬¡çš„åº”ç”¨ï¼Œä¹Ÿå¯ä»¥åº”ç”¨åˆ°ä¸€å…ƒäºŒæ¬¡ï¼ŒäºŒå…ƒäºŒæ¬¡ï¼Œå¤šå…ƒå¤šæ¬¡ç­‰ï¼Œå…·ä½“å¯ä»¥çœ‹ä¸‹è¿™ç¯‡åšå®¢ï¼šhttp://www.cnblogs.com/NanShan2016/p/5493429.html\n\n# å¤šå…ƒçº¿æ€§å›å½’\næ€»ä¹‹ï¼šæˆ‘ä»¬å¯ä»¥ç”¨python leastsqå‡½æ•°è§£å†³å‡ ä¹æ‰€æœ‰çš„çº¿æ€§å›å½’çš„é—®é¢˜äº†ï¼Œæ¯”å¦‚è¯´\n$$y = a * x^2 + b * x + c$$\n$$y = a * x_1^2 + b * x_1 + c * x_2 + d$$\n$$y = a * x_1^3 + b * x_1^2 + c * x_1 + d$$\nåœ¨ä½¿ç”¨æ—¶åªéœ€æŠŠå‚æ•°åˆ—è¡¨å’Œ fun å‡½æ•°ä¸­çš„return æ¢ä¸€ä¸‹ï¼Œæ‹¿ä»¥ä¸‹å‡½æ•°ä¸¾ä¾‹\n$$y = a * x_1^2 + b * x_1 + c * x_2 + d$$\n\nå¯¹åº”çš„python ä»£ç æ˜¯ï¼š\n```\nfrom scipy.optimize import leastsq\nimport numpy as np\n\n\ndef fun(p, x1, x2):\n    \"\"\"\n    å®šä¹‰æƒ³è¦æ‹Ÿåˆçš„å‡½æ•°\n    \"\"\"\n    a,b,c,d = p    # ä»å‚æ•°pè·å¾—æ‹Ÿåˆçš„å‚æ•°\n    return a * (x1**2) + b * x1 + c * x2 + d\n\ndef err(p, x1, x2, y):\n    return fun(p,x1,x2) - y\n\n#å®šä¹‰èµ·å§‹çš„å‚æ•° å³ä» y = 1*x+1 å¼€å§‹ï¼Œå…¶å®è¿™ä¸ªå€¼å¯ä»¥éšä¾¿è®¾ï¼Œåªä¸è¿‡ä¼šå½±å“åˆ°æ‰¾åˆ°æœ€ä¼˜è§£çš„æ—¶é—´\np0 = [1,1,1,1]\n\n#å°†listç±»å‹è½¬æ¢ä¸º numpy.ndarray ç±»å‹ï¼Œæœ€åˆæˆ‘ç›´æ¥ä½¿ç”¨\n#list ç±»å‹,ç»“æœ leastsqå‡½æ•°æŠ¥é”™ï¼Œåæ¥åœ¨åˆ«çš„blogä¸Šçœ‹åˆ°äº†ï¼ŒåŸæ¥è¦å°†ç±»å‹è½¬\n#æ¢ä¸ºnumpyçš„ç±»å‹\n\nx1 = np.array([150,200,250,300,350,400,600])    # é¢ç§¯\nx2 = np.array([4,2,7,9,12,14,15])               # æ¥¼å±‚\ny1 = np.array([6450,7450,8450,9450,11450,15450,18450])   # ä»·æ ¼/å¹³æ–¹ç±³\n\nxishu = leastsq(err, p0, args=(x1,x2,y1))\n\nprint xishu[0]\n```\n\n# sklearnä¸­çš„çº¿æ€§å›å½’åº”ç”¨\n## æ™®é€šæœ€å°äºŒä¹˜å›å½’\nè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯sklearnä¸­çš„linear_modelæ¥æ¨¡æ‹Ÿ$$y=a * x_1 + b * x_2 + c$$\n\n```\nIn [1]: from sklearn.linear_model import LinearRegression\n\nIn [2]: linreg = LinearRegression()\n\nIn [3]: linreg.fit([[0, 0], [1, 1], [2, 2]], [0, 1, 2])\n\nIn [4]: linreg.coef_\nOut[4]: array([ 0.5,  0.5])\n\nIn [5]: linreg.intercept_\nOut[5]: 1.1102230246251565e-16\n\nIn [6]: linreg.predict([4,4])\nOut[6]: array([ 4.])\n\nIn [7]: zip([\"x1\",\"x2\"], linreg.coef_)\nOut[7]: [('x1', 0.5), ('x2', 0.49999999999999989)]\n```\næ‰€ä»¥å¯å¾—$$ y = 0.5 * x_1 + 0.5 * x_2 + 1.11e-16$$\n\nlinreg.coef_  ä¸ºç³»æ•° a,b\n\nlinreg.intercept_ ä¸ºæˆªè· c\n\nç¼ºç‚¹ï¼šå› ä¸ºç³»æ•°çŸ©é˜µxä¸å®ƒçš„è½¬ç½®çŸ©é˜µç›¸ä¹˜å¾—åˆ°çš„çŸ©é˜µä¸èƒ½æ±‚é€†ï¼Œå¯¼è‡´æœ€å°äºŒä¹˜æ³•å¾—åˆ°çš„å›å½’ç³»æ•°ä¸ç¨³å®šï¼Œæ–¹å·®å¾ˆå¤§ã€‚\n\n\n## å¤šé¡¹å¼å›å½’ï¼šåŸºå‡½æ•°æ‰©å±•çº¿æ€§æ¨¡å‹\næœºå™¨å­¦ä¹ ä¸­ä¸€ç§å¸¸è§çš„æ¨¡å¼æ˜¯ä½¿ç”¨çº¿æ€§æ¨¡å‹è®­ç»ƒæ•°æ®çš„éçº¿æ€§å‡½æ•°ã€‚è¿™ç§æ–¹æ³•ä¿æŒäº†ä¸€èˆ¬å¿«é€Ÿçš„çº¿æ€§æ–¹æ³•çš„æ€§èƒ½ï¼ŒåŒæ—¶å…è®¸å®ƒä»¬é€‚åº”æ›´å¹¿æ³›çš„æ•°æ®èŒƒå›´ã€‚\n\nä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡æ„é€ ç³»æ•°çš„å¤šé¡¹å¼ç‰¹å¾æ¥æ‰©å±•ä¸€ä¸ªç®€å•çš„çº¿æ€§å›å½’ã€‚åœ¨æ ‡å‡†çº¿æ€§å›å½’çš„æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½æœ‰ä¸€ä¸ªç±»ä¼¼äºäºŒç»´æ•°æ®çš„æ¨¡å‹ï¼š\n$$\ny(w,x) = w_{0} + w_{1} x_{1} + w_{2} x_{2}\n$$\n\nå¦‚æœæˆ‘ä»¬æƒ³æŠŠæŠ›ç‰©é¢æ‹Ÿåˆæˆæ•°æ®è€Œä¸æ˜¯å¹³é¢ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆäºŒé˜¶å¤šé¡¹å¼çš„ç‰¹å¾ï¼Œä½¿æ¨¡å‹çœ‹èµ·æ¥åƒè¿™æ ·:\n$$\ny(w,x) = w_{0} + w_{1} x_{1} + w_{2} x_{2} + w_{3} x_{1}x_{2} + w_{4} x_{1}^2 + w_{5} x_{2}^2\n$$\n\næˆ‘ä»¬å‘ç°ï¼Œè¿™ä»ç„¶æ˜¯ä¸€ä¸ªçº¿æ€§æ¨¡å‹ï¼Œæƒ³è±¡ç€åˆ›å»ºä¸€ä¸ªæ–°å˜é‡ï¼š\n$$\nz = [x_{1},x_{2},x_{1} x_{2},x_{1}^2,x_{2}^2]\n$$\n\nå¯ä»¥æŠŠçº¿æ€§å›å½’æ¨¡å‹å†™æˆä¸‹è¾¹è¿™ç§å½¢å¼ï¼š\n$$\ny(w,x) = w_{0} + w_{1} z_{1} + w_{2} z_{2} + w_{3} z_{3} + w_{4} z_{4} + w_{5} z_{5}\n$$\næˆ‘ä»¬çœ‹åˆ°ï¼Œæ‰€å¾—çš„å¤šé¡¹å¼å›å½’ä¸æˆ‘ä»¬ä¸Šé¢æ‰€è€ƒè™‘çš„çº¿æ€§æ¨¡å‹ç›¸åŒï¼ˆå³æ¨¡å‹åœ¨Wä¸­æ˜¯çº¿æ€§çš„ï¼‰ï¼Œå¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•æ¥æ±‚è§£ã€‚é€šè¿‡è€ƒè™‘åœ¨ç”¨è¿™äº›åŸºå‡½æ•°å»ºç«‹çš„é«˜ç»´ç©ºé—´ä¸­çš„çº¿æ€§æ‹Ÿåˆï¼Œè¯¥æ¨¡å‹å…·æœ‰çµæ´»æ€§ï¼Œå¯ä»¥é€‚åº”æ›´å¹¿æ³›çš„æ•°æ®èŒƒå›´ã€‚\n\nä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼Œå°†äºŒç»´æ•°æ®è¿›è¡ŒäºŒå…ƒè½¬æ¢,è½¬æ¢è§„åˆ™ä¸ºï¼š\n$$\n[x_1, x_2] => [1, x_1, x_2, x_1^2, x_1 x_2, x_2^2]\n$$\n\n```\nIn [15]: from sklearn.preprocessing import PolynomialFeatures\n\nIn [16]: import numpy as np\n\nIn [17]: X = np.arange(6).reshape(3,2)\n\nIn [18]: X\nOut[18]: \narray([[0, 1],\n       [2, 3],\n       [4, 5]])\n\nIn [19]: poly = PolynomialFeatures(degree=2)\n\nIn [20]: poly.fit_transform(X)\nOut[20]: \narray([[  1.,   0.,   1.,   0.,   0.,   1.],\n       [  1.,   2.,   3.,   4.,   6.,   9.],\n       [  1.,   4.,   5.,  16.,  20.,  25.]])\n```\n\néªŒè¯ï¼š\n```\nIn [38]: from sklearn.preprocessing import PolynomialFeatures\n\nIn [39]: from sklearn.linear_model import LinearRegression\n\nIn [40]: from sklearn.pipeline import Pipeline\n\nIn [41]: import numpy as np\n\nIn [42]: \n\nIn [42]: model = Pipeline( [ (\"poly\",PolynomialFeatures(degree=3)),(\"linear\",LinearRegression(fit_intercept=False)) ] )\n\nIn [43]: model\nOut[43]: Pipeline(steps=[('poly', PolynomialFeatures(degree=3, include_bias=True, interaction_only=False)), ('linear', LinearRegression(copy_X=True, fit_intercept=False, n_jobs=1, normalize=False))])\n\nIn [44]: x = np.arange(5)\n\nIn [45]: y = 3 - 2 * x + x ** 2 - x ** 3\n\nIn [46]: y\nOut[46]: array([  3,   1,  -5, -21, -53])\n\nIn [47]: model = model.fit(x[:,np.newaxis],y)\n\nIn [48]: model.named_steps['linear'].coef_\nOut[48]: array([ 3., -2.,  1., -1.])\n```\næˆ‘ä»¬å¯ä»¥çœ‹å‡ºæœ€åæ±‚å‡ºçš„å‚æ•°å’Œä¸€å…ƒä¸‰æ¬¡æ–¹ç¨‹æ˜¯ä¸€è‡´çš„ã€‚\n\nè¿™é‡Œå¦‚æœæŠŠdegreeæ”¹ä¸º2ï¼Œyçš„æ–¹ç¨‹ä¹Ÿæ¢ä¸€ä¸‹ï¼Œç»“æœä¹Ÿæ˜¯ä¸€è‡´çš„\n```\nIn [51]: from sklearn.linear_model import LinearRegression\n\nIn [52]: from sklearn.preprocessing import PolynomialFeatures\n\nIn [53]: from sklearn.pipeline import Pipeline\n\nIn [54]: import numpy as np\n\nIn [55]: model = Pipeline( [ (\"poly\",PolynomialFeatures(degree=2)),(\"linear\",LinearRegression(fit_intercept=False)) ] )\n\nIn [56]: x = np.arange(5)\n\nIn [57]: y = 3 + 2 * x + x ** 2\n\nIn [58]: model = model.fit(x[:, np.newaxis], y)\n\nIn [59]: model.named_steps['linear'].coef_\nOut[59]: array([ 3., 2.,  1.])\n```\n\n\n## çº¿æ€§å›å½’çš„è¯„æµ‹\nåœ¨[ä¸Šä¸€ç¯‡æ–‡ç« ](http://note.youdao.com/)ä¸­æˆ‘ä»¬èŠåˆ°äº†å›å½’æ¨¡å‹çš„è¯„æµ‹æ–¹æ³•ï¼Œè§£ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†èŠèŠå¦‚ä½•æ¥è¯„ä»·ä¸€ä¸ªå›å½’æ¨¡å‹çš„å¥½åã€‚\n\nè¿™é‡Œæˆ‘ä»¬å®šä¹‰é¢„æµ‹å€¼å’ŒçœŸå®å€¼åˆ†åˆ«ä¸ºï¼š\n```\ntrue = [10, 5, 3, 2]\npred = [9, 5, 5, 3]\n```\n\n1: å¹³å‡ç»å¯¹è¯¯å·®ï¼ˆMean Absolute Error, MAEï¼‰\n$$\n\\frac{1}{N}(\\sum_{1}^{n} |y_i - \\bar{y}|)\n$$\n\n2: å‡æ–¹è¯¯å·®ï¼ˆMean Squared Error, MSEï¼‰\n$$\n\\frac{1}{N}\\sum_{1}^{n}(y_i - \\bar{y})^2\n$$\n\n3: å‡æ–¹æ ¹è¯¯å·®ï¼ˆRoot Mean Squared Error, RMSEï¼‰\n$$\n\\frac{1}{N} \\sqrt{ \\sum_{1}^{n}(y_i - \\bar{y})^2 }\n$$\n\n```\nIn [80]: from sklearn import metrics\n\nIn [81]: import numpy as np\n\nIn [82]: true = [10, 5, 3, 2]\n\nIn [83]: pred = [9, 5, 5, 3]\n\nIn [84]: print(\"MAE: \", metrics.mean_absolute_error(true,pred))\n('MAE: ', 1.0)\n\nIn [85]: print(\"MAE By Hand: \", (1+0+2+1)/4.)\n('MAE By Hand: ', 1.0)\n\nIn [86]: print(\"MSE: \", metrics.mean_squared_error(true,pred))\n('MSE: ', 1.5)\n\nIn [87]: print(\"MSE By Hand: \", (1 ** 2 + 0 ** 2 + 2 ** 2 + 1 ** 2 ) / 4.)\n('MSE By Hand: ', 1.5)\n\nIn [88]: print(\"RMSE: \", np.sqrt(metrics.mean_squared_error(true,pred)))\n('RMSE: ', 1.2247448713915889)\n\nIn [89]: print(\"RMSE By Hand: \", np.sqrt((1 ** 2 + 0 ** 2 + 2 ** 2 + 1 ** 2 ) / 4.))\n('RMSE By Hand: ', 1.2247448713915889)\n```\n\n---\n# æ€»ç»“\nçº¿æ€§å›å½’åœ¨ç°å®ä¸­è¿˜æ˜¯å¯ä»¥è§£å†³å¾ˆå¤šé—®é¢˜çš„ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œåç»­æˆ‘ä¼šç»§ç»­æ•´ç†é€»è¾‘å›å½’ï¼Œå²­å›å½’ç­‰ç›¸å…³å›å½’çš„çŸ¥è¯†ï¼Œå¦‚æœä½ æ„Ÿè§‰æœ‰ç”¨ï¼Œæ¬¢è¿åˆ†äº«ï¼\n\n  [1]: http://blog.csdn.net/gamer_gyt/article/details/78008144\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"å‡ ç§è·ç¦»è®¡ç®—å…¬å¼åœ¨æ•°æ®æŒ–æ˜ä¸­çš„åº”ç”¨åœºæ™¯åˆ†æ","url":"/2017/09/20/æœºå™¨å­¦ä¹ /å‡ ç§è·ç¦»è®¡ç®—å…¬å¼åœ¨æ•°æ®æŒ–æ˜ä¸­çš„åº”ç”¨åœºæ™¯åˆ†æ/","content":"\næœ¬æ–‡æ¶‰åŠä»¥ä¸‹å‡ ç§è·ç¦»è®¡ç®—å…¬å¼çš„åˆ†æï¼Œå‚è€ƒèµ„æ–™ä¸ºã€Šé¢å‘ç¨‹åºå‘˜çš„æ•°æ®æŒ–æ˜æŒ‡å—ã€‹\n\n- æ›¼å“ˆé¡¿è·ç¦»\n- æ¬§å‡ é‡Œå¾—è·ç¦»\n- é—µå¯å¤«æ–¯åŸºè·ç¦»\n- çš®å°”é€Šç›¸å…³ç³»æ•°\n- ä½™å¼¦ç›¸ä¼¼åº¦\n\n\n<!--More-->\n\nä¹‹å‰æ•´ç†è¿‡ä¸€ç¯‡å…³äºè·ç¦»ç›¸å…³çš„æ–‡ç« ï¼š[æœºå™¨å­¦ä¹ ç®—æ³•ä¸­çš„è·ç¦»å’Œç›¸ä¼¼æ€§è®¡ç®—å…¬å¼ï¼Œåˆ†æä»¥åŠpythonå®ç°]()\n\n# é—µå¯å¤«æ–¯åŸºè·ç¦»\n\nä¸¤ä¸ªnç»´å˜é‡a(x11,x12,â€¦,x1n)ä¸ b(x21,x22,â€¦,x2n)é—´çš„é—µå¯å¤«æ–¯åŸºè·ç¦»å®šä¹‰ä¸ºï¼š\n$$ \\sqrt[p]{ \\sum_{k=1}^{n} \\left | x_{1k}-x_{2k} \\right |^p}  $$\n\nå…¶ä¸­pæ˜¯ä¸€ä¸ªå˜å‚æ•°ã€‚\n\nå½“p=1æ—¶ï¼Œå°±æ˜¯æ›¼å“ˆé¡¿è·ç¦»\n\nå½“p=2æ—¶ï¼Œå°±æ˜¯æ¬§æ°è·ç¦»\n\nå½“pâ†’âˆæ—¶ï¼Œå°±æ˜¯åˆ‡æ¯”é›ªå¤«è·ç¦»\n\næ ¹æ®å˜å‚æ•°çš„ä¸åŒï¼Œé—µæ°è·ç¦»å¯ä»¥è¡¨ç¤ºä¸€ç±»çš„è·ç¦»ã€‚\n\npå€¼è¶Šå¤§ï¼Œå•ä¸ªç»´åº¦çš„å·®å€¼å¤§å°ä¼šå¯¹æ•´ä½“è·ç¦»æœ‰æ›´å¤§çš„å½±å“\n\n# æ›¼å“ˆé¡¿è·ç¦»ï¼æ¬§å‡ é‡Œå¾—è·ç¦»çš„ç‘•ç–µ\nåœ¨ã€Šé¢å‘ç¨‹åºå‘˜çš„æ•°æ®æŒ–æ˜æŒ‡å—ã€‹ä¸­ç»™å‡ºäº†è¿™æ ·ä¸€ç»„æ ·ä¾‹æ•°æ®, ä¸‹å›¾ä¸ºä¸€ä¸ªåœ¨çº¿éŸ³ä¹ç½‘ç«™çš„çš„ç”¨æˆ·è¯„åˆ†æƒ…å†µï¼Œç”¨æˆ·å¯ä»¥ç”¨1-5æ˜Ÿæ¥è¯„ä»·ä¸€ä¸ªä¹é˜Ÿï¼Œä¸‹è¾¹æ˜¯8ä½ç”¨æˆ·å¯¹8ä¸ªä¹é˜Ÿçš„è¯„ä»·ï¼š\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20170920102356159?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\n\nè¡¨ä¸­çš„æ¨ªçº¿è¡¨ç¤ºç”¨æˆ·æ²¡æœ‰å¯¹ä¹é˜Ÿè¿›è¡Œè¯„ä»·ï¼Œæˆ‘ä»¬åœ¨è®¡ç®—ä¸¤ä¸ªç”¨æˆ·çš„è·ç¦»æ—¶ï¼Œåªé‡‡ç”¨ä»–ä»¬éƒ½è¯„ä»·è¿‡çš„ä¹é˜Ÿã€‚\n\nç°åœ¨æ¥æ±‚Angelicaå’ŒBillçš„è·ç¦»ï¼Œå› ä¸ºä»–ä»¬å…±åŒè¯„åˆ†è¿‡çš„ä¹é˜Ÿæœ‰5ä¸ªï¼Œæ‰€ä»¥ä½¿ç”¨å…¶å¯¹è¯¥5ä¸ªä¹é˜Ÿçš„è¯„åˆ†è¿›è¡Œæ›¼å“ˆé¡¿è·ç¦»çš„è®¡ç®—ä¸ºï¼š\n\n```\nDis_1 = |3.5-2| + |2-3.5| + |5-2| + |1.5-3.5| + |2-3| = 9\n```\n\nåŒæ ·ä½¿ç”¨æ¬§å¼è·ç¦»è®¡ç®—ä¸ºï¼š\n```\nDis_2 = sqrt( (3.5-2)^2 + (2-3.5)^2 + (5-2)^2 + (1.5-3.5)^2 + (2-3)^2 ) = 4.3\n```\nå½“å¯¹Angelicaå’ŒBillï¼ŒBillå’ŒChanè¿›è¡Œè·ç¦»å¯¹æ¯”æ—¶ï¼Œç”±äºä¸¤è€…çš„å…±åŒè¯„åˆ†è¿‡çš„ä¹é˜Ÿå‡ä¸º5ï¼Œæ•°æ®éƒ½åœ¨ä¸€ä¸ª5ç»´ç©ºé—´é‡Œï¼Œæ˜¯å…¬å¹³çš„ï¼Œå¦‚æœç°åœ¨è¦è®¡ç®—Angelicaå’ŒHaileyä¸Billçš„è·ç¦»æ—¶ï¼Œä¼šå‘ç°ï¼ŒAngelicaä¸Billå…±åŒè¯„åˆ†çš„æœ‰5ä¸ªä¹é˜Ÿï¼ŒHaileyä¸Billå…±åŒè¯„åˆ†çš„æœ‰3ä¸ªä¹é˜Ÿï¼Œä¹Ÿå°±æ˜¯è¯´ä¸¤è€…æ•°æ®ä¸€ä¸ªåœ¨5ç»´ç©ºé—´é‡Œï¼Œä¸€ä¸ªåœ¨ä¸‰ç»´ç©ºé—´é‡Œï¼Œè¿™æ ·æ˜æ˜¾æ˜¯ä¸å…¬å¹³çš„ã€‚è¿™å°†ä¼šå¯¹æˆ‘ä»¬è¿›è¡Œè®¡ç®—æ—¶äº§ç”Ÿä¸å¥½çš„å½±å“ï¼Œæ‰€ä»¥æ›¼å“ˆé¡¿è·ç¦»å’Œæ¬§å‡ é‡Œå¾—è·ç¦»åœ¨æ•°æ®å®Œæ•´çš„æƒ…å†µä¸‹æ•ˆæœæœ€å¥½ã€‚\n\n---\n# ç”¨æˆ·é—®é¢˜ï¼çš®å°”é€Šç›¸å…³ç³»æ•°ï¼åˆ†æ•°è†¨èƒ€\n\n## ç°è±¡â€”â€”ç”¨æˆ·é—®é¢˜\nä»”ç»†è§‚å¯Ÿç”¨æˆ·å¯¹ä¹é˜Ÿçš„è¯„åˆ†æ•°æ®ï¼Œå¯ä»¥å‘ç°æ¯ä¸ªç”¨æˆ·çš„è¯„åˆ†æ ‡å‡†ä¸åŒï¼š\n\n- Billæ²¡æœ‰æ‰“å‡ºæç«¯çš„åˆ†æ•°ï¼Œéƒ½åœ¨2-4åˆ†ä¹‹é—´\n- Jordynä¼¼ä¹å–œæ¬¢æ‰€æœ‰çš„ä¹é˜Ÿï¼Œæ‰“åˆ†éƒ½åœ¨4-5ä¹‹é—´\n- Haileyæ˜¯ä¸€ä¸ªæœ‰è¶£çš„äººï¼Œä»–çš„è¯„åˆ†ä¸æ˜¯1å°±æ˜¯4\n\né‚£ä¹ˆå¦‚ä½•æ¯”è¾ƒè¿™äº›ç”¨æˆ·å‘¢ï¼Ÿæ¯”å¦‚è¯´Haileyçš„4åˆ†æ˜¯ç›¸å½“äºJordynçš„4åˆ†è¿˜æ˜¯5åˆ†å‘¢ï¼Ÿæˆ‘è§‰å¾—æ›´æ¥è¿‘5åˆ†ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå°±å½±å“æ¨èç³»ç»Ÿçš„å‡†ç¡®æ€§äº†ï¼\n\n## è§£å†³è¯¥ç°è±¡\nè§£å†³è¯¥ç°è±¡çš„åŠæ³•ä¹‹ä¸€å°±æ˜¯ ä½¿ç”¨çš®å°”é€Šç›¸å…³ç³»æ•°ï¼Œä¾‹å¦‚ä¸‹è¾¹è¿™æ ·çš„æ•°æ®æ ·ä¾‹ï¼ˆClaraå’ŒRobertå¯¹äº”ä¸ªä¹é˜Ÿçš„è¯„åˆ†ï¼‰ï¼š\n\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20170920111425007?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\n\n\nè¿™ç§ç°è±¡åœ¨æ•°æ®æŒ–æ˜é¢†åŸŸè¢«ç§°ä¸ºâ€œåˆ†æ•°è†¨èƒ€â€œã€‚æˆ‘ä»¬å°†å…¶è¯„åˆ†ç”»æˆå›¾ï¼Œå¦‚ä¸‹ï¼š\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20170920112804525?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\n\nä¸€æ¡ç›´çº¿-å®Œå…¨å»åˆï¼Œä»£è¡¨ç€Claraå’ŒRobertçš„å–œå¥½å®Œå…¨ä¸€è‡´ã€‚\n\nçš®å°”é€Šç›¸å…³ç³»æ•°ç”¨äºè¡¡é‡ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œä»–çš„å€¼åœ¨-1ï½1ï¼Œ1ä»£è¡¨å®Œå…¨ä¸€è‡´ï¼Œ-1ä»£è¡¨å®Œå…¨ç›¸æ‚–ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨çš®å°”é€Šç›¸å…³ç³»æ•°æ¥æ‰¾åˆ°ç›¸ä¼¼çš„ç”¨æˆ·ã€‚\n\nçš®å°”é€Šç›¸å…³ç³»æ•°çš„è®¡ç®—å…¬å¼ä¸ºï¼š\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20170920114015874?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\nè¯¥å…¬å¼é™¤äº†çœ‹èµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œå¦å¤–éœ€è¦å¯¹æ•°æ®è¿›è¡Œä¸¤æ¬¡éå†ï¼Œç¬¬ä¸€æ¬¡éå†æ±‚å‡º xå¹³å‡å€¼å’Œyå¹³å‡å€¼ï¼Œç¬¬äºŒæ¬¡éå†æ‰èƒ½å‡ºç°ç»“æœï¼Œè¿™é‡Œæä¾›å¦å¤–ä¸€ä¸ªè®¡ç®—å…¬å¼ï¼Œèƒ½å¤Ÿè®¡ç®—çš®å°”é€Šç›¸å…³ç³»æ•°çš„è¿‘ä¼¼å€¼ï¼š\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20170920114326883?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\n\n---\n\n# ä½™å¼¦ç›¸ä¼¼åº¦ï¼ç¨€ç–æ•°æ®\nå‡è®¾è¿™æ ·ä¸€ä¸ªæ•°æ®é›†ï¼Œä¸€ä¸ªåœ¨çº¿éŸ³ä¹ç½‘ç«™ï¼Œæœ‰10000wé¦–éŸ³ä¹ï¼ˆè¿™é‡Œä¸è€ƒè™‘éŸ³ä¹ç±»å‹ï¼Œå¹´ä»£ç­‰å› ç´ ï¼‰ï¼Œæ¯ä¸ªç”¨æˆ·å¸¸å¬çš„ä¹Ÿå°±å…¶ä¸­çš„å‡ åé¦–ï¼Œè¿™ç§æƒ…å†µä¸‹ä½¿ç”¨æ›¼å“ˆé¡¿æˆ–è€…æ¬§å‡ é‡Œå¾—æˆ–è€…çš®å°”é€Šç›¸å…³ç³»æ•°è¿›è¡Œè®¡ç®—ç”¨æˆ·ä¹‹é—´ç›¸ä¼¼æ€§ï¼Œè®¡ç®—ç›¸ä¼¼å€¼ä¼šéå¸¸å°ï¼Œå› ä¸ºç”¨æˆ·ä¹‹é—´çš„äº¤é›†æœ¬æ¥å°±å¾ˆå°‘ï¼Œè¿™æ ·å¯¹äºè®¡ç®—ç»“æœæ¥è®²æ˜¯å¾ˆä¸å‡†ç¡®çš„ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä½™å¼¦ç›¸ä¼¼åº¦äº†ï¼Œä½™å¼¦ç›¸ä¼¼åº¦è¿›è¡Œè®¡ç®—æ—¶ä¼šè‡ªåŠ¨ç•¥è¿‡è¿™äº›éé›¶å€¼ã€‚\n\n# æ€»ç»“\nè¿™é‡Œåªæ˜¯ç®€ç­”çš„ä»‹ç»äº†è¿™å‡ ç§ç›¸ä¼¼æ€§è·ç¦»åº¦é‡çš„æ–¹æ³•å’Œåœºæ™¯ï¼Œä½†æ˜¯åœ¨å®é™…ç¯å¢ƒä¸­è¿œæ¯”è¿™ä¸ªå¤æ‚è®¸å¤šã€‚è¿™é‡Œæ€»ç»“ä¸‹ï¼š\n\n- å¦‚æœæ•°æ®å­˜åœ¨â€œåˆ†æ•°è†¨èƒ€â€œé—®é¢˜ï¼Œå°±ä½¿ç”¨çš®å°”é€Šç›¸å…³ç³»æ•°\n- å¦‚æœæ•°æ®æ¯”è¾ƒå¯†é›†ï¼Œå˜é‡ä¹‹é—´åŸºæœ¬éƒ½å­˜åœ¨å…±æœ‰å€¼ï¼Œä¸”è¿™äº›è·ç¦»æ•°æ®éƒ½æ˜¯éå¸¸é‡è¦çš„ï¼Œé‚£å°±ä½¿ç”¨æ¬§å‡ é‡Œå¾—æˆ–è€…æ›¼å“ˆé¡¿è·ç¦»\n- å¦‚æœæ•°æ®æ˜¯ç¨€ç–çš„ï¼Œå°±ä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"æœºå™¨å­¦ä¹ ä¸­éå¸¸æœ‰åçš„ç†è®ºæˆ–å®šç†ä½ çŸ¥é“å‡ ä¸ª","url":"/2017/09/20/æœºå™¨å­¦ä¹ /æœºå™¨å­¦ä¹ ä¸­éå¸¸æœ‰åçš„ç†è®ºæˆ–å®šç†ä½ çŸ¥é“å‡ ä¸ª/","content":"\nåœ¨æœºå™¨å­¦ä¹ ä¸­,æœ‰ä¸€äº›éå¸¸æœ‰åçš„ç†è®ºæˆ–å®šç†,å¯¹ç†è§£æœºå™¨å­¦ä¹ çš„å†…åœ¨ç‰¹æ€§éå¸¸æœ‰å¸®åŠ©ã€‚\n\n# PCAå­¦ä¹ ç†è®º\nå½“ä½¿ç”¨æœºå™¨å­¦ä¹ ç®—æ³•æ¥è§£å†³æŸä¸ªé—®é¢˜æ—¶ï¼Œé€šå¸¸é ç»éªŒæˆ–è€…å¤šæ¬¡å®éªŒæ¥å¾—åˆ°åˆé€‚çš„æ¨¡å‹ï¼Œè®­ç»ƒæ ·æœ¬æ•°é‡å’Œç›¸å…³çš„å‚æ•°ã€‚ä½†æ˜¯ç»éªŒåˆ¤æ–­æˆæœ¬è¾ƒé«˜ï¼Œä¸”ä¸å¤ªå¯é ï¼Œå› æ­¤å¸Œæœ›æœ‰ä¸€å¥—ç†è®ºèƒ½å¤Ÿåˆ†æé—®é¢˜ï¼Œè®¡ç®—æ¨¡å‹èƒ½åŠ›ï¼Œä¸ºç®—æ³•æä¾›ç†è®ºä¿è¯ã€‚è¿™å°±æ˜¯è®¡ç®—å­¦ä¹ ç†è®ºï¼ˆComputational Learning Theoryï¼‰ï¼Œå…¶ä¸­æœ€åŸºç¡€çš„å°±æ˜¯è¿‘ä¼¼æ­£ç¡®å­¦ä¹ ç†è®ºï¼ˆProbably Approximately Coorrectï¼ŒPCAï¼‰ã€‚\n\n<!--More-->\n\næœºå™¨å­¦ä¹ ä¸­ä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜å°±æ˜¯æœŸæœ›é”™è¯¯ä¸ç»éªŒé”™è¯¯ä¹‹é—´çš„è¯¯å·®ï¼Œç§°ä¸ºæ³›åŒ–è¯¯å·®ï¼ˆGeneralization Errorï¼‰ï¼Œç”¨æ¥è¡¡é‡ä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹èƒ½å¦å¾ˆå¥½çš„æ³›åŒ–åˆ°æœªçŸ¥æ•°æ®ã€‚\n\næ ¹æ®å¤§æ•°å®šç†ï¼Œå½“è®­ç»ƒçš„æ•°æ®é›†Dæ¥è¿‘äºæ— ç©·å¤§æ—¶ï¼Œæ³›åŒ–é”™è¯¯è¶‹å‘äº0ï¼Œå³ç»éªŒé£é™©è¶‹å‘äºæœŸæœ›é£é™©ã€‚ç”±äºæˆ‘ä»¬å¹¶ä¸çŸ¥é“çœŸå®çš„æ•°æ®åˆ†å¸ƒï¼Œå› æ­¤ä»æœ‰é™çš„æ•°æ®æ ·æœ¬å­¦ä¹ åˆ°ä¸€ä¸ªæœŸæœ›é”™è¯¯ä¸º0çš„æ¨¡å‹æ˜¯å¾ˆéš¾çš„ï¼Œå› æ­¤éœ€è¦é™ä½å¯¹æ¨¡å‹çš„æœŸæœ›ï¼Œåªè¦æ±‚å­¦ä¹ åˆ°çš„æ¨¡å‹èƒ½å¤Ÿä»¥ä¸€å®šçš„æ¦‚ç‡å­¦ä¹ åˆ°ä¸€ä¸ªè¿‘ä¼¼æ­£ç¡®çš„å‡è®¾ï¼Œè¿™å°±æ˜¯PCAå­¦ä¹ ç†è®ºã€‚\n\nPCAå­¦ä¹ ç†è®ºåŒ…å«äº†ä¸¤éƒ¨åˆ†ï¼šè¿‘ä¼¼æ­£ç¡®å’Œå¯èƒ½ã€‚\n\n\n# æ²¡æœ‰å…è´¹åˆé¤å®šç†\næ²¡æœ‰å…è´¹åˆé¤å®šç†ï¼ˆNo Free Lunch Theoremï¼ŒNFLï¼‰æ˜¯ç”±Wolpertå’ŒMacerdayåœ¨æœ€ä¼˜åŒ–ç†è®ºä¸­æå‡ºçš„ï¼ŒNFLè¯æ˜ï¼šå¯¹äºåŸºäºè¿­ä»£çš„æœ€ä¼˜åŒ–ç®—æ³•ä¸ä¼šå­˜åœ¨æŸç§ç®—æ³•å¯¹æ‰€æœ‰é—®é¢˜ï¼ˆæœ‰é™çš„æœç´¢ç©ºé—´å†…ï¼‰éƒ½æœ‰æ•ˆã€‚å¦‚æœä¸€ä¸ªç®—æ³•å¯¹æŸäº›é—®é¢˜æœ‰æ•ˆï¼Œé‚£ä¹ˆä»–ä¸€å®šåœ¨å¦ä¸€äº›é—®é¢˜ä¸Šæ¯”çº¯éšæœºæœç´¢ç®—æ³•æ›´å·®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸èƒ½è„±ç¦»å…·ä½“é—®é¢˜æ¥è®¨è®ºç®—æ³•çš„ä¼˜åŠ£ï¼Œä»»ä½•ç®—æ³•éƒ½æœ‰ä¼˜åŠ£æ€§ï¼Œå¿…é¡»è¦â€œå…·ä½“é—®é¢˜å…·ä½“åˆ†æâ€ã€‚\n\n\n# ä¸‘å°é¸­å®šç†\nä¸‘å°é¸­å®šç†ï¼ˆUgly Duckling Theoremï¼‰æ˜¯1969å¹´ç”±æ¸¡è¾¹æ…§æå‡ºçš„[Watan-able, 1969]ã€‚â€œä¸‘å°é¸­ä¸ç™½å¤©é¹…ä¹‹é—´çš„åŒºåˆ«å’Œä¸¤åªç™½å¤©é¹…ä¹‹é—´çš„åŒºåˆ«ä¸€æ ·å¤§â€ã€‚è¿™ä¸ªå®šç†åˆçœ‹å¥½åƒä¸ç¬¦åˆå¸¸è¯†ï¼Œä½†æ˜¯ä»”ç»†æ€è€ƒåæ˜¯éå¸¸æœ‰é“ç†çš„ã€‚å› ä¸ºä¸–ç•Œä¸Šä¸å­˜åœ¨ç›¸ä¼¼æ€§çš„å®¢è§‚æ ‡å‡†ï¼Œä¸€åˆ‡ç›¸ä¼¼æ€§çš„æ ‡å‡†éƒ½æ˜¯ä¸»è§‚çš„ã€‚å¦‚æœä»¥ä½“å‹å¤§å°çš„è§’åº¦æ¥çœ‹ï¼Œä¸‘å°é¸­å’Œç™½å¤©é¹…çš„åŒºåˆ«å¤§äºä¸¤åªç™½å¤©é¹…çš„åŒºåˆ«ï¼›ä½†æ˜¯å¦‚æœä»¥åŸºå› çš„è§’åº¦æ¥çœ‹ï¼Œä¸‘å°é¸­ä¸å®ƒçˆ¶æ¯çš„å·®åˆ«è¦å°äºä»–çˆ¶æ¯å’Œå…¶ä»–ç™½å¤©é¹…ä¹‹é—´çš„å·®åˆ«ã€‚\n\n# å¥¥å¡å§†å‰ƒåˆ€\nå¥¥å¡å§†å‰ƒåˆ€ï¼ˆOccam's Razorï¼‰æ˜¯ç”±14ä¸–ç•Œé€»è¾‘å­¦å®¶William of Occamæå‡ºçš„ä¸€ä¸ªè§£å†³é—®é¢˜çš„æ³•åˆ™ï¼šâ€œå¦‚æ— å¿…è¦ï¼Œå‹¿å¢å®ä½“â€ã€‚\n\nå¥¥å¡å§†å‰ƒåˆ€çš„æ€æƒ³å’Œæœºå™¨å­¦ä¹ ä¸Šæ­£åˆ™åŒ–æ€æƒ³ååˆ†ç›¸ä¼¼ï¼šç®€ç­”çš„æ¨¡å‹æ³›åŒ–èƒ½åŠ›æ›´å¥½ã€‚å¦‚æœæœ‰ä¸¤ä¸ªæ€§èƒ½ç›¸è¿‘çš„æ¨¡å‹ï¼Œæˆ‘ä»¬æ›´å€¾å‘äºé€‰æ‹©ç®€å•çš„æ¨¡å‹ã€‚å› æ­¤åœ¨æœºå™¨å­¦ä¹ å‡†åˆ™ä¸Šï¼Œæˆ‘ä»¬ç»å¸¸ä¼šå¼•å…¥å‚æ•°æ­£åˆ™åŒ–ï¼ˆæ¯”å¦‚L2æ­£åˆ™ï¼‰æ¥é™åˆ¶æ¨¡å‹èƒ½åŠ›ï¼Œé¿å…è¿‡æ‹Ÿåˆã€‚\n\n> è¿™é‡Œéœ€è¦åŒºåˆ†ä¸‹L1æ­£åˆ™å’ŒL2æ­£åˆ™çš„åŒºåˆ«ï¼Œå¦‚æœéœ€è¦å°ç¼–å›ç­”ï¼Œå¯åœ¨è¯„è®ºåŒºç•™è¨€ï¼\n\nå¥¥å¡å§†å‰ƒåˆ€çš„ä¸€ç§å½¢å¼åŒ–æ˜¯æœ€å°æè¿°é•¿åº¦ï¼ˆMinimum Description Length, MDLï¼‰åŸåˆ™ï¼Œå³å¯¹ä¸€ä¸ªæ•°æ®é›†Dï¼Œæœ€å¥½çš„æ¨¡å‹få±äºFæ˜¯ä¼šä½¿å¾—æ•°æ®é›†çš„å‹ç¼©æ•ˆæœæœ€å¥½ï¼Œå³ç¼–ç é•¿åº¦æœ€å°ã€‚\n\næœ€å°æè¿°é•¿åº¦ä¹Ÿå¯ä»¥é€šè¿‡è´å¶æ–¯å­¦ä¹ çš„è§‚ç‚¹æ¥è§£é‡Šï¼Œæ¨¡å‹ f åœ¨æ•°æ®é›† D ä¸Šçš„å¯¹æ•°åéªŒæ¦‚ç‡ä¸ºï¼š\n$$\n\\underset{f}{max\\log p(f|D)} = \\underset{f}{max\\log p(D|f)} + logp(f) =  \\underset{f}{min}-log \\ p(D|f) - log \\ p(f)\n$$\nå…¶ä¸­ -log p(f)å’Œ-log p(D|f)å¯ä»¥åˆ†åˆ«çœ‹ä½œæ˜¯æ¨¡å‹fçš„ç¼–ç é•¿åº¦å’Œåœ¨è¯¥æ¨¡å‹ä¸‹æ•°æ®é›†Dçš„ç¼–ç é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸ä½†è¦ä½¿å¾—æ¨¡å‹få¯ä»¥ç¼–ç æ•°æ®é›†Dï¼Œä¹Ÿè¦ä½¿æ¨¡å‹få°½å¯èƒ½çš„ç®€å•ã€‚\n\n\n# å½’çº³åç½®\nåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œå¾ˆå¤šç®—æ³•ä¼šå¯¹å­¦ä¹ çš„é—®é¢˜åšä¸€äº›å‡è®¾ï¼Œè¿™äº›å‡è®¾å°±ç§°ä¸ºå½’çº³åç½®ï¼ˆInductive Biasï¼‰ã€‚æ¯”å¦‚åœ¨æœ€è¿‘é‚»åˆ†ç±»å™¨ä¸­ï¼Œæˆ‘ä»¬ä¼šå‡è®¾åœ¨ç‰¹å¾ç©ºé—´å†…ï¼Œä¸€ä¸ªå°çš„å±€éƒ¨åŒºåŸŸä¸­çš„å¤§éƒ¨åˆ†æ ·æœ¬éƒ½å±äºåŒä¸€ç±»ã€‚åœ¨æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨ä¸­ï¼Œæˆ‘ä»¬ä¼šå‡è®¾æ¯ä¸ªç‰¹å¾çš„æ¡ä»¶æ¦‚ç‡æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚\n\nå½’çº³åç½®åœ¨è´å¶æ–¯å­¦ä¹ ä¸­ä¹Ÿæˆä¸ºå…ˆéªŒï¼ˆpriorsï¼‰ã€‚\n\n# å¤§æ•°å®šç†\nå‡è®¾X1,X2,....æ˜¯ç‹¬ç«‹åŒåˆ†å¸ƒçš„éšæœºå˜é‡ï¼Œè®°ä»–ä»¬çš„å‡å€¼ä¸º $\\mu$ï¼Œæ–¹å·®ä¸ºï¼š$\\sigma ^2$,åˆ™å¯¹äºä»»æ„çš„æ­£æ•°$\\varepsilon$ï¼Œæœ‰\n$$\n\\displaystyle \\lim_{ n \\to \\infty } P(| \\bar{X}_n - \\mu| \\geq \\varepsilon) = 0 \n$$\n\næˆ‘ä»¬é€šå¸¸å¯¹æ•°æ®è¿›è¡ŒæŠ½æ ·ä¼°è®¡åˆ©ç”¨çš„åˆ™æ˜¯å¤§æ•°å®šç†æ€æƒ³ã€‚\n\n# ä¸­å¿ƒæé™å®šç†\nä¸­å¿ƒæé™å®šç†æ˜¯ç ”ç©¶ç‹¬ç«‹éšæœºå˜é‡å’Œçš„æé™åˆ†å¸ƒä¸ºæ­£æ€åˆ†å¸ƒçš„å‘½é¢˜ã€‚ç»è¿‡ç§‘å­¦å®¶é•¿æœŸçš„è§‚å¯Ÿå’Œæ€»ç»“ï¼Œå‘ç°æœä»æ­£æ€åˆ†å¸ƒçš„éšæœºç°è±¡å¾€å¾€æ˜¯ç”±ç‹¬ç«‹(æˆ–å¼±ç›¸ä¾)çš„éšæœºå˜é‡äº§ç”Ÿçš„ã€‚\n\nè¿™ç±»éšæœºç°è±¡å¾€å¾€å¯è§†ä¸ºç‹¬ç«‹éšæœºå˜é‡ä¹‹å’Œ\n$$\n\\sum_{i=1}^{n} x_i\n$$\nåœ¨ä»€ä¹ˆæ¡ä»¶ä¸‹æ¸è¿›äºæ­£æ€åˆ†å¸ƒçš„é—®é¢˜ã€‚ä¸ºä½¿é—®é¢˜è§„èŒƒåŒ–ï¼Œæ•°å­¦å®¶ä»¬å°†é—®é¢˜å½’ç»“ä¸ºè®¨è®ºè§„èŒƒå’Œ\n$$\n\\frac{\\sum_{i=1}^{n}x_i - E(\\sum_{i=1}^{n}x_i ) }{\\sqrt {D(\\sum_{i=1}^{n}x_i )} }\n$$\næœ‰æ¸è¿›åˆ†å¸ƒN(0,1)çš„æ¡ä»¶ï¼Œå¹¶ç§°æœ‰æ­¤ç»“è®ºçš„éšæœºåºåˆ—{x_n}æœä»ä¸­å¿ƒæé™å®šç†ã€‚å³ï¼š\n$$\n\\frac{\\sum_{i=1}^{n}x_i - E(\\sum_{i=1}^{n}x_i ) }{\\sqrt {D(\\sum_{i=1}^{n}x_i )} } \\sim  N(0,1)\n$$\n\nç‹¬ç«‹åŒåˆ†å¸ƒçš„ä¸­å¿ƒæé™å®šç†å’Œå¾·è«ä½›-æ‹‰æ™®æ‹‰æ–¯ä¸­å¿ƒæé™å®šç†å‚è€ƒï¼š\n- https://blog.csdn.net/baishuiniyaonulia/article/details/83998635\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"å›å½’åˆ†æä¹‹ç†è®ºç¯‡","url":"/2017/09/17/æœºå™¨å­¦ä¹ /å›å½’åˆ†æä¹‹ç†è®ºç¯‡/","content":"2015å¹´çš„æœºå™¨å­¦ä¹ åšå®¢å…¶å®éƒ½æ˜¯çœ‹ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹è¿™æœ¬ä¹¦æ—¶å­¦åˆ°çš„ï¼Œè¯´å®è¯å½“æ—¶ä¹Ÿæ˜¯çŸ¥å…¶ç„¶ï¼Œä¸çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œä»¥è‡³äºå¯¹å…¶ç†è§£ä¸æ·±åˆ»ï¼Œå¥½å¤šç»†èŠ‚å’Œç†è®ºçŸ¥è¯†éƒ½æçš„æ˜¯ä¹±ä¸ƒå…«ç³Ÿï¼Œè‡ªä»å·¥ä½œä¹‹åå†å»çœ‹ä¸€ä¸ªç®—æ³•ï¼Œæ€è€ƒçš„æ¯”ä¹‹å‰å¤šäº†ç‚¹ï¼ŒæŸ¥çœ‹èµ„æ–™ä¹Ÿæ¯”ä¹‹å‰å¤šäº†ç‚¹ï¼Œç”Ÿæ€•ç†è§£é”™è¯¯ï¼Œå½±å“å…¶ä»–äººï¼Œå½“ç„¶åœ¨ç†è§£çš„ç¨‹åº¦ä¸Šè¿˜æ˜¯ä¸å¤Ÿæ·±åˆ»ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå­¦ä¹ çš„è¿‡ç¨‹å§ï¼Œè®°å½•ä¸€ä¸‹ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚\n\n<!--More-->\nCSDNé“¾æ¥ï¼š[ç‚¹å‡»é˜…è¯»](http://blog.csdn.net/gamer_gyt/article/details/78008144)\n\n# ä¸€ï¼šä¸€äº›åè¯å®šä¹‰\n\n## 1ï¼‰æŒ‡æ•°åˆ†å¸ƒæ—\n\n\næŒ‡æ•°åˆ†å¸ƒæ—æ˜¯æŒ‡å¯ä»¥è¡¨ç¤ºä¸ºæŒ‡æ•°å½¢å¼çš„æ¦‚ç‡åˆ†å¸ƒã€‚\n$$\nf_X(x\\mid\\theta) = h(x) \\exp \\left (\\eta(\\theta) \\cdot T(x) -A(\\theta)\\right )\n$$\nå…¶ä¸­ï¼ŒÎ·ä¸ºè‡ªç„¶å‚æ•°(nature parameter)ï¼ŒT(x)æ˜¯å……åˆ†ç»Ÿè®¡é‡ï¼ˆsufficient statisticï¼‰ã€‚å½“å‚æ•°Aï¼Œhï¼ŒTéƒ½å›ºå®šä»¥åï¼Œå°±å®šä¹‰äº†ä¸€ä¸ªä»¥Î·ä¸ºå‚æ•°çš„å‡½æ•°æ—ã€‚\n\nä¼¯åŠªåˆ©åˆ†å¸ƒä¸é«˜æ–¯åˆ†å¸ƒæ˜¯ä¸¤ä¸ªå…¸å‹çš„æŒ‡æ•°åˆ†å¸ƒæ—\n\n### ä¼¯åŠªåˆ©åˆ†å¸ƒ\nåˆåä¸¤ç‚¹åˆ†å¸ƒæˆ–è€…0-1åˆ†å¸ƒï¼Œæ˜¯ä¸€ä¸ªç¦»æ•£å‹æ¦‚ç‡åˆ†å¸ƒã€‚å‡è®¾1çš„æ¦‚ç‡ä¸ºpï¼Œ0çš„æ¦‚ç‡ä¸ºqï¼Œåˆ™\nå…¶æ¦‚ç‡è´¨é‡å‡½æ•°ä¸ºï¼š\n```\n{\\displaystyle f_{X}(x)=p^{x}(1-p)^{1-x}=\\left\\{{\\begin{matrix}p&{\\mbox{if }}x=1,\\\\q\\ &{\\mbox{if }}x=0.\\\\\\end{matrix}}\\right.}\n```\nå…¶æœŸæœ›å€¼ä¸ºï¼š\n$$\n{\\displaystyle \\operatorname {E} [X]=\\sum _{i=0}^{1}x_{i}f_{X}(x)=0+p=p}\n$$\n\nå…¶æ–¹å·®ä¸ºï¼š\n$$\n{\\displaystyle \\operatorname {var} [X]=\\sum _{i=0}^{1}(x_{i}-E[X])^{2}f_{X}(x)=(0-p)^{2}(1-p)+(1-p)^{2}p=p(1-p)=pq}\n$$\n\n\n### æ­£æ€åˆ†å¸ƒ(é«˜æ–¯åˆ†å¸ƒ)\nè‹¥éšæœºå˜é‡Xæœä»ä¸€ä¸ªä½ç½®å‚æ•°ä¸º ${\\displaystyle \\mu }$ ã€å°ºåº¦å‚æ•°ä¸º ${\\displaystyle \\sigma } $ çš„æ¦‚ç‡åˆ†å¸ƒï¼Œè®°ä¸ºï¼š\n$$\nX \\sim N(\\mu,\\sigma^2),\n$$\n\nå…¶æ¦‚ç‡å¯†åº¦å‡½æ•°ä¸º:\n```\nf(x) = {1 \\over \\sigma\\sqrt{2\\pi} }\\,e^{- {{(x-\\mu )^2 \\over 2\\sigma^2}}}\n```\n\næ­£æ€åˆ†å¸ƒçš„æ•°å­¦æœŸæœ›å€¼æˆ–æœŸæœ›å€¼$ {\\displaystyle \\mu } $ ç­‰äºä½ç½®å‚æ•°ï¼Œå†³å®šäº†åˆ†å¸ƒçš„ä½ç½®ï¼›å…¶æ–¹å·® $ {\\displaystyle \\sigma ^{2}} $ çš„å¼€å¹³æ–¹æˆ–æ ‡å‡†å·®$ {\\displaystyle \\sigma }$ ç­‰äºå°ºåº¦å‚æ•°ï¼Œå†³å®šäº†åˆ†å¸ƒçš„å¹…åº¦ã€‚\n\n### æ ‡å‡†æ­£æ€åˆ†å¸ƒï¼š\n\nå¦‚æœ$ {\\displaystyle \\mu =0} $ å¹¶ä¸” $ {\\displaystyle \\sigma =1} $ åˆ™è¿™ä¸ªæ­£æ€åˆ†å¸ƒç§°ä¸ºæ ‡å‡†æ­£æ€åˆ†å¸ƒã€‚ç®€åŒ–ä¸ºï¼š\n```\nf(x) = \\frac{1}{\\sqrt{2\\pi}} \\, \\exp\\left(-\\frac{x^2}{2} \\right)\n```\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![image](https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/Normal_distribution_pdf.png/650px-Normal_distribution_pdf.png)\n\næ­£æ€åˆ†å¸ƒä¸­ä¸€äº›å€¼å¾—æ³¨æ„çš„é‡ï¼š\n\n- å¯†åº¦å‡½æ•°å…³äºå¹³å‡å€¼å¯¹ç§°\n- å¹³å‡å€¼ä¸å®ƒçš„ä¼—æ•°ï¼ˆstatistical modeï¼‰ä»¥åŠä¸­ä½æ•°ï¼ˆmedianï¼‰åŒä¸€æ•°å€¼ã€‚\n- å‡½æ•°æ›²çº¿ä¸‹68.268949%çš„é¢ç§¯åœ¨å¹³å‡æ•°å·¦å³çš„ä¸€ä¸ªæ ‡å‡†å·®èŒƒå›´å†…ã€‚\n- 95.449974%çš„é¢ç§¯åœ¨å¹³å‡æ•°å·¦å³ä¸¤ä¸ªæ ‡å‡†å·® $ {\\displaystyle 2\\sigma } $ çš„èŒƒå›´å†…ã€‚\n- 99.730020%çš„é¢ç§¯åœ¨å¹³å‡æ•°å·¦å³ä¸‰ä¸ªæ ‡å‡†å·®$ {\\displaystyle 3\\sigma } $ çš„èŒƒå›´å†…ã€‚\n- 99.993666%çš„é¢ç§¯åœ¨å¹³å‡æ•°å·¦å³å››ä¸ªæ ‡å‡†å·®$ {\\displaystyle 4\\sigma } $ çš„èŒƒå›´å†…ã€‚\n- å‡½æ•°æ›²çº¿çš„åæ›²ç‚¹ï¼ˆinflection pointï¼‰ä¸ºç¦»å¹³å‡æ•°ä¸€ä¸ªæ ‡å‡†å·®è·ç¦»çš„ä½ç½®ã€‚\n\n## 2ï¼‰å¤šé‡å…±çº¿æ€§å’Œå®Œå…¨å…±çº¿æ€§\n\nå¤šé‡å…±çº¿æ€§ï¼šæŒ‡çº¿æ€§å›å½’æ¨¡å‹ä¸­çš„è§£é‡Šå˜é‡ä¹‹é—´ç”±äºå­˜åœ¨ç²¾ç¡®ç›¸å…³å…³ç³»æˆ–é«˜åº¦ç›¸å…³å…³ç³»è€Œä½¿æ¨¡å‹ä¼°è®¡å¤±çœŸæˆ–éš¾ä»¥ä¼°è®¡å‡†ç¡®ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç”±äºç»æµæ•°æ®çš„é™åˆ¶ä½¿å¾—æ¨¡å‹è®¾è®¡ä¸å½“ï¼Œå¯¼è‡´è®¾è®¡çŸ©é˜µä¸­è§£é‡Šå˜é‡é—´å­˜åœ¨æ™®éçš„ç›¸å…³å…³ç³»ã€‚é€šä¿—ç‚¹ç†è§£å°±æ˜¯è‡ªå˜é‡é‡Œè¾¹æœ‰ä¸€äº›æ˜¯æ‰“é…±æ²¹çš„ï¼Œå¯ä»¥ç”±å¦å¤–ä¸€äº›å˜é‡æ¨å¯¼å‡ºæ¥ï¼Œå½“å˜é‡ä¸­å­˜åœ¨å¤§é‡çš„å¤šé‡å…±çº¿æ€§å˜é‡å°±ä¼šå¯¼è‡´æ¨¡å‹è¯¯å·®å¾ˆå¤§ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä»è‡ªå˜é‡ä¸­å°†â€œæ‰“é…±æ²¹â€çš„å˜é‡ç»™å‰”é™¤æ‰ã€‚\n\nå®Œå…¨å…±çº¿æ€§ï¼šåœ¨å¤šå…ƒå›å½’ä¸­ï¼Œä¸€ä¸ªè‡ªå˜é‡æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªå…¶ä»–è‡ªå˜é‡çš„çº¿æ€§å‡½æ•°ã€‚\n\nä¸¤è€…åœ¨æŸç§ç‰¹æ®Šæƒ…å†µä¸‹æ˜¯æœ‰äº¤é›†çš„ã€‚\n\n## 3ï¼‰Tæ£€éªŒ\nTæ£€éªŒåˆå«student T æ£€éªŒï¼Œä¸»è¦ç”¨äºæ ·æœ¬å«é‡å°ï¼Œæ€»æ ‡å‡†å·® $\\sigma$ æœªçŸ¥çš„æ­£å¤ªåˆ†å¸ƒæ•°æ®ã€‚Tæ£€éªŒæ˜¯ç”¨äºå°æ ·æœ¬çš„ä¸¤ä¸ªå¹³å‡å€¼å·®å¼‚ç¨‹åº¦çš„æ£€æŸ¥æ–¹æ³•ï¼Œä»–æ˜¯ç”¨Tåˆ†å¸ƒç†è®ºå€¼æ¥æ¨æ–­äº‹ä»¶å‘ç”Ÿçš„æ¦‚ç‡ï¼Œä»è€Œåˆ¤æ–­ä¸¤ä¸ªå¹³å‡æ•°çš„å·®å¼‚æ˜¯å¦æ˜¾è‘—ã€‚\nå‚è€ƒ: http://blog.csdn.net/shulixu/article/details/53354206\n\n\n\n## 4ï¼‰å…³ç³»\n- å‡½æ•°å…³ç³»\n> ç¡®å®šæ€§å…³ç³»ï¼Œy=3+2x\n- ç›¸å…³å…³ç³»\n>éç¡®å®šæ€§å…³ç³»ï¼Œæ¯”å¦‚è¯´é«˜ä¸­æ—¶æ•°å­¦æˆç»©å¥½çš„äººï¼Œä¸€èˆ¬ç‰©ç†æˆç»©ä¹Ÿå¥½ï¼Œè¿™æ˜¯å› ä¸ºå®ƒä»¬èƒŒåä½¿ç”¨çš„éƒ½æ˜¯æ•°å­¦é€»è¾‘ï¼Œè¿™ç§é…’å«åšéç¡®å®šæ€§å…³ç³»ã€‚\n\n## 5ï¼‰è™šæ‹Ÿå˜é‡\nå®šä¹‰ï¼š\n>åˆç§°è™šè®¾å˜é‡ã€åä¹‰å˜é‡æˆ–å“‘å˜é‡ï¼Œç”¨ä»¥åæ˜ è´¨çš„å±æ€§çš„ä¸€ä¸ªäººå·¥å˜é‡ï¼Œæ˜¯é‡åŒ–äº†çš„è‡ªå˜é‡ï¼Œé€šå¸¸å–å€¼ä¸º0æˆ–1ã€‚ï¼ˆé€šå¸¸ä¸ºç¦»æ•£å˜é‡ï¼Œå› å­å˜é‡ï¼‰\n\nä½œç”¨ï¼š\n>å¼•å…¥å“‘å˜é‡å¯ä½¿çº¿å½¢å›å½’æ¨¡å‹å˜å¾—æ›´å¤æ‚ï¼Œä½†å¯¹é—®é¢˜æè¿°æ›´ç®€æ˜ï¼Œä¸€ä¸ªæ–¹ç¨‹èƒ½è¾¾åˆ°ä¸¤ä¸ªæ–¹ç¨‹çš„ä½œç”¨ï¼Œè€Œä¸”æ¥è¿‘ç°å®ã€‚\n\nè®¾ç½®ï¼š\n>ä¾‹å¦‚ï¼šä½“é‡ï¼ˆwï¼‰å’Œèº«é«˜ï¼ˆhï¼‰ï¼Œæ€§åˆ«ï¼ˆsï¼‰çš„å…³ç³»ï¼Œä½†è¿™é‡Œæ€§åˆ«å¹¶éè¿ç»­çš„æˆ–è€…æ•°å­—å¯ä»¥è¡¨ç¤ºçš„å˜é‡ï¼Œä½ å¹¶ä¸èƒ½æ‹¿ 1è¡¨ç¤ºç”·ï¼Œ2è¡¨ç¤ºå¥³ï¼Œè¿™é‡Œçš„æ€§åˆ«æ˜¯ç¦»æ•£å˜é‡ï¼Œåªèƒ½ä¸ºç”·æˆ–è€…å¥³ï¼Œæ‰€ä»¥è¿™é‡Œå°±éœ€è¦å¼•å…¥å“‘å˜é‡æ¥å¤„ç†ã€‚\næ€§åˆ«ï¼ˆsï¼‰ =ã€‹ ismanï¼ˆç”·1ï¼Œéç”·0ï¼‰ï¼Œiswoman ï¼ˆå› ä¸ºåªæœ‰ä¸¤ç§å¯èƒ½ï¼Œæ‰€ä»¥è¿™é‡Œåªéœ€è¦å¼•å…¥ä¸€ä¸ªå“‘å˜é‡å³å¯ï¼‰ï¼ŒåŒç†å‡è®¾è¿™é‡Œæœ‰å¦å¤–ä¸€ä¸ªå˜é‡è‚¤è‰²ï¼ˆæœ‰é»‘ï¼Œç™½ï¼Œé»„ä¸‰ç§å¯èƒ½ï¼‰ï¼Œé‚£ä¹ˆè¿™é‡Œåªéœ€å¼•å…¥ä¸¤ä¸ªå“‘å˜é‡å³å¯ï¼ˆisblackï¼Œiswhiteï¼‰ï¼Œå› ä¸ºä¸æ˜¯è¿™ä¸¤ç§çš„è¯é‚£è‚¯å®šæ˜¯é»„è‰²çš®è‚¤äº†ã€‚\n\nä¾‹å­ï¼š\né’ˆå¯¹ä¸Šè¾¹æ‰€è¯´çš„ä½“é‡å’Œèº«é«˜ï¼Œæ€§åˆ«çš„å…³ç³»ã€‚\n\næ„å»ºæ¨¡å‹ï¼š\n- 1ï¼‰åŠ æ³•æ¨¡å‹\n```\nw = a + b * h + c * isman\n```\né’ˆå¯¹æ•°æ®æ ·æœ¬è€Œè¨€ï¼Œæ€§åˆ«æ˜¯ç¡®å®šçš„ï¼Œæ‰€ä»¥ c * isman çš„ç»“æœä¸æ˜¯cå°±æ˜¯0ï¼Œæ‰€ä»¥åœ¨åŠ æ³•æ¨¡å‹ä¸‹ï¼Œå½±å“çš„æ˜¯æ¨¡å‹åœ¨yè½´ä¸Šçš„æˆªè·ã€‚è¿™è¯´æ˜çš„æ˜¯é’ˆå¯¹ä¸åŒçš„æ€§åˆ«è€Œè¨€ï¼Œå›å½’æ–¹ç¨‹æ˜¯å¹³è¡¡çš„ï¼Œåªä¸è¿‡æ˜¯æˆªè·ä¸ä¸€æ ·ã€‚\n\n- 2ï¼‰ä¹˜æ³•æ¨¡å‹\n```\nw = a + b * h + c * isman * h + d * iswoman * h\n```\nåŒæ ·é’ˆå¯¹æ•°æ®æ ·æœ¬è€Œè¨€ï¼Œæ€§åˆ«ä¹Ÿæ˜¯ç¡®å®šçš„ï¼Œå‡è®¾ä¸€ä¸ªç”·æ€§ï¼Œisman ä¸º1ï¼Œiswoman ä¸º0ï¼Œåˆ™ä¸Šè¿°æ¨¡å‹å˜æˆäº† w = a + b*h + c * h =a + (b+c) * hï¼Œè¿™ä¸ªæ—¶å€™å°±æ˜¯åœ¨yè½´ä¸Šçš„æˆªè·ä¸€æ ·ï¼Œè€Œæ–œç‡ä¸ä¸€è‡´ã€‚\n\n- 3ï¼‰æ··åˆæ¨¡å‹\n```\nw = a + b * h + c * isman + d * iswoman + e * isman * h + f * iswoman * h\n```\nå‡è®¾ä¸€ä¸ªé’ˆå¯¹ä¸€ä¸ªæ€§åˆ«ä¸ºç”·çš„æ ·æœ¬æ•°æ®ï¼Œè¯¥æ¨¡å‹å˜å¯ä»¥å˜æˆ w = a + b*h + c + e * h = a +c + (b+e)*hï¼Œè¿™ä¸ªæ—¶å€™æ–œç‡å’Œæˆªè·éƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚\n\n# äºŒï¼šä»€ä¹ˆæ˜¯å›å½’ï¼ˆåˆ†æï¼‰\nå›å½’å°±æ˜¯åˆ©ç”¨æ ·æœ¬ï¼ˆå·²çŸ¥æ•°æ®ï¼‰ï¼Œäº§ç”Ÿæ‹Ÿåˆæ–¹ç¨‹ï¼Œä»è€Œï¼ˆå¯¹æœªçŸ¥æ•°æ®ï¼‰è¿›è¡Œé¢„æµ‹ã€‚æ¯”å¦‚è¯´æˆ‘æœ‰ä¸€ç»„éšæœºå˜é‡Xï¼ˆX1ï¼ŒX2ï¼ŒX3...ï¼‰å’Œå¦å¤–ä¸€ç»„éšæœºå˜é‡Yï¼ˆY1ï¼ŒY2ï¼ŒY3...ï¼‰,é‚£ä¹ˆç ”ç©¶å˜é‡Xä¸Yä¹‹é—´çš„ç»Ÿè®¡å­¦æ–¹æ³•å°±å«åšå›å½’åˆ†æã€‚å½“ç„¶è¿™é‡ŒXå’ŒYæ˜¯å•ä¸€å¯¹åº”çš„ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ä¸€å…ƒçº¿æ€§å›å½’ã€‚\n\nå›å½’åˆ†ä¸ºçº¿æ€§å›å½’å’Œéçº¿æ€§å›å½’ï¼Œå…¶ä¸­ä¸€äº›éçº¿æ€§å›å½’å¯ä»¥ç”¨çº¿æ€§å›å½’çš„æ–¹æ³•æ¥è¿›è¡Œåˆ†æçš„å«åš==å¹¿ä¹‰çº¿æ€§å›å½’==ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥äº†è§£ä¸‹æ¯ä¸€ç§å›å½’ï¼š\n\n## 1ï¼‰çº¿æ€§å›å½’\nçº¿æ€§å›å½’å¯ä»¥åˆ†ä¸ºä¸€å…ƒçº¿æ€§å›å½’å’Œå¤šå…ƒçº¿æ€§å›å½’ã€‚å½“ç„¶çº¿æ€§å›å½’ä¸­è‡ªå˜é‡çš„æŒ‡æ•°éƒ½æ˜¯1ï¼Œè¿™é‡Œçš„çº¿æ€§å¹¶éçœŸçš„æ˜¯æŒ‡ç”¨ä¸€æ¡çº¿å°†æ•°æ®è¿èµ·æ¥ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªäºŒç»´å¹³é¢ï¼Œä¸‰ç»´å¹³é¢ç­‰ã€‚\n\nä¸€å…ƒçº¿æ€§å›å½’ï¼šè‡ªå˜é‡åªæœ‰ä¸€ä¸ªçš„å›å½’ï¼Œæ¯”å¦‚è¯´åŒ—äº¬äºŒç¯çš„æˆ¿å­é¢ç§¯ï¼ˆAreaï¼‰å’Œæˆ¿å­æ€»ä»·ï¼ˆMoneyï¼‰çš„å…³ç³»ï¼Œéšç€é¢ç§¯ï¼ˆAreaï¼‰çš„å¢å¤§ï¼Œæˆ¿å±‹ä»·æ ¼ä¹Ÿæ˜¯ä¸æ–­å¢é•¿ã€‚è¿™é‡Œçš„è‡ªå˜é‡åªæœ‰é¢ç§¯ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ä¸€å…ƒçº¿æ€§å›å½’ã€‚\n\nå¤šå…ƒçº¿æ€§å›å½’ï¼šè‡ªå˜é‡å¤§äºç­‰äºä¸¤ä¸ªï¼Œæ¯”å¦‚è¯´åŒ—äº¬äºŒç¯çš„æˆ¿å­é¢ç§¯ï¼ˆAreaï¼‰ï¼Œæ¥¼å±‚ï¼ˆfloorï¼‰å’Œæˆ¿å±‹ä»·æ ¼ï¼ˆMoneyï¼‰çš„å…³ç³»ï¼Œè¿™é‡Œè‡ªå˜é‡æ˜¯ä¸¤ä¸ªï¼Œæ‰€ä»¥æ˜¯äºŒå…ƒçº¿æ€§å›å½’ï¼Œä¸‰å…ƒï¼Œå¤šå…ƒåŒç†ã€‚\n\n## 2ï¼‰éçº¿æ€§å›å½’\næœ‰ä¸€ç±»æ¨¡å‹ï¼Œå…¶å›å½’å‚æ•°ä¸æ˜¯çº¿æ€§çš„ï¼Œä¹Ÿä¸èƒ½é€šè¿‡è½¬æ¢çš„æ–¹æ³•å°†å…¶å˜ä¸ºçº¿æ€§çš„å‚æ•°ï¼Œè¿™ç±»æ¨¡å‹ç§°ä¸ºéçº¿æ€§å›å½’æ¨¡å‹ã€‚éçº¿æ€§å›å½’å¯ä»¥åˆ†ä¸ºä¸€å…ƒå›å½’å’Œå¤šå…ƒå›å½’ã€‚éçº¿æ€§å›å½’ä¸­è‡³å°‘æœ‰ä¸€ä¸ªè‡ªå˜é‡çš„æŒ‡æ•°ä¸ä¸º1ã€‚å›å½’åˆ†æä¸­ï¼Œå½“ç ”ç©¶çš„å› æœå…³ç³»åªæ¶‰åŠå› å˜é‡å’Œä¸€ä¸ªè‡ªå˜é‡æ—¶ï¼Œå«åšä¸€å…ƒå›å½’åˆ†æï¼›å½“ç ”ç©¶çš„å› æœå…³ç³»æ¶‰åŠå› å˜é‡å’Œä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šè‡ªå˜é‡æ—¶ï¼Œå«åšå¤šå…ƒå›å½’åˆ†æã€‚\n\n## 3ï¼‰å¹¿ä¹‰çº¿æ€§å›å½’\nä¸€äº›éçº¿æ€§å›å½’å¯ä»¥ç”¨çº¿æ€§å›å½’çš„æ–¹æ³•æ¥è¿›è¡Œåˆ†æå«åšå¹¿ä¹‰çº¿æ€§å›å½’ã€‚\nå…¸å‹çš„ä»£è¡¨æ˜¯Logisticå›å½’ã€‚\n\n## 4ï¼‰å¦‚ä½•è¡¡é‡ç›¸å…³å…³ç³»æ—¢åˆ¤æ–­é€‚ä¸é€‚åˆä½¿ç”¨çº¿æ€§å›å½’æ¨¡å‹ï¼Ÿ\nä½¿ç”¨ç›¸å…³ç³»æ•°ï¼ˆ-1ï¼Œ1ï¼‰ï¼Œç»å¯¹å€¼è¶Šæ¥è¿‘äº1ï¼Œç›¸å…³ç³»æ•°è¶Šé«˜ï¼Œè¶Šé€‚åˆä½¿ç”¨çº¿æ€§å›å½’æ¨¡å‹ï¼ˆRxy>0,ä»£è¡¨æ­£ç›¸å…³ï¼ŒRxy<0,ä»£è¡¨è´Ÿç›¸å…³ï¼‰\n\n$$\nr_{XY} = \\frac{ \\sum (X_{i}-\\bar{X})(Y_{i}-\\bar{Y}) }{ \\sqrt{ \\sum (X_{i}-\\bar{X})^2) \\sum (Y_{i}-\\bar{Y})^2) } }\n$$\n\n# ä¸‰ï¼šå›å½’ä¸­å›°éš¾ç‚¹\n## 1ï¼‰é€‰å®šå˜é‡\n> å‡è®¾è‡ªå˜é‡ç‰¹åˆ«å¤šï¼Œæœ‰ä¸€äº›æ˜¯å’Œå› å˜é‡ç›¸å…³çš„ï¼Œæœ‰ä¸€äº›æ˜¯å’Œå› å˜é‡ä¸ç›¸å…³çš„ï¼Œè¿™é‡Œæˆ‘ä»¬å°±éœ€è¦ç­›é€‰å‡ºæœ‰ç”¨çš„å˜é‡ï¼Œå¦‚æœç­›é€‰åå˜é‡è¿˜ç‰¹åˆ«å¤šçš„è¯ï¼Œå¯ä»¥é‡‡ç”¨é™ç»´çš„æ–¹å¼è¿›è¡Œå˜é‡ç¼©å‡ï¼ˆå¯ä»¥å‚è€ƒä¹‹å‰çš„PCAé™ç»´çš„æ–‡ç« ï¼šhttp://blog.csdn.net/gamer_gyt/article/details/51418069 ï¼ŒåŸºæœ¬æ˜¯æ•´ç†ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹è¿™æœ¬ä¹¦çš„ç¬”è®°ï¼‰\n\n## 2ï¼‰å‘ç°å¤šé‡å…±çº¿æ€§\n(1).æ–¹å·®æ‰©å¤§å› å­æ³•( VIF)\n\n>ä¸€èˆ¬è®¤ä¸ºå¦‚æœæœ€å¤§çš„VIFè¶…è¿‡10ï¼Œå¸¸å¸¸è¡¨ç¤ºå­˜åœ¨å¤šé‡å…±çº¿æ€§ã€‚\n\n(2).å®¹å·®å®¹å¿å®šæ³•\n\n>å¦‚æœå®¹å·®ï¼ˆtoleranceï¼‰<=0.1ï¼Œå¸¸å¸¸è¡¨ç¤ºå­˜åœ¨å¤šé‡å…±çº¿æ€§ã€‚\n\n(3). æ¡ä»¶ç´¢å¼•\n\n>æ¡ä»¶ç´¢å¼•(condition index)>10ï¼Œå¯ä»¥è¯´æ˜å­˜åœ¨æ¯”è¾ƒä¸¥é‡çš„å…±çº¿æ€§\n\n\n\n## 3ï¼‰è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆé—®é¢˜\nè¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆå…¶å®å¯¹æ¯ä¸€ä¸ªæ¨¡å‹æ¥è®²éƒ½æ˜¯å­˜åœ¨çš„ï¼Œè¿‡æ‹Ÿåˆå°±æ˜¯æ¨¡å‹è¿‡äºç¬¦åˆè®­ç»ƒæ•°æ®çš„è¶‹åŠ¿ï¼Œæ¬ æ‹Ÿåˆå°±æ˜¯æ¨¡å‹å¯¹äºè®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®éƒ½è¡¨ç°å‡ºä¸å¥½çš„æƒ…å†µã€‚é’ˆå¯¹äºæ¬ æ‹Ÿåˆæ¥è®²ï¼Œæ˜¯å¾ˆå®¹æ˜“å‘ç°çš„ï¼Œé€šå¸¸ä¸è¢«è®¨è®ºã€‚\n\nåœ¨è¿›è¡Œæ¨¡å‹è®­ç»ƒçš„æ—¶å€™ï¼Œç®—æ³•è¦è¿›è¡Œä¸æ–­çš„å­¦ä¹ ï¼Œæ¨¡å‹åœ¨è®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®ä¸Šçš„é”™è¯¯éƒ½åœ¨ä¸æ–­ä¸‹é™ï¼Œä½†æ˜¯ï¼Œå¦‚æœå­¦ä¹ çš„æ—¶é—´è¿‡é•¿çš„è¯ï¼Œæ¨¡å‹åœ¨è®­ç»ƒæ•°æ®é›†ä¸Šçš„è¡¨ç°å°†ä¼šç»§ç»­ä¸‹é™ï¼Œè¿™æ˜¯å› ä¸ºæ¨¡å‹å·²ç»è¿‡æ‹Ÿåˆï¼Œå¹¶ä¸”å­¦ä¹ åˆ°äº†è®­ç»ƒæ•°æ®é›†ä¸­ä¸æ°å½“çš„ç»†èŠ‚å’Œå™ªéŸ³ï¼ŒåŒæ—¶ï¼Œæµ‹è¯•é›†ä¸Šçš„é”™è¯¯ç‡å¼€å§‹ä¸Šå‡ï¼Œä¹Ÿæ˜¯æ¨¡å‹æ³›åŒ–èƒ½åŠ›åœ¨ä¸‹é™ã€‚\n\nè¿™ä¸ªå®Œç¾çš„ä¸´ç•Œç‚¹å°±åœ¨äºæµ‹è¯•é›†ä¸­çš„é”™è¯¯ç‡åœ¨ä¸Šå‡æ—¶ï¼Œæ­¤æ—¶è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸Šéƒ½æœ‰è‰¯å¥½çš„è¡¨ç°ã€‚é€šå¸¸æœ‰ä¸¤ç§æ‰‹æ®µå¯ä»¥å¸®åŠ©ä½ æ‰¾åˆ°è¿™ä¸ªå®Œç¾çš„ä¸´ç•Œç‚¹ï¼šé‡é‡‡æ ·æ–¹æ³•å’ŒéªŒè¯é›†æ–¹æ³•ã€‚\n\n### å¦‚ä½•é™åˆ¶è¿‡æ‹Ÿåˆï¼Ÿ\n> è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆå¯ä»¥å¯¼è‡´å¾ˆå·®çš„æ¨¡å‹è¡¨ç°ã€‚ä½†æ˜¯åˆ°ç›®å‰ä¸ºæ­¢å¤§éƒ¨åˆ†æœºå™¨å­¦ä¹ å®é™…åº”ç”¨æ—¶çš„é—®é¢˜éƒ½æ˜¯è¿‡æ‹Ÿåˆã€‚\nè¿‡æ‹Ÿåˆæ˜¯ä¸ªé—®é¢˜å› ä¸ºè®­ç»ƒæ•°æ®ä¸Šçš„æœºå™¨å­¦ä¹ ç®—æ³•çš„è¯„ä»·æ–¹æ³•ä¸æˆ‘ä»¬æœ€å…³å¿ƒçš„å®é™…ä¸Šçš„è¯„ä»·æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ç®—æ³•åœ¨ä½ç½®æ•°æ®ä¸Šçš„è¡¨ç°æ˜¯ä¸ä¸€æ ·çš„ã€‚\nå½“è¯„ä»·æœºå™¨å­¦ä¹ ç®—æ³•æ—¶æˆ‘ä»¬æœ‰ä¸¤è€…é‡è¦çš„æŠ€å·§æ¥é™åˆ¶è¿‡æ‹Ÿåˆ\nä½¿ç”¨é‡é‡‡æ ·æ¥è¯„ä»·æ¨¡å‹æ•ˆèƒ½\nä¿ç•™ä¸€ä¸ªéªŒè¯æ•°æ®é›†\næœ€æµè¡Œçš„é‡é‡‡æ ·æŠ€æœ¯æ˜¯kæŠ˜äº¤å‰éªŒè¯ã€‚æŒ‡çš„æ˜¯åœ¨è®­ç»ƒæ•°æ®çš„å­é›†ä¸Šè®­ç»ƒå’Œæµ‹è¯•æ¨¡å‹kæ¬¡ï¼ŒåŒæ—¶å»ºç«‹å¯¹äºæœºå™¨å­¦ä¹ æ¨¡å‹åœ¨æœªçŸ¥æ•°æ®ä¸Šè¡¨ç°çš„è¯„ä¼°ã€‚\néªŒè¯é›†åªæ˜¯è®­ç»ƒæ•°æ®çš„å­é›†ï¼Œä½ æŠŠå®ƒä¿ç•™åˆ°ä½ è¿›è¡Œæœºå™¨å­¦ä¹ ç®—æ³•çš„æœ€åæ‰ä½¿ç”¨ã€‚åœ¨è®­ç»ƒæ•°æ®ä¸Šé€‰æ‹©å’Œè°ƒè°æœºå™¨å­¦ä¹ ç®—æ³•ä¹‹åï¼Œæˆ‘ä»¬åœ¨éªŒè¯é›†ä¸Šåœ¨å¯¹äºæ¨¡å‹è¿›è¡Œè¯„ä¼°ï¼Œä»¥ä¾¿å¾—åˆ°ä¸€äº›å…³äºæ¨¡å‹åœ¨æœªçŸ¥æ•°æ®ä¸Šçš„è¡¨ç°çš„è®¤çŸ¥ã€‚\n\n## 4ï¼‰æ£€éªŒæ¨¡å‹æ˜¯å¦åˆç†\néªŒè¯ç›®å‰ä¸»è¦é‡‡ç”¨å¦‚ä¸‹ä¸‰ç±»åŠæ³•ï¼š\n1ã€æ‹Ÿåˆä¼˜åº¦æ£€éªŒ\nä¸»è¦æœ‰R^2ï¼Œtæ£€éªŒï¼Œfæ£€éªŒç­‰ç­‰\nè¿™ä¸‰ç§æ£€éªŒä¸ºå¸¸è§„éªŒè¯ï¼Œåªè¦åœ¨95%çš„ç½®ä¿¡åº¦å†…æ»¡è¶³å³å¯è¯´æ˜æ‹Ÿåˆæ•ˆæœè‰¯å¥½ã€‚\n2ã€é¢„æµ‹å€¼å’ŒçœŸå®å€¼æ¯”è¾ƒ\nä¸»è¦æ˜¯å·®å€¼å’Œæ¯”å€¼ï¼Œä¸€èˆ¬å·®å€¼å’Œæ¯”å€¼éƒ½ä¸è¶…è¿‡5%ã€‚\n3ã€å¦å¤–çš„åŠæ³•\nGEHæ–¹æ³•æœ€ä¸ºå¸¸ç”¨ã€‚GEHæ˜¯Geoffrey E. Haversäº1970å¹´å·¦å³æå‡ºçš„ä¸€ç§æ¨¡å‹éªŒè¯æ–¹æ³•ï¼Œå…¶å·§å¦™çš„è¿ç”¨ä¸€ä¸ªæ‹Ÿå®šçš„å…¬å¼å’Œæ ‡å‡†ç•Œå®šæ¨¡å‹çš„æ‹Ÿåˆä¼˜åŠ£ã€‚\nGEH=(2(M-C)^2/(M+C))^(1/2)\nå…¶ä¸­Mæ˜¯é¢„æµ‹å€¼ï¼ŒCæ˜¯å®é™…è§‚æµ‹å€¼\nå¦‚æœGEHå°äº5ï¼Œè®¤ä¸ºæ¨¡å‹æ‹Ÿåˆæ•ˆæœè‰¯å¥½ï¼Œå¦‚æœGEHåœ¨5-10ä¹‹é—´ï¼Œå¿…é¡»å¯¹æ•°æ®ä¸å¯é éœ€è¦è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœGEHå¤§äº10ï¼Œè¯´æ˜æ•°æ®å­˜åœ¨é—®é¢˜çš„å‡ ç‡å¾ˆé«˜ã€‚\nhttp://blog.sina.com.cn/s/blog_66188c300100hl45.html\n\n## 5ï¼‰çº¿æ€§å›å½’çš„æ¨¡å‹è¯„åˆ¤\n- è¯¯å·®å¹³æ–¹å’Œï¼ˆæ®‹å·®å¹³æ–¹å’Œï¼‰\n\nä¾‹å¦‚äºŒç»´å¹³é¢ä¸Šçš„ä¸€ç‚¹ï¼ˆx1ï¼Œy1ï¼‰ï¼Œç»è¿‡çº¿æ€§å›å½’æ¨¡å‹é¢„æµ‹å…¶å€¼ä¸º y_1ï¼Œé‚£ä¹ˆé¢„æµ‹æ¨¡å‹çš„å¥½ä¸åå°±æ˜¯è®¡ç®—é¢„æµ‹ç»“æœåˆ°ç›´çº¿çš„è·ç¦»çš„å¤§å°ï¼Œç”±äºæ˜¯ä¸€ç»„æ•°æ®ï¼Œé‚£ä¹ˆä¾¿æ˜¯è¿™ä¸€ç»„æ•°æ®çš„å’Œã€‚\n\nç‚¹åˆ°ç›´çº¿çš„è·ç¦»å…¬å¼ä¸ºï¼š \n$$\n \\frac{\\left | A_{x_{0}}+B_{y_{0}} +C \\right |}{\\sqrt{A^2 + B^2 }}\n$$\nç”±äºæ¶‰åŠåˆ°å¼€æ–¹ï¼Œåœ¨è®¡ç®—è¿‡ç¨‹ä¸­ååˆ†ä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥è¿™é‡Œè½¬æ¢ä¸ºçºµè½´ä¸Šçš„å·®å€¼ï¼Œå³åˆ©ç”¨é¢„æµ‹å€¼ä¸çœŸå®å€¼çš„å·®è¿›è¡Œç´¯åŠ æ±‚å’Œï¼Œæœ€å°æ—¶å³ä¸ºæœ€ä½³çš„çº¿æ€§å›å½’æ¨¡å‹ï¼Œä½†æ˜¯è¿™é‡Œæ¶‰åŠåˆ°é¢„æµ‹å€¼ä¸çœŸå®å€¼çš„å·®å¯èƒ½ä¸ºè´Ÿæ•°ï¼Œæ‰€ä»¥è¿™é‡Œç”¨å¹³æ–¹ï¼Œæ‰€ä»¥æœ€ç»ˆçš„è¯¯å·®å¹³æ–¹å’Œä¸ºï¼š\n$$\nRSS = \\sum_{i=1}^{n}(y_{i}- \\hat{y_{i}} )^2 = \\sum_{i=1}^{n}[y_{i} - (\\alpha +\\beta x_{i})]^2\n$$\n\n- AICå‡†åˆ™ï¼ˆèµ¤æ± ä¿¡æ¯å‡†åˆ™ï¼‰\n$$\nAIC=n ln (RSSp/n)+2p\n$$\nnä¸ºå˜é‡æ€»ä¸ªæ•°ï¼Œpä¸ºé€‰å‡ºçš„å˜é‡ä¸ªæ•°ï¼ŒAICè¶Šå°è¶Šå¥½\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"æ•°æ®å½’ä¸€åŒ–å’Œå…¶åœ¨sklearnä¸­çš„å¤„ç†","url":"/2017/09/01/ç‰¹å¾å·¥ç¨‹/æ•°æ®å½’ä¸€åŒ–å’Œå…¶åœ¨sklearnä¸­çš„å¤„ç†/","content":"> æœ¬æ–‡ä¸»è¦ä»‹ç»æ•°æ®å½’ä¸€åŒ–å’Œå…¶åœ¨sklearnä¸­çš„å¤„ç†ã€‚\n\n<!--More-->\n\n# ä¸€ï¼šæ•°æ®å½’ä¸€åŒ–\n\næ•°æ®å½’ä¸€åŒ–ï¼ˆæ ‡å‡†åŒ–ï¼‰å¤„ç†æ˜¯æ•°æ®æŒ–æ˜çš„ä¸€é¡¹åŸºç¡€å·¥ä½œï¼Œä¸åŒè¯„ä»·æŒ‡æ ‡å¾€å¾€å…·æœ‰ä¸åŒçš„é‡çº²å’Œé‡çº²å•ä½ï¼Œè¿™æ ·çš„æƒ…å†µä¼šå½±å“åˆ°æ•°æ®åˆ†æçš„ç»“æœï¼Œä¸ºäº†æ¶ˆé™¤æŒ‡æ ‡ä¹‹é—´çš„é‡çº²å½±å“ï¼Œéœ€è¦è¿›è¡Œæ•°æ®æ ‡å‡†åŒ–å¤„ç†ï¼Œä»¥è§£å†³æ•°æ®æŒ‡æ ‡ä¹‹é—´çš„å¯æ¯”æ€§ã€‚åŸå§‹æ•°æ®ç»è¿‡æ•°æ®æ ‡å‡†åŒ–å¤„ç†åï¼Œå„æŒ‡æ ‡å¤„äºåŒä¸€æ•°é‡çº§ï¼Œé€‚åˆè¿›è¡Œç»¼åˆå¯¹æ¯”è¯„ä»·ã€‚\n\nå½’ä¸€åŒ–æ–¹æ³•æœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€ç§æ˜¯æŠŠæ•°å˜ä¸ºï¼ˆ0ï¼Œ1ï¼‰ä¹‹é—´çš„å°æ•°ï¼Œä¸€ç§æ˜¯æŠŠæœ‰é‡çº²è¡¨è¾¾å¼å˜ä¸ºæ— é‡çº²è¡¨è¾¾å¼ã€‚åœ¨æœºå™¨å­¦ä¹ ä¸­æˆ‘ä»¬æ›´å…³æ³¨çš„æŠŠæ•°æ®å˜åˆ°0ï½1ä¹‹é—´ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è®¨è®ºçš„ä¹Ÿæ˜¯ç¬¬ä¸€ç§å½¢å¼ã€‚\n\n## 1ï¼‰min-maxæ ‡å‡†åŒ–\n\n\nmin-maxæ ‡å‡†åŒ–ä¹Ÿå«åšç¦»å·®æ ‡å‡†åŒ–ï¼Œæ˜¯å¯¹åŸå§‹æ•°æ®çš„çº¿æ€§å˜æ¢ï¼Œä½¿ç»“æœè½åˆ°[0,1]åŒºé—´ï¼Œå…¶å¯¹åº”çš„æ•°å­¦å…¬å¼å¦‚ä¸‹ï¼š\n\n$$\nX_{scale} = \\frac{x-min}{max-min}\n$$\n\nå¯¹åº”çš„pythonå®ç°ä¸º\n```\n# xä¸ºæ•°æ® æ¯”å¦‚è¯´ [1,2,1,3,2,4,1]\ndef Normalization(x):\n    return [(float(i)-min(x))/float(max(x)-min(x)) for i in x]\n```\n\nå¦‚æœè¦å°†æ•°æ®è½¬æ¢åˆ°[-1,1]ä¹‹é—´ï¼Œå¯ä»¥ä¿®æ”¹å…¶æ•°å­¦å…¬å¼ä¸ºï¼š\n\n$$\nX_{scale} = \\frac{x-x_{mean}}{max-min}\n$$\nx_mean è¡¨ç¤ºå¹³å‡å€¼ã€‚\n\nå¯¹åº”çš„pythonå®ç°ä¸º\n```\nimport numpy as np\n\n# xä¸ºæ•°æ® æ¯”å¦‚è¯´ [1,2,1,3,2,4,1]\ndef Normalization(x):\n    return [(float(i)-np.mean(x))/float(max(x)-min(x)) for i in x]\n```\n\nå…¶ä¸­maxä¸ºæ ·æœ¬æ•°æ®çš„æœ€å¤§å€¼ï¼Œminä¸ºæ ·æœ¬æ•°æ®çš„æœ€å°å€¼ã€‚è¿™ç§æ–¹æ³•æœ‰ä¸ªç¼ºé™·å°±æ˜¯å½“æœ‰æ–°æ•°æ®åŠ å…¥æ—¶ï¼Œå¯èƒ½å¯¼è‡´maxå’Œminçš„å˜åŒ–ï¼Œéœ€è¦é‡æ–°å®šä¹‰ã€‚\n\nè¯¥æ ‡å‡†åŒ–æ–¹æ³•æœ‰ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯ï¼Œå¦‚æœæ•°æ®ä¸­æœ‰ä¸€äº›åç¦»æ­£å¸¸æ•°æ®çš„å¼‚å¸¸ç‚¹ï¼Œå°±ä¼šå¯¼è‡´æ ‡å‡†åŒ–ç»“æœçš„ä¸å‡†ç¡®æ€§ã€‚æ¯”å¦‚è¯´ä¸€ä¸ªå…¬å¸å‘˜å·¥ï¼ˆAï¼ŒBï¼ŒCï¼ŒDï¼‰çš„è–ªæ°´ä¸º6k,8k,7k,10w,è¿™ç§æƒ…å†µä¸‹è¿›è¡Œå½’ä¸€åŒ–å¯¹æ¯ä¸ªå‘˜å·¥æ¥è®²éƒ½æ˜¯ä¸åˆç†çš„ã€‚\n\nå½“ç„¶è¿˜æœ‰ä¸€äº›å…¶ä»–çš„åŠæ³•ä¹Ÿèƒ½å®ç°æ•°æ®çš„æ ‡å‡†åŒ–ã€‚\n\n## 2ï¼‰z-scoreæ ‡å‡†åŒ–\nz-scoreæ ‡å‡†åŒ–ä¹Ÿå«æ ‡å‡†å·®æ ‡å‡†åŒ–ï¼Œä»£è¡¨çš„æ˜¯åˆ†å€¼åç¦»å‡å€¼çš„ç¨‹åº¦ï¼Œç»è¿‡å¤„ç†çš„æ•°æ®ç¬¦åˆæ ‡å‡†æ­£æ€åˆ†å¸ƒï¼Œå³å‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1ã€‚å…¶è½¬åŒ–å‡½æ•°ä¸º\n\n$$\nX_{scale} = \\frac{x-\\mu }{\\sigma }\n$$\n\nå…¶ä¸­Î¼ä¸ºæ‰€æœ‰æ ·æœ¬æ•°æ®çš„å‡å€¼ï¼ŒÏƒä¸ºæ‰€æœ‰æ ·æœ¬æ•°æ®çš„æ ‡å‡†å·®ã€‚\n\nå…¶å¯¹åº”çš„pythonå®ç°ä¸ºï¼š\n```\nimport numpy as np\n\n#x = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\ndef z_score(x):\n    return (x - np.mean(x) )/np.std(x, ddof = 1)\n```\nz-scoreæ ‡å‡†åŒ–æ–¹æ³•åŒæ ·å¯¹äºç¦»ç¾¤å¼‚å¸¸å€¼çš„å½±å“ã€‚æ¥ä¸‹æ¥çœ‹ä¸€ç§æ”¹è¿›çš„z-scoreæ ‡å‡†åŒ–æ–¹æ³•ã€‚\n\n## 3ï¼‰æ”¹è¿›çš„z-scoreæ ‡å‡†åŒ–\n\nå°†æ ‡å‡†åˆ†å…¬å¼ä¸­çš„å‡å€¼æ”¹ä¸ºä¸­ä½æ•°ï¼Œå°†æ ‡å‡†å·®æ”¹ä¸ºç»å¯¹åå·®ã€‚\n\n$$\nX_{scale} = \\frac{x-x_{center} }{\\sigma_{1} }$$\nä¸­ä½æ•°æ˜¯æŒ‡å°†æ‰€æœ‰æ•°æ®è¿›è¡Œæ’åºï¼Œå–ä¸­é—´çš„é‚£ä¸ªå€¼ï¼Œå¦‚æ•°æ®é‡æ˜¯å¶æ•°ï¼Œåˆ™å–ä¸­é—´ä¸¤ä¸ªæ•°æ®çš„å¹³å‡å€¼ã€‚\n\nÏƒ1ä¸ºæ‰€æœ‰æ ·æœ¬æ•°æ®çš„ç»å¯¹åå·®,å…¶è®¡ç®—å…¬å¼ä¸ºï¼š\n$$\n\\frac{1}{N} \\sum_{1}^{n}|x_{i} - x_{center}|\n$$\n\n----\n# äºŒï¼šsklearnä¸­çš„å½’ä¸€åŒ–\n\nsklearn.preprocessing æä¾›äº†ä¸€äº›å®ç”¨çš„å‡½æ•° ç”¨æ¥å¤„ç†æ•°æ®çš„ç»´åº¦ï¼Œä»¥ä¾›ç®—æ³•ä½¿ç”¨ã€‚\n\n## 1ï¼‰å‡å€¼-æ ‡å‡†å·®ç¼©æ”¾\n\nå³æˆ‘ä»¬ä¸Šè¾¹å¯¹åº”çš„z-scoreæ ‡å‡†åŒ–ã€‚\nåœ¨sklearnçš„å­¦ä¹ ä¸­ï¼Œæ•°æ®é›†çš„æ ‡å‡†åŒ–æ˜¯å¾ˆå¤šæœºå™¨å­¦ä¹ æ¨¡å‹ç®—æ³•çš„å¸¸è§è¦æ±‚ã€‚å¦‚æœä¸ªåˆ«ç‰¹å¾çœ‹èµ·æ¥ä¸æ˜¯å¾ˆç¬¦åˆæ­£æ€åˆ†å¸ƒï¼Œé‚£ä¹ˆä»–ä»¬å¯èƒ½ä¸ºè¡¨ç°ä¸å¥½ã€‚\n\nå®é™…ä¸Šï¼Œæˆ‘ä»¬ç»å¸¸å¿½ç•¥åˆ†å¸ƒçš„å½¢çŠ¶ï¼Œåªæ˜¯é€šè¿‡å‡å»æ•´ç»„æ•°æ®çš„å¹³å‡å€¼ï¼Œä½¿ä¹‹æ›´é è¿‘æ•°æ®ä¸­å¿ƒåˆ†å¸ƒï¼Œç„¶åé€šè¿‡å°†éè¿ç»­æ•°ç‰¹å¾é™¤ä»¥å…¶æ ‡å‡†åå·®è¿›è¡Œåˆ†ç±»ã€‚\n\n\nä¾‹å¦‚ï¼Œç”¨äºå­¦ä¹ ç®—æ³•ï¼ˆä¾‹å¦‚æ”¯æŒå‘é‡æœºçš„RBFå†…æ ¸æˆ–çº¿æ€§æ¨¡å‹çš„l1å’Œl2æ­£åˆ™åŒ–å™¨ï¼‰çš„ç›®æ ‡å‡½æ•°ä¸­ä½¿ç”¨çš„è®¸å¤šå…ƒç´ å‡è®¾æ‰€æœ‰ç‰¹å¾éƒ½ä»¥é›¶ä¸ºä¸­å¿ƒå¹¶ä¸”å…·æœ‰ç›¸åŒé¡ºåºçš„æ–¹å·®ã€‚å¦‚æœç‰¹å¾çš„æ–¹å·®å¤§äºå…¶ä»–æ•°é‡çº§ï¼Œåˆ™å¯èƒ½ä¸»å¯¼ç›®æ ‡å‡½æ•°ï¼Œä½¿ä¼°è®¡å™¨æ— æ³•æŒ‰é¢„æœŸæ­£ç¡®åœ°å­¦ä¹ å…¶ä»–ç‰¹å¾ã€‚\n\nä¾‹å­ï¼š\n```\n>>> from sklearn import preprocessing\n>>> import numpy as np\n>>> X_train = np.array([[ 1., -1.,  2.],\n...                     [ 2.,  0.,  0.],\n...                     [ 0.,  1., -1.]])\n>>> X_scaled = preprocessing.scale(X_train)\n>>> X_scaled\narray([[ 0.        , -1.22474487,  1.33630621],\n       [ 1.22474487,  0.        , -0.26726124],\n       [-1.22474487,  1.22474487, -1.06904497]])\n```\næ ‡å‡†åŒ–åçš„æ•°æ®ç¬¦åˆæ ‡å‡†æ­£å¤ªåˆ†å¸ƒ\n```\n>>> X_scaled.mean(axis=0)\narray([ 0.,  0.,  0.])\n>>> X_scaled.std(axis=0)\narray([ 1.,  1.,  1.])\n```\n\né¢„å¤„ç†æ¨¡å—è¿˜æä¾›äº†ä¸€ä¸ªå®ç”¨ç¨‹åºçº§StandardScalerï¼Œå®ƒå®ç°äº†Transformer APIæ¥è®¡ç®—è®­ç»ƒé›†ä¸Šçš„å¹³å‡å€¼å’Œæ ‡å‡†åå·®ï¼Œä»¥ä¾¿èƒ½å¤Ÿç¨ååœ¨æµ‹è¯•é›†ä¸Šé‡æ–°åº”ç”¨ç›¸åŒçš„å˜æ¢ã€‚\n```\n>>> scaler = preprocessing.StandardScaler().fit(X_train)\n>>> scaler\nStandardScaler(copy=True, with_mean=True, with_std=True)\n>>> scaler.mean_\narray([ 1.        ,  0.        ,  0.33333333])\n>>> scaler.scale_\narray([ 0.81649658,  0.81649658,  1.24721913])\n>>> scaler.transform(X_train)\narray([[ 0.        , -1.22474487,  1.33630621],\n       [ 1.22474487,  0.        , -0.26726124],\n       [-1.22474487,  1.22474487, -1.06904497]])\n```\n\nä½¿ç”¨è½¬æ¢å™¨å¯ä»¥å¯¹æ–°æ•°æ®è¿›è¡Œè½¬æ¢\n```\n>>> X_test = [[-1., 1., 0.]]\n>>> scaler.transform(X_test)\narray([[-2.44948974,  1.22474487, -0.26726124]])\n```\n\n## 2ï¼‰min-maxæ ‡å‡†åŒ–\n\nX_std = (X - X.min(axis=0)) / (X.max(axis=0) - X.min(axis=0))\n\n```\n\n>>> X_train = np.array([[ 1., -1.,  2.],\n...                      [ 2.,  0.,  0.],\n...                      [ 0.,  1., -1.]])\n>>> min_max_scaler = preprocessing.MinMaxScaler()\n>>> X_train_minmax = min_max_scaler.fit_transform(X_train)\n>>> X_train_minmax\narray([[ 0.5       ,  0.        ,  1.        ],\n       [ 1.        ,  0.5       ,  0.33333333],\n       [ 0.        ,  1.        ,  0.        ]])\n```\nä¸Šè¾¹æˆ‘ä»¬åˆ›å»ºçš„min_max_scaler åŒæ ·é€‚ç”¨äºæ–°çš„æµ‹è¯•æ•°æ®\n```\n>>> X_test = np.array([[ -3., -1.,  4.]])\n>>> X_test_minmax = min_max_scaler.transform(X_test)\n>>> X_test_minmax\narray([[-1.5       ,  0.        ,  1.66666667]])\n```\nå¯ä»¥é€šè¿‡scale_å’Œminæ–¹æ³•æŸ¥çœ‹æ ‡å‡†å·®å’Œæœ€å°å€¼\n```\n>>> min_max_scaler.scale_ \narray([ 0.5       ,  0.5       ,  0.33333333])\n>>> min_max_scaler.min_\narray([ 0.        ,  0.5       ,  0.33333333])\n```\n\n## 3ï¼‰æœ€å¤§å€¼æ ‡å‡†åŒ–\n\nå¯¹äºæ¯ä¸ªæ•°å€¼ï¼æ¯ä¸ªç»´åº¦çš„æœ€å¤§å€¼\n\n```\n>>> X_train\narray([[ 1., -1.,  2.],\n       [ 2.,  0.,  0.],\n       [ 0.,  1., -1.]])\n>>> max_abs_scaler = preprocessing.MaxAbsScaler()\n>>> X_train_maxabs = max_abs_scaler.fit_transform(X_train)\n>>> X_train_maxabs\narray([[ 0.5, -1. ,  1. ],\n       [ 1. ,  0. ,  0. ],\n       [ 0. ,  1. , -0.5]])\n>>> X_test = np.array([[ -3., -1.,  4.]])\n>>> X_test_maxabs = max_abs_scaler.transform(X_test)\n>>> X_test_maxabs                 \narray([[-1.5, -1. ,  2. ]])\n>>> max_abs_scaler.scale_         \narray([ 2.,  1.,  2.])\n```\n\n## 4ï¼‰è§„èŒƒåŒ–\nè§„èŒƒåŒ–æ˜¯æ–‡æœ¬åˆ†ç±»å’Œèšç±»ä¸­å‘é‡ç©ºé—´æ¨¡å‹çš„åŸºç¡€\n\n```\n>>> X = [[ 1., -1.,  2.],\n...      [ 2.,  0.,  0.],\n...      [ 0.,  1., -1.]]\n>>> X_normalized = preprocessing.normalize(X, norm='l2')\n>>> X_normalized\narray([[ 0.40824829, -0.40824829,  0.81649658],\n       [ 1.        ,  0.        ,  0.        ],\n       [ 0.        ,  0.70710678, -0.70710678]])\n```\n\nè§£é‡Šï¼šnorm è¯¥å‚æ•°æ˜¯å¯é€‰çš„ï¼Œé»˜è®¤å€¼æ˜¯l2ï¼ˆå‘é‡å„å…ƒç´ çš„å¹³æ–¹å’Œç„¶åæ±‚å¹³æ–¹æ ¹ï¼‰ï¼Œç”¨æ¥è§„èŒƒåŒ–æ¯ä¸ªéé›¶å‘é‡ï¼Œå¦‚æœaxiså‚æ•°è®¾ç½®ä¸º0ï¼Œåˆ™è¡¨ç¤ºçš„æ˜¯è§„èŒƒåŒ–æ¯ä¸ªéé›¶çš„ç‰¹å¾ç»´åº¦ã€‚\n\næœºå™¨å­¦ä¹ ä¸­çš„èŒƒæ•°è§„åˆ™ï¼š[ç‚¹å‡»é˜…è¯»](http://blog.csdn.net/zouxy09/article/details/24971995/)<br>\nå…¶ä»–å¯¹åº”å‚æ•°ï¼š[ç‚¹å‡»æŸ¥çœ‹](http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.normalize.html#sklearn.preprocessing.normalize)\n\n\npreprocessingæ¨¡å—æä¾›äº†è®­ç»ƒç§å­çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯é€šè¿‡ä»¥ä¸‹æ–¹å¼å¾—åˆ°ä¸€ä¸ªæ–°çš„ç§å­ï¼Œå¹¶å¯¹æ–°æ•°æ®è¿›è¡Œè§„èŒƒåŒ–å¤„ç†ã€‚\n```\n>>> normalizer = preprocessing.Normalizer().fit(X)\n>>> normalizer\nNormalizer(copy=True, norm='l2')\n>>> normalizer.transform(X)\narray([[ 0.40824829, -0.40824829,  0.81649658],\n       [ 1.        ,  0.        ,  0.        ],\n       [ 0.        ,  0.70710678, -0.70710678]])\n>>> normalizer.transform([[-1,1,0]])\narray([[-0.70710678,  0.70710678,  0.        ]])\n```\n\n## 5ï¼‰äºŒå€¼åŒ–\nå°†æ•°æ®è½¬æ¢åˆ°0-1 ä¹‹é—´\n```\n>>> X\n[[1.0, -1.0, 2.0], [2.0, 0.0, 0.0], [0.0, 1.0, -1.0]]\n>>> binarizer = preprocessing.Binarizer().fit(X)\n>>> binarizer\nBinarizer(copy=True, threshold=0.0)\n>>> binarizer.transform(X)\narray([[ 1.,  0.,  1.],\n       [ 1.,  0.,  0.],\n       [ 0.,  1.,  0.]])\n```\nå¯ä»¥è°ƒæ•´äºŒå€¼åŒ–çš„é—¨é˜€\n```\n>>> binarizer = preprocessing.Binarizer(threshold=1.1)\n>>> binarizer.transform(X)\narray([[ 0.,  0.,  1.],\n       [ 1.,  0.,  0.],\n       [ 0.,  0.,  0.]])\n```\n\n## 6ï¼‰ç¼–ç çš„åˆ†ç±»ç‰¹å¾\n\né€šå¸¸æƒ…å†µä¸‹ï¼Œç‰¹å¾ä¸æ˜¯ä½œä¸ºè¿ç»­å€¼ç»™å®šçš„ã€‚ä¾‹å¦‚ä¸€ä¸ªäººå¯ä»¥æœ‰\n```\n[\"male\", \"female\"], [\"from Europe\", \"from US\", \"from Asia\"], [\"uses Firefox\", \"uses Chrome\", \"uses Safari\", \"uses Internet Explorer\"]\n```\nè¿™äº›ç‰¹å¾å¯ä»¥è¢«æœ‰æ•ˆçš„ç¼–ç ä¸ºæ•´æ•°ï¼Œä¾‹å¦‚\n```\n[\"male\", \"from US\", \"uses Internet Explorer\"] => [0, 1, 3]\n[\"female\", \"from Asia\", \"uses Chrome\"] would be [1, 2, 1].\n```\nè¿™æ ·çš„æ•´æ•°ä¸åº”è¯¥ç›´æ¥åº”ç”¨åˆ°scikitçš„ç®—æ³•ä¸­ï¼Œå¯ä»¥é€šè¿‡one-of-kæˆ–è€…ç‹¬çƒ­ç¼–ç ï¼ˆOneHotEncorderï¼‰ï¼Œè¯¥ç§å¤„ç†æ–¹å¼ä¼šæŠŠæ¯ä¸ªåˆ†ç±»ç‰¹å¾çš„mä¸­å¯èƒ½å€¼è½¬æ¢æˆmä¸ªäºŒè¿›åˆ¶å€¼ã€‚\n\n```\n>>> enc = preprocessing.OneHotEncoder()\n>>> enc.fit([[0, 0, 3], [1, 1, 0], [0, 2, 1], [1, 0, 2]])\nOneHotEncoder(categorical_features='all', dtype=<class 'numpy.float64'>,\n       handle_unknown='error', n_values='auto', sparse=True)\n>>> enc.transform([[0,1,3]]).toarray()\narray([[ 1.,  0.,  0.,  1.,  0.,  0.,  0.,  0.,  1.]])\n```\né»˜è®¤æƒ…å†µä¸‹ï¼Œä»æ•°æ®é›†ä¸­è‡ªåŠ¨æ¨æ–­å‡ºæ¯ä¸ªç‰¹å¾å¯ä»¥å¸¦å¤šå°‘ä¸ªå€¼ã€‚å¯ä»¥æ˜ç¡®æŒ‡å®šä½¿ç”¨çš„å‚æ•°n_valuesã€‚åœ¨æˆ‘ä»¬çš„æ•°æ®é›†ä¸­æœ‰ä¸¤ç§æ€§åˆ«ï¼Œä¸‰ç§å¯èƒ½çš„å¤§é™†å’Œå››ç§Webæµè§ˆå™¨ã€‚ç„¶åï¼Œæˆ‘ä»¬æ‹Ÿåˆä¼°è®¡é‡ï¼Œå¹¶è½¬æ¢ä¸€ä¸ªæ•°æ®ç‚¹ã€‚åœ¨ç»“æœä¸­ï¼Œå‰ä¸¤ä¸ªæ•°å­—ç¼–ç æ€§åˆ«ï¼Œä¸‹ä¸€ç»„ä¸‰ä¸ªæ•°å­—çš„å¤§é™†å’Œæœ€åå››ä¸ªWebæµè§ˆå™¨ã€‚\n```\n>>> enc = preprocessing.OneHotEncoder(n_values=[2,3,4])\n>>> enc.fit([[1,2,3],[0,2,0]])\nOneHotEncoder(categorical_features='all', dtype=<class 'numpy.float64'>,\n       handle_unknown='error', n_values=[2, 3, 4], sparse=True)\n>>> enc.transform([[1,0,0]]).toarray()\narray([[ 0.,  1.,  1.,  0.,  0.,  1.,  0.,  0.,  0.]])\n```\n\n## 7ï¼‰å¡«è¡¥ç¼ºå¤±å€¼\nç”±äºå„ç§åŸå› ï¼ŒçœŸå®æ•°æ®ä¸­å­˜åœ¨å¤§é‡çš„ç©ºç™½å€¼ï¼Œè¿™æ ·çš„æ•°æ®é›†ï¼Œæ˜¾ç„¶æ˜¯ä¸ç¬¦åˆscikitçš„è¦æ±‚çš„ï¼Œé‚£ä¹ˆpreprocessingæ¨¡å—æä¾›è¿™æ ·ä¸€ä¸ªåŠŸèƒ½ï¼Œåˆ©ç”¨å·²çŸ¥çš„æ•°æ®æ¥å¡«è¡¥è¿™äº›ç©ºç™½ã€‚\n```\n>>> import numpy as np\n>>> from sklearn.preprocessing import Imputer\n>>> imp = Imputer(missing_values='NaN',strategy='mean',verbose=0)\n>>> imp.fit([[1, 2], [np.nan, 3], [7, 6]])\nImputer(axis=0, copy=True, missing_values='NaN', strategy='mean', verbose=0)\n>>> X = [[np.nan, 2], [6, np.nan], [7, 6]]\n>>> print(imp.transform(X))                           \n[[ 4.          2.        ]\n [ 6.          3.66666667]\n [ 7.          6.        ]]\n```\n\nImputeråŒæ ·æ”¯æŒç¨€ç–çŸ©é˜µ\n```\n>>> import scipy.sparse as sp\n>>> X = sp.csc_matrix([[1,2],[0,3],[7,6]])\n>>> imp = Imputer(missing_values=0,strategy='mean',axis=0)\n>>> imp.fit(X)\nImputer(axis=0, copy=True, missing_values=0, strategy='mean', verbose=0)\n>>> X_test = sp.csc\nsp.csc          sp.csc_matrix(  \n>>> X_test = sp.csc_matrix([[0,2],[6,0],[7,6]])\n>>> print(imp.transform(X_test))\n[[ 4.          2.        ]\n [ 6.          3.66666667]\n [ 7.          6.        ]]\n```\n\n## 8ï¼‰ç”Ÿæˆå¤šé¡¹å¼ç‰¹å¾\né€šå¸¸ï¼Œé€šè¿‡è€ƒè™‘è¾“å…¥æ•°æ®çš„éçº¿æ€§ç‰¹å¾æ¥å¢åŠ æ¨¡å‹çš„å¤æ‚åº¦æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ä¸€ä¸ªç®€å•è€Œå¸¸ç”¨çš„æ–¹æ³•æ˜¯å¤šé¡¹å¼ç‰¹å¾ï¼Œå®ƒå¯ä»¥å¾—åˆ°ç‰¹å¾çš„é«˜é˜¶å’Œç›¸äº’ä½œç”¨é¡¹ã€‚\n\nå…¶éµå¾ªçš„åŸåˆ™æ˜¯ \n$$ \n(X_1, X_2) -> (1, X_1, X_2, X_1^2, X_1X_2, X_2^2)\n$$\n```\n>>> import numpy as np\n>>> from sklearn.preprocessing import PolynomialFeatures\n>>> X = np.arange(6).reshape(3, 2)\n>>> X                                                 \narray([[0, 1],\n       [2, 3],\n       [4, 5]])\n>>> poly = PolynomialFeatures(2)\n>>> poly.fit_transform(X)                             \narray([[  1.,   0.,   1.,   0.,   0.,   1.],\n       [  1.,   2.,   3.,   4.,   6.,   9.],\n       [  1.,   4.,   5.,  16.,  20.,  25.]])\n```\n\næœ‰äº›æƒ…å†µä¸‹ï¼Œæœ‰ç›¸äº’å…³ç³»çš„æ ‡ç­¾æ‰æ˜¯å¿…é¡»çš„ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥é€šè¿‡è®¾ç½® interaction_only=True æ¥è¿›è¡Œå¤šé¡¹å¼ç‰¹å¾çš„ç”Ÿæˆ\n```\n>>> X = np.arange(9).reshape(3, 3)\n>>> X                                                 \narray([[0, 1, 2],\n       [3, 4, 5],\n       [6, 7, 8]])\n>>> poly = PolynomialFeatures(degree=3, interaction_only=True)\n>>> poly.fit_transform(X)                             \narray([[   1.,    0.,    1.,    2.,    0.,    0.,    2.,    0.],\n       [   1.,    3.,    4.,    5.,   12.,   15.,   20.,   60.],\n       [   1.,    6.,    7.,    8.,   42.,   48.,   56.,  336.]])\n```\nå…¶éµå¾ªçš„è§„åˆ™æ˜¯ï¼š\n$$\n(X_1, X_2, X_3) -> (1, X_1, X_2, X_3, X_1X_2, X_1X_3, X_2X_3, X_1X_2X_3)\n$$\n\n---\n\nå¯¹åº”çš„scikit-learnèµ„æ–™ä¸ºï¼š http://scikit-learn.org/stable/modules/preprocessing.html\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["ç‰¹å¾å·¥ç¨‹"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"MachingLearningä¸­çš„è·ç¦»å’Œç›¸ä¼¼æ€§è®¡ç®—ä»¥åŠpythonå®ç°","url":"/2017/07/16/æœºå™¨å­¦ä¹ /MachingLearningä¸­çš„è·ç¦»å’Œç›¸ä¼¼æ€§è®¡ç®—ä»¥åŠpythonå®ç°/","content":"> å†™è¿™ç¯‡æ–‡ç« çš„ç›®çš„ä¸æ˜¯è¯´æ‘˜æŠ„ç½‘ä¸Šå…¶ä»–äººçš„æ€»ç»“ï¼Œåˆšæ‰æœ€è¿‘åœ¨çœ‹è¿™æ–¹é¢çš„ä¸œè¥¿ï¼Œä¸ºäº†è®©è‡ªå·±èƒ½å¤Ÿå®é™…çš„å»æ„Ÿå—ä¸‹æ¯ç§æ±‚è·ç¦»å…¬å¼çš„å·®åˆ«ï¼Œç„¶åç”¨pythonè¿›è¡Œå…·ä½“å®ç°ã€‚\n<!--More-->\n\n# å‰è¨€\n\nåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œç»å¸¸è¦ç”¨åˆ°è·ç¦»å’Œç›¸ä¼¼æ€§çš„è®¡ç®—å…¬å¼ï¼Œæˆ‘ä¹ˆè¦å¸¸è®¡ç®—ä¸ªä½“ä¹‹é—´çš„å·®å¼‚å¤§å°ï¼Œç»§è€Œè¯„ä»·ä¸ªäººä¹‹é—´çš„å·®å¼‚æ€§å’Œç›¸ä¼¼æ€§ï¼Œæœ€å¸¸è§çš„å°±æ˜¯æ•°æ®åˆ†æä¸­çš„ç›¸å…³åˆ†æï¼Œæ•°æ®æŒ–æ˜ä¸­çš„åˆ†ç±»å’Œèšç±»ç®—æ³•ã€‚å¦‚åˆ©ç”¨k-meansè¿›è¡Œèšç±»æ—¶ï¼Œåˆ¤æ–­ä¸ªä½“æ‰€å±çš„ç±»åˆ«ï¼Œè¦åˆ©ç”¨è·ç¦»è®¡ç®—å…¬å¼è®¡ç®—ä¸ªä½“åˆ°ç°‡å¿ƒçš„è·ç¦»ï¼Œå¦‚åˆ©ç”¨KNNè¿›è¡Œåˆ†ç±»æ—¶ï¼Œè®¡ç®—ä¸ªä½“ä¸å·²çŸ¥ç±»åˆ«ä¹‹é—´çš„ç›¸ä¼¼æ€§ï¼Œä»è€Œåˆ¤æ–­ä¸ªä½“æ‰€å±çš„ç±»åˆ«ç­‰ã€‚\n\n\n\næ–‡ç« ç¼–è¾‘çš„è¿‡ç¨‹ä¸­æˆ–è®¸å­˜åœ¨ä¸€ä¸ªé”™è¯¯æˆ–è€…ä¸åˆç†çš„åœ°æ–¹ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚\n\nå‚è€ƒï¼šhttp://www.cnblogs.com/heaad/archive/2011/03/08/1977733.html\n\næ¨èï¼šhttps://my.oschina.net/hunglish/blog/787596\n\n# æ¬§æ°è·ç¦»\nä¹Ÿç§°æ¬§å‡ é‡Œå¾—è·ç¦»ï¼Œæ˜¯æŒ‡åœ¨mç»´ç©ºé—´ä¸­ä¸¤ä¸ªç‚¹ä¹‹é—´çš„çœŸå®è·ç¦»ã€‚æ¬§å¼è·ç¦»åœ¨MLä¸­ä½¿ç”¨çš„èŒƒå›´æ¯”è¾ƒå¹¿ï¼Œä¹Ÿæ¯”è¾ƒé€šç”¨ï¼Œå°±æ¯”å¦‚è¯´åˆ©ç”¨k-Meanså¯¹äºŒç»´å¹³é¢å†…çš„æ•°æ®ç‚¹è¿›è¡Œèšç±»ï¼Œå¯¹é­”éƒ½æˆ¿ä»·çš„èšç±»åˆ†æï¼ˆprice/m^2 ä¸å¹³å‡æˆ¿ä»·ï¼‰ç­‰ã€‚\n## äºŒç»´ç©ºé—´çš„æ¬§æ°è·ç¦» \näºŒç»´å¹³é¢ä¸Šä¸¤ç‚¹a(x1,y1)ä¸b(x2,y2)é—´çš„æ¬§æ°è·ç¦»\n\n$$\nd12 =\\sqrt{(x_{1}-x_{2})^2+(y_{1}-y_{2})^2}\n$$\npython å®ç°ä¸ºï¼š\n\n```\n# coding: utf-8\n\nfrom numpy import *\n\ndef twoPointDistance(a,b):\n\td = sqrt( (a[0]-b[0])**2 + (a[1]-b[1])**2 )\n\treturn d\n\nprint 'a,b äºŒç»´è·ç¦»ä¸ºï¼š',twoPointDistance((1,1),(2,2))\n```\n\n\n## ä¸‰ç»´ç©ºé—´çš„æ¬§æ°è·ç¦»\nä¸‰ç»´ç©ºé—´ä¸¤ç‚¹a(x1,y1,z1)ä¸b(x2,y2,z2)é—´çš„æ¬§æ°è·ç¦»\n\n$$d12 =\\sqrt{(x_{1}-x_{2})^2+(y_{1}-y_{2})^2+(z_{1}-z_{2})^2}$$\npython å®ç°ä¸ºï¼š\n```\ndef threePointDistance(a,b):\n\td = sqrt( (a[0]-b[0])**2 + (a[1]-b[1])**2 + (a[2]-b[2])**2 )\n\treturn d\n\nprint 'a,b ä¸‰ç»´è·ç¦»ä¸ºï¼š',threePointDistance((1,1,1),(2,2,2))\n```\n\n## å¤šç»´ç©ºé—´çš„æ¬§æ°è·ç¦»\nä¸¤ä¸ªnç»´å‘é‡a(x11,x12,â€¦,x1n)ä¸ b(x21,x22,â€¦,x2n)é—´çš„æ¬§æ°è·ç¦»\n\n$$ \n\\sqrt{\\sum_{n}^{k=1}(x_{1k}-x_{2k})^2 }\n$$\npython å®ç°ä¸ºï¼š\n\n```\ndef distance(a,b):\n\tsum = 0\n\tfor i in range(len(a)):\n\t\tsum += (a[i]-b[i])**2\n\treturn sqrt(sum)\n\nprint 'a,b å¤šç»´è·ç¦»ä¸ºï¼š',distance((1,1,2,2),(2,2,4,4))\n```\nè¿™é‡Œä¼ å…¥çš„å‚æ•°å¯ä»¥æ˜¯ä»»æ„ç»´çš„ï¼Œè¯¥å…¬å¼ä¹Ÿé€‚åº”ä¸Šè¾¹çš„äºŒç»´å’Œä¸‰ç»´\n\n# æ ‡å‡†æ¬§æ°è·ç¦»\næ ‡å‡†åŒ–æ¬§æ°è·ç¦»æ˜¯é’ˆå¯¹ç®€å•æ¬§æ°è·ç¦»çš„ç¼ºç‚¹è€Œä½œçš„ä¸€ç§æ”¹è¿›æ–¹æ¡ˆã€‚æ ‡å‡†æ¬§æ°è·ç¦»çš„æ€è·¯ï¼šæ—¢ç„¶æ•°æ®å„ç»´åˆ†é‡çš„åˆ†å¸ƒä¸ä¸€æ ·ï¼Œå¥½å§ï¼é‚£æˆ‘å…ˆå°†å„ä¸ªåˆ†é‡éƒ½â€œæ ‡å‡†åŒ–â€åˆ°å‡å€¼ã€æ–¹å·®ç›¸ç­‰å§ã€‚å‡å€¼å’Œæ–¹å·®æ ‡å‡†åŒ–åˆ°å¤šå°‘å‘¢ï¼Ÿè¿™é‡Œå…ˆå¤ä¹ ç‚¹ç»Ÿè®¡å­¦çŸ¥è¯†å§ï¼Œå‡è®¾æ ·æœ¬é›†Xçš„å‡å€¼(mean)ä¸ºmï¼Œæ ‡å‡†å·®(standard deviation)ä¸ºsï¼Œé‚£ä¹ˆXçš„â€œæ ‡å‡†åŒ–å˜é‡â€è¡¨ç¤ºä¸ºï¼š\n\nã€€ã€€è€Œä¸”æ ‡å‡†åŒ–å˜é‡çš„æ•°å­¦æœŸæœ›ä¸º0ï¼Œæ–¹å·®ä¸º1ã€‚å› æ­¤æ ·æœ¬é›†çš„æ ‡å‡†åŒ–è¿‡ç¨‹(standardization)ç”¨å…¬å¼æè¿°å°±æ˜¯ï¼š\nã€€ã€€\n$$\nX^* = \\frac{X-m}{s}\n$$\næ ‡å‡†åŒ–åçš„å€¼ =  ( æ ‡å‡†åŒ–å‰çš„å€¼  ï¼ åˆ†é‡çš„å‡å€¼ ) /åˆ†é‡çš„æ ‡å‡†å·®\n\nç»è¿‡ç®€å•çš„æ¨å¯¼å°±å¯ä»¥å¾—åˆ°ä¸¤ä¸ªnç»´å‘é‡a(x11,x12,â€¦,x1n)ä¸ b(x21,x22,â€¦,x2n)é—´çš„æ ‡å‡†åŒ–æ¬§æ°è·ç¦»çš„å…¬å¼ï¼š\n\n$$\nd_{12} =\\sqrt {\\sum_{k=1}^{n} (\\frac{x_{1k}-x_{2k}}{s_{k}})^2}\n$$\nå¦‚æœå°†æ–¹å·®çš„å€’æ•°çœ‹æˆæ˜¯ä¸€ä¸ªæƒé‡ï¼Œè¿™ä¸ªå…¬å¼å¯ä»¥çœ‹æˆæ˜¯ä¸€ç§åŠ æƒæ¬§æ°è·ç¦»(Weighted Euclidean distance)ã€‚\n\npython å®ç°ä¸º\n```\ndef moreBZOSdis(a,b):\n    sumnum = 0\n    for i in range(len(a)):\n        # è®¡ç®—si åˆ†é‡æ ‡å‡†å·®\n        avg = (a[i]-b[i])/2\n        si = sqrt( (a[i] - avg) ** 2 + (b[i] - avg) ** 2 )\n        sumnum += ((a[i]-b[i])/si ) ** 2\n\t\n    return sqrt(sumnum)\n\nprint 'a,b æ ‡å‡†æ¬§å¼è·ç¦»ï¼š',moreBZOSdis((1,2,1,2),(3,3,3,4))\n```\n\n# æ›¼å“ˆé¡¿è·ç¦»\nåˆç§°ä¸ºåŸå¸‚è¡—åŒºè·ç¦»ï¼ˆCity Block distanceï¼‰, æƒ³è±¡ä½ åœ¨æ›¼å“ˆé¡¿è¦ä»ä¸€ä¸ªåå­—è·¯å£å¼€è½¦åˆ°å¦å¤–ä¸€ä¸ªåå­—è·¯å£ï¼Œé©¾é©¶è·ç¦»æ˜¯ä¸¤ç‚¹é—´çš„ç›´çº¿è·ç¦»å—ï¼Ÿæ˜¾ç„¶ä¸æ˜¯ï¼Œé™¤éä½ èƒ½ç©¿è¶Šå¤§æ¥¼ã€‚å®é™…é©¾é©¶è·ç¦»å°±æ˜¯è¿™ä¸ªâ€œæ›¼å“ˆé¡¿è·ç¦»â€ã€‚è€Œè¿™ä¹Ÿæ˜¯æ›¼å“ˆé¡¿è·ç¦»åç§°çš„æ¥æºã€‚åŒæ ·æ›¼å“ˆé¡¿è·ç¦»ä¹Ÿåˆ†ä¸ºäºŒç»´ï¼Œä¸‰ç»´å’Œå¤šç»´ã€‚\n\nåœ¨è®¡ç¨‹è½¦å‡ ä½•å­¦ä¸­ï¼Œä¸€ä¸ªåœ†æ˜¯ç”±ä»åœ†å¿ƒå‘å„ä¸ªå›ºå®šæ›¼å“ˆé¡¿è·ç¦»æ ‡ç¤ºå‡ºæ¥çš„ç‚¹å›´æˆçš„åŒºåŸŸï¼Œå› æ­¤è¿™ç§åœ†å…¶å®å°±æ˜¯æ—‹è½¬äº†45åº¦çš„æ­£æ–¹å½¢ã€‚å¦‚æœæœ‰ä¸€ç¾¤åœ†ï¼Œä¸”ä»»ä¸¤åœ†çš†ç›¸äº¤ï¼Œåˆ™æ•´ç¾¤åœ†å¿…åœ¨æŸç‚¹ç›¸äº¤ï¼›å› æ­¤æ›¼å“ˆé¡¿è·ç¦»ä¼šå½¢æˆä¸€ä¸ªè¶…å‡¸åº¦é‡ç©ºé—´ã€‚\n\nè¿™é‡Œæœ‰ä¸€ç¯‡äººè„¸è¡¨æƒ…åˆ†ç±»çš„è®ºæ–‡é‡‡ç”¨çš„æ›¼å“ˆé¡¿è·ç¦»è¿›è¡Œè®¡ç®—çš„ï¼Œ[ä¸€ç§äººè„¸è¡¨æƒ…åˆ†ç±»çš„æ–°æ–¹æ³•â€”â€”Manhattanè·ç¦»](http://download.csdn.net/detail/gamer_gyt/9899825)\n\n## äºŒç»´æ›¼å“ˆé¡¿è·ç¦»\näºŒç»´å¹³é¢ä¸¤ç‚¹a(x1,y1)ä¸b(x2,y2)é—´çš„æ›¼å“ˆé¡¿è·ç¦»\n\n$$\nd12 =\\left | x_{1}-x_{2} \\right |  + \\left |y_{1}-y_{2}  \\right |\n$$\npythonå®ç°ä¸º\n```\ndef twoMHDdis(a,b):\n    return abs(a[0]-b[0])+abs(a[1]-b[1])\n\nprint 'a,b äºŒç»´æ›¼å“ˆé¡¿è·ç¦»ä¸ºï¼š', twoMHDdis((1,1),(2,2)) \n```\n\n\n## ä¸‰ç»´æ›¼å“ˆé¡¿è·ç¦»\nä¸‰ç»´å¹³é¢ä¸¤ç‚¹a(x1,y1,z1)ä¸b(x2,y2,z2)é—´çš„æ›¼å“ˆé¡¿è·ç¦»\n\n$$\nd12 =\\left | x_{1}-x_{2} \\right |  + \\left |y_{1}-y_{2}  \\right | + \\left |z_{1}-z_{2}  \\right |\n$$\npythonå®ç°ä¸º\n```\ndef threeMHDdis(a,b):\n\treturn abs(a[0]-b[0])+abs(a[1]-b[1]) + abs(a[2]-b[2])\n \nprint 'a,b ä¸‰ç»´æ›¼å“ˆé¡¿è·ç¦»ä¸ºï¼š', threeMHDdis((1,1,1),(2,2,2)) \n```\n\n## å¤šç»´æ›¼å“ˆé¡¿è·ç¦»\nå¤šç»´å¹³é¢ä¸¤ç‚¹a(x1,y1)ä¸b(x2,y2)é—´çš„æ›¼å“ˆé¡¿è·ç¦»\n$$\nd12 = \\sum_{k=1}^{n} \\left | x_{1k} - x_{2k} \\right |\n$$\npythonå®ç°ä¸º\n```\ndef moreMHDdis(a,b):\n    sum = 0 \n    for i in range(len(a)):\n        sum += abs(a[i]-b[i])\n    return sum\n\nprint 'a,b å¤šç»´æ›¼å“ˆé¡¿è·ç¦»ä¸ºï¼š', moreMHDdis((1,1,1,1),(2,2,2,2)) \n```\nç”±äºç»´è·ç¦»è®¡ç®—æ˜¯æ¯”è¾ƒçµæ´»çš„ï¼Œæ‰€ä»¥ä¹ŸåŒæ ·é€‚åˆäºŒç»´å’Œä¸‰ç»´ã€‚\n\n# åˆ‡æ¯”é›ªå¤«è·ç¦»\nåˆ‡æ¯”é›ªå¤«è·ç¦»ï¼ˆChebyshev Distanceï¼‰çš„å®šä¹‰ä¸ºï¼šmax( | x2-x1 | , |y2-y1 | , ... ), åˆ‡æ¯”é›ªå¤«è·ç¦»ç”¨çš„æ—¶å€™æ•°æ®çš„ç»´åº¦å¿…é¡»æ˜¯ä¸‰ä¸ªä»¥ä¸Šï¼Œè¿™ç¯‡æ–‡ç« ä¸­[æ›¼å“ˆé¡¿è·ç¦»ï¼Œæ¬§å¼è·ç¦»ï¼Œæ˜å¼è·ç¦»ï¼Œåˆ‡æ¯”é›ªå¤«è·ç¦»åŒºåˆ«](http://blog.csdn.net/jerry81333/article/details/52632687) ç»™äº†ä¸€ä¸ªå¾ˆå½¢è±¡çš„è§£é‡Šå¦‚ä¸‹ï¼š\n```\næ¯”å¦‚ï¼Œæœ‰åŒæ ·ä¸¤ä¸ªäººï¼Œåœ¨çº½çº¦å‡†å¤‡åˆ°åŒ—äº¬å‚æ‹œå¤©å®‰é—¨ï¼ŒåŒä¸€ä¸ªåœ°ç‚¹å‡ºå‘çš„è¯ï¼ŒæŒ‰ç…§æ¬§å¼è·ç¦»æ¥è®¡ç®—ï¼Œæ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚\n\nä½†æ˜¯æŒ‰ç…§åˆ‡æ¯”é›ªå¤«è·ç¦»ï¼Œè¿™æ˜¯å®Œå…¨ä¸åŒçš„æ¦‚å¿µäº†ã€‚\n\nè­¬å¦‚ï¼Œå…¶ä¸­ä¸€ä¸ªäººæ˜¯åœŸè±ªï¼Œå¦ä¸€ä¸ªäººæ˜¯ä¸­äº§é˜¶çº§ï¼Œç¬¬ä¸€ä¸ªäººå°±èƒ½å½“æ™šç›´æ¥å¤´ç­‰èˆ±èµ°äººï¼Œè€Œç¬¬äºŒä¸ªäººå¯èƒ½å°±è¦ç­‰æœºç¥¨ä»€ä¹ˆæ—¶å€™æ‰“æŠ˜å†å»ï¼Œæˆ–è€…é€‰æ‹©åèˆ¹ä»€ä¹ˆçš„ã€‚\n\nè¿™æ ·æ¥çœ‹çš„è¯ï¼Œè·ç¦»æ˜¯ä¸æ˜¯å°±ä¸ä¸€æ ·äº†å‘¢ï¼Ÿ\n\næˆ–è€…è¿˜æ˜¯ä¸æ¸…æ¥šï¼Œæˆ‘å†è¯´çš„è¯¦ç»†ç‚¹ã€‚\n\nåŒæ ·æ˜¯è¿™ä¸¤ä¸ªäººï¼Œæ¬§å¼è·ç¦»æ˜¯ç›´æ¥ç®—æœ€çŸ­è·ç¦»çš„ï¼Œè€Œåˆ‡æ¯”é›ªå¤«è·ç¦»å¯èƒ½è¿˜å¾—åŠ ä¸Šè´¢åŠ›ï¼Œæ¯”å¦‚ç¬¬ä¸€ä¸ªäººè´¢å¯Œå€¼100ï¼Œç¬¬äºŒä¸ªåªæœ‰30ï¼Œè™½ç„¶ç‰©ç†è·ç¦»ä¸€æ ·ï¼Œä½†æ˜¯æ‰€åŒ…å«çš„å†…å®¹å´æ˜¯ä¸åŒçš„ã€‚\n```\n\n## äºŒç»´åˆ‡æ¯”é›ªå¤«è·ç¦»\n\näºŒç»´å¹³é¢ä¸¤ç‚¹a(x1,y1)ä¸b(x2,y2)é—´çš„åˆ‡æ¯”é›ªå¤«è·ç¦»\n\n$$\nd_{12} = max( \\left | x_{1} - x_{2} \\right | , \\left | y_{1} - y_{2} \\right |)\n$$\npython å®ç°ä¸º\n\n```\ndef twoQBXFdis(a,b):\n    return max( abs(a[0]-b[0]), abs(a[1]-b[1]))\n\nprint 'a,bäºŒç»´åˆ‡æ¯”é›ªå¤«è·ç¦»ï¼š' , twoQBXFdis((1,2),(3,4))\n```\n\n\n## å¤šç»´åˆ‡æ¯”é›ªå¤«è·ç¦»\n\nä¸¤ä¸ªnç»´å‘é‡a(x11,x12,â€¦,x1n)ä¸ b(x21,x22,â€¦,x2n)é—´çš„åˆ‡æ¯”é›ªå¤«è·ç¦»\n$$\nd12 = max_{i\\epsilon n}( \\left | x_{1i} - x_{2i} \\right | )\n$$\n\npython å®ç°ä¸º\n```\ndef moreQBXFdis(a,b):\n    maxnum = 0\n    for i in range(len(a)):\n        if abs(a[i]-b[i]) > maxnum:\n            maxnum = abs(a[i]-b[i])\n    return maxnum\n\nprint 'a,bå¤šç»´åˆ‡æ¯”é›ªå¤«è·ç¦»ï¼š' , moreQBXFdis((1,1,1,1),(3,4,3,4))\n```\n\n# é©¬æ°è·ç¦»\næœ‰Mä¸ªæ ·æœ¬å‘é‡X1~Xmï¼Œåæ–¹å·®çŸ©é˜µè®°ä¸ºSï¼Œå‡å€¼è®°ä¸ºå‘é‡Î¼ï¼Œåˆ™å…¶ä¸­æ ·æœ¬å‘é‡Xåˆ°uçš„é©¬æ°è·ç¦»è¡¨ç¤ºä¸º\n\n$$\nD(x) = \\sqrt{(X-\\mu )^TS^{-1}(X-\\mu)}\n$$\nè€Œå…¶ä¸­å‘é‡Xiä¸Xjä¹‹é—´çš„é©¬æ°è·ç¦»å®šä¹‰ä¸º\n$$\nD(X_{i},X_{j}) = \\sqrt{(X_{i}-X_{j} )^TS^{-1}(X_{i}-X_{j} )}\n$$\n è‹¥åæ–¹å·®çŸ©é˜µæ˜¯å•ä½çŸ©é˜µï¼ˆå„ä¸ªæ ·æœ¬å‘é‡ä¹‹é—´ç‹¬ç«‹åŒåˆ†å¸ƒï¼‰,åˆ™å…¬å¼å°±æˆäº†ï¼š\n$$\nD(X_{i},X_{j}) = \\sqrt{(X_{i}-X_{j} )^T(X_{i}-X_{j} )}\n$$\nä¹Ÿå°±æ˜¯æ¬§æ°è·ç¦»äº†ã€‚\n\nè‹¥åæ–¹å·®çŸ©é˜µæ˜¯å¯¹è§’çŸ©é˜µï¼Œå…¬å¼å˜æˆäº†æ ‡å‡†åŒ–æ¬§æ°è·ç¦»ã€‚\n\né©¬æ°è·ç¦»çš„ä¼˜ç¼ºç‚¹ï¼šé‡çº²æ— å…³ï¼Œæ’é™¤å˜é‡ä¹‹é—´çš„ç›¸å…³æ€§çš„å¹²æ‰°ã€‚\n\n\n# å¤¹è§’ä½™å¼¦\nå‡ ä½•ä¸­å¤¹è§’ä½™å¼¦å¯ç”¨æ¥è¡¡é‡ä¸¤ä¸ªå‘é‡æ–¹å‘çš„å·®å¼‚ï¼Œæœºå™¨å­¦ä¹ ä¸­å€Ÿç”¨è¿™ä¸€æ¦‚å¿µæ¥è¡¡é‡æ ·æœ¬å‘é‡ä¹‹é—´çš„å·®å¼‚ã€‚\n\n## äºŒç»´ç©ºé—´å‘é‡çš„å¤¹è§’ä½™å¼¦ç›¸ä¼¼åº¦\nåœ¨äºŒç»´ç©ºé—´ä¸­å‘é‡A(x1,y1)ä¸å‘é‡B(x2,y2)çš„å¤¹è§’ä½™å¼¦å…¬å¼ï¼š\n\n$$\n\\cos \\theta  = \\frac{x_{1}x_{2} + y_{1}y_{2}}{ \\sqrt{ x_{1}^2+x_{2}^2 }\\sqrt{ y_{1}^2+y_{2}^2 } }\n$$\npython å®ç°ä¸º\n```\ndef twoCos(a,b):\n    cos = (a[0]*b[0]+a[1]*b[1]) / (sqrt(a[0]**2 + b[0]**2) * sqrt(a[1]**2 + b[1]**2) )\n\n    return cos\nprint 'a,b äºŒç»´å¤¹è§’ä½™å¼¦è·ç¦»ï¼š',twoCos((1,1),(2,2))\n```\n\n\n## å¤šç»´ç©ºé—´å‘é‡çš„å¤¹è§’ä½™å¼¦ç›¸ä¼¼åº¦\nä¸¤ä¸ªnç»´æ ·æœ¬ç‚¹a(x11,x12,â€¦,x1n)å’Œb(x21,x22,â€¦,x2n)çš„å¤¹è§’ä½™å¼¦\n\nç±»ä¼¼çš„ï¼Œå¯¹äºä¸¤ä¸ªnç»´æ ·æœ¬ç‚¹a(x11,x12,â€¦,x1n)å’Œb(x21,x22,â€¦,x2n)ï¼Œå¯ä»¥ä½¿ç”¨ç±»ä¼¼äºå¤¹è§’ä½™å¼¦çš„æ¦‚å¿µæ¥è¡¡é‡å®ƒä»¬é—´çš„ç›¸ä¼¼ç¨‹åº¦ã€‚\n$$\n\\cos \\theta  = \\frac{a \\cdot  b}{\\left | a \\right | \\left | b \\right |}\n$$\nå³ï¼š\n$$\n\\cos \\theta  = \\frac{ \\sum_{k=1}^{n} x_{1k}x_{2k} }{ \\sqrt{ \\sum_{k=1}^{n}x_{1k}^2 }\\sqrt{ \\sum_{k=1}^{n} x_{2k}^2 } }\n$$\npythonå®ç°ä¸º\n```\ndef moreCos(a,b):\n    sum_fenzi = 0.0\n    sum_fenmu_1,sum_fenmu_2 = 0,0\n    for i in range(len(a)):\n        sum_fenzi += a[i]*b[i]\n        sum_fenmu_1 += a[i]**2 \n        sum_fenmu_2 += b[i]**2 \n\n    return sum_fenzi/( sqrt(sum_fenmu_1) * sqrt(sum_fenmu_2) )\nprint 'a,b å¤šç»´å¤¹è§’ä½™å¼¦è·ç¦»ï¼š',moreCos((1,1,1,1),(2,2,2,2))\n```\n\nå¤¹è§’ä½™å¼¦å–å€¼èŒƒå›´ä¸º[-1,1]ã€‚å¤¹è§’ä½™å¼¦è¶Šå¤§è¡¨ç¤ºä¸¤ä¸ªå‘é‡çš„å¤¹è§’è¶Šå°ï¼Œå¤¹è§’ä½™å¼¦è¶Šå°è¡¨ç¤ºä¸¤å‘é‡çš„å¤¹è§’è¶Šå¤§ã€‚å½“ä¸¤ä¸ªå‘é‡çš„æ–¹å‘é‡åˆæ—¶å¤¹è§’ä½™å¼¦å–æœ€å¤§å€¼1ï¼Œå½“ä¸¤ä¸ªå‘é‡çš„æ–¹å‘å®Œå…¨ç›¸åå¤¹è§’ä½™å¼¦å–æœ€å°å€¼-1ã€‚\n\n# é—µå¯å¤«æ–¯åŸºè·ç¦»\n\né—µæ°è·ç¦»ä¸æ˜¯ä¸€ç§è·ç¦»ï¼Œè€Œæ˜¯ä¸€ç»„è·ç¦»çš„å®šä¹‰\n## å®šä¹‰\nä¸¤ä¸ªnç»´å˜é‡a(x11,x12,â€¦,x1n)ä¸ b(x21,x22,â€¦,x2n)é—´çš„é—µå¯å¤«æ–¯åŸºè·ç¦»å®šä¹‰ä¸ºï¼š\n$$\n\\sqrt[p]{ \\sum_{k=1}^{n} \\left | x_{1k}-x_{2k} \\right |^p} \n$$\n\nå…¶ä¸­pæ˜¯ä¸€ä¸ªå˜å‚æ•°ã€‚\n\nå½“p=1æ—¶ï¼Œå°±æ˜¯æ›¼å“ˆé¡¿è·ç¦»\n\nå½“p=2æ—¶ï¼Œå°±æ˜¯æ¬§æ°è·ç¦»\n\nå½“pâ†’âˆæ—¶ï¼Œå°±æ˜¯åˆ‡æ¯”é›ªå¤«è·ç¦»\n\næ ¹æ®å˜å‚æ•°çš„ä¸åŒï¼Œé—µæ°è·ç¦»å¯ä»¥è¡¨ç¤ºä¸€ç±»çš„è·ç¦»ã€‚\n\n## é—µæ°è·ç¦»çš„ç¼ºç‚¹\né—µæ°è·ç¦»ï¼ŒåŒ…æ‹¬æ›¼å“ˆé¡¿è·ç¦»ã€æ¬§æ°è·ç¦»å’Œåˆ‡æ¯”é›ªå¤«è·ç¦»éƒ½å­˜åœ¨æ˜æ˜¾çš„ç¼ºç‚¹ã€‚\n\nä¸¾ä¸ªä¾‹å­ï¼šäºŒç»´æ ·æœ¬(èº«é«˜,ä½“é‡)ï¼Œå…¶ä¸­èº«é«˜èŒƒå›´æ˜¯150 ~ 190ï¼Œä½“é‡èŒƒå›´æ˜¯50 ~ 60ï¼Œæœ‰ä¸‰ä¸ªæ ·æœ¬ï¼ša(180,50)ï¼Œb(190,50)ï¼Œc(180,60)ã€‚é‚£ä¹ˆaä¸bä¹‹é—´çš„é—µæ°è·ç¦»ï¼ˆæ— è®ºæ˜¯æ›¼å“ˆé¡¿è·ç¦»ã€æ¬§æ°è·ç¦»æˆ–åˆ‡æ¯”é›ªå¤«è·ç¦»ï¼‰ç­‰äºaä¸cä¹‹é—´çš„é—µæ°è·ç¦»ï¼Œä½†æ˜¯èº«é«˜çš„10cmçœŸçš„ç­‰ä»·äºä½“é‡çš„10kgä¹ˆï¼Ÿå› æ­¤ç”¨é—µæ°è·ç¦»æ¥è¡¡é‡è¿™äº›æ ·æœ¬é—´çš„ç›¸ä¼¼åº¦å¾ˆæœ‰é—®é¢˜ã€‚\n\nç®€å•è¯´æ¥ï¼Œé—µæ°è·ç¦»çš„ç¼ºç‚¹ä¸»è¦æœ‰ä¸¤ä¸ªï¼š(1)å°†å„ä¸ªåˆ†é‡çš„é‡çº²(scale)ï¼Œä¹Ÿå°±æ˜¯â€œå•ä½â€å½“ä½œç›¸åŒçš„çœ‹å¾…äº†ã€‚(2)æ²¡æœ‰è€ƒè™‘å„ä¸ªåˆ†é‡çš„åˆ†å¸ƒï¼ˆæœŸæœ›ï¼Œæ–¹å·®ç­‰)å¯èƒ½æ˜¯ä¸åŒçš„ã€‚\n\n\n# æ±‰æ˜è·ç¦»\n\n## å®šä¹‰\nä¸¤ä¸ªç­‰é•¿å­—ç¬¦ä¸²s1ä¸s2ä¹‹é—´çš„æ±‰æ˜è·ç¦»å®šä¹‰ä¸ºå°†å…¶ä¸­ä¸€ä¸ªå˜ä¸ºå¦å¤–ä¸€ä¸ªæ‰€éœ€è¦ä½œçš„æœ€å°æ›¿æ¢æ¬¡æ•°ã€‚ä¾‹å¦‚å­—ç¬¦ä¸²â€œ1111â€ä¸â€œ1001â€ä¹‹é—´çš„æ±‰æ˜è·ç¦»ä¸º2ã€‚\n\nåº”ç”¨ï¼šä¿¡æ¯ç¼–ç ï¼ˆä¸ºäº†å¢å¼ºå®¹é”™æ€§ï¼Œåº”ä½¿å¾—ç¼–ç é—´çš„æœ€å°æ±‰æ˜è·ç¦»å°½å¯èƒ½å¤§ï¼‰ã€‚\n\n## python å®ç°\n```\ndef hanmingDis(a,b):\n    sumnum = 0\n    for i in range(len(a)):\n        if a[i]!=b[i]:\n            sumnum += 1\n    return sumnum\n\nprint 'a,b æ±‰æ˜è·ç¦»ï¼š',hanmingDis((1,1,2,3),(2,2,1,3))\n```\n\n# æ°å¡å¾·è·ç¦» & æ°å¡å¾·ç›¸ä¼¼ç³»æ•°\n## æ°å¡å¾·è·ç¦»\nä¸æ°å¡å¾·ç›¸ä¼¼ç³»æ•°ç›¸åçš„æ¦‚å¿µæ˜¯æ°å¡å¾·è·ç¦»(Jaccard distance)ã€‚æ°å¡å¾·è·ç¦»å¯ç”¨å¦‚ä¸‹å…¬å¼è¡¨ç¤ºï¼š\n$$\nJ_{\\delta} (A,B) = \\frac{| A \\bigcup B | - | A \\bigcap B |}{| A \\bigcup B |}\n$$\næ°å¡å¾·è·ç¦»ç”¨ä¸¤ä¸ªé›†åˆä¸­ä¸åŒå…ƒç´ å æ‰€æœ‰å…ƒç´ çš„æ¯”ä¾‹æ¥è¡¡é‡ä¸¤ä¸ªé›†åˆçš„åŒºåˆ†åº¦ã€‚\n\npython å®ç°\n```\ndef jiekadeDis(a,b):\n    set_a = set(a)\n    set_b = set(b)\n    dis = float(len( (set_a | set_b) - (set_a & set_b) ) )/ len(set_a | set_b)\n    return dis\n\nprint 'a,b æ°å¡å¾·è·ç¦»ï¼š', jiekadeDis((1,2,3),(2,3,4))\n```\n\n## æ°å¡å¾·ç›¸ä¼¼ç³»æ•°\nä¸¤ä¸ªé›†åˆAå’ŒBçš„äº¤é›†å…ƒç´ åœ¨Aï¼ŒBçš„å¹¶é›†ä¸­æ‰€å çš„æ¯”ä¾‹ï¼Œç§°ä¸ºä¸¤ä¸ªé›†åˆçš„æ°å¡å¾·ç›¸ä¼¼ç³»æ•°ï¼Œç”¨ç¬¦å·J(A,B)è¡¨ç¤ºã€‚\n$$\nJ(A,B) = \\frac{| A \\bigcap B |}{| A \\bigcup B |}\n$$\næ°å¡å¾·ç›¸ä¼¼ç³»æ•°æ˜¯è¡¡é‡ä¸¤ä¸ªé›†åˆçš„ç›¸ä¼¼åº¦ä¸€ç§æŒ‡æ ‡ã€‚\n\npython å®ç°\n```\ndef jiekadeXSDis(a,b):\n    set_a = set(a)\n    set_b = set(b)\n    dis = float(len(set_a & set_b)  )/ len(set_a | set_b)\n    return dis\n\nprint 'a,b æ°å¡å¾·ç›¸ä¼¼ç³»æ•°ï¼š', jiekadeXSDis((1,2,3),(2,3,4))\n```\n\n## æ°å¡å¾·ç›¸ä¼¼ç³»æ•°ä¸æ°å¡å¾·è·ç¦»çš„åº”ç”¨\nå¯å°†æ°å¡å¾·ç›¸ä¼¼ç³»æ•°ç”¨åœ¨è¡¡é‡æ ·æœ¬çš„ç›¸ä¼¼åº¦ä¸Šã€‚\n\nã€€ã€€æ ·æœ¬Aä¸æ ·æœ¬Bæ˜¯ä¸¤ä¸ªnç»´å‘é‡ï¼Œè€Œä¸”æ‰€æœ‰ç»´åº¦çš„å–å€¼éƒ½æ˜¯0æˆ–1ã€‚ä¾‹å¦‚ï¼šA(0111)å’ŒB(1011)ã€‚æˆ‘ä»¬å°†æ ·æœ¬çœ‹æˆæ˜¯ä¸€ä¸ªé›†åˆï¼Œ1è¡¨ç¤ºé›†åˆåŒ…å«è¯¥å…ƒç´ ï¼Œ0è¡¨ç¤ºé›†åˆä¸åŒ…å«è¯¥å…ƒç´ ã€‚\n\np ï¼šæ ·æœ¬Aä¸Béƒ½æ˜¯1çš„ç»´åº¦çš„ä¸ªæ•°\n\nq ï¼šæ ·æœ¬Aæ˜¯1ï¼Œæ ·æœ¬Bæ˜¯0çš„ç»´åº¦çš„ä¸ªæ•°\n\nr ï¼šæ ·æœ¬Aæ˜¯0ï¼Œæ ·æœ¬Bæ˜¯1çš„ç»´åº¦çš„ä¸ªæ•°\n\ns ï¼šæ ·æœ¬Aä¸Béƒ½æ˜¯0çš„ç»´åº¦çš„ä¸ªæ•°\n\n\n\né‚£ä¹ˆæ ·æœ¬Aä¸Bçš„æ°å¡å¾·ç›¸ä¼¼ç³»æ•°å¯ä»¥è¡¨ç¤ºä¸ºï¼š\n\nè¿™é‡Œp+q+rå¯ç†è§£ä¸ºAä¸Bçš„å¹¶é›†çš„å…ƒç´ ä¸ªæ•°ï¼Œè€Œpæ˜¯Aä¸Bçš„äº¤é›†çš„å…ƒç´ ä¸ªæ•°ã€‚\n\nè€Œæ ·æœ¬Aä¸Bçš„æ°å¡å¾·è·ç¦»è¡¨ç¤ºä¸ºï¼š\n$$\nJ= \\frac{p}{p+q+r}\n$$\n\n# ç›¸å…³ç³»æ•° & ç›¸å…³è·ç¦»\n## ç›¸å…³ç³»æ•°\n$$\n\\rho_{XY} = \\frac{Cov(X,Y)}{\\sqrt{D(X)} \\sqrt{D(Y)}}=\\frac{ E( (X-EX) (Y-EY) ) }{ \\sqrt{D(X)} \\sqrt{D(Y)} }\n$$\nç›¸å…³ç³»æ•°æ˜¯è¡¡é‡éšæœºå˜é‡Xä¸Yç›¸å…³ç¨‹åº¦çš„ä¸€ç§æ–¹æ³•ï¼Œç›¸å…³ç³»æ•°çš„å–å€¼èŒƒå›´æ˜¯[-1,1]ã€‚ç›¸å…³ç³»æ•°çš„ç»å¯¹å€¼è¶Šå¤§ï¼Œåˆ™è¡¨æ˜Xä¸Yç›¸å…³åº¦è¶Šé«˜ã€‚å½“Xä¸Yçº¿æ€§ç›¸å…³æ—¶ï¼Œç›¸å…³ç³»æ•°å–å€¼ä¸º1ï¼ˆæ­£çº¿æ€§ç›¸å…³ï¼‰æˆ–-1ï¼ˆè´Ÿçº¿æ€§ç›¸å…³ï¼‰ã€‚\n\npython å®ç°\nç›¸å…³ç³»æ•°å¯ä»¥åˆ©ç”¨numpyåº“ä¸­çš„corrcoefå‡½æ•°æ¥è®¡ç®—\nä¾‹å¦‚ å¯¹äºçŸ©é˜µa,numpy.corrcoef(a)å¯è®¡ç®—è¡Œä¸è¡Œä¹‹é—´çš„ç›¸å…³ç³»æ•°ï¼Œnumpy.corrcoef(a,rowvar=0)ç”¨äºè®¡ç®—å„åˆ—ä¹‹é—´çš„ç›¸å…³ç³»æ•°ï¼Œè¾“å‡ºä¸ºç›¸å…³ç³»æ•°çŸ©é˜µã€‚\n```\nfrom numpy import  *\na = array([[1, 1, 2, 2, 3],  \n       [2, 2, 3, 3, 5],  \n       [1, 4, 2, 2, 3]]) \n\nprint corrcoef(a)\n\n>>array([[ 1.        ,  0.97590007,  0.10482848],\n       [ 0.97590007,  1.        ,  0.17902872],\n       [ 0.10482848,  0.17902872,  1.        ]])\n\nprint corrcoef(a,rowvar=0)\n\n>>array([[ 1.        , -0.18898224,  1.        ,  1.        ,  1.        ],\n       [-0.18898224,  1.        , -0.18898224, -0.18898224, -0.18898224],\n       [ 1.        , -0.18898224,  1.        ,  1.        ,  1.        ],\n       [ 1.        , -0.18898224,  1.        ,  1.        ,  1.        ],\n       [ 1.        , -0.18898224,  1.        ,  1.        ,  1.        ]])\n```\n\n## ç›¸å…³è·ç¦»\n\n$$\nD_{xy} = 1 - \\rho _{XY}\n$$\n\npython å®ç°ï¼ˆåŸºäºç›¸å…³ç³»æ•°ï¼‰\nåŒæ ·é’ˆå¯¹çŸ©é˜µa\n```\n# è¡Œä¹‹é—´çš„ç›¸å…³è·ç¦»\nones(shape(corrcoef(a)),int) - corrcoef(a)\n\n>>array([[ 0.        ,  0.02409993,  0.89517152],\n       [ 0.02409993,  0.        ,  0.82097128],\n       [ 0.89517152,  0.82097128,  0.        ]])\n       \n       \n# åˆ—ä¹‹é—´çš„ç›¸å…³è·ç¦»\nones(shape(corrcoef(a,rowvar = 0)),int) - corrcoef(a,rowvar = 0)\n\n>>array([[ 0.        ,  1.18898224,  0.        ,  0.        ,  0.        ],\n       [ 1.18898224,  0.        ,  1.18898224,  1.18898224,  1.18898224],\n       [ 0.        ,  1.18898224,  0.        ,  0.        ,  0.        ],\n       [ 0.        ,  1.18898224,  0.        ,  0.        ,  0.        ],\n       [ 0.        ,  1.18898224,  0.        ,  0.        ,  0.        ]])\n\n```\n\n\n# ä¿¡æ¯ç†µ\n\nä¿¡æ¯ç†µå¹¶ä¸å±äºä¸€ç§ç›¸ä¼¼æ€§åº¦é‡ï¼Œæ˜¯è¡¡é‡åˆ†å¸ƒçš„æ··ä¹±ç¨‹åº¦æˆ–åˆ†æ•£ç¨‹åº¦çš„ä¸€ç§åº¦é‡ã€‚åˆ†å¸ƒè¶Šåˆ†æ•£(æˆ–è€…è¯´åˆ†å¸ƒè¶Šå¹³å‡)ï¼Œä¿¡æ¯ç†µå°±è¶Šå¤§ã€‚åˆ†å¸ƒè¶Šæœ‰åºï¼ˆæˆ–è€…è¯´åˆ†å¸ƒè¶Šé›†ä¸­ï¼‰ï¼Œä¿¡æ¯ç†µå°±è¶Šå°ã€‚\n\nè®¡ç®—ç»™å®šçš„æ ·æœ¬é›†Xçš„ä¿¡æ¯ç†µçš„å…¬å¼ï¼š\n\n$$\nEntropy(X) = \\sum_{i=1}^{n} -p_{i} log_{2}p_{i} \n$$\n\nå‚æ•°çš„å«ä¹‰ï¼š\n\nnï¼šæ ·æœ¬é›†Xçš„åˆ†ç±»æ•°\n\npiï¼šXä¸­ç¬¬iç±»å…ƒç´ å‡ºç°çš„æ¦‚ç‡\n\nä¿¡æ¯ç†µè¶Šå¤§è¡¨æ˜æ ·æœ¬é›†Såˆ†ç±»è¶Šåˆ†æ•£ï¼Œä¿¡æ¯ç†µè¶Šå°åˆ™è¡¨æ˜æ ·æœ¬é›†Xåˆ†ç±»è¶Šé›†ä¸­ã€‚ã€‚å½“Sä¸­nä¸ªåˆ†ç±»å‡ºç°çš„æ¦‚ç‡ä¸€æ ·å¤§æ—¶ï¼ˆéƒ½æ˜¯1/nï¼‰ï¼Œä¿¡æ¯ç†µå–æœ€å¤§å€¼log2(n)ã€‚å½“Xåªæœ‰ä¸€ä¸ªåˆ†ç±»æ—¶ï¼Œä¿¡æ¯ç†µå–æœ€å°å€¼0\n\npythonè¿›è¡Œè®¡ç®—å’Œå®ç°å¯å‚è€ƒï¼š\nhttp://blog.csdn.net/autoliuweijie/article/details/52244246\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["æœºå™¨å­¦ä¹ "],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ä¸€åˆ‡çš„é—¹é—¹å“„å“„ï¼Œåªæ˜¯ä»–åœ¨æ°´å¸˜æ´èº²é¿é£æ²™é‚£æ™šåšçš„ä¸€ä¸ªæ¢¦","url":"/2017/04/16/éšæ‰‹è®°/ä¸€åˆ‡çš„é—¹é—¹å“„å“„ï¼Œåªæ˜¯ä»–åœ¨æ°´å¸˜æ´èº²é¿é£æ²™é‚£æ™šåšçš„ä¸€ä¸ªæ¢¦/","content":"\n> é€åŒå­¦èµ°ä¹‹åï¼Œæˆ‘åœ¨è·¯è¾¹é»˜é»˜çš„ç«™äº†æœ‰äº”åˆ†é’Ÿï¼Œçªç„¶è§‰å¾—æˆ‘æ— å¤„å¯å»ï¼Œæœ‰ä¸€ç§æ·±å…¥éª¨é«“çš„æ‚²å“€å’Œæ— å¥ˆï¼Œç„¶åæˆ‘å°±æƒ³èµ·äº†ä¸€ä¸ªå‘½é¢˜ï¼Œâ€œå¦‚ä»Šçš„ä½ ï¼Œä½•å»ä½•ä»ï¼â€æˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¼šçªç„¶æƒ³åˆ°è¿™æ ·ä¸€ä¸ªå‘½é¢˜ï¼Œæˆ–è®¸æ˜¯æˆ‘ä»¬æ¯ä¸ªäººéƒ½æ˜¯è‡³å°Šå®å§ã€‚å…¶å®æ¯ä¸ªäººå¯¹ã€Šå¤§è¯ã€‹çš„ç†è§£éƒ½æ˜¯æœ‰æ‰€ä¸åŒçš„ï¼ŒåŒæ ·çš„äººåœ¨ä¸åŒçš„æ—¶æœŸè®¤è¯†ä¹Ÿä¼šæœ‰åå·®ï¼Œå°±å¥½æ¯”æˆ‘ç¬¬ä¸€æ¬¡çœ‹çš„æ—¶å€™ï¼Œç¬‘å¾—è…¹èƒŒæŠ½ç­‹ï¼Œå‘²ç‰™å’§å˜´ï¼Œç¬¬äºŒæ¬¡çœ‹çš„æ—¶å€™ï¼Œç¬‘å¾—å°‘äº†ï¼Œæƒ³çš„å¤šäº†ï¼Œè¿‡åä¾¿ä»€ä¹ˆæ„Ÿè§‰ä¹Ÿæ²¡æœ‰äº†ï¼Œç¬¬ä¸‰æ¬¡çœ‹å¾—æ—¶å€™ï¼Œå¿½ç„¶è§‰å¾—ä¸çŸ¥é“æ˜¯è¯¥å“­è¿˜æ˜¯è¯¥ç¬‘ï¼Œç¬‘å¾—æ—¶å€™å¤ªç‰µå¼ºï¼Œå“­å¾—æ—¶å€™å¤ªå°´å°¬ã€‚ç¬¬å››æ¬¡ä¾¿æ˜¯è¿™ä¸€æ¬¡ï¼Œçœ‹å®Œä¹‹åè§‰å¾—æœ‰ä¸€ç§æ— å¯å¥ˆä½•çš„æ‚²å“€ã€‚\n\n<!--More-->\n\n\n![ä¸€åˆ‡çš„é—¹é—¹å“„å“„ï¼Œåªæ˜¯ä»–åœ¨æ°´å¸˜æ´èº²é¿é£æ²™é‚£æ™šåšçš„ä¸€ä¸ªæ¢¦ã€‚](http://img.blog.csdn.net/20170415205051154?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\n\n\n-----\n## **å¯¹ã€Šå¤§è¯ã€‹çš„è§£è¯»**\n\næœ‰äººè¯´è¿™æ˜¯ä¸€éƒ¨çƒ‚ç‰‡ï¼Œä¹Ÿæœ‰äººè¯´è¿™æ˜¯ä¸€éƒ¨ç»å…¸ï¼Œæœ‰äººè¯´è¿™æ˜¯å¯¹è¥¿æ¸¸æ–‡åŒ–çš„è¿‡åº¦æ¶ˆè´¹ï¼Œæœ‰äººè¯´è¿™æ˜¯ä¸€ä»£äººçš„åæ€ä¸æˆé•¿ï¼Œæœ‰äººè¯´é˜´å·®é˜³é”™çš„è´è¶æ•ˆåº”ï¼Œè®©ä¸€ä¸ªå¹´ä»£çš„äººæ”¯æ’‘èµ·äº†è¿™éƒ¨è¶…è¶Šä¸­å›½ç”µå½±æ°´å¹³50å¹´çš„æ— å˜å¤´å¼ä½œå“ï¼Œä¹Ÿæœ‰äººè¯´è¿™æ˜¯ä¸€éƒ¨ç¬‘ä¸­å¸¦æ³ªï¼Œæ€»æœ‰ä¸€å¤©ä½ èµ°åœ¨è·¯ä¸Šä¹Ÿä¼šåƒä¸€æ¡ç‹—çš„æ‚²å‰§ã€‚\n\nä¸€åƒä¸ªäººçœ¼ä¸­æœ‰ä¸€åƒä¸ªå“ˆå§†é›·ç‰¹ï¼Œå¯¹äºä¸€éƒ¨å½±è§†ä½œå“ï¼Œæˆ‘ä»¬æ— æ³•å»è¯„è®ºä»»ä½•ä¸€ä¸ªäººçš„ç†è§£æ˜¯å¯¹è¿˜æ˜¯é”™ï¼Œå› ä¸ºç»å†ä¸åŒï¼Œå°±åƒä½ ä¸èƒ½æŠŠä½ çš„æƒ…æ„Ÿå¼ºåŠ åˆ°åˆ«äººèº«ä¸Šã€‚å–œæ¬¢ä¸€éƒ¨ä½œå“ï¼Œåœ¨ä¸çŸ¥ä¸è§‰é—´ä½ ä¼šå¿½ç•¥ä»–çš„ç¼ºç‚¹ï¼Œè®¨åŒä¸€ä¸ªäº‹ç‰©ï¼Œåœ¨ä¸çŸ¥ä¸è§‰é—´å°±ä¼šæ”¾å¤§ä»–çš„çŸ­å¤„ã€‚æˆ‘ä»¬ä¹Ÿä¸èƒ½ç”¨æˆ‘ä»¬ç°ä»£çš„æ€ç»´å’Œè§‚å¿µå»è¯„åˆ¤20ä¸–çºªæ¸¯å°ç”µå½±çš„æ–‡åŒ–å’Œæƒ…æ„Ÿã€‚\n\nè‡³å°Šå®çš„è·¯çº¿æ˜¯ï¼Œæœ‰äººç»™ä»–ç‚¹äº†ä¸‰é¢—ç—£ï¼Œæ‹”å‡ºæ¥ç´«é’å®å‰‘ï¼Œå¼€å¯äº†ä¸ç´«éœçš„äº¤æ¶‰ï¼Œå¨¶äº²ï¼Œæˆ´ä¸Šç´§ç®å’’ï¼Œå¤§æˆ˜ç‰›é­”ç‹ï¼Œè¥¿å¤©å–ç»ã€‚å…¶å®è‡³å°Šå®è¿™æ¡è·¯çº¿ï¼Œä½•å°ä¸æ˜¯æˆ‘ä»¬çš„æ¼«æ¼«äººç”Ÿè·¯å‘¢ï¼Œè‡³å°Šå®ç”¨æœˆå…‰å®ç›’æ¥å¯»æ‰¾500å¹´å‰çš„ç™½æ™¶æ™¶ï¼Œå´é˜´å·®é˜³é”™é‡åˆ°äº†ç´«éœä»™å­ï¼Œæœ€ååœ¨å¯¹ç™½æ™¶æ™¶å¤±è€Œå¤å¾—ä¹‹ååˆå¾—çŸ¥ç´«éœåœ¨ä»–å†…å¿ƒç•™ä¸‹çš„ä¸€æ»´çœ¼æ³ªï¼Œæœ€ç»ˆå¤§å½»å¤§æ‚Ÿï¼Œæ˜ç™½äº†èˆç”Ÿå–ä¹‰ï¼Œå‚é€äº†ç”Ÿäº¦ä½•å“€ï¼Œæ­»äº¦ä½•è‹¦ã€‚æˆ‘ä»¬çš„äººç”Ÿä¸ä¹Ÿä¸€æ ·ï¼Œæ€»ä¼šæœ‰å„ç§å„æ ·çš„æœªçŸ¥å› ç´ å½±å“æˆ‘ä»¬çš„é€‰æ‹©ï¼Œåœ¨åŠªåŠ›é¢å¯¹çœ¼å‰ä¸€åˆ‡ä¹‹åï¼Œæœ€ç»ˆå›å¤´æ„Ÿå¹å¹´åï¼Œå›´ç‚‰å°é¥®ï¼Œæœ¬æ¥æ— ä¸€ç‰©ï¼Œä½•å¤„æƒ¹å°˜åŸƒã€‚\n\nå¯¹äºç´«éœå’Œè‡³å°Šå®çš„çˆ±æƒ…ï¼Œæ²¡æœ‰è¿™ç§ä½“éªŒï¼Œæ˜¯ä¸ä¼šæ‡‚çš„ï¼Œè¶Šæ˜¯æ·±æƒ…çš„äººè¶Šå®¹æ˜“å—ä¼¤ï¼Œå¥¹æ”¾ä¸‹å°Šä¸¥æ¥çˆ±ä»–ï¼Œç»ˆäºä»–åæ‚”äº†ã€‚åœ¨è‡³å°Šå®çš„æ¢¦é‡Œï¼Œç´«éœä»™å­è¯´ï¼šâ€œé£è›¾æ˜æ˜çŸ¥é“å‰é¢æ˜¯ç«å †ï¼Œå´è¿˜ä¹‰æ— åé¡¾çš„æ‰‘è¿›å»ã€‚â€å¥¹ç¬‘ä¸€ä¸‹ï¼Œæ¥ç€è¯´ï¼šâ€œé£è›¾å°±æ˜¯è¿™ä¹ˆå‚»ï¼â€è€ŒåŒæ ·çš„è‡³å°Šå®ï¼Œâ€œæœ‰ä¸€ä¸ªåå­—å«ç´«éœçš„ï¼Œä½ å«ä¸ƒç™¾å…«åå››æ¬¡â€œï¼Œæ—¶å…‰çœŸæ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œæ‰€è°“é›•åˆ»æ—¶å…‰ï¼Œæ˜¯è¯´ç”Ÿæ´»åƒæŠŠé’åˆ€ï¼Œé”‰å¹³æˆ‘ä»¬çš„è§¦è§‰ï¼Œè€Œç”µå½±åˆ™æ˜¯è§£æ¯’çš„é‡è¯ï¼Œå®ƒè®©äººçªç„¶é¢†æ‚Ÿåˆ°ï¼Œæˆ‘ä»¬çš„å†…å¿ƒè¦æ¯”è‡ªå·±æƒ³åƒçš„æ•æ„Ÿå¹²å‡€å¾—å¤šï¼ä½ ç­‰çš„é‚£ä¹ˆè¾›è‹¦ï¼Œä»–å´é™Œç”Ÿåˆ°è®©ä½ å¿ƒç–¼ã€‚ä»¥è‡³äºåœ¨äººç”Ÿçš„ä¸åŒé˜¶æ®µå»æ¬£èµã€Šå¤§è¯ã€‹ï¼Œä¼¼ä¹éƒ½èƒ½ä»ä¸­æ‰¾åˆ°æŸäº›å½±å­ï¼ŒåŸå…ˆæ˜¯ç¬‘ï¼Œåæ¥æ˜¯è‹¦ï¼Œåˆ°æœ€åä¾¿æ˜¯æ²‰é»˜äº†ã€‚åŸå¢™ä¸Šçš„ä¸€å»ï¼Œè‡³å°Šå®å˜æˆäº†æ—è§‚è€…ï¼Œä»–å€Ÿç”¨å¤•é˜³æ­¦å£«çš„èº«ä»½å’Œè½¬ä¸–çš„ç´«éœå®Œæˆäº†ä»–å‘Šåˆ«çš„æ·±æƒ…ï¼Œäºæ˜¯ä»–çš„èƒŒå½±ï¼Œä»–çš„ç¦»å¼€ï¼Œå¯‚å¯æˆäº†â€œå¥½åƒä¸€æ¡ç‹—â€ã€‚\n\n------\n## **ä»–å¥½åƒä¸€æ¡ç‹—å‘€ï¼**\n\n-â€œé‚£ä¸ªäººçš„æ ·å­å¥½æ€ªå•Šâ€\n-â€œæˆ‘ä¹Ÿçœ‹åˆ°äº†ï¼Œä»–å¥½åƒæ¡ç‹—å•Šâ€\næ˜¯å‘€ï¼Œè‹±é›„çš„ç¦»å¼€ï¼Œç•™ä¸‹çš„æ°¸è¿œåªæ˜¯èƒŒå½±ï¼Œåªä¸è¿‡åœ¨è‡³å°Šå®è¿™é‡ŒåŠ ä¸Šäº†æ‚²å‰§è‰²å½©ï¼ŒåŠ ä¸Šäº†äººè‰°ä¸æ‹†çš„è¾›é…¸æ³ªï¼Œä»¥è‡³äºå¤šå°‘å¹´åæ‰æ˜ç™½äº†è‡³å°Šå®è½¬èº«ç¦»å¼€æœ‰å¤šéš¾ã€‚è‡³å°Šå®çš„ç»“å±€æ˜¯ä¸€ä¸ªç”·äººçš„æ‚²æ€†ä¸æ— å¥ˆã€‚\n\nè‡³å°Šå®ç”¨äº†æœˆå…‰å®ç›’æ¥å¯»æ‰¾500å¹´å‰çš„ç™½æ™¶æ™¶ï¼ŒåŒæ—¶é‡åˆ°äº†åœ¨å¥¹çœ‹æ¥ï¼Œä»–æ˜¯å¥¹çš„å‘½ä¸­æ³¨å®šçš„ç´«éœä»™å­ï¼Œç›´åˆ°åæ¥ç‰›é­”ç‹çš„å‡ºç°ï¼Œå¤ºèµ°äº†ç´«éœï¼Œå¤ºèµ°äº†ç™½æ™¶æ™¶ï¼Œå¤ºèµ°äº†è‡³å°Šå®å¾€æ—¥çš„å¿«ä¹ï¼Œä»–æ˜ç™½ä»–è¦å¤ºå›è¿™ä¸€åˆ‡ï¼Œå¯æ˜¯é¢å¯¹æˆå‰§èˆ¬çš„æœˆå…‰å®ç›’ï¼Œè‡³å°Šå®å¾—åˆ°çš„æ›´å¤šæ˜¯æ— åŠ›å’Œè‹ç™½ï¼Œé¢å¯¹è¿™äº›æ— æƒ…çš„ç°å®ï¼Œå¹»æƒ³ä¸€æ¬¡åˆä¸€æ¬¡åœ°ç ´ç­ã€‚ç›´åˆ°æœ€åçš„å…³å¤´ï¼Œè‡³å°Šå®ç»ˆäºé†’æ‚Ÿï¼Œé æœˆå…‰å®ç›’ä¸è¡Œï¼Œè‡³å°Šå®æ›´æ˜¯æ²¡æœ‰é‚£ä¸ªæœ¬äº‹ï¼Œåªæœ‰æˆä¸ºå­™æ‚Ÿç©ºï¼Œåªæœ‰æˆ´ä¸Šé‚£ä¸ªé‡‘åˆšåœˆï¼Œä»–æ‰æœ‰èƒ½åŠ›åŒç‰›é­”ç‹ä¸€è¾ƒé«˜ä¸‹ã€‚\n\nè¿™æ˜¯ä¸€ä¸ªæå¤§çš„è®½åˆºã€‚ä½ æƒ³è¦å¾—åˆ°å—ï¼Ÿå¥½ï¼Œé‚£ä¹ˆä½ å¿…é¡»å…ˆæ”¾å¼ƒè‡³å°Šå®çš„èº«ä»½ï¼Œä½ å¿…é¡»åšå‡ºé€‰æ‹©ï¼Œå¿…é¡»å¿å—æ— å°½çš„ç—›è‹¦ï¼Œä»–æƒ³è¦åŒ–è§£æ—¶é—´æ— å°½çš„ä»‡æ¨ï¼Œå°±å¿…é¡»æ”¾å¼ƒè‡ªå·±çš„æ„Ÿæƒ…ï¼Œä¸æ˜¯ä¸çˆ±ï¼Œè€Œæ˜¯å¤§å½»å¤§æ‚Ÿä¹‹åçš„å¤§çˆ±ï¼Œä»–å¿…éœ€åŒ–èº«ä¸ºå­™æ‚Ÿç©ºï¼Œå¸®åŠ©å”ä¸‰è—å–å¾—ç»ä¹¦ï¼ŒåŒ–è§£è¿™ä¸–é—´çš„æ¨ã€‚\n\né‚£ä¹ˆè‡³å°Šå®çš„æ”¾å¼ƒæ˜¯è‡ªè§‰è‡ªæ„¿çš„é†’æ‚Ÿå—ï¼Ÿä¸ï¼Œä»–å¹¶ä¸æ„¿æ„ï¼Œä½†æ˜¯ä»–å¿…é¡»æ‹¯æ•‘ç´«éœï¼Œå¿…é¡»åŒ–è§£äººé—´çš„æ¨ï¼Œä»–åˆ«æ— é€‰æ‹©ï¼Œä»–å¿…é¡»æˆ´ä¸Šç´§ç®å’’ã€‚è™½ç„¶æˆä¸ºäº†å­™æ‚Ÿç©ºï¼Œæˆäº†å¤§è‹±é›„ï¼Œä½†ä»–å¯¹è‡ªå·±çš„ç”Ÿå­˜çŠ¶æ€æåº¦ä¸æ»¡ã€‚æ‰€ä»¥åœ¨æœ€åï¼Œå­™æ‚Ÿç©ºå°†ä»–å¿ƒä¸­æ®‹å­˜çš„è‡³å°Šå®çš„å½±å­å¹»åŒ–ä½œä¸€ä½å¤•é˜³æ­¦å£«ï¼Œåœ¨å¯¹ç°å®ä¸–ç•Œå½»åº•å¤±æœ›åï¼Œåªèƒ½æ„é€ ä¸€ä¸ªè™šå¹»çš„æƒ³è±¡æ¥äº†å´è¿™æ¡©å¿ƒæ„¿ï¼Œå¹¶å€Ÿæ­¦å£«çš„å£ä¸­è¡¨è¾¾äº†å¯¹è‡ªå·±ç”Ÿå­˜çŠ¶æ€çš„ä¸æ»¡ï¼Œæ´»å¾—å¥½è±¡æ˜¯ä¸€æ¡ç‹—ä¸€æ ·ã€‚å”‰ï¼Œä¸€ä¸ªç”·äººçš„æ‚²æ€†å’Œæ— å¥ˆã€‚\n\n------\n## **é‚£å¥æ„ä¸­äººï¼Œæ»¡è¶³äº†å¤šå°‘äººçš„å°‘å¥³å¿ƒ**\n\nâ€œæˆ‘çŸ¥é“æœ‰ä¸€å¤©ï¼Œä»–ä¼šåœ¨ä¸€ä¸ªä¸‡ä¼—ç©ç›®çš„æƒ…å†µä¸‹å‡ºç°ï¼Œèº«æŠ«é‡‘ç”²åœ£è¡£ï¼Œè„šè¸ä¸ƒè‰²äº‘å½©æ¥å¨¶æˆ‘â€\nâ€œæˆ‘çš„æ„ä¸­äººæ˜¯ä¸ªç›–ä¸–è‹±é›„ï¼Œæœ‰ä¸€å¤©ä»–ä¼šè¸ç€äº‘å½©æ¥å¨¶æˆ‘â€\nè¿™ä¸¤å¥åˆ†åˆ«æ˜¯ç´«éœåœ¨ç‰›é­”ç‹å¨¶å¥¹å‰çš„æ™šä¸Šå’Œæ­»å‰å¯¹å­™æ‚Ÿç©ºè¯´çš„ï¼Œå¤šä¹ˆç»å…¸çš„å°è¯ï¼Œä»¥è‡³äºç°åœ¨å¤šå°‘äººè¿˜å¹»æƒ³ç€è‡ªå·±çš„æ„ä¸­äººã€‚\n\nè¿›å…¥è‡³å°Šå®å†…å¿ƒçš„åªæœ‰ä¸¤ä¸ªå¥³äººï¼Œä¸€ä¸ªæ˜¯ç™½æ™¶æ™¶ï¼Œä¸€ä¸ªæ˜¯ç´«éœï¼Œç™½æ™¶æ™¶é—®çš„æ˜¯â€œä»–æœ€å–œæ¬¢çš„äººæ˜¯ä¸æ˜¯æˆ‘â€ï¼Œç´«éœé—®çš„æ˜¯â€œä»–è·Ÿä»–çš„å¨˜å­æ˜¯ä¸æ˜¯å¾ˆæ©çˆ±å‘€ï¼Ÿâ€ï¼Œç™½æ™¶æ™¶çš„çˆ±æ˜¯ä¸€ç§ç´¢æ±‚çš„çˆ±ï¼Œè€Œç´«éœçš„çˆ±åˆ™æ˜¯æ— æ€¨æ— æ‚”çš„ã€‚\n\næ‰€ä»¥æœ€ç»ˆè‡³å°Šå®å›æ¥äº†ï¼Œåœ¨åŒ–èº«ä¸ºå­™æ‚Ÿç©ºä¹‹åï¼Œèº«æŠ«é‡‘ç”²åœ£è¡£ï¼Œè„šè¸ä¸ƒè‰²äº‘å½©è€Œæ¥ï¼Œä»–å®ç°äº†ç´«éœçš„æ¢¦æƒ³ï¼Œåªä¸è¿‡åŠ äº†ä¸€å±‚æ©é¥°ä¸ç‰µå¼ºã€‚\n\nä»ç°å¦‚ä»Šè¿™ä¸ªè§’åº¦åæ€ç´«éœçš„æ„ä¸­äººï¼Œæˆ‘æ˜¯ä¸å¤ªèµåŒçš„ï¼Œç«¥è¯æ¯•ç«Ÿæ˜¯ç«¥è¯ï¼Œæ­£æ˜¯è¿™ä¸ªç»å…¸çš„å¯¹ç™½ï¼Œè®©å¤šå°‘äººæ´»åœ¨è‡ªå·±çš„æƒ³è±¡ä¸­ï¼Œæˆ‘ä»¬éƒ½æ¸´æœ›å¯¹æ–¹æ˜¯ä¸ªâ€œæ„ä¸­äººâ€çš„å½¢è±¡ï¼Œå¯æ˜¯æˆ‘ä»¬å´å¿½ç•¥ä¹ä¸€ä¸ªâ€ç­‰ä»·â€œçš„è§‚å¿µï¼Œä½ å‡­ä»€ä¹ˆæ‹¥æœ‰ä½ çš„â€æ„ä¸­äººâ€œï¼Œä½ é…å¾—ä¸Šå—ï¼Ÿè¿™ä¸ä»…è®©æˆ‘æƒ³èµ·äº†å¦å¤–ä¸€ä¸ªå‘½é¢˜ï¼šâ€œä¸è¦å»ç¾¡æ…•é‚£äº›æ•£å‘å…‰èŠ’çš„æˆåŠŸè€…ï¼Œå› ä¸ºä½ ä¸çŸ¥é“ä»–èƒŒåä»˜å‡ºçš„åŠªåŠ›å’Œè‰°è¾›â€ï¼Œè¿™å…¶å®æ˜¯ä¸€ä¸ªé“ç†ï¼Œå¦‚æœä½ ä»…ä»…æ˜¯åœç•™åœ¨å¹»æƒ³å’Œè®¡åˆ’çš„å±‚é¢ï¼Œé‚£ä¹ˆä½ æ°¸è¿œå¾—ä¸åˆ°ä½ çš„â€æ„ä¸­äººâ€œã€‚\n\n-----\n## **æˆ‘çŒœä¸­äº†å¼€å¤´ï¼Œå¯æ˜¯æˆ‘çŒœä¸ç€è¿™ç»“å±€**\nç´«éœè¯´çŒœå¾—åˆ°å¼€å§‹ï¼Œå´çŒœä¸é€è¿™ç»“å±€ã€‚å¤§çº¦ç›´åˆ°æœ€åï¼Œå¥¹ä¹Ÿæ²¡èƒ½æ˜ç™½ã€æ²¡èƒ½ç†è§£è‡³å°Šå®çš„è‹¦å¿ƒã€‚åˆæˆ–è€…è¯´ï¼Œæ˜¯è‡³å°Šå®ä»æ¥ä¹Ÿæœªèƒ½çœŸæ­£äº†è§£å¥¹çš„å¿ƒæ„ã€‚æˆ‘æ›¾ç»ä»¥ä¸ºï¼Œæ­»å»çš„ç´«éœæ˜¯æœ€å¯æ€œçš„è§’è‰²ã€‚å¯æ˜¯ï¼Œè‡³å°Šå®åˆä½•å°ä¸å¯æ€œå‘¢ï¼Œä»–ç”šè‡³ï¼Œè¿ä¼¤å¿ƒçš„æƒåˆ©ä¹Ÿæ²¡æœ‰äº†ã€‚åœ¨ç´«éœæ­»å»çš„ä¸€ç¬é—´ï¼Œä»–çš„å¿ƒä¹Ÿå·²ç»è·Ÿç€æ­»å»äº†ã€‚åœ¨ä»–ä½™ä¸‹çš„äººç”Ÿé‡Œï¼Œå†ä¹Ÿä¸ä¼šæœ‰æ¬¢ç¬‘ã€å¿«ä¹ï¼Œå†ä¹Ÿä¸ä¼šæœ‰é‚£æ ·ä¸€ä¸ªå¯ä»¥åœ¨ä»–å¿ƒé‡Œæµä¸‹çœ¼æ³ªçš„å¥³å­©å­ã€‚å°±ç®—å–å›è¥¿ç»åˆèƒ½å¦‚ä½•ï¼Œå¿ƒçˆ±çš„äººå†ä¹Ÿä¼šä¸æ¥äº†ã€‚å°±ç®—æˆä½›åˆèƒ½å¦‚ä½•ï¼Œæ²¡æœ‰äº†ä½ ï¼Œæ•´ä¸ªä¸–ç•Œå¯¹æˆ‘æ¥è¯´éƒ½æ¯«æ— æ„ä¹‰ã€‚\n\n----\n## **ã€Šå¤§è¯ã€‹æŠŠé—æ†¾å’Œéš¾é¢˜æŠ›ç»™äº†æ—¶é—´**\n\nåˆä¸€æ¬¡çš„æ—¶ç©ºç©¿æ¢­åï¼Œé¢å¯¹åŸå¤´ç”·å¥³ï¼Œå­™æ‚Ÿç©ºé™„èº«å¤•é˜³æ­¦å£«ï¼Œç»™å‡ºæ— æ•°äººçƒ­æ³ªçºµæ¨ªï¼Œå†…å¿ƒä¸­æœŸç›¼çš„æœ€åç­”æ¡ˆã€‚ \næ²¡æœ‰å¤±å»è¿‡ï¼Œä¹Ÿæ°¸è¿œä¸èƒ½æ˜ç™½å¾—åˆ°çš„å¿«ä¹ã€‚ \né™„èº«åçš„å­™æ‚Ÿç©ºå‘è‡ªå†…å¿ƒè‚ºè…‘åœ°ç»™äº†å¥³å­ä¸€è®°æ·±æ·±é•¿å»ï¼Œè¿™ä¸€å»ç©¿è¶Šåœ°è€å¤©è’ï¼Œä¸å†ç›¸ä¿¡è‡ªæ¬ºæ¬ºäººçš„ä¸€ä¸‡å¹´ï¼Œä»–é‚£èˆ¬è¯­æ°”åšå†³åœ°è¯´å‡ºäº†é‚£ä¸‰ä¸ªå­—ã€‚ \nå…ˆå‰æ‹’ä¸è®©æ­¥çš„å¤•é˜³æ­¦å£«ï¼Œæ‹¥æŠ±ç€çˆ±äººå¹¸ç¦é™¶é†‰ã€‚ \nè½¬èº«è¿œå»çš„å­™æ‚Ÿç©ºäº†å´å°˜ç¼˜å¿ƒäº‹ï¼Œæ¶ˆå¤±åœ¨å¤§æ¼ é»„æ²™å°½å¤´ã€‚ \nåªæ˜¯æ¯æ¬¡åœ¨ç´«éœè¢«åˆºä¸­æˆ–è€…å­™æ‚Ÿç©ºæ¾æ‰‹çš„ç¬é—´ï¼Œè¿˜æ˜¯ä¼šå¿ƒæ½®å¦‚æ°´ç”šè‡³æ½¸ç„¶æ³ªä¸‹ã€‚ ã€€ \nåå¹´å¤§è¯ï¼Œä¸€ç¾¤äººå›´åç€è§‚çœ‹ã€Šå¤§è¯è¥¿æ¸¸ã€‹çš„ç‹‚çƒ­æ—¶ä»£è¿‡å»äº†ï¼Œå¿ƒåº•ä¿å­˜çš„æ³ªæ°´ä¹Ÿæ…¢æ…¢å°˜å°ç›´è‡³æ•…äº‹ç»ˆç»“ã€‚æ¯«æ— æ‹˜æŸçš„å¼€æ€€å¤§ç¬‘æ¸æ¸æ²¦ä¸ºä¸€ä¸ªäººçš„ç‹‚æ¬¢ï¼Œéš¾åŠ æ©é¥°çš„å¿ƒåº•è‹å‡‰é€æ¸æˆäº†äººç”Ÿé‡æ‹…\n\n---\n## **å¦‚ä»Šçš„ä½ ï¼Œä½•å»ä½•ä»**\n\nâ€œå¦‚ä»Šçš„ä½ ï¼Œä½•å»ä½•ä»ï¼Ÿâ€\nâ€œå¯¹å‘€ï¼Œä½•å»ä½•ä»â€\n\nçœŸçš„ç¾¡æ…•è‡³å°Šå®æœ€åˆä¸ºäº†è¥æ•‘ç™½æ™¶æ™¶ï¼Œå€Ÿç”¨å¤–åŠ›ï¼Œä½¿ç”¨æœˆå…‰å®ç›’ç©¿è¶Šå›500å¹´å‰ï¼Œä¸ºäº†è§£æ•‘ç´«éœï¼Œæˆ´ä¸Šç´§ç®å’’ã€‚\n\nè€Œä½ å‘¢ï¼Ÿæ²¡æœ‰ç›®æ ‡ï¼Œä½ ä¾¿æ˜¯ä¸€ä¸ªæ¸¸è¡çš„çµé­‚ã€‚\n\n---\n## **åŠ é•¿ç‰ˆåŠ äº†ä»€ä¹ˆ**\n1ï¼šç´«éœåˆšå‡ºç°æ—¶åœ¨æ²™æ¼ å’Œé›ªè›¤ç²¾ï¼Œå­”é›€ç‹çš„å¯¹è¯ä»¥åŠ ä»–ä»¬çš„æ‹”å‰‘æŠ¢å©šï¼Œä¸å½±ç‰‡ä¸­ç´«éœå’Œè‡³å°Šå®åœ¨ ç‰›é­”ç‹å©šç¤¼ä¸Šé‡è§æ—¶é›ªè›¤ç²¾ï¼Œå­”é›€ç‹å’Œåå¯¹ç»“å©šä½œäº†å‘¼åº”ã€‚\n\n2ï¼šçº¦å¥½äºŒæ›´ç›¸è§ï¼ŒåŸç‰ˆæ˜¯ç‰›å¤«äººå‡ºç° ï¼Œç„¶åæ˜¯è‡³å°Šå®ç›´æ¥è¢«çŒªå…«æˆ’å’Œæ²™å¸ˆå¼Ÿæ‹‰å»æ•‘å¸ˆçˆ¶ï¼ŒåŠ é•¿ç‰ˆä¸­å…ˆæ˜¯ç‰›å¤«äººå‡ºç°ï¼Œç„¶åç‰›é­”ç‹ï¼Œç„¶åè‡³å°Šå®\n\n3ï¼šç‰›é­”ç‹å©šç¤¼æ—¶çŒªå…«æˆ’å’Œæ²™åƒ§åœ¨å°å¦–å †é‡Œè·Ÿä»–ä»¬â€œæ‰“æˆä¸€ç‰‡â€\n\n4ï¼šè‡³å°Šå®è¢«é’éœææ™•ç¬¬äºŒæ¬¡ä¹‹åï¼Œæ—©ä¸Šè·Ÿç´«éœè¯´çš„é‚£é€šè¯â€œä½ è¦è®©æˆ‘æ‹¿ç‚¹ä¿¡ç‰©ç»™ä»–çœ‹, ä½ æœ‰ä»€ä¹ˆé¡¹é“¾å•Š,é¦–é¥°å•Š,é‡‘é“¶ç å®å•Š,æœˆå…‰å®ç›’å•Šä»€ä¹ˆçš„â€¦â€¦â€åŸç‰ˆçš„è¿™æ®µå£°éŸ³ä¸æ˜¯çŸ³ç­ç‘œæ‰€é…ã€‚æ–°ç‰ˆä¸­ï¼Œè¿™æ®µå£°éŸ³æ˜¯é‡æ–°é…éŸ³ï¼Œæ¢ä¸Šäº†çŸ³ç­ç‘œçš„å£°éŸ³ã€‚\n\n5ï¼š2Kç”»é¢çš„ä¿®å¤\n\n---\n<h2>ä¸€åˆ‡çš„é—¹é—¹å“„å“„ï¼Œåªæ˜¯ä»–åœ¨æ°´å¸˜æ´èº²é¿é£æ²™é‚£æ™šåšçš„ä¸€ä¸ªæ¢¦\n\n\n----\n\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n","tags":["éšæ‰‹è®°"],"categories":["éšæ‰‹è®°"]},{"title":"2016å¹´ç»ˆæ€»ç»“-åˆ«äº†é’æ˜¥ä¸æµå¹´ï¼Œé‡è§ä¸‹ä¸€ä¸ªè‡ªå·±","url":"/2016/12/21/éšæ‰‹è®°/2016å¹´ç»ˆæ€»ç»“-åˆ«äº†é’æ˜¥ä¸æµå¹´ï¼Œé‡è§ä¸‹ä¸€ä¸ªè‡ªå·±/","content":"\n<font size=3>å¦‚æœè¯´å²æœˆæ˜¯å¹´è½®ï¼Œæˆ‘ä»¬ä¾¿æ˜¯æ¨è¡Œè€…ï¼Œå¦‚æœè¯´æˆé•¿æ˜¯ä¸€åœºåä¸½çš„èœ•å˜ï¼Œæˆ‘ä»¬ä¾¿æ˜¯é¢†èˆè€…ã€‚ä¸€è·¯èµ°æ¥ï¼Œå¤ªå¤šä¸æ˜“ï¼Œå‘Šåˆ«é’æ˜¥çš„å¹´å°‘è½»ç‹‚ï¼Œæˆ‘ä»¬æˆäº†å²æœˆé‡Œè¢«ç£¨å¹³çš„æ£±è§’ï¼Œé™é™çš„å®ˆåœ¨å±äºè‡ªå·±çš„ä¸€äº©ä¸‰åˆ†åœ°ã€‚</font>\n\n\n<!--More-->\n\n\n## **2016-æ—¶é—´æ˜¯é•¿äº†è„šçš„å¦–æ€ªï¼Œè·‘çš„é£å¿«**\n\n&nbsp;&nbsp;&nbsp;&nbsp;å››å¹´æ—¶å…‰ï¼ŒåŒ†åŒ†è€Œè¿‡ï¼Œæ²ˆé˜³å æ®äº†æˆ‘23å²ä¹‹å‰çš„å¤ªå¤šç¬¬ä¸€æ¬¡ï¼Œç¬¬ä¸€æ¬¡ä¸€ä¸ªäººä¸€åŒ…è¡Œæï¼Œç¬¬ä¸€æ¬¡21ä¸ªå°æ—¶çš„ç¡¬åº§ï¼Œç¬¬ä¸€æ¬¡ååœ°é“ï¼Œç¬¬ä¸€æ¬¡è°ˆæ‹çˆ±ï¼Œç¬¬ä¸€æ¬¡åˆ†æ‰‹ï¼Œç¬¬ä¸€æ¬¡æ—…è¡Œï¼Œç¬¬ä¸€æ¬¡åæ‘©å¤©è½®ï¼Œç¬¬ä¸€æ¬¡åƒæ£‰èŠ±ç³–ï¼Œç¬¬ä¸€æ¬¡çœ‹ç”µå½±ï¼Œç¬¬ä¸€æ¬¡æ¥è§¦ç”µè„‘ï¼Œç¬¬ä¸€æ¬¡......\n&nbsp;&nbsp;&nbsp;&nbsp;æ—¶é—´æ˜¯é•¿äº†è„šçš„å¦–æ€ªï¼Œè·‘çš„é£å¿«ï¼Œåªæ˜¯å¥½åƒåæ¥æˆ‘ä»¬éƒ½ç¦»å¼€ï¼Œå„è‡ªç”Ÿæ´»åœ¨å–§åš£æœªæ¥ï¼Œå½“æ—¶çš„é—æ†¾åœ¨å›å¿†è‚†è™çš„æŸäº›æ—¶æ®µï¼Œé‡æ–°æ‰“å¼€ï¼Œåˆå¥½è±¡æˆ‘ä»¬åŒæ—¶éƒ½åœ¨ã€‚\n&nbsp;&nbsp;&nbsp;&nbsp;æœ‰äººè¯´ï¼Œè°ˆè¿‡æ‹çˆ±ï¼Œåˆ†è¿‡æ‰‹ï¼ŒæŒ‚è¿‡ç§‘ï¼Œæ‹¿è¿‡å¥–å­¦é‡‘ï¼Œå½“è¿‡å­¦ç”Ÿå¹²éƒ¨çš„å¤§å­¦æ‰æ˜¯å®Œç¾çš„ï¼Œé‚£ä¹ˆæˆ‘æƒ³æˆ‘è¿˜æ˜¯æ¯”è¾ƒå¹¸è¿çš„ï¼Œå›é¡¾æˆ‘çš„å¤§å­¦ç”Ÿæ´»ï¼Œé™¤äº†ä¸¤ä»¶æˆ‘æåŠ›æƒ³åšçš„äº‹æƒ…æ²¡æœ‰å®Œæˆä¹‹å¤–ï¼Œç»å†äº†å¤ªå¤šï¼Œè°ˆè¿‡æ‹çˆ±ï¼Œåˆ†è¿‡æ‰‹ï¼Œå½“è¿‡å­¦ç”Ÿå¹²éƒ¨ï¼Œæ‹¿è¿‡å¥–å­¦é‡‘ï¼Œå‚åŠ è¿‡å„ç§å¿—æ„¿æ´»åŠ¨ï¼Œä¹Ÿåšè¿‡æ ¡å›­ä»£ç†ï¼Œè¢«å‘è¿‡ï¼Œè¢«éª—è¿‡ï¼Œä¹Ÿå¹²è¿‡å…¼èŒï¼Œåšè¿‡å¤–åŒ…ï¼Œé€è¿‡å¤–å–ï¼Œå‘è¿‡ä¼ å•ï¼Œåœ¨è¿™æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œè®¤è¯†äº†ä¸å°‘äººï¼Œè§è¿‡ä¸å°‘äº‹ï¼Œçœ‹æ˜ç™½äº†ä¸å°‘çš„ç¤¾ä¼šé“ç†ï¼Œçœ‹æ¸…äº†å¤šå°‘äººçš„è™šæƒ…å‡æ„ï¼Œæ„Ÿè°¢é‚£ä¸€è·¯è®©æˆ‘ç»å†æˆé•¿çš„äººã€‚  \n&nbsp;&nbsp;&nbsp;&nbsp;å¤§ä¸€æ˜¯æˆ‘å¤§å­¦ç”Ÿæ´»é‡Œæœ€å¿«ä¹çš„ä¸€å¹´ï¼Œé‚£æ—¶çš„æˆ‘ä»¬å¾ˆå•çº¯ã€‚åªæ˜¯åæ¥ï¼Œå¤§å®¶éƒ½å˜äº†ã€‚\n\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20161220223409601)\n\n-----\n\n## **2016-å‰‘æœªé…å¥½ï¼Œå·²å‡ºæ±Ÿæ¹–ï¼Œæ¥ä¸€åœºè¯´èµ°å°±èµ°çš„åŒ—æ¼‚**\n&nbsp;&nbsp;&nbsp;&nbsp;è¯¥åˆ°æ¥çš„è¿˜æ˜¯ä¼šåˆ°æ¥ï¼Œè™½ç„¶å¯¹äºå·¥ä½œæˆ‘æ˜¯åšå¥½äº†å‡†å¤‡ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ç‚¹æªæ‰‹ä¸åŠã€‚\n\n- ä¸ƒæœˆï¼Œåˆ«äº†æµå¹´\n&nbsp;&nbsp;&nbsp;&nbsp;é‚£æ˜¯ä¸ƒæœˆï¼Œæˆ‘çš„å¿ƒæƒ…è¿«åˆ‡çš„åƒç«è¾£è¾£çš„å¤ªé˜³ï¼Œæ‹‰ç€è¡Œæï¼Œä»å¤§å­¦çš„é—¨å‰ç¦»å¼€ï¼Œæ²¡æœ‰å›å¤´ï¼Œè™½ç„¶è¿™é‡Œæœ‰æˆ‘ç‰µæŒ‚çš„äººï¼Œæœ‰æˆ‘å¿µç€çš„äº‹ï¼Œä½†æˆ‘è¿˜æ˜¯æŠŠæ›´å¤šçš„å¸Œæœ›å¯„æ‰˜åœ¨å……æ»¡é­”æ€§çš„é¦–éƒ½ï¼Œå› ä¸ºæˆ‘ç›¸ä¿¡è¿™é‡Œæ˜¯æ¢¦ä¼šæ˜¯å¼€å§‹çš„åœ°æ–¹ï¼Œäºæ˜¯åœ¨æœ‹å‹çš„å¸®åŠ©ä¸‹ï¼Œæˆ‘å¼€å¯äº†æˆ‘çš„åŒ—æ¼‚ç”Ÿæ´»ã€‚\n\n- å¹¿è”è¾¾\n&nbsp;&nbsp;&nbsp;&nbsp;æˆ‘æ¥åŒ—äº¬çš„ç¬¬ä¸€å®¶å…¬å¸æ˜¯å¹¿è”è¾¾ï¼Œå»ºç­‘è¡Œä¸šå›½å†…ç®—æ˜¯é¾™å¤´è€å¤§äº†ï¼Œè™½ç„¶åœ¨äº’è”ç½‘è¡Œä¸šä¸æ˜¯å¤ªç‰›é€¼ï¼Œä½†å¯¹äºä¸€ä¸ªåˆå‡ºèŒ…åºçš„æˆ‘è¿˜æ˜¯å¤Ÿæˆ‘å­¦ä¹ å’Œç»å†äº†ï¼Œè€Œä¸”å‡‘å·§çš„æ˜¯å…¬å¸æ˜¯æˆ‘ä¸€ä¸ªå…«å‡ å¹´çš„æ ¡å‹åˆ›ç«‹çš„ï¼Œåªæ˜¯è¿™å’Œæˆ‘æ²¡æœ‰åŠæ¯›é’±å…³ç³»ï¼Œåœ¨é‚£çš„ä¸‰ä¸ªæœˆé‡Œï¼Œæˆ‘è¿ä¸ªäººå½±éƒ½æ²¡æœ‰è§è¿‡ã€‚\n&nbsp;&nbsp;&nbsp;&nbsp;åæ¥çš„åæ¥æˆ‘é€‰æ‹©äº†ç¦»å¼€ï¼Œä¸æ˜¯å…¬å¸ä¸å¥½ï¼Œä¸æ˜¯å¸¦æˆ‘çš„å¸ˆçˆ¶ä¸ä¼˜ç§€ï¼Œä¸æ˜¯åŒäº‹ä¸ç‰›é€¼ï¼Œåªæ˜¯æˆ‘æ„Ÿè§‰é‚£é‡Œä¸é€‚åˆæˆ‘ã€‚\n&nbsp;&nbsp;&nbsp;&nbsp;æˆ‘çš„å¸ˆçˆ¶æ˜¯é¡¹ç›®ç»„ç»„é•¿å§ï¼Œäººæœ‰ç‚¹å¨˜å¨˜è…”ï¼Œåˆ«äººéƒ½å«ä»–æ¢…æ¢…ï¼Œä½†æ˜¯å¯¹æˆ‘ä»¬ç‰¹åˆ«å¥½ï¼Œä»–æŠ€æœ¯ä¹Ÿååˆ†å‰å®³ï¼Œç¦»å¼€çš„æ—¶å€™å’Œå¸ˆçˆ¶èŠå¤©ï¼Œä»–è¯´åœ¨å…¬å¸æ˜¯P3å’ŒP4çš„æŠ€æœ¯åŒè®¤è¯ï¼Œæ˜¯ä¸€ä¸ªæŠ€æœ¯æ¶æ„å¸ˆï¼Œè‡ªå·±å¸¦ç€å›¢é˜Ÿå‡ ä¸ªæœˆä¸ºå…¬å¸å†™äº†ä¸€ä¸ªäº‘æµ‹è¯•å¹³å°ï¼Œç°åœ¨æ›´åˆ°3.xç‰ˆæœ¬äº†å§ã€‚æˆ‘ä¸ªäººæ˜¯ååˆ†ä½©æœæˆ‘å¸ˆçˆ¶çš„ï¼Œä¸ºäººä½è°ƒï¼ŒæŠ€æœ¯å¤Ÿå¼ºï¼Œè¿˜æœ‰å¥½äººç¼˜ã€‚\n&nbsp;&nbsp;&nbsp;&nbsp;åœ¨å…¬å¸çš„é‚£æ®µæ—¶å€™é‡Œï¼Œæˆ‘ä¸»è¦åšçš„æ˜¯ä¸€ä¸ªä»¥è¯¾é¢˜å½¢å¼å±•ç¤ºçš„æ•°æ®åˆ†æå¹³å°ï¼Œç”¨åˆ°çš„æŠ€æœ¯æ— éå°±æ˜¯å¤§å­¦é‡Œå­¦çš„é‚£äº›ï¼Œé‚£ä¸ªæ—¶å€™å’Œå¦å¤–ä¸€ä¸ªåŒäº‹è¿˜å¹ç‰›é€¼è¯´å’±ä¹Ÿæ˜¯æ¶æ„å¸ˆäº†ï¼Œè¿™ä»…ä»…æ˜¯å› ä¸ºè‡ªå·±ç”»äº†ä¸ªæ°´çš„ä¸€é€¼çš„å›¾\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20161220230511202?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\n&nbsp;&nbsp;&nbsp;&nbsp;å“ˆå“ˆï¼Œå¦‚æœè¿™å¹…å›¾å‡ºè‡ªæ¶æ„å¸ˆä¹‹æ‰‹ï¼Œå°±æ˜¯ç³»ç»Ÿæ¶æ„äº†ï¼Œå¯æ˜¯å‡ºè‡ªæˆ‘ä»¬è¿™ç­‰æ¯›å°å­ä¹‹æ‰‹å°±æ˜¯é—¹ç€ç©äº†å§ã€‚å°±å¥½æ¯”ä»¥å›½å®¶çš„åä¹‰å»æŒ–å¢“ï¼Œå°±æ˜¯è€ƒå¤ï¼Œä»¥ä¸ªäººåä¹‰å»æŒ–å¢“å°±æ˜¯ç›—å¢“äº†ã€‚\n\n- æ˜Œå¹³çº¿ï¼Œç…ç†¬\n&nbsp;&nbsp;&nbsp;&nbsp;è¥¿äºŒæ——æ˜¯ä¸­å›½æœ€å µå¾—ä¸€ä¸ªåœ°é“ç«™äº†ï¼Œå¤§å®¶éƒ½è¯´åæ‘å‚è·¯å µè½¦ååˆ†é’Ÿï¼Œä¸­å›½äº’è”ç½‘ç»æµåœæ»2å°æ—¶ã€‚\n&nbsp;&nbsp;&nbsp;&nbsp;æ˜Œå¹³çº¿æ˜¯åŒ—æ¼‚äººçš„èšé›†åœ°äº†ï¼Œä¸æ˜¯å› ä¸ºåˆ«çš„ï¼Œæ˜¯å› ä¸ºè¿™æ¡çº¿è·¯ä¸Šçš„æˆ¿ç§Ÿä¾¿å®œ ï¼Œé‚£ä¸ªæ—¶å€™æˆ‘å°±ç›˜è¸åœ¨æ²™æ²³é«˜æ•™å›­æ—è¾¹çš„ä¸œæ²™å±¯æ‘é‡Œï¼Œæ¯æœˆ800å…ƒçš„æˆ¿ç§Ÿè¿˜æ˜¯è´Ÿæ‹…çš„èµ·çš„ï¼Œé™¤äº†äº¤é€šä¸ä¾¿ä¹‹å¤–ï¼Œä¸€åˆ‡è¿˜éƒ½å¯ä»¥æ¥å—ï¼Œæ¯•ç«Ÿä½ æ˜¯åœ¨åŒ—æ¼‚ã€‚\n\n----\n## **2016-åˆ«äº†æµå¹´ï¼Œæ˜¯ç°åœ¨çš„æˆ‘**\n&nbsp;&nbsp;&nbsp;&nbsp;ä¹æœˆæœ«æˆ‘é¢è¯•äº†ç°åœ¨æ‰€åœ¨çš„å…¬å¸ï¼Œç¦»å¼€äº†å¹¿è”è¾¾ï¼Œä¸æ˜¯å› ä¸ºå®ƒä¸ä¼˜ç§€ï¼Œå®ƒä¸å¥½ï¼Œåªæ˜¯å› ä¸ºé‚£é‡Œç°åœ¨è¿˜ä¸é€‚åˆæˆ‘ï¼Œåœ¨æˆ‘çš„æ£±è§’è¢«ç£¨å¹³ä¹‹å‰ï¼Œæˆ‘æƒ³å‡ºå»é—¯ä¸€é—¯ã€‚\n&nbsp;&nbsp;&nbsp;&nbsp;å¯èƒ½æ˜¯æˆ‘æ‰€åœ¨éƒ¨é—¨çš„åŸå› ï¼Œæˆ‘è§‰å¾—ç‰¹åˆ«æ‡’æ•£ï¼Œæ„Ÿè§‰å¤§å®¶éƒ½æ˜¯åœ¨æ··æ—¥å­ï¼Œæ¯å¤©æ”¹é‚£ä¹ˆç‚¹bugï¼Œæ¯å¤©æ›´æ–°ä¸€ç‚¹å°åŠŸèƒ½ï¼Œæˆ–è€…è¿™å°±æ˜¯å¤§å…¬å¸çš„å°´å°¬ï¼Œæˆ–è€…è¯´è½¬å‹ä¹‹ä¸­çš„å…¬å¸çš„çŸ­æ¿å§ï¼Œå¤§å®¶éƒ½æ²‰æµ¸åœ¨ä»¥å‰çš„è¾‰ç…Œä¹‹ä¸­ï¼Œæ²¡æœ‰åˆ›é€ åŠ›ï¼Œæ²¡æœ‰æ–°å¥‡çš„æƒ³æ³•ï¼Œæ²¡æœ‰äº¤æµçš„å†²åŠ¨ï¼Œæ²¡æœ‰é‚£ç§å¹²åŠ²ã€‚äºæ˜¯æˆ‘é€‰æ‹©äº†ç¦»å¼€ï¼Œæˆ‘æƒ³å…ˆè®©æˆ‘å»ç»å†ä¸€ç•ªæˆ‘æƒ³è¦çš„å·¥ä½œä¸ç”Ÿæ´»ï¼Œç­‰æˆ‘ç´¯äº†ï¼Œè¯´ä¸å®šæˆ‘å°±ä¼šæƒ³å¿µè¿™ç§çŠ¶æ€äº†ã€‚\n&nbsp;&nbsp;&nbsp;&nbsp;ç°åœ¨æ‰€åœ¨çš„æ˜¯ä¸€ä¸ªåˆ›ä¸šå…¬å¸ï¼Œåƒæˆ‘æƒ³è±¡ä¸­ä¸€æ ·ï¼Œå¤§å®¶çªåœ¨ä¸€ä¸ªä¸å¤§çš„åŠå…¬å¸ï¼Œäº¤æµä¸åˆä½œï¼Œä¸ºäº†æ¢¦æƒ³ä¸€èµ·åŠªåŠ›ç€ï¼Œå¾ˆå¼€å¿ƒã€‚\n&nbsp;&nbsp;&nbsp;&nbsp;åœ¨è¿™é‡Œæˆ‘æ¥è§¦åˆ°äº†æ›´å¤šçŸ¥è¯†ï¼ŒæŠ€æœ¯çš„ï¼Œåšäººçš„ï¼Œäº¤æµçš„ï¼Œè‡³ä»Šæˆ‘è„‘æµ·ä¸­è¿˜æ¸…æ™°çš„è®°ç€é‚£å¤©èµµæ€»çš„ä¸€å¥è¯ï¼šè¯»ä¹¦è¦æœ‰æ”¶è·ï¼Œè‡³å°‘è¦æ¶¨æ°”åœºã€‚\n&nbsp;&nbsp;&nbsp;&nbsp;æ–°çš„ç¯å¢ƒé‡Œæˆ‘æ¥è§¦å­¦ä¹ äº†Dockerï¼ŒELKï¼Œé‡æ–°å­¦ä¹ äº†ä¸€äº›æœºå™¨å­¦ä¹ çš„ç®—æ³•çŸ¥è¯†ã€‚äºæ˜¯åœ¨æˆ‘çš„CSDNåšå®¢ä¸­åˆ›å»ºäº†ä¸¤ä¸ªæŠ€æœ¯ä¸“æ ï¼Œç”±äºåˆšåˆšæ¥è§¦ï¼Œå†™çš„ä¹Ÿä¸å¤Ÿæ·±å…¥ï¼Œä¸è¿‡æˆ‘ä¼šåŠªåŠ›çš„ã€‚\n&nbsp;&nbsp;&nbsp;&nbsp;Dockeræ±Ÿæ¹–ï¼šhttp://blog.csdn.net/column/details/13159.html\n &nbsp;&nbsp;&nbsp;&nbsp;ELKä»å…¥é—¨åˆ°æ”¾å¼ƒï¼šhttp://blog.csdn.net/column/details/13079.html\n \n&nbsp;&nbsp;&nbsp;&nbsp;è®¤è®¤çœŸçœŸç»å†æ‰èƒ½å¥½å¥½æˆé•¿ã€‚\n\n---\n## **2016-æˆ‘åœ¨CSDNçš„æ”¶è·**\n - é²å¤§ç¥\n&nbsp;&nbsp;&nbsp;&nbsp;å¼€å§‹åœ¨CSDNä¸Šå†™åšå®¢æ˜¯å¤§ä¸€çš„æ—¶å€™ï¼Œæ˜¯ä¸€ä¸ªç‰›é€¼çš„å­¦é•¿å¸¦æˆ‘èµ°ä¸Šäº†è¿™æ¡\"ä¸å½’è·¯\"ï¼Œè°¢è°¢<a href=\"http://blog.csdn.net/baolibin528\">é²å¤§ç¥</a>è¿™ä¸€è·¯çš„æŒ‡å¯¼ä¸ä¼ æˆï¼Œä¸€ç›´ä»¥æ¥ï¼Œä»–éƒ½æ˜¯æˆ‘çš„æ¦œæ ·ã€‚æˆ‘ä¹ŸåŠªåŠ›èµ¶ä¸Šä»–ï¼Œåªå¯æƒœçœ‹åˆ°çš„æ°¸è¿œéƒ½æ˜¯èƒŒå½±ã€‚\n\n- æ¢¦å§å§\n&nbsp;&nbsp;&nbsp;&nbsp;å…«æœˆä»½çš„æ—¶å€™å¶ç„¶çš„æœºä¼šè®¤è¯†æ¢¦å§å§ï¼Œåšäº†åšä¹ï¼Œåæ¥ä¹Ÿç”³è¯·å¹¶é€šè¿‡äº†CSDNåšå®¢ä¸“å®¶ã€‚\n\n- ç»“è¯†æŠ€æœ¯çˆ±å¥½è€…\n&nbsp;&nbsp;&nbsp;&nbsp;å…¶å®ç›¸æ¯”è¿™äº›æ›´é‡è¦çš„æ˜¯é€šè¿‡CSDNæ‰€è®¤è¯†çš„æ¯ä¸€ä¸ªæŠ€æœ¯çˆ±å¥½è€…ï¼Œå¯ä»¥è¯´CSDNæ˜¯å›½å†…çš„ç¨‹åºå‘˜çš„ç¤¾äº¤å¹³å°äº†ã€‚æ„Ÿè§‰é‚£äº›ç»™æˆ‘ç•™è¨€æé—®æˆ‘çš„äººï¼Œå¯èƒ½æœ‰äº›ç–‘é—®è¿˜æ˜¯æ²¡æœ‰å¸®ä½ ä»¬è§£å†³ï¼Œåªæ˜¯æˆ‘ä¸ªäººèƒ½åŠ›æœ‰é™ï¼Œä¸åƒéƒ­ç¥ï¼Œé¸¿æ´‹å¤§ç¥æŠ€æœ¯åŠŸåº•æ·±åšã€‚åœ¨è¿™ä¸ªå¹³å°ä¹‹ä¸Šï¼Œæˆ‘ä¹Ÿè®¤è¯†åˆ°äº†è‡ªå·±çš„è®¸å¤šä¸è¶³å’ŒæŠ€æœ¯ç¼ºç‚¹ï¼Œåœ¨é˜…è¯»åšå®¢çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿå­¦åˆ°äº†ä¸å°‘ä¸œè¥¿ã€‚\n\n&nbsp;&nbsp;&nbsp;&nbsp;è°¢è°¢ä½ ä¸€è·¯é™ªæˆ‘æˆé•¿ï¼Œä½ è‹¥ä¸ç¦»ï¼Œæˆ‘å®šä¸å¼ƒã€‚\n\n----\n## **2016-å¼€å§‹commitæˆ‘çš„github**\n&nbsp;&nbsp;&nbsp;&nbsp;æœ‰äººè¯´å¼€æºåƒåœ¾ï¼Œæœ‰äººè¯´å¼€æºç¼©å‡äº†å¼€å‘çš„æˆæœ¬å’Œæ—¶é—´ï¼Œä¸ç®¡æ€æ ·ï¼Œå¼€æºæ˜¯ä¸€ç§è¶‹åŠ¿ï¼Œè€Œä¸”åŠ¿å¤´ä¸ä¼šå‡å¼±ï¼Œå¾ˆè£å¹¸æˆ‘ä¹ŸæŠ•å…¥äº†å¼€æºçš„å¤§å†›ï¼Œå³ä½¿ç°åœ¨æˆ‘è¿˜æ˜¯ä¸€ä¸ªè¼èšã€‚\n&nbsp;&nbsp;&nbsp;&nbsp;æˆ‘çš„githubï¼šhttps://github.com/thinkgamer\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20161221000236962?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\n\n----\n## **2016-æ‚ä¹±æ— ç« **\n&nbsp;&nbsp;&nbsp;&nbsp;è¿™ä¸€å¹´ï¼Œä»ä¸€ä¸ªåˆå‡ºèŒ…åºçš„è¼èšä¸€æ­¥æ­¥æˆé•¿ï¼Œä¸€ä¸ªä¸ªç»å†ï¼Œæˆ‘ç»™äº¤äº†ä¸€ä»½70åˆ†çš„ç­”å·ï¼Œæˆ‘æ²¡æœ‰è®©æˆ‘çš„çˆ¶æ¯å’Œäº²äººå¤±æœ›ï¼Œæˆ‘æ²¡æœ‰è®©æˆ‘çš„è€å¸ˆå¤±æœ›ï¼Œæˆ‘æ²¡æœ‰è®©æˆ‘å–œæ¬¢çš„äººå¤±æœ›ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰è®©æ›¾ç»çœ‹ä¸èµ·æˆ‘çš„äººå¤±æœ›ï¼Œåªæ˜¯æˆ‘è®©è‡ªå·±å¤±æœ›äº†ã€‚\n&nbsp;&nbsp;&nbsp;&nbsp;æœ‰äº›ä¸œè¥¿æˆ‘æ²¡æœ‰å»äº‰å–ï¼Œæœ‰äº›æœºä¼šæˆ‘æ²¡æœ‰æŠŠæ¡ï¼Œæœ‰äº›å†²åŠ¨æˆ‘å¤±äº†æ§ã€‚ä½†æ­£æ˜¯è¿™äº›å®Œç¾çš„ä¸å®Œç¾çš„ï¼Œæ‰è®©ä½ æœ‰æ›´å¤§çš„åŠ²å¤´å»å‰è¿›ã€‚\n\n----\n## **2017-ä¸‹ä¸€ä¸ªè‡ªå·±**\n&nbsp;&nbsp;&nbsp;&nbsp;æ—¶é—´ä¸ä¼šå› ä¸ºä½ çš„é—æ†¾è€Œåœç•™ï¼Œæˆ‘ä»¬èƒ½åšçš„å°±æ˜¯æŠŠæ¯ä¸€å¤©éƒ½å½“æˆæœ€åä¸€å¤©æ¥è¿‡ã€‚\n&nbsp;&nbsp;&nbsp;&nbsp;2017ï¼Œæˆ‘è¦å®Œæˆï¼š\n\n -  ä¸€ä¸ªå®‰å“APPå’Œå¯¹åº”çš„Web \n -  å°è¯´ã€Šè¿™å¤æœªçœ ã€‹\n - å‘è¡¨ç¤¾åŒºåˆ’åˆ†è®ºæ–‡\n - æ·±å…¥å­¦ä¹ Scalaå’ŒSpark\n - æŒæ¡ä¸€ä¸ªæ·±åº¦å­¦ä¹ æ¡†æ¶ï¼ˆegï¼šCaffeï¼‰\n - è·Ÿè¿›ç ”ç©¶Hadoopå®¶æ—çš„æœ€è¿‘ç‰ˆæœ¬ï¼Œå¹¶å½¢æˆæ–‡æ¡£\n - æ¢ä¸€å°Mackbook Pro\n - æ”’å¤Ÿ100K+\n\n&nbsp;&nbsp;&nbsp;&nbsp;æ„Ÿè°¢è¿™ä¸€è·¯æœ‰ä½ ï¼ŒåŠ æ²¹ï¼\n\n----\n\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n","tags":["å¹´ç»ˆæ€»ç»“"],"categories":["éšæ‰‹è®°"]},{"title":"è¿™å¤æœªçœ .å‰è¨€","url":"/2016/09/17/å¤æœªçœ /è¿™å¤æœªçœ -å‰è¨€/","content":"\né’æ˜¥åœ¨å²æœˆä¸­è‘¬é€äº†å¼€å§‹ï¼Œç”¨æ‚²å­—è°ƒåˆ»ç”»çš„å¹´è½®åœ¨é‚£ç‰‡è‰åœ°ä¸Šç”»ä¸Šäº†æœ€åä¸€åœˆï¼Œæ¼«å¤©é£èˆçš„çº¸ç‰‡å¦‚æ­¤åˆ»æˆ¿è´¹çš„å¿ƒä¸€æ ·è‹ç™½æ— åŠ›ï¼Œå°˜åŸƒè½å®šï¼Œä¸€åˆ‡éƒ½å·²ç»“æŸã€‚ä½ ç”¨å¯¹ä¸èµ·ä½œç»“äº†é‚£æ®µç¾å¥½æ—¶å…‰ï¼Œæˆ‘ç”¨æ²¡å…³ç³»æ©é¥°å¿ƒç—›çš„æ³ªæ°´ï¼Œè½¬èº«ç¦»å»ï¼Œç”¨ç©ºç™½å†è§ã€‚\n\n<!--More-->\n\néš¾ä»¥å‰²èˆçš„æµæ²³é‡Œï¼Œæœ‰ä½ è¡èµ·çš„å¾®ç¬‘ï¼Œæˆ‘å›å¿†ç€ï¼Œæ…¢æ…¢å°±æµä¸‹äº†çœ¼æ³ªï¼Œæ­¤åˆ»æˆ‘æƒ³æŠŠè®°å¿†å°å­˜ï¼Œæˆ‘ä¸æƒ³åœ¨è‹¥å¹²å¹´åæ‹¿èµ·æ¥æ¸©ä¹ æ—¶ï¼Œåªå‰©ä¸‹ä¸€äº›è™šæ— ç¼¥ç¼ˆçš„æ¢¦å¹»ï¼Œå®æ„¿å†çœ‹åˆ°ä¸€äº›æ–‡å­—è€Œæµä¸‹å½“åˆæ‰€è®¤ä¸ºçš„å¹¸ç¦çš„æ³ªæ°´ï¼Œæˆ–è®¸æœ€æ— åŠ›çš„æ˜¯å¦‚æœï¼Œä½†æˆ‘ä»æƒ³è¯´ï¼Œå¦‚æœæ—¶å…‰å¾ªç¯åˆ°é‚£å¹´èµ·ç‚¹ï¼Œæˆ‘äº¦ç„¶ä¼šçˆ±ï¼Œå› ä¸ºå¤æœªçœ ã€‚\n\n\n\næ²¡æœ‰äººæ°¸è¿œé’æ˜¥ï¼Œå´æ°¸è¿œæœ‰äººæ­£åœ¨é’æ˜¥ç€ï¼Œæ˜¯å‘€ï¼Œé‚£å¤ï¼Œä»–ä»¬å¹³è¡Œçš„çˆ±æƒ…ä¼šä»¥æœ€ç¾ä¸½çš„å§¿æ€å»¶åï¼Œæ°¸è¿œä¼šæœ‰äººç»å†ç€ï¼Œæˆ–è®¸åˆ†æ‰‹ï¼Œæˆ–è®¸ç»§ç»­åœ¨ä¸€èµ·ï¼Œä½†é‚£æ—©å·²ä¸ä»–ä»¬æ— å…³ï¼Œä»–åªå¸Œæœ›å¥¹å¹¸ç¦ï¼Œå¥¹åªå¸Œæœ›ä»–å¹¸ç¦ã€‚ä½†ç»“æœå‘¢ï¼Ÿä¸¤ä¸ªäººéƒ½æ²¡æœ‰å¹¸ç¦ï¼\n\næˆ‘ä»¬æ²¡æœ‰æƒåˆ©å»è´¨ç–‘åœ¨é‚£ä¸ªå¹´é¾„ä»–ä»¬çš„æ„Ÿæƒ…æœ‰æ²¡æœ‰æƒåˆ©ï¼Œåªè¦å¿«ä¹ï¼Œä¸ºä»€ä¹ˆä¸èƒ½åœ¨ä¸€èµ·ï¼Œä»–å¯ä»¥ä¸ºäº†å¥¹æ”¾å¼ƒè‡ªå·±ï¼Œåªè¦å¥¹æ„¿æ„ï¼Œä»–å¯ä»¥æ”¾å¼ƒæ‰€æ‹¥æœ‰çš„ä¸€åˆ‡ï¼Œå¯æ˜¯ç»“æœå‘¢ï¼Ÿè°åˆèƒ½æ–™åˆ°ï¼Œä»–æ¯äº†ï¼Œå¥¹æˆåŠŸäº†ï¼Œå´æ²¡æœ‰ä¸€ä¸ªäººå¿ƒå®‰ç†å¾—ã€‚\n\nå¤å¤©å› ä¸ºä»–ä»¬å˜å¾—é‚£ä¹ˆç¾ï¼Œåˆå› ä¸ºä»–ä»¬å˜å¾—é‚£ä¹ˆæ‚²ã€‚è°ä¹Ÿä¸æƒ³ï¼Œè°ä¹Ÿä¸æ„¿æ„å»æƒ³ï¼Œå›å¿†æ€»æ˜¯çŸ­æš‚çš„ï¼Œè®°å¿†å´æ˜¯ç—›çš„ã€‚\n\næœ€éš¾ç†¬çš„ä¾¿æ˜¯è¿™ç—›è‹¦çš„æ—¶æ®µï¼Œæˆ–è®¸æ¯ä¸€æ¬¡é—­ä¸Šçœ¼ï¼Œæ³ªæ°´ä¾¿åœ¨æ‰“è½¬ï¼Œç†¬è¿‡ä¸€å¤æ™´å¤©ï¼Œå¹»åŒ–æˆç“¢æ³¼çš„é›¨å­£ã€‚è®©å¿ƒåœ¨å“­æ³£ä¸­æˆé•¿ï¼ŒèŒå£®äº†ï¼Œåšå¼ºäº†ï¼Œæ·¡å¿˜äº†ï¼\n\næ›¾ç»èŒåŠ¨åœ¨ç¨šå«©é’æ˜¥é‡Œçš„å”¯ä¸€ä¸€æœµç•™æ‹ï¼Œåœ¨è¿™ä¸€ä¸ªå¤æœ«å½»åº•çš„æ¯èäº†ã€‚\n\nçœ‹ç€çª—å¤–å°˜åŸƒè½æ»¡å¤©ï¼Œä¾ç¨€è®°å¾—å·²é”™è¿‡çš„æ˜¨å¤©ã€‚æ—¶é—´æ˜¯è´¼å·èµ°ä¸€åˆ‡ï¼Œæ‰ä½äº†é‚£åªè‰ï¼ŒåŸæ¥å¹¶ä¸ä»£è¡¨ç•™ä½äº†æ•´ä¸ªå¤å¤©ï¼Œçˆ±æˆ‘çš„ä¸æˆ‘çˆ±çš„ï¼ŒI Miss Youï¼ŒBut I Missed Youï¼\n\n----\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>","tags":["è¿™å¤æœªçœ "],"categories":["å¤æœªçœ "]},{"title":"è¿™å¤æœªçœ .ç®€ä»‹","url":"/2016/09/16/å¤æœªçœ /è¿™å¤æœªçœ -ç®€ä»‹/","content":"ä¹¦æ•´ä½“åˆ†ä¸ºä¸‰éƒ¨åˆ†ã€Šå¤ä¹‹è¿‡å¾€ã€‹ï¼Œã€Šå¤ä¹‹æµå¹´ã€‹ï¼Œã€Šå¤ä¹‹æœªè‡³ã€‹ã€‚æ•´æœ¬ä¹¦è®²çš„æ˜¯ç”·ä¸»äººå…¬é¡¾è‰¾å“²ï¼ˆå°è‰¾ï¼‰ä¸è«æ™¨ï¼ˆæ™¨æ™¨ï¼‰ä¹‹é—´çš„æ•…äº‹ï¼Œä»åˆä¸­åˆ°é«˜ä¸­å†åˆ°å¤§å­¦ï¼Œä»ç›¸é‡åˆ°ç›¸çŸ¥å†åˆ°ç›¸ç¦»ã€‚\n\nä¸¤äººåŒåœ¨é™Œä¹˜ä¸€ä¸­å¿µåˆä¸­ï¼ŒåŒç­åŒå­¦ï¼Œåœ¨ä¸­è€ƒæ¥ä¸´çš„é‚£æ®µæ—¥å­ï¼Œä¸¤äººç›¸äº’é¼“åŠ±ï¼Œäºæ˜¯é¡¾è‰¾å“²ï¼ˆå°è‰¾ï¼‰è€ƒä¸Šäº†ä»–ä»æ¥éƒ½æ²¡æœ‰æƒ³è¿‡èƒ½è€ƒä¸Šçš„å­Ÿå·ä¸€é«˜ï¼Œè€Œè«æ™¨ï¼ˆæ™¨æ™¨ï¼‰å‘¢ï¼Œè€ƒä¸Šäº†é¢„æ–™ä¹‹ä¸­çš„å¹³é˜³ä¸€é«˜ï¼Œè€Œå¥¹åœ¨è¿™ä¹‹å‰å´ä»æ¥æ²¡å‘Šè¯‰è¿‡é¡¾è‰¾å“²ï¼ˆå°è‰¾ï¼‰å¥¹è¦å»å¹³é˜³ï¼Œå°±è¿™æ ·ï¼Œä¸¤ä¸ªäººåˆ†å¼€äº†ï¼Œä¸€äº›éƒ½çœ‹èµ·æ¥é‚£ä¹ˆé¡ºç†æˆç« ï¼Œä¸€åˆ‡åˆçœ‹èµ·æ¥é‚£ä¹ˆæš—æ·¡å¤±æœ›ã€‚\n\n<!--More-->\n\nåœ¨ç»å†è¿‡é«˜ä¸­çš„äºŒå¹´ä¹‹åï¼Œé¡¾è‰¾å“²ï¼ˆå°è‰¾ï¼‰ç»ˆäºè”ç³»ä¸Šäº†è«æ™¨ï¼ˆæ™¨æ™¨ï¼‰ï¼Œé‚£å¤©æ™šä¸Šï¼Œä»–ç”¨å¦ˆå¦ˆçš„ç”µè¯ç»™è«æ™¨ï¼ˆæ™¨æ™¨ï¼‰é€šäº†ä¸¤ä¸ªå°æ—¶çš„ç”µè¯ï¼Œä¼¼ä¹è¦æŠŠä¸¤äººä¸¤å¹´é‡Œæ²¡æœ‰è¯´çš„è¯éƒ½è¯´å®Œï¼Œå¯æ˜¯æœ‰å¤ªå¤šçš„è¯æ˜¯æ— æ³•ç”¨è¨€è¯­è¡¨è¾¾çš„ï¼Œå°±è¿™æ ·ç”µè¯æ¬ è´¹äº†ï¼Œç»ˆæ­¢äº†èŠå¤©ï¼Œå¯æ˜¯é‚£å¤©æ™šä¸Šï¼Œå°è‰¾é«˜å…´çš„ä¸€å®¿æ²¡ç¡ï¼Œé‚£ä¸€æ™šä¸Šï¼Œä»–çš„ç¬‘å®¹éƒ½æ˜¯å¹¸ç¦çš„ã€‚\n\nå¯æ˜¯äº‹æƒ…æ°¸è¿œä¸ä¼šé‚£ä¹ˆé¡ºåˆ©ï¼Œåœ¨é¦™å±±å…¬å›­é‡Œï¼Œå½“ä»–æ‹¿èµ·ä»–ä¹°çš„æƒ…ä¾£æˆ’æŒ‡é€ç»™æ™¨æ™¨æ—¶ï¼Œæ™¨æ™¨æ²¡æœ‰æ¥å—ï¼Œè¯´äº†ä¸€å †ä»–ä¹Ÿæ²¡æœ‰å¬è¿›å»çš„è¯ï¼Œå°±è¿™æ ·ï¼Œåˆå¼€å§‹äº†åˆ†ç¦»ï¼Œè€Œè°ä¹Ÿä¸çŸ¥é“è¿™æ¬¡åˆ†ç¦»ç«Ÿç„¶æ—¶ä¸€è¾ˆå­çš„å†ä¹Ÿä¸è§ã€‚\n\nåæ¥çš„åæ¥ï¼Œä»–åˆé‡è§äº†åˆ«çš„å¥³å­©ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯å› ä¸ºåæ¥çš„å¥³å­©éƒ½åƒå°è‰¾è®°å¿†é‡Œçš„è«æ™¨ã€‚åªçŸ¥é“ï¼Œä»–éƒ½å¾ˆçæƒœã€‚\n\n----\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>","tags":["è¿™å¤æœªçœ "],"categories":["å¤æœªçœ "]},{"title":"è¿™å¤æœªçœ .åº","url":"/2016/09/15/å¤æœªçœ /è¿™å¤æœªçœ -åº/","content":"è¿™æœ¬ä¹¦çš„æ•´ä½“æ„æ€æ˜¯å°ä¸»å¤§å­¦ä¸€å¹´çº§æ—¶åˆšå»çš„æ—¶å€™çš„ä¸€ä¸ªæƒ³æ³•ï¼Œå½“æ—¶åˆšåˆšæ­¥å…¥å¤§å­¦çš„æˆ‘ä»¬ï¼Œå¿ƒé‡Œæ˜¯é‚£ä¹ˆçš„è¿·èŒ«ä¸æ‡µæ‡‚ï¼Œå¼€å­¦å‰ä¸¤å‘¨ï¼Œé™¤äº†å†›è®­è¿˜æ˜¯å†›è®­ï¼Œæ™šä¸Šå¶å°”æœ‰ä¸ªç©ºé—²æ—¶é—´ï¼Œæˆ‘æƒ³å¤§æ¦‚ä¹Ÿè®¸æ˜¯æ— èŠçš„ï¼Œè®°å¾—é‚£ä¸ªæ—¶å€™ååœ¨å›¾ä¹¦é¦†é çª—çš„ä½ç½®ï¼Œçœ‹ç€çª—å¤–ï¼Œæ²¡æœ‰æ˜æœˆï¼Œæ²¡æœ‰ä½³äººï¼Œæœ‰çš„åªæ˜¯ä¸€æœ›æ— é™…çš„é»‘æš—ã€‚\n\n<!--More-->\n\né‚£ä¸ªæ—¶å€™ï¼Œè¿˜æ²¡æœ‰é‡åˆ°ä½ æ‰€æƒ³é‡åˆ°çš„äººï¼Œæˆ–è®¸å›å¿†è¿˜æ²‰æ·€åœ¨é«˜ä¸­çš„æ—¶å…‰é‡Œï¼Œæˆ–æ˜¯å¹¸ç¦ï¼Œæˆ–æ˜¯è‹¦æ¶©ï¼Œæˆ–æ˜¯å¹¸ç¦ä¹‹åçš„è‹¦æ¶©ï¼Œå›è¿‡å¤´æ¥ï¼Œçœ‹ç€æ»¡å±‹å­çš„å­¦é•¿å­¦å§ï¼Œå¿ƒé‡Œæ˜¯åŠå…¶å¤æ‚çš„ï¼Œæœ‰ç§è¯´ä¸å‡ºçš„éš¾è¿‡ï¼Œé‚£æ—¶å€™æˆ‘æ˜¯ä¸æ˜¯åœ¨æƒ³ï¼Œç°åœ¨çš„ä½ ï¼ˆä»¬ï¼‰ä¼šåœ¨å“ªé‡Œå¿µå¤§å­¦å‘¢ï¼Ÿ\n\næƒ³ç€æƒ³ç€çœ¼è§’ä¾¿æ·Œå‡ºäº†æ³ªæ°´ï¼Œæˆ‘æƒ³æˆ‘çš„å¤§å­¦è¦å®Œæˆä¸€ä»¶è‡³å°‘æˆ‘è‡ªå·±è§‰å¾—æ»¡æ„çš„äº‹ï¼Œäºæ˜¯ä¾¿æœ‰äº†ä½ ç°åœ¨çœ‹åˆ°çš„è¿™ä¸ªåºï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯å—éƒ­æ•¬æ˜çš„å½±å“ï¼Œå› ä¸ºæˆ‘çœ‹è¿‡ä»–çš„å”¯ä¸€ä¸€æœ¬å°è¯´ï¼Œä¹Ÿæ˜¯æˆ‘çœ‹è¿‡çš„å”¯ä¸€ä¸€æœ¬å°è¯´â€”â€”ã€Šå¤è‡³æœªè‡³ã€‹ï¼Œæˆ‘æƒ³å†™ä¸€æœ¬ä¹¦ï¼Œæˆ–è€…æ›´å‡†ç¡®çš„è¯´ï¼Œæˆ‘æƒ³å†™ä¸€ä¸ªäººçš„é’æ˜¥ã€‚\n\nåœ¨13å¹´å†›è®­ç»“æŸä¹‹åï¼Œæˆ‘æ„æ€äº†æ•´ä¸ªä½“ç³»ï¼Œå®šäº†è¿™æœ¬ä¹¦çš„åå­—â€”â€”ã€Šè¿™å¤æœªçœ ã€‹ï¼Œç†Ÿæ‚‰æˆ‘çš„æœ‹å‹ï¼Œä¹ŸçŸ¥é“è¿™æ˜¯æˆ‘çš„QQç½‘åï¼ŒQQä½œä¸ºé‚£ä¸ªæ—¶ä»£çš„è®°å¿†ï¼Œæ€»ä¼šæ®‹ç•™ä¸€äº›æ‚²ä¼¤çš„æ•…äº‹ï¼Œäºæ˜¯æˆ‘åˆ°ç°åœ¨å››å¹´äº†ï¼Œæˆ‘ä»æ²¡æ¢è¿‡QQç½‘åï¼Œæˆ–è®¸æ˜¯å®³æ€•ï¼Œå®³æ€•é‚£äº›å¥½ä¹…ä¸è”ç³»çš„æœ‹å‹ï¼Œæ‰¾ä¸åˆ°æˆ‘å§ã€‚\n\n----\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>","tags":["è¿™å¤æœªçœ "],"categories":["å¤æœªçœ "]},{"title":"æœç´¢å¼•æ“ï¼šMapReduceå®æˆ˜----å€’æ’ç´¢å¼•","url":"/2015/07/28/Hadoop/æœç´¢å¼•æ“ï¼šMapReduceå®æˆ˜-å€’æ’ç´¢å¼•/","content":"> å€’æ’ç´¢å¼•ï¼ˆInverted indexï¼‰ï¼Œä¹Ÿå¸¸è¢«ç§°ä¸ºåå‘ç´¢å¼•ã€ç½®å…¥æ¡£æ¡ˆæˆ–åå‘æ¡£æ¡ˆï¼Œæ˜¯ä¸€ç§ç´¢å¼•æ–¹æ³•ï¼Œè¢«ç”¨æ¥å­˜å‚¨åœ¨å…¨æ–‡æœç´¢ä¸‹æŸä¸ªå•è¯åœ¨ä¸€ä¸ªæ–‡æ¡£æˆ–è€…ä¸€ç»„æ–‡æ¡£ä¸­çš„å­˜å‚¨ä½ç½®çš„æ˜ å°„ã€‚å®ƒæ˜¯æ–‡æ¡£æ£€ç´¢ç³»ç»Ÿä¸­æœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„ã€‚\n\n<!--More-->\n\n# 1.å€’æ’ç´¢å¼•ç®€ä»‹\n\næœ‰ä¸¤ç§ä¸åŒçš„åå‘ç´¢å¼•å½¢å¼ï¼š\n\nä¸€æ¡è®°å½•çš„æ°´å¹³åå‘ç´¢å¼•ï¼ˆæˆ–è€…åå‘æ¡£æ¡ˆç´¢å¼•ï¼‰åŒ…å«æ¯ä¸ªå¼•ç”¨å•è¯çš„æ–‡æ¡£çš„åˆ—è¡¨ã€‚\nä¸€ä¸ªå•è¯çš„æ°´å¹³åå‘ç´¢å¼•ï¼ˆæˆ–è€…å®Œå…¨åå‘ç´¢å¼•ï¼‰åˆåŒ…å«æ¯ä¸ªå•è¯åœ¨ä¸€ä¸ªæ–‡æ¡£ä¸­çš„ä½ç½®ã€‚\nåè€…çš„å½¢å¼æä¾›äº†æ›´å¤šçš„å…¼å®¹æ€§ï¼ˆæ¯”å¦‚çŸ­è¯­æœç´¢ï¼‰ï¼Œä½†æ˜¯éœ€è¦æ›´å¤šçš„æ—¶é—´å’Œç©ºé—´æ¥åˆ›å»ºã€‚\n\n\nä¸¾ä¾‹ï¼š\nä»¥è‹±æ–‡ä¸ºä¾‹ï¼Œä¸‹é¢æ˜¯è¦è¢«ç´¢å¼•çš„æ–‡æœ¬ï¼š\n```\nT0 = \"it is what it is\"\nT1 = \"what is it\"\nT2 = \"it is a banana\"\n```\næˆ‘ä»¬å°±èƒ½å¾—åˆ°ä¸‹é¢çš„åå‘æ–‡ä»¶ç´¢å¼•ï¼š\n```\n\"a\":      {2}\n\"banana\": {2}\n\"is\":     {0, 1, 2}\n\"it\":     {0, 1, 2}\n\"what\":   {0, 1}\n```\næ£€ç´¢çš„æ¡ä»¶\"what\", \"is\" å’Œ \"it\" å°†å¯¹åº”è¿™ä¸ªé›†åˆï¼š{0,1}âˆ©{0,1,2}âˆ©{0,1,2}={0,1}ã€‚\n\nå¯¹ç›¸åŒçš„æ–‡å­—ï¼Œæˆ‘ä»¬å¾—åˆ°åé¢è¿™äº›å®Œå…¨åå‘ç´¢å¼•ï¼Œæœ‰æ–‡æ¡£æ•°é‡å’Œå½“å‰æŸ¥è¯¢çš„å•è¯ç»“æœç»„æˆçš„çš„æˆå¯¹æ•°æ®ã€‚ åŒæ ·ï¼Œæ–‡æ¡£æ•°é‡å’Œå½“å‰æŸ¥è¯¢çš„å•è¯ç»“æœéƒ½ä»é›¶å¼€å§‹ã€‚\n\næ‰€ä»¥ï¼Œ\"banana\": {(2, 3)} å°±æ˜¯è¯´ â€œbananaâ€åœ¨ç¬¬ä¸‰ä¸ªæ–‡æ¡£é‡Œ (T2)ï¼Œè€Œä¸”åœ¨ç¬¬ä¸‰ä¸ªæ–‡æ¡£çš„ä½ç½®æ˜¯ç¬¬å››ä¸ªå•è¯(åœ°å€ä¸º 3)ã€‚\n```\n\"a\":      {(2, 2)}\n\"banana\": {(2, 3)}\n\"is\":     {(0, 1), (0, 4), (1, 1), (2, 1)}\n\"it\":     {(0, 0), (0, 3), (1, 2), (2, 0)}\n\"what\":   {(0, 2), (1, 0)}\n```\nå¦‚æœæˆ‘ä»¬æ‰§è¡ŒçŸ­è¯­æœç´¢\"what is it\" æˆ‘ä»¬å¾—åˆ°è¿™ä¸ªçŸ­è¯­çš„å…¨éƒ¨å•è¯å„è‡ªçš„ç»“æœæ‰€åœ¨æ–‡æ¡£ä¸ºæ–‡æ¡£0å’Œæ–‡æ¡£1ã€‚ä½†æ˜¯è¿™ä¸ªçŸ­è¯­æ£€ç´¢çš„è¿ç»­çš„æ¡ä»¶ä»…ä»…åœ¨æ–‡æ¡£1å¾—åˆ°ã€‚\n\n# 2.åˆ†æå’Œè®¾è®¡\n## 1ï¼‰Mapè¿‡ç¨‹\n\né¦–å…ˆä½¿ç”¨é»˜è®¤çš„TextInputFormatç±»å¯¹è¾“å…¥æ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œå¾—åˆ°æ–‡æœ¬ä¸­æ¯è¡Œçš„åç§»é‡åŠå…¶å†…å®¹ï¼ŒMapè¿‡ç¨‹é¦–å…ˆå¿…é¡»åˆ†æè¾“å…¥çš„<key, value>å¯¹ï¼Œå¾—åˆ°å€’æ’ç´¢å¼•ä¸­éœ€è¦çš„ä¸‰ä¸ªä¿¡æ¯ï¼šå•è¯ã€æ–‡æ¡£URIå’Œè¯é¢‘ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][1]\n\nå­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼Œç¬¬ä¸€ï¼š<key, value>å¯¹åªèƒ½æœ‰ä¸¤ä¸ªå€¼ï¼Œåœ¨ä¸ä½¿ç”¨Hadoopè‡ªå®šä¹‰æ•°æ®ç±»å‹çš„æƒ…å†µä¸‹ï¼Œéœ€è¦æ ¹æ®æƒ…å†µå°†å…¶ä¸­çš„ä¸¤ä¸ªå€¼åˆå¹¶æˆä¸€ä¸ªå€¼ï¼Œä½œä¸ºvalueæˆ–keyå€¼ï¼›\n\nç¬¬äºŒï¼Œé€šè¿‡ä¸€ä¸ªReduceè¿‡ç¨‹æ— æ³•åŒæ—¶å®Œæˆè¯é¢‘ç»Ÿè®¡å’Œç”Ÿæˆæ–‡æ¡£åˆ—è¡¨ï¼Œæ‰€ä»¥å¿…é¡»å¢åŠ ä¸€ä¸ªCombineè¿‡ç¨‹å®Œæˆè¯é¢‘ç»Ÿè®¡\n```\n\n\npublic static class Map extends Mapper<Object,Text,Text,Text>{\n        private Text keyInfo = new Text();\n        private Text valueInfo = new Text();\n        private FileSplit split;  //å­˜å‚¨æ‰€åœ¨æ–‡ä»¶çš„è·¯å¾„\n        public void map(Object key,Text value,Context context) throws IOException,\n\nInterruptedException{\n            split = (FileSplit)context.getInputSplit();     //è·å–å½“å‰ä»»åŠ¡åˆ†å‰²çš„å•è¯æ‰€åœ¨çš„æ–‡ä»¶è·¯å¾„\n            StringTokenizer itr = new StringTokenizer(value.toString());\n            while(itr.hasMoreTokens()){\n                keyInfo.set(itr.nextToken()+\"+\"+split.getPath().toString());   //keyvalueæ˜¯ç”±å•è¯å’ŒURIç»„æˆçš„\n                valueInfo.set(\"1\");                         \n\n                         //valueå€¼è®¾ç½®æˆ1\n                context.write(keyInfo,valueInfo);\n            }\n        }\n    }\n```\n\n## ï¼ˆ2ï¼‰Combineè¿‡ç¨‹\nå°†keyå€¼ç›¸åŒçš„valueå€¼ç´¯åŠ ï¼Œå¾—åˆ°ä¸€ä¸ªå•è¯åœ¨æ–‡æ¡£ä¸­çš„è¯é¢‘ï¼Œå¦‚å›¾\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][2]\n\n```\n \tpublic static class Combiner extends Reducer<Text,Text,Text,Text>{\n        private Text info = new Text();\n        public void reduce(Text key,Iterable<Text>values,Context context) throws \nIOException, InterruptedException{\n            int sum = 0;\n            for(Text value:values){\n                sum += Integer.parseInt(value.toString());\n            }\n//            int index = key.toString().indexOf(\"+\");\n//            info.set(key.toString().substring(index+1)+\":\"+sum);    \n//            key.set(key.toString().substring(0,index));\n            String record = key.toString();\n            String[] str = record.split(\"[+]\");\n            info.set(str[1]+\":\"+sum);    \n            key.set(str[0]);\n            context.write(key,info);\n        }\n    }\n```\n\n## ï¼ˆ3ï¼‰Reduceè¿‡ç¨‹\n\nè®²è¿‡ä¸Šè¿°ä¸¤ä¸ªè¿‡ç¨‹åï¼ŒReduceè¿‡ç¨‹åªéœ€å°†ç›¸åŒkeyå€¼çš„valueå€¼ç»„åˆæˆå€’æ’ç´¢å¼•æ–‡ä»¶æ‰€éœ€çš„æ ¼å¼å³å¯ï¼Œå‰©ä¸‹çš„äº‹æƒ…å°±å¯ä»¥ç›´æ¥äº¤ç»™MapReduceæ¡†æ¶è¿›è¡Œå¤„ç†äº†\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][3]\n\n```\n\npublic static class Reduce extends Reducer<Text,Text,Text,Text>{\n        private Text result = new Text();\n        public void reduce(Text key,Iterable<Text>values,Context context) throws \n\nIOException, InterruptedException{\n            String value =new String();\n            for(Text value1:values){\n                value += value1.toString()+\" ; \";\n            }\n            result.set(value);\n            context.write(key,result);\n        }\n    }\n```\n\nå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š\n```\n\npackage ReverseIndex;\nimport java.io.*;\nimport java.util.StringTokenizer;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.*;\nimport org.apache.hadoop.mapreduce.Job;\nimport org.apache.hadoop.mapreduce.Mapper;\nimport org.apache.hadoop.mapreduce.Reducer;\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\nimport org.apache.hadoop.mapreduce.lib.input.FileSplit;\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\n\npublic class ReverseIndex {\n\n    public static class Map extends Mapper<Object,Text,Text,Text>{\n        private Text keyInfo = new Text();\n        private Text valueInfo = new Text();\n        private FileSplit split;  //å­˜å‚¨æ‰€åœ¨æ–‡ä»¶çš„è·¯å¾„\n        public void map(Object key,Text value,Context context) throws IOException,\n\nInterruptedException{\n            split = (FileSplit)context.getInputSplit();     //è·å–å½“å‰ä»»åŠ¡åˆ†å‰²çš„å•è¯æ‰€åœ¨çš„æ–‡ä»¶è·¯å¾„\n            StringTokenizer itr = new StringTokenizer(value.toString());\n            while(itr.hasMoreTokens()){\n                keyInfo.set(itr.nextToken()+\"+\"+split.getPath().toString());   //keyvalueæ˜¯ç”±å•è¯å’ŒURIç»„æˆçš„\n                valueInfo.set(\"1\");                         \n\n                         //valueå€¼è®¾ç½®æˆ1\n                context.write(keyInfo,valueInfo);\n            }\n        }\n    }\n    public static class Combiner extends Reducer<Text,Text,Text,Text>{\n        private Text info = new Text();\n        public void reduce(Text key,Iterable<Text>values,Context context) throws \n\nIOException, InterruptedException{\n            int sum = 0;\n            for(Text value:values){\n                sum += Integer.parseInt(value.toString());\n            }\n\n//ä¸‹é¢ä¸‰è¡Œæ³¨é‡Šå’Œç´§æ¥ç€å››è¡ŒåŠŸèƒ½ä¸€æ ·ï¼Œåªä¸è¿‡å®ç°æ–¹æ³•ä¸ä¸€æ ·ç½¢äº†\n\n//            int index = key.toString().indexOf(\"+\");\n//            info.set(key.toString().substring(index+1)+\":\"+sum);    \n//            key.set(key.toString().substring(0,index));\n\n//å¯¹ä¼ è¿›æ¥çš„keyè¿›è¡Œæ‹†åˆ†ï¼Œä»¥+ä¸ºç•Œ\n\n            String record = key.toString();\n            String[] str = record.split(\"[+]\");\n            info.set(str[1]+\":\"+sum);    \n            key.set(str[0]);\n            context.write(key,info);\n        }\n    }\n    public static class Reduce extends Reducer<Text,Text,Text,Text>{\n        private Text result = new Text();\n        public void reduce(Text key,Iterable<Text>values,Context context) throws \n\nIOException, InterruptedException{\n            String value =new String();\n            for(Text value1:values){\n                value += value1.toString()+\" ; \";\n            }\n            result.set(value);\n            context.write(key,result);\n        }\n    }\n    public static void main(String[] args) throws IOException, ClassNotFoundException,\n\nInterruptedException {\n        // TODO Auto-generated method stub\n        Job job = new Job();\n        job.setJarByClass(ReverseIndex.class);\n        \n        job.setNumReduceTasks(1);  //è®¾ç½®reduceçš„ä»»åŠ¡æ•°é‡ä¸º1ï¼Œå¹³å¸¸çš„å°æµ‹è¯•ä¸éœ€è¦å¼€è¾Ÿå¤ªå¤šçš„reduceä»»åŠ¡è¿›ç¨‹\n        \n        job.setMapperClass(Map.class);\n        job.setMapOutputKeyClass(Text.class);\n        job.setMapOutputValueClass(Text.class);\n        \n        job.setCombinerClass(Combiner.class);\n        \n        job.setReducerClass(Reduce.class);\n        \n        job.setOutputKeyClass(Text.class);\n        job.setOutputValueClass(Text.class);\n        \n        FileInputFormat.addInputPath(job, new Path(\"/thinkgamer/input\"));\n        FileOutputFormat.setOutputPath(job, new Path(\"/thinkgamer/output\"));\n        \n        System.exit(job.waitForCompletion(true) ? 0 : 1);\n    }\n\n}\n```\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n\n  [1]: http://img.blog.csdn.net/20150806153515556?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\n  [2]: http://img.blog.csdn.net/20150728102018022?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\n  [3]: http://img.blog.csdn.net/20150728102039550?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center","tags":["Hadoop"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"MapReducerä¸­çš„å¤šæ¬¡å½’çº¦å¤„ç†","url":"/2015/07/28/Hadoop/MapReducerä¸­çš„å¤šæ¬¡å½’çº¦å¤„ç†/","content":"\næˆ‘ä»¬çŸ¥é“ï¼ŒMapReduceæ˜¯åˆ†ä¸ºMapperä»»åŠ¡å’ŒReducerä»»åŠ¡ï¼ŒMapperä»»åŠ¡çš„è¾“å‡ºï¼Œé€šè¿‡ç½‘ç»œä¼ è¾“åˆ°Reducerä»»åŠ¡ç«¯ï¼Œä½œä¸ºè¾“å…¥ã€‚\n\nåœ¨Reducerä»»åŠ¡ä¸­ï¼Œé€šå¸¸åšçš„äº‹æƒ…æ˜¯å¯¹æ•°æ®è¿›è¡Œå½’çº¦å¤„ç†ã€‚æ—¢ç„¶æ•°æ®æ¥æºæ˜¯Mapperä»»åŠ¡çš„è¾“å‡ºï¼Œé‚£ä¹ˆæ˜¯å¦å¯ä»¥åœ¨Mapperç«¯å¯¹æ•°æ®è¿›è¡Œå½’çº¦å¤„ç†ï¼Œä¸šåŠ¡é€»è¾‘ä¸Reducerç«¯åšçš„å®Œå…¨ç›¸åŒã€‚å¤„ç†åçš„æ•°æ®å†ä¼ é€åˆ°Reducerç«¯ï¼Œå†åšä¸€æ¬¡å½’çº¦ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯å‡å°‘äº†ç½‘ç»œä¼ è¾“çš„æ•°é‡ã€‚\n<!--More-->\n\nå¯èƒ½æœ‰äººç–‘æƒ‘å‡ ä¸ªé—®é¢˜ï¼š\n\nä¸ºä»€ä¹ˆéœ€è¦åœ¨Mapperç«¯è¿›è¡Œå½’çº¦å¤„ç†ï¼Ÿ\n\nä¸ºä»€ä¹ˆå¯ä»¥åœ¨Mapperç«¯è¿›è¡Œå½’çº¦å¤„ç†ï¼Ÿ\n\næ—¢ç„¶åœ¨Mapperç«¯å¯ä»¥è¿›è¡Œå½’çº¦å¤„ç†ï¼Œä¸ºä»€ä¹ˆåœ¨Reducerç«¯è¿˜è¦å¤„ç†ï¼Ÿ\n\n\n\nå›ç­”ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šå› ä¸ºåœ¨Mapperè¿›è¡Œå½’çº¦åï¼Œæ•°æ®é‡å˜å°äº†ï¼Œè¿™æ ·å†é€šè¿‡ç½‘ç»œä¼ è¾“æ—¶ï¼Œä¼ è¾“æ—¶é—´å°±å˜çŸ­äº†ï¼Œå‡å°‘äº†æ•´ä¸ªä½œä¸šçš„è¿è¡Œæ—¶é—´ã€‚\n\nå›ç­”ç¬¬äºŒä¸ªé—®é¢˜ï¼šå› ä¸ºReducerç«¯æ¥æ”¶çš„æ•°æ®å°±æ˜¯æ¥è‡ªäºMapperç«¯ã€‚æˆ‘ä»¬åœ¨Mapperè¿›è¡Œå½’çº¦å¤„ç†ï¼Œæ— éå°±æ˜¯æŠŠå½’çº¦æ“ä½œæå‰åˆ°Mapperç«¯åšè€Œå·²ã€‚\n\nå›ç­”ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼šå› ä¸ºMapperç«¯çš„æ•°æ®ä»…ä»…æ˜¯æœ¬èŠ‚ç‚¹å¤„ç†çš„æ•°æ®ï¼Œè€ŒReducerç«¯å¤„ç†çš„æ•°æ®æ˜¯æ¥è‡ªäºå¤šä¸ªMapperä»»åŠ¡çš„è¾“å‡ºã€‚å› æ­¤åœ¨Mapperä¸èƒ½å½’çº¦çš„æ•°æ®ï¼Œåœ¨Reducerç«¯æœ‰å¯èƒ½å½’çº¦å¤„ç†ã€‚\n\nåœ¨Mapperè¿›è¡Œå½’çº¦çš„ç±»ç§°ä¸ºCombinerã€‚é‚£ä¹ˆï¼Œæ€ä¹ˆå†™Combinerå“ªï¼Ÿéå¸¸ç®€å•ï¼Œå°±æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„Reducerç±»ã€‚é‚£ä¹ˆï¼Œæ€ä¹ˆç”¨å“ªï¼Ÿæ›´ç®€å•ï¼Œè§å¦‚ä¸‹ä»£ç \n\n\njob.setCombineClass(Mapper.class)\n\nè¦æ³¨æ„çš„æ˜¯ï¼ŒCombineråªåœ¨Mapperä»»åŠ¡æ‰€åœ¨çš„èŠ‚ç‚¹è¿è¡Œï¼Œä¸ä¼šè·¨Mapperä»»åŠ¡è¿è¡Œã€‚Reduceç«¯æ¥æ”¶æ‰€æœ‰Mapperç«¯çš„è¾“å‡ºæ¥ä½œä¸ºè¾“å…¥ã€‚è™½ç„¶ä¸¤è¾¹çš„å½’çº¦ç±»æ˜¯åŒä¸€ä¸ªï¼Œä½†æ˜¯æ‰§è¡Œçš„ä½ç½®å®Œå…¨ä¸ä¸€æ ·ã€‚\n\nå¹¶ä¸æ˜¯æ‰€æœ‰çš„å½’çº¦å·¥ä½œéƒ½å¯ä»¥ä½¿ç”¨Combineræ¥åšã€‚æ¯”å¦‚æ±‚å¹³å‡å€¼å°±ä¸èƒ½ä½¿ç”¨Combinerã€‚å› ä¸ºå¯¹äºå¹³å‡æ•°çš„å½’çº¦ç®—æ³•ä¸èƒ½å¤šæ¬¡è°ƒç”¨ã€‚\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["Hadoop"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"hadoopå‘½ä»¤â€”â€”hdfs","url":"/2015/07/11/Hadoop/hadoopå‘½ä»¤â€”â€”hdfs/","content":"\nhdfsæ˜¯hadoopå¤§ä½“ç³»ä¸‹çš„åˆ†å¸ƒå¼æ–‡ä»¶ç®¡ç†ç³»ç»Ÿï¼Œæ˜¯è‹±æ–‡Hadoop Distributed File Systemçš„ç®€å†™ï¼Œå…¶å¸¸ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š\n\n<!--More-->\n\n# ä¸€ï¼šfså‘½ä»¤ï¼ˆå’ŒLinuxç»ˆç«¯è¿è¡Œå‘½ä»¤ä¸€è‡´ï¼Œä¹Ÿæ˜¯hdfsæœ€å¸¸ç”¨å‘½ä»¤ï¼‰\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][1]\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][2]\n\n# äºŒï¼šå…¶ä»–ç›¸å…³å‘½ä»¤\n\n1ã€hadoop å½’æ¡£æ–‡ä»¶shellï¼š hadoop archive -archiveName file.har -p /gyt/input /gyt/output (file.harä¸ºå½’æ¡£åçš„æ–‡ä»¶  /gyt/inut/ä¸ºå¤šä¸ªæ–‡ä»¶æ‰€åœ¨ç›®å½•   /gyt/output/æ˜¯å½’æ¡£åçš„è¾“å‡ºç›®å½•)\n\n2ã€è¿è¡ŒJARç¨‹åºåŒ…shellï¼šhadoop jar /home/hadoop/hadoop-1.1.2/hadoop-examples-1.1.2.jar wordcount  /user/hadoop/input outputï¼ˆXXX.jaræ˜¯ç¨‹åºç›®å½•ï¼Œwordcountæ˜¯ç¨‹åºå…¥å£ï¼ŒXXX/inputæ˜¯æ–‡ä»¶è¾“å…¥æºï¼Œoutputæ˜¯æ–‡ä»¶è¾“å‡ºæºï¼‰\n\n4ã€æŸ¥çœ‹HDFSçŠ¶æ€ï¼šhadoop dfsadmin -reportæ¯”å¦‚æœ‰å“ªäº›datanodeï¼Œæ¯ä¸ªdatanodeçš„æƒ…å†µ\n\n5ã€ç¦»å¼€å®‰å…¨æ¨¡å¼ï¼šhadoop dfsadmin -safemode leave \n\n6ã€è¿›å…¥å®‰å…¨æ¨¡å¼ï¼š hadoop dfsadmin -safemode enter\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n\n\n  [1]: http://img.blog.csdn.net/20150715110547708?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\n  [2]: http://img.blog.csdn.net/20150715110719331?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center","tags":["Hadoop"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"Virtualboxè™šæ‹ŸUbuntuç³»ç»Ÿä¸ä¸»æœºäº’ping","url":"/2015/07/08/Linux/è™šæ‹ŸUbuntuç³»ç»Ÿä¸ä¸»æœºäº’ping/","content":"\näº’pingçš„å‰ææ˜¯ä¸»æœºå’Œè™šæ‹Ÿæœºçš„ipåœ°å€åœ¨åŒä¸€æ³¢æ®µã€eg:ä¸»æœºä¸ºï¼š192.168.1.10è™šæ‹ŸLinuxï¼š192.168.1.11ã€‘\n\n<!--More-->\n\n# 1ã€è®¾ç½®ä¸»æœºip\næ‰“å¼€ç½‘ç»œå…±äº«ä¸­å¿ƒ->æ›´æ”¹é€‚é…å™¨è®¾ç½®->ä»¥å¤ªç½‘ï¼Œä¿®æ”¹å…¶ip\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][1]\n\nåœ¨ä¸»æœºä¸Šè¿è¡ŒCMDè¾“å…¥ipconfigæ˜¾ç¤ºå¦‚ä¸‹\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][2]\n\n# 2ã€è®¾ç½®è™šæ‹Ÿæœºip\næ‰“å¼€ç»ˆç«¯ä»¥rootèº«ä»½è¿è¡Œ\næ‰§è¡Œ sudo gedit /etc/hosts   ä¿®æ”¹å¦‚ä¸‹\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][3]\n\næ‰§è¡Œ sudo gedit /etc/network/interfaces  ä¿®æ”¹å¦‚ä¸‹\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][4]\n\næ‰§è¡Œ sudo gedit /etc/resolv.conf  ä¿®æ”¹å¦‚ä¸‹\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][5]\n\nnameserveråè¾¹ç´§è·Ÿçš„æ˜¯ä¸»æœºçš„DNSï¼Œä¸åŒæœºå™¨å¯¹åº”ä¸åŒ\n\né‡å¯ç½‘ç»œæœåŠ¡\n\nsudo /etc/init.d/networking restart\n\nå…³é—­é˜²ç«å¢™\n\nsudo ufw disable\n# 3ã€è™šæ‹Ÿæœºç½‘ç»œè¿æ¥è®¾ç½®\n\nå°ç¼–äº²æµ‹ï¼Œè‹¥è™šæ‹Ÿæœºç½‘ç»œæ ¼å¼è®¾ç½®é”™è¯¯çš„è¯æ˜¯ä¸ä¼špingçš„é€šçš„ï¼Œå› æ­¤åº”è¯¥æ ¼å¤–æ³¨æ„\n\nè‹¥ä¸»æœºè¿çš„æ˜¯WiFiï¼Œåˆ™è™šæ‹Ÿæœºè®¾ç½®->ç½‘ç»œ->å¯ç”¨ç½‘ç»œè¿æ¥ï¼ˆæ¡¥æ¥ç½‘å¡ï¼ŒRealtek  ......   Wireless Lan .......ï¼‰\n\nè‹¥ä¸»æœºè¿çš„æ˜¯æœ‰çº¿ç½‘ï¼Œåˆ™è™šæ‹Ÿæœºè®¾ç½®->ç½‘ç»œ->å¯ç”¨ç½‘ç»œè¿æ¥ï¼ˆæ¡¥æ¥ç½‘å¡ï¼ŒRealtek  PCIe GBE Family ........ï¼‰\n\nè‡³æ­¤ï¼Œå·²å…¨éƒ¨è®¾ç½®æˆåŠŸï¼Œä¸»æœºä¸è™šæ‹Ÿæœºä¹‹é—´ä¾¿å¯ä»¥äº’pingäº†\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n\n  [1]: http://img.blog.csdn.net/20150708225332168?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\n  [2]: http://img.blog.csdn.net/20150708225434716?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\n  [3]: http://img.blog.csdn.net/20150708230418229?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\n  [4]: http://img.blog.csdn.net/20150708230424484?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\n  [5]: http://img.blog.csdn.net/20150708232308064?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center","tags":["Linux"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"linux-ifconfigå‘½ä»¤é…ç½®ipåœ°å€","url":"/2015/07/08/Linux/linux-ifconfigå‘½ä»¤é…ç½®ipåœ°å€/","content":"\nLinuxä¸‹ç½‘å¡å‘½åè§„å¾‹ï¼šeth0ï¼Œeth1ã€‚ç¬¬ä¸€å—ä»¥å¤ªç½‘å¡ï¼Œç¬¬äºŒå—ã€‚\nloä¸ºç¯å›æ¥å£ï¼Œå®ƒçš„IPåœ°å€å›ºå®šä¸º127.0.0.1ï¼Œæ©ç 8ä½ã€‚å®ƒä»£è¡¨ä½ çš„æœºå™¨æœ¬èº«ã€‚ \nifconfig æ˜¯æŸ¥çœ‹ç½‘å¡çš„ä¿¡æ¯ ï¼Œå¦‚æœä¸åŠ å‚æ•°æŸ¥çœ‹çš„æ˜¯æ‰€æœ‰çš„ç½‘å¡ä¿¡æ¯ \n<!--More-->\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][1]\n\nåŠ ä¸Šå‚æ•°eth0çš„è¯æ˜¯æŸ¥çœ‹eth0ç½‘å¡çš„ä¿¡æ¯ \n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][2]\n\nç½‘å¡ä¿¡æ¯çš„ä¸€äº›è§£é‡Šï¼š \nç¬¬ä¸€è¡Œï¼šè¿æ¥ç±»å‹ï¼šEthernetï¼ˆä»¥å¤ªç½‘ï¼‰HWaddrï¼ˆç¡¬ä»¶macåœ°å€ï¼‰ \n \nç¬¬äºŒä¸‰è¡Œï¼šç½‘å¡çš„IPåœ°å€ã€å­ç½‘ã€æ©ç  \n \nç¬¬å››è¡Œï¼šUPï¼ˆä»£è¡¨ç½‘å¡å¼€å¯çŠ¶æ€ï¼‰RUNNINGï¼ˆä»£è¡¨ç½‘å¡çš„ç½‘çº¿è¢«æ¥ä¸Šï¼‰MULTICASTï¼ˆæ”¯æŒç»„æ’­ï¼‰\nMTU:1500ï¼ˆæœ€å¤§ä¼ è¾“å•å…ƒï¼‰ï¼š1500å­—èŠ‚   www.2cto.com  \n \nä¸‹é¢å°±æ˜¯æ¥æ”¶ã€å‘é€æ•°æ®åŒ…æƒ…å†µç»Ÿè®¡å’Œå‘é€æ¥å—æ•°æ®å­—èŠ‚æ•°çš„ç»Ÿè®¡ä¿¡æ¯ã€‚ \n \né…ç½®ç½‘å¡çš„IPåœ°å€ \n \nifconfig eth0 192.168.168.64 netmask 255.255.255.0  \n \nåœ¨eth0ä¸Šé…ç½®ä¸Š192.168.168.64 çš„IPåœ°å€åŠå­ç½‘æ©ç ã€‚ \n \né…ç½®ç½‘å¡çš„ç¡¬ä»¶åœ°å€ \nifconfig eth0 hw ether xxï¼šxxï¼šxxï¼šxxï¼šxxï¼šxx  \n \nç¦ç”¨ç½‘å¡eth0  \nifconfig eth0 down  \n \nå¯ç”¨ç½‘å¡eth0   \nifconfig eth0 up  \n \nå¦å¤–å¯åŠ¨å’Œç¦ç”¨ç½‘å¡è¿˜å¯ä»¥ä½¿ç”¨ifup | ifdown  eth0\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n\n  [1]: http://img.blog.csdn.net/20150708123431916?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\n  [2]: http://img.blog.csdn.net/20150708123456712?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center","tags":["Linux"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"äºŒã€hadoopä¼ªåˆ†å¸ƒæ­å»º","url":"/2015/07/07/Hadoop/äºŒã€hadoopä¼ªåˆ†å¸ƒæ­å»º/","content":"æœ¬æ–‡ä¸»è¦ä»‹ç»Hadoopçš„ä¼ªåˆ†å¸ƒå®‰è£…ï¼ŒåŸºäºUbuntu14.04è¿›è¡Œã€‚\n\n<!--More-->\n\n# ç¯å¢ƒ                                              \n\nè™šæ‹Ÿæœºï¼šVirtualBox\nUbuntu:14.04\nhadoop:2.6\n\n# å®‰è£…                                             \n\n## 1ã€åˆ›å»ºhadoopç”¨æˆ·\n\nsudo useradd -m hadoop -s/bin/bash\nã€Ubuntuç»ˆç«¯å¤åˆ¶ç²˜è´´å¿«æ·é”®ã€‘\nã€åœ¨Ubuntuç»ˆç«¯çª—å£ä¸­ï¼Œå¤åˆ¶ç²˜è´´çš„å¿«æ·é”®éœ€è¦åŠ ä¸Šshiftï¼Œå³ç²˜è´´æ˜¯ ctrl+shift+vã€‚ã€‘\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ä¿®æ”¹å¯†ç ï¼ŒæŒ‰æç¤ºè¾“å…¥ä¸¤æ¬¡å¯†ç  hadoop :\n\n\n```\nsudo passwd hadoop\n```\nå¯ä¸º hadoop ç”¨æˆ·å¢åŠ ç®¡ç†å‘˜æƒé™ï¼Œæ–¹ä¾¿éƒ¨ç½²ï¼Œé¿å…ä¸€äº›å¯¹æ–°æ‰‹æ¥è¯´æ¯”è¾ƒæ£˜æ‰‹çš„æƒé™é—®é¢˜ï¼š\n```\nsudo adduser hadoop sudo\n```\n## 2ã€åˆ‡æ¢åˆ°hadoopç”¨æˆ·ä¸‹\n```\nsu hadoop\n```\n## 3ã€å®‰è£…SSH serverã€é…ç½®SSHæ— å¯†ç ç™»é™†\n\né›†ç¾¤ã€å•èŠ‚ç‚¹æ¨¡å¼éƒ½éœ€è¦ç”¨åˆ°SSHç™»é™†ï¼ˆç±»ä¼¼äºè¿œç¨‹ç™»é™†ï¼Œä½ å¯ä»¥ç™»å½•æŸå°Linuxç”µè„‘ï¼Œå¹¶ä¸”åœ¨ä¸Šé¢è¿è¡Œå‘½ä»¤ï¼‰ï¼ŒUbuntu é»˜è®¤å·²å®‰è£…äº† SSH clientï¼Œæ­¤å¤–è¿˜éœ€è¦å®‰è£… SSH serverï¼š\n```\nsudo apt-get install openssh-server\n```\nå®‰è£…åï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ç™»é™†æœ¬æœºï¼š\n```\nssh localhost\n```\næ­¤æ—¶ä¼šæœ‰æç¤º(SSHé¦–æ¬¡ç™»é™†æç¤º)ï¼Œè¾“å…¥ yes ã€‚ç„¶åæŒ‰æç¤ºè¾“å…¥å¯†ç hadoopï¼Œè¿™æ ·å°±ç™»é™†åˆ°æœ¬æœºäº†ã€‚\n\nä½†è¿™æ ·ç™»é™†æ˜¯éœ€è¦æ¯æ¬¡è¾“å…¥å¯†ç çš„ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®æˆSSHæ— å¯†ç ç™»é™†æ¯”è¾ƒæ–¹ä¾¿ã€‚\n\né¦–å…ˆé€€å‡ºåˆšæ‰çš„ sshï¼Œå°±å›åˆ°äº†æˆ‘ä»¬åŸå…ˆçš„ç»ˆç«¯çª—å£ï¼Œç„¶ååˆ©ç”¨ ssh-keygen ç”Ÿæˆå¯†é’¥ï¼Œå¹¶å°†å¯†é’¥åŠ å…¥åˆ°æˆæƒä¸­ï¼š\n```\nexit                                   # é€€å‡ºåˆšæ‰çš„ ssh localhost\ncd ~/.ssh/                             # è‹¥æ²¡æœ‰è¯¥ç›®å½•ï¼Œè¯·å…ˆæ‰§è¡Œä¸€æ¬¡ssh localhost\nssh-keygen -t rsa                      # ä¼šæœ‰æç¤ºï¼Œéƒ½æŒ‰å›è½¦å°±å¯ä»¥\ncat id_rsa.pub >> authorized_keys     # åŠ å…¥æˆæƒ\n```\næ­¤æ—¶å†ç”¨ ssh localhost å‘½ä»¤ï¼Œæ— éœ€è¾“å…¥å¯†ç å°±å¯ä»¥ç›´æ¥ç™»é™†æ­¤æ—¶å†ç”¨ ssh localhost å‘½ä»¤ï¼Œæ— éœ€è¾“å…¥å¯†ç å°±å¯ä»¥ç›´æ¥ç™»é™†\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][1]\n\n## 4ã€å®‰è£…Javaç¯å¢ƒ\nJavaç¯å¢ƒå¯é€‰æ‹© Oracle çš„ JDKï¼Œæˆ–æ˜¯ OpenJDKï¼ŒæŒ‰http://wiki.apache.org/hadoop/HadoopJavaVersionsä¸­è¯´çš„ï¼Œæ–°ç‰ˆæœ¬åœ¨ OpenJDK 1.7 ä¸‹æ˜¯æ²¡é—®é¢˜çš„ã€‚ä¸ºå›¾æ–¹ä¾¿ï¼Œè¿™è¾¹ç›´æ¥é€šè¿‡å‘½ä»¤å®‰è£… OpenJDK 7ã€‚\n```\nsudo apt-get install openjdk-7-jre openjdk-7-jdk\n```\nOpenJDK é»˜è®¤çš„å®‰è£…ä½ç½®ä¸º: /usr/lib/jvm/java-7-openjdk-amd64 (32ä½ç³»ç»Ÿåˆ™æ˜¯ /usr/lib/jvm/java-7-openjdk-i86 ï¼Œå¯é€šè¿‡å‘½ä»¤dpkg -L openjdk-7-jdkæŸ¥çœ‹åˆ°)ã€‚å®‰è£…å®Œåå°±å¯ä»¥ä½¿ç”¨äº†ï¼Œå¯ä»¥ç”¨java -version æ£€æŸ¥ä¸€ä¸‹ã€‚\n\næ¥ç€éœ€è¦é…ç½®ä¸€ä¸‹ JAVA_HOME ç¯å¢ƒå˜é‡ï¼Œä¸ºæ–¹ä¾¿ï¼Œæˆ‘ä»¬åœ¨ ~/.bashrc ä¸­è¿›è¡Œè®¾ç½®ï¼ˆæ‰©å±•é˜…è¯»:è®¾ç½®Linuxç¯å¢ƒå˜é‡çš„æ–¹æ³•å’ŒåŒºåˆ«ï¼‰ï¼š\n```\nvi ~/.bashrc\n```\nåœ¨æ–‡ä»¶æœ€å‰é¢æ·»åŠ å¦‚ä¸‹å•ç‹¬ä¸€è¡Œï¼ˆæ³¨æ„ = å·å‰åä¸èƒ½æœ‰ç©ºæ ¼ï¼‰ï¼Œå¹¶ä¿å­˜ï¼š\n```\nexport JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64\n```\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆè¯¥æ–‡ä»¶åŸæœ¬å¯èƒ½ä¸å­˜åœ¨ï¼Œå†…å®¹ä¸ºç©ºï¼Œè¿™ä¸å½±å“ï¼‰ï¼š\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][2]\n\né…ç½®JAVA_HOMEå˜é‡\n\næ¥ç€è¿˜éœ€è¦è®©è¯¥ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼Œæ‰§è¡Œå¦‚ä¸‹ä»£ç ï¼š\n```\nsource ~/.bashrc# ä½¿å˜é‡è®¾ç½®ç”Ÿæ•ˆ\necho $JAVA_HOME# æ£€éªŒæ˜¯å¦è®¾ç½®æ­£ç¡®\n```\nè®¾ç½®æ­£ç¡®çš„è¯ï¼Œä¼šè¾“å‡ºå¦‚ä¸‹ç»“æœï¼š\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][3]\n\næˆåŠŸé…ç½®JAVA_HOMEå˜é‡\n\n## 5ã€å®‰è£…hadoop\nè¿›å…¥hadoopæ‰€åœ¨çš„ç›®å½•å°†å…¶è§£å‹åˆ°/usr/local/hadoop\n```\nsudo tar -zxvf ./hadoop-2.6.0.tar.gz -C /usr/local  # è§£å‹åˆ°/usr/localä¸­\n\ncd /usr/local/\nsudo mv ./hadoop-2.6.0/ ./hadoop            # å°†æ–‡ä»¶å¤¹åæ”¹ä¸ºhadoop\nsudo chown -R hadoop:hadoop ./hadoop        # ä¿®æ”¹æ–‡ä»¶æƒé™\n```\nHadoopè§£å‹åå³å¯ä½¿ç”¨ã€‚è¾“å…¥å¦‚ä¸‹å‘½ä»¤æ¥æ£€æŸ¥ Hadoop \næ˜¯å¦å¯ç”¨ï¼ŒæˆåŠŸåˆ™ä¼šæ˜¾ç¤ºå‘½ä»¤ç”¨æ³•ï¼š\n```\ncd ./hadoop\n./bin/hadoop\n```\n\n## 6ã€hadoopä¼ªåˆ†å¸ƒé…ç½®\n\nHadoop çš„é…ç½®æ–‡ä»¶ä½äº /usr/local/hadoop/etc/hadoop/ ä¸­ï¼Œä¼ªåˆ†å¸ƒå¼éœ€è¦ä¿®æ”¹2ä¸ªé…ç½®æ–‡ä»¶core-site.xml å’Œhdfs-site.xml ã€‚Hadoopçš„é…ç½®æ–‡ä»¶æ˜¯ xml æ ¼å¼ï¼Œæ¯ä¸ªé…ç½®ä»¥å£°æ˜ property çš„ name å’Œ value çš„æ–¹å¼æ¥å®ç°ã€‚\n\nä¿®æ”¹é…ç½®æ–‡ä»¶ core-site.xml (vim /usr/local/hadoop/etc/hadoop/core-site.xml)ï¼Œå°†å½“ä¸­çš„\n```\n<configuration>\n</configuration>\n```\nä¿®æ”¹ä¸ºä¸‹é¢é…ç½®ï¼š\n```\n<configuration>\n    <property>\n        <name>hadoop.tmp.dir</name>\n        <value>file:/usr/local/hadoop/tmp</value>\n        <description>Abase for other temporary directories.</description>\n    </property>\n    <property>\n        <name>fs.defaultFS</name>\n        <value>hdfs://localhost:9000</value>\n    </property>\n</configuration>\n```\nåŒæ ·çš„ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ hdfs-site.xmlï¼š\n```\n<configuration>\n    <property>\n        <name>dfs.replication</name>\n        <value>1</value>\n    </property>\n    <property>\n        <name>dfs.namenode.name.dir</name>\n        <value>file:/usr/local/hadoop/tmp/dfs/name</value>\n    </property>\n    <property>\n        <name>dfs.datanode.data.dir</name>\n        <value>file:/usr/local/hadoop/tmp/dfs/data</value>\n    </property>\n</configuration>\n```\nä¿®æ”¹é…ç½®æ–‡ä»¶yarn-site.xml\n```\n<configuration> \n     <property>  \n        <name>mapreduce.framework.name</name>  \n        <value>yarn</value> \n    </property>  \n    <property> \n        <name>yarn.nodemanager.aux-services</name>  \n        <value>mapreduce_shuffle</value>  \n   </property> \n</configuration> \n```\né…ç½®å®Œæˆåï¼Œæ‰§è¡Œ namenode çš„æ ¼å¼\n```\nbin/hdfs namenode -format\n```\næˆåŠŸçš„è¯ï¼Œä¼šçœ‹åˆ°successfully formatted çš„æç¤ºï¼Œä¸”å€’æ•°ç¬¬5è¡Œçš„æç¤ºå¦‚ä¸‹ï¼ŒExitting with status 0 è¡¨ç¤ºæˆåŠŸï¼Œè‹¥ä¸ºExitting with status 1 åˆ™æ˜¯å‡ºé”™\n\næ¥ç€å¼€å¯å¦‚ä¸‹è¿›ç¨‹\n```\nsbin/start-dfs.sh\nsbin/start-yarn.sh\n```\nè‡³æ­¤ï¼Œæ‰€æœ‰çš„å·²ç»å®‰è£…å®Œäº‹ï¼Œä¸”æ‰€æœ‰æœåŠ¡éƒ½å·²ç»å¯åŠ¨\n\n# éªŒè¯\nhttp://127.0.0.1:8088\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][4]\n\nhttp://localhost:50070\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][5]\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][6]\n\n# æç¤º                           \næ¯æ¬¡è¿›å…¥è™šæ‹Ÿæœºç³»ç»Ÿæ—¶å¿…é¡»å…ˆè¿›å…¥hadoopç”¨æˆ·ä¸‹ï¼ˆsu hadoopï¼‰ï¼Œæ‰èƒ½å¼€å¯æœåŠ¡ï¼Œå¦åˆ™ä¼šæŠ¥é”™\nå‚è€ƒæ–‡ç« ï¼šwww.powerxing.com/install-hadoop/\n\nQQäº¤æµï¼š1923361654\n\nhadoopå®Œå…¨åˆ†å¸ƒå¼éƒ¨ç½²å‚è€ƒï¼šhttp://blog.csdn.net/gamer_gyt/article/details/51991893\n\nhadoopå•æœºç‰ˆéƒ¨ç½²å‚è€ƒï¼šhttp://blog.csdn.net/gamer_gyt/article/details/46545303\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n\n  [1]: http://img.blog.csdn.net/20150707210848767?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\n  [2]: http://img.blog.csdn.net/20150707210939550?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\n  [3]: http://img.blog.csdn.net/20150707211039921?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\n  [4]: http://img.blog.csdn.net/20150707220733097?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\n  [5]: http://img.blog.csdn.net/20150708115937081?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\n  [6]: http://img.blog.csdn.net/20150707220808406?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center","tags":["Hadoop"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"MySQLdbçš„å®‰è£…ä¸ä½¿ç”¨","url":"/2015/07/05/Python/MySQLdbçš„å®‰è£…ä¸ä½¿ç”¨/","content":"\nå®‰è£…å·²ç¼–è¯‘ç‰ˆæœ¬(æ­¤æ–¹æ³•ç®€ä¾¿å¿«æ·): http://www.codegood.com/downloads\n\næ ¹æ®è‡ªå·±ç³»ç»Ÿä¸‹è½½ï¼ŒåŒå‡»å®‰è£…ï¼Œæå®šï¼Œç„¶åimport MySQLdbï¼ŒæŸ¥çœ‹æ˜¯å¦æˆåŠŸ\n<!--More-->\n\n# å®‰è£…\n \næˆ‘çš„ï¼Œwin7,32ä½ï¼Œ2.7ç‰ˆæœ¬\n\nMySQL-python-1.2.3.win-amd32-py2.7.exe\n\n# ä½¿ç”¨\n```\n#!/usr/bin/python\n# encoding: utf-8\nimport time,MySQLdb\n# æ‰“å¼€æ•°æ®åº“è¿æ¥\ndb = MySQLdb.connect(\"localhost\",\"root\",\"root\",\"Python\" )\n# ä½¿ç”¨cursor()æ–¹æ³•è·å–æ“ä½œæ¸¸æ ‡\ncursor = db.cursor()\n\n#åˆ é™¤è¡¨\nsql = \"drop table if exists thinkgamer\"\ncursor.execute(sql)\n\n#åˆ›å»º\nsql = \"create table if not exists thinkgamer(name varchar(128) primary key,created int(10))\"\ncursor.execute(sql)\n\n#å†™å…¥\nsql = \"insert into thinkgamer(name,created) values(%s,%s)\"\nparam = (\"aaa\",int(time.time()))\nn = cursor.execute(sql,param)\nprint 'insert',n\n\n#å†™å…¥å¤šè¡Œ\nsql = \"insert into thinkgamer(name,created) values(%s,%s)\"\nparam = ((\"bbb\",int(time.time())),(\"ccc\",33),(\"ddd\",44))\nn = cursor.executemany(sql,param)\nprint \"insertmany\",n\n\n#æ›´æ–°\nsql= \"update thinkgamer set name=%s where name='aaa'\"\nparam = (\"zzz\")\nn = cursor.execute(sql,param)\nprint \"updata\",n\n\n#æŸ¥è¯¢\nn = cursor.execute(\"select * from thinkgamer\")\nfor row in cursor.fetchall():\n    print row\n    for r in row:\n        print r\n\n#åˆ é™¤\nsql = \"delete from thinkgamer where name =%s\"\nparam = (\"bbb\")\nn = cursor.execute(sql,param)\nprint \"delete\",n\n\n#æŸ¥è¯¢\nn = cursor.execute(\"select * from thinkgamer\")\nprint cursor.fetchall()\n\ncursor.close()\n\n#æäº¤\ndb.commit()\n#å…³é—­\ndb.close()\n\nè¾“å‡ºç»“æœï¼š\n\ninsert 1\ninsertmany 3\nupdata 1\n('zzz', 1436067892L)\nzzz\n1436067892\n('bbb', 1436067892L)\nbbb\n1436067892\n('ccc', 33L)\nccc\n33\n('ddd', 44L)\nddd\n44\ndelete 1\n(('zzz', 1436067892L), ('ccc', 33L), ('ddd', 44L))\n\n```\n\næ›´å¤šè¯¦æƒ…è¯·æˆ³ï¼š[MySQLdb User's Guide][1]\n\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n\n  [1]: http://mysql-python.sourceforge.net/MySQLdb.html","tags":["Python"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"VirtualBoxå…±äº«æ–‡ä»¶å¤¹è®¾ç½®åŠå¼€æœºè‡ªåŠ¨æŒ‚è½½","url":"/2015/06/28/Linux/VirtualBoxå…±äº«æ–‡ä»¶å¤¹è®¾ç½®åŠå¼€æœºè‡ªåŠ¨æŒ‚è½½/","content":"\né¦–å…ˆå£°æ˜ï¼šæœ¬äººçš„Vboxè™šæ‹Ÿæœºé‡Œè£…çš„æ˜¯Ubuntuï¼Œæœ¬æœºæ˜¯windows\n<!--More-->\n## 1ã€ç”¨VirtualBoxè™šæ‹Ÿæœºçš„å…±äº«æ–‡ä»¶å¤¹è®¾ç½®å…±äº«çš„æœ¬åœ°æ–‡ä»¶ï¼ˆæˆ‘çš„æ˜¯è®¾ç½®çš„æ˜¯æœ¬åœ°Eç›˜ï¼Œjavaæ–‡ä»¶å¤¹ï¼‰\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][1]\n\n## 2ã€è¿›å…¥è™šæ‹ŸæœºUbuntuç³»ç»Ÿï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œç”¨rootç”¨æˆ·æ“ä½œï¼ˆsudo -så›è½¦è¾“å…¥å¯†ç ï¼‰\n\né¦–å…ˆåœ¨è™šæ‹Ÿæœºä¸Šåˆ›å»ºä¸€ä¸ªå…±äº«ç›®å½•         eg:mkdir /mnt/share\n\nå®ç°æŒ‚è½½       mount -t vboxsf java /mnt/share    ï¼ˆjavaä¸ºæœ¬æœºwindowsä¸Šè®¾ç½®çš„å…±äº«æ–‡ä»¶å¤¹ï¼‰ \n\nå†æ¬¡è¿›å…¥  /mnt/share  ç›®å½•ä¸‹å°±å¯ä»¥çœ‹åˆ°windowsä¸‹javaå†…çš„æ–‡ä»¶äº†\n\n\n## 3ã€å®ç°å¼€æœºè‡ªåŠ¨æŒ‚è½½åŠŸèƒ½\n\nPSï¼šç½‘ä¸ŠæŸ¥åˆ°äº†èµ„æ–™åŸºæœ¬éƒ½æ˜¯è¯´åœ¨/etc/fstab æ–‡ä»¶æœ«æ·»åŠ ä¸€é¡¹\n\n /etc/fstab æ–‡ä»¶æœ«æ·»åŠ ä¸€é¡¹    \n```\nsharing /mnt/share vboxsf defaults 0 0   (æˆ–è€…sharing /mnt/share vboxsf rw,gid=100,uid=1000,auto 0 0ï¼‰\n```\næ³¨æ„ï¼ï¼ï¼\nä½†æˆ‘è¯•äº†Néï¼Œè¯æ˜è¿™æ˜¯ä¸å¥½ä½¿çš„ã€‚\n\n\n\næ­£ç¡®çš„è§£å†³åŠæ³•æ˜¯ï¼š\n\nåœ¨æ–‡ä»¶ /etc/rc.local ä¸­ï¼ˆç”¨rootç”¨æˆ·ï¼‰è¿½åŠ å¦‚ä¸‹å‘½ä»¤\n```\nmount -t vboxsf java /mnt/share\n```\nç”µè„‘å…³æœºåœ¨å¼€æœºå°±å¥½ä½¿äº†ï¼ˆå°ç¼–äº²æµ‹ï¼‰\n\n å¦å¤–ï¼Œåœ¨ VirtualBox 4.x ç‰ˆæœ¬ä¸­ï¼Œå·²æœ‰ä¸€ä¸ªâ€œè‡ªåŠ¨æŒ‚è½½â€åŠŸèƒ½ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][2]\n\nå†ä½¿ç”¨å‘½ä»¤ mountå®ç°æŒ‚è½½\nå®ƒè‡ªåŠ¨æŠŠè¿™äº›å…±äº«æ–‡ä»¶å¤¹æŒ‚è½½åˆ° /media/ ï¼Œç›®å½•ä¸‹äº†ï¼Œæˆ‘æƒ³è¦è¯´çš„æ˜¯ï¼Œè¿™ä¸ªæŒ‚è½½ç›®å½•ä¸æ˜¯æˆ‘æƒ³è¦çš„ï¼Œ\næ‰€ä»¥æˆ‘æ²¡é‡‡ç”¨VirtualBoxçš„è‡ªåŠ¨æŒ‚è½½åŠŸèƒ½ï¼ˆå› ä¸ºæŒ‚è½½ç›®å½•è‡ªå·±ä¸å¯æ§ï¼‰ã€‚\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n\n  [1]: http://img.blog.csdn.net/20150628232546631?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\n  [2]: http://img.blog.csdn.net/20150628232610414?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center","tags":["Linux"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"VirtualBoxå¯¼å…¥XXXX.vdiæ—¶æŠ¥é”™","url":"/2015/06/27/Linux/VirtualBoxå¯¼å…¥XXXX-vdiæ—¶æŠ¥é”™/","content":"\nvirtualboxå¯¼å…¥vdiæ–‡ä»¶æ—¶å‡ºç°ä¸‹é¢çš„é—®é¢˜ï¼š\n\n<!--More-->\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][1]\n\nè§£å†³æ–¹æ³•ï¼š\n\nwindows+Rï¼Œè¾“å…¥cmd,è¿›å…¥virtualboxçš„å®‰è£…ç›®å½•ï¼ˆæˆ–è€…åœ¨ç¡¬ç›˜ä¸­ç›´æ¥è¿›å…¥virtualboxçš„å®‰è£…ç›®å½•ï¼Œåœ¨ä»»åŠ¡æ é‡Œè¾“å…¥cmdï¼‰ï¼Œè¾“å…¥VBoxManage  internalcommands setvdiuuid D:\\path\\ubuntu.vdi\n\n æ³¨æ„ï¼Œåœ¨virtualbox4.0.4ä»¥ä¸Šè¯¥å‘½ä»¤æ”¹ä¸º\n\nVBoxManage internalcommands sethduuid D:\\path\\ubuntu.vdi\n\nç„¶åé‡æ–°å¯¼å…¥å³å¯ã€‚\n\nè¿™æ˜¯ä¸€ä¸ªé‡æ–°è®¾ç½®UUIDï¼ˆé€šç”¨å”¯ä¸€è¯†åˆ«ç ï¼‰å·çš„å‘½ä»¤ï¼ŒVirtualBoxæ²¡æœ‰é›†æˆåˆ°GUIç¯å¢ƒä¸­ï¼Œåªèƒ½åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ã€‚\n\n\nä»€ä¹ˆæ˜¯UUIDï¼Ÿ    è¯·ç‚¹å‡»UUID[è¯·ç‚¹å‡»UUID][2]\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n\n  [1]: http://img.blog.csdn.net/20150627102144937?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\n  [2]: https://baike.baidu.com/item/UUID?fr=aladdinfill/I0JBQkFCMA==/dissolve/70/gravity/Center","tags":["Linux"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"æ–°æµªæ˜æ˜Ÿæ—¥å¿—çƒ­é—¨æ¨èï¼ˆjavaå®ç°ï¼‰","url":"/2015/06/19/Java/æ–°æµªæ˜æ˜Ÿæ—¥å¿—çƒ­é—¨æ¨èï¼ˆjavaå®ç°ï¼‰/","content":"\nç°åœ¨è¿›è¡Œæ¨èçš„ä¸‰æ­¥å¦‚ä¸‹ï¼š\n\n<!--More-->\n\n# 1:åˆ©ç”¨æ•°æ®çš„æ ¼å¼å¦‚ä¸‹\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][1]\n\n# 2ï¼šç¼–ç¨‹è¯­è¨€é‡‡ç”¨çš„æ˜¯Javaï¼Œæºä»£ç å¦‚ä¸‹ï¼š\n```\npackage top10;\n\nimport java.util.*;\nimport java.io.*;\n\npublic class top {\n\n    public static void top(String []one,String []two,String []three){\n        int []one1 = new int[15688];\n        for(int i =0;i<15687;i++)\n            {\n            one1[i]=0;\n            for(int j=i;j<15688;j++)\n                if(one[j]==one[i])\n                {\n                    one1[i]++;\n                }\n            }\n        for(int i =0;i<15688;i++)\n            for(int j=i;j<15688;j++)\n                if(one1[i]>one1[j])\n                {\n                    String temp1;\n                    temp1=one[i];\n                    one[i]=one[j];\n                    one[j]=temp1;\n                    \n                    String temp2;\n                    temp2=two[i];\n                    two[i]=two[j];\n                    two[j]=temp2;\n                    \n                    String temp3;\n                    temp3=three[i];\n                    three[i]=three[j];\n                    three[j]=temp3;\n                }\n        System.out.println(\"Topå‰åçš„ç»“æœä¸ºï¼š\");\n        System.out.println(\"å§“å\\t\"+\"\\tæ¨èåšå®¢åœ°å€\"+\"\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\"+\"æ¨èä½œè€…åšå®¢é¦–åœ°å€\");\n        for(int k=1;k<=10;k++)\n        {\n            String str;\n                str = String.format(\"%s\\t\\t%s\\t\\t%s\", one[k],two[k],three[k]);\n            System.out.println(str);\n        }\n            \n    }\n    \n    public static void list() throws IOException{\n        FileReader in = new FileReader(\"title.txt\");\n        BufferedReader br = new BufferedReader(in);\n        String s1 = null;\n        String []one = new String[15688];\n        String []two = new String[15688];\n        String []three = new String[15688];\n        int i = 0,k=0,m=0,j = 1;\n        while((s1 = br.readLine()) != null) {\n            if(j%3==2)\n            {\n                two[k] = s1;\n                k++;\n            }\n            else if(j%3==0)\n            {\n                three[m] = s1;\n                m++;\n            }\n            else\n                {\n                one[i] = s1;        \n                i++;\n                }\n            j++;\n            }\n        br.close();\n        in.close();\n//        System.out.println(j);\n        top(one,two,three);\n    }\n    \n    public static void main(String[] args) throws IOException {\n        // TODO Auto-generated method stub\n        \n        System.out.println(\"+++++++++++++++++|||||||||||||||++++++++++++++++++\");\n        System.out.println(\"**************æ¬¢è¿ä½¿ç”¨æ–°æµªæ˜æ˜Ÿåšå®¢æ¨èç³»ç»Ÿ          ***************\");\n        System.out.println(\"**************    1ã€ä½¿ç”¨æ¨èåŠŸèƒ½                        ***************\");\n        System.out.println(\"**************    2ã€é€€å‡ºæ­¤ç³»ç»Ÿ,è°¢è°¢ä½¿ç”¨       ***************\");\n        System.out.println(\"+++++++++++++++++|||||||||||||||++++++++++++++++++\");\n        Scanner in = new Scanner(System.in);\n        while(true)\n        {\n            int i = in.nextInt();\n            {\n                switch(i)\n                {\n                case 1: list();break;\n                case 2:System.out.println(\"è°¢è°¢ä½¿ç”¨ï¼ï¼ï¼\");break;\n                default:System.out.println(\"è¯·é‡æ–°è¾“å…¥ï¼ï¼ï¼\");\n                }\n            }\n        }\n        \n    }\n}\n```\n# 3ï¼šè¿è¡Œçš„ç»“æœå¦‚å›¾\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][2]\n\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n\n  [1]: http://img.blog.csdn.net/20150628233105944?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\n  [2]: http://img.blog.csdn.net/20150628233009834?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center","tags":["Java"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"ä¸€ã€Hadoop2.6.0å•æœºæ¨¡å¼é…ç½®","url":"/2015/06/18/Hadoop/ä¸€ã€Hadoop2-6-0å•æœºæ¨¡å¼é…ç½®/","content":"\nå¢åŠ hadoopç”¨æˆ·ç»„ï¼ŒåŒæ—¶åœ¨è¯¥ç»„é‡Œå¢åŠ hadoopç”¨æˆ·ï¼Œåç»­åœ¨æ¶‰åŠåˆ°hadoopæ“ä½œæ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨è¯¥ç”¨æˆ·ã€‚\n\n<!--More-->\n\n# ä¸€ã€åœ¨Ubuntuä¸‹åˆ›å»ºhadoopç»„å’Œhadoopç”¨æˆ·\n\n\n## 1ã€åˆ›å»ºhadoopç”¨æˆ·ç»„\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][1]\n\n## 2ã€åˆ›å»ºhadoopç”¨æˆ·\n```\nsudo adduser -ingroup hadoop hadoop\n```\n\nå›è½¦åä¼šæç¤ºè¾“å…¥æ–°çš„UNIXå¯†ç ï¼Œè¿™æ˜¯æ–°å»ºç”¨æˆ·hadoopçš„å¯†ç ï¼Œè¾“å…¥å›è½¦å³å¯ã€‚\n\nå¦‚æœä¸è¾“å…¥å¯†ç ï¼Œå›è½¦åä¼šé‡æ–°æç¤ºè¾“å…¥å¯†ç ï¼Œå³å¯†ç ä¸èƒ½ä¸ºç©ºã€‚\n\næœ€åç¡®è®¤ä¿¡æ¯æ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœæ²¡é—®é¢˜ï¼Œè¾“å…¥ Yï¼Œå›è½¦å³å¯ã€‚\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][2]\n##  3ã€ä¸ºhadoopç”¨æˆ·æ·»åŠ æƒé™\n\nè¾“å…¥ï¼šsudo gedit /etc/sudoers\nå›è½¦ï¼Œæ‰“å¼€sudoersæ–‡ä»¶\nç»™hadoopç”¨æˆ·èµ‹äºˆå’Œrootç”¨æˆ·åŒæ ·çš„æƒé™\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][3]\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][4]\n\n# äºŒã€ç”¨æ–°å¢åŠ çš„hadoopç”¨æˆ·ç™»å½•Ubuntuç³»ç»Ÿ\n\n# ä¸‰ã€å®‰è£…ssh\n```\nsudo apt-get install openssh-server\n```\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][5]\n\nå®‰è£…å®Œæˆåï¼Œå¯åŠ¨æœåŠ¡\n```\nsudo /etc/init.d/ssh start\n```\næŸ¥çœ‹æœåŠ¡æ˜¯å¦æ­£ç¡®å¯åŠ¨\n```\nps -e | grep ssh\n```\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][6]\n\nè®¾ç½®å…å¯†ç ç™»å½•ï¼Œç”Ÿæˆç§é’¥å’Œå…¬é’¥\n```\nssh-keygen -t rsa -P \"\"\n```\næ­¤æ—¶ä¼šåœ¨ï¼homeï¼hadoop/.sshä¸‹ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼šid_rsaå’Œid_rsa.pubï¼Œå‰è€…ä¸ºç§é’¥ï¼Œåè€…ä¸ºå…¬é’¥ã€‚\n\nä¸‹é¢æˆ‘ä»¬å°†å…¬é’¥è¿½åŠ åˆ°authorized_keysä¸­ï¼Œå®ƒç”¨æˆ·ä¿å­˜æ‰€æœ‰å…è®¸ä»¥å½“å‰ç”¨æˆ·èº«ä»½ç™»å½•åˆ°sshå®¢æˆ·ç«¯ç”¨æˆ·çš„å…¬é’¥å†…å®¹ã€‚\n```\ncat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys\n```\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][7]\nç™»å½•ssh\n```\nssh localhost\n```\né€€å‡º\n```\nexit\n```\n# å››ã€å®‰è£…Javaç¯å¢ƒ\n```\nsudo apt-get install openjdk-7-jdk\n```\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][8]\n\næŸ¥çœ‹å®‰è£…ç»“æœï¼Œè¾“å…¥å‘½ä»¤ï¼šjava -versionï¼Œç»“æœå¦‚ä¸‹è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][9]\n\n# äº”ã€å®‰è£…hadoop2.4.0\n## 1ã€å®˜ç½‘ä¸‹è½½http://mirror.bit.edu.cn/apache/hadoop/common/\n## 2ã€å®‰è£…\nè§£å‹\n```\nsudo tar xzf hadoop-2.4.0.tar.gz        \n```\nå‡å¦‚æˆ‘ä»¬è¦æŠŠhadoopå®‰è£…åˆ°/usr/localä¸‹\næ‹·è´åˆ°/usr/local/ä¸‹ï¼Œæ–‡ä»¶å¤¹ä¸ºhadoop\n```\nsudo mv hadoop-2.4.0 /usr/local/hadoop    \n```\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][10]\n\nèµ‹äºˆç”¨æˆ·å¯¹è¯¥æ–‡ä»¶å¤¹çš„è¯»å†™æƒé™\n```\nsudo chmod 774 /usr/local/hadoop\n```\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][11]\n\n## 3ã€é…ç½®\n### 1ï¼‰é…ç½®~/.bashrc\n\né…ç½®è¯¥æ–‡ä»¶å‰éœ€è¦çŸ¥é“Javaçš„å®‰è£…è·¯å¾„ï¼Œç”¨æ¥è®¾ç½®JAVA_HOMEç¯å¢ƒå˜é‡ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤è¡ŒæŸ¥çœ‹å®‰è£…è·¯å¾„\n```\nupdate-alternatives - -config java\n```\næ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][12]\n\nå®Œæ•´çš„è·¯å¾„ä¸º\n\n```\n/usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java\n```\n\næˆ‘ä»¬åªå–å‰é¢çš„éƒ¨åˆ† /usr/lib/jvm/java-7-openjdk-amd64\né…ç½®.bashrcæ–‡ä»¶\n```\nsudo gedit ~/.bashrc\n```\nè¯¥å‘½ä»¤ä¼šæ‰“å¼€è¯¥æ–‡ä»¶çš„ç¼–è¾‘çª—å£ï¼Œåœ¨æ–‡ä»¶æœ«å°¾è¿½åŠ ä¸‹é¢å†…å®¹ï¼Œç„¶åä¿å­˜ï¼Œå…³é—­ç¼–è¾‘çª—å£ã€‚\n```\n#HADOOP VARIABLES START\nexport JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64\nexport HADOOP_INSTALL=/usr/local/hadoop\nexport PATH=$PATH:$HADOOP_INSTALL/bin\nexport PATH=$PATH:$HADOOP_INSTALL/sbin\nexport HADOOP_MAPRED_HOME=$HADOOP_INSTALL\nexport HADOOP_COMMON_HOME=$HADOOP_INSTALL\nexport HADOOP_HDFS_HOME=$HADOOP_INSTALL\nexport YARN_HOME=$HADOOP_INSTALL\nexport HADOOP_COMMON_LIB_NATIVE_DIR=$HADOOP_INSTALL/lib/native\nexport HADOOP_OPTS=\"-Djava.library.path=$HADOOP_INSTALL/lib\"\n#HADOOP VARIABLES END\n```\næœ€ç»ˆç»“æœå¦‚ä¸‹å›¾ï¼š\n\n![æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][13]\n\næ‰§è¡Œä¸‹é¢å‘½ï¼Œä½¿æ·»åŠ çš„ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼š\n```\nsource ~/.bashrc\n```\n\n### 2ï¼‰ç¼–è¾‘/usr/local/hadoop/etc/hadoop/hadoop-env.sh\næ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œæ‰“å¼€è¯¥æ–‡ä»¶çš„ç¼–è¾‘çª—å£\n```\nsudo gedit /usr/local/hadoop/etc/hadoop/hadoop-env.sh\n```\næ‰¾åˆ°JAVA_HOMEå˜é‡ï¼Œä¿®æ”¹æ­¤å˜é‡å¦‚ä¸‹\n```\nexport JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64    \n```\nä¿®æ”¹hadoop-env.shæ–‡ä»¶\n\n# å…­ã€WordCountæµ‹è¯•\n \n\nå•æœºæ¨¡å¼å®‰è£…å®Œæˆï¼Œä¸‹é¢é€šè¿‡æ‰§è¡Œhadoopè‡ªå¸¦å®ä¾‹WordCountéªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸï¼š\n\nåœ¨/usr/local/hadoopè·¯å¾„ä¸‹åˆ›å»ºinputæ–‡ä»¶å¤¹ï¼š   \n```\nmkdir input\n(æˆ– sudo mkdir /usr/local/hadoop/input)\n```\næ‹·è´README.txtåˆ°inputï¼š   \n```\ncp README.txt input\n```\næ‰§è¡ŒWordCountï¼š\n```\nbin/hadoop jarshare/hadoop/mapreduce/sources/hadoop-mapreduce-examples-2.4.0-sources.jarorg.apache.hadoop.examples.WordCount input output\n```\n\næ‰§è¡Œ\n```\ncat output/*\n```\næŸ¥çœ‹å­—ç¬¦ç»Ÿè®¡ç»“æœ\n\nè‡³æ­¤ï¼Œå•æœºæ¨¡å¼å®‰è£…æˆåŠŸï¼\n\n\nhadoopä¼ªåˆ†å¸ƒéƒ¨ç½²å‚è€ƒï¼š[ç‚¹å‡»æ‰“å¼€é“¾æ¥][14]\n\nhadoopå®Œå…¨åˆ†å¸ƒå¼éƒ¨ç½²å‚è€ƒï¼š[ç‚¹å‡»æ‰“å¼€é“¾æ¥][15]\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n\n  [1]: http://images.cnitblog.com/blog/12097/201406/181325537236804.png\n  [2]: http://images.cnitblog.com/blog/12097/201406/181325547071504.png\n  [3]: http://images.cnitblog.com/blog/12097/201406/181325553952348.png\n  [4]: http://images.cnitblog.com/blog/12097/201406/181325561927991.png\n  [5]: http://images.cnitblog.com/blog/12097/201406/181325569737863.png\n  [6]: http://images.cnitblog.com/blog/12097/201406/181325580364821.png\n  [7]: http://images.cnitblog.com/blog/12097/201406/181325593481023.png\n  [8]: http://images.cnitblog.com/blog/12097/201406/181326008641052.png\n  [9]: http://images.cnitblog.com/blog/12097/201406/181326019736724.png\n  [10]: http://images.cnitblog.com/blog/12097/201406/181326023644310.png\n  [11]: http://images.cnitblog.com/blog/12097/201406/181326027238353.png\n  [12]: http://images.cnitblog.com/blog/12097/201406/181326030041140.png\n  [13]: http://images.cnitblog.com/blog/12097/201406/181326035825782.png\n  [14]: http://blog.csdn.net/gamer_gyt/article/details/46793731\n  [15]: http://blog.csdn.net/gamer_gyt/article/details/51991893\n","tags":["Hadoop"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"Ubuntuä¸‹ç»ˆç«¯é—ªé€€","url":"/2015/03/22/Linux/Ubuntuä¸‹ç»ˆç«¯é—ªé€€/","content":"\n\næ‰§è¡Œå‘½ä»¤\n```\nsudo ls -al / | grep tmp\n```\n<!--More-->\n\nç»§ç»­æ‰§è¡Œå‘½ä»¤ï¼š\n```\nsudo chmod 1777 /temp\n```\nå³å¯\n\n\né™„ï¼šå…³äºtmpçš„ç›¸å…³è¯´æ˜ï¼š\n\nhttp://www.ubuntu-tw.org/modules/newbb/viewtopic.php?viewmode=compact&topic_id=11904&forum=2\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["Linux"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"Javaæ–‡ä»¶çš„å†™å…¥ä¸è¯»å‡º","url":"/2015/03/17/Java/Javaæ–‡ä»¶çš„å†™å…¥ä¸è¯»å‡º/","content":"\n> ç”±äºè¦å°†çˆ¬è™«çš„ç»“æœå†™åˆ°æ–‡ä»¶é‡Œï¼Œå°±è‡ªå·±æ™šä¸Šæœäº†ä¸€ç‚¹èµ„æ–™ï¼Œçœ‹äº†åˆ«äººçš„åšå®¢ï¼Œè¡¥å……äº†ä¸€ç‚¹æ–‡ä»¶çš„åŸºç¡€çŸ¥è¯†ï¼Œç°å°†å…¶æ•´ç†å¦‚ä¸‹ï¼Œä¾›å¤§å®¶å‚è€ƒ Javaæ–‡ä»¶çš„å†™å…¥å’Œè¯»å‡ºæœ‰å¾ˆå¤šç§æ–¹æ³•æˆ‘æ‰€ä»‹ç»çš„ä¸»è¦æ˜¯Read/Writerï¼ŒOutputStream/InputStream\n\n<!--More-->\n\n# ä¸€ï¼šRead/Writer\nç”±äºJavaæœ¬èº«å¯ä»¥å¯¼å…¥è®¸å¤šåŒ…ï¼Œåœ¨è¿™é‡Œå¯ä»¥ç›´æ¥è°ƒç”¨Javaçš„ioï¼Œè¯­å¥æ˜¯ import java.ioï¼›\næœ¬äººæ˜¯å°†FileWriterå’ŒFileReadç†è§£ä¸ºä¸€ä¸ªç±»ï¼Œåˆ†åˆ«å®šä¹‰äº†ä¸¤ä¸ªå¯¹è±¡ï¼ŒFileWriter gyt = new FileWriter(\"Thinkgamer.txt\");\nFileReader out = new FileReader(\"Thinkgamer.txt\");\nä½¿ç”¨gyt.write(str,int,int)å°†å…¶å†™å…¥åˆ°.txtæ ¼å¼çš„æ–‡ä»¶é‡Œï¼Œå†ç”¨ch = out.read()å°†å…¶è¾“å‡ºã€‚\nå…¶å®Œæ•´ä»£ç å¦‚ä¸‹\n```\npackage Thinkgamer;\n\nimport java.io.*;\n\npublic class cyan {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        \n        String str = \"Thinkgamer QQ is 1923361654\";\n        try{\n            FileWriter gyt = new FileWriter(\"Thinkgamer.txt\");\n            gyt.write(str,0,str.length());\n            gyt.flush();\n            \n            \n            FileReader out = new FileReader(\"Thinkgamer.txt\");\n            int ch = 0;\n            while((ch = out.read())!=-1){\n            System.out.print((char)ch);\n            }\n        }\n        catch(Exception as){\n            as.printStackTrace();\n        }\n    }\n}\n```\n# äºŒï¼šOutputStream/InputStream\n```\npackage Thinkgamer;\n\nimport java.io.*;\n\npublic class cyan {\n\n   public static void main(String[] args) {\n\n        String str = \"Thinkgamer QQ is 1923361654\";\n        try{\n        //    \n            OutputStream gyt = new FileOutputStream(\"Thinkgamer.txt\");\n            //    \n            OutputStreamWriter out = new OutputStreamWriter(gyt);\n     \n            OutputStreamWriter out = new OutputStreamWriter(new FileOutputStream(\"Thinkgamer.txt\"));\n     \n            FileInputStream in = new FileInputStream(\"Thinkgamer.txt\");\n     \n            out.write(str,0,str.length());\n            out.flush();\n     \n            for(int i =0;i < str.length();i++)\n            {\n                System.out.print((char)in.read());\n            }\n      }\n        catch(Exception ex){\n            ex.printStackTrace();\n        }\n    }\n }\n```\n\nç‰¹åˆ«æ³¨æ„ï¼š\n//åœ¨ä½¿ç”¨æ–‡ä»¶ä¹‹åæ³¨æ„å°†æ–‡ä»¶å…³é—­\n//å…³é—­çš„è¯­å¥æ˜¯gyt.flush();\n//gytä¸ºRead/Writeræˆ–OutputStream/InputStreamæ‰€åˆ›å»ºçš„ä¸€ä¸ªå¯¹è±¡\nOutputStream/InputStreamçš„ç†è§£å’ŒRead/Writeræ–¹æ³•å·®ä¸å¤šï¼Œåœ¨è¿™é‡Œå°ç¼–åªå°†æœ¬äººå†™çš„ä»£ç è´´å‡ºæ¥\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["Java"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"Pythonä¸­try...except...finallyçš„ç†è§£","url":"/2015/01/05/Python/Pythonä¸­try-except-finallyçš„ç†è§£/","content":"\né¦–å…ˆæˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶ï¼š\n\n```\nfp = open(\"null.txt\",\"r\")  \n```\nç„¶åæç¤ºæŠ¥é”™å¦‚ä¸‹ï¼š\n\n<!--More-->\n\n```\nIOErro Traceback (most recent call last)  \n<ipython-input-3-f70973547c7e> in <module>()  \n----> 1 fp = open(\"null.txt\",\"r\")  \n  \nIOError: [Errno 2] No such file or directory: 'null.txt'  \n```\n\næ¥ç€æˆ‘ä»¬ä½¿ç”¨try...except...æ¥æ‰§è¡Œè¿™æ¡è¯­å¥\n\n```\nIn [4]: try:  \n   ...:     fp = open(\"null.txt\",\"r\")  \n   ...: except:  \n   ...:     print \"open error\"  \n   ...:       \nopen error  \n```\n\n\næ¥ç€æˆ‘ä»¬å†åœ¨åé¢åŠ ä¸€æ¡finallyè¯­å¥ï¼Œæ‰€è°“çš„filallyå°±æ˜¯æœ€åè¦æ‰§è¡Œçš„ï¼Œå®ƒä¸ç®¡ä½ å‰è¾¹æ˜¯å¦å‘é€é”™è¯¯\n```\nIn [4]: try:  \n   ...:     fp =open('null.txt','r')  \n   ...: except:  \n   ...:     print 'opoen error'  \n   ...: finally:  \n   ...:     print 'end'  \n   ...:       \nopoen error  \nend  \n```\n    \næ¥ç€æˆ‘ä»¬ä½¿ç”¨exceptæ‰“å°å‡ºé”™è¯¯ç±»å‹ï¼Œç„¶åè§‚å¯Ÿé”™è¯¯çš„type\n\n```\nIn [5]: try:  \n   ...:     fp = open('null.txt','r')  \n   ...: except Exception,e:  \n   ...:     print e  \n   ...:     print type(e)  \n   ...:       \n[Errno 2] No such file or directory: 'null.txt'  \n<type 'exceptions.IOError'>  \n```\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°exceptæŠŠé”™è¯¯æ•æ‰åˆ°èµ‹å€¼ç»™eï¼Œç„¶åå°†å…¶æ‰“å°å‡ºï¼Œå¯ä»¥çœ‹åˆ°ä¸ºIOErrorï¼Œæ‰€ä»¥åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸Šè¾¹ä¸ºï¼š\n```\nIn [9]: try:  \n   ...:     fp = open('null.txt', 'r')  \n   ...: except IOError,e:  \n   ...:     print \"ioerror\"  \n   ...:       \nioerror  \n```\nå½“ç„¶è¿™é‡Œå¦‚æœä¸æ˜¯IOErrorçš„è¯ï¼Œä¸Šè¾¹exceptè¯­å¥æ˜¯æ•æ‰ä¸åˆ°çš„ï¼Œä¾‹å¦‚ï¼š\n\n```\nIn [10]: try:  \n   ....:     a = 10/0  \n   ....: except IOError,e:  \n   ....:     print \"ioerror\"  \n   ....:       \n---------------------------------------------------------------------------  \nZeroDivisionError                         Traceback (most recent call last)  \n<ipython-input-10-e17eff88239d> in <module>()  \n      1 try:  \n----> 2     a = 10/0  \n      3 except IOError,e:  \n      4     print \"ioerror\"  \n      5   \n  \nZeroDivisionError: integer division or modulo by zero  \n```\nè¿™æ—¶æˆ‘ä»¬éœ€è¦å¦å¤–çš„é”™è¯¯ç±»å‹è¿›è¡Œæ•è·ï¼Œä¾‹å¦‚ï¼š\n```\nIn [11]: try:  \n   ....:     a = 10/0  \n   ....: except IOError,e:  \n   ....:     print \"IOError\"  \n   ....: except ZeroDivisionError,e:  \n   ....:     print \"Zero Error\"  \n   ....:       \nZero Error  \n```\nå¯ä»¥çœ‹åˆ°ç¬¬ä¸€ä¸ªexceptå¹¶æ²¡æœ‰æ•æ‰åˆ°é”™è¯¯ï¼Œæ‰€ä»¥ä¼ ç»™ä¸‹ä¸€ä¸ªexceptï¼Œå½“ç„¶å¦‚æœæ‰€æœ‰çš„exceptéƒ½æ²¡æœ‰æ•è·åˆ°çš„è¯ï¼Œç¨‹åºå°±ä¼šæŠ›å‡ºå¼‚å¸¸\nåœ¨è¿™é‡Œæˆ‘ä»¬ä¸å¾—ä¸æ³¨æ„çš„æ˜¯ï¼Œpythonçš„é”™è¯¯ç±»å‹å…¶å®éƒ½æ˜¯classï¼Œæ‰€æœ‰çš„é”™è¯¯ç±»å‹éƒ½ç»§æ‰¿è‡ªBaseExceptionï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨exceptæ—¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®ƒä¸ä½†æ•è·è¯¥ç±»å‹çš„é”™è¯¯ï¼Œè¿˜æŠŠå…¶å­ç±»ä¹Ÿâ€œä¸€ç½‘æ‰“å°½â€ã€‚æ¯”å¦‚ï¼š\n```\nIn [14]: try:  \n   ....:     a = 10 /0  \n   ....: except StandardError,e:  \n   ....:     print 'standardError'  \n   ....: except ZeroDivisionError,e:  \n   ....:     print 'zero error'  \n   ....:       \nstandardError  \n```\nç¬¬äºŒä¸ªexceptæ°¸è¿œä¹Ÿæ•è·ä¸åˆ°ValueErrorï¼Œå› ä¸ºZeroDivisionErroræ˜¯StandardErrorçš„å­ç±»ï¼Œå¦‚æœæœ‰ï¼Œä¹Ÿè¢«ç¬¬ä¸€ä¸ªexceptç»™æ•è·äº†ã€‚\nä½¿ç”¨try...except...finallyçš„å¦å¤–ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå¯ä»¥è·¨è¶Šå¤šå±‚è°ƒç”¨ï¼Œä¾‹å¦‚ï¼š\n\n```\nIn [15]: def foo(m):  \n   ....:     return 10/int(m)  \n   ....:   \n  \nIn [16]: def goo():  \n   ....:     a = \"0\"  \n   ....:     foo(a)  \n   ....:       \n  \nIn [17]: def main():  \n   ....:     goo()  \n   ....:       \n  \nIn [18]: try:  \n   ....:     main()  \n   ....: except Exception,e:  \n   ....:     print e  \n   ....:       \ninteger division or modulo by zero  \n```\nåœ¨foo()å‡½æ•°ä¸­æŠ›å‡ºçš„é”™è¯¯ï¼Œç„¶è€Œåœ¨gooå’Œmainå‡½æ•°ä¸­éƒ½æ²¡æœ‰è¿›è¡Œæ•æ‰ï¼Œåœ¨æ‰§è¡Œmainå‡½æ•°æ—¶è¿›è¡Œæ•è·ï¼Œä¹Ÿå¯ä»¥æ•è·åˆ°\n\né™¤äº†try...except...finallyä¹‹å¤–è¿˜æœ‰pythonçš„loggingæ¨¡å—ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œé”™è¯¯è°ƒè¯•ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨raiseæŠ›å‡ºå¼‚å¸¸\n\n----\n\n<center>\nã€æŠ€æœ¯æœåŠ¡ã€‘ï¼Œè¯¦æƒ…ç‚¹å‡»æŸ¥çœ‹ï¼š\n<a href=\"https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg\">https://mp.weixin.qq.com/s/PtX9ukKRBmazAWARprGIAg</a>\n</center>\n\n----\n\n<center>\n<img src=\"https://img-blog.csdnimg.cn/20191108184219834.jpeg\">\n<br>\næ‰«ä¸€æ‰« å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼å·ä¸» ä¸“æ³¨äºæœç´¢å’Œæ¨èç³»ç»Ÿï¼Œå°è¯•ä½¿ç”¨ç®—æ³•å»æ›´å¥½çš„æœåŠ¡äºç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸å±€é™äºæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ ï¼Œå¼ºåŒ–å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ï¼ŒçŸ¥è¯†å›¾è°±ï¼Œè¿˜ä¸å®šæ—¶åˆ†äº«æŠ€æœ¯ï¼Œèµ„æ–™ï¼Œæ€è€ƒç­‰æ–‡ç« ï¼\n</center>\n\n\n----\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121139935.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>\n\n<center><img src=\"https://img-blog.csdnimg.cn/20191105121309716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly90aGlua2dhbWVyLmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70\" width=\"80%\"></center>","tags":["Python"],"categories":["æŠ€æœ¯ç¯‡"]},{"title":"é€å»çš„å¤å¤©","url":"/2013/10/01/éšæ‰‹è®°/é€å»çš„å¤å¤©/","content":"\n<center>\né‚£å¹´çš„å¤å¤©ï¼Œæˆ‘ä»¬æ‹èµ·ä¹¦åŒ… \n<br>\næ— å¥ˆçš„èµ°å‘ï¼Œå¤ä¹ ç­çš„æ€€æŠ± \n<br>\nå¹»æƒ³ä¸€å¹´åï¼Œå¤§å­¦ç”Ÿæ´»çš„é€é¥ \n<br>\nå¯‚å¯¥ä¸è‹¦æ¼ï¼Œæˆ‘ä»¬ä¸€èµ·å»ç†¬ \n<br>\n\n<!--More-->\n\n<br><br>\næœˆå…‰ä¸‹ï¼Œæ¼«æ­¥æ“åœºï¼Œæœ‰äººå’Œå¿ƒçˆ±å§‘å¨˜å€¾è¯‰ç€è¡·è‚  \n<br>\nå¬ç€æ­Œï¼Œè¸è¿›æµå¹´ï¼Œå“¼å‡ºé‚£åŠ¨äººçš„æ­Œè°£åœ¨å˜´è¾¹ \n<br>\nåˆ°å¤œæ™šï¼Œå‚»å‚»å‘å‘†ï¼Œç­‰å¾…å¥¹å›å¤ç¾ä¸½çš„ç¬‘é¢œ\n<br>\nè¢«çªé‡Œï¼Œè°æµç€æ³ªï¼Œæœ›ç€æ¤­åœ†å’Œç£åœºï¼Œç”»å‡ºæ— å°½çš„èŒ«ç„¶ \n<br><br>\nè¡¨ç¤ºä»ä¸‹è¯¾åˆ°ä¸Šè¯¾çš„é“ƒå£°åŸæ¥ä¸€ç›´æ²¡å˜ \n<br>\nè¡¨ç¤ºè€ç­é¢åºå¸¦ç€å›§æ ·é•¿çš„å¤šè’å” \n<br>\nçœ‹ç€é’Ÿæ‘†æ™ƒè¡  æ—¶å…‰é£æ‰¬   è¿˜æœ‰å¯çˆ±å§‘å¨˜ \n<br>\nçœ‹ç€æ›¾ç»ä¼ å‡ºçš„çº¸æ¡ è·¨è¿‡å‡ äººå‡ è‚©è†€ \n<br><br>\næˆ‘ä»¬è¿½é€æ¢¦æƒ³ï¼Œå¥”å‘å¸Œæœ›ï¼Œä¸€è·¯èµ°æ¥è·Œè·Œåˆæ’æ’ \n<br>\nç•™ä¸‹æ±—æ°´ æ“¦å¹²çœ¼æ³ªå‘å‰ä¸€èµ·é—¯ \n<br>\nè€ƒè¯•å’Œçˆ±æƒ…çš„å®ˆæœ›å¤šä¹ˆä»¤äººå‘å¾€ \n<br>\nå„ç§å£®ä¸½è¯—è¡Œå’Œç¯‡ç« ä»æ­¤ä¸ä¼šå†å½·å¾¨ \n<br><br>\nå¤šå¹´åï¼Œä½ è‹¥æƒ³å¿µï¼Œæˆ‘ä»¬ä¸€ç›´éƒ½åšæŒçš„ç¬‘é¢œ \n<br>\nå¤šå¹´åï¼Œä½ è‹¥æ€€å¿µï¼Œè¯¾å ‚ä¸Šç¡è§‰çš„ç“œå­è„¸ \n<br>\néƒ½è¯´åƒä»–çš„èœå–ä»–çš„æ±¤é’±ç…§æ ·ä¼šèŠ±å…‰ \n<br>\néƒ½è¯´æ‹å¥¹çš„è‚©è¯·å¥¹åƒç³–ä¸€ç¬‘ä¸ºçº¢é¢œ \n<br>\néƒ½è¯´ä¸€åˆ†ä¸€ç§’åŠªåŠ›å­¦ä¹ æˆ–è€…ä¼ çº¸æ¡ \n<br>\néƒ½è¯´ä¼šæŠŠåŠŸåŠ³å…¨éƒ½è®°åœ¨æµå¹´çš„æ€€æŠ± \n<br>\n<br>\n\næˆ‘ä»¬å³å°†é«˜è€ƒï¼Œåˆ†åˆ«ä¹‹åï¼Œå¥”æ³¢åœ¨ä¸­å›½ä¸åŒè§’è½ \n<br>\nç¥è§çŸ­å‘å¥³å­©ï¼Œè¿˜ä¼šä»¥ä¸ºæ˜¯æˆ‘å¿ƒåŠ¨é‚£ä¸ªè° \n<br>\nè•¾å³°å½©æœˆé‡‘è±†åŒæ¡Œï¼ŒæŸæŸæˆ‘ç­‰ä½  \n<br>\nä¹Ÿè®¸å½¼æ­¤æŠŠå½¼æ­¤ä¸¢è¿›è®°å¿†çš„æµå¹´ \n<br>\nä½†è®°å¾—é‚£æ’æˆ‘ä»¬å¿«ä¹çš„æ—¥å­\n</center>\n\n----\n\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n","tags":["éšæ‰‹è®°"],"categories":["éšæ‰‹è®°"]},{"title":"åå…«å²ï¼ŒåŠå¤é”¦å¹´","url":"/2012/06/10/éšæ‰‹è®°/åå…«å²ï¼ŒåŠå¤é”¦å¹´/","content":">é€èµ°äº†æˆ‘çš„é’æ˜¥ï¼Œè¿æ¥æˆ‘æœªçŸ¥çš„è¿·æƒ˜ï¼Œå°†æ¥æˆ‘ä¼šèº«åœ¨ä½•æ–¹ï¼Œæˆ‘å°†æ°¸ä¸–ä¸å¿˜ã€‚ å†è§ï¼\n\n<!--More-->\n\n<center>\næ•£è½ä¸€åœ°ï¼Œæµç¦» \n<br>\nå›å¿†ä¸èµ·ï¼Œé’çŸ³æ¿é•¿å··çš„é›¨å­£\n<br>\nç‹¬è‡ªæ’‘ä¼ï¼Œæ²¡æœ‰ä½ é™ªä¼´çš„æ•…åœ° \n<br>\nç°Œç°Œæ¨±èŠ±ï¼Œé›¶è½æˆæ€ç»ª \n<br>\n\n\n<br>\nä¸€åœºé›¨ï¼Œè®©æˆ‘ç¦»å¼€è¿™é‡Œ \n<br>\nå‡ºå…¶ä¸æ„ï¼Œç‡•å•„æ³¥ \n<br>\nè¯‰è¯´é‚£åå…«å²åŠå¤é”¦å¹´ \n<br>\næœªå®Œçš„ç»“å±€ \n<br>\n<br>\né£è§è§ï¼Œé›¨å¯’å¯’ \n<br>\næ–­äº†è°çš„ç´å¼¦ï¼Œæ— è¯­é—®å¯’è‰ \n<br>\nå€šçª—è¾¹ï¼Œç©ºç™½å›å¿†é‡Œ è‰°éš¾å©‰è½¬â€¦ \n</center>\n\n\n----\n\n<center>\n<img src=\"http://img.blog.csdn.net/20171231111930492?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2FtZXJfZ3l0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\">\n</center>\n<center>æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€æœç´¢ä¸æ¨èWikiã€‘ </center>\n","tags":["éšæ‰‹è®°"],"categories":["éšæ‰‹è®°"]}]